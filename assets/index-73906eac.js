(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}})();var UA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function YT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var i=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}),i}var VP={exports:{}},W_={},jP={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=Symbol.for("react.element"),p8=Symbol.for("react.portal"),m8=Symbol.for("react.fragment"),g8=Symbol.for("react.strict_mode"),A8=Symbol.for("react.profiler"),v8=Symbol.for("react.provider"),y8=Symbol.for("react.context"),x8=Symbol.for("react.forward_ref"),E8=Symbol.for("react.suspense"),_8=Symbol.for("react.memo"),b8=Symbol.for("react.lazy"),TR=Symbol.iterator;function w8(n){return n===null||typeof n!="object"?null:(n=TR&&n[TR]||n["@@iterator"],typeof n=="function"?n:null)}var QP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WP=Object.assign,KP={};function t0(n,e,i){this.props=n,this.context=e,this.refs=KP,this.updater=i||QP}t0.prototype.isReactComponent={};t0.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};t0.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function XP(){}XP.prototype=t0.prototype;function qT(n,e,i){this.props=n,this.context=e,this.refs=KP,this.updater=i||QP}var $T=qT.prototype=new XP;$T.constructor=qT;WP($T,t0.prototype);$T.isPureReactComponent=!0;var IR=Array.isArray,YP=Object.prototype.hasOwnProperty,JT={current:null},qP={key:!0,ref:!0,__self:!0,__source:!0};function $P(n,e,i){var s,o={},l=null,c=null;if(e!=null)for(s in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(l=""+e.key),e)YP.call(e,s)&&!qP.hasOwnProperty(s)&&(o[s]=e[s]);var d=arguments.length-2;if(d===1)o.children=i;else if(1<d){for(var u=Array(d),f=0;f<d;f++)u[f]=arguments[f+2];o.children=u}if(n&&n.defaultProps)for(s in d=n.defaultProps,d)o[s]===void 0&&(o[s]=d[s]);return{$$typeof:yy,type:n,key:l,ref:c,props:o,_owner:JT.current}}function C8(n,e){return{$$typeof:yy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ZT(n){return typeof n=="object"&&n!==null&&n.$$typeof===yy}function M8(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(i){return e[i]})}var RR=/\/+/g;function SC(n,e){return typeof n=="object"&&n!==null&&n.key!=null?M8(""+n.key):e.toString(36)}function FE(n,e,i,s,o){var l=typeof n;(l==="undefined"||l==="boolean")&&(n=null);var c=!1;if(n===null)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case yy:case p8:c=!0}}if(c)return c=n,o=o(c),n=s===""?"."+SC(c,0):s,IR(o)?(i="",n!=null&&(i=n.replace(RR,"$&/")+"/"),FE(o,e,i,"",function(f){return f})):o!=null&&(ZT(o)&&(o=C8(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(RR,"$&/")+"/")+n)),e.push(o)),1;if(c=0,s=s===""?".":s+":",IR(n))for(var d=0;d<n.length;d++){l=n[d];var u=s+SC(l,d);c+=FE(l,e,i,u,o)}else if(u=w8(n),typeof u=="function")for(n=u.call(n),d=0;!(l=n.next()).done;)l=l.value,u=s+SC(l,d++),c+=FE(l,e,i,u,o);else if(l==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Bx(n,e,i){if(n==null)return n;var s=[],o=0;return FE(n,s,"","",function(l){return e.call(i,l,o++)}),s}function S8(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(i){(n._status===0||n._status===-1)&&(n._status=1,n._result=i)},function(i){(n._status===0||n._status===-1)&&(n._status=2,n._result=i)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Da={current:null},kE={transition:null},T8={ReactCurrentDispatcher:Da,ReactCurrentBatchConfig:kE,ReactCurrentOwner:JT};Fr.Children={map:Bx,forEach:function(n,e,i){Bx(n,function(){e.apply(this,arguments)},i)},count:function(n){var e=0;return Bx(n,function(){e++}),e},toArray:function(n){return Bx(n,function(e){return e})||[]},only:function(n){if(!ZT(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Fr.Component=t0;Fr.Fragment=m8;Fr.Profiler=A8;Fr.PureComponent=qT;Fr.StrictMode=g8;Fr.Suspense=E8;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T8;Fr.cloneElement=function(n,e,i){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=WP({},n.props),o=n.key,l=n.ref,c=n._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,c=JT.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var d=n.type.defaultProps;for(u in e)YP.call(e,u)&&!qP.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&d!==void 0?d[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=i;else if(1<u){d=Array(u);for(var f=0;f<u;f++)d[f]=arguments[f+2];s.children=d}return{$$typeof:yy,type:n.type,key:o,ref:l,props:s,_owner:c}};Fr.createContext=function(n){return n={$$typeof:y8,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:v8,_context:n},n.Consumer=n};Fr.createElement=$P;Fr.createFactory=function(n){var e=$P.bind(null,n);return e.type=n,e};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(n){return{$$typeof:x8,render:n}};Fr.isValidElement=ZT;Fr.lazy=function(n){return{$$typeof:b8,_payload:{_status:-1,_result:n},_init:S8}};Fr.memo=function(n,e){return{$$typeof:_8,type:n,compare:e===void 0?null:e}};Fr.startTransition=function(n){var e=kE.transition;kE.transition={};try{n()}finally{kE.transition=e}};Fr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Fr.useCallback=function(n,e){return Da.current.useCallback(n,e)};Fr.useContext=function(n){return Da.current.useContext(n)};Fr.useDebugValue=function(){};Fr.useDeferredValue=function(n){return Da.current.useDeferredValue(n)};Fr.useEffect=function(n,e){return Da.current.useEffect(n,e)};Fr.useId=function(){return Da.current.useId()};Fr.useImperativeHandle=function(n,e,i){return Da.current.useImperativeHandle(n,e,i)};Fr.useInsertionEffect=function(n,e){return Da.current.useInsertionEffect(n,e)};Fr.useLayoutEffect=function(n,e){return Da.current.useLayoutEffect(n,e)};Fr.useMemo=function(n,e){return Da.current.useMemo(n,e)};Fr.useReducer=function(n,e,i){return Da.current.useReducer(n,e,i)};Fr.useRef=function(n){return Da.current.useRef(n)};Fr.useState=function(n){return Da.current.useState(n)};Fr.useSyncExternalStore=function(n,e,i){return Da.current.useSyncExternalStore(n,e,i)};Fr.useTransition=function(){return Da.current.useTransition()};Fr.version="18.2.0";jP.exports=Fr;var Pr=jP.exports;const JP=vy(Pr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I8=Pr,R8=Symbol.for("react.element"),L8=Symbol.for("react.fragment"),B8=Object.prototype.hasOwnProperty,D8=I8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P8={key:!0,ref:!0,__self:!0,__source:!0};function ZP(n,e,i){var s,o={},l=null,c=null;i!==void 0&&(l=""+i),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(c=e.ref);for(s in e)B8.call(e,s)&&!P8.hasOwnProperty(s)&&(o[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)o[s]===void 0&&(o[s]=e[s]);return{$$typeof:R8,type:n,key:l,ref:c,props:o,_owner:D8.current}}W_.Fragment=L8;W_.jsx=ZP;W_.jsxs=ZP;VP.exports=W_;var ss=VP.exports,cS={},eO={exports:{}},wl={},tO={exports:{}},nO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,W){var J=K.length;K.push(W);e:for(;0<J;){var ee=J-1>>>1,he=K[ee];if(0<o(he,W))K[ee]=W,K[J]=he,J=ee;else break e}}function i(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var W=K[0],J=K.pop();if(J!==W){K[0]=J;e:for(var ee=0,he=K.length,me=he>>>1;ee<me;){var Be=2*(ee+1)-1,Se=K[Be],rt=Be+1,Ge=K[rt];if(0>o(Se,J))rt<he&&0>o(Ge,Se)?(K[ee]=Ge,K[rt]=J,ee=rt):(K[ee]=Se,K[Be]=J,ee=Be);else if(rt<he&&0>o(Ge,J))K[ee]=Ge,K[rt]=J,ee=rt;else break e}}return W}function o(K,W){var J=K.sortIndex-W.sortIndex;return J!==0?J:K.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var u=[],f=[],A=1,g=null,y=3,v=!1,_=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(K){for(var W=i(f);W!==null;){if(W.callback===null)s(f);else if(W.startTime<=K)s(f),W.sortIndex=W.expirationTime,e(u,W);else break;W=i(f)}}function M(K){if(x=!1,C(K),!_)if(i(u)!==null)_=!0,G(T);else{var W=i(f);W!==null&&V(M,W.startTime-K)}}function T(K,W){_=!1,x&&(x=!1,m(k),k=-1),v=!0;var J=y;try{for(C(W),g=i(u);g!==null&&(!(g.expirationTime>W)||K&&!Y());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,y=g.priorityLevel;var he=ee(g.expirationTime<=W);W=n.unstable_now(),typeof he=="function"?g.callback=he:g===i(u)&&s(u),C(W)}else s(u);g=i(u)}if(g!==null)var me=!0;else{var Be=i(f);Be!==null&&V(M,Be.startTime-W),me=!1}return me}finally{g=null,y=J,v=!1}}var N=!1,P=null,k=-1,D=5,z=-1;function Y(){return!(n.unstable_now()-z<D)}function ne(){if(P!==null){var K=n.unstable_now();z=K;var W=!0;try{W=P(!0,K)}finally{W?O():(N=!1,P=null)}}else N=!1}var O;if(typeof S=="function")O=function(){S(ne)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,U=F.port2;F.port1.onmessage=ne,O=function(){U.postMessage(null)}}else O=function(){b(ne,0)};function G(K){P=K,N||(N=!0,O())}function V(K,W){k=b(function(){K(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,G(T))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return i(u)},n.unstable_next=function(K){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var J=y;y=W;try{return K()}finally{y=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,W){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=y;y=K;try{return W()}finally{y=J}},n.unstable_scheduleCallback=function(K,W,J){var ee=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ee+J:ee):J=ee,K){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=J+he,K={id:A++,callback:W,priorityLevel:K,startTime:J,expirationTime:he,sortIndex:-1},J>ee?(K.sortIndex=J,e(f,K),i(u)===null&&K===i(f)&&(x?(m(k),k=-1):x=!0,V(M,J-ee))):(K.sortIndex=he,e(u,K),_||v||(_=!0,G(T))),K},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(K){var W=y;return function(){var J=y;y=W;try{return K.apply(this,arguments)}finally{y=J}}}})(nO);tO.exports=nO;var O8=tO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO=Pr,_l=O8;function Mn(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rO=new Set,Qv={};function Sp(n,e){zg(n,e),zg(n+"Capture",e)}function zg(n,e){for(Qv[n]=e,n=0;n<e.length;n++)rO.add(e[n])}var Sh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uS=Object.prototype.hasOwnProperty,F8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LR={},BR={};function k8(n){return uS.call(BR,n)?!0:uS.call(LR,n)?!1:F8.test(n)?BR[n]=!0:(LR[n]=!0,!1)}function N8(n,e,i,s){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function U8(n,e,i,s){if(e===null||typeof e>"u"||N8(n,e,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pa(n,e,i,s,o,l,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=n,this.type=e,this.sanitizeURL=l,this.removeEmptyString=c}var Ho={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ho[n]=new Pa(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ho[e]=new Pa(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ho[n]=new Pa(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ho[n]=new Pa(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ho[n]=new Pa(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ho[n]=new Pa(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ho[n]=new Pa(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ho[n]=new Pa(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ho[n]=new Pa(n,5,!1,n.toLowerCase(),null,!1,!1)});var e3=/[\-:]([a-z])/g;function t3(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(e3,t3);Ho[e]=new Pa(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(e3,t3);Ho[e]=new Pa(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(e3,t3);Ho[e]=new Pa(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ho[n]=new Pa(n,1,!1,n.toLowerCase(),null,!1,!1)});Ho.xlinkHref=new Pa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ho[n]=new Pa(n,1,!1,n.toLowerCase(),null,!0,!0)});function n3(n,e,i,s){var o=Ho.hasOwnProperty(e)?Ho[e]:null;(o!==null?o.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U8(e,i,o,s)&&(i=null),s||o===null?k8(e)&&(i===null?n.removeAttribute(e):n.setAttribute(e,""+i)):o.mustUseProperty?n[o.propertyName]=i===null?o.type===3?!1:"":i:(e=o.attributeName,s=o.attributeNamespace,i===null?n.removeAttribute(e):(o=o.type,i=o===3||o===4&&i===!0?"":""+i,s?n.setAttributeNS(s,e,i):n.setAttribute(e,i))))}var Dh=iO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dx=Symbol.for("react.element"),mg=Symbol.for("react.portal"),gg=Symbol.for("react.fragment"),i3=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),sO=Symbol.for("react.provider"),oO=Symbol.for("react.context"),r3=Symbol.for("react.forward_ref"),dS=Symbol.for("react.suspense"),fS=Symbol.for("react.suspense_list"),s3=Symbol.for("react.memo"),Id=Symbol.for("react.lazy"),aO=Symbol.for("react.offscreen"),DR=Symbol.iterator;function GA(n){return n===null||typeof n!="object"?null:(n=DR&&n[DR]||n["@@iterator"],typeof n=="function"?n:null)}var zs=Object.assign,TC;function Av(n){if(TC===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);TC=e&&e[1]||""}return`
`+TC+n}var IC=!1;function RC(n,e){if(!n||IC)return"";IC=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var s=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){s=f}n.call(e.prototype)}else{try{throw Error()}catch(f){s=f}n()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var o=f.stack.split(`
`),l=s.stack.split(`
`),c=o.length-1,d=l.length-1;1<=c&&0<=d&&o[c]!==l[d];)d--;for(;1<=c&&0<=d;c--,d--)if(o[c]!==l[d]){if(c!==1||d!==1)do if(c--,d--,0>d||o[c]!==l[d]){var u=`
`+o[c].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=c&&0<=d);break}}}finally{IC=!1,Error.prepareStackTrace=i}return(n=n?n.displayName||n.name:"")?Av(n):""}function G8(n){switch(n.tag){case 5:return Av(n.type);case 16:return Av("Lazy");case 13:return Av("Suspense");case 19:return Av("SuspenseList");case 0:case 2:case 15:return n=RC(n.type,!1),n;case 11:return n=RC(n.type.render,!1),n;case 1:return n=RC(n.type,!0),n;default:return""}}function pS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case gg:return"Fragment";case mg:return"Portal";case hS:return"Profiler";case i3:return"StrictMode";case dS:return"Suspense";case fS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oO:return(n.displayName||"Context")+".Consumer";case sO:return(n._context.displayName||"Context")+".Provider";case r3:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case s3:return e=n.displayName||null,e!==null?e:pS(n.type)||"Memo";case Id:e=n._payload,n=n._init;try{return pS(n(e))}catch{}}return null}function z8(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pS(e);case 8:return e===i3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xd(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function lO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function H8(n){var e=lO(n)?"checked":"value",i=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,l=i.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(c){s=""+c,l.call(this,c)}}),Object.defineProperty(n,e,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Px(n){n._valueTracker||(n._valueTracker=H8(n))}function cO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var i=e.getValue(),s="";return n&&(s=lO(n)?n.checked?"true":"false":n.value),n=s,n!==i?(e.setValue(n),!0):!1}function i_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mS(n,e){var i=e.checked;return zs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??n._wrapperState.initialChecked})}function PR(n,e){var i=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;i=Xd(e.value!=null?e.value:i),n._wrapperState={initialChecked:s,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uO(n,e){e=e.checked,e!=null&&n3(n,"checked",e,!1)}function gS(n,e){uO(n,e);var i=Xd(e.value),s=e.type;if(i!=null)s==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+i):n.value!==""+i&&(n.value=""+i);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?AS(n,e.type,i):e.hasOwnProperty("defaultValue")&&AS(n,e.type,Xd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function OR(n,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,i||e===n.value||(n.value=e),n.defaultValue=e}i=n.name,i!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,i!==""&&(n.name=i)}function AS(n,e,i){(e!=="number"||i_(n.ownerDocument)!==n)&&(i==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+i&&(n.defaultValue=""+i))}var vv=Array.isArray;function Lg(n,e,i,s){if(n=n.options,e){e={};for(var o=0;o<i.length;o++)e["$"+i[o]]=!0;for(i=0;i<n.length;i++)o=e.hasOwnProperty("$"+n[i].value),n[i].selected!==o&&(n[i].selected=o),o&&s&&(n[i].defaultSelected=!0)}else{for(i=""+Xd(i),e=null,o=0;o<n.length;o++){if(n[o].value===i){n[o].selected=!0,s&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function vS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Mn(91));return zs({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function FR(n,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(Mn(92));if(vv(i)){if(1<i.length)throw Error(Mn(93));i=i[0]}e=i}e==null&&(e=""),i=e}n._wrapperState={initialValue:Xd(i)}}function hO(n,e){var i=Xd(e.value),s=Xd(e.defaultValue);i!=null&&(i=""+i,i!==n.value&&(n.value=i),e.defaultValue==null&&n.defaultValue!==i&&(n.defaultValue=i)),s!=null&&(n.defaultValue=""+s)}function kR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function dO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?dO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ox,fO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,s,o){MSApp.execUnsafeLocalFunction(function(){return n(e,i,s,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ox=Ox||document.createElement("div"),Ox.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ox.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Wv(n,e){if(e){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=e;return}}n.textContent=e}var Sv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V8=["Webkit","ms","Moz","O"];Object.keys(Sv).forEach(function(n){V8.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Sv[e]=Sv[n]})});function pO(n,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Sv.hasOwnProperty(n)&&Sv[n]?(""+e).trim():e+"px"}function mO(n,e){n=n.style;for(var i in e)if(e.hasOwnProperty(i)){var s=i.indexOf("--")===0,o=pO(i,e[i],s);i==="float"&&(i="cssFloat"),s?n.setProperty(i,o):n[i]=o}}var j8=zs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xS(n,e){if(e){if(j8[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Mn(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Mn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Mn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Mn(62))}}function ES(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _S=null;function o3(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bS=null,Bg=null,Dg=null;function NR(n){if(n=_y(n)){if(typeof bS!="function")throw Error(Mn(280));var e=n.stateNode;e&&(e=$_(e),bS(n.stateNode,n.type,e))}}function gO(n){Bg?Dg?Dg.push(n):Dg=[n]:Bg=n}function AO(){if(Bg){var n=Bg,e=Dg;if(Dg=Bg=null,NR(n),e)for(n=0;n<e.length;n++)NR(e[n])}}function vO(n,e){return n(e)}function yO(){}var LC=!1;function xO(n,e,i){if(LC)return n(e,i);LC=!0;try{return vO(n,e,i)}finally{LC=!1,(Bg!==null||Dg!==null)&&(yO(),AO())}}function Kv(n,e){var i=n.stateNode;if(i===null)return null;var s=$_(i);if(s===null)return null;i=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(Mn(231,e,typeof i));return i}var wS=!1;if(Sh)try{var zA={};Object.defineProperty(zA,"passive",{get:function(){wS=!0}}),window.addEventListener("test",zA,zA),window.removeEventListener("test",zA,zA)}catch{wS=!1}function Q8(n,e,i,s,o,l,c,d,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(i,f)}catch(A){this.onError(A)}}var Tv=!1,r_=null,s_=!1,CS=null,W8={onError:function(n){Tv=!0,r_=n}};function K8(n,e,i,s,o,l,c,d,u){Tv=!1,r_=null,Q8.apply(W8,arguments)}function X8(n,e,i,s,o,l,c,d,u){if(K8.apply(this,arguments),Tv){if(Tv){var f=r_;Tv=!1,r_=null}else throw Error(Mn(198));s_||(s_=!0,CS=f)}}function Tp(n){var e=n,i=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(i=e.return),n=e.return;while(n)}return e.tag===3?i:null}function EO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function UR(n){if(Tp(n)!==n)throw Error(Mn(188))}function Y8(n){var e=n.alternate;if(!e){if(e=Tp(n),e===null)throw Error(Mn(188));return e!==n?null:n}for(var i=n,s=e;;){var o=i.return;if(o===null)break;var l=o.alternate;if(l===null){if(s=o.return,s!==null){i=s;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===i)return UR(o),n;if(l===s)return UR(o),e;l=l.sibling}throw Error(Mn(188))}if(i.return!==s.return)i=o,s=l;else{for(var c=!1,d=o.child;d;){if(d===i){c=!0,i=o,s=l;break}if(d===s){c=!0,s=o,i=l;break}d=d.sibling}if(!c){for(d=l.child;d;){if(d===i){c=!0,i=l,s=o;break}if(d===s){c=!0,s=l,i=o;break}d=d.sibling}if(!c)throw Error(Mn(189))}}if(i.alternate!==s)throw Error(Mn(190))}if(i.tag!==3)throw Error(Mn(188));return i.stateNode.current===i?n:e}function _O(n){return n=Y8(n),n!==null?bO(n):null}function bO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=bO(n);if(e!==null)return e;n=n.sibling}return null}var wO=_l.unstable_scheduleCallback,GR=_l.unstable_cancelCallback,q8=_l.unstable_shouldYield,$8=_l.unstable_requestPaint,no=_l.unstable_now,J8=_l.unstable_getCurrentPriorityLevel,a3=_l.unstable_ImmediatePriority,CO=_l.unstable_UserBlockingPriority,o_=_l.unstable_NormalPriority,Z8=_l.unstable_LowPriority,MO=_l.unstable_IdlePriority,K_=null,Cu=null;function e6(n){if(Cu&&typeof Cu.onCommitFiberRoot=="function")try{Cu.onCommitFiberRoot(K_,n,void 0,(n.current.flags&128)===128)}catch{}}var Oc=Math.clz32?Math.clz32:i6,t6=Math.log,n6=Math.LN2;function i6(n){return n>>>=0,n===0?32:31-(t6(n)/n6|0)|0}var Fx=64,kx=4194304;function yv(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function a_(n,e){var i=n.pendingLanes;if(i===0)return 0;var s=0,o=n.suspendedLanes,l=n.pingedLanes,c=i&268435455;if(c!==0){var d=c&~o;d!==0?s=yv(d):(l&=c,l!==0&&(s=yv(l)))}else c=i&~o,c!==0?s=yv(c):l!==0&&(s=yv(l));if(s===0)return 0;if(e!==0&&e!==s&&!(e&o)&&(o=s&-s,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(s&4&&(s|=i&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)i=31-Oc(e),o=1<<i,s|=n[i],e&=~o;return s}function r6(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s6(n,e){for(var i=n.suspendedLanes,s=n.pingedLanes,o=n.expirationTimes,l=n.pendingLanes;0<l;){var c=31-Oc(l),d=1<<c,u=o[c];u===-1?(!(d&i)||d&s)&&(o[c]=r6(d,e)):u<=e&&(n.expiredLanes|=d),l&=~d}}function MS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function SO(){var n=Fx;return Fx<<=1,!(Fx&4194240)&&(Fx=64),n}function BC(n){for(var e=[],i=0;31>i;i++)e.push(n);return e}function xy(n,e,i){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Oc(e),n[e]=i}function o6(n,e){var i=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<i;){var o=31-Oc(i),l=1<<o;e[o]=0,s[o]=-1,n[o]=-1,i&=~l}}function l3(n,e){var i=n.entangledLanes|=e;for(n=n.entanglements;i;){var s=31-Oc(i),o=1<<s;o&e|n[s]&e&&(n[s]|=e),i&=~o}}var is=0;function TO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var IO,c3,RO,LO,BO,SS=!1,Nx=[],Nd=null,Ud=null,Gd=null,Xv=new Map,Yv=new Map,Bd=[],a6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zR(n,e){switch(n){case"focusin":case"focusout":Nd=null;break;case"dragenter":case"dragleave":Ud=null;break;case"mouseover":case"mouseout":Gd=null;break;case"pointerover":case"pointerout":Xv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yv.delete(e.pointerId)}}function HA(n,e,i,s,o,l){return n===null||n.nativeEvent!==l?(n={blockedOn:e,domEventName:i,eventSystemFlags:s,nativeEvent:l,targetContainers:[o]},e!==null&&(e=_y(e),e!==null&&c3(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function l6(n,e,i,s,o){switch(e){case"focusin":return Nd=HA(Nd,n,e,i,s,o),!0;case"dragenter":return Ud=HA(Ud,n,e,i,s,o),!0;case"mouseover":return Gd=HA(Gd,n,e,i,s,o),!0;case"pointerover":var l=o.pointerId;return Xv.set(l,HA(Xv.get(l)||null,n,e,i,s,o)),!0;case"gotpointercapture":return l=o.pointerId,Yv.set(l,HA(Yv.get(l)||null,n,e,i,s,o)),!0}return!1}function DO(n){var e=cp(n.target);if(e!==null){var i=Tp(e);if(i!==null){if(e=i.tag,e===13){if(e=EO(i),e!==null){n.blockedOn=e,BO(n.priority,function(){RO(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function NE(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var i=TS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(i===null){i=n.nativeEvent;var s=new i.constructor(i.type,i);_S=s,i.target.dispatchEvent(s),_S=null}else return e=_y(i),e!==null&&c3(e),n.blockedOn=i,!1;e.shift()}return!0}function HR(n,e,i){NE(n)&&i.delete(e)}function c6(){SS=!1,Nd!==null&&NE(Nd)&&(Nd=null),Ud!==null&&NE(Ud)&&(Ud=null),Gd!==null&&NE(Gd)&&(Gd=null),Xv.forEach(HR),Yv.forEach(HR)}function VA(n,e){n.blockedOn===e&&(n.blockedOn=null,SS||(SS=!0,_l.unstable_scheduleCallback(_l.unstable_NormalPriority,c6)))}function qv(n){function e(o){return VA(o,n)}if(0<Nx.length){VA(Nx[0],n);for(var i=1;i<Nx.length;i++){var s=Nx[i];s.blockedOn===n&&(s.blockedOn=null)}}for(Nd!==null&&VA(Nd,n),Ud!==null&&VA(Ud,n),Gd!==null&&VA(Gd,n),Xv.forEach(e),Yv.forEach(e),i=0;i<Bd.length;i++)s=Bd[i],s.blockedOn===n&&(s.blockedOn=null);for(;0<Bd.length&&(i=Bd[0],i.blockedOn===null);)DO(i),i.blockedOn===null&&Bd.shift()}var Pg=Dh.ReactCurrentBatchConfig,l_=!0;function u6(n,e,i,s){var o=is,l=Pg.transition;Pg.transition=null;try{is=1,u3(n,e,i,s)}finally{is=o,Pg.transition=l}}function h6(n,e,i,s){var o=is,l=Pg.transition;Pg.transition=null;try{is=4,u3(n,e,i,s)}finally{is=o,Pg.transition=l}}function u3(n,e,i,s){if(l_){var o=TS(n,e,i,s);if(o===null)HC(n,e,s,c_,i),zR(n,s);else if(l6(o,n,e,i,s))s.stopPropagation();else if(zR(n,s),e&4&&-1<a6.indexOf(n)){for(;o!==null;){var l=_y(o);if(l!==null&&IO(l),l=TS(n,e,i,s),l===null&&HC(n,e,s,c_,i),l===o)break;o=l}o!==null&&s.stopPropagation()}else HC(n,e,s,null,i)}}var c_=null;function TS(n,e,i,s){if(c_=null,n=o3(s),n=cp(n),n!==null)if(e=Tp(n),e===null)n=null;else if(i=e.tag,i===13){if(n=EO(e),n!==null)return n;n=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return c_=n,null}function PO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J8()){case a3:return 1;case CO:return 4;case o_:case Z8:return 16;case MO:return 536870912;default:return 16}default:return 16}}var Pd=null,h3=null,UE=null;function OO(){if(UE)return UE;var n,e=h3,i=e.length,s,o="value"in Pd?Pd.value:Pd.textContent,l=o.length;for(n=0;n<i&&e[n]===o[n];n++);var c=i-n;for(s=1;s<=c&&e[i-s]===o[l-s];s++);return UE=o.slice(n,1<s?1-s:void 0)}function GE(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ux(){return!0}function VR(){return!1}function Cl(n){function e(i,s,o,l,c){this._reactName=i,this._targetInst=o,this.type=s,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var d in n)n.hasOwnProperty(d)&&(i=n[d],this[d]=i?i(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ux:VR,this.isPropagationStopped=VR,this}return zs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ux)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ux)},persist:function(){},isPersistent:Ux}),e}var n0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d3=Cl(n0),Ey=zs({},n0,{view:0,detail:0}),d6=Cl(Ey),DC,PC,jA,X_=zs({},Ey,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f3,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==jA&&(jA&&n.type==="mousemove"?(DC=n.screenX-jA.screenX,PC=n.screenY-jA.screenY):PC=DC=0,jA=n),DC)},movementY:function(n){return"movementY"in n?n.movementY:PC}}),jR=Cl(X_),f6=zs({},X_,{dataTransfer:0}),p6=Cl(f6),m6=zs({},Ey,{relatedTarget:0}),OC=Cl(m6),g6=zs({},n0,{animationName:0,elapsedTime:0,pseudoElement:0}),A6=Cl(g6),v6=zs({},n0,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),y6=Cl(v6),x6=zs({},n0,{data:0}),QR=Cl(x6),E6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=b6[n])?!!e[n]:!1}function f3(){return w6}var C6=zs({},Ey,{key:function(n){if(n.key){var e=E6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=GE(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f3,charCode:function(n){return n.type==="keypress"?GE(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?GE(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),M6=Cl(C6),S6=zs({},X_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WR=Cl(S6),T6=zs({},Ey,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f3}),I6=Cl(T6),R6=zs({},n0,{propertyName:0,elapsedTime:0,pseudoElement:0}),L6=Cl(R6),B6=zs({},X_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),D6=Cl(B6),P6=[9,13,27,32],p3=Sh&&"CompositionEvent"in window,Iv=null;Sh&&"documentMode"in document&&(Iv=document.documentMode);var O6=Sh&&"TextEvent"in window&&!Iv,FO=Sh&&(!p3||Iv&&8<Iv&&11>=Iv),KR=String.fromCharCode(32),XR=!1;function kO(n,e){switch(n){case"keyup":return P6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ag=!1;function F6(n,e){switch(n){case"compositionend":return NO(e);case"keypress":return e.which!==32?null:(XR=!0,KR);case"textInput":return n=e.data,n===KR&&XR?null:n;default:return null}}function k6(n,e){if(Ag)return n==="compositionend"||!p3&&kO(n,e)?(n=OO(),UE=h3=Pd=null,Ag=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FO&&e.locale!=="ko"?null:e.data;default:return null}}var N6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!N6[n.type]:e==="textarea"}function UO(n,e,i,s){gO(s),e=u_(e,"onChange"),0<e.length&&(i=new d3("onChange","change",null,i,s),n.push({event:i,listeners:e}))}var Rv=null,$v=null;function U6(n){qO(n,0)}function Y_(n){var e=xg(n);if(cO(e))return n}function G6(n,e){if(n==="change")return e}var GO=!1;if(Sh){var FC;if(Sh){var kC="oninput"in document;if(!kC){var qR=document.createElement("div");qR.setAttribute("oninput","return;"),kC=typeof qR.oninput=="function"}FC=kC}else FC=!1;GO=FC&&(!document.documentMode||9<document.documentMode)}function $R(){Rv&&(Rv.detachEvent("onpropertychange",zO),$v=Rv=null)}function zO(n){if(n.propertyName==="value"&&Y_($v)){var e=[];UO(e,$v,n,o3(n)),xO(U6,e)}}function z6(n,e,i){n==="focusin"?($R(),Rv=e,$v=i,Rv.attachEvent("onpropertychange",zO)):n==="focusout"&&$R()}function H6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Y_($v)}function V6(n,e){if(n==="click")return Y_(e)}function j6(n,e){if(n==="input"||n==="change")return Y_(e)}function Q6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var kc=typeof Object.is=="function"?Object.is:Q6;function Jv(n,e){if(kc(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var i=Object.keys(n),s=Object.keys(e);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var o=i[s];if(!uS.call(e,o)||!kc(n[o],e[o]))return!1}return!0}function JR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ZR(n,e){var i=JR(n);n=0;for(var s;i;){if(i.nodeType===3){if(s=n+i.textContent.length,n<=e&&s>=e)return{node:i,offset:e-n};n=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=JR(i)}}function HO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?HO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function VO(){for(var n=window,e=i_();e instanceof n.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)n=e.contentWindow;else break;e=i_(n.document)}return e}function m3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function W6(n){var e=VO(),i=n.focusedElem,s=n.selectionRange;if(e!==i&&i&&i.ownerDocument&&HO(i.ownerDocument.documentElement,i)){if(s!==null&&m3(i)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(n,i.value.length);else if(n=(e=i.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=i.textContent.length,l=Math.min(s.start,o);s=s.end===void 0?l:Math.min(s.end,o),!n.extend&&l>s&&(o=s,s=l,l=o),o=ZR(i,l);var c=ZR(i,s);o&&c&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==c.node||n.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),l>s?(n.addRange(e),n.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),n.addRange(e)))}}for(e=[],n=i;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)n=e[i],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var K6=Sh&&"documentMode"in document&&11>=document.documentMode,vg=null,IS=null,Lv=null,RS=!1;function eL(n,e,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;RS||vg==null||vg!==i_(s)||(s=vg,"selectionStart"in s&&m3(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Lv&&Jv(Lv,s)||(Lv=s,s=u_(IS,"onSelect"),0<s.length&&(e=new d3("onSelect","select",null,e,i),n.push({event:e,listeners:s}),e.target=vg)))}function Gx(n,e){var i={};return i[n.toLowerCase()]=e.toLowerCase(),i["Webkit"+n]="webkit"+e,i["Moz"+n]="moz"+e,i}var yg={animationend:Gx("Animation","AnimationEnd"),animationiteration:Gx("Animation","AnimationIteration"),animationstart:Gx("Animation","AnimationStart"),transitionend:Gx("Transition","TransitionEnd")},NC={},jO={};Sh&&(jO=document.createElement("div").style,"AnimationEvent"in window||(delete yg.animationend.animation,delete yg.animationiteration.animation,delete yg.animationstart.animation),"TransitionEvent"in window||delete yg.transitionend.transition);function q_(n){if(NC[n])return NC[n];if(!yg[n])return n;var e=yg[n],i;for(i in e)if(e.hasOwnProperty(i)&&i in jO)return NC[n]=e[i];return n}var QO=q_("animationend"),WO=q_("animationiteration"),KO=q_("animationstart"),XO=q_("transitionend"),YO=new Map,tL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jd(n,e){YO.set(n,e),Sp(e,[n])}for(var UC=0;UC<tL.length;UC++){var GC=tL[UC],X6=GC.toLowerCase(),Y6=GC[0].toUpperCase()+GC.slice(1);Jd(X6,"on"+Y6)}Jd(QO,"onAnimationEnd");Jd(WO,"onAnimationIteration");Jd(KO,"onAnimationStart");Jd("dblclick","onDoubleClick");Jd("focusin","onFocus");Jd("focusout","onBlur");Jd(XO,"onTransitionEnd");zg("onMouseEnter",["mouseout","mouseover"]);zg("onMouseLeave",["mouseout","mouseover"]);zg("onPointerEnter",["pointerout","pointerover"]);zg("onPointerLeave",["pointerout","pointerover"]);Sp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q6=new Set("cancel close invalid load scroll toggle".split(" ").concat(xv));function nL(n,e,i){var s=n.type||"unknown-event";n.currentTarget=i,X8(s,e,void 0,n),n.currentTarget=null}function qO(n,e){e=(e&4)!==0;for(var i=0;i<n.length;i++){var s=n[i],o=s.event;s=s.listeners;e:{var l=void 0;if(e)for(var c=s.length-1;0<=c;c--){var d=s[c],u=d.instance,f=d.currentTarget;if(d=d.listener,u!==l&&o.isPropagationStopped())break e;nL(o,d,f),l=u}else for(c=0;c<s.length;c++){if(d=s[c],u=d.instance,f=d.currentTarget,d=d.listener,u!==l&&o.isPropagationStopped())break e;nL(o,d,f),l=u}}}if(s_)throw n=CS,s_=!1,CS=null,n}function Es(n,e){var i=e[OS];i===void 0&&(i=e[OS]=new Set);var s=n+"__bubble";i.has(s)||($O(e,n,2,!1),i.add(s))}function zC(n,e,i){var s=0;e&&(s|=4),$O(i,n,s,e)}var zx="_reactListening"+Math.random().toString(36).slice(2);function Zv(n){if(!n[zx]){n[zx]=!0,rO.forEach(function(i){i!=="selectionchange"&&(q6.has(i)||zC(i,!1,n),zC(i,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[zx]||(e[zx]=!0,zC("selectionchange",!1,e))}}function $O(n,e,i,s){switch(PO(e)){case 1:var o=u6;break;case 4:o=h6;break;default:o=u3}i=o.bind(null,e,i,n),o=void 0,!wS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),s?o!==void 0?n.addEventListener(e,i,{capture:!0,passive:o}):n.addEventListener(e,i,!0):o!==void 0?n.addEventListener(e,i,{passive:o}):n.addEventListener(e,i,!1)}function HC(n,e,i,s,o){var l=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var d=s.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(c===4)for(c=s.return;c!==null;){var u=c.tag;if((u===3||u===4)&&(u=c.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;c=c.return}for(;d!==null;){if(c=cp(d),c===null)return;if(u=c.tag,u===5||u===6){s=l=c;continue e}d=d.parentNode}}s=s.return}xO(function(){var f=l,A=o3(i),g=[];e:{var y=YO.get(n);if(y!==void 0){var v=d3,_=n;switch(n){case"keypress":if(GE(i)===0)break e;case"keydown":case"keyup":v=M6;break;case"focusin":_="focus",v=OC;break;case"focusout":_="blur",v=OC;break;case"beforeblur":case"afterblur":v=OC;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=jR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=p6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=I6;break;case QO:case WO:case KO:v=A6;break;case XO:v=L6;break;case"scroll":v=d6;break;case"wheel":v=D6;break;case"copy":case"cut":case"paste":v=y6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=WR}var x=(e&4)!==0,b=!x&&n==="scroll",m=x?y!==null?y+"Capture":null:y;x=[];for(var S=f,C;S!==null;){C=S;var M=C.stateNode;if(C.tag===5&&M!==null&&(C=M,m!==null&&(M=Kv(S,m),M!=null&&x.push(ey(S,M,C)))),b)break;S=S.return}0<x.length&&(y=new v(y,_,null,i,A),g.push({event:y,listeners:x}))}}if(!(e&7)){e:{if(y=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",y&&i!==_S&&(_=i.relatedTarget||i.fromElement)&&(cp(_)||_[Th]))break e;if((v||y)&&(y=A.window===A?A:(y=A.ownerDocument)?y.defaultView||y.parentWindow:window,v?(_=i.relatedTarget||i.toElement,v=f,_=_?cp(_):null,_!==null&&(b=Tp(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=f),v!==_)){if(x=jR,M="onMouseLeave",m="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(x=WR,M="onPointerLeave",m="onPointerEnter",S="pointer"),b=v==null?y:xg(v),C=_==null?y:xg(_),y=new x(M,S+"leave",v,i,A),y.target=b,y.relatedTarget=C,M=null,cp(A)===f&&(x=new x(m,S+"enter",_,i,A),x.target=C,x.relatedTarget=b,M=x),b=M,v&&_)t:{for(x=v,m=_,S=0,C=x;C;C=Gm(C))S++;for(C=0,M=m;M;M=Gm(M))C++;for(;0<S-C;)x=Gm(x),S--;for(;0<C-S;)m=Gm(m),C--;for(;S--;){if(x===m||m!==null&&x===m.alternate)break t;x=Gm(x),m=Gm(m)}x=null}else x=null;v!==null&&iL(g,y,v,x,!1),_!==null&&b!==null&&iL(g,b,_,x,!0)}}e:{if(y=f?xg(f):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var T=G6;else if(YR(y))if(GO)T=j6;else{T=H6;var N=z6}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(T=V6);if(T&&(T=T(n,f))){UO(g,T,i,A);break e}N&&N(n,y,f),n==="focusout"&&(N=y._wrapperState)&&N.controlled&&y.type==="number"&&AS(y,"number",y.value)}switch(N=f?xg(f):window,n){case"focusin":(YR(N)||N.contentEditable==="true")&&(vg=N,IS=f,Lv=null);break;case"focusout":Lv=IS=vg=null;break;case"mousedown":RS=!0;break;case"contextmenu":case"mouseup":case"dragend":RS=!1,eL(g,i,A);break;case"selectionchange":if(K6)break;case"keydown":case"keyup":eL(g,i,A)}var P;if(p3)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ag?kO(n,i)&&(k="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&(k="onCompositionStart");k&&(FO&&i.locale!=="ko"&&(Ag||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ag&&(P=OO()):(Pd=A,h3="value"in Pd?Pd.value:Pd.textContent,Ag=!0)),N=u_(f,k),0<N.length&&(k=new QR(k,n,null,i,A),g.push({event:k,listeners:N}),P?k.data=P:(P=NO(i),P!==null&&(k.data=P)))),(P=O6?F6(n,i):k6(n,i))&&(f=u_(f,"onBeforeInput"),0<f.length&&(A=new QR("onBeforeInput","beforeinput",null,i,A),g.push({event:A,listeners:f}),A.data=P))}qO(g,e)})}function ey(n,e,i){return{instance:n,listener:e,currentTarget:i}}function u_(n,e){for(var i=e+"Capture",s=[];n!==null;){var o=n,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Kv(n,i),l!=null&&s.unshift(ey(n,l,o)),l=Kv(n,e),l!=null&&s.push(ey(n,l,o))),n=n.return}return s}function Gm(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function iL(n,e,i,s,o){for(var l=e._reactName,c=[];i!==null&&i!==s;){var d=i,u=d.alternate,f=d.stateNode;if(u!==null&&u===s)break;d.tag===5&&f!==null&&(d=f,o?(u=Kv(i,l),u!=null&&c.unshift(ey(i,u,d))):o||(u=Kv(i,l),u!=null&&c.push(ey(i,u,d)))),i=i.return}c.length!==0&&n.push({event:e,listeners:c})}var $6=/\r\n?/g,J6=/\u0000|\uFFFD/g;function rL(n){return(typeof n=="string"?n:""+n).replace($6,`
`).replace(J6,"")}function Hx(n,e,i){if(e=rL(e),rL(n)!==e&&i)throw Error(Mn(425))}function h_(){}var LS=null,BS=null;function DS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var PS=typeof setTimeout=="function"?setTimeout:void 0,Z6=typeof clearTimeout=="function"?clearTimeout:void 0,sL=typeof Promise=="function"?Promise:void 0,eU=typeof queueMicrotask=="function"?queueMicrotask:typeof sL<"u"?function(n){return sL.resolve(null).then(n).catch(tU)}:PS;function tU(n){setTimeout(function(){throw n})}function VC(n,e){var i=e,s=0;do{var o=i.nextSibling;if(n.removeChild(i),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(s===0){n.removeChild(o),qv(e);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=o}while(i);qv(e)}function zd(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function oL(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return n;e--}else i==="/$"&&e++}n=n.previousSibling}return null}var i0=Math.random().toString(36).slice(2),bu="__reactFiber$"+i0,ty="__reactProps$"+i0,Th="__reactContainer$"+i0,OS="__reactEvents$"+i0,nU="__reactListeners$"+i0,iU="__reactHandles$"+i0;function cp(n){var e=n[bu];if(e)return e;for(var i=n.parentNode;i;){if(e=i[Th]||i[bu]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(n=oL(n);n!==null;){if(i=n[bu])return i;n=oL(n)}return e}n=i,i=n.parentNode}return null}function _y(n){return n=n[bu]||n[Th],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function xg(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Mn(33))}function $_(n){return n[ty]||null}var FS=[],Eg=-1;function Zd(n){return{current:n}}function bs(n){0>Eg||(n.current=FS[Eg],FS[Eg]=null,Eg--)}function gs(n,e){Eg++,FS[Eg]=n.current,n.current=e}var Yd={},oa=Zd(Yd),qa=Zd(!1),Ep=Yd;function Hg(n,e){var i=n.type.contextTypes;if(!i)return Yd;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in i)o[l]=e[l];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function $a(n){return n=n.childContextTypes,n!=null}function d_(){bs(qa),bs(oa)}function aL(n,e,i){if(oa.current!==Yd)throw Error(Mn(168));gs(oa,e),gs(qa,i)}function JO(n,e,i){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var o in s)if(!(o in e))throw Error(Mn(108,z8(n)||"Unknown",o));return zs({},i,s)}function f_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yd,Ep=oa.current,gs(oa,n),gs(qa,qa.current),!0}function lL(n,e,i){var s=n.stateNode;if(!s)throw Error(Mn(169));i?(n=JO(n,e,Ep),s.__reactInternalMemoizedMergedChildContext=n,bs(qa),bs(oa),gs(oa,n)):bs(qa),gs(qa,i)}var fh=null,J_=!1,jC=!1;function ZO(n){fh===null?fh=[n]:fh.push(n)}function rU(n){J_=!0,ZO(n)}function ef(){if(!jC&&fh!==null){jC=!0;var n=0,e=is;try{var i=fh;for(is=1;n<i.length;n++){var s=i[n];do s=s(!0);while(s!==null)}fh=null,J_=!1}catch(o){throw fh!==null&&(fh=fh.slice(n+1)),wO(a3,ef),o}finally{is=e,jC=!1}}return null}var _g=[],bg=0,p_=null,m_=0,Ql=[],Wl=0,_p=null,Ah=1,vh="";function ip(n,e){_g[bg++]=m_,_g[bg++]=p_,p_=n,m_=e}function e4(n,e,i){Ql[Wl++]=Ah,Ql[Wl++]=vh,Ql[Wl++]=_p,_p=n;var s=Ah;n=vh;var o=32-Oc(s)-1;s&=~(1<<o),i+=1;var l=32-Oc(e)+o;if(30<l){var c=o-o%5;l=(s&(1<<c)-1).toString(32),s>>=c,o-=c,Ah=1<<32-Oc(e)+o|i<<o|s,vh=l+n}else Ah=1<<l|i<<o|s,vh=n}function g3(n){n.return!==null&&(ip(n,1),e4(n,1,0))}function A3(n){for(;n===p_;)p_=_g[--bg],_g[bg]=null,m_=_g[--bg],_g[bg]=null;for(;n===_p;)_p=Ql[--Wl],Ql[Wl]=null,vh=Ql[--Wl],Ql[Wl]=null,Ah=Ql[--Wl],Ql[Wl]=null}var El=null,xl=null,Ps=!1,Tc=null;function t4(n,e){var i=ql(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=n,e=n.deletions,e===null?(n.deletions=[i],n.flags|=16):e.push(i)}function cL(n,e){switch(n.tag){case 5:var i=n.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,El=n,xl=zd(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,El=n,xl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=_p!==null?{id:Ah,overflow:vh}:null,n.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=ql(18,null,null,0),i.stateNode=e,i.return=n,n.child=i,El=n,xl=null,!0):!1;default:return!1}}function kS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function NS(n){if(Ps){var e=xl;if(e){var i=e;if(!cL(n,e)){if(kS(n))throw Error(Mn(418));e=zd(i.nextSibling);var s=El;e&&cL(n,e)?t4(s,i):(n.flags=n.flags&-4097|2,Ps=!1,El=n)}}else{if(kS(n))throw Error(Mn(418));n.flags=n.flags&-4097|2,Ps=!1,El=n}}}function uL(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;El=n}function Vx(n){if(n!==El)return!1;if(!Ps)return uL(n),Ps=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!DS(n.type,n.memoizedProps)),e&&(e=xl)){if(kS(n))throw n4(),Error(Mn(418));for(;e;)t4(n,e),e=zd(e.nextSibling)}if(uL(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Mn(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var i=n.data;if(i==="/$"){if(e===0){xl=zd(n.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}n=n.nextSibling}xl=null}}else xl=El?zd(n.stateNode.nextSibling):null;return!0}function n4(){for(var n=xl;n;)n=zd(n.nextSibling)}function Vg(){xl=El=null,Ps=!1}function v3(n){Tc===null?Tc=[n]:Tc.push(n)}var sU=Dh.ReactCurrentBatchConfig;function Cc(n,e){if(n&&n.defaultProps){e=zs({},e),n=n.defaultProps;for(var i in n)e[i]===void 0&&(e[i]=n[i]);return e}return e}var g_=Zd(null),A_=null,wg=null,y3=null;function x3(){y3=wg=A_=null}function E3(n){var e=g_.current;bs(g_),n._currentValue=e}function US(n,e,i){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===i)break;n=n.return}}function Og(n,e){A_=n,y3=wg=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Xa=!0),n.firstContext=null)}function Zl(n){var e=n._currentValue;if(y3!==n)if(n={context:n,memoizedValue:e,next:null},wg===null){if(A_===null)throw Error(Mn(308));wg=n,A_.dependencies={lanes:0,firstContext:n}}else wg=wg.next=n;return e}var up=null;function _3(n){up===null?up=[n]:up.push(n)}function i4(n,e,i,s){var o=e.interleaved;return o===null?(i.next=i,_3(e)):(i.next=o.next,o.next=i),e.interleaved=i,Ih(n,s)}function Ih(n,e){n.lanes|=e;var i=n.alternate;for(i!==null&&(i.lanes|=e),i=n,n=n.return;n!==null;)n.childLanes|=e,i=n.alternate,i!==null&&(i.childLanes|=e),i=n,n=n.return;return i.tag===3?i.stateNode:null}var Rd=!1;function b3(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r4(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _h(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Hd(n,e,i){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Qr&2){var o=s.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e,Ih(n,i)}return o=s.interleaved,o===null?(e.next=e,_3(s)):(e.next=o.next,o.next=e),s.interleaved=e,Ih(n,i)}function zE(n,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,i|=s,e.lanes=i,l3(n,i)}}function hL(n,e){var i=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var o=null,l=null;if(i=i.firstBaseUpdate,i!==null){do{var c={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};l===null?o=l=c:l=l.next=c,i=i.next}while(i!==null);l===null?o=l=e:l=l.next=e}else o=l=e;i={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:s.shared,effects:s.effects},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=e:n.next=e,i.lastBaseUpdate=e}function v_(n,e,i,s){var o=n.updateQueue;Rd=!1;var l=o.firstBaseUpdate,c=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var u=d,f=u.next;u.next=null,c===null?l=f:c.next=f,c=u;var A=n.alternate;A!==null&&(A=A.updateQueue,d=A.lastBaseUpdate,d!==c&&(d===null?A.firstBaseUpdate=f:d.next=f,A.lastBaseUpdate=u))}if(l!==null){var g=o.baseState;c=0,A=f=u=null,d=l;do{var y=d.lane,v=d.eventTime;if((s&y)===y){A!==null&&(A=A.next={eventTime:v,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var _=n,x=d;switch(y=e,v=i,x.tag){case 1:if(_=x.payload,typeof _=="function"){g=_.call(v,g,y);break e}g=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,y=typeof _=="function"?_.call(v,g,y):_,y==null)break e;g=zs({},g,y);break e;case 2:Rd=!0}}d.callback!==null&&d.lane!==0&&(n.flags|=64,y=o.effects,y===null?o.effects=[d]:y.push(d))}else v={eventTime:v,lane:y,tag:d.tag,payload:d.payload,callback:d.callback,next:null},A===null?(f=A=v,u=g):A=A.next=v,c|=y;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;y=d,d=y.next,y.next=null,o.lastBaseUpdate=y,o.shared.pending=null}}while(1);if(A===null&&(u=g),o.baseState=u,o.firstBaseUpdate=f,o.lastBaseUpdate=A,e=o.shared.interleaved,e!==null){o=e;do c|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);wp|=c,n.lanes=c,n.memoizedState=g}}function dL(n,e,i){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],o=s.callback;if(o!==null){if(s.callback=null,s=i,typeof o!="function")throw Error(Mn(191,o));o.call(s)}}}var s4=new iO.Component().refs;function GS(n,e,i,s){e=n.memoizedState,i=i(s,e),i=i==null?e:zs({},e,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var Z_={isMounted:function(n){return(n=n._reactInternals)?Tp(n)===n:!1},enqueueSetState:function(n,e,i){n=n._reactInternals;var s=Ra(),o=jd(n),l=_h(s,o);l.payload=e,i!=null&&(l.callback=i),e=Hd(n,l,o),e!==null&&(Fc(e,n,o,s),zE(e,n,o))},enqueueReplaceState:function(n,e,i){n=n._reactInternals;var s=Ra(),o=jd(n),l=_h(s,o);l.tag=1,l.payload=e,i!=null&&(l.callback=i),e=Hd(n,l,o),e!==null&&(Fc(e,n,o,s),zE(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var i=Ra(),s=jd(n),o=_h(i,s);o.tag=2,e!=null&&(o.callback=e),e=Hd(n,o,s),e!==null&&(Fc(e,n,s,i),zE(e,n,s))}};function fL(n,e,i,s,o,l,c){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,l,c):e.prototype&&e.prototype.isPureReactComponent?!Jv(i,s)||!Jv(o,l):!0}function o4(n,e,i){var s=!1,o=Yd,l=e.contextType;return typeof l=="object"&&l!==null?l=Zl(l):(o=$a(e)?Ep:oa.current,s=e.contextTypes,l=(s=s!=null)?Hg(n,o):Yd),e=new e(i,l),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Z_,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=l),e}function pL(n,e,i,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,s),e.state!==n&&Z_.enqueueReplaceState(e,e.state,null)}function zS(n,e,i,s){var o=n.stateNode;o.props=i,o.state=n.memoizedState,o.refs=s4,b3(n);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Zl(l):(l=$a(e)?Ep:oa.current,o.context=Hg(n,l)),o.state=n.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(GS(n,e,l,i),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Z_.enqueueReplaceState(o,o.state,null),v_(n,i,o,s),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function QA(n,e,i){if(n=i.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Mn(309));var s=i.stateNode}if(!s)throw Error(Mn(147,n));var o=s,l=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(c){var d=o.refs;d===s4&&(d=o.refs={}),c===null?delete d[l]:d[l]=c},e._stringRef=l,e)}if(typeof n!="string")throw Error(Mn(284));if(!i._owner)throw Error(Mn(290,n))}return n}function jx(n,e){throw n=Object.prototype.toString.call(e),Error(Mn(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function mL(n){var e=n._init;return e(n._payload)}function a4(n){function e(m,S){if(n){var C=m.deletions;C===null?(m.deletions=[S],m.flags|=16):C.push(S)}}function i(m,S){if(!n)return null;for(;S!==null;)e(m,S),S=S.sibling;return null}function s(m,S){for(m=new Map;S!==null;)S.key!==null?m.set(S.key,S):m.set(S.index,S),S=S.sibling;return m}function o(m,S){return m=Qd(m,S),m.index=0,m.sibling=null,m}function l(m,S,C){return m.index=C,n?(C=m.alternate,C!==null?(C=C.index,C<S?(m.flags|=2,S):C):(m.flags|=2,S)):(m.flags|=1048576,S)}function c(m){return n&&m.alternate===null&&(m.flags|=2),m}function d(m,S,C,M){return S===null||S.tag!==6?(S=$C(C,m.mode,M),S.return=m,S):(S=o(S,C),S.return=m,S)}function u(m,S,C,M){var T=C.type;return T===gg?A(m,S,C.props.children,M,C.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Id&&mL(T)===S.type)?(M=o(S,C.props),M.ref=QA(m,S,C),M.return=m,M):(M=KE(C.type,C.key,C.props,null,m.mode,M),M.ref=QA(m,S,C),M.return=m,M)}function f(m,S,C,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=JC(C,m.mode,M),S.return=m,S):(S=o(S,C.children||[]),S.return=m,S)}function A(m,S,C,M,T){return S===null||S.tag!==7?(S=mp(C,m.mode,M,T),S.return=m,S):(S=o(S,C),S.return=m,S)}function g(m,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=$C(""+S,m.mode,C),S.return=m,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dx:return C=KE(S.type,S.key,S.props,null,m.mode,C),C.ref=QA(m,null,S),C.return=m,C;case mg:return S=JC(S,m.mode,C),S.return=m,S;case Id:var M=S._init;return g(m,M(S._payload),C)}if(vv(S)||GA(S))return S=mp(S,m.mode,C,null),S.return=m,S;jx(m,S)}return null}function y(m,S,C,M){var T=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return T!==null?null:d(m,S,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Dx:return C.key===T?u(m,S,C,M):null;case mg:return C.key===T?f(m,S,C,M):null;case Id:return T=C._init,y(m,S,T(C._payload),M)}if(vv(C)||GA(C))return T!==null?null:A(m,S,C,M,null);jx(m,C)}return null}function v(m,S,C,M,T){if(typeof M=="string"&&M!==""||typeof M=="number")return m=m.get(C)||null,d(S,m,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Dx:return m=m.get(M.key===null?C:M.key)||null,u(S,m,M,T);case mg:return m=m.get(M.key===null?C:M.key)||null,f(S,m,M,T);case Id:var N=M._init;return v(m,S,C,N(M._payload),T)}if(vv(M)||GA(M))return m=m.get(C)||null,A(S,m,M,T,null);jx(S,M)}return null}function _(m,S,C,M){for(var T=null,N=null,P=S,k=S=0,D=null;P!==null&&k<C.length;k++){P.index>k?(D=P,P=null):D=P.sibling;var z=y(m,P,C[k],M);if(z===null){P===null&&(P=D);break}n&&P&&z.alternate===null&&e(m,P),S=l(z,S,k),N===null?T=z:N.sibling=z,N=z,P=D}if(k===C.length)return i(m,P),Ps&&ip(m,k),T;if(P===null){for(;k<C.length;k++)P=g(m,C[k],M),P!==null&&(S=l(P,S,k),N===null?T=P:N.sibling=P,N=P);return Ps&&ip(m,k),T}for(P=s(m,P);k<C.length;k++)D=v(P,m,k,C[k],M),D!==null&&(n&&D.alternate!==null&&P.delete(D.key===null?k:D.key),S=l(D,S,k),N===null?T=D:N.sibling=D,N=D);return n&&P.forEach(function(Y){return e(m,Y)}),Ps&&ip(m,k),T}function x(m,S,C,M){var T=GA(C);if(typeof T!="function")throw Error(Mn(150));if(C=T.call(C),C==null)throw Error(Mn(151));for(var N=T=null,P=S,k=S=0,D=null,z=C.next();P!==null&&!z.done;k++,z=C.next()){P.index>k?(D=P,P=null):D=P.sibling;var Y=y(m,P,z.value,M);if(Y===null){P===null&&(P=D);break}n&&P&&Y.alternate===null&&e(m,P),S=l(Y,S,k),N===null?T=Y:N.sibling=Y,N=Y,P=D}if(z.done)return i(m,P),Ps&&ip(m,k),T;if(P===null){for(;!z.done;k++,z=C.next())z=g(m,z.value,M),z!==null&&(S=l(z,S,k),N===null?T=z:N.sibling=z,N=z);return Ps&&ip(m,k),T}for(P=s(m,P);!z.done;k++,z=C.next())z=v(P,m,k,z.value,M),z!==null&&(n&&z.alternate!==null&&P.delete(z.key===null?k:z.key),S=l(z,S,k),N===null?T=z:N.sibling=z,N=z);return n&&P.forEach(function(ne){return e(m,ne)}),Ps&&ip(m,k),T}function b(m,S,C,M){if(typeof C=="object"&&C!==null&&C.type===gg&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Dx:e:{for(var T=C.key,N=S;N!==null;){if(N.key===T){if(T=C.type,T===gg){if(N.tag===7){i(m,N.sibling),S=o(N,C.props.children),S.return=m,m=S;break e}}else if(N.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Id&&mL(T)===N.type){i(m,N.sibling),S=o(N,C.props),S.ref=QA(m,N,C),S.return=m,m=S;break e}i(m,N);break}else e(m,N);N=N.sibling}C.type===gg?(S=mp(C.props.children,m.mode,M,C.key),S.return=m,m=S):(M=KE(C.type,C.key,C.props,null,m.mode,M),M.ref=QA(m,S,C),M.return=m,m=M)}return c(m);case mg:e:{for(N=C.key;S!==null;){if(S.key===N)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){i(m,S.sibling),S=o(S,C.children||[]),S.return=m,m=S;break e}else{i(m,S);break}else e(m,S);S=S.sibling}S=JC(C,m.mode,M),S.return=m,m=S}return c(m);case Id:return N=C._init,b(m,S,N(C._payload),M)}if(vv(C))return _(m,S,C,M);if(GA(C))return x(m,S,C,M);jx(m,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(i(m,S.sibling),S=o(S,C),S.return=m,m=S):(i(m,S),S=$C(C,m.mode,M),S.return=m,m=S),c(m)):i(m,S)}return b}var jg=a4(!0),l4=a4(!1),by={},Mu=Zd(by),ny=Zd(by),iy=Zd(by);function hp(n){if(n===by)throw Error(Mn(174));return n}function w3(n,e){switch(gs(iy,e),gs(ny,n),gs(Mu,by),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yS(e,n)}bs(Mu),gs(Mu,e)}function Qg(){bs(Mu),bs(ny),bs(iy)}function c4(n){hp(iy.current);var e=hp(Mu.current),i=yS(e,n.type);e!==i&&(gs(ny,n),gs(Mu,i))}function C3(n){ny.current===n&&(bs(Mu),bs(ny))}var Us=Zd(0);function y_(n){for(var e=n;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var QC=[];function M3(){for(var n=0;n<QC.length;n++)QC[n]._workInProgressVersionPrimary=null;QC.length=0}var HE=Dh.ReactCurrentDispatcher,WC=Dh.ReactCurrentBatchConfig,bp=0,Gs=null,fo=null,So=null,x_=!1,Bv=!1,ry=0,oU=0;function ea(){throw Error(Mn(321))}function S3(n,e){if(e===null)return!1;for(var i=0;i<e.length&&i<n.length;i++)if(!kc(n[i],e[i]))return!1;return!0}function T3(n,e,i,s,o,l){if(bp=l,Gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,HE.current=n===null||n.memoizedState===null?uU:hU,n=i(s,o),Bv){l=0;do{if(Bv=!1,ry=0,25<=l)throw Error(Mn(301));l+=1,So=fo=null,e.updateQueue=null,HE.current=dU,n=i(s,o)}while(Bv)}if(HE.current=E_,e=fo!==null&&fo.next!==null,bp=0,So=fo=Gs=null,x_=!1,e)throw Error(Mn(300));return n}function I3(){var n=ry!==0;return ry=0,n}function yu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return So===null?Gs.memoizedState=So=n:So=So.next=n,So}function ec(){if(fo===null){var n=Gs.alternate;n=n!==null?n.memoizedState:null}else n=fo.next;var e=So===null?Gs.memoizedState:So.next;if(e!==null)So=e,fo=n;else{if(n===null)throw Error(Mn(310));fo=n,n={memoizedState:fo.memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},So===null?Gs.memoizedState=So=n:So=So.next=n}return So}function sy(n,e){return typeof e=="function"?e(n):e}function KC(n){var e=ec(),i=e.queue;if(i===null)throw Error(Mn(311));i.lastRenderedReducer=n;var s=fo,o=s.baseQueue,l=i.pending;if(l!==null){if(o!==null){var c=o.next;o.next=l.next,l.next=c}s.baseQueue=o=l,i.pending=null}if(o!==null){l=o.next,s=s.baseState;var d=c=null,u=null,f=l;do{var A=f.lane;if((bp&A)===A)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:n(s,f.action);else{var g={lane:A,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(d=u=g,c=s):u=u.next=g,Gs.lanes|=A,wp|=A}f=f.next}while(f!==null&&f!==l);u===null?c=s:u.next=d,kc(s,e.memoizedState)||(Xa=!0),e.memoizedState=s,e.baseState=c,e.baseQueue=u,i.lastRenderedState=s}if(n=i.interleaved,n!==null){o=n;do l=o.lane,Gs.lanes|=l,wp|=l,o=o.next;while(o!==n)}else o===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function XC(n){var e=ec(),i=e.queue;if(i===null)throw Error(Mn(311));i.lastRenderedReducer=n;var s=i.dispatch,o=i.pending,l=e.memoizedState;if(o!==null){i.pending=null;var c=o=o.next;do l=n(l,c.action),c=c.next;while(c!==o);kc(l,e.memoizedState)||(Xa=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),i.lastRenderedState=l}return[l,s]}function u4(){}function h4(n,e){var i=Gs,s=ec(),o=e(),l=!kc(s.memoizedState,o);if(l&&(s.memoizedState=o,Xa=!0),s=s.queue,R3(p4.bind(null,i,s,n),[n]),s.getSnapshot!==e||l||So!==null&&So.memoizedState.tag&1){if(i.flags|=2048,oy(9,f4.bind(null,i,s,o,e),void 0,null),Ro===null)throw Error(Mn(349));bp&30||d4(i,e,o)}return o}function d4(n,e,i){n.flags|=16384,n={getSnapshot:e,value:i},e=Gs.updateQueue,e===null?(e={lastEffect:null,stores:null},Gs.updateQueue=e,e.stores=[n]):(i=e.stores,i===null?e.stores=[n]:i.push(n))}function f4(n,e,i,s){e.value=i,e.getSnapshot=s,m4(e)&&g4(n)}function p4(n,e,i){return i(function(){m4(e)&&g4(n)})}function m4(n){var e=n.getSnapshot;n=n.value;try{var i=e();return!kc(n,i)}catch{return!0}}function g4(n){var e=Ih(n,1);e!==null&&Fc(e,n,1,-1)}function gL(n){var e=yu();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sy,lastRenderedState:n},e.queue=n,n=n.dispatch=cU.bind(null,Gs,n),[e.memoizedState,n]}function oy(n,e,i,s){return n={tag:n,create:e,destroy:i,deps:s,next:null},e=Gs.updateQueue,e===null?(e={lastEffect:null,stores:null},Gs.updateQueue=e,e.lastEffect=n.next=n):(i=e.lastEffect,i===null?e.lastEffect=n.next=n:(s=i.next,i.next=n,n.next=s,e.lastEffect=n)),n}function A4(){return ec().memoizedState}function VE(n,e,i,s){var o=yu();Gs.flags|=n,o.memoizedState=oy(1|e,i,void 0,s===void 0?null:s)}function eb(n,e,i,s){var o=ec();s=s===void 0?null:s;var l=void 0;if(fo!==null){var c=fo.memoizedState;if(l=c.destroy,s!==null&&S3(s,c.deps)){o.memoizedState=oy(e,i,l,s);return}}Gs.flags|=n,o.memoizedState=oy(1|e,i,l,s)}function AL(n,e){return VE(8390656,8,n,e)}function R3(n,e){return eb(2048,8,n,e)}function v4(n,e){return eb(4,2,n,e)}function y4(n,e){return eb(4,4,n,e)}function x4(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function E4(n,e,i){return i=i!=null?i.concat([n]):null,eb(4,4,x4.bind(null,e,n),i)}function L3(){}function _4(n,e){var i=ec();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&S3(e,s[1])?s[0]:(i.memoizedState=[n,e],n)}function b4(n,e){var i=ec();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&S3(e,s[1])?s[0]:(n=n(),i.memoizedState=[n,e],n)}function w4(n,e,i){return bp&21?(kc(i,e)||(i=SO(),Gs.lanes|=i,wp|=i,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Xa=!0),n.memoizedState=i)}function aU(n,e){var i=is;is=i!==0&&4>i?i:4,n(!0);var s=WC.transition;WC.transition={};try{n(!1),e()}finally{is=i,WC.transition=s}}function C4(){return ec().memoizedState}function lU(n,e,i){var s=jd(n);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},M4(n))S4(e,i);else if(i=i4(n,e,i,s),i!==null){var o=Ra();Fc(i,n,s,o),T4(i,e,s)}}function cU(n,e,i){var s=jd(n),o={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(M4(n))S4(e,o);else{var l=n.alternate;if(n.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var c=e.lastRenderedState,d=l(c,i);if(o.hasEagerState=!0,o.eagerState=d,kc(d,c)){var u=e.interleaved;u===null?(o.next=o,_3(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}i=i4(n,e,o,s),i!==null&&(o=Ra(),Fc(i,n,s,o),T4(i,e,s))}}function M4(n){var e=n.alternate;return n===Gs||e!==null&&e===Gs}function S4(n,e){Bv=x_=!0;var i=n.pending;i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e}function T4(n,e,i){if(i&4194240){var s=e.lanes;s&=n.pendingLanes,i|=s,e.lanes=i,l3(n,i)}}var E_={readContext:Zl,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useInsertionEffect:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useSyncExternalStore:ea,useId:ea,unstable_isNewReconciler:!1},uU={readContext:Zl,useCallback:function(n,e){return yu().memoizedState=[n,e===void 0?null:e],n},useContext:Zl,useEffect:AL,useImperativeHandle:function(n,e,i){return i=i!=null?i.concat([n]):null,VE(4194308,4,x4.bind(null,e,n),i)},useLayoutEffect:function(n,e){return VE(4194308,4,n,e)},useInsertionEffect:function(n,e){return VE(4,2,n,e)},useMemo:function(n,e){var i=yu();return e=e===void 0?null:e,n=n(),i.memoizedState=[n,e],n},useReducer:function(n,e,i){var s=yu();return e=i!==void 0?i(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=lU.bind(null,Gs,n),[s.memoizedState,n]},useRef:function(n){var e=yu();return n={current:n},e.memoizedState=n},useState:gL,useDebugValue:L3,useDeferredValue:function(n){return yu().memoizedState=n},useTransition:function(){var n=gL(!1),e=n[0];return n=aU.bind(null,n[1]),yu().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,i){var s=Gs,o=yu();if(Ps){if(i===void 0)throw Error(Mn(407));i=i()}else{if(i=e(),Ro===null)throw Error(Mn(349));bp&30||d4(s,e,i)}o.memoizedState=i;var l={value:i,getSnapshot:e};return o.queue=l,AL(p4.bind(null,s,l,n),[n]),s.flags|=2048,oy(9,f4.bind(null,s,l,i,e),void 0,null),i},useId:function(){var n=yu(),e=Ro.identifierPrefix;if(Ps){var i=vh,s=Ah;i=(s&~(1<<32-Oc(s)-1)).toString(32)+i,e=":"+e+"R"+i,i=ry++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=oU++,e=":"+e+"r"+i.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},hU={readContext:Zl,useCallback:_4,useContext:Zl,useEffect:R3,useImperativeHandle:E4,useInsertionEffect:v4,useLayoutEffect:y4,useMemo:b4,useReducer:KC,useRef:A4,useState:function(){return KC(sy)},useDebugValue:L3,useDeferredValue:function(n){var e=ec();return w4(e,fo.memoizedState,n)},useTransition:function(){var n=KC(sy)[0],e=ec().memoizedState;return[n,e]},useMutableSource:u4,useSyncExternalStore:h4,useId:C4,unstable_isNewReconciler:!1},dU={readContext:Zl,useCallback:_4,useContext:Zl,useEffect:R3,useImperativeHandle:E4,useInsertionEffect:v4,useLayoutEffect:y4,useMemo:b4,useReducer:XC,useRef:A4,useState:function(){return XC(sy)},useDebugValue:L3,useDeferredValue:function(n){var e=ec();return fo===null?e.memoizedState=n:w4(e,fo.memoizedState,n)},useTransition:function(){var n=XC(sy)[0],e=ec().memoizedState;return[n,e]},useMutableSource:u4,useSyncExternalStore:h4,useId:C4,unstable_isNewReconciler:!1};function Wg(n,e){try{var i="",s=e;do i+=G8(s),s=s.return;while(s);var o=i}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:n,source:e,stack:o,digest:null}}function YC(n,e,i){return{value:n,source:null,stack:i??null,digest:e??null}}function HS(n,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var fU=typeof WeakMap=="function"?WeakMap:Map;function I4(n,e,i){i=_h(-1,i),i.tag=3,i.payload={element:null};var s=e.value;return i.callback=function(){b_||(b_=!0,JS=s),HS(n,e)},i}function R4(n,e,i){i=_h(-1,i),i.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var o=e.value;i.payload=function(){return s(o)},i.callback=function(){HS(n,e)}}var l=n.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(i.callback=function(){HS(n,e),typeof s!="function"&&(Vd===null?Vd=new Set([this]):Vd.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),i}function vL(n,e,i){var s=n.pingCache;if(s===null){s=n.pingCache=new fU;var o=new Set;s.set(e,o)}else o=s.get(e),o===void 0&&(o=new Set,s.set(e,o));o.has(i)||(o.add(i),n=SU.bind(null,n,e,i),e.then(n,n))}function yL(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function xL(n,e,i,s,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=_h(-1,1),e.tag=2,Hd(i,e,1))),i.lanes|=1),n)}var pU=Dh.ReactCurrentOwner,Xa=!1;function Sa(n,e,i,s){e.child=n===null?l4(e,null,i,s):jg(e,n.child,i,s)}function EL(n,e,i,s,o){i=i.render;var l=e.ref;return Og(e,o),s=T3(n,e,i,s,l,o),i=I3(),n!==null&&!Xa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Rh(n,e,o)):(Ps&&i&&g3(e),e.flags|=1,Sa(n,e,s,o),e.child)}function _L(n,e,i,s,o){if(n===null){var l=i.type;return typeof l=="function"&&!U3(l)&&l.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=l,L4(n,e,l,s,o)):(n=KE(i.type,null,s,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(l=n.child,!(n.lanes&o)){var c=l.memoizedProps;if(i=i.compare,i=i!==null?i:Jv,i(c,s)&&n.ref===e.ref)return Rh(n,e,o)}return e.flags|=1,n=Qd(l,s),n.ref=e.ref,n.return=e,e.child=n}function L4(n,e,i,s,o){if(n!==null){var l=n.memoizedProps;if(Jv(l,s)&&n.ref===e.ref)if(Xa=!1,e.pendingProps=s=l,(n.lanes&o)!==0)n.flags&131072&&(Xa=!0);else return e.lanes=n.lanes,Rh(n,e,o)}return VS(n,e,i,s,o)}function B4(n,e,i){var s=e.pendingProps,o=s.children,l=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gs(Mg,vl),vl|=i;else{if(!(i&1073741824))return n=l!==null?l.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,gs(Mg,vl),vl|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:i,gs(Mg,vl),vl|=s}else l!==null?(s=l.baseLanes|i,e.memoizedState=null):s=i,gs(Mg,vl),vl|=s;return Sa(n,e,o,i),e.child}function D4(n,e){var i=e.ref;(n===null&&i!==null||n!==null&&n.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function VS(n,e,i,s,o){var l=$a(i)?Ep:oa.current;return l=Hg(e,l),Og(e,o),i=T3(n,e,i,s,l,o),s=I3(),n!==null&&!Xa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Rh(n,e,o)):(Ps&&s&&g3(e),e.flags|=1,Sa(n,e,i,o),e.child)}function bL(n,e,i,s,o){if($a(i)){var l=!0;f_(e)}else l=!1;if(Og(e,o),e.stateNode===null)jE(n,e),o4(e,i,s),zS(e,i,s,o),s=!0;else if(n===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var u=c.context,f=i.contextType;typeof f=="object"&&f!==null?f=Zl(f):(f=$a(i)?Ep:oa.current,f=Hg(e,f));var A=i.getDerivedStateFromProps,g=typeof A=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==s||u!==f)&&pL(e,c,s,f),Rd=!1;var y=e.memoizedState;c.state=y,v_(e,s,c,o),u=e.memoizedState,d!==s||y!==u||qa.current||Rd?(typeof A=="function"&&(GS(e,i,A,s),u=e.memoizedState),(d=Rd||fL(e,i,d,s,y,u,f))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),c.props=s,c.state=u,c.context=f,s=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{c=e.stateNode,r4(n,e),d=e.memoizedProps,f=e.type===e.elementType?d:Cc(e.type,d),c.props=f,g=e.pendingProps,y=c.context,u=i.contextType,typeof u=="object"&&u!==null?u=Zl(u):(u=$a(i)?Ep:oa.current,u=Hg(e,u));var v=i.getDerivedStateFromProps;(A=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==g||y!==u)&&pL(e,c,s,u),Rd=!1,y=e.memoizedState,c.state=y,v_(e,s,c,o);var _=e.memoizedState;d!==g||y!==_||qa.current||Rd?(typeof v=="function"&&(GS(e,i,v,s),_=e.memoizedState),(f=Rd||fL(e,i,f,s,y,_,u)||!1)?(A||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,_,u),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,_,u)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===n.memoizedProps&&y===n.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===n.memoizedProps&&y===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=_),c.props=s,c.state=_,c.context=u,s=f):(typeof c.componentDidUpdate!="function"||d===n.memoizedProps&&y===n.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===n.memoizedProps&&y===n.memoizedState||(e.flags|=1024),s=!1)}return jS(n,e,i,s,l,o)}function jS(n,e,i,s,o,l){D4(n,e);var c=(e.flags&128)!==0;if(!s&&!c)return o&&lL(e,i,!1),Rh(n,e,l);s=e.stateNode,pU.current=e;var d=c&&typeof i.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&c?(e.child=jg(e,n.child,null,l),e.child=jg(e,null,d,l)):Sa(n,e,d,l),e.memoizedState=s.state,o&&lL(e,i,!0),e.child}function P4(n){var e=n.stateNode;e.pendingContext?aL(n,e.pendingContext,e.pendingContext!==e.context):e.context&&aL(n,e.context,!1),w3(n,e.containerInfo)}function wL(n,e,i,s,o){return Vg(),v3(o),e.flags|=256,Sa(n,e,i,s),e.child}var QS={dehydrated:null,treeContext:null,retryLane:0};function WS(n){return{baseLanes:n,cachePool:null,transitions:null}}function O4(n,e,i){var s=e.pendingProps,o=Us.current,l=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=n!==null&&n.memoizedState===null?!1:(o&2)!==0),d?(l=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),gs(Us,o&1),n===null)return NS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=s.children,n=s.fallback,l?(s=e.mode,l=e.child,c={mode:"hidden",children:c},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=c):l=ib(c,s,0,null),n=mp(n,s,i,null),l.return=e,n.return=e,l.sibling=n,e.child=l,e.child.memoizedState=WS(i),e.memoizedState=QS,n):B3(e,c));if(o=n.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return mU(n,e,c,s,d,o,i);if(l){l=s.fallback,c=e.mode,o=n.child,d=o.sibling;var u={mode:"hidden",children:s.children};return!(c&1)&&e.child!==o?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=Qd(o,u),s.subtreeFlags=o.subtreeFlags&14680064),d!==null?l=Qd(d,l):(l=mp(l,c,i,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,s=l,l=e.child,c=n.child.memoizedState,c=c===null?WS(i):{baseLanes:c.baseLanes|i,cachePool:null,transitions:c.transitions},l.memoizedState=c,l.childLanes=n.childLanes&~i,e.memoizedState=QS,s}return l=n.child,n=l.sibling,s=Qd(l,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=i),s.return=e,s.sibling=null,n!==null&&(i=e.deletions,i===null?(e.deletions=[n],e.flags|=16):i.push(n)),e.child=s,e.memoizedState=null,s}function B3(n,e){return e=ib({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qx(n,e,i,s){return s!==null&&v3(s),jg(e,n.child,null,i),n=B3(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function mU(n,e,i,s,o,l,c){if(i)return e.flags&256?(e.flags&=-257,s=YC(Error(Mn(422))),Qx(n,e,c,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(l=s.fallback,o=e.mode,s=ib({mode:"visible",children:s.children},o,0,null),l=mp(l,o,c,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,e.mode&1&&jg(e,n.child,null,c),e.child.memoizedState=WS(c),e.memoizedState=QS,l);if(!(e.mode&1))return Qx(n,e,c,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var d=s.dgst;return s=d,l=Error(Mn(419)),s=YC(l,s,void 0),Qx(n,e,c,s)}if(d=(c&n.childLanes)!==0,Xa||d){if(s=Ro,s!==null){switch(c&-c){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|c)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Ih(n,o),Fc(s,n,o,-1))}return N3(),s=YC(Error(Mn(421))),Qx(n,e,c,s)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=TU.bind(null,n),o._reactRetry=e,null):(n=l.treeContext,xl=zd(o.nextSibling),El=e,Ps=!0,Tc=null,n!==null&&(Ql[Wl++]=Ah,Ql[Wl++]=vh,Ql[Wl++]=_p,Ah=n.id,vh=n.overflow,_p=e),e=B3(e,s.children),e.flags|=4096,e)}function CL(n,e,i){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),US(n.return,e,i)}function qC(n,e,i,s,o){var l=n.memoizedState;l===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=i,l.tailMode=o)}function F4(n,e,i){var s=e.pendingProps,o=s.revealOrder,l=s.tail;if(Sa(n,e,s.children,i),s=Us.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&CL(n,i,e);else if(n.tag===19)CL(n,i,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(gs(Us,s),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(i=e.child,o=null;i!==null;)n=i.alternate,n!==null&&y_(n)===null&&(o=i),i=i.sibling;i=o,i===null?(o=e.child,e.child=null):(o=i.sibling,i.sibling=null),qC(e,!1,o,i,l);break;case"backwards":for(i=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&y_(n)===null){e.child=o;break}n=o.sibling,o.sibling=i,i=o,o=n}qC(e,!0,i,null,l);break;case"together":qC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jE(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Rh(n,e,i){if(n!==null&&(e.dependencies=n.dependencies),wp|=e.lanes,!(i&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Mn(153));if(e.child!==null){for(n=e.child,i=Qd(n,n.pendingProps),e.child=i,i.return=e;n.sibling!==null;)n=n.sibling,i=i.sibling=Qd(n,n.pendingProps),i.return=e;i.sibling=null}return e.child}function gU(n,e,i){switch(e.tag){case 3:P4(e),Vg();break;case 5:c4(e);break;case 1:$a(e.type)&&f_(e);break;case 4:w3(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,o=e.memoizedProps.value;gs(g_,s._currentValue),s._currentValue=o;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(gs(Us,Us.current&1),e.flags|=128,null):i&e.child.childLanes?O4(n,e,i):(gs(Us,Us.current&1),n=Rh(n,e,i),n!==null?n.sibling:null);gs(Us,Us.current&1);break;case 19:if(s=(i&e.childLanes)!==0,n.flags&128){if(s)return F4(n,e,i);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),gs(Us,Us.current),s)break;return null;case 22:case 23:return e.lanes=0,B4(n,e,i)}return Rh(n,e,i)}var k4,KS,N4,U4;k4=function(n,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)n.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};KS=function(){};N4=function(n,e,i,s){var o=n.memoizedProps;if(o!==s){n=e.stateNode,hp(Mu.current);var l=null;switch(i){case"input":o=mS(n,o),s=mS(n,s),l=[];break;case"select":o=zs({},o,{value:void 0}),s=zs({},s,{value:void 0}),l=[];break;case"textarea":o=vS(n,o),s=vS(n,s),l=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=h_)}xS(i,s);var c;i=null;for(f in o)if(!s.hasOwnProperty(f)&&o.hasOwnProperty(f)&&o[f]!=null)if(f==="style"){var d=o[f];for(c in d)d.hasOwnProperty(c)&&(i||(i={}),i[c]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Qv.hasOwnProperty(f)?l||(l=[]):(l=l||[]).push(f,null));for(f in s){var u=s[f];if(d=o!=null?o[f]:void 0,s.hasOwnProperty(f)&&u!==d&&(u!=null||d!=null))if(f==="style")if(d){for(c in d)!d.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(i||(i={}),i[c]="");for(c in u)u.hasOwnProperty(c)&&d[c]!==u[c]&&(i||(i={}),i[c]=u[c])}else i||(l||(l=[]),l.push(f,i)),i=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(l=l||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Qv.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Es("scroll",n),l||d===u||(l=[])):(l=l||[]).push(f,u))}i&&(l=l||[]).push("style",i);var f=l;(e.updateQueue=f)&&(e.flags|=4)}};U4=function(n,e,i,s){i!==s&&(e.flags|=4)};function WA(n,e){if(!Ps)switch(n.tailMode){case"hidden":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function ta(n){var e=n.alternate!==null&&n.alternate.child===n.child,i=0,s=0;if(e)for(var o=n.child;o!==null;)i|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)i|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=s,n.childLanes=i,e}function AU(n,e,i){var s=e.pendingProps;switch(A3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ta(e),null;case 1:return $a(e.type)&&d_(),ta(e),null;case 3:return s=e.stateNode,Qg(),bs(qa),bs(oa),M3(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Vx(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tc!==null&&(tT(Tc),Tc=null))),KS(n,e),ta(e),null;case 5:C3(e);var o=hp(iy.current);if(i=e.type,n!==null&&e.stateNode!=null)N4(n,e,i,s,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Mn(166));return ta(e),null}if(n=hp(Mu.current),Vx(e)){s=e.stateNode,i=e.type;var l=e.memoizedProps;switch(s[bu]=e,s[ty]=l,n=(e.mode&1)!==0,i){case"dialog":Es("cancel",s),Es("close",s);break;case"iframe":case"object":case"embed":Es("load",s);break;case"video":case"audio":for(o=0;o<xv.length;o++)Es(xv[o],s);break;case"source":Es("error",s);break;case"img":case"image":case"link":Es("error",s),Es("load",s);break;case"details":Es("toggle",s);break;case"input":PR(s,l),Es("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Es("invalid",s);break;case"textarea":FR(s,l),Es("invalid",s)}xS(i,l),o=null;for(var c in l)if(l.hasOwnProperty(c)){var d=l[c];c==="children"?typeof d=="string"?s.textContent!==d&&(l.suppressHydrationWarning!==!0&&Hx(s.textContent,d,n),o=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&Hx(s.textContent,d,n),o=["children",""+d]):Qv.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&Es("scroll",s)}switch(i){case"input":Px(s),OR(s,l,!0);break;case"textarea":Px(s),kR(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=h_)}s=o,e.updateQueue=s,s!==null&&(e.flags|=4)}else{c=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=dO(i)),n==="http://www.w3.org/1999/xhtml"?i==="script"?(n=c.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=c.createElement(i,{is:s.is}):(n=c.createElement(i),i==="select"&&(c=n,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):n=c.createElementNS(n,i),n[bu]=e,n[ty]=s,k4(n,e,!1,!1),e.stateNode=n;e:{switch(c=ES(i,s),i){case"dialog":Es("cancel",n),Es("close",n),o=s;break;case"iframe":case"object":case"embed":Es("load",n),o=s;break;case"video":case"audio":for(o=0;o<xv.length;o++)Es(xv[o],n);o=s;break;case"source":Es("error",n),o=s;break;case"img":case"image":case"link":Es("error",n),Es("load",n),o=s;break;case"details":Es("toggle",n),o=s;break;case"input":PR(n,s),o=mS(n,s),Es("invalid",n);break;case"option":o=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},o=zs({},s,{value:void 0}),Es("invalid",n);break;case"textarea":FR(n,s),o=vS(n,s),Es("invalid",n);break;default:o=s}xS(i,o),d=o;for(l in d)if(d.hasOwnProperty(l)){var u=d[l];l==="style"?mO(n,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fO(n,u)):l==="children"?typeof u=="string"?(i!=="textarea"||u!=="")&&Wv(n,u):typeof u=="number"&&Wv(n,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qv.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Es("scroll",n):u!=null&&n3(n,l,u,c))}switch(i){case"input":Px(n),OR(n,s,!1);break;case"textarea":Px(n),kR(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Xd(s.value));break;case"select":n.multiple=!!s.multiple,l=s.value,l!=null?Lg(n,!!s.multiple,l,!1):s.defaultValue!=null&&Lg(n,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=h_)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ta(e),null;case 6:if(n&&e.stateNode!=null)U4(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Mn(166));if(i=hp(iy.current),hp(Mu.current),Vx(e)){if(s=e.stateNode,i=e.memoizedProps,s[bu]=e,(l=s.nodeValue!==i)&&(n=El,n!==null))switch(n.tag){case 3:Hx(s.nodeValue,i,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Hx(s.nodeValue,i,(n.mode&1)!==0)}l&&(e.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[bu]=e,e.stateNode=s}return ta(e),null;case 13:if(bs(Us),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ps&&xl!==null&&e.mode&1&&!(e.flags&128))n4(),Vg(),e.flags|=98560,l=!1;else if(l=Vx(e),s!==null&&s.dehydrated!==null){if(n===null){if(!l)throw Error(Mn(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Mn(317));l[bu]=e}else Vg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ta(e),l=!1}else Tc!==null&&(tT(Tc),Tc=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Us.current&1?po===0&&(po=3):N3())),e.updateQueue!==null&&(e.flags|=4),ta(e),null);case 4:return Qg(),KS(n,e),n===null&&Zv(e.stateNode.containerInfo),ta(e),null;case 10:return E3(e.type._context),ta(e),null;case 17:return $a(e.type)&&d_(),ta(e),null;case 19:if(bs(Us),l=e.memoizedState,l===null)return ta(e),null;if(s=(e.flags&128)!==0,c=l.rendering,c===null)if(s)WA(l,!1);else{if(po!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(c=y_(n),c!==null){for(e.flags|=128,WA(l,!1),s=c.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=i,i=e.child;i!==null;)l=i,n=s,l.flags&=14680066,c=l.alternate,c===null?(l.childLanes=0,l.lanes=n,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,n=c.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),i=i.sibling;return gs(Us,Us.current&1|2),e.child}n=n.sibling}l.tail!==null&&no()>Kg&&(e.flags|=128,s=!0,WA(l,!1),e.lanes=4194304)}else{if(!s)if(n=y_(c),n!==null){if(e.flags|=128,s=!0,i=n.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),WA(l,!0),l.tail===null&&l.tailMode==="hidden"&&!c.alternate&&!Ps)return ta(e),null}else 2*no()-l.renderingStartTime>Kg&&i!==1073741824&&(e.flags|=128,s=!0,WA(l,!1),e.lanes=4194304);l.isBackwards?(c.sibling=e.child,e.child=c):(i=l.last,i!==null?i.sibling=c:e.child=c,l.last=c)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=no(),e.sibling=null,i=Us.current,gs(Us,s?i&1|2:i&1),e):(ta(e),null);case 22:case 23:return k3(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?vl&1073741824&&(ta(e),e.subtreeFlags&6&&(e.flags|=8192)):ta(e),null;case 24:return null;case 25:return null}throw Error(Mn(156,e.tag))}function vU(n,e){switch(A3(e),e.tag){case 1:return $a(e.type)&&d_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Qg(),bs(qa),bs(oa),M3(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return C3(e),null;case 13:if(bs(Us),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Mn(340));Vg()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return bs(Us),null;case 4:return Qg(),null;case 10:return E3(e.type._context),null;case 22:case 23:return k3(),null;case 24:return null;default:return null}}var Wx=!1,sa=!1,yU=typeof WeakSet=="function"?WeakSet:Set,mi=null;function Cg(n,e){var i=n.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){Ks(n,e,s)}else i.current=null}function XS(n,e,i){try{i()}catch(s){Ks(n,e,s)}}var ML=!1;function xU(n,e){if(LS=l_,n=VO(),m3(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var o=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{i.nodeType,l.nodeType}catch{i=null;break e}var c=0,d=-1,u=-1,f=0,A=0,g=n,y=null;t:for(;;){for(var v;g!==i||o!==0&&g.nodeType!==3||(d=c+o),g!==l||s!==0&&g.nodeType!==3||(u=c+s),g.nodeType===3&&(c+=g.nodeValue.length),(v=g.firstChild)!==null;)y=g,g=v;for(;;){if(g===n)break t;if(y===i&&++f===o&&(d=c),y===l&&++A===s&&(u=c),(v=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=v}i=d===-1||u===-1?null:{start:d,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(BS={focusedElem:n,selectionRange:i},l_=!1,mi=e;mi!==null;)if(e=mi,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,mi=n;else for(;mi!==null;){e=mi;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,b=_.memoizedState,m=e.stateNode,S=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:Cc(e.type,x),b);m.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Mn(163))}}catch(M){Ks(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,mi=n;break}mi=e.return}return _=ML,ML=!1,_}function Dv(n,e,i){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&n)===n){var l=o.destroy;o.destroy=void 0,l!==void 0&&XS(e,i,l)}o=o.next}while(o!==s)}}function tb(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&n)===n){var s=i.create;i.destroy=s()}i=i.next}while(i!==e)}}function YS(n){var e=n.ref;if(e!==null){var i=n.stateNode;switch(n.tag){case 5:n=i;break;default:n=i}typeof e=="function"?e(n):e.current=n}}function G4(n){var e=n.alternate;e!==null&&(n.alternate=null,G4(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[bu],delete e[ty],delete e[OS],delete e[nU],delete e[iU])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function z4(n){return n.tag===5||n.tag===3||n.tag===4}function SL(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||z4(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qS(n,e,i){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(n,e):i.insertBefore(n,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(n,i)):(e=i,e.appendChild(n)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=h_));else if(s!==4&&(n=n.child,n!==null))for(qS(n,e,i),n=n.sibling;n!==null;)qS(n,e,i),n=n.sibling}function $S(n,e,i){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?i.insertBefore(n,e):i.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for($S(n,e,i),n=n.sibling;n!==null;)$S(n,e,i),n=n.sibling}var Go=null,Mc=!1;function Ad(n,e,i){for(i=i.child;i!==null;)H4(n,e,i),i=i.sibling}function H4(n,e,i){if(Cu&&typeof Cu.onCommitFiberUnmount=="function")try{Cu.onCommitFiberUnmount(K_,i)}catch{}switch(i.tag){case 5:sa||Cg(i,e);case 6:var s=Go,o=Mc;Go=null,Ad(n,e,i),Go=s,Mc=o,Go!==null&&(Mc?(n=Go,i=i.stateNode,n.nodeType===8?n.parentNode.removeChild(i):n.removeChild(i)):Go.removeChild(i.stateNode));break;case 18:Go!==null&&(Mc?(n=Go,i=i.stateNode,n.nodeType===8?VC(n.parentNode,i):n.nodeType===1&&VC(n,i),qv(n)):VC(Go,i.stateNode));break;case 4:s=Go,o=Mc,Go=i.stateNode.containerInfo,Mc=!0,Ad(n,e,i),Go=s,Mc=o;break;case 0:case 11:case 14:case 15:if(!sa&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var l=o,c=l.destroy;l=l.tag,c!==void 0&&(l&2||l&4)&&XS(i,e,c),o=o.next}while(o!==s)}Ad(n,e,i);break;case 1:if(!sa&&(Cg(i,e),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(d){Ks(i,e,d)}Ad(n,e,i);break;case 21:Ad(n,e,i);break;case 22:i.mode&1?(sa=(s=sa)||i.memoizedState!==null,Ad(n,e,i),sa=s):Ad(n,e,i);break;default:Ad(n,e,i)}}function TL(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var i=n.stateNode;i===null&&(i=n.stateNode=new yU),e.forEach(function(s){var o=IU.bind(null,n,s);i.has(s)||(i.add(s),s.then(o,o))})}}function vc(n,e){var i=e.deletions;if(i!==null)for(var s=0;s<i.length;s++){var o=i[s];try{var l=n,c=e,d=c;e:for(;d!==null;){switch(d.tag){case 5:Go=d.stateNode,Mc=!1;break e;case 3:Go=d.stateNode.containerInfo,Mc=!0;break e;case 4:Go=d.stateNode.containerInfo,Mc=!0;break e}d=d.return}if(Go===null)throw Error(Mn(160));H4(l,c,o),Go=null,Mc=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(f){Ks(o,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)V4(e,n),e=e.sibling}function V4(n,e){var i=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(vc(e,n),vu(n),s&4){try{Dv(3,n,n.return),tb(3,n)}catch(x){Ks(n,n.return,x)}try{Dv(5,n,n.return)}catch(x){Ks(n,n.return,x)}}break;case 1:vc(e,n),vu(n),s&512&&i!==null&&Cg(i,i.return);break;case 5:if(vc(e,n),vu(n),s&512&&i!==null&&Cg(i,i.return),n.flags&32){var o=n.stateNode;try{Wv(o,"")}catch(x){Ks(n,n.return,x)}}if(s&4&&(o=n.stateNode,o!=null)){var l=n.memoizedProps,c=i!==null?i.memoizedProps:l,d=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&uO(o,l),ES(d,c);var f=ES(d,l);for(c=0;c<u.length;c+=2){var A=u[c],g=u[c+1];A==="style"?mO(o,g):A==="dangerouslySetInnerHTML"?fO(o,g):A==="children"?Wv(o,g):n3(o,A,g,f)}switch(d){case"input":gS(o,l);break;case"textarea":hO(o,l);break;case"select":var y=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Lg(o,!!l.multiple,v,!1):y!==!!l.multiple&&(l.defaultValue!=null?Lg(o,!!l.multiple,l.defaultValue,!0):Lg(o,!!l.multiple,l.multiple?[]:"",!1))}o[ty]=l}catch(x){Ks(n,n.return,x)}}break;case 6:if(vc(e,n),vu(n),s&4){if(n.stateNode===null)throw Error(Mn(162));o=n.stateNode,l=n.memoizedProps;try{o.nodeValue=l}catch(x){Ks(n,n.return,x)}}break;case 3:if(vc(e,n),vu(n),s&4&&i!==null&&i.memoizedState.isDehydrated)try{qv(e.containerInfo)}catch(x){Ks(n,n.return,x)}break;case 4:vc(e,n),vu(n);break;case 13:vc(e,n),vu(n),o=n.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(O3=no())),s&4&&TL(n);break;case 22:if(A=i!==null&&i.memoizedState!==null,n.mode&1?(sa=(f=sa)||A,vc(e,n),sa=f):vc(e,n),vu(n),s&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!A&&n.mode&1)for(mi=n,A=n.child;A!==null;){for(g=mi=A;mi!==null;){switch(y=mi,v=y.child,y.tag){case 0:case 11:case 14:case 15:Dv(4,y,y.return);break;case 1:Cg(y,y.return);var _=y.stateNode;if(typeof _.componentWillUnmount=="function"){s=y,i=y.return;try{e=s,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){Ks(s,i,x)}}break;case 5:Cg(y,y.return);break;case 22:if(y.memoizedState!==null){RL(g);continue}}v!==null?(v.return=y,mi=v):RL(g)}A=A.sibling}e:for(A=null,g=n;;){if(g.tag===5){if(A===null){A=g;try{o=g.stateNode,f?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=g.stateNode,u=g.memoizedProps.style,c=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=pO("display",c))}catch(x){Ks(n,n.return,x)}}}else if(g.tag===6){if(A===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(x){Ks(n,n.return,x)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===n)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===n)break e;for(;g.sibling===null;){if(g.return===null||g.return===n)break e;A===g&&(A=null),g=g.return}A===g&&(A=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:vc(e,n),vu(n),s&4&&TL(n);break;case 21:break;default:vc(e,n),vu(n)}}function vu(n){var e=n.flags;if(e&2){try{e:{for(var i=n.return;i!==null;){if(z4(i)){var s=i;break e}i=i.return}throw Error(Mn(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(Wv(o,""),s.flags&=-33);var l=SL(n);$S(n,l,o);break;case 3:case 4:var c=s.stateNode.containerInfo,d=SL(n);qS(n,d,c);break;default:throw Error(Mn(161))}}catch(u){Ks(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function EU(n,e,i){mi=n,j4(n)}function j4(n,e,i){for(var s=(n.mode&1)!==0;mi!==null;){var o=mi,l=o.child;if(o.tag===22&&s){var c=o.memoizedState!==null||Wx;if(!c){var d=o.alternate,u=d!==null&&d.memoizedState!==null||sa;d=Wx;var f=sa;if(Wx=c,(sa=u)&&!f)for(mi=o;mi!==null;)c=mi,u=c.child,c.tag===22&&c.memoizedState!==null?LL(o):u!==null?(u.return=c,mi=u):LL(o);for(;l!==null;)mi=l,j4(l),l=l.sibling;mi=o,Wx=d,sa=f}IL(n)}else o.subtreeFlags&8772&&l!==null?(l.return=o,mi=l):IL(n)}}function IL(n){for(;mi!==null;){var e=mi;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sa||tb(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!sa)if(i===null)s.componentDidMount();else{var o=e.elementType===e.type?i.memoizedProps:Cc(e.type,i.memoizedProps);s.componentDidUpdate(o,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&dL(e,l,s);break;case 3:var c=e.updateQueue;if(c!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}dL(e,c,i)}break;case 5:var d=e.stateNode;if(i===null&&e.flags&4){i=d;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&i.focus();break;case"img":u.src&&(i.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var A=f.memoizedState;if(A!==null){var g=A.dehydrated;g!==null&&qv(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Mn(163))}sa||e.flags&512&&YS(e)}catch(y){Ks(e,e.return,y)}}if(e===n){mi=null;break}if(i=e.sibling,i!==null){i.return=e.return,mi=i;break}mi=e.return}}function RL(n){for(;mi!==null;){var e=mi;if(e===n){mi=null;break}var i=e.sibling;if(i!==null){i.return=e.return,mi=i;break}mi=e.return}}function LL(n){for(;mi!==null;){var e=mi;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{tb(4,e)}catch(u){Ks(e,i,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var o=e.return;try{s.componentDidMount()}catch(u){Ks(e,o,u)}}var l=e.return;try{YS(e)}catch(u){Ks(e,l,u)}break;case 5:var c=e.return;try{YS(e)}catch(u){Ks(e,c,u)}}}catch(u){Ks(e,e.return,u)}if(e===n){mi=null;break}var d=e.sibling;if(d!==null){d.return=e.return,mi=d;break}mi=e.return}}var _U=Math.ceil,__=Dh.ReactCurrentDispatcher,D3=Dh.ReactCurrentOwner,$l=Dh.ReactCurrentBatchConfig,Qr=0,Ro=null,lo=null,zo=0,vl=0,Mg=Zd(0),po=0,ay=null,wp=0,nb=0,P3=0,Pv=null,Ka=null,O3=0,Kg=1/0,hh=null,b_=!1,JS=null,Vd=null,Kx=!1,Od=null,w_=0,Ov=0,ZS=null,QE=-1,WE=0;function Ra(){return Qr&6?no():QE!==-1?QE:QE=no()}function jd(n){return n.mode&1?Qr&2&&zo!==0?zo&-zo:sU.transition!==null?(WE===0&&(WE=SO()),WE):(n=is,n!==0||(n=window.event,n=n===void 0?16:PO(n.type)),n):1}function Fc(n,e,i,s){if(50<Ov)throw Ov=0,ZS=null,Error(Mn(185));xy(n,i,s),(!(Qr&2)||n!==Ro)&&(n===Ro&&(!(Qr&2)&&(nb|=i),po===4&&Dd(n,zo)),Ja(n,s),i===1&&Qr===0&&!(e.mode&1)&&(Kg=no()+500,J_&&ef()))}function Ja(n,e){var i=n.callbackNode;s6(n,e);var s=a_(n,n===Ro?zo:0);if(s===0)i!==null&&GR(i),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(i!=null&&GR(i),e===1)n.tag===0?rU(BL.bind(null,n)):ZO(BL.bind(null,n)),eU(function(){!(Qr&6)&&ef()}),i=null;else{switch(TO(s)){case 1:i=a3;break;case 4:i=CO;break;case 16:i=o_;break;case 536870912:i=MO;break;default:i=o_}i=J4(i,Q4.bind(null,n))}n.callbackPriority=e,n.callbackNode=i}}function Q4(n,e){if(QE=-1,WE=0,Qr&6)throw Error(Mn(327));var i=n.callbackNode;if(Fg()&&n.callbackNode!==i)return null;var s=a_(n,n===Ro?zo:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=C_(n,s);else{e=s;var o=Qr;Qr|=2;var l=K4();(Ro!==n||zo!==e)&&(hh=null,Kg=no()+500,pp(n,e));do try{CU();break}catch(d){W4(n,d)}while(1);x3(),__.current=l,Qr=o,lo!==null?e=0:(Ro=null,zo=0,e=po)}if(e!==0){if(e===2&&(o=MS(n),o!==0&&(s=o,e=eT(n,o))),e===1)throw i=ay,pp(n,0),Dd(n,s),Ja(n,no()),i;if(e===6)Dd(n,s);else{if(o=n.current.alternate,!(s&30)&&!bU(o)&&(e=C_(n,s),e===2&&(l=MS(n),l!==0&&(s=l,e=eT(n,l))),e===1))throw i=ay,pp(n,0),Dd(n,s),Ja(n,no()),i;switch(n.finishedWork=o,n.finishedLanes=s,e){case 0:case 1:throw Error(Mn(345));case 2:rp(n,Ka,hh);break;case 3:if(Dd(n,s),(s&130023424)===s&&(e=O3+500-no(),10<e)){if(a_(n,0)!==0)break;if(o=n.suspendedLanes,(o&s)!==s){Ra(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=PS(rp.bind(null,n,Ka,hh),e);break}rp(n,Ka,hh);break;case 4:if(Dd(n,s),(s&4194240)===s)break;for(e=n.eventTimes,o=-1;0<s;){var c=31-Oc(s);l=1<<c,c=e[c],c>o&&(o=c),s&=~l}if(s=o,s=no()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*_U(s/1960))-s,10<s){n.timeoutHandle=PS(rp.bind(null,n,Ka,hh),s);break}rp(n,Ka,hh);break;case 5:rp(n,Ka,hh);break;default:throw Error(Mn(329))}}}return Ja(n,no()),n.callbackNode===i?Q4.bind(null,n):null}function eT(n,e){var i=Pv;return n.current.memoizedState.isDehydrated&&(pp(n,e).flags|=256),n=C_(n,e),n!==2&&(e=Ka,Ka=i,e!==null&&tT(e)),n}function tT(n){Ka===null?Ka=n:Ka.push.apply(Ka,n)}function bU(n){for(var e=n;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var o=i[s],l=o.getSnapshot;o=o.value;try{if(!kc(l(),o))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dd(n,e){for(e&=~P3,e&=~nb,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var i=31-Oc(e),s=1<<i;n[i]=-1,e&=~s}}function BL(n){if(Qr&6)throw Error(Mn(327));Fg();var e=a_(n,0);if(!(e&1))return Ja(n,no()),null;var i=C_(n,e);if(n.tag!==0&&i===2){var s=MS(n);s!==0&&(e=s,i=eT(n,s))}if(i===1)throw i=ay,pp(n,0),Dd(n,e),Ja(n,no()),i;if(i===6)throw Error(Mn(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,rp(n,Ka,hh),Ja(n,no()),null}function F3(n,e){var i=Qr;Qr|=1;try{return n(e)}finally{Qr=i,Qr===0&&(Kg=no()+500,J_&&ef())}}function Cp(n){Od!==null&&Od.tag===0&&!(Qr&6)&&Fg();var e=Qr;Qr|=1;var i=$l.transition,s=is;try{if($l.transition=null,is=1,n)return n()}finally{is=s,$l.transition=i,Qr=e,!(Qr&6)&&ef()}}function k3(){vl=Mg.current,bs(Mg)}function pp(n,e){n.finishedWork=null,n.finishedLanes=0;var i=n.timeoutHandle;if(i!==-1&&(n.timeoutHandle=-1,Z6(i)),lo!==null)for(i=lo.return;i!==null;){var s=i;switch(A3(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&d_();break;case 3:Qg(),bs(qa),bs(oa),M3();break;case 5:C3(s);break;case 4:Qg();break;case 13:bs(Us);break;case 19:bs(Us);break;case 10:E3(s.type._context);break;case 22:case 23:k3()}i=i.return}if(Ro=n,lo=n=Qd(n.current,null),zo=vl=e,po=0,ay=null,P3=nb=wp=0,Ka=Pv=null,up!==null){for(e=0;e<up.length;e++)if(i=up[e],s=i.interleaved,s!==null){i.interleaved=null;var o=s.next,l=i.pending;if(l!==null){var c=l.next;l.next=o,s.next=c}i.pending=s}up=null}return n}function W4(n,e){do{var i=lo;try{if(x3(),HE.current=E_,x_){for(var s=Gs.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}x_=!1}if(bp=0,So=fo=Gs=null,Bv=!1,ry=0,D3.current=null,i===null||i.return===null){po=1,ay=e,lo=null;break}e:{var l=n,c=i.return,d=i,u=e;if(e=zo,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,A=d,g=A.tag;if(!(A.mode&1)&&(g===0||g===11||g===15)){var y=A.alternate;y?(A.updateQueue=y.updateQueue,A.memoizedState=y.memoizedState,A.lanes=y.lanes):(A.updateQueue=null,A.memoizedState=null)}var v=yL(c);if(v!==null){v.flags&=-257,xL(v,c,d,l,e),v.mode&1&&vL(l,f,e),e=v,u=f;var _=e.updateQueue;if(_===null){var x=new Set;x.add(u),e.updateQueue=x}else _.add(u);break e}else{if(!(e&1)){vL(l,f,e),N3();break e}u=Error(Mn(426))}}else if(Ps&&d.mode&1){var b=yL(c);if(b!==null){!(b.flags&65536)&&(b.flags|=256),xL(b,c,d,l,e),v3(Wg(u,d));break e}}l=u=Wg(u,d),po!==4&&(po=2),Pv===null?Pv=[l]:Pv.push(l),l=c;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var m=I4(l,u,e);hL(l,m);break e;case 1:d=u;var S=l.type,C=l.stateNode;if(!(l.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Vd===null||!Vd.has(C)))){l.flags|=65536,e&=-e,l.lanes|=e;var M=R4(l,d,e);hL(l,M);break e}}l=l.return}while(l!==null)}Y4(i)}catch(T){e=T,lo===i&&i!==null&&(lo=i=i.return);continue}break}while(1)}function K4(){var n=__.current;return __.current=E_,n===null?E_:n}function N3(){(po===0||po===3||po===2)&&(po=4),Ro===null||!(wp&268435455)&&!(nb&268435455)||Dd(Ro,zo)}function C_(n,e){var i=Qr;Qr|=2;var s=K4();(Ro!==n||zo!==e)&&(hh=null,pp(n,e));do try{wU();break}catch(o){W4(n,o)}while(1);if(x3(),Qr=i,__.current=s,lo!==null)throw Error(Mn(261));return Ro=null,zo=0,po}function wU(){for(;lo!==null;)X4(lo)}function CU(){for(;lo!==null&&!q8();)X4(lo)}function X4(n){var e=$4(n.alternate,n,vl);n.memoizedProps=n.pendingProps,e===null?Y4(n):lo=e,D3.current=null}function Y4(n){var e=n;do{var i=e.alternate;if(n=e.return,e.flags&32768){if(i=vU(i,e),i!==null){i.flags&=32767,lo=i;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{po=6,lo=null;return}}else if(i=AU(i,e,vl),i!==null){lo=i;return}if(e=e.sibling,e!==null){lo=e;return}lo=e=n}while(e!==null);po===0&&(po=5)}function rp(n,e,i){var s=is,o=$l.transition;try{$l.transition=null,is=1,MU(n,e,i,s)}finally{$l.transition=o,is=s}return null}function MU(n,e,i,s){do Fg();while(Od!==null);if(Qr&6)throw Error(Mn(327));i=n.finishedWork;var o=n.finishedLanes;if(i===null)return null;if(n.finishedWork=null,n.finishedLanes=0,i===n.current)throw Error(Mn(177));n.callbackNode=null,n.callbackPriority=0;var l=i.lanes|i.childLanes;if(o6(n,l),n===Ro&&(lo=Ro=null,zo=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Kx||(Kx=!0,J4(o_,function(){return Fg(),null})),l=(i.flags&15990)!==0,i.subtreeFlags&15990||l){l=$l.transition,$l.transition=null;var c=is;is=1;var d=Qr;Qr|=4,D3.current=null,xU(n,i),V4(i,n),W6(BS),l_=!!LS,BS=LS=null,n.current=i,EU(i),$8(),Qr=d,is=c,$l.transition=l}else n.current=i;if(Kx&&(Kx=!1,Od=n,w_=o),l=n.pendingLanes,l===0&&(Vd=null),e6(i.stateNode),Ja(n,no()),e!==null)for(s=n.onRecoverableError,i=0;i<e.length;i++)o=e[i],s(o.value,{componentStack:o.stack,digest:o.digest});if(b_)throw b_=!1,n=JS,JS=null,n;return w_&1&&n.tag!==0&&Fg(),l=n.pendingLanes,l&1?n===ZS?Ov++:(Ov=0,ZS=n):Ov=0,ef(),null}function Fg(){if(Od!==null){var n=TO(w_),e=$l.transition,i=is;try{if($l.transition=null,is=16>n?16:n,Od===null)var s=!1;else{if(n=Od,Od=null,w_=0,Qr&6)throw Error(Mn(331));var o=Qr;for(Qr|=4,mi=n.current;mi!==null;){var l=mi,c=l.child;if(mi.flags&16){var d=l.deletions;if(d!==null){for(var u=0;u<d.length;u++){var f=d[u];for(mi=f;mi!==null;){var A=mi;switch(A.tag){case 0:case 11:case 15:Dv(8,A,l)}var g=A.child;if(g!==null)g.return=A,mi=g;else for(;mi!==null;){A=mi;var y=A.sibling,v=A.return;if(G4(A),A===f){mi=null;break}if(y!==null){y.return=v,mi=y;break}mi=v}}}var _=l.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}mi=l}}if(l.subtreeFlags&2064&&c!==null)c.return=l,mi=c;else e:for(;mi!==null;){if(l=mi,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Dv(9,l,l.return)}var m=l.sibling;if(m!==null){m.return=l.return,mi=m;break e}mi=l.return}}var S=n.current;for(mi=S;mi!==null;){c=mi;var C=c.child;if(c.subtreeFlags&2064&&C!==null)C.return=c,mi=C;else e:for(c=S;mi!==null;){if(d=mi,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:tb(9,d)}}catch(T){Ks(d,d.return,T)}if(d===c){mi=null;break e}var M=d.sibling;if(M!==null){M.return=d.return,mi=M;break e}mi=d.return}}if(Qr=o,ef(),Cu&&typeof Cu.onPostCommitFiberRoot=="function")try{Cu.onPostCommitFiberRoot(K_,n)}catch{}s=!0}return s}finally{is=i,$l.transition=e}}return!1}function DL(n,e,i){e=Wg(i,e),e=I4(n,e,1),n=Hd(n,e,1),e=Ra(),n!==null&&(xy(n,1,e),Ja(n,e))}function Ks(n,e,i){if(n.tag===3)DL(n,n,i);else for(;e!==null;){if(e.tag===3){DL(e,n,i);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Vd===null||!Vd.has(s))){n=Wg(i,n),n=R4(e,n,1),e=Hd(e,n,1),n=Ra(),e!==null&&(xy(e,1,n),Ja(e,n));break}}e=e.return}}function SU(n,e,i){var s=n.pingCache;s!==null&&s.delete(e),e=Ra(),n.pingedLanes|=n.suspendedLanes&i,Ro===n&&(zo&i)===i&&(po===4||po===3&&(zo&130023424)===zo&&500>no()-O3?pp(n,0):P3|=i),Ja(n,e)}function q4(n,e){e===0&&(n.mode&1?(e=kx,kx<<=1,!(kx&130023424)&&(kx=4194304)):e=1);var i=Ra();n=Ih(n,e),n!==null&&(xy(n,e,i),Ja(n,i))}function TU(n){var e=n.memoizedState,i=0;e!==null&&(i=e.retryLane),q4(n,i)}function IU(n,e){var i=0;switch(n.tag){case 13:var s=n.stateNode,o=n.memoizedState;o!==null&&(i=o.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(Mn(314))}s!==null&&s.delete(e),q4(n,i)}var $4;$4=function(n,e,i){if(n!==null)if(n.memoizedProps!==e.pendingProps||qa.current)Xa=!0;else{if(!(n.lanes&i)&&!(e.flags&128))return Xa=!1,gU(n,e,i);Xa=!!(n.flags&131072)}else Xa=!1,Ps&&e.flags&1048576&&e4(e,m_,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;jE(n,e),n=e.pendingProps;var o=Hg(e,oa.current);Og(e,i),o=T3(null,e,s,n,o,i);var l=I3();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$a(s)?(l=!0,f_(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,b3(e),o.updater=Z_,e.stateNode=o,o._reactInternals=e,zS(e,s,n,i),e=jS(null,e,s,!0,l,i)):(e.tag=0,Ps&&l&&g3(e),Sa(null,e,o,i),e=e.child),e;case 16:s=e.elementType;e:{switch(jE(n,e),n=e.pendingProps,o=s._init,s=o(s._payload),e.type=s,o=e.tag=LU(s),n=Cc(s,n),o){case 0:e=VS(null,e,s,n,i);break e;case 1:e=bL(null,e,s,n,i);break e;case 11:e=EL(null,e,s,n,i);break e;case 14:e=_L(null,e,s,Cc(s.type,n),i);break e}throw Error(Mn(306,s,""))}return e;case 0:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Cc(s,o),VS(n,e,s,o,i);case 1:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Cc(s,o),bL(n,e,s,o,i);case 3:e:{if(P4(e),n===null)throw Error(Mn(387));s=e.pendingProps,l=e.memoizedState,o=l.element,r4(n,e),v_(e,s,null,i);var c=e.memoizedState;if(s=c.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Wg(Error(Mn(423)),e),e=wL(n,e,s,i,o);break e}else if(s!==o){o=Wg(Error(Mn(424)),e),e=wL(n,e,s,i,o);break e}else for(xl=zd(e.stateNode.containerInfo.firstChild),El=e,Ps=!0,Tc=null,i=l4(e,null,s,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Vg(),s===o){e=Rh(n,e,i);break e}Sa(n,e,s,i)}e=e.child}return e;case 5:return c4(e),n===null&&NS(e),s=e.type,o=e.pendingProps,l=n!==null?n.memoizedProps:null,c=o.children,DS(s,o)?c=null:l!==null&&DS(s,l)&&(e.flags|=32),D4(n,e),Sa(n,e,c,i),e.child;case 6:return n===null&&NS(e),null;case 13:return O4(n,e,i);case 4:return w3(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=jg(e,null,s,i):Sa(n,e,s,i),e.child;case 11:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Cc(s,o),EL(n,e,s,o,i);case 7:return Sa(n,e,e.pendingProps,i),e.child;case 8:return Sa(n,e,e.pendingProps.children,i),e.child;case 12:return Sa(n,e,e.pendingProps.children,i),e.child;case 10:e:{if(s=e.type._context,o=e.pendingProps,l=e.memoizedProps,c=o.value,gs(g_,s._currentValue),s._currentValue=c,l!==null)if(kc(l.value,c)){if(l.children===o.children&&!qa.current){e=Rh(n,e,i);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var d=l.dependencies;if(d!==null){c=l.child;for(var u=d.firstContext;u!==null;){if(u.context===s){if(l.tag===1){u=_h(-1,i&-i),u.tag=2;var f=l.updateQueue;if(f!==null){f=f.shared;var A=f.pending;A===null?u.next=u:(u.next=A.next,A.next=u),f.pending=u}}l.lanes|=i,u=l.alternate,u!==null&&(u.lanes|=i),US(l.return,i,e),d.lanes|=i;break}u=u.next}}else if(l.tag===10)c=l.type===e.type?null:l.child;else if(l.tag===18){if(c=l.return,c===null)throw Error(Mn(341));c.lanes|=i,d=c.alternate,d!==null&&(d.lanes|=i),US(c,i,e),c=l.sibling}else c=l.child;if(c!==null)c.return=l;else for(c=l;c!==null;){if(c===e){c=null;break}if(l=c.sibling,l!==null){l.return=c.return,c=l;break}c=c.return}l=c}Sa(n,e,o.children,i),e=e.child}return e;case 9:return o=e.type,s=e.pendingProps.children,Og(e,i),o=Zl(o),s=s(o),e.flags|=1,Sa(n,e,s,i),e.child;case 14:return s=e.type,o=Cc(s,e.pendingProps),o=Cc(s.type,o),_L(n,e,s,o,i);case 15:return L4(n,e,e.type,e.pendingProps,i);case 17:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Cc(s,o),jE(n,e),e.tag=1,$a(s)?(n=!0,f_(e)):n=!1,Og(e,i),o4(e,s,o),zS(e,s,o,i),jS(null,e,s,!0,n,i);case 19:return F4(n,e,i);case 22:return B4(n,e,i)}throw Error(Mn(156,e.tag))};function J4(n,e){return wO(n,e)}function RU(n,e,i,s){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ql(n,e,i,s){return new RU(n,e,i,s)}function U3(n){return n=n.prototype,!(!n||!n.isReactComponent)}function LU(n){if(typeof n=="function")return U3(n)?1:0;if(n!=null){if(n=n.$$typeof,n===r3)return 11;if(n===s3)return 14}return 2}function Qd(n,e){var i=n.alternate;return i===null?(i=ql(n.tag,e,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=e,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&14680064,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,e=n.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i}function KE(n,e,i,s,o,l){var c=2;if(s=n,typeof n=="function")U3(n)&&(c=1);else if(typeof n=="string")c=5;else e:switch(n){case gg:return mp(i.children,o,l,e);case i3:c=8,o|=8;break;case hS:return n=ql(12,i,e,o|2),n.elementType=hS,n.lanes=l,n;case dS:return n=ql(13,i,e,o),n.elementType=dS,n.lanes=l,n;case fS:return n=ql(19,i,e,o),n.elementType=fS,n.lanes=l,n;case aO:return ib(i,o,l,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case sO:c=10;break e;case oO:c=9;break e;case r3:c=11;break e;case s3:c=14;break e;case Id:c=16,s=null;break e}throw Error(Mn(130,n==null?n:typeof n,""))}return e=ql(c,i,e,o),e.elementType=n,e.type=s,e.lanes=l,e}function mp(n,e,i,s){return n=ql(7,n,s,e),n.lanes=i,n}function ib(n,e,i,s){return n=ql(22,n,s,e),n.elementType=aO,n.lanes=i,n.stateNode={isHidden:!1},n}function $C(n,e,i){return n=ql(6,n,null,e),n.lanes=i,n}function JC(n,e,i){return e=ql(4,n.children!==null?n.children:[],n.key,e),e.lanes=i,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function BU(n,e,i,s,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BC(0),this.expirationTimes=BC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BC(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function G3(n,e,i,s,o,l,c,d,u){return n=new BU(n,e,i,d,u),e===1?(e=1,l===!0&&(e|=8)):e=0,l=ql(3,null,null,e),n.current=l,l.stateNode=n,l.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},b3(l),n}function DU(n,e,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mg,key:s==null?null:""+s,children:n,containerInfo:e,implementation:i}}function Z4(n){if(!n)return Yd;n=n._reactInternals;e:{if(Tp(n)!==n||n.tag!==1)throw Error(Mn(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($a(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Mn(171))}if(n.tag===1){var i=n.type;if($a(i))return JO(n,i,e)}return e}function eF(n,e,i,s,o,l,c,d,u){return n=G3(i,s,!0,n,o,l,c,d,u),n.context=Z4(null),i=n.current,s=Ra(),o=jd(i),l=_h(s,o),l.callback=e??null,Hd(i,l,o),n.current.lanes=o,xy(n,o,s),Ja(n,s),n}function rb(n,e,i,s){var o=e.current,l=Ra(),c=jd(o);return i=Z4(i),e.context===null?e.context=i:e.pendingContext=i,e=_h(l,c),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Hd(o,e,c),n!==null&&(Fc(n,o,c,l),zE(n,o,c)),c}function M_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function PL(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<e?i:e}}function z3(n,e){PL(n,e),(n=n.alternate)&&PL(n,e)}function PU(){return null}var tF=typeof reportError=="function"?reportError:function(n){console.error(n)};function H3(n){this._internalRoot=n}sb.prototype.render=H3.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Mn(409));rb(n,e,null,null)};sb.prototype.unmount=H3.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Cp(function(){rb(null,n,null,null)}),e[Th]=null}};function sb(n){this._internalRoot=n}sb.prototype.unstable_scheduleHydration=function(n){if(n){var e=LO();n={blockedOn:null,target:n,priority:e};for(var i=0;i<Bd.length&&e!==0&&e<Bd[i].priority;i++);Bd.splice(i,0,n),i===0&&DO(n)}};function V3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ob(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function OL(){}function OU(n,e,i,s,o){if(o){if(typeof s=="function"){var l=s;s=function(){var f=M_(c);l.call(f)}}var c=eF(e,s,n,0,null,!1,!1,"",OL);return n._reactRootContainer=c,n[Th]=c.current,Zv(n.nodeType===8?n.parentNode:n),Cp(),c}for(;o=n.lastChild;)n.removeChild(o);if(typeof s=="function"){var d=s;s=function(){var f=M_(u);d.call(f)}}var u=G3(n,0,!1,null,null,!1,!1,"",OL);return n._reactRootContainer=u,n[Th]=u.current,Zv(n.nodeType===8?n.parentNode:n),Cp(function(){rb(e,u,i,s)}),u}function ab(n,e,i,s,o){var l=i._reactRootContainer;if(l){var c=l;if(typeof o=="function"){var d=o;o=function(){var u=M_(c);d.call(u)}}rb(e,c,n,o)}else c=OU(i,e,n,o,s);return M_(c)}IO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var i=yv(e.pendingLanes);i!==0&&(l3(e,i|1),Ja(e,no()),!(Qr&6)&&(Kg=no()+500,ef()))}break;case 13:Cp(function(){var s=Ih(n,1);if(s!==null){var o=Ra();Fc(s,n,1,o)}}),z3(n,1)}};c3=function(n){if(n.tag===13){var e=Ih(n,134217728);if(e!==null){var i=Ra();Fc(e,n,134217728,i)}z3(n,134217728)}};RO=function(n){if(n.tag===13){var e=jd(n),i=Ih(n,e);if(i!==null){var s=Ra();Fc(i,n,e,s)}z3(n,e)}};LO=function(){return is};BO=function(n,e){var i=is;try{return is=n,e()}finally{is=i}};bS=function(n,e,i){switch(e){case"input":if(gS(n,i),e=i.name,i.type==="radio"&&e!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var s=i[e];if(s!==n&&s.form===n.form){var o=$_(s);if(!o)throw Error(Mn(90));cO(s),gS(s,o)}}}break;case"textarea":hO(n,i);break;case"select":e=i.value,e!=null&&Lg(n,!!i.multiple,e,!1)}};vO=F3;yO=Cp;var FU={usingClientEntryPoint:!1,Events:[_y,xg,$_,gO,AO,F3]},KA={findFiberByHostInstance:cp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kU={bundleType:KA.bundleType,version:KA.version,rendererPackageName:KA.rendererPackageName,rendererConfig:KA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dh.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_O(n),n===null?null:n.stateNode},findFiberByHostInstance:KA.findFiberByHostInstance||PU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xx.isDisabled&&Xx.supportsFiber)try{K_=Xx.inject(kU),Cu=Xx}catch{}}wl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FU;wl.createPortal=function(n,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V3(e))throw Error(Mn(200));return DU(n,e,null,i)};wl.createRoot=function(n,e){if(!V3(n))throw Error(Mn(299));var i=!1,s="",o=tF;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=G3(n,1,!1,null,null,i,!1,s,o),n[Th]=e.current,Zv(n.nodeType===8?n.parentNode:n),new H3(e)};wl.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Mn(188)):(n=Object.keys(n).join(","),Error(Mn(268,n)));return n=_O(e),n=n===null?null:n.stateNode,n};wl.flushSync=function(n){return Cp(n)};wl.hydrate=function(n,e,i){if(!ob(e))throw Error(Mn(200));return ab(null,n,e,!0,i)};wl.hydrateRoot=function(n,e,i){if(!V3(n))throw Error(Mn(405));var s=i!=null&&i.hydratedSources||null,o=!1,l="",c=tF;if(i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onRecoverableError!==void 0&&(c=i.onRecoverableError)),e=eF(e,null,n,1,i??null,o,!1,l,c),n[Th]=e.current,Zv(n),s)for(n=0;n<s.length;n++)i=s[n],o=i._getVersion,o=o(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,o]:e.mutableSourceEagerHydrationData.push(i,o);return new sb(e)};wl.render=function(n,e,i){if(!ob(e))throw Error(Mn(200));return ab(null,n,e,!1,i)};wl.unmountComponentAtNode=function(n){if(!ob(n))throw Error(Mn(40));return n._reactRootContainer?(Cp(function(){ab(null,null,n,!1,function(){n._reactRootContainer=null,n[Th]=null})}),!0):!1};wl.unstable_batchedUpdates=F3;wl.unstable_renderSubtreeIntoContainer=function(n,e,i,s){if(!ob(i))throw Error(Mn(200));if(n==null||n._reactInternals===void 0)throw Error(Mn(38));return ab(n,e,i,!1,s)};wl.version="18.2.0-next-9e3b772b8-20220608";function nF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nF)}catch(n){console.error(n)}}nF(),eO.exports=wl;var NU=eO.exports,FL=NU;cS.createRoot=FL.createRoot,cS.hydrateRoot=FL.hydrateRoot;function UU(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function GU(n,e,i){return e=XU(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function kL(n,e){return VU(n)||UU(n,e)||iF(n,e)||WU()}function zU(n){return HU(n)||jU(n)||iF(n)||QU()}function HU(n){if(Array.isArray(n))return nT(n)}function VU(n){if(Array.isArray(n))return n}function jU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function iF(n,e){if(n){if(typeof n=="string")return nT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nT(n,e)}}function nT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function QU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KU(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XU(n){var e=KU(n,"string");return typeof e=="symbol"?e:String(e)}var YU=function(e,i){var s=new Set(i);return Object.assign.apply(Object,[{}].concat(zU(Object.entries(e).filter(function(o){var l=kL(o,1),c=l[0];return!s.has(c)}).map(function(o){var l=kL(o,2),c=l[0],d=l[1];return GU({},c,d)}))))};/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var qU=function(e){return[...e].reduce((i,[s,o])=>(i[s]=o,i),{})};const NL=vy(qU);function $U(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function iT(n){"@babel/helpers - typeof";return iT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(n)}function rF(n,e){return ZU(n)||$U(n,e)||sF(n,e)||n7()}function UL(n){return JU(n)||e7(n)||sF(n)||t7()}function JU(n){if(Array.isArray(n))return rT(n)}function ZU(n){if(Array.isArray(n))return n}function e7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function sF(n,e){if(n){if(typeof n=="string")return rT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rT(n,e)}}function rT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function t7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lb(n,e){var i=iT(e)==="object"?e:{wrapperElementType:e,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},s=i.wrapperElementType,o=s===void 0?"div":s,l=i.nodeMapper,c=l===void 0?function(g){return g}:l,d=i.methodNames,u=d===void 0?[]:d,f=i.initPropNames,A=f===void 0?[]:f;return Pr.forwardRef(function(g,y){var v=Pr.useRef(),_=Pr.useState({}),x=rF(_,2),b=x[0],m=x[1];Pr.useEffect(function(){return m(g)});var S=Pr.useMemo(function(){var T=NL(A.filter(function(N){return g.hasOwnProperty(N)}).map(function(N){return[N,g[N]]}));return n(T)},[]);GL(function(){S(c(v.current))},Pr.useLayoutEffect),GL(function(){return S._destructor instanceof Function?S._destructor:void 0});var C=Pr.useCallback(function(T){for(var N=arguments.length,P=new Array(N>1?N-1:0),k=1;k<N;k++)P[k-1]=arguments[k];return S[T]instanceof Function?S[T].apply(S,P):void 0},[S]),M=YU(g,[].concat(UL(u),UL(A)));return Object.keys(M).filter(function(T){return b[T]!==g[T]}).forEach(function(T){return C(T,g[T])}),Pr.useImperativeHandle(y,function(){return NL(u.map(function(T){return[T,function(){for(var N=arguments.length,P=new Array(N),k=0;k<N;k++)P[k]=arguments[k];return C.apply(void 0,[T].concat(P))}]}))}),JP.createElement(o,{ref:v})})}function GL(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pr.useEffect,i=Pr.useRef(),s=Pr.useRef(!1),o=Pr.useRef(!1),l=Pr.useState(0),c=rF(l,2);c[0];var d=c[1];s.current&&(o.current=!0),e(function(){return s.current||(i.current=n(),s.current=!0),d(function(u){return u+1}),function(){o.current&&i.current&&i.current()}},[])}var i7={exports:{}};(function(n,e){(function(s,o){n.exports=o()})(self,()=>(()=>{var i={"./node_modules/@ungap/custom-elements/index.js":()=>{/*! (c) Andrea Giammarchi @webreflection ISC */(function(){var c=function(Tn,Qt){var mn=function(li){for(var bi=0,Li=li.length;bi<Li;bi++)ri(li[bi])},ri=function(li){var bi=li.target,Li=li.attributeName,Ar=li.oldValue;bi.attributeChangedCallback(Li,Ar,bi.getAttribute(Li))};return function(Cn,li){var bi=Cn.constructor.observedAttributes;return bi&&Tn(li).then(function(){new Qt(mn).observe(Cn,{attributes:!0,attributeOldValue:!0,attributeFilter:bi});for(var Li=0,Ar=bi.length;Li<Ar;Li++)Cn.hasAttribute(bi[Li])&&ri({target:Cn,attributeName:bi[Li],oldValue:null})}),Cn}};function d(Tn,Qt){if(Tn){if(typeof Tn=="string")return u(Tn,Qt);var mn=Object.prototype.toString.call(Tn).slice(8,-1);if(mn==="Object"&&Tn.constructor&&(mn=Tn.constructor.name),mn==="Map"||mn==="Set")return Array.from(Tn);if(mn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mn))return u(Tn,Qt)}}function u(Tn,Qt){(Qt==null||Qt>Tn.length)&&(Qt=Tn.length);for(var mn=0,ri=new Array(Qt);mn<Qt;mn++)ri[mn]=Tn[mn];return ri}function f(Tn,Qt){var mn=typeof Symbol<"u"&&Tn[Symbol.iterator]||Tn["@@iterator"];if(!mn){if(Array.isArray(Tn)||(mn=d(Tn))||Qt&&Tn&&typeof Tn.length=="number"){mn&&(Tn=mn);var ri=0,Cn=function(){};return{s:Cn,n:function(){return ri>=Tn.length?{done:!0}:{done:!1,value:Tn[ri++]}},e:function(Ar){throw Ar},f:Cn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var li=!0,bi=!1,Li;return{s:function(){mn=mn.call(Tn)},n:function(){var Ar=mn.next();return li=Ar.done,Ar},e:function(Ar){bi=!0,Li=Ar},f:function(){try{!li&&mn.return!=null&&mn.return()}finally{if(bi)throw Li}}}}/*! (c) Andrea Giammarchi - ISC */var A=!0,g=!1,y="querySelectorAll",v=function(Qt){var mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,ri=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MutationObserver,Cn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["*"],li=function Ar(ar,Ye,xt,Mt,Et,Bt){var Re=f(ar),We;try{for(Re.s();!(We=Re.n()).done;){var it=We.value;(Bt||y in it)&&(Et?xt.has(it)||(xt.add(it),Mt.delete(it),Qt(it,Et)):Mt.has(it)||(Mt.add(it),xt.delete(it),Qt(it,Et)),Bt||Ar(it[y](Ye),Ye,xt,Mt,Et,A))}}catch(gt){Re.e(gt)}finally{Re.f()}},bi=new ri(function(Ar){if(Cn.length){var ar=Cn.join(","),Ye=new Set,xt=new Set,Mt=f(Ar),Et;try{for(Mt.s();!(Et=Mt.n()).done;){var Bt=Et.value,Re=Bt.addedNodes,We=Bt.removedNodes;li(We,ar,Ye,xt,g,g),li(Re,ar,Ye,xt,A,g)}}catch(it){Mt.e(it)}finally{Mt.f()}}}),Li=bi.observe;return(bi.observe=function(Ar){return Li.call(bi,Ar,{subtree:A,childList:A})})(mn),bi},_="querySelectorAll",x=self,b=x.document,m=x.Element,S=x.MutationObserver,C=x.Set,M=x.WeakMap,T=function(Qt){return _ in Qt},N=[].filter,P=function(Tn){var Qt=new M,mn=function(Mt){for(var Et=0,Bt=Mt.length;Et<Bt;Et++)Qt.delete(Mt[Et])},ri=function(){for(var Mt=ar.takeRecords(),Et=0,Bt=Mt.length;Et<Bt;Et++)bi(N.call(Mt[Et].removedNodes,T),!1),bi(N.call(Mt[Et].addedNodes,T),!0)},Cn=function(Mt){return Mt.matches||Mt.webkitMatchesSelector||Mt.msMatchesSelector},li=function(Mt,Et){var Bt;if(Et)for(var Re,We=Cn(Mt),it=0,gt=Li.length;it<gt;it++)We.call(Mt,Re=Li[it])&&(Qt.has(Mt)||Qt.set(Mt,new C),Bt=Qt.get(Mt),Bt.has(Re)||(Bt.add(Re),Tn.handle(Mt,Et,Re)));else Qt.has(Mt)&&(Bt=Qt.get(Mt),Qt.delete(Mt),Bt.forEach(function(At){Tn.handle(Mt,Et,At)}))},bi=function(Mt){for(var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Bt=0,Re=Mt.length;Bt<Re;Bt++)li(Mt[Bt],Et)},Li=Tn.query,Ar=Tn.root||b,ar=v(li,Ar,S,Li),Ye=m.prototype.attachShadow;return Ye&&(m.prototype.attachShadow=function(xt){var Mt=Ye.call(this,xt);return ar.observe(Mt),Mt}),Li.length&&bi(Ar[_](Li)),{drop:mn,flush:ri,observer:ar,parse:bi}},k=self,D=k.document,z=k.Map,Y=k.MutationObserver,ne=k.Object,O=k.Set,F=k.WeakMap,U=k.Element,G=k.HTMLElement,V=k.Node,K=k.Error,W=k.TypeError,J=k.Reflect,ee=ne.defineProperty,he=ne.keys,me=ne.getOwnPropertyNames,Be=ne.setPrototypeOf,Se=!self.customElements,rt=function(Qt){for(var mn=he(Qt),ri=[],Cn=mn.length,li=0;li<Cn;li++)ri[li]=Qt[mn[li]],delete Qt[mn[li]];return function(){for(var bi=0;bi<Cn;bi++)Qt[mn[bi]]=ri[bi]}};if(Se){var Ge=function(){var Qt=this.constructor;if(!mt.has(Qt))throw new W("Illegal constructor");var mn=mt.get(Qt);if(vn)return zn(vn,mn);var ri=st.call(D,mn);return zn(Be(ri,Qt.prototype),mn)},st=D.createElement,mt=new z,Ft=new z,Pt=new z,nt=new z,Fn=[],Xt=function(Qt,mn,ri){var Cn=Pt.get(ri);if(mn&&!Cn.isPrototypeOf(Qt)){var li=rt(Qt);vn=Be(Qt,Cn);try{new Cn.constructor}finally{vn=null,li()}}var bi="".concat(mn?"":"dis","connectedCallback");bi in Cn&&Qt[bi]()},on=P({query:Fn,handle:Xt}),nn=on.parse,vn=null,Rn=function(Qt){if(!Ft.has(Qt)){var mn,ri=new Promise(function(Cn){mn=Cn});Ft.set(Qt,{$:ri,_:mn})}return Ft.get(Qt).$},zn=c(Rn,Y);ee(self,"customElements",{configurable:!0,value:{define:function(Qt,mn){if(nt.has(Qt))throw new K('the name "'.concat(Qt,'" has already been used with this registry'));mt.set(mn,Qt),Pt.set(Qt,mn.prototype),nt.set(Qt,mn),Fn.push(Qt),Rn(Qt).then(function(){nn(D.querySelectorAll(Qt))}),Ft.get(Qt)._(mn)},get:function(Qt){return nt.get(Qt)},whenDefined:Rn}}),ee(Ge.prototype=G.prototype,"constructor",{value:Ge}),ee(self,"HTMLElement",{configurable:!0,value:Ge}),ee(D,"createElement",{configurable:!0,value:function(Qt,mn){var ri=mn&&mn.is,Cn=ri?nt.get(ri):nt.get(Qt);return Cn?new Cn:st.call(D,Qt)}}),"isConnected"in V.prototype||ee(V.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(Se=!self.customElements.get("extends-li"),Se)try{var Wn=function Tn(){return self.Reflect.construct(HTMLLIElement,[],Tn)};Wn.prototype=HTMLLIElement.prototype;var Ai="extends-li";self.customElements.define("extends-li",Wn,{extends:"li"}),Se=D.createElement("li",{is:Ai}).outerHTML.indexOf(Ai)<0;var Ti=self.customElements,Je=Ti.get,we=Ti.whenDefined;ee(self.customElements,"whenDefined",{configurable:!0,value:function(Qt){var mn=this;return we.call(this,Qt).then(function(ri){return ri||Je.call(mn,Qt)})}})}catch{}if(Se){var ge=function(Qt){var mn=Xe.get(Qt);Jt(mn.querySelectorAll(this),Qt.isConnected)},_e=self.customElements,Pe=D.createElement,Te=_e.define,He=_e.get,Fe=_e.upgrade,Ue=J||{construct:function(Qt){return Qt.call(this)}},Ae=Ue.construct,Xe=new F,dt=new O,ue=new z,q=new z,re=new z,ke=new z,be=[],qe=[],Qe=function(Qt){return ke.get(Qt)||He.call(_e,Qt)},It=function(Qt,mn,ri){var Cn=re.get(ri);if(mn&&!Cn.isPrototypeOf(Qt)){var li=rt(Qt);_i=Be(Qt,Cn);try{new Cn.constructor}finally{_i=null,li()}}var bi="".concat(mn?"":"dis","connectedCallback");bi in Cn&&Qt[bi]()},Ot=P({query:qe,handle:It}),Jt=Ot.parse,dn=P({query:be,handle:function(Qt,mn){Xe.has(Qt)&&(mn?dt.add(Qt):dt.delete(Qt),qe.length&&ge.call(qe,Qt))}}),Sn=dn.parse,er=U.prototype.attachShadow;er&&(U.prototype.attachShadow=function(Tn){var Qt=er.call(this,Tn);return Xe.set(this,Qt),Qt});var Pi=function(Qt){if(!q.has(Qt)){var mn,ri=new Promise(function(Cn){mn=Cn});q.set(Qt,{$:ri,_:mn})}return q.get(Qt).$},Ir=c(Pi,Y),_i=null;me(self).filter(function(Tn){return/^HTML.*Element$/.test(Tn)}).forEach(function(Tn){var Qt=self[Tn];function mn(){var ri=this.constructor;if(!ue.has(ri))throw new W("Illegal constructor");var Cn=ue.get(ri),li=Cn.is,bi=Cn.tag;if(li){if(_i)return Ir(_i,li);var Li=Pe.call(D,bi);return Li.setAttribute("is",li),Ir(Be(Li,ri.prototype),li)}else return Ae.call(this,Qt,[],ri)}ee(mn.prototype=Qt.prototype,"constructor",{value:mn}),ee(self,Tn,{value:mn})}),ee(D,"createElement",{configurable:!0,value:function(Qt,mn){var ri=mn&&mn.is;if(ri){var Cn=ke.get(ri);if(Cn&&ue.get(Cn).tag===Qt)return new Cn}var li=Pe.call(D,Qt);return ri&&li.setAttribute("is",ri),li}}),ee(_e,"get",{configurable:!0,value:Qe}),ee(_e,"whenDefined",{configurable:!0,value:Pi}),ee(_e,"upgrade",{configurable:!0,value:function(Qt){var mn=Qt.getAttribute("is");if(mn){var ri=ke.get(mn);if(ri){Ir(Be(Qt,ri.prototype),mn);return}}Fe.call(_e,Qt)}}),ee(_e,"define",{configurable:!0,value:function(Qt,mn,ri){if(Qe(Qt))throw new K("'".concat(Qt,"' has already been defined as a custom element"));var Cn,li=ri&&ri.extends;ue.set(mn,li?{is:Qt,tag:li}:{is:"",tag:Qt}),li?(Cn="".concat(li,'[is="').concat(Qt,'"]'),re.set(Cn,mn.prototype),ke.set(Qt,mn),qe.push(Cn)):(Te.apply(_e,arguments),be.push(Cn=Qt)),Pi(Qt).then(function(){li?(Jt(D.querySelectorAll(Cn)),dt.forEach(ge,[Cn])):Sn(D.querySelectorAll(Cn))}),q.get(Qt)._(mn)}})}})()},"./node_modules/an-array/index.js":c=>{var d=Object.prototype.toString;c.exports=u;function u(f){return f.BYTES_PER_ELEMENT&&d.call(f.buffer)==="[object ArrayBuffer]"||Array.isArray(f)}},"./node_modules/as-number/index.js":c=>{c.exports=function(u,f){return typeof u=="number"?u:typeof f=="number"?f:0}},"./node_modules/base64-js/index.js":(c,d)=>{d.byteLength=x,d.toByteArray=m,d.fromByteArray=M;for(var u=[],f=[],A=typeof Uint8Array<"u"?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,v=g.length;y<v;++y)u[y]=g[y],f[g.charCodeAt(y)]=y;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function _(T){var N=T.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=T.indexOf("=");P===-1&&(P=N);var k=P===N?0:4-P%4;return[P,k]}function x(T){var N=_(T),P=N[0],k=N[1];return(P+k)*3/4-k}function b(T,N,P){return(N+P)*3/4-P}function m(T){var N,P=_(T),k=P[0],D=P[1],z=new A(b(T,k,D)),Y=0,ne=D>0?k-4:k,O;for(O=0;O<ne;O+=4)N=f[T.charCodeAt(O)]<<18|f[T.charCodeAt(O+1)]<<12|f[T.charCodeAt(O+2)]<<6|f[T.charCodeAt(O+3)],z[Y++]=N>>16&255,z[Y++]=N>>8&255,z[Y++]=N&255;return D===2&&(N=f[T.charCodeAt(O)]<<2|f[T.charCodeAt(O+1)]>>4,z[Y++]=N&255),D===1&&(N=f[T.charCodeAt(O)]<<10|f[T.charCodeAt(O+1)]<<4|f[T.charCodeAt(O+2)]>>2,z[Y++]=N>>8&255,z[Y++]=N&255),z}function S(T){return u[T>>18&63]+u[T>>12&63]+u[T>>6&63]+u[T&63]}function C(T,N,P){for(var k,D=[],z=N;z<P;z+=3)k=(T[z]<<16&16711680)+(T[z+1]<<8&65280)+(T[z+2]&255),D.push(S(k));return D.join("")}function M(T){for(var N,P=T.length,k=P%3,D=[],z=16383,Y=0,ne=P-k;Y<ne;Y+=z)D.push(C(T,Y,Y+z>ne?ne:Y+z));return k===1?(N=T[P-1],D.push(u[N>>2]+u[N<<4&63]+"==")):k===2&&(N=(T[P-2]<<8)+T[P-1],D.push(u[N>>10]+u[N>>4&63]+u[N<<2&63]+"=")),D.join("")}},"./node_modules/buffer-equal/index.js":(c,d,u)=>{var f=u("./node_modules/buffer/index.js").Buffer;c.exports=function(A,g){if(f.isBuffer(A)&&f.isBuffer(g)){if(typeof A.equals=="function")return A.equals(g);if(A.length!==g.length)return!1;for(var y=0;y<A.length;y++)if(A[y]!==g[y])return!1;return!0}}},"./node_modules/buffer/index.js":(c,d,u)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const f=u("./node_modules/base64-js/index.js"),A=u("./node_modules/ieee754/index.js"),g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=x,d.SlowBuffer=z,d.INSPECT_MAX_BYTES=50;const y=2147483647;d.kMaxLength=y,x.TYPED_ARRAY_SUPPORT=v(),!x.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const ue=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(ue,q),ue.foo()===42}catch{return!1}}Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}});function _(ue){if(ue>y)throw new RangeError('The value "'+ue+'" is invalid for option "size"');const q=new Uint8Array(ue);return Object.setPrototypeOf(q,x.prototype),q}function x(ue,q,re){if(typeof ue=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(ue)}return b(ue,q,re)}x.poolSize=8192;function b(ue,q,re){if(typeof ue=="string")return M(ue,q);if(ArrayBuffer.isView(ue))return N(ue);if(ue==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(Fe(ue,ArrayBuffer)||ue&&Fe(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Fe(ue,SharedArrayBuffer)||ue&&Fe(ue.buffer,SharedArrayBuffer)))return P(ue,q,re);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ke=ue.valueOf&&ue.valueOf();if(ke!=null&&ke!==ue)return x.from(ke,q,re);const be=k(ue);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return x.from(ue[Symbol.toPrimitive]("string"),q,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}x.from=function(ue,q,re){return b(ue,q,re)},Object.setPrototypeOf(x.prototype,Uint8Array.prototype),Object.setPrototypeOf(x,Uint8Array);function m(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function S(ue,q,re){return m(ue),ue<=0?_(ue):q!==void 0?typeof re=="string"?_(ue).fill(q,re):_(ue).fill(q):_(ue)}x.alloc=function(ue,q,re){return S(ue,q,re)};function C(ue){return m(ue),_(ue<0?0:D(ue)|0)}x.allocUnsafe=function(ue){return C(ue)},x.allocUnsafeSlow=function(ue){return C(ue)};function M(ue,q){if((typeof q!="string"||q==="")&&(q="utf8"),!x.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const re=Y(ue,q)|0;let ke=_(re);const be=ke.write(ue,q);return be!==re&&(ke=ke.slice(0,be)),ke}function T(ue){const q=ue.length<0?0:D(ue.length)|0,re=_(q);for(let ke=0;ke<q;ke+=1)re[ke]=ue[ke]&255;return re}function N(ue){if(Fe(ue,Uint8Array)){const q=new Uint8Array(ue);return P(q.buffer,q.byteOffset,q.byteLength)}return T(ue)}function P(ue,q,re){if(q<0||ue.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<q+(re||0))throw new RangeError('"length" is outside of buffer bounds');let ke;return q===void 0&&re===void 0?ke=new Uint8Array(ue):re===void 0?ke=new Uint8Array(ue,q):ke=new Uint8Array(ue,q,re),Object.setPrototypeOf(ke,x.prototype),ke}function k(ue){if(x.isBuffer(ue)){const q=D(ue.length)|0,re=_(q);return re.length===0||ue.copy(re,0,0,q),re}if(ue.length!==void 0)return typeof ue.length!="number"||Ue(ue.length)?_(0):T(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return T(ue.data)}function D(ue){if(ue>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return ue|0}function z(ue){return+ue!=ue&&(ue=0),x.alloc(+ue)}x.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==x.prototype},x.compare=function(q,re){if(Fe(q,Uint8Array)&&(q=x.from(q,q.offset,q.byteLength)),Fe(re,Uint8Array)&&(re=x.from(re,re.offset,re.byteLength)),!x.isBuffer(q)||!x.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===re)return 0;let ke=q.length,be=re.length;for(let qe=0,Qe=Math.min(ke,be);qe<Qe;++qe)if(q[qe]!==re[qe]){ke=q[qe],be=re[qe];break}return ke<be?-1:be<ke?1:0},x.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(q,re){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return x.alloc(0);let ke;if(re===void 0)for(re=0,ke=0;ke<q.length;++ke)re+=q[ke].length;const be=x.allocUnsafe(re);let qe=0;for(ke=0;ke<q.length;++ke){let Qe=q[ke];if(Fe(Qe,Uint8Array))qe+Qe.length>be.length?(x.isBuffer(Qe)||(Qe=x.from(Qe)),Qe.copy(be,qe)):Uint8Array.prototype.set.call(be,Qe,qe);else if(x.isBuffer(Qe))Qe.copy(be,qe);else throw new TypeError('"list" argument must be an Array of Buffers');qe+=Qe.length}return be};function Y(ue,q){if(x.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||Fe(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);const re=ue.length,ke=arguments.length>2&&arguments[2]===!0;if(!ke&&re===0)return 0;let be=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return ge(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re*2;case"hex":return re>>>1;case"base64":return Te(ue).length;default:if(be)return ke?-1:ge(ue).length;q=(""+q).toLowerCase(),be=!0}}x.byteLength=Y;function ne(ue,q,re){let ke=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((re===void 0||re>this.length)&&(re=this.length),re<=0)||(re>>>=0,q>>>=0,re<=q))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return Ge(this,q,re);case"utf8":case"utf-8":return he(this,q,re);case"ascii":return Se(this,q,re);case"latin1":case"binary":return rt(this,q,re);case"base64":return ee(this,q,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,q,re);default:if(ke)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),ke=!0}}x.prototype._isBuffer=!0;function O(ue,q,re){const ke=ue[q];ue[q]=ue[re],ue[re]=ke}x.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let re=0;re<q;re+=2)O(this,re,re+1);return this},x.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let re=0;re<q;re+=4)O(this,re,re+3),O(this,re+1,re+2);return this},x.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let re=0;re<q;re+=8)O(this,re,re+7),O(this,re+1,re+6),O(this,re+2,re+5),O(this,re+3,re+4);return this},x.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?he(this,0,q):ne.apply(this,arguments)},x.prototype.toLocaleString=x.prototype.toString,x.prototype.equals=function(q){if(!x.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:x.compare(this,q)===0},x.prototype.inspect=function(){let q="";const re=d.INSPECT_MAX_BYTES;return q=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(q+=" ... "),"<Buffer "+q+">"},g&&(x.prototype[g]=x.prototype.inspect),x.prototype.compare=function(q,re,ke,be,qe){if(Fe(q,Uint8Array)&&(q=x.from(q,q.offset,q.byteLength)),!x.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(re===void 0&&(re=0),ke===void 0&&(ke=q?q.length:0),be===void 0&&(be=0),qe===void 0&&(qe=this.length),re<0||ke>q.length||be<0||qe>this.length)throw new RangeError("out of range index");if(be>=qe&&re>=ke)return 0;if(be>=qe)return-1;if(re>=ke)return 1;if(re>>>=0,ke>>>=0,be>>>=0,qe>>>=0,this===q)return 0;let Qe=qe-be,It=ke-re;const Ot=Math.min(Qe,It),Jt=this.slice(be,qe),dn=q.slice(re,ke);for(let Sn=0;Sn<Ot;++Sn)if(Jt[Sn]!==dn[Sn]){Qe=Jt[Sn],It=dn[Sn];break}return Qe<It?-1:It<Qe?1:0};function F(ue,q,re,ke,be){if(ue.length===0)return-1;if(typeof re=="string"?(ke=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),re=+re,Ue(re)&&(re=be?0:ue.length-1),re<0&&(re=ue.length+re),re>=ue.length){if(be)return-1;re=ue.length-1}else if(re<0)if(be)re=0;else return-1;if(typeof q=="string"&&(q=x.from(q,ke)),x.isBuffer(q))return q.length===0?-1:U(ue,q,re,ke,be);if(typeof q=="number")return q=q&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(ue,q,re):Uint8Array.prototype.lastIndexOf.call(ue,q,re):U(ue,[q],re,ke,be);throw new TypeError("val must be string, number or Buffer")}function U(ue,q,re,ke,be){let qe=1,Qe=ue.length,It=q.length;if(ke!==void 0&&(ke=String(ke).toLowerCase(),ke==="ucs2"||ke==="ucs-2"||ke==="utf16le"||ke==="utf-16le")){if(ue.length<2||q.length<2)return-1;qe=2,Qe/=2,It/=2,re/=2}function Ot(dn,Sn){return qe===1?dn[Sn]:dn.readUInt16BE(Sn*qe)}let Jt;if(be){let dn=-1;for(Jt=re;Jt<Qe;Jt++)if(Ot(ue,Jt)===Ot(q,dn===-1?0:Jt-dn)){if(dn===-1&&(dn=Jt),Jt-dn+1===It)return dn*qe}else dn!==-1&&(Jt-=Jt-dn),dn=-1}else for(re+It>Qe&&(re=Qe-It),Jt=re;Jt>=0;Jt--){let dn=!0;for(let Sn=0;Sn<It;Sn++)if(Ot(ue,Jt+Sn)!==Ot(q,Sn)){dn=!1;break}if(dn)return Jt}return-1}x.prototype.includes=function(q,re,ke){return this.indexOf(q,re,ke)!==-1},x.prototype.indexOf=function(q,re,ke){return F(this,q,re,ke,!0)},x.prototype.lastIndexOf=function(q,re,ke){return F(this,q,re,ke,!1)};function G(ue,q,re,ke){re=Number(re)||0;const be=ue.length-re;ke?(ke=Number(ke),ke>be&&(ke=be)):ke=be;const qe=q.length;ke>qe/2&&(ke=qe/2);let Qe;for(Qe=0;Qe<ke;++Qe){const It=parseInt(q.substr(Qe*2,2),16);if(Ue(It))return Qe;ue[re+Qe]=It}return Qe}function V(ue,q,re,ke){return He(ge(q,ue.length-re),ue,re,ke)}function K(ue,q,re,ke){return He(_e(q),ue,re,ke)}function W(ue,q,re,ke){return He(Te(q),ue,re,ke)}function J(ue,q,re,ke){return He(Pe(q,ue.length-re),ue,re,ke)}x.prototype.write=function(q,re,ke,be){if(re===void 0)be="utf8",ke=this.length,re=0;else if(ke===void 0&&typeof re=="string")be=re,ke=this.length,re=0;else if(isFinite(re))re=re>>>0,isFinite(ke)?(ke=ke>>>0,be===void 0&&(be="utf8")):(be=ke,ke=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const qe=this.length-re;if((ke===void 0||ke>qe)&&(ke=qe),q.length>0&&(ke<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");let Qe=!1;for(;;)switch(be){case"hex":return G(this,q,re,ke);case"utf8":case"utf-8":return V(this,q,re,ke);case"ascii":case"latin1":case"binary":return K(this,q,re,ke);case"base64":return W(this,q,re,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,q,re,ke);default:if(Qe)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),Qe=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(ue,q,re){return q===0&&re===ue.length?f.fromByteArray(ue):f.fromByteArray(ue.slice(q,re))}function he(ue,q,re){re=Math.min(ue.length,re);const ke=[];let be=q;for(;be<re;){const qe=ue[be];let Qe=null,It=qe>239?4:qe>223?3:qe>191?2:1;if(be+It<=re){let Ot,Jt,dn,Sn;switch(It){case 1:qe<128&&(Qe=qe);break;case 2:Ot=ue[be+1],(Ot&192)===128&&(Sn=(qe&31)<<6|Ot&63,Sn>127&&(Qe=Sn));break;case 3:Ot=ue[be+1],Jt=ue[be+2],(Ot&192)===128&&(Jt&192)===128&&(Sn=(qe&15)<<12|(Ot&63)<<6|Jt&63,Sn>2047&&(Sn<55296||Sn>57343)&&(Qe=Sn));break;case 4:Ot=ue[be+1],Jt=ue[be+2],dn=ue[be+3],(Ot&192)===128&&(Jt&192)===128&&(dn&192)===128&&(Sn=(qe&15)<<18|(Ot&63)<<12|(Jt&63)<<6|dn&63,Sn>65535&&Sn<1114112&&(Qe=Sn))}}Qe===null?(Qe=65533,It=1):Qe>65535&&(Qe-=65536,ke.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),ke.push(Qe),be+=It}return Be(ke)}const me=4096;function Be(ue){const q=ue.length;if(q<=me)return String.fromCharCode.apply(String,ue);let re="",ke=0;for(;ke<q;)re+=String.fromCharCode.apply(String,ue.slice(ke,ke+=me));return re}function Se(ue,q,re){let ke="";re=Math.min(ue.length,re);for(let be=q;be<re;++be)ke+=String.fromCharCode(ue[be]&127);return ke}function rt(ue,q,re){let ke="";re=Math.min(ue.length,re);for(let be=q;be<re;++be)ke+=String.fromCharCode(ue[be]);return ke}function Ge(ue,q,re){const ke=ue.length;(!q||q<0)&&(q=0),(!re||re<0||re>ke)&&(re=ke);let be="";for(let qe=q;qe<re;++qe)be+=Ae[ue[qe]];return be}function st(ue,q,re){const ke=ue.slice(q,re);let be="";for(let qe=0;qe<ke.length-1;qe+=2)be+=String.fromCharCode(ke[qe]+ke[qe+1]*256);return be}x.prototype.slice=function(q,re){const ke=this.length;q=~~q,re=re===void 0?ke:~~re,q<0?(q+=ke,q<0&&(q=0)):q>ke&&(q=ke),re<0?(re+=ke,re<0&&(re=0)):re>ke&&(re=ke),re<q&&(re=q);const be=this.subarray(q,re);return Object.setPrototypeOf(be,x.prototype),be};function mt(ue,q,re){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+q>re)throw new RangeError("Trying to access beyond buffer length")}x.prototype.readUintLE=x.prototype.readUIntLE=function(q,re,ke){q=q>>>0,re=re>>>0,ke||mt(q,re,this.length);let be=this[q],qe=1,Qe=0;for(;++Qe<re&&(qe*=256);)be+=this[q+Qe]*qe;return be},x.prototype.readUintBE=x.prototype.readUIntBE=function(q,re,ke){q=q>>>0,re=re>>>0,ke||mt(q,re,this.length);let be=this[q+--re],qe=1;for(;re>0&&(qe*=256);)be+=this[q+--re]*qe;return be},x.prototype.readUint8=x.prototype.readUInt8=function(q,re){return q=q>>>0,re||mt(q,1,this.length),this[q]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(q,re){return q=q>>>0,re||mt(q,2,this.length),this[q]|this[q+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(q,re){return q=q>>>0,re||mt(q,2,this.length),this[q]<<8|this[q+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(q,re){return q=q>>>0,re||mt(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(q,re){return q=q>>>0,re||mt(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},x.prototype.readBigUInt64LE=Xe(function(q){q=q>>>0,Ai(q,"offset");const re=this[q],ke=this[q+7];(re===void 0||ke===void 0)&&Ti(q,this.length-8);const be=re+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,qe=this[++q]+this[++q]*2**8+this[++q]*2**16+ke*2**24;return BigInt(be)+(BigInt(qe)<<BigInt(32))}),x.prototype.readBigUInt64BE=Xe(function(q){q=q>>>0,Ai(q,"offset");const re=this[q],ke=this[q+7];(re===void 0||ke===void 0)&&Ti(q,this.length-8);const be=re*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],qe=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ke;return(BigInt(be)<<BigInt(32))+BigInt(qe)}),x.prototype.readIntLE=function(q,re,ke){q=q>>>0,re=re>>>0,ke||mt(q,re,this.length);let be=this[q],qe=1,Qe=0;for(;++Qe<re&&(qe*=256);)be+=this[q+Qe]*qe;return qe*=128,be>=qe&&(be-=Math.pow(2,8*re)),be},x.prototype.readIntBE=function(q,re,ke){q=q>>>0,re=re>>>0,ke||mt(q,re,this.length);let be=re,qe=1,Qe=this[q+--be];for(;be>0&&(qe*=256);)Qe+=this[q+--be]*qe;return qe*=128,Qe>=qe&&(Qe-=Math.pow(2,8*re)),Qe},x.prototype.readInt8=function(q,re){return q=q>>>0,re||mt(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},x.prototype.readInt16LE=function(q,re){q=q>>>0,re||mt(q,2,this.length);const ke=this[q]|this[q+1]<<8;return ke&32768?ke|4294901760:ke},x.prototype.readInt16BE=function(q,re){q=q>>>0,re||mt(q,2,this.length);const ke=this[q+1]|this[q]<<8;return ke&32768?ke|4294901760:ke},x.prototype.readInt32LE=function(q,re){return q=q>>>0,re||mt(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},x.prototype.readInt32BE=function(q,re){return q=q>>>0,re||mt(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},x.prototype.readBigInt64LE=Xe(function(q){q=q>>>0,Ai(q,"offset");const re=this[q],ke=this[q+7];(re===void 0||ke===void 0)&&Ti(q,this.length-8);const be=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(ke<<24);return(BigInt(be)<<BigInt(32))+BigInt(re+this[++q]*256+this[++q]*65536+this[++q]*16777216)}),x.prototype.readBigInt64BE=Xe(function(q){q=q>>>0,Ai(q,"offset");const re=this[q],ke=this[q+7];(re===void 0||ke===void 0)&&Ti(q,this.length-8);const be=(re<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(be)<<BigInt(32))+BigInt(this[++q]*16777216+this[++q]*65536+this[++q]*256+ke)}),x.prototype.readFloatLE=function(q,re){return q=q>>>0,re||mt(q,4,this.length),A.read(this,q,!0,23,4)},x.prototype.readFloatBE=function(q,re){return q=q>>>0,re||mt(q,4,this.length),A.read(this,q,!1,23,4)},x.prototype.readDoubleLE=function(q,re){return q=q>>>0,re||mt(q,8,this.length),A.read(this,q,!0,52,8)},x.prototype.readDoubleBE=function(q,re){return q=q>>>0,re||mt(q,8,this.length),A.read(this,q,!1,52,8)};function Ft(ue,q,re,ke,be,qe){if(!x.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>be||q<qe)throw new RangeError('"value" argument is out of bounds');if(re+ke>ue.length)throw new RangeError("Index out of range")}x.prototype.writeUintLE=x.prototype.writeUIntLE=function(q,re,ke,be){if(q=+q,re=re>>>0,ke=ke>>>0,!be){const It=Math.pow(2,8*ke)-1;Ft(this,q,re,ke,It,0)}let qe=1,Qe=0;for(this[re]=q&255;++Qe<ke&&(qe*=256);)this[re+Qe]=q/qe&255;return re+ke},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(q,re,ke,be){if(q=+q,re=re>>>0,ke=ke>>>0,!be){const It=Math.pow(2,8*ke)-1;Ft(this,q,re,ke,It,0)}let qe=ke-1,Qe=1;for(this[re+qe]=q&255;--qe>=0&&(Qe*=256);)this[re+qe]=q/Qe&255;return re+ke},x.prototype.writeUint8=x.prototype.writeUInt8=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,1,255,0),this[re]=q&255,re+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,2,65535,0),this[re]=q&255,this[re+1]=q>>>8,re+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,2,65535,0),this[re]=q>>>8,this[re+1]=q&255,re+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,4,4294967295,0),this[re+3]=q>>>24,this[re+2]=q>>>16,this[re+1]=q>>>8,this[re]=q&255,re+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,4,4294967295,0),this[re]=q>>>24,this[re+1]=q>>>16,this[re+2]=q>>>8,this[re+3]=q&255,re+4};function Pt(ue,q,re,ke,be){Wn(q,ke,be,ue,re,7);let qe=Number(q&BigInt(4294967295));ue[re++]=qe,qe=qe>>8,ue[re++]=qe,qe=qe>>8,ue[re++]=qe,qe=qe>>8,ue[re++]=qe;let Qe=Number(q>>BigInt(32)&BigInt(4294967295));return ue[re++]=Qe,Qe=Qe>>8,ue[re++]=Qe,Qe=Qe>>8,ue[re++]=Qe,Qe=Qe>>8,ue[re++]=Qe,re}function nt(ue,q,re,ke,be){Wn(q,ke,be,ue,re,7);let qe=Number(q&BigInt(4294967295));ue[re+7]=qe,qe=qe>>8,ue[re+6]=qe,qe=qe>>8,ue[re+5]=qe,qe=qe>>8,ue[re+4]=qe;let Qe=Number(q>>BigInt(32)&BigInt(4294967295));return ue[re+3]=Qe,Qe=Qe>>8,ue[re+2]=Qe,Qe=Qe>>8,ue[re+1]=Qe,Qe=Qe>>8,ue[re]=Qe,re+8}x.prototype.writeBigUInt64LE=Xe(function(q,re=0){return Pt(this,q,re,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=Xe(function(q,re=0){return nt(this,q,re,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(q,re,ke,be){if(q=+q,re=re>>>0,!be){const Ot=Math.pow(2,8*ke-1);Ft(this,q,re,ke,Ot-1,-Ot)}let qe=0,Qe=1,It=0;for(this[re]=q&255;++qe<ke&&(Qe*=256);)q<0&&It===0&&this[re+qe-1]!==0&&(It=1),this[re+qe]=(q/Qe>>0)-It&255;return re+ke},x.prototype.writeIntBE=function(q,re,ke,be){if(q=+q,re=re>>>0,!be){const Ot=Math.pow(2,8*ke-1);Ft(this,q,re,ke,Ot-1,-Ot)}let qe=ke-1,Qe=1,It=0;for(this[re+qe]=q&255;--qe>=0&&(Qe*=256);)q<0&&It===0&&this[re+qe+1]!==0&&(It=1),this[re+qe]=(q/Qe>>0)-It&255;return re+ke},x.prototype.writeInt8=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,1,127,-128),q<0&&(q=255+q+1),this[re]=q&255,re+1},x.prototype.writeInt16LE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,2,32767,-32768),this[re]=q&255,this[re+1]=q>>>8,re+2},x.prototype.writeInt16BE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,2,32767,-32768),this[re]=q>>>8,this[re+1]=q&255,re+2},x.prototype.writeInt32LE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,4,2147483647,-2147483648),this[re]=q&255,this[re+1]=q>>>8,this[re+2]=q>>>16,this[re+3]=q>>>24,re+4},x.prototype.writeInt32BE=function(q,re,ke){return q=+q,re=re>>>0,ke||Ft(this,q,re,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[re]=q>>>24,this[re+1]=q>>>16,this[re+2]=q>>>8,this[re+3]=q&255,re+4},x.prototype.writeBigInt64LE=Xe(function(q,re=0){return Pt(this,q,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=Xe(function(q,re=0){return nt(this,q,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fn(ue,q,re,ke,be,qe){if(re+ke>ue.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function Xt(ue,q,re,ke,be){return q=+q,re=re>>>0,be||Fn(ue,q,re,4),A.write(ue,q,re,ke,23,4),re+4}x.prototype.writeFloatLE=function(q,re,ke){return Xt(this,q,re,!0,ke)},x.prototype.writeFloatBE=function(q,re,ke){return Xt(this,q,re,!1,ke)};function on(ue,q,re,ke,be){return q=+q,re=re>>>0,be||Fn(ue,q,re,8),A.write(ue,q,re,ke,52,8),re+8}x.prototype.writeDoubleLE=function(q,re,ke){return on(this,q,re,!0,ke)},x.prototype.writeDoubleBE=function(q,re,ke){return on(this,q,re,!1,ke)},x.prototype.copy=function(q,re,ke,be){if(!x.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),!be&&be!==0&&(be=this.length),re>=q.length&&(re=q.length),re||(re=0),be>0&&be<ke&&(be=ke),be===ke||q.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),q.length-re<be-ke&&(be=q.length-re+ke);const qe=be-ke;return this===q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,ke,be):Uint8Array.prototype.set.call(q,this.subarray(ke,be),re),qe},x.prototype.fill=function(q,re,ke,be){if(typeof q=="string"){if(typeof re=="string"?(be=re,re=0,ke=this.length):typeof ke=="string"&&(be=ke,ke=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!x.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(q.length===1){const Qe=q.charCodeAt(0);(be==="utf8"&&Qe<128||be==="latin1")&&(q=Qe)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(re<0||this.length<re||this.length<ke)throw new RangeError("Out of range index");if(ke<=re)return this;re=re>>>0,ke=ke===void 0?this.length:ke>>>0,q||(q=0);let qe;if(typeof q=="number")for(qe=re;qe<ke;++qe)this[qe]=q;else{const Qe=x.isBuffer(q)?q:x.from(q,be),It=Qe.length;if(It===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(qe=0;qe<ke-re;++qe)this[qe+re]=Qe[qe%It]}return this};const nn={};function vn(ue,q,re){nn[ue]=class extends re{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ue}]`,this.stack,delete this.name}get code(){return ue}set code(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}toString(){return`${this.name} [${ue}]: ${this.message}`}}}vn("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?`${ue} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vn("ERR_INVALID_ARG_TYPE",function(ue,q){return`The "${ue}" argument must be of type number. Received type ${typeof q}`},TypeError),vn("ERR_OUT_OF_RANGE",function(ue,q,re){let ke=`The value of "${ue}" is out of range.`,be=re;return Number.isInteger(re)&&Math.abs(re)>4294967296?be=Rn(String(re)):typeof re=="bigint"&&(be=String(re),(re>BigInt(2)**BigInt(32)||re<-(BigInt(2)**BigInt(32)))&&(be=Rn(be)),be+="n"),ke+=` It must be ${q}. Received ${be}`,ke},RangeError);function Rn(ue){let q="",re=ue.length;const ke=ue[0]==="-"?1:0;for(;re>=ke+4;re-=3)q=`_${ue.slice(re-3,re)}${q}`;return`${ue.slice(0,re)}${q}`}function zn(ue,q,re){Ai(q,"offset"),(ue[q]===void 0||ue[q+re]===void 0)&&Ti(q,ue.length-(re+1))}function Wn(ue,q,re,ke,be,qe){if(ue>re||ue<q){const Qe=typeof q=="bigint"?"n":"";let It;throw qe>3?q===0||q===BigInt(0)?It=`>= 0${Qe} and < 2${Qe} ** ${(qe+1)*8}${Qe}`:It=`>= -(2${Qe} ** ${(qe+1)*8-1}${Qe}) and < 2 ** ${(qe+1)*8-1}${Qe}`:It=`>= ${q}${Qe} and <= ${re}${Qe}`,new nn.ERR_OUT_OF_RANGE("value",It,ue)}zn(ke,be,qe)}function Ai(ue,q){if(typeof ue!="number")throw new nn.ERR_INVALID_ARG_TYPE(q,"number",ue)}function Ti(ue,q,re){throw Math.floor(ue)!==ue?(Ai(ue,re),new nn.ERR_OUT_OF_RANGE(re||"offset","an integer",ue)):q<0?new nn.ERR_BUFFER_OUT_OF_BOUNDS:new nn.ERR_OUT_OF_RANGE(re||"offset",`>= ${re?1:0} and <= ${q}`,ue)}const Je=/[^+/0-9A-Za-z-_]/g;function we(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(Je,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function ge(ue,q){q=q||1/0;let re;const ke=ue.length;let be=null;const qe=[];for(let Qe=0;Qe<ke;++Qe){if(re=ue.charCodeAt(Qe),re>55295&&re<57344){if(!be){if(re>56319){(q-=3)>-1&&qe.push(239,191,189);continue}else if(Qe+1===ke){(q-=3)>-1&&qe.push(239,191,189);continue}be=re;continue}if(re<56320){(q-=3)>-1&&qe.push(239,191,189),be=re;continue}re=(be-55296<<10|re-56320)+65536}else be&&(q-=3)>-1&&qe.push(239,191,189);if(be=null,re<128){if((q-=1)<0)break;qe.push(re)}else if(re<2048){if((q-=2)<0)break;qe.push(re>>6|192,re&63|128)}else if(re<65536){if((q-=3)<0)break;qe.push(re>>12|224,re>>6&63|128,re&63|128)}else if(re<1114112){if((q-=4)<0)break;qe.push(re>>18|240,re>>12&63|128,re>>6&63|128,re&63|128)}else throw new Error("Invalid code point")}return qe}function _e(ue){const q=[];for(let re=0;re<ue.length;++re)q.push(ue.charCodeAt(re)&255);return q}function Pe(ue,q){let re,ke,be;const qe=[];for(let Qe=0;Qe<ue.length&&!((q-=2)<0);++Qe)re=ue.charCodeAt(Qe),ke=re>>8,be=re%256,qe.push(be),qe.push(ke);return qe}function Te(ue){return f.toByteArray(we(ue))}function He(ue,q,re,ke){let be;for(be=0;be<ke&&!(be+re>=q.length||be>=ue.length);++be)q[be+re]=ue[be];return be}function Fe(ue,q){return ue instanceof q||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===q.name}function Ue(ue){return ue!==ue}const Ae=function(){const ue="0123456789abcdef",q=new Array(256);for(let re=0;re<16;++re){const ke=re*16;for(let be=0;be<16;++be)q[ke+be]=ue[re]+ue[be]}return q}();function Xe(ue){return typeof BigInt>"u"?dt:ue}function dt(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":c=>{c.exports=function(d){var u=[];return u.toString=function(){return this.map(function(A){var g="",y=typeof A[5]<"u";return A[4]&&(g+="@supports (".concat(A[4],") {")),A[2]&&(g+="@media ".concat(A[2]," {")),y&&(g+="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {")),g+=d(A),y&&(g+="}"),A[2]&&(g+="}"),A[4]&&(g+="}"),g}).join("")},u.i=function(A,g,y,v,_){typeof A=="string"&&(A=[[null,A,void 0]]);var x={};if(y)for(var b=0;b<this.length;b++){var m=this[b][0];m!=null&&(x[m]=!0)}for(var S=0;S<A.length;S++){var C=[].concat(A[S]);y&&x[C[0]]||(typeof _<"u"&&(typeof C[5]>"u"||(C[1]="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {").concat(C[1],"}")),C[5]=_),g&&(C[2]&&(C[1]="@media ".concat(C[2]," {").concat(C[1],"}")),C[2]=g),v&&(C[4]?(C[1]="@supports (".concat(C[4],") {").concat(C[1],"}"),C[4]=v):C[4]="".concat(v)),u.push(C))}},u}},"./node_modules/css-loader/dist/runtime/getUrl.js":c=>{c.exports=function(d,u){return u||(u={}),d&&(d=String(d.__esModule?d.default:d),/^['"].*['"]$/.test(d)&&(d=d.slice(1,-1)),u.hash&&(d+=u.hash),/["'() \t\n]|(%20)/.test(d)||u.needQuotes?'"'.concat(d.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):d)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":c=>{c.exports=function(d){var u=d[1],f=d[3];if(!f)return u;if(typeof btoa=="function"){var A=btoa(unescape(encodeURIComponent(JSON.stringify(f)))),g="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(A),y="/*# ".concat(g," */");return[u].concat([y]).join(`
`)}return[u].join(`
`)}},"./node_modules/custom-event-polyfill/polyfill.js":()=>{(function(){if(!(typeof window>"u"))try{var c=new window.CustomEvent("test",{cancelable:!0});if(c.preventDefault(),c.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var d=function(f,A){var g,y;return A=A||{},A.bubbles=!!A.bubbles,A.cancelable=!!A.cancelable,g=document.createEvent("CustomEvent"),g.initCustomEvent(f,A.bubbles,A.cancelable,A.detail),y=g.preventDefault,g.preventDefault=function(){y.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},g};d.prototype=window.Event.prototype,window.CustomEvent=d}})()},"./node_modules/debug/browser.js":(c,d,u)=>{d=c.exports=u("./node_modules/debug/debug.js"),d.log=g,d.formatArgs=A,d.save=y,d.load=v,d.useColors=f,d.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:_(),d.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function f(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}d.formatters.j=function(x){return JSON.stringify(x)};function A(){var x=arguments,b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" "),!b)return x;var m="color: "+this.color;x=[x[0],m,"color: inherit"].concat(Array.prototype.slice.call(x,1));var S=0,C=0;return x[0].replace(/%[a-z%]/g,function(M){M!=="%%"&&(S++,M==="%c"&&(C=S))}),x.splice(C,0,m),x}function g(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function y(x){try{x==null?d.storage.removeItem("debug"):d.storage.debug=x}catch{}}function v(){var x;try{x=d.storage.debug}catch{}return x}d.enable(v());function _(){try{return window.localStorage}catch{}}},"./node_modules/debug/debug.js":(c,d)=>{d=c.exports=A,d.coerce=_,d.disable=y,d.enable=g,d.enabled=v,d.names=[],d.skips=[],d.formatters={};var u=0;function f(){return d.colors[u++%d.colors.length]}function A(x){function b(){}b.enabled=!1;function m(){var C=m;C.useColors==null&&(C.useColors=d.useColors()),C.color==null&&C.useColors&&(C.color=f());var M=Array.prototype.slice.call(arguments);M[0]=d.coerce(M[0]),typeof M[0]!="string"&&(M=["%o"].concat(M));var T=0;M[0]=M[0].replace(/%([a-z%])/g,function(P,k){if(P==="%%")return P;T++;var D=d.formatters[k];if(typeof D=="function"){var z=M[T];P=D.call(C,z),M.splice(T,1),T--}return P}),typeof d.formatArgs=="function"&&(M=d.formatArgs.apply(C,M));var N=m.log||d.log||console.log.bind(console);N.apply(C,M)}m.enabled=!0;var S=d.enabled(x)?m:b;return S.namespace=x,S}function g(x){d.save(x);for(var b=(x||"").split(/[\s,]+/),m=b.length,S=0;S<m;S++)b[S]&&(x=b[S].replace(/\*/g,".*?"),x[0]==="-"?d.skips.push(new RegExp("^"+x.substr(1)+"$")):d.names.push(new RegExp("^"+x+"$")))}function y(){d.enable("")}function v(x){var b,m;for(b=0,m=d.skips.length;b<m;b++)if(d.skips[b].test(x))return!1;for(b=0,m=d.names.length;b<m;b++)if(d.names[b].test(x))return!0;return!1}function _(x){return x instanceof Error?x.stack||x.message:x}},"./node_modules/deep-assign/index.js":(c,d,u)=>{var f=u("./node_modules/is-obj/index.js"),A=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function y(x){if(x==null)throw new TypeError("Sources cannot be null or undefined");return Object(x)}function v(x,b,m){var S=b[m];if(S!=null){if(A.call(x,m)&&(x[m]===void 0||x[m]===null))throw new TypeError("Cannot convert undefined or null to object ("+m+")");!A.call(x,m)||!f(S)?x[m]=S:x[m]=_(Object(x[m]),b[m])}}function _(x,b){if(x===b)return x;b=Object(b);for(var m in b)A.call(b,m)&&v(x,b,m);if(Object.getOwnPropertySymbols)for(var S=Object.getOwnPropertySymbols(b),C=0;C<S.length;C++)g.call(b,S[C])&&v(x,b,S[C]);return x}c.exports=function(b){b=y(b);for(var m=1;m<arguments.length;m++)_(b,arguments[m]);return b}},"./node_modules/dtype/index.js":c=>{c.exports=function(d){switch(d){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/flatten-vertex-data/index.js":(c,d,u)=>{var f=u("./node_modules/dtype/index.js");c.exports=A;function A(g,y,v){if(!g)throw new TypeError("must specify data as first parameter");if(v=+(v||0)|0,Array.isArray(g)&&g[0]&&typeof g[0][0]=="number"){var _=g[0].length,x=g.length*_,b,m,S,C;(!y||typeof y=="string")&&(y=new(f(y||"float32"))(x+v));var M=y.length-v;if(x!==M)throw new Error("source length "+x+" ("+_+"x"+g.length+") does not match destination length "+M);for(b=0,S=v;b<g.length;b++)for(m=0;m<_;m++)y[S++]=g[b][m]===null?NaN:g[b][m]}else if(!y||typeof y=="string"){var T=f(y||"float32");if(Array.isArray(g)||y==="array")for(y=new T(g.length+v),b=0,S=v,C=y.length;S<C;S++,b++)y[S]=g[b]===null?NaN:g[b];else v===0?y=new T(g):(y=new T(g.length+v),y.set(g,v))}else y.set(g,v);return y}},"./node_modules/global/window.js":(c,d,u)=>{var f;typeof window<"u"?f=window:typeof u.g<"u"?f=u.g:typeof self<"u"?f=self:f={},c.exports=f},"./node_modules/ieee754/index.js":(c,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(u,f,A,g,y){var v,_,x=y*8-g-1,b=(1<<x)-1,m=b>>1,S=-7,C=A?y-1:0,M=A?-1:1,T=u[f+C];for(C+=M,v=T&(1<<-S)-1,T>>=-S,S+=x;S>0;v=v*256+u[f+C],C+=M,S-=8);for(_=v&(1<<-S)-1,v>>=-S,S+=g;S>0;_=_*256+u[f+C],C+=M,S-=8);if(v===0)v=1-m;else{if(v===b)return _?NaN:(T?-1:1)*(1/0);_=_+Math.pow(2,g),v=v-m}return(T?-1:1)*_*Math.pow(2,v-g)},d.write=function(u,f,A,g,y,v){var _,x,b,m=v*8-y-1,S=(1<<m)-1,C=S>>1,M=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=g?0:v-1,N=g?1:-1,P=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(x=isNaN(f)?1:0,_=S):(_=Math.floor(Math.log(f)/Math.LN2),f*(b=Math.pow(2,-_))<1&&(_--,b*=2),_+C>=1?f+=M/b:f+=M*Math.pow(2,1-C),f*b>=2&&(_++,b/=2),_+C>=S?(x=0,_=S):_+C>=1?(x=(f*b-1)*Math.pow(2,y),_=_+C):(x=f*Math.pow(2,C-1)*Math.pow(2,y),_=0));y>=8;u[A+T]=x&255,T+=N,x/=256,y-=8);for(_=_<<y|x,m+=y;m>0;u[A+T]=_&255,T+=N,_/=256,m-=8);u[A+T-N]|=P*128}},"./node_modules/inherits/inherits_browser.js":c=>{typeof Object.create=="function"?c.exports=function(u,f){f&&(u.super_=f,u.prototype=Object.create(f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(u,f){if(f){u.super_=f;var A=function(){};A.prototype=f.prototype,u.prototype=new A,u.prototype.constructor=u}}},"./node_modules/is-buffer/index.js":c=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */c.exports=function(f){return f!=null&&(d(f)||u(f)||!!f._isBuffer)};function d(f){return!!f.constructor&&typeof f.constructor.isBuffer=="function"&&f.constructor.isBuffer(f)}function u(f){return typeof f.readFloatLE=="function"&&typeof f.slice=="function"&&d(f.slice(0,0))}},"./node_modules/is-function/index.js":c=>{c.exports=u;var d=Object.prototype.toString;function u(f){if(!f)return!1;var A=d.call(f);return A==="[object Function]"||typeof f=="function"&&A!=="[object RegExp]"||typeof window<"u"&&(f===window.setTimeout||f===window.alert||f===window.confirm||f===window.prompt)}},"./node_modules/is-obj/index.js":c=>{c.exports=function(d){var u=typeof d;return d!==null&&(u==="object"||u==="function")}},"./node_modules/layout-bmfont-text/index.js":(c,d,u)=>{var f=u("./node_modules/word-wrapper/index.js"),A=u("./node_modules/xtend/immutable.js"),g=u("./node_modules/as-number/index.js"),y=["x","e","a","o","n","s","r","c","u","m","v","w","z"],v=["m","w"],_=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],x="	".charCodeAt(0),b=" ".charCodeAt(0),m=0,S=1,C=2;c.exports=function(U){return new M(U)};function M(F){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(F)}M.prototype.update=function(F){if(F=A({measure:this._measure},F),this._opt=F,this._opt.tabSize=g(this._opt.tabSize,4),!F.font)throw new Error("must provide a valid bitmap font");var U=this.glyphs,G=F.text||"",V=F.font;this._setupSpaceGlyphs(V);var K=f.lines(G,F),W=F.width||0;U.length=0;var J=K.reduce(function(Ft,Pt){return Math.max(Ft,Pt.width,W)},0),ee=0,he=0,me=g(F.lineHeight,V.common.lineHeight),Be=V.common.base,Se=me-Be,rt=F.letterSpacing||0,Ge=me*K.length-Se,st=ne(this._opt.align);he-=Ge,this._width=J,this._height=Ge,this._descender=me-Be,this._baseline=Be,this._xHeight=k(V),this._capHeight=z(V),this._lineHeight=me,this._ascender=me-Se-this._xHeight;var mt=this;K.forEach(function(Ft,Pt){for(var nt=Ft.start,Fn=Ft.end,Xt=Ft.width,on,nn=nt;nn<Fn;nn++){var vn=G.charCodeAt(nn),Rn=mt.getGlyph(V,vn);if(Rn){on&&(ee+=Y(V,on.id,Rn.id));var zn=ee;st===S?zn+=(J-Xt)/2:st===C&&(zn+=J-Xt),U.push({position:[zn,he],data:Rn,index:nn,line:Pt}),ee+=Rn.xadvance+rt,on=Rn}}he+=me,ee=0}),this._linesTotal=K.length},M.prototype._setupSpaceGlyphs=function(F){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!F.chars||F.chars.length===0)){var U=P(F,b)||D(F)||F.chars[0],G=this._opt.tabSize*U.xadvance;this._fallbackSpaceGlyph=U,this._fallbackTabGlyph=A(U,{x:0,y:0,xadvance:G,id:x,xoffset:0,yoffset:0,width:0,height:0})}},M.prototype.getGlyph=function(F,U){var G=P(F,U);return G||(U===x?this._fallbackTabGlyph:U===b?this._fallbackSpaceGlyph:null)},M.prototype.computeMetrics=function(F,U,G,V){var K=this._opt.letterSpacing||0,W=this._opt.font,J=0,ee=0,he=0,me,Be;if(!W.chars||W.chars.length===0)return{start:U,end:U,width:0};G=Math.min(F.length,G);for(var Se=U;Se<G;Se++){var rt=F.charCodeAt(Se),me=this.getGlyph(W,rt);if(me){me.xoffset;var Ge=Be?Y(W,Be.id,me.id):0;J+=Ge;var st=J+me.xadvance+K,mt=J+me.width;if(mt>=V||st>=V)break;J=st,ee=mt,Be=me}he++}return Be&&(ee+=Be.xoffset),{start:U,end:U+he,width:ee}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(T);function T(F){Object.defineProperty(M.prototype,F,{get:N(F),configurable:!0})}function N(F){return new Function(["return function "+F+"() {","  return this._"+F,"}"].join(`
`))()}function P(F,U){if(!F.chars||F.chars.length===0)return null;var G=O(F.chars,U);return G>=0?F.chars[G]:null}function k(F){for(var U=0;U<y.length;U++){var G=y[U].charCodeAt(0),V=O(F.chars,G);if(V>=0)return F.chars[V].height}return 0}function D(F){for(var U=0;U<v.length;U++){var G=v[U].charCodeAt(0),V=O(F.chars,G);if(V>=0)return F.chars[V]}return 0}function z(F){for(var U=0;U<_.length;U++){var G=_[U].charCodeAt(0),V=O(F.chars,G);if(V>=0)return F.chars[V].height}return 0}function Y(F,U,G){if(!F.kernings||F.kernings.length===0)return 0;for(var V=F.kernings,K=0;K<V.length;K++){var W=V[K];if(W.first===U&&W.second===G)return W.amount}return 0}function ne(F){return F==="center"?S:F==="right"?C:m}function O(F,U,G){G=G||0;for(var V=G;V<F.length;V++)if(F[V].id===U)return V;return-1}},"./node_modules/load-bmfont/browser.js":(c,d,u)=>{var f=u("./node_modules/buffer/index.js").Buffer,A=u("./node_modules/xhr/index.js"),g=function(){},y=u("./node_modules/parse-bmfont-ascii/index.js"),v=u("./node_modules/parse-bmfont-xml/lib/browser.js"),_=u("./node_modules/parse-bmfont-binary/index.js"),x=u("./node_modules/load-bmfont/lib/is-binary.js"),b=u("./node_modules/xtend/immutable.js"),m=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();c.exports=function(M,T){T=typeof T=="function"?T:g,typeof M=="string"?M={uri:M}:M||(M={});var N=M.binary;N&&(M=C(M)),A(M,function(P,k,D){if(P)return T(P);if(!/^2/.test(k.statusCode))return T(new Error("http status code: "+k.statusCode));if(!D)return T(new Error("no body result"));var z=!1;if(S(D)){var Y=new Uint8Array(D);D=f.from(Y,"binary")}x(D)&&(z=!0,typeof D=="string"&&(D=f.from(D,"binary"))),z||(f.isBuffer(D)&&(D=D.toString(M.encoding)),D=D.trim());var ne;try{var O=k.headers["content-type"];z?ne=_(D):/json/.test(O)||D.charAt(0)==="{"?ne=JSON.parse(D):/xml/.test(O)||D.charAt(0)==="<"?ne=v(D):ne=y(D)}catch(F){T(new Error("error parsing font "+F.message)),T=g}T(null,ne)})};function S(M){var T=Object.prototype.toString;return T.call(M)==="[object ArrayBuffer]"}function C(M){if(m)return b(M,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var T=new self.XMLHttpRequest;return T.overrideMimeType("text/plain; charset=x-user-defined"),b({xhr:T},M)}},"./node_modules/load-bmfont/lib/is-binary.js":(c,d,u)=>{var f=u("./node_modules/buffer/index.js").Buffer,A=u("./node_modules/buffer-equal/index.js"),g=f.from([66,77,70,3]);c.exports=function(y){return typeof y=="string"?y.substring(0,3)==="BMF":y.length>4&&A(y.slice(0,4),g)}},"./node_modules/object-assign/index.js":c=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function A(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function g(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var v={},_=0;_<10;_++)v["_"+String.fromCharCode(_)]=_;var x=Object.getOwnPropertyNames(v).map(function(m){return v[m]});if(x.join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(m){b[m]=m}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}c.exports=g()?Object.assign:function(y,v){for(var _,x=A(y),b,m=1;m<arguments.length;m++){_=Object(arguments[m]);for(var S in _)u.call(_,S)&&(x[S]=_[S]);if(d){b=d(_);for(var C=0;C<b.length;C++)f.call(_,b[C])&&(x[b[C]]=_[b[C]])}}return x}},"./node_modules/parse-bmfont-ascii/index.js":c=>{c.exports=function(g){if(!g)throw new Error("no data provided");g=g.toString().trim();var y={pages:[],chars:[],kernings:[]},v=g.split(/\r\n?|\n/g);if(v.length===0)throw new Error("no data in BMFont file");for(var _=0;_<v.length;_++){var x=d(v[_],_);if(x)if(x.key==="page"){if(typeof x.data.id!="number")throw new Error("malformed file at line "+_+" -- needs page id=N");if(typeof x.data.file!="string")throw new Error("malformed file at line "+_+' -- needs page file="path"');y.pages[x.data.id]=x.data.file}else x.key==="chars"||x.key==="kernings"||(x.key==="char"?y.chars.push(x.data):x.key==="kerning"?y.kernings.push(x.data):y[x.key]=x.data)}return y};function d(A,g){if(A=A.replace(/\t+/g," ").trim(),!A)return null;var y=A.indexOf(" ");if(y===-1)throw new Error("no named row at line "+g);var v=A.substring(0,y);A=A.substring(y+1),A=A.replace(/letter=[\'\"]\S+[\'\"]/gi,""),A=A.split("="),A=A.map(function(S){return S.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var _=[],x=0;x<A.length;x++){var b=A[x];x===0?_.push({key:b[0],data:""}):x===A.length-1?_[_.length-1].data=u(b[0]):(_[_.length-1].data=u(b[0]),_.push({key:b[1],data:""}))}var m={key:v,data:{}};return _.forEach(function(S){m.data[S.key]=S.data}),m}function u(A){return!A||A.length===0?"":A.indexOf('"')===0||A.indexOf("'")===0?A.substring(1,A.length-1):A.indexOf(",")!==-1?f(A):parseInt(A,10)}function f(A){return A.split(",").map(function(g){return parseInt(g,10)})}},"./node_modules/parse-bmfont-binary/index.js":c=>{var d=[66,77,70];c.exports=function(m){if(m.length<6)throw new Error("invalid buffer length for BMFont");var S=d.every(function(P,k){return m.readUInt8(k)===P});if(!S)throw new Error("BMFont missing BMF byte header");var C=3,M=m.readUInt8(C++);if(M>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var T={kernings:[],chars:[]},N=0;N<5;N++)C+=u(T,m,C);return T};function u(b,m,S){if(S>m.length-1)return 0;var C=m.readUInt8(S++),M=m.readInt32LE(S);switch(S+=4,C){case 1:b.info=f(m,S);break;case 2:b.common=A(m,S);break;case 3:b.pages=g(m,S,M);break;case 4:b.chars=y(m,S,M);break;case 5:b.kernings=v(m,S,M);break}return 5+M}function f(b,m){var S={};S.size=b.readInt16LE(m);var C=b.readUInt8(m+2);return S.smooth=C>>7&1,S.unicode=C>>6&1,S.italic=C>>5&1,S.bold=C>>4&1,C>>3&1&&(S.fixedHeight=1),S.charset=b.readUInt8(m+3)||"",S.stretchH=b.readUInt16LE(m+4),S.aa=b.readUInt8(m+6),S.padding=[b.readInt8(m+7),b.readInt8(m+8),b.readInt8(m+9),b.readInt8(m+10)],S.spacing=[b.readInt8(m+11),b.readInt8(m+12)],S.outline=b.readUInt8(m+13),S.face=x(b,m+14),S}function A(b,m){var S={};return S.lineHeight=b.readUInt16LE(m),S.base=b.readUInt16LE(m+2),S.scaleW=b.readUInt16LE(m+4),S.scaleH=b.readUInt16LE(m+6),S.pages=b.readUInt16LE(m+8),b.readUInt8(m+10),S.packed=0,S.alphaChnl=b.readUInt8(m+11),S.redChnl=b.readUInt8(m+12),S.greenChnl=b.readUInt8(m+13),S.blueChnl=b.readUInt8(m+14),S}function g(b,m,S){for(var C=[],M=_(b,m),T=M.length+1,N=S/T,P=0;P<N;P++)C[P]=b.slice(m,m+M.length).toString("utf8"),m+=T;return C}function y(b,m,S){for(var C=[],M=S/20,T=0;T<M;T++){var N={},P=T*20;N.id=b.readUInt32LE(m+0+P),N.x=b.readUInt16LE(m+4+P),N.y=b.readUInt16LE(m+6+P),N.width=b.readUInt16LE(m+8+P),N.height=b.readUInt16LE(m+10+P),N.xoffset=b.readInt16LE(m+12+P),N.yoffset=b.readInt16LE(m+14+P),N.xadvance=b.readInt16LE(m+16+P),N.page=b.readUInt8(m+18+P),N.chnl=b.readUInt8(m+19+P),C[T]=N}return C}function v(b,m,S){for(var C=[],M=S/10,T=0;T<M;T++){var N={},P=T*10;N.first=b.readUInt32LE(m+0+P),N.second=b.readUInt32LE(m+4+P),N.amount=b.readInt16LE(m+8+P),C[T]=N}return C}function _(b,m){for(var S=m;S<b.length&&b[S]!==0;S++);return b.slice(m,S)}function x(b,m){return _(b,m).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(c,d,u)=>{var f=u("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),A=u("./node_modules/xml-parse-from-string/index.js"),g={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};c.exports=function(b){b=b.toString();var m=A(b),S={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(D){var z=m.getElementsByTagName(D)[0];z&&(S[D]=f(y(z)))});var C=m.getElementsByTagName("pages")[0];if(!C)throw new Error("malformed file -- no <pages> element");for(var M=C.getElementsByTagName("page"),T=0;T<M.length;T++){var N=M[T],P=parseInt(N.getAttribute("id"),10),k=N.getAttribute("file");if(isNaN(P))throw new Error('malformed file -- page "id" attribute is NaN');if(!k)throw new Error('malformed file -- needs page "file" attribute');S.pages[parseInt(P,10)]=k}return["chars","kernings"].forEach(function(D){var z=m.getElementsByTagName(D)[0];if(z)for(var Y=D.substring(0,D.length-1),ne=z.getElementsByTagName(Y),O=0;O<ne.length;O++){var F=ne[O];S[D].push(f(y(F)))}}),S};function y(x){var b=v(x);return b.reduce(function(m,S){var C=_(S.nodeName);return m[C]=S.nodeValue,m},{})}function v(x){for(var b=[],m=0;m<x.attributes.length;m++)b.push(x.attributes[m]);return b}function _(x){return g[x.toLowerCase()]||x}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":c=>{var d="chasrset";c.exports=function(A){d in A&&(A.charset=A[d],delete A[d]);for(var g in A)g==="face"||g==="charset"||(g==="padding"||g==="spacing"?A[g]=u(A[g]):A[g]=parseInt(A[g],10));return A};function u(f){return f.split(",").map(function(A){return parseInt(A,10)})}},"./node_modules/parse-headers/parse-headers.js":c=>{var d=function(f){return f.replace(/^\s+|\s+$/g,"")},u=function(f){return Object.prototype.toString.call(f)==="[object Array]"};c.exports=function(f){if(!f)return{};for(var A={},g=d(f).split(`
`),y=0;y<g.length;y++){var v=g[y],_=v.indexOf(":"),x=d(v.slice(0,_)).toLowerCase(),b=d(v.slice(_+1));typeof A[x]>"u"?A[x]=b:u(A[x])?A[x].push(b):A[x]=[A[x],b]}return A}},"./node_modules/present/lib/present-browser.js":(c,d,u)=>{var f=u.g.performance||{},A=function(){for(var g=["now","webkitNow","msNow","mozNow","oNow"];g.length;){var y=g.shift();if(y in f)return f[y].bind(f)}var v=Date.now||function(){return new Date().getTime()},_=(f.timing||{}).navigationStart||v();return function(){return v()-_}}();A.performanceNow=f.now,A.noConflict=function(){f.now=A.performanceNow},A.conflict=function(){f.now=A},A.conflict(),c.exports=A},"./node_modules/process/browser.js":c=>{var d=c.exports={},u,f;function A(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=A}catch{u=A}try{typeof clearTimeout=="function"?f=clearTimeout:f=g}catch{f=g}})();function y(N){if(u===setTimeout)return setTimeout(N,0);if((u===A||!u)&&setTimeout)return u=setTimeout,setTimeout(N,0);try{return u(N,0)}catch{try{return u.call(null,N,0)}catch{return u.call(this,N,0)}}}function v(N){if(f===clearTimeout)return clearTimeout(N);if((f===g||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(N);try{return f(N)}catch{try{return f.call(null,N)}catch{return f.call(this,N)}}}var _=[],x=!1,b,m=-1;function S(){!x||!b||(x=!1,b.length?_=b.concat(_):m=-1,_.length&&C())}function C(){if(!x){var N=y(S);x=!0;for(var P=_.length;P;){for(b=_,_=[];++m<P;)b&&b[m].run();m=-1,P=_.length}b=null,x=!1,v(N)}}d.nextTick=function(N){var P=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)P[k-1]=arguments[k];_.push(new M(N,P)),_.length===1&&!x&&y(C)};function M(N,P){this.fun=N,this.array=P}M.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function T(){}d.on=T,d.addListener=T,d.once=T,d.off=T,d.removeListener=T,d.removeAllListeners=T,d.emit=T,d.prependListener=T,d.prependOnceListener=T,d.listeners=function(N){return[]},d.binding=function(N){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(N){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},"./node_modules/promise-polyfill/Promise.js":function(c){(function(d){var u=setTimeout,f=typeof setImmediate=="function"&&setImmediate||function(C){u(C,1)};function A(C,M){return function(){C.apply(M,arguments)}}var g=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"};function y(C){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof C!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],S(C,A(_,this),A(x,this))}function v(C){var M=this;if(this._state===null){this._deferreds.push(C);return}f(function(){var T=M._state?C.onFulfilled:C.onRejected;if(T===null){(M._state?C.resolve:C.reject)(M._value);return}var N;try{N=T(M._value)}catch(P){C.reject(P);return}C.resolve(N)})}function _(C){try{if(C===this)throw new TypeError("A promise cannot be resolved with itself.");if(C&&(typeof C=="object"||typeof C=="function")){var M=C.then;if(typeof M=="function"){S(A(M,C),A(_,this),A(x,this));return}}this._state=!0,this._value=C,b.call(this)}catch(T){x.call(this,T)}}function x(C){this._state=!1,this._value=C,b.call(this)}function b(){for(var C=0,M=this._deferreds.length;C<M;C++)v.call(this,this._deferreds[C]);this._deferreds=null}function m(C,M,T,N){this.onFulfilled=typeof C=="function"?C:null,this.onRejected=typeof M=="function"?M:null,this.resolve=T,this.reject=N}function S(C,M,T){var N=!1;try{C(function(P){N||(N=!0,M(P))},function(P){N||(N=!0,T(P))})}catch(P){if(N)return;N=!0,T(P)}}y.prototype.catch=function(C){return this.then(null,C)},y.prototype.then=function(C,M){var T=this;return new y(function(N,P){v.call(T,new m(C,M,N,P))})},y.all=function(){var C=Array.prototype.slice.call(arguments.length===1&&g(arguments[0])?arguments[0]:arguments);return new y(function(M,T){if(C.length===0)return M([]);var N=C.length;function P(D,z){try{if(z&&(typeof z=="object"||typeof z=="function")){var Y=z.then;if(typeof Y=="function"){Y.call(z,function(ne){P(D,ne)},T);return}}C[D]=z,--N===0&&M(C)}catch(ne){T(ne)}}for(var k=0;k<C.length;k++)P(k,C[k])})},y.resolve=function(C){return C&&typeof C=="object"&&C.constructor===y?C:new y(function(M){M(C)})},y.reject=function(C){return new y(function(M,T){T(C)})},y.race=function(C){return new y(function(M,T){for(var N=0,P=C.length;N<P;N++)C[N].then(M,T)})},y._setImmediateFn=function(M){f=M},c.exports?c.exports=y:d.Promise||(d.Promise=y)})(this)},"./node_modules/quad-indices/index.js":(c,d,u)=>{var f=u("./node_modules/dtype/index.js"),A=u("./node_modules/an-array/index.js"),g=u("./node_modules/is-buffer/index.js"),y=[0,2,3],v=[2,1,3];c.exports=function(x,b){(!x||!(A(x)||g(x)))&&(b=x||{},x=null),typeof b=="number"?b={count:b}:b=b||{};for(var m=typeof b.type=="string"?b.type:"uint16",S=typeof b.count=="number"?b.count:1,C=b.start||0,M=b.clockwise!==!1?y:v,T=M[0],N=M[1],P=M[2],k=S*6,D=x||new(f(m))(k),z=0,Y=0;z<k;z+=6,Y+=4){var ne=z+C;D[ne+0]=Y+0,D[ne+1]=Y+1,D[ne+2]=Y+2,D[ne+3]=Y+T,D[ne+4]=Y+N,D[ne+5]=Y+P}return D}},"./node_modules/super-animejs/lib/anime.es.js":(c,d,u)=>{u.r(d),u.d(d,{default:()=>Bt});var f={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},A={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},g=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],y={CSS:{},springs:{}};function v(Re,We,it){return Math.min(Math.max(Re,We),it)}function _(Re,We){return Re.indexOf(We)>-1}function x(Re,We){return Re.apply(null,We)}var b=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,m=/^rgb/,S=/^hsl/,C={arr:function(Re){return Array.isArray(Re)},obj:function(Re){return _(Object.prototype.toString.call(Re),"Object")},pth:function(Re){return C.obj(Re)&&Re.hasOwnProperty("totalLength")},svg:function(Re){return Re instanceof SVGElement},inp:function(Re){return Re instanceof HTMLInputElement},dom:function(Re){return Re.nodeType||C.svg(Re)},str:function(Re){return typeof Re=="string"},fnc:function(Re){return typeof Re=="function"},und:function(Re){return typeof Re>"u"},hex:function(Re){return b.test(Re)},rgb:function(Re){return m.test(Re)},hsl:function(Re){return S.test(Re)},col:function(Re){return C.hex(Re)||C.rgb(Re)||C.hsl(Re)},key:function(Re){return!f.hasOwnProperty(Re)&&!A.hasOwnProperty(Re)&&Re!=="targets"&&Re!=="keyframes"}},M=/\(([^)]+)\)/;function T(Re){var We=M.exec(Re);return We?We[1].split(",").map(function(it){return parseFloat(it)}):[]}function N(Re,We){var it=T(Re),gt=v(C.und(it[0])?1:it[0],.1,100),At=v(C.und(it[1])?100:it[1],.1,100),Rt=v(C.und(it[2])?10:it[2],.1,100),Nt=v(C.und(it[3])?0:it[3],.1,100),wn=Math.sqrt(At/gt),yn=Rt/(2*Math.sqrt(At*gt)),Vt=yn<1?wn*Math.sqrt(1-yn*yn):0,qn=1,Un=yn<1?(yn*wn+-Nt)/Vt:-Nt+wn;function _n(hi){var Ci=We?We*hi/1e3:hi;return yn<1?Ci=Math.exp(-Ci*yn*wn)*(qn*Math.cos(Vt*Ci)+Un*Math.sin(Vt*Ci)):Ci=(qn+Un*Ci)*Math.exp(-Ci*wn),hi===0||hi===1?hi:1-Ci}function Rr(){var hi=y.springs[Re];if(hi)return hi;for(var Ci=1/6,qi=0,Cr=0;;)if(qi+=Ci,_n(qi)===1){if(Cr++,Cr>=16)break}else Cr=0;var Jr=qi*Ci*1e3;return y.springs[Re]=Jr,Jr}return We?_n:Rr}function P(Re,We){Re===void 0&&(Re=1),We===void 0&&(We=.5);var it=v(Re,1,10),gt=v(We,.1,2);return function(At){return At===0||At===1?At:-it*Math.pow(2,10*(At-1))*Math.sin((At-1-gt/(Math.PI*2)*Math.asin(1/it))*(Math.PI*2)/gt)}}function k(Re){return Re===void 0&&(Re=10),function(We){return Math.round(We*Re)*(1/Re)}}var D=function(){var Re=11,We=1/(Re-1);function it(qn,Un){return 1-3*Un+3*qn}function gt(qn,Un){return 3*Un-6*qn}function At(qn){return 3*qn}function Rt(qn,Un,_n){return((it(Un,_n)*qn+gt(Un,_n))*qn+At(Un))*qn}function Nt(qn,Un,_n){return 3*it(Un,_n)*qn*qn+2*gt(Un,_n)*qn+At(Un)}function wn(qn,Un,_n,Rr,hi){var Ci,qi,Cr=0;do qi=Un+(_n-Un)/2,Ci=Rt(qi,Rr,hi)-qn,Ci>0?_n=qi:Un=qi;while(Math.abs(Ci)>1e-7&&++Cr<10);return qi}function yn(qn,Un,_n,Rr){for(var hi=0;hi<4;++hi){var Ci=Nt(Un,_n,Rr);if(Ci===0)return Un;var qi=Rt(Un,_n,Rr)-qn;Un-=qi/Ci}return Un}function Vt(qn,Un,_n,Rr){if(!(0<=qn&&qn<=1&&0<=_n&&_n<=1))return;var hi=new Float32Array(Re);if(qn!==Un||_n!==Rr)for(var Ci=0;Ci<Re;++Ci)hi[Ci]=Rt(Ci*We,qn,_n);function qi(Cr){for(var Jr=0,bn=1,ei=Re-1;bn!==ei&&hi[bn]<=Cr;++bn)Jr+=We;--bn;var Wr=(Cr-hi[bn])/(hi[bn+1]-hi[bn]),Mi=Jr+Wr*We,ie=Nt(Mi,qn,_n);return ie>=.001?yn(Cr,Mi,qn,_n):ie===0?Mi:wn(Cr,Jr,Jr+We,qn,_n)}return function(Cr){return qn===Un&&_n===Rr||Cr===0||Cr===1?Cr:Rt(qi(Cr),Un,Rr)}}return Vt}(),z=function(){var Re=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],We={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],P],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Nt,wn){return function(yn){return 1-P(Nt,wn)(1-yn)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Nt,wn){return function(yn){return yn<.5?P(Nt,wn)(yn*2)/2:1-P(Nt,wn)(yn*-2+2)/2}}]},it={linear:[.25,.25,.75,.75]};for(var gt in We)for(var At=0,Rt=We[gt].length;At<Rt;At++)it["ease"+gt+Re[At]]=We[gt][At];return it}();function Y(Re,We){if(C.fnc(Re))return Re;var it=Re.split("(")[0],gt=z[it],At=T(Re);switch(it){case"spring":return N(Re,We);case"cubicBezier":return x(D,At);case"steps":return x(k,At);default:return C.fnc(gt)?x(gt,At):x(D,gt)}}function ne(Re){try{var We=document.querySelectorAll(Re);return We}catch{return}}var O=[];function F(Re,We){for(var it=O,gt=Re.length,At=arguments.length>=2?arguments[1]:void 0,Rt=0;Rt<gt;Rt++)if(Rt in Re){var Nt=Re[Rt];We.call(At,Nt,Rt,Re)&&it.push(Nt)}return O=Re,O.length=0,it}function U(Re,We){We||(We=[]);for(var it=0,gt=Re.length;it<gt;it++){var At=Re[it];Array.isArray(At)?U(At,We):We.push(At)}return We}function G(Re){return C.arr(Re)?Re:(C.str(Re)&&(Re=ne(Re)||Re),Re instanceof NodeList||Re instanceof HTMLCollection?[].slice.call(Re):[Re])}function V(Re,We){return Re.some(function(it){return it===We})}function K(Re){var We={};for(var it in Re)We[it]=Re[it];return We}function W(Re,We){var it=K(Re);for(var gt in Re)it[gt]=We.hasOwnProperty(gt)?We[gt]:Re[gt];return it}function J(Re,We){var it=K(Re);for(var gt in We)it[gt]=C.und(Re[gt])?We[gt]:Re[gt];return it}var ee=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function he(Re){var We=ee.exec(Re);return We?"rgba("+We[1]+",1)":Re}var me=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Be=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function Se(Re){var We=Re.replace(me,function(Nt,wn,yn,Vt){return wn+wn+yn+yn+Vt+Vt}),it=Be.exec(We),gt=parseInt(it[1],16),At=parseInt(it[2],16),Rt=parseInt(it[3],16);return"rgba("+gt+","+At+","+Rt+",1)"}var rt=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,Ge=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function st(Re){var We=rt.exec(Re)||Ge.exec(Re),it=parseInt(We[1],10)/360,gt=parseInt(We[2],10)/100,At=parseInt(We[3],10)/100,Rt=We[4]||1;function Nt(_n,Rr,hi){return hi<0&&(hi+=1),hi>1&&(hi-=1),hi<.16666666666666666?_n+(Rr-_n)*6*hi:hi<.5?Rr:hi<.6666666666666666?_n+(Rr-_n)*(.6666666666666666-hi)*6:_n}var wn,yn,Vt;if(gt==0)wn=yn=Vt=At;else{var qn=At<.5?At*(1+gt):At+gt-At*gt,Un=2*At-qn;wn=Nt(Un,qn,it+.3333333333333333),yn=Nt(Un,qn,it),Vt=Nt(Un,qn,it-.3333333333333333)}return"rgba("+wn*255+","+yn*255+","+Vt*255+","+Rt+")"}function mt(Re){if(C.rgb(Re))return he(Re);if(C.hex(Re))return Se(Re);if(C.hsl(Re))return st(Re)}var Ft=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Pt(Re){var We=Ft.exec(Re);if(We)return We[2]}function nt(Re){if(_(Re,"translate")||Re==="perspective")return"px";if(_(Re,"rotate")||_(Re,"skew"))return"deg"}function Fn(Re,We){return C.fnc(Re)?Re(We.target,We.id,We.total):Re}function Xt(Re,We){return Re.getAttribute(We)}function on(Re,We,it){var gt=Pt(We);if(V([it,"deg","rad","turn"],gt))return We;var At=y.CSS[We+it];if(!C.und(At))return At;var Rt=100,Nt=document.createElement(Re.tagName),wn=Re.parentNode&&Re.parentNode!==document?Re.parentNode:document.body;wn.appendChild(Nt),Nt.style.position="absolute",Nt.style.width=Rt+it;var yn=Rt/Nt.offsetWidth;wn.removeChild(Nt);var Vt=yn*parseFloat(We);return y.CSS[We+it]=Vt,Vt}function nn(Re,We,it){if(We in Re.style){var gt=We.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),At=Re.style[We]||getComputedStyle(Re).getPropertyValue(gt)||"0";return it?on(Re,At,it):At}}function vn(Re,We){if(C.dom(Re)&&!C.inp(Re)&&(Xt(Re,We)||C.svg(Re)&&Re[We]))return"attribute";if(C.dom(Re)&&V(g,We))return"transform";if(C.dom(Re)&&We!=="transform"&&nn(Re,We))return"css";if(Re[We]!=null)return"object"}var Rn=/(\w+)\(([^)]*)\)/g;function zn(Re){if(C.dom(Re)){for(var We=Re.style.transform||"",it=new Map,gt;gt=Rn.exec(We);)it.set(gt[1],gt[2]);return it}}function Wn(Re,We,it,gt){var At=_(We,"scale")?1:0+nt(We),Rt=zn(Re).get(We)||At;return it&&(it.transforms.list.set(We,Rt),it.transforms.last=We),gt?on(Re,Rt,gt):Rt}function Ai(Re,We,it,gt){switch(vn(Re,We)){case"transform":return Wn(Re,We,gt,it);case"css":return nn(Re,We,it);case"attribute":return Xt(Re,We);default:return Re[We]||0}}var Ti=/^(\*=|\+=|-=)/;function Je(Re,We){var it=Ti.exec(Re);if(!it)return Re;var gt=Pt(Re)||0,At=parseFloat(We),Rt=parseFloat(Re.replace(it[0],""));switch(it[0][0]){case"+":return At+Rt+gt;case"-":return At-Rt+gt;case"*":return At*Rt+gt}}var we=/\s/g;function ge(Re,We){if(C.col(Re))return mt(Re);var it=Pt(Re),gt=it?Re.substr(0,Re.length-it.length):Re;return We&&!we.test(Re)?gt+We:gt}function _e(Re,We){return Math.sqrt(Math.pow(We.x-Re.x,2)+Math.pow(We.y-Re.y,2))}function Pe(Re){return Math.PI*2*Xt(Re,"r")}function Te(Re){return Xt(Re,"width")*2+Xt(Re,"height")*2}function He(Re){return _e({x:Xt(Re,"x1"),y:Xt(Re,"y1")},{x:Xt(Re,"x2"),y:Xt(Re,"y2")})}function Fe(Re){for(var We=Re.points,it=0,gt,At=0;At<We.numberOfItems;At++){var Rt=We.getItem(At);At>0&&(it+=_e(gt,Rt)),gt=Rt}return it}function Ue(Re){var We=Re.points;return Fe(Re)+_e(We.getItem(We.numberOfItems-1),We.getItem(0))}function Ae(Re){if(Re.getTotalLength)return Re.getTotalLength();switch(Re.tagName.toLowerCase()){case"circle":return Pe(Re);case"rect":return Te(Re);case"line":return He(Re);case"polyline":return Fe(Re);case"polygon":return Ue(Re)}}function Xe(Re){var We=Ae(Re);return Re.setAttribute("stroke-dasharray",We),We}function dt(Re){for(var We=Re.parentNode;C.svg(We)&&(We=We.parentNode,!!C.svg(We.parentNode)););return We}function ue(Re,We){var it=We||{},gt=it.el||dt(Re),At=gt.getBoundingClientRect(),Rt=Xt(gt,"viewBox"),Nt=At.width,wn=At.height,yn=it.viewBox||(Rt?Rt.split(" "):[0,0,Nt,wn]);return{el:gt,viewBox:yn,x:yn[0]/1,y:yn[1]/1,w:Nt/yn[2],h:wn/yn[3]}}function q(Re,We){var it=C.str(Re)?ne(Re)[0]:Re,gt=We||100;return function(At){return{property:At,el:it,svg:ue(it),totalLength:Ae(it)*(gt/100)}}}function re(Re,We){function it(wn){wn===void 0&&(wn=0);var yn=We+wn>=1?We+wn:0;return Re.el.getPointAtLength(yn)}var gt=ue(Re.el,Re.svg),At=it(),Rt=it(-1),Nt=it(1);switch(Re.property){case"x":return(At.x-gt.x)*gt.w;case"y":return(At.y-gt.y)*gt.h;case"angle":return Math.atan2(Nt.y-Rt.y,Nt.x-Rt.x)*180/Math.PI}}var ke=/-?\d*\.?\d+/g;function be(Re,We){var it=ge(C.pth(Re)?Re.totalLength:Re,We)+"";return{original:it,numbers:it.match(ke)?it.match(ke).map(Number):[0],strings:C.str(Re)||We?it.split(ke):[]}}function qe(Re){var We=Re?U(C.arr(Re)?Re.map(G):G(Re)):[];return F(We,function(it,gt,At){return At.indexOf(it)===gt})}function Qe(Re){var We=qe(Re);return We.map(function(it,gt){return{target:it,id:gt,total:We.length,transforms:{list:zn(it)}}})}var It=/^spring/;function Ot(Re,We){var it=K(We);if(It.test(it.easing)&&(it.duration=N(it.easing)),C.arr(Re)){var gt=Re.length,At=gt===2&&!C.obj(Re[0]);At?Re={value:Re}:C.fnc(We.duration)||(it.duration=We.duration/gt)}var Rt=C.arr(Re)?Re:[Re];return Rt.map(function(Nt,wn){var yn=C.obj(Nt)&&!C.pth(Nt)?Nt:{value:Nt};return C.und(yn.delay)&&(yn.delay=wn?0:We.delay),C.und(yn.endDelay)&&(yn.endDelay=wn===Rt.length-1?We.endDelay:0),yn}).map(function(Nt){return J(Nt,it)})}function Jt(Re){for(var We=F(U(Re.map(function(Rt){return Object.keys(Rt)})),function(Rt){return C.key(Rt)}).reduce(function(Rt,Nt){return Rt.indexOf(Nt)<0&&Rt.push(Nt),Rt},[]),it={},gt=function(Rt){var Nt=We[Rt];it[Nt]=Re.map(function(wn){var yn={};for(var Vt in wn)C.key(Vt)?Vt==Nt&&(yn.value=wn[Vt]):yn[Vt]=wn[Vt];return yn})},At=0;At<We.length;At++)gt(At);return it}function dn(Re,We){var it=[],gt=We.keyframes;gt&&(We=J(Jt(gt),We));for(var At in We)C.key(At)&&it.push({name:At,tweens:Ot(We[At],Re)});return it}function Sn(Re,We){var it={};for(var gt in Re){var At=Fn(Re[gt],We);C.arr(At)&&(At=At.map(function(Rt){return Fn(Rt,We)}),At.length===1&&(At=At[0])),it[gt]=At}return it.duration=parseFloat(it.duration),it.delay=parseFloat(it.delay),it}function er(Re,We){var it;return Re.tweens.map(function(gt){var At=Sn(gt,We),Rt=At.value,Nt=C.arr(Rt)?Rt[1]:Rt,wn=Pt(Nt),yn=Ai(We.target,Re.name,wn,We),Vt=it?it.to.original:yn,qn=C.arr(Rt)?Rt[0]:Vt,Un=Pt(qn)||Pt(yn),_n=wn||Un;return C.und(Nt)&&(Nt=Vt),At.from=be(qn,_n),At.to=be(Je(Nt,qn),_n),At.start=it?it.end:0,At.end=At.start+At.delay+At.duration+At.endDelay,At.easing=Y(At.easing,At.duration),At.isPath=C.pth(Rt),At.isColor=C.col(At.from.original),At.isColor&&(At.round=1),it=At,At})}var Pi={css:function(Re,We,it){return Re.style[We]=it},attribute:function(Re,We,it){return Re.setAttribute(We,it)},object:function(Re,We,it){return Re[We]=it},transform:function(Re,We,it,gt,At){if(gt.list.set(We,it),We===gt.last||At){var Rt="";gt.list.forEach(function(Nt,wn){Rt+=wn+"("+Nt+") "}),Re.style.transform=Rt}}};function Ir(Re,We){for(var it=Qe(Re),gt=0,At=it.length;gt<At;gt++){var Rt=it[gt];for(var Nt in We){var wn=Fn(We[Nt],Rt),yn=Rt.target,Vt=Pt(wn),qn=Ai(yn,Nt,Vt,Rt),Un=Vt||Pt(qn),_n=Je(ge(wn,Un),qn),Rr=vn(yn,Nt);Pi[Rr](yn,Nt,_n,Rt.transforms,!0)}}}function _i(Re,We){var it=vn(Re.target,We.name);if(it){var gt=er(We,Re),At=gt[gt.length-1];return{type:it,property:We.name,animatable:Re,tweens:gt,duration:At.end,delay:gt[0].delay,endDelay:At.endDelay}}}function Tn(Re,We){return F(U(Re.map(function(it){return We.map(function(gt){return _i(it,gt)})})),function(it){return!C.und(it)})}function Qt(Re,We){var it=Re.length,gt=function(Rt){return Rt.timelineOffset?Rt.timelineOffset:0},At={};return At.duration=it?Math.max.apply(Math,Re.map(function(Rt){return gt(Rt)+Rt.duration})):We.duration,At.delay=it?Math.min.apply(Math,Re.map(function(Rt){return gt(Rt)+Rt.delay})):We.delay,At.endDelay=it?At.duration-Math.max.apply(Math,Re.map(function(Rt){return gt(Rt)+Rt.duration-Rt.endDelay})):We.endDelay,At}var mn=0;function ri(Re){var We=W(f,Re),it=W(A,Re),gt=dn(it,Re),At=Qe(Re.targets),Rt=Tn(At,gt),Nt=Qt(Rt,it),wn=mn;return mn++,J(We,{id:wn,children:[],animatables:At,animations:Rt,duration:Nt.duration,delay:Nt.delay,endDelay:Nt.endDelay})}var Cn=[],li=[],bi,Li=function(){function Re(){bi=requestAnimationFrame(We)}function We(it){var gt=Cn.length;if(gt){for(var At=0;At<gt;){var Rt=Cn[At];if(!Rt.paused)Rt.tick(it);else{var Nt=Cn.indexOf(Rt);Nt>-1&&(Cn.splice(Nt,1),gt=Cn.length)}At++}Re()}else bi=cancelAnimationFrame(bi)}return Re}();function Ar(){if(document.hidden){for(var Re=0,We=Cn.length;Re<We;Re++)activeInstance[Re].pause();li=Cn.slice(0),Cn=[]}else for(var it=0,gt=li.length;it<gt;it++)li[it].play()}document.addEventListener("visibilitychange",Ar);function ar(Re){Re===void 0&&(Re={});var We=0,it=0,gt=0,At,Rt=0,Nt=null;function wn(){return window.Promise&&new Promise(function(bn){return Nt=bn})}var yn=wn(),Vt=ri(Re);function qn(){Vt.reversed=!Vt.reversed;for(var bn=0,ei=At.length;bn<ei;bn++)At[bn].reversed=Vt.reversed}function Un(bn){return Vt.reversed?Vt.duration-bn:bn}function _n(){We=0,it=Un(Vt.currentTime)*(1/ar.speed)}function Rr(bn,ei){ei&&ei.seek(bn-ei.timelineOffset)}function hi(bn){if(Vt.reversePlayback)for(var Wr=Rt;Wr--;)Rr(bn,At[Wr]);else for(var ei=0;ei<Rt;ei++)Rr(bn,At[ei])}function Ci(bn){for(var ei=0,Wr=Vt.animations,Mi=Wr.length;ei<Mi;){var ie=Wr[ei],ce=ie.animatable,ye=ie.tweens,Ie=ye.length-1,Ke=ye[Ie];Ie&&(Ke=F(ye,function(Ln){return bn<Ln.end})[0]||Ke);for(var et=v(bn-Ke.start-Ke.delay,0,Ke.duration)/Ke.duration,vt=isNaN(et)?1:Ke.easing(et),de=Ke.to.strings,fe=Ke.round,pe=[],xe=Ke.to.numbers.length,Ee=void 0,ct=0;ct<xe;ct++){var St=void 0,zt=Ke.to.numbers[ct],en=Ke.from.numbers[ct]||0;Ke.isPath?St=re(Ke.value,vt*zt):St=en+vt*(zt-en),fe&&(Ke.isColor&&ct>2||(St=Math.round(St*fe)/fe)),pe.push(St)}var An=de.length;if(!An)Ee=pe[0];else{Ee=de[0];for(var Wt=0;Wt<An;Wt++){de[Wt];var kn=de[Wt+1],ui=pe[Wt];isNaN(ui)||(kn?Ee+=ui+kn:Ee+=ui+" ")}}Pi[ie.type](ce.target,ie.property,Ee,ce.transforms),ie.currentValue=Ee,ei++}}function qi(bn){Vt[bn]&&!Vt.passThrough&&Vt[bn](Vt)}function Cr(){Vt.remaining&&Vt.remaining!==!0&&Vt.remaining--}function Jr(bn){var ei=Vt.duration,Wr=Vt.delay,Mi=ei-Vt.endDelay,ie=Un(bn);Vt.progress=v(ie/ei*100,0,100),Vt.reversePlayback=ie<Vt.currentTime,At&&hi(ie),!Vt.began&&Vt.currentTime>0&&(Vt.began=!0,qi("begin"),qi("loopBegin")),ie<=Wr&&Vt.currentTime!==0&&Ci(0),(ie>=Mi&&Vt.currentTime!==ei||!ei)&&Ci(ei),ie>Wr&&ie<Mi?(Vt.changeBegan||(Vt.changeBegan=!0,Vt.changeCompleted=!1,qi("changeBegin")),qi("change"),Ci(ie)):Vt.changeBegan&&(Vt.changeCompleted=!0,Vt.changeBegan=!1,qi("changeComplete")),Vt.currentTime=v(ie,0,ei),Vt.began&&qi("update"),bn>=ei&&(it=0,Cr(),Vt.remaining?(We=gt,qi("loopComplete"),qi("loopBegin"),Vt.direction==="alternate"&&qn()):(Vt.paused=!0,Vt.completed||(Vt.completed=!0,qi("loopComplete"),qi("complete"),"Promise"in window&&(Nt(),yn=wn()))))}return Vt.reset=function(){var bn=Vt.direction;Vt.passThrough=!1,Vt.currentTime=0,Vt.progress=0,Vt.paused=!0,Vt.began=!1,Vt.changeBegan=!1,Vt.completed=!1,Vt.changeCompleted=!1,Vt.reversePlayback=!1,Vt.reversed=bn==="reverse",Vt.remaining=Vt.loop,At=Vt.children,Rt=At.length;for(var ei=Rt;ei--;)Vt.children[ei].reset();(Vt.reversed&&Vt.loop!==!0||bn==="alternate"&&Vt.loop===1)&&Vt.remaining++,Ci(0)},Vt.set=function(bn,ei){return Ir(bn,ei),Vt},Vt.tick=function(bn){gt=bn,We||(We=gt),Jr((gt+(it-We))*ar.speed)},Vt.seek=function(bn){Jr(Un(bn))},Vt.pause=function(){Vt.paused=!0,_n()},Vt.play=function(){Vt.paused&&(Vt.paused=!1,Cn.push(Vt),_n(),bi||Li())},Vt.reverse=function(){qn(),_n()},Vt.restart=function(){Vt.reset(),Vt.play()},Vt.finished=yn,Vt.reset(),Vt.autoplay&&Vt.play(),Vt}function Ye(Re,We){for(var it=We.length;it--;)V(Re,We[it].animatable.target)&&We.splice(it,1)}function xt(Re){for(var We=qe(Re),it=Cn.length;it--;){var gt=Cn[it],At=gt.animations,Rt=gt.children;Ye(We,At);for(var Nt=Rt.length;Nt--;){var wn=Rt[Nt],yn=wn.animations;Ye(We,yn),!yn.length&&!wn.children.length&&Rt.splice(Nt,1)}!At.length&&!Rt.length&&gt.pause()}}function Mt(Re,We){We===void 0&&(We={});var it=We.direction||"normal",gt=We.easing?Y(We.easing):null,At=We.grid,Rt=We.axis,Nt=We.from||0,wn=Nt==="first",yn=Nt==="center",Vt=Nt==="last",qn=C.arr(Re),Un=parseFloat(qn?Re[0]:Re),_n=qn?parseFloat(Re[1]):0,Rr=Pt(qn?Re[1]:Re)||0,hi=We.start||0+(qn?Un:0),Ci=[],qi=0;return function(Cr,Jr,bn){if(wn&&(Nt=0),yn&&(Nt=(bn-1)/2),Vt&&(Nt=bn-1),!Ci.length){for(var ei=0;ei<bn;ei++){if(!At)Ci.push(Math.abs(Nt-ei));else{var Wr=yn?(At[0]-1)/2:Nt%At[0],Mi=yn?(At[1]-1)/2:Math.floor(Nt/At[0]),ie=ei%At[0],ce=Math.floor(ei/At[0]),ye=Wr-ie,Ie=Mi-ce,Ke=Math.sqrt(ye*ye+Ie*Ie);Rt==="x"&&(Ke=-ye),Rt==="y"&&(Ke=-Ie),Ci.push(Ke)}qi=Math.max.apply(Math,Ci)}gt&&(Ci=Ci.map(function(vt){return gt(vt/qi)*qi})),it==="reverse"&&(Ci=Ci.map(function(vt){return Rt?vt<0?vt*-1:-vt:Math.abs(qi-vt)}))}var et=qn?(_n-Un)/qi:Un;return hi+et*(Math.round(Ci[Jr]*100)/100)+Rr}}function Et(Re){Re===void 0&&(Re={});var We=ar(Re);return We.duration=0,We.add=function(it,gt){var At=Cn.indexOf(We),Rt=We.children;At>-1&&Cn.splice(At,1);function Nt(_n){_n.passThrough=!0}for(var wn=0;wn<Rt.length;wn++)Nt(Rt[wn]);var yn=J(it,W(A,Re));yn.targets=yn.targets||Re.targets;var Vt=We.duration;yn.autoplay=!1,yn.direction=We.direction,yn.timelineOffset=C.und(gt)?Vt:Je(gt,Vt),Nt(We),We.seek(yn.timelineOffset);var qn=ar(yn);Nt(qn),Rt.push(qn);var Un=Qt(Rt,Re);return We.delay=Un.delay,We.endDelay=Un.endDelay,We.duration=Un.duration,We.seek(0),We.reset(),We.autoplay&&We.play(),We},We}ar.version="3.0.0",ar.speed=1,ar.running=Cn,ar.remove=xt,ar.get=Ai,ar.set=Ir,ar.convertPx=on,ar.path=q,ar.setDashoffset=Xe,ar.stagger=Mt,ar.timeline=Et,ar.easing=Y,ar.penner=z,ar.random=function(Re,We){return Math.floor(Math.random()*(We-Re+1))+Re};const Bt=ar},"./node_modules/three-bmfont-text/index.js":(c,d,u)=>{var f=u("./node_modules/layout-bmfont-text/index.js");u("./node_modules/inherits/inherits_browser.js");var A=u("./node_modules/quad-indices/index.js"),g=u("./node_modules/three-buffer-vertex-data/index.js"),y=u("./node_modules/object-assign/index.js"),v=u("./node_modules/three-bmfont-text/lib/vertices.js"),_=u("./node_modules/three-bmfont-text/lib/utils.js");c.exports=function(m){return new x(m)};class x extends THREE.BufferGeometry{constructor(m){super(),typeof m=="string"&&(m={text:m}),this._opt=y({},m),m&&this.update(m)}update(m){if(typeof m=="string"&&(m={text:m}),m=y({},this._opt,m),!m.font)throw new TypeError("must specify a { font } in options");this.layout=f(m);var S=m.flipY!==!1,C=m.font,M=C.common.scaleW,T=C.common.scaleH,N=this.layout.glyphs.filter(function(Y){var ne=Y.data;return ne.width*ne.height>0});this.visibleGlyphs=N;var P=v.positions(N),k=v.uvs(N,M,T,S),D=A({clockwise:!0,type:"uint16",count:N.length});if(g.index(this,D,1,"uint16"),g.attr(this,"position",P,2),g.attr(this,"uv",k,2),!m.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(m.multipage){var z=v.pages(N);g.attr(this,"page",z,1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var m=this.attributes.position.array,S=this.attributes.position.itemSize;if(!m||!S||m.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}_.computeSphere(m,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var m=this.boundingBox,S=this.attributes.position.array,C=this.attributes.position.itemSize;if(!S||!C||S.length<2){m.makeEmpty();return}_.computeBox(S,m)}}},"./node_modules/three-bmfont-text/lib/utils.js":c=>{var d=2,u={min:[0,0],max:[0,0]};function f(A){var g=A.length/d;u.min[0]=A[0],u.min[1]=A[1],u.max[0]=A[0],u.max[1]=A[1];for(var y=0;y<g;y++){var v=A[y*d+0],_=A[y*d+1];u.min[0]=Math.min(v,u.min[0]),u.min[1]=Math.min(_,u.min[1]),u.max[0]=Math.max(v,u.max[0]),u.max[1]=Math.max(_,u.max[1])}}c.exports.computeBox=function(A,g){f(A),g.min.set(u.min[0],u.min[1],0),g.max.set(u.max[0],u.max[1],0)},c.exports.computeSphere=function(A,g){f(A);var y=u.min[0],v=u.min[1],_=u.max[0],x=u.max[1],b=_-y,m=x-v,S=Math.sqrt(b*b+m*m);g.center.set(y+b/2,v+m/2,0),g.radius=S/2}},"./node_modules/three-bmfont-text/lib/vertices.js":c=>{c.exports.pages=function(u){var f=new Float32Array(u.length*4*1),A=0;return u.forEach(function(g){var y=g.data.page||0;f[A++]=y,f[A++]=y,f[A++]=y,f[A++]=y}),f},c.exports.uvs=function(u,f,A,g){var y=new Float32Array(u.length*4*2),v=0;return u.forEach(function(_){var x=_.data,b=x.x+x.width,m=x.y+x.height,S=x.x/f,C=x.y/A,M=b/f,T=m/A;g&&(C=(A-x.y)/A,T=(A-m)/A),y[v++]=S,y[v++]=C,y[v++]=S,y[v++]=T,y[v++]=M,y[v++]=T,y[v++]=M,y[v++]=C}),y},c.exports.positions=function(u){var f=new Float32Array(u.length*4*2),A=0;return u.forEach(function(g){var y=g.data,v=g.position[0]+y.xoffset,_=g.position[1]+y.yoffset,x=y.width,b=y.height;f[A++]=v,f[A++]=_,f[A++]=v,f[A++]=_+b,f[A++]=v+x,f[A++]=_+b,f[A++]=v+x,f[A++]=_}),f}},"./node_modules/three-buffer-vertex-data/index.js":(c,d,u)=>{var f=u("./node_modules/flatten-vertex-data/index.js");c.exports.attr=g,c.exports.index=A;function A(v,_,x,b){typeof x!="number"&&(x=1),typeof b!="string"&&(b="uint16");var m=!v.index&&typeof v.setIndex!="function",S=m?v.getAttribute("index"):v.index,C=y(S,_,x,b);C&&(m?v.addAttribute("index",C):v.index=C)}function g(v,_,x,b,m){if(typeof b!="number"&&(b=3),typeof m!="string"&&(m="float32"),Array.isArray(x)&&Array.isArray(x[0])&&x[0].length!==b)throw new Error("Nested vertex array has unexpected size; expected "+b+" but found "+x[0].length);var S=v.getAttribute(_),C=y(S,x,b,m);v.setAttribute(_,C)}function y(v,_,x,b){return _=_||[],_=f(_,b),v=new THREE.BufferAttribute(_,x),v.itemSize=x,v.needsUpdate=!0,v}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(c,d,u){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(f,A){c.exports=A()})(this,function(){var f=typeof window<"u"?window:typeof u.g<"u"?u.g:typeof self<"u"?self:{};function A(P){return P&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P}function g(P,k){return k={exports:{}},P(k,k.exports),k.exports}var y=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},v=function(k,D){for(var z=0,Y=k.length;z<Y;z++)D[z]=k[z]},_=function(k,D){for(var z in D)D.hasOwnProperty(z)&&(k[z]=D[z]);return k},x=g(function(P,k){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(D,z){P.exports=z()})(f,function(){var D=function(ie,ce){if(!(ie instanceof ce))throw new TypeError("Cannot call a class as a function")},z=function(){function ie(ce,ye){for(var Ie=0;Ie<ye.length;Ie++){var Ke=ye[Ie];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty(ce,Ke.key,Ke)}}return function(ce,ye,Ie){return ye&&ie(ce.prototype,ye),Ie&&ie(ce,Ie),ce}}(),Y=function(){function ie(ce,ye){var Ie=[],Ke=!0,et=!1,vt=void 0;try{for(var de=ce[Symbol.iterator](),fe;!(Ke=(fe=de.next()).done)&&(Ie.push(fe.value),!(ye&&Ie.length===ye));Ke=!0);}catch(pe){et=!0,vt=pe}finally{try{!Ke&&de.return&&de.return()}finally{if(et)throw vt}}return Ie}return function(ce,ye){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return ie(ce,ye);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ne=.001,O=1,F=function(ce,ye){return"data:"+ce+","+encodeURIComponent(ye)},U=function(ce,ye,Ie){return ce+(ye-ce)*Ie},G=function(){var ie=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return ie}}(),V=function(){var ie=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return ie}}(),K=function(){var ie=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return ie}}(),W=function(){var ie=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return ie}}(),J=function(){var ie=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),ce=ie?parseInt(ie[1],10):null;return function(){return ce}}(),ee=function(){var ie=!1;return ie=G()&&K()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return ie}}(),he=function(){var ie=!1;if(J()===65){var ce=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(ce){var ye=ce[1].split("."),Ie=Y(ye,4);Ie[0],Ie[1];var Ke=Ie[2],et=Ie[3];ie=parseInt(Ke,10)===3325&&parseInt(et,10)<148}}return function(){return ie}}(),me=function(){var ie=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return ie}}(),Be=function(){var ce=window.orientation==90||window.orientation==-90;return me()?!ce:ce},Se=function(ce){return!(isNaN(ce)||ce<=ne||ce>O)},rt=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},Ge=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},st=function(ce){if(V())return!1;if(ce.requestFullscreen)ce.requestFullscreen();else if(ce.webkitRequestFullscreen)ce.webkitRequestFullscreen();else if(ce.mozRequestFullScreen)ce.mozRequestFullScreen();else if(ce.msRequestFullscreen)ce.msRequestFullscreen();else return!1;return!0},mt=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},Ft=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Pt=function(ce,ye,Ie,Ke){var et=ce.createShader(ce.VERTEX_SHADER);ce.shaderSource(et,ye),ce.compileShader(et);var vt=ce.createShader(ce.FRAGMENT_SHADER);ce.shaderSource(vt,Ie),ce.compileShader(vt);var de=ce.createProgram();ce.attachShader(de,et),ce.attachShader(de,vt);for(var fe in Ke)ce.bindAttribLocation(de,Ke[fe],fe);return ce.linkProgram(de),ce.deleteShader(et),ce.deleteShader(vt),de},nt=function(ce,ye){for(var Ie={},Ke=ce.getProgramParameter(ye,ce.ACTIVE_UNIFORMS),et="",vt=0;vt<Ke;vt++){var de=ce.getActiveUniform(ye,vt);et=de.name.replace("[0]",""),Ie[et]=ce.getUniformLocation(ye,et)}return Ie},Fn=function(ce,ye,Ie,Ke,et,vt,de){var fe=1/(ye-Ie),pe=1/(Ke-et),xe=1/(vt-de);return ce[0]=-2*fe,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=-2*pe,ce[6]=0,ce[7]=0,ce[8]=0,ce[9]=0,ce[10]=2*xe,ce[11]=0,ce[12]=(ye+Ie)*fe,ce[13]=(et+Ke)*pe,ce[14]=(de+vt)*xe,ce[15]=1,ce},Xt=function(){var ce=!1;return function(ye){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(ye)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(ye.substr(0,4)))&&(ce=!0)}(navigator.userAgent||navigator.vendor||window.opera),ce},on=function(ce,ye){for(var Ie in ye)ye.hasOwnProperty(Ie)&&(ce[Ie]=ye[Ie]);return ce},nn=function(ce){if(G()){var ye=ce.style.width,Ie=ce.style.height;ce.style.width=parseInt(ye)+1+"px",ce.style.height=parseInt(Ie)+"px",setTimeout(function(){ce.style.width=ye,ce.style.height=Ie},100)}window.canvas=ce},vn=function(){var ie=Math.PI/180,ce=Math.PI*.25;function ye(pe,xe,Ee,ct){var St=Math.tan(xe?xe.upDegrees*ie:ce),zt=Math.tan(xe?xe.downDegrees*ie:ce),en=Math.tan(xe?xe.leftDegrees*ie:ce),An=Math.tan(xe?xe.rightDegrees*ie:ce),Wt=2/(en+An),kn=2/(St+zt);return pe[0]=Wt,pe[1]=0,pe[2]=0,pe[3]=0,pe[4]=0,pe[5]=kn,pe[6]=0,pe[7]=0,pe[8]=-((en-An)*Wt*.5),pe[9]=(St-zt)*kn*.5,pe[10]=ct/(Ee-ct),pe[11]=-1,pe[12]=0,pe[13]=0,pe[14]=ct*Ee/(Ee-ct),pe[15]=0,pe}function Ie(pe,xe,Ee){var ct=xe[0],St=xe[1],zt=xe[2],en=xe[3],An=ct+ct,Wt=St+St,kn=zt+zt,ui=ct*An,Ln=ct*Wt,di=ct*kn,Kn=St*Wt,vi=St*kn,Ri=zt*kn,ji=en*An,Di=en*Wt,Er=en*kn;return pe[0]=1-(Kn+Ri),pe[1]=Ln+Er,pe[2]=di-Di,pe[3]=0,pe[4]=Ln-Er,pe[5]=1-(ui+Ri),pe[6]=vi+ji,pe[7]=0,pe[8]=di+Di,pe[9]=vi-ji,pe[10]=1-(ui+Kn),pe[11]=0,pe[12]=Ee[0],pe[13]=Ee[1],pe[14]=Ee[2],pe[15]=1,pe}function Ke(pe,xe,Ee){var ct=Ee[0],St=Ee[1],zt=Ee[2],en,An,Wt,kn,ui,Ln,di,Kn,vi,Ri,ji,Di;return xe===pe?(pe[12]=xe[0]*ct+xe[4]*St+xe[8]*zt+xe[12],pe[13]=xe[1]*ct+xe[5]*St+xe[9]*zt+xe[13],pe[14]=xe[2]*ct+xe[6]*St+xe[10]*zt+xe[14],pe[15]=xe[3]*ct+xe[7]*St+xe[11]*zt+xe[15]):(en=xe[0],An=xe[1],Wt=xe[2],kn=xe[3],ui=xe[4],Ln=xe[5],di=xe[6],Kn=xe[7],vi=xe[8],Ri=xe[9],ji=xe[10],Di=xe[11],pe[0]=en,pe[1]=An,pe[2]=Wt,pe[3]=kn,pe[4]=ui,pe[5]=Ln,pe[6]=di,pe[7]=Kn,pe[8]=vi,pe[9]=Ri,pe[10]=ji,pe[11]=Di,pe[12]=en*ct+ui*St+vi*zt+xe[12],pe[13]=An*ct+Ln*St+Ri*zt+xe[13],pe[14]=Wt*ct+di*St+ji*zt+xe[14],pe[15]=kn*ct+Kn*St+Di*zt+xe[15]),pe}function et(pe,xe){var Ee=xe[0],ct=xe[1],St=xe[2],zt=xe[3],en=xe[4],An=xe[5],Wt=xe[6],kn=xe[7],ui=xe[8],Ln=xe[9],di=xe[10],Kn=xe[11],vi=xe[12],Ri=xe[13],ji=xe[14],Di=xe[15],Er=Ee*An-ct*en,$i=Ee*Wt-St*en,es=Ee*kn-zt*en,Ui=ct*Wt-St*An,_r=ct*kn-zt*An,ur=St*kn-zt*Wt,tl=ui*Ri-Ln*vi,tc=ui*ji-di*vi,nc=ui*Di-Kn*vi,ic=Ln*ji-di*Ri,rc=Ln*Di-Kn*Ri,sc=di*Di-Kn*ji,ds=Er*sc-$i*rc+es*ic+Ui*nc-_r*tc+ur*tl;return ds?(ds=1/ds,pe[0]=(An*sc-Wt*rc+kn*ic)*ds,pe[1]=(St*rc-ct*sc-zt*ic)*ds,pe[2]=(Ri*ur-ji*_r+Di*Ui)*ds,pe[3]=(di*_r-Ln*ur-Kn*Ui)*ds,pe[4]=(Wt*nc-en*sc-kn*tc)*ds,pe[5]=(Ee*sc-St*nc+zt*tc)*ds,pe[6]=(ji*es-vi*ur-Di*$i)*ds,pe[7]=(ui*ur-di*es+Kn*$i)*ds,pe[8]=(en*rc-An*nc+kn*tl)*ds,pe[9]=(ct*nc-Ee*rc-zt*tl)*ds,pe[10]=(vi*_r-Ri*es+Di*Er)*ds,pe[11]=(Ln*es-ui*_r-Kn*Er)*ds,pe[12]=(An*tc-en*ic-Wt*tl)*ds,pe[13]=(Ee*ic-ct*tc+St*tl)*ds,pe[14]=(Ri*$i-vi*Ui-ji*Er)*ds,pe[15]=(ui*Ui-Ln*$i+di*Er)*ds,pe):null}var vt=new Float32Array([0,0,0,1]),de=new Float32Array([0,0,0]);function fe(pe,xe,Ee,ct,St,zt){ye(pe,ct||null,zt.depthNear,zt.depthFar);var en=Ee.orientation||vt,An=Ee.position||de;Ie(xe,en,An),St&&Ke(xe,xe,St),et(xe,xe)}return function(pe,xe,Ee){return!pe||!xe?!1:(pe.pose=xe,pe.timestamp=xe.timestamp,fe(pe.leftProjectionMatrix,pe.leftViewMatrix,xe,Ee._getFieldOfView("left"),Ee._getEyeOffset("left"),Ee),fe(pe.rightProjectionMatrix,pe.rightViewMatrix,xe,Ee._getFieldOfView("right"),Ee._getEyeOffset("right"),Ee),!0)}}(),Rn=function(){var ce=window.self!==window.top,ye=zn(document.referrer),Ie=zn(window.location.href);return ce&&ye!==Ie},zn=function(ce){var ye,Ie=ce.indexOf("://");Ie!==-1?ye=Ie+3:ye=0;var Ke=ce.indexOf("/",ye);return Ke===-1&&(Ke=ce.length),ce.substring(0,Ke)},Wn=function(ce){if(ce.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var ye=2*Math.acos(ce.w);return ye},Ai=function(){var ie={};return function(ce,ye){ie[ce]===void 0&&(console.warn("webvr-polyfill: "+ye),ie[ce]=!0)}}(),Ti=function(ce,ye){var Ie=ye?"Please use "+ye+" instead.":"";Ai(ce,ce+" has been deprecated. This may not work on native WebVR displays. "+Ie)};function Je(ie,ce,ye){if(!ce){ye(ie);return}for(var Ie=[],Ke=null,et=0;et<ce.length;++et){var vt=ce[et];switch(vt){case ie.TEXTURE_BINDING_2D:case ie.TEXTURE_BINDING_CUBE_MAP:var de=ce[++et];if(de<ie.TEXTURE0||de>ie.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),Ie.push(null,null);break}Ke||(Ke=ie.getParameter(ie.ACTIVE_TEXTURE)),ie.activeTexture(de),Ie.push(ie.getParameter(vt),null);break;case ie.ACTIVE_TEXTURE:Ke=ie.getParameter(ie.ACTIVE_TEXTURE),Ie.push(null);break;default:Ie.push(ie.getParameter(vt));break}}ye(ie);for(var et=0;et<ce.length;++et){var vt=ce[et],fe=Ie[et];switch(vt){case ie.ACTIVE_TEXTURE:break;case ie.ARRAY_BUFFER_BINDING:ie.bindBuffer(ie.ARRAY_BUFFER,fe);break;case ie.COLOR_CLEAR_VALUE:ie.clearColor(fe[0],fe[1],fe[2],fe[3]);break;case ie.COLOR_WRITEMASK:ie.colorMask(fe[0],fe[1],fe[2],fe[3]);break;case ie.CURRENT_PROGRAM:ie.useProgram(fe);break;case ie.ELEMENT_ARRAY_BUFFER_BINDING:ie.bindBuffer(ie.ELEMENT_ARRAY_BUFFER,fe);break;case ie.FRAMEBUFFER_BINDING:ie.bindFramebuffer(ie.FRAMEBUFFER,fe);break;case ie.RENDERBUFFER_BINDING:ie.bindRenderbuffer(ie.RENDERBUFFER,fe);break;case ie.TEXTURE_BINDING_2D:var de=ce[++et];if(de<ie.TEXTURE0||de>ie.TEXTURE31)break;ie.activeTexture(de),ie.bindTexture(ie.TEXTURE_2D,fe);break;case ie.TEXTURE_BINDING_CUBE_MAP:var de=ce[++et];if(de<ie.TEXTURE0||de>ie.TEXTURE31)break;ie.activeTexture(de),ie.bindTexture(ie.TEXTURE_CUBE_MAP,fe);break;case ie.VIEWPORT:ie.viewport(fe[0],fe[1],fe[2],fe[3]);break;case ie.BLEND:case ie.CULL_FACE:case ie.DEPTH_TEST:case ie.SCISSOR_TEST:case ie.STENCIL_TEST:fe?ie.enable(vt):ie.disable(vt);break;default:console.log("No GL restore behavior for 0x"+vt.toString(16));break}Ke&&ie.activeTexture(Ke)}}var we=Je,ge=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),_e=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function Pe(ie,ce,ye,Ie){this.gl=ie,this.cardboardUI=ce,this.bufferScale=ye,this.dirtySubmitFrameBindings=Ie,this.ctxAttribs=ie.getContextAttributes(),this.instanceExt=ie.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=ie.drawingBufferWidth,this.bufferHeight=ie.drawingBufferHeight,this.realBindFramebuffer=ie.bindFramebuffer,this.realEnable=ie.enable,this.realDisable=ie.disable,this.realColorMask=ie.colorMask,this.realClearColor=ie.clearColor,this.realViewport=ie.viewport,G()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(ie.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(ie.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Pt(ie,ge,_e,this.attribs),this.uniforms=nt(ie,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=ie.createBuffer(),this.indexBuffer=ie.createBuffer(),this.indexCount=0,this.renderTarget=ie.createTexture(),this.framebuffer=ie.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=ie.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=ie.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=ie.createRenderbuffer()),this.patch(),this.onResize()}Pe.prototype.destroy=function(){var ie=this.gl;this.unpatch(),ie.deleteProgram(this.program),ie.deleteBuffer(this.vertexBuffer),ie.deleteBuffer(this.indexBuffer),ie.deleteTexture(this.renderTarget),ie.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&ie.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&ie.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&ie.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Pe.prototype.onResize=function(){var ie=this.gl,ce=this,ye=[ie.RENDERBUFFER_BINDING,ie.TEXTURE_BINDING_2D,ie.TEXTURE0];we(ie,ye,function(Ie){ce.realBindFramebuffer.call(Ie,Ie.FRAMEBUFFER,null),ce.scissorTest&&ce.realDisable.call(Ie,Ie.SCISSOR_TEST),ce.realColorMask.call(Ie,!0,!0,!0,!0),ce.realViewport.call(Ie,0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight),ce.realClearColor.call(Ie,0,0,0,1),Ie.clear(Ie.COLOR_BUFFER_BIT),ce.realBindFramebuffer.call(Ie,Ie.FRAMEBUFFER,ce.framebuffer),Ie.bindTexture(Ie.TEXTURE_2D,ce.renderTarget),Ie.texImage2D(Ie.TEXTURE_2D,0,ce.ctxAttribs.alpha?Ie.RGBA:Ie.RGB,ce.bufferWidth,ce.bufferHeight,0,ce.ctxAttribs.alpha?Ie.RGBA:Ie.RGB,Ie.UNSIGNED_BYTE,null),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_2D,ce.renderTarget,0),ce.ctxAttribs.depth&&ce.ctxAttribs.stencil?(Ie.bindRenderbuffer(Ie.RENDERBUFFER,ce.depthStencilBuffer),Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.DEPTH_STENCIL,ce.bufferWidth,ce.bufferHeight),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_STENCIL_ATTACHMENT,Ie.RENDERBUFFER,ce.depthStencilBuffer)):ce.ctxAttribs.depth?(Ie.bindRenderbuffer(Ie.RENDERBUFFER,ce.depthBuffer),Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.DEPTH_COMPONENT16,ce.bufferWidth,ce.bufferHeight),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_ATTACHMENT,Ie.RENDERBUFFER,ce.depthBuffer)):ce.ctxAttribs.stencil&&(Ie.bindRenderbuffer(Ie.RENDERBUFFER,ce.stencilBuffer),Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.STENCIL_INDEX8,ce.bufferWidth,ce.bufferHeight),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.STENCIL_ATTACHMENT,Ie.RENDERBUFFER,ce.stencilBuffer)),!Ie.checkFramebufferStatus(Ie.FRAMEBUFFER)===Ie.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),ce.realBindFramebuffer.call(Ie,Ie.FRAMEBUFFER,ce.lastBoundFramebuffer),ce.scissorTest&&ce.realEnable.call(Ie,Ie.SCISSOR_TEST),ce.realColorMask.apply(Ie,ce.colorMask),ce.realViewport.apply(Ie,ce.viewport),ce.realClearColor.apply(Ie,ce.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},Pe.prototype.patch=function(){if(!this.isPatched){var ie=this,ce=this.gl.canvas,ye=this.gl;G()||(ce.width=rt()*this.bufferScale,ce.height=Ge()*this.bufferScale,Object.defineProperty(ce,"width",{configurable:!0,enumerable:!0,get:function(){return ie.bufferWidth},set:function(Ke){ie.bufferWidth=Ke,ie.realCanvasWidth.set.call(ce,Ke),ie.onResize()}}),Object.defineProperty(ce,"height",{configurable:!0,enumerable:!0,get:function(){return ie.bufferHeight},set:function(Ke){ie.bufferHeight=Ke,ie.realCanvasHeight.set.call(ce,Ke),ie.onResize()}})),this.lastBoundFramebuffer=ye.getParameter(ye.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(ye.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(Ie,Ke){ie.lastBoundFramebuffer=Ke||ie.framebuffer,ie.realBindFramebuffer.call(ye,Ie,ie.lastBoundFramebuffer)},this.cullFace=ye.getParameter(ye.CULL_FACE),this.depthTest=ye.getParameter(ye.DEPTH_TEST),this.blend=ye.getParameter(ye.BLEND),this.scissorTest=ye.getParameter(ye.SCISSOR_TEST),this.stencilTest=ye.getParameter(ye.STENCIL_TEST),ye.enable=function(Ie){switch(Ie){case ye.CULL_FACE:ie.cullFace=!0;break;case ye.DEPTH_TEST:ie.depthTest=!0;break;case ye.BLEND:ie.blend=!0;break;case ye.SCISSOR_TEST:ie.scissorTest=!0;break;case ye.STENCIL_TEST:ie.stencilTest=!0;break}ie.realEnable.call(ye,Ie)},ye.disable=function(Ie){switch(Ie){case ye.CULL_FACE:ie.cullFace=!1;break;case ye.DEPTH_TEST:ie.depthTest=!1;break;case ye.BLEND:ie.blend=!1;break;case ye.SCISSOR_TEST:ie.scissorTest=!1;break;case ye.STENCIL_TEST:ie.stencilTest=!1;break}ie.realDisable.call(ye,Ie)},this.colorMask=ye.getParameter(ye.COLOR_WRITEMASK),ye.colorMask=function(Ie,Ke,et,vt){ie.colorMask[0]=Ie,ie.colorMask[1]=Ke,ie.colorMask[2]=et,ie.colorMask[3]=vt,ie.realColorMask.call(ye,Ie,Ke,et,vt)},this.clearColor=ye.getParameter(ye.COLOR_CLEAR_VALUE),ye.clearColor=function(Ie,Ke,et,vt){ie.clearColor[0]=Ie,ie.clearColor[1]=Ke,ie.clearColor[2]=et,ie.clearColor[3]=vt,ie.realClearColor.call(ye,Ie,Ke,et,vt)},this.viewport=ye.getParameter(ye.VIEWPORT),ye.viewport=function(Ie,Ke,et,vt){ie.viewport[0]=Ie,ie.viewport[1]=Ke,ie.viewport[2]=et,ie.viewport[3]=vt,ie.realViewport.call(ye,Ie,Ke,et,vt)},this.isPatched=!0,nn(ce)}},Pe.prototype.unpatch=function(){if(this.isPatched){var ie=this.gl,ce=this.gl.canvas;G()||(Object.defineProperty(ce,"width",this.realCanvasWidth),Object.defineProperty(ce,"height",this.realCanvasHeight)),ce.width=this.bufferWidth,ce.height=this.bufferHeight,ie.bindFramebuffer=this.realBindFramebuffer,ie.enable=this.realEnable,ie.disable=this.realDisable,ie.colorMask=this.realColorMask,ie.clearColor=this.realClearColor,ie.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&ie.bindFramebuffer(ie.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){nn(ce)},1)}},Pe.prototype.setTextureBounds=function(ie,ce){ie||(ie=[0,0,.5,1]),ce||(ce=[.5,0,.5,1]),this.viewportOffsetScale[0]=ie[0],this.viewportOffsetScale[1]=ie[1],this.viewportOffsetScale[2]=ie[2],this.viewportOffsetScale[3]=ie[3],this.viewportOffsetScale[4]=ce[0],this.viewportOffsetScale[5]=ce[1],this.viewportOffsetScale[6]=ce[2],this.viewportOffsetScale[7]=ce[3]},Pe.prototype.submitFrame=function(){var ie=this.gl,ce=this,ye=[];if(this.dirtySubmitFrameBindings||ye.push(ie.CURRENT_PROGRAM,ie.ARRAY_BUFFER_BINDING,ie.ELEMENT_ARRAY_BUFFER_BINDING,ie.TEXTURE_BINDING_2D,ie.TEXTURE0),we(ie,ye,function(Ke){ce.realBindFramebuffer.call(Ke,Ke.FRAMEBUFFER,null);var et=0,vt=0;ce.instanceExt&&(et=Ke.getVertexAttrib(ce.attribs.position,ce.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),vt=Ke.getVertexAttrib(ce.attribs.texCoord,ce.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),ce.cullFace&&ce.realDisable.call(Ke,Ke.CULL_FACE),ce.depthTest&&ce.realDisable.call(Ke,Ke.DEPTH_TEST),ce.blend&&ce.realDisable.call(Ke,Ke.BLEND),ce.scissorTest&&ce.realDisable.call(Ke,Ke.SCISSOR_TEST),ce.stencilTest&&ce.realDisable.call(Ke,Ke.STENCIL_TEST),ce.realColorMask.call(Ke,!0,!0,!0,!0),ce.realViewport.call(Ke,0,0,Ke.drawingBufferWidth,Ke.drawingBufferHeight),(ce.ctxAttribs.alpha||G())&&(ce.realClearColor.call(Ke,0,0,0,1),Ke.clear(Ke.COLOR_BUFFER_BIT)),Ke.useProgram(ce.program),Ke.bindBuffer(Ke.ELEMENT_ARRAY_BUFFER,ce.indexBuffer),Ke.bindBuffer(Ke.ARRAY_BUFFER,ce.vertexBuffer),Ke.enableVertexAttribArray(ce.attribs.position),Ke.enableVertexAttribArray(ce.attribs.texCoord),Ke.vertexAttribPointer(ce.attribs.position,2,Ke.FLOAT,!1,20,0),Ke.vertexAttribPointer(ce.attribs.texCoord,3,Ke.FLOAT,!1,20,8),ce.instanceExt&&(et!=0&&ce.instanceExt.vertexAttribDivisorANGLE(ce.attribs.position,0),vt!=0&&ce.instanceExt.vertexAttribDivisorANGLE(ce.attribs.texCoord,0)),Ke.activeTexture(Ke.TEXTURE0),Ke.uniform1i(ce.uniforms.diffuse,0),Ke.bindTexture(Ke.TEXTURE_2D,ce.renderTarget),Ke.uniform4fv(ce.uniforms.viewportOffsetScale,ce.viewportOffsetScale),Ke.drawElements(Ke.TRIANGLES,ce.indexCount,Ke.UNSIGNED_SHORT,0),ce.cardboardUI&&ce.cardboardUI.renderNoState(),ce.realBindFramebuffer.call(ce.gl,Ke.FRAMEBUFFER,ce.framebuffer),ce.ctxAttribs.preserveDrawingBuffer||(ce.realClearColor.call(Ke,0,0,0,0),Ke.clear(Ke.COLOR_BUFFER_BIT)),ce.dirtySubmitFrameBindings||ce.realBindFramebuffer.call(Ke,Ke.FRAMEBUFFER,ce.lastBoundFramebuffer),ce.cullFace&&ce.realEnable.call(Ke,Ke.CULL_FACE),ce.depthTest&&ce.realEnable.call(Ke,Ke.DEPTH_TEST),ce.blend&&ce.realEnable.call(Ke,Ke.BLEND),ce.scissorTest&&ce.realEnable.call(Ke,Ke.SCISSOR_TEST),ce.stencilTest&&ce.realEnable.call(Ke,Ke.STENCIL_TEST),ce.realColorMask.apply(Ke,ce.colorMask),ce.realViewport.apply(Ke,ce.viewport),(ce.ctxAttribs.alpha||!ce.ctxAttribs.preserveDrawingBuffer)&&ce.realClearColor.apply(Ke,ce.clearColor),ce.instanceExt&&(et!=0&&ce.instanceExt.vertexAttribDivisorANGLE(ce.attribs.position,et),vt!=0&&ce.instanceExt.vertexAttribDivisorANGLE(ce.attribs.texCoord,vt))}),G()){var Ie=ie.canvas;(Ie.width!=ce.bufferWidth||Ie.height!=ce.bufferHeight)&&(ce.bufferWidth=Ie.width,ce.bufferHeight=Ie.height,ce.onResize())}},Pe.prototype.updateDeviceInfo=function(ie){var ce=this.gl,ye=this,Ie=[ce.ARRAY_BUFFER_BINDING,ce.ELEMENT_ARRAY_BUFFER_BINDING];we(ce,Ie,function(Ke){var et=ye.computeMeshVertices_(ye.meshWidth,ye.meshHeight,ie);if(Ke.bindBuffer(Ke.ARRAY_BUFFER,ye.vertexBuffer),Ke.bufferData(Ke.ARRAY_BUFFER,et,Ke.STATIC_DRAW),!ye.indexCount){var vt=ye.computeMeshIndices_(ye.meshWidth,ye.meshHeight);Ke.bindBuffer(Ke.ELEMENT_ARRAY_BUFFER,ye.indexBuffer),Ke.bufferData(Ke.ELEMENT_ARRAY_BUFFER,vt,Ke.STATIC_DRAW),ye.indexCount=vt.length}})},Pe.prototype.computeMeshVertices_=function(ie,ce,ye){for(var Ie=new Float32Array(2*ie*ce*5),Ke=ye.getLeftEyeVisibleTanAngles(),et=ye.getLeftEyeNoLensTanAngles(),vt=ye.getLeftEyeVisibleScreenRect(et),de=0,fe=0;fe<2;fe++){for(var pe=0;pe<ce;pe++)for(var xe=0;xe<ie;xe++,de++){var Ee=xe/(ie-1),ct=pe/(ce-1),St=Ee,zt=ct,en=U(Ke[0],Ke[2],Ee),An=U(Ke[3],Ke[1],ct),Wt=Math.sqrt(en*en+An*An),kn=ye.distortion.distortInverse(Wt),ui=en*kn/Wt,Ln=An*kn/Wt;Ee=(ui-et[0])/(et[2]-et[0]),ct=(Ln-et[3])/(et[1]-et[3]),Ee=(vt.x+Ee*vt.width-.5)*2,ct=(vt.y+ct*vt.height-.5)*2,Ie[de*5+0]=Ee,Ie[de*5+1]=ct,Ie[de*5+2]=St,Ie[de*5+3]=zt,Ie[de*5+4]=fe}var di=Ke[2]-Ke[0];Ke[0]=-(di+Ke[0]),Ke[2]=di-Ke[2],di=et[2]-et[0],et[0]=-(di+et[0]),et[2]=di-et[2],vt.x=1-(vt.x+vt.width)}return Ie},Pe.prototype.computeMeshIndices_=function(ie,ce){for(var ye=new Uint16Array(2*(ie-1)*(ce-1)*6),Ie=ie/2,Ke=ce/2,et=0,vt=0,de=0;de<2;de++)for(var fe=0;fe<ce;fe++)for(var pe=0;pe<ie;pe++,et++)pe==0||fe==0||(pe<=Ie==fe<=Ke?(ye[vt++]=et,ye[vt++]=et-ie-1,ye[vt++]=et-ie,ye[vt++]=et-ie-1,ye[vt++]=et,ye[vt++]=et-1):(ye[vt++]=et-1,ye[vt++]=et-ie,ye[vt++]=et,ye[vt++]=et-ie,ye[vt++]=et-1,ye[vt++]=et-ie-1));return ye},Pe.prototype.getOwnPropertyDescriptor_=function(ie,ce){var ye=Object.getOwnPropertyDescriptor(ie,ce);return(ye.get===void 0||ye.set===void 0)&&(ye.configurable=!0,ye.enumerable=!0,ye.get=function(){return this.getAttribute(ce)},ye.set=function(Ie){this.setAttribute(ce,Ie)}),ye};var Te=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),He=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),Fe=Math.PI/180,Ue=60,Ae=12,Xe=20,dt=1,ue=.75,q=.3125,re=4,ke=28,be=1.5;function qe(ie){this.gl=ie,this.attribs={position:0},this.program=Pt(ie,Te,He,this.attribs),this.uniforms=nt(ie,this.program),this.vertexBuffer=ie.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}qe.prototype.destroy=function(){var ie=this.gl;this.listener&&ie.canvas.removeEventListener("click",this.listener,!1),ie.deleteProgram(this.program),ie.deleteBuffer(this.vertexBuffer)},qe.prototype.listen=function(ie,ce){var ye=this.gl.canvas;this.listener=function(Ie){var Ke=ye.clientWidth/2,et=ke*be;Ie.clientX>Ke-et&&Ie.clientX<Ke+et&&Ie.clientY>ye.clientHeight-et?ie(Ie):Ie.clientX<et&&Ie.clientY<et&&ce(Ie)},ye.addEventListener("click",this.listener,!1)},qe.prototype.onResize=function(){var ie=this.gl,ce=this,ye=[ie.ARRAY_BUFFER_BINDING];we(ie,ye,function(Ie){var Ke=[],et=Ie.drawingBufferWidth/2,vt=Math.max(screen.width,screen.height)*window.devicePixelRatio,de=Ie.drawingBufferWidth/vt,fe=de*window.devicePixelRatio,pe=re*fe/2,xe=ke*be*fe,Ee=ke*fe/2,ct=(ke*be-ke)*fe;Ke.push(et-pe,xe),Ke.push(et-pe,Ie.drawingBufferHeight),Ke.push(et+pe,xe),Ke.push(et+pe,Ie.drawingBufferHeight),ce.gearOffset=Ke.length/2;function St(kn,ui){var Ln=(90-kn)*Fe,di=Math.cos(Ln),Kn=Math.sin(Ln);Ke.push(q*di*Ee+et,q*Kn*Ee+Ee),Ke.push(ui*di*Ee+et,ui*Kn*Ee+Ee)}for(var zt=0;zt<=6;zt++){var en=zt*Ue;St(en,dt),St(en+Ae,dt),St(en+Xe,ue),St(en+(Ue-Xe),ue),St(en+(Ue-Ae),dt)}ce.gearVertexCount=Ke.length/2-ce.gearOffset,ce.arrowOffset=Ke.length/2;function An(kn,ui){Ke.push(ct+kn,Ie.drawingBufferHeight-ct-ui)}var Wt=pe/Math.sin(45*Fe);An(0,Ee),An(Ee,0),An(Ee+Wt,Wt),An(Wt,Ee+Wt),An(Wt,Ee-Wt),An(0,Ee),An(Ee,Ee*2),An(Ee+Wt,Ee*2-Wt),An(Wt,Ee-Wt),An(0,Ee),An(Wt,Ee-pe),An(ke*fe,Ee-pe),An(Wt,Ee+pe),An(ke*fe,Ee+pe),ce.arrowVertexCount=Ke.length/2-ce.arrowOffset,Ie.bindBuffer(Ie.ARRAY_BUFFER,ce.vertexBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,new Float32Array(Ke),Ie.STATIC_DRAW)})},qe.prototype.render=function(){var ie=this.gl,ce=this,ye=[ie.CULL_FACE,ie.DEPTH_TEST,ie.BLEND,ie.SCISSOR_TEST,ie.STENCIL_TEST,ie.COLOR_WRITEMASK,ie.VIEWPORT,ie.CURRENT_PROGRAM,ie.ARRAY_BUFFER_BINDING];we(ie,ye,function(Ie){Ie.disable(Ie.CULL_FACE),Ie.disable(Ie.DEPTH_TEST),Ie.disable(Ie.BLEND),Ie.disable(Ie.SCISSOR_TEST),Ie.disable(Ie.STENCIL_TEST),Ie.colorMask(!0,!0,!0,!0),Ie.viewport(0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight),ce.renderNoState()})},qe.prototype.renderNoState=function(){var ie=this.gl;ie.useProgram(this.program),ie.bindBuffer(ie.ARRAY_BUFFER,this.vertexBuffer),ie.enableVertexAttribArray(this.attribs.position),ie.vertexAttribPointer(this.attribs.position,2,ie.FLOAT,!1,8,0),ie.uniform4f(this.uniforms.color,1,1,1,1),Fn(this.projMat,0,ie.drawingBufferWidth,0,ie.drawingBufferHeight,.1,1024),ie.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),ie.drawArrays(ie.TRIANGLE_STRIP,0,4),ie.drawArrays(ie.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),ie.drawArrays(ie.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function Qe(ie){this.coefficients=ie}Qe.prototype.distortInverse=function(ie){for(var ce=0,ye=1,Ie=ie-this.distort(ce);Math.abs(ye-ce)>1e-4;){var Ke=ie-this.distort(ye),et=ye-Ke*((ye-ce)/(Ke-Ie));ce=ye,ye=et,Ie=Ke}return ye},Qe.prototype.distort=function(ie){for(var ce=ie*ie,ye=0,Ie=0;Ie<this.coefficients.length;Ie++)ye=ce*(ye+this.coefficients[Ie]);return(ye+1)*ie};var It=Math.PI/180,Ot=180/Math.PI,Jt=function(ce,ye,Ie){this.x=ce||0,this.y=ye||0,this.z=Ie||0};Jt.prototype={constructor:Jt,set:function(ce,ye,Ie){return this.x=ce,this.y=ye,this.z=Ie,this},copy:function(ce){return this.x=ce.x,this.y=ce.y,this.z=ce.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var ce=this.length();if(ce!==0){var ye=1/ce;this.multiplyScalar(ye)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(ce){this.x*=ce,this.y*=ce,this.z*=ce},applyQuaternion:function(ce){var ye=this.x,Ie=this.y,Ke=this.z,et=ce.x,vt=ce.y,de=ce.z,fe=ce.w,pe=fe*ye+vt*Ke-de*Ie,xe=fe*Ie+de*ye-et*Ke,Ee=fe*Ke+et*Ie-vt*ye,ct=-et*ye-vt*Ie-de*Ke;return this.x=pe*fe+ct*-et+xe*-de-Ee*-vt,this.y=xe*fe+ct*-vt+Ee*-et-pe*-de,this.z=Ee*fe+ct*-de+pe*-vt-xe*-et,this},dot:function(ce){return this.x*ce.x+this.y*ce.y+this.z*ce.z},crossVectors:function(ce,ye){var Ie=ce.x,Ke=ce.y,et=ce.z,vt=ye.x,de=ye.y,fe=ye.z;return this.x=Ke*fe-et*de,this.y=et*vt-Ie*fe,this.z=Ie*de-Ke*vt,this}};var dn=function(ce,ye,Ie,Ke){this.x=ce||0,this.y=ye||0,this.z=Ie||0,this.w=Ke!==void 0?Ke:1};dn.prototype={constructor:dn,set:function(ce,ye,Ie,Ke){return this.x=ce,this.y=ye,this.z=Ie,this.w=Ke,this},copy:function(ce){return this.x=ce.x,this.y=ce.y,this.z=ce.z,this.w=ce.w,this},setFromEulerXYZ:function(ce,ye,Ie){var Ke=Math.cos(ce/2),et=Math.cos(ye/2),vt=Math.cos(Ie/2),de=Math.sin(ce/2),fe=Math.sin(ye/2),pe=Math.sin(Ie/2);return this.x=de*et*vt+Ke*fe*pe,this.y=Ke*fe*vt-de*et*pe,this.z=Ke*et*pe+de*fe*vt,this.w=Ke*et*vt-de*fe*pe,this},setFromEulerYXZ:function(ce,ye,Ie){var Ke=Math.cos(ce/2),et=Math.cos(ye/2),vt=Math.cos(Ie/2),de=Math.sin(ce/2),fe=Math.sin(ye/2),pe=Math.sin(Ie/2);return this.x=de*et*vt+Ke*fe*pe,this.y=Ke*fe*vt-de*et*pe,this.z=Ke*et*pe-de*fe*vt,this.w=Ke*et*vt+de*fe*pe,this},setFromAxisAngle:function(ce,ye){var Ie=ye/2,Ke=Math.sin(Ie);return this.x=ce.x*Ke,this.y=ce.y*Ke,this.z=ce.z*Ke,this.w=Math.cos(Ie),this},multiply:function(ce){return this.multiplyQuaternions(this,ce)},multiplyQuaternions:function(ce,ye){var Ie=ce.x,Ke=ce.y,et=ce.z,vt=ce.w,de=ye.x,fe=ye.y,pe=ye.z,xe=ye.w;return this.x=Ie*xe+vt*de+Ke*pe-et*fe,this.y=Ke*xe+vt*fe+et*de-Ie*pe,this.z=et*xe+vt*pe+Ie*fe-Ke*de,this.w=vt*xe-Ie*de-Ke*fe-et*pe,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var ce=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return ce===0?(this.x=0,this.y=0,this.z=0,this.w=1):(ce=1/ce,this.x=this.x*ce,this.y=this.y*ce,this.z=this.z*ce,this.w=this.w*ce),this},slerp:function(ce,ye){if(ye===0)return this;if(ye===1)return this.copy(ce);var Ie=this.x,Ke=this.y,et=this.z,vt=this.w,de=vt*ce.w+Ie*ce.x+Ke*ce.y+et*ce.z;if(de<0?(this.w=-ce.w,this.x=-ce.x,this.y=-ce.y,this.z=-ce.z,de=-de):this.copy(ce),de>=1)return this.w=vt,this.x=Ie,this.y=Ke,this.z=et,this;var fe=Math.acos(de),pe=Math.sqrt(1-de*de);if(Math.abs(pe)<.001)return this.w=.5*(vt+this.w),this.x=.5*(Ie+this.x),this.y=.5*(Ke+this.y),this.z=.5*(et+this.z),this;var xe=Math.sin((1-ye)*fe)/pe,Ee=Math.sin(ye*fe)/pe;return this.w=vt*xe+this.w*Ee,this.x=Ie*xe+this.x*Ee,this.y=Ke*xe+this.y*Ee,this.z=et*xe+this.z*Ee,this},setFromUnitVectors:function(){var ie,ce,ye=1e-6;return function(Ie,Ke){return ie===void 0&&(ie=new Jt),ce=Ie.dot(Ke)+1,ce<ye?(ce=0,Math.abs(Ie.x)>Math.abs(Ie.z)?ie.set(-Ie.y,Ie.x,0):ie.set(0,-Ie.z,Ie.y)):ie.crossVectors(Ie,Ke),this.x=ie.x,this.y=ie.y,this.z=ie.z,this.w=ce,this.normalize(),this}}()};function Sn(ie){this.width=ie.width||rt(),this.height=ie.height||Ge(),this.widthMeters=ie.widthMeters,this.heightMeters=ie.heightMeters,this.bevelMeters=ie.bevelMeters}var er=new Sn({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Pi=new Sn({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Ir={CardboardV1:new Tn({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Tn({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function _i(ie,ce){this.viewer=Ir.CardboardV2,this.updateDeviceParams(ie),this.distortion=new Qe(this.viewer.distortionCoefficients);for(var ye=0;ye<ce.length;ye++){var Ie=ce[ye];Ir[Ie.id]=new Tn(Ie)}}_i.prototype.updateDeviceParams=function(ie){this.device=this.determineDevice_(ie)||this.device},_i.prototype.getDevice=function(){return this.device},_i.prototype.setViewer=function(ie){this.viewer=ie,this.distortion=new Qe(this.viewer.distortionCoefficients)},_i.prototype.determineDevice_=function(ie){if(!ie)return G()?(console.warn("Using fallback iOS device measurements."),Pi):(console.warn("Using fallback Android device measurements."),er);var ce=.0254,ye=ce/ie.xdpi,Ie=ce/ie.ydpi,Ke=rt(),et=Ge();return new Sn({widthMeters:ye*Ke,heightMeters:Ie*et,bevelMeters:ie.bevelMm*.001})},_i.prototype.getDistortedFieldOfViewLeftEye=function(){var ie=this.viewer,ce=this.device,ye=this.distortion,Ie=ie.screenLensDistance,Ke=(ce.widthMeters-ie.interLensDistance)/2,et=ie.interLensDistance/2,vt=ie.baselineLensDistance-ce.bevelMeters,de=ce.heightMeters-vt,fe=Ot*Math.atan(ye.distort(Ke/Ie)),pe=Ot*Math.atan(ye.distort(et/Ie)),xe=Ot*Math.atan(ye.distort(vt/Ie)),Ee=Ot*Math.atan(ye.distort(de/Ie));return{leftDegrees:Math.min(fe,ie.fov),rightDegrees:Math.min(pe,ie.fov),downDegrees:Math.min(xe,ie.fov),upDegrees:Math.min(Ee,ie.fov)}},_i.prototype.getLeftEyeVisibleTanAngles=function(){var ie=this.viewer,ce=this.device,ye=this.distortion,Ie=Math.tan(-It*ie.fov),Ke=Math.tan(It*ie.fov),et=Math.tan(It*ie.fov),vt=Math.tan(-It*ie.fov),de=ce.widthMeters/4,fe=ce.heightMeters/2,pe=ie.baselineLensDistance-ce.bevelMeters-fe,xe=ie.interLensDistance/2-de,Ee=-pe,ct=ie.screenLensDistance,St=ye.distort((xe-de)/ct),zt=ye.distort((Ee+fe)/ct),en=ye.distort((xe+de)/ct),An=ye.distort((Ee-fe)/ct),Wt=new Float32Array(4);return Wt[0]=Math.max(Ie,St),Wt[1]=Math.min(Ke,zt),Wt[2]=Math.min(et,en),Wt[3]=Math.max(vt,An),Wt},_i.prototype.getLeftEyeNoLensTanAngles=function(){var ie=this.viewer,ce=this.device,ye=this.distortion,Ie=new Float32Array(4),Ke=ye.distortInverse(Math.tan(-It*ie.fov)),et=ye.distortInverse(Math.tan(It*ie.fov)),vt=ye.distortInverse(Math.tan(It*ie.fov)),de=ye.distortInverse(Math.tan(-It*ie.fov)),fe=ce.widthMeters/4,pe=ce.heightMeters/2,xe=ie.baselineLensDistance-ce.bevelMeters-pe,Ee=ie.interLensDistance/2-fe,ct=-xe,St=ie.screenLensDistance,zt=(Ee-fe)/St,en=(ct+pe)/St,An=(Ee+fe)/St,Wt=(ct-pe)/St;return Ie[0]=Math.max(Ke,zt),Ie[1]=Math.min(et,en),Ie[2]=Math.min(vt,An),Ie[3]=Math.max(de,Wt),Ie},_i.prototype.getLeftEyeVisibleScreenRect=function(ie){var ce=this.viewer,ye=this.device,Ie=ce.screenLensDistance,Ke=(ye.widthMeters-ce.interLensDistance)/2,et=ce.baselineLensDistance-ye.bevelMeters,vt=(ie[0]*Ie+Ke)/ye.widthMeters,de=(ie[1]*Ie+et)/ye.heightMeters,fe=(ie[2]*Ie+Ke)/ye.widthMeters,pe=(ie[3]*Ie+et)/ye.heightMeters;return{x:vt,y:pe,width:fe-vt,height:de-pe}},_i.prototype.getFieldOfViewLeftEye=function(ie){return ie?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},_i.prototype.getFieldOfViewRightEye=function(ie){var ce=this.getFieldOfViewLeftEye(ie);return{leftDegrees:ce.rightDegrees,rightDegrees:ce.leftDegrees,upDegrees:ce.upDegrees,downDegrees:ce.downDegrees}},_i.prototype.getUndistortedFieldOfViewLeftEye=function(){var ie=this.getUndistortedParams_();return{leftDegrees:Ot*Math.atan(ie.outerDist),rightDegrees:Ot*Math.atan(ie.innerDist),downDegrees:Ot*Math.atan(ie.bottomDist),upDegrees:Ot*Math.atan(ie.topDist)}},_i.prototype.getUndistortedViewportLeftEye=function(){var ie=this.getUndistortedParams_(),ce=this.viewer,ye=this.device,Ie=ce.screenLensDistance,Ke=ye.widthMeters/Ie,et=ye.heightMeters/Ie,vt=ye.width/Ke,de=ye.height/et,fe=Math.round((ie.eyePosX-ie.outerDist)*vt),pe=Math.round((ie.eyePosY-ie.bottomDist)*de);return{x:fe,y:pe,width:Math.round((ie.eyePosX+ie.innerDist)*vt)-fe,height:Math.round((ie.eyePosY+ie.topDist)*de)-pe}},_i.prototype.getUndistortedParams_=function(){var ie=this.viewer,ce=this.device,ye=this.distortion,Ie=ie.screenLensDistance,Ke=ie.interLensDistance/2/Ie,et=ce.widthMeters/Ie,vt=ce.heightMeters/Ie,de=et/2-Ke,fe=(ie.baselineLensDistance-ce.bevelMeters)/Ie,pe=ie.fov,xe=ye.distortInverse(Math.tan(It*pe)),Ee=Math.min(de,xe),ct=Math.min(Ke,xe),St=Math.min(fe,xe),zt=Math.min(vt-fe,xe);return{outerDist:Ee,innerDist:ct,topDist:zt,bottomDist:St,eyePosX:de,eyePosY:fe}};function Tn(ie){this.id=ie.id,this.label=ie.label,this.fov=ie.fov,this.interLensDistance=ie.interLensDistance,this.baselineLensDistance=ie.baselineLensDistance,this.screenLensDistance=ie.screenLensDistance,this.distortionCoefficients=ie.distortionCoefficients,this.inverseCoefficients=ie.inverseCoefficients}_i.Viewers=Ir;var Qt=1,mn="2019-11-09T17:36:14Z",ri=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],Cn={format:Qt,last_updated:mn,devices:ri};function li(ie,ce){if(this.dpdb=Cn,this.recalculateDeviceParams_(),ie){this.onDeviceParamsUpdated=ce;var ye=new XMLHttpRequest,Ie=this;ye.open("GET",ie,!0),ye.addEventListener("load",function(){Ie.loading=!1,ye.status>=200&&ye.status<=299?(Ie.dpdb=JSON.parse(ye.response),Ie.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),ye.send()}}li.prototype.getDeviceParams=function(){return this.deviceParams},li.prototype.recalculateDeviceParams_=function(){var ie=this.calcDeviceParams_();ie?(this.deviceParams=ie,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},li.prototype.calcDeviceParams_=function(){var ie=this.dpdb;if(!ie)return console.error("DPDB not available."),null;if(ie.format!=1)return console.error("DPDB has unexpected format version."),null;if(!ie.devices||!ie.devices.length)return console.error("DPDB does not have a devices section."),null;var ce=navigator.userAgent||navigator.vendor||window.opera,ye=rt(),Ie=Ge();if(!ie.devices)return console.error("DPDB has no devices section."),null;for(var Ke=0;Ke<ie.devices.length;Ke++){var et=ie.devices[Ke];if(!et.rules){console.warn("Device["+Ke+"] has no rules section.");continue}if(et.type!="ios"&&et.type!="android"){console.warn("Device["+Ke+"] has invalid type.");continue}if(G()==(et.type=="ios")){for(var vt=!1,de=0;de<et.rules.length;de++){var fe=et.rules[de];if(this.ruleMatches_(fe,ce,ye,Ie)){vt=!0;break}}if(vt){var pe=et.dpi[0]||et.dpi,xe=et.dpi[1]||et.dpi;return new bi({xdpi:pe,ydpi:xe,bevelMm:et.bw})}}}return console.warn("No DPDB device match."),null},li.prototype.ruleMatches_=function(ie,ce,ye,Ie){if(!ie.ua&&!ie.res||(ie.ua&&ie.ua.substring(0,2)==="SM"&&(ie.ua=ie.ua.substring(0,7)),ie.ua&&ce.indexOf(ie.ua)<0))return!1;if(ie.res){if(!ie.res[0]||!ie.res[1])return!1;var Ke=ie.res[0],et=ie.res[1];if(Math.min(ye,Ie)!=Math.min(Ke,et)||Math.max(ye,Ie)!=Math.max(Ke,et))return!1}return!0};function bi(ie){this.xdpi=ie.xdpi,this.ydpi=ie.ydpi,this.bevelMm=ie.bevelMm}function Li(ie,ce){this.set(ie,ce)}Li.prototype.set=function(ie,ce){this.sample=ie,this.timestampS=ce},Li.prototype.copy=function(ie){this.set(ie.sample,ie.timestampS)};function Ar(ie,ce){this.kFilter=ie,this.isDebug=ce,this.currentAccelMeasurement=new Li,this.currentGyroMeasurement=new Li,this.previousGyroMeasurement=new Li,G()?this.filterQ=new dn(-1,0,0,1):this.filterQ=new dn(1,0,0,1),this.previousFilterQ=new dn,this.previousFilterQ.copy(this.filterQ),this.accelQ=new dn,this.isOrientationInitialized=!1,this.estimatedGravity=new Jt,this.measuredGravity=new Jt,this.gyroIntegralQ=new dn}Ar.prototype.addAccelMeasurement=function(ie,ce){this.currentAccelMeasurement.set(ie,ce)},Ar.prototype.addGyroMeasurement=function(ie,ce){this.currentGyroMeasurement.set(ie,ce);var ye=ce-this.previousGyroMeasurement.timestampS;Se(ye)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Ar.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var ie=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,ce=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,ie);this.gyroIntegralQ.multiply(ce),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(ce);var ye=new dn;ye.copy(this.filterQ),ye.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(ye),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Ie=new dn;Ie.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ie.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Ot*Wn(Ie),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ke=new dn;Ke.copy(this.filterQ),Ke.multiply(Ie),this.filterQ.slerp(Ke,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Ar.prototype.getOrientation=function(){return this.filterQ},Ar.prototype.accelToQuaternion_=function(ie){var ce=new Jt;ce.copy(ie),ce.normalize();var ye=new dn;return ye.setFromUnitVectors(new Jt(0,0,-1),ce),ye.inverse(),ye},Ar.prototype.gyroToQuaternionDelta_=function(ie,ce){var ye=new dn,Ie=new Jt;return Ie.copy(ie),Ie.normalize(),ye.setFromAxisAngle(Ie,ie.length()*ce),ye};function ar(ie,ce){this.predictionTimeS=ie,this.isDebug=ce,this.previousQ=new dn,this.previousTimestampS=null,this.deltaQ=new dn,this.outQ=new dn}ar.prototype.getPrediction=function(ie,ce,ye){if(!this.previousTimestampS)return this.previousQ.copy(ie),this.previousTimestampS=ye,ie;var Ie=new Jt;Ie.copy(ce),Ie.normalize();var Ke=ce.length();if(Ke<It*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Ot*Ke).toFixed(1)),this.outQ.copy(ie),this.previousQ.copy(ie),this.outQ;var et=Ke*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Ie,et),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(ie),this.previousTimestampS=ye,this.outQ};function Ye(ie,ce,ye,Ie){this.yawOnly=ye,this.accelerometer=new Jt,this.gyroscope=new Jt,this.filter=new Ar(ie,Ie),this.posePredictor=new ar(ce,Ie),this.isFirefoxAndroid=W(),this.isIOS=G();var Ke=J();this.isDeviceMotionInRadians=!this.isIOS&&Ke&&Ke<66,this.isWithoutDeviceMotion=he()||ee(),this.filterToWorldQ=new dn,G()?this.filterToWorldQ.setFromAxisAngle(new Jt(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Jt(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new dn,this.worldToScreenQ=new dn,this.originalPoseAdjustQ=new dn,this.originalPoseAdjustQ.setFromAxisAngle(new Jt(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),Be()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new dn,this.orientationOut_=new Float32Array(4),this.start()}Ye.prototype.getPosition=function(){return null},Ye.prototype.getOrientation=function(){var ie=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ke=new dn().setFromAxisAngle(new Jt(0,0,-1),0),et=new dn;return window.orientation===-90?et.setFromAxisAngle(new Jt(0,1,0),Math.PI/-2):et.setFromAxisAngle(new Jt(0,1,0),Math.PI/2),Ke.multiply(et)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var Ke=new dn;return Ke.setFromAxisAngle(new Jt(1,0,0),-Math.PI/2),Ke}(),ie=this._deviceOrientationQ;var ye=new dn;return ye.copy(ie),ye.multiply(this.deviceOrientationFilterToWorldQ),ye.multiply(this.resetQ),ye.multiply(this.worldToScreenQ),ye.multiplyQuaternions(this.deviceOrientationFixQ,ye),this.yawOnly&&(ye.x=0,ye.z=0,ye.normalize()),this.orientationOut_[0]=ye.x,this.orientationOut_[1]=ye.y,this.orientationOut_[2]=ye.z,this.orientationOut_[3]=ye.w,this.orientationOut_}else{var ce=this.filter.getOrientation();ie=this.posePredictor.getPrediction(ce,this.gyroscope,this.previousTimestampS)}var ye=new dn;return ye.copy(this.filterToWorldQ),ye.multiply(this.resetQ),ye.multiply(ie),ye.multiply(this.worldToScreenQ),this.yawOnly&&(ye.x=0,ye.z=0,ye.normalize()),this.orientationOut_[0]=ye.x,this.orientationOut_[1]=ye.y,this.orientationOut_[2]=ye.z,this.orientationOut_[3]=ye.w,this.orientationOut_},Ye.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Be()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Ye.prototype.onDeviceOrientation_=function(ie){this._deviceOrientationQ=this._deviceOrientationQ||new dn;var ce=ie.alpha,ye=ie.beta,Ie=ie.gamma;ce=(ce||0)*Math.PI/180,ye=(ye||0)*Math.PI/180,Ie=(Ie||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(ye,ce,-Ie)},Ye.prototype.onDeviceMotion_=function(ie){this.updateDeviceMotion_(ie)},Ye.prototype.updateDeviceMotion_=function(ie){var ce=ie.accelerationIncludingGravity,ye=ie.rotationRate,Ie=ie.timeStamp/1e3,Ke=Ie-this.previousTimestampS;if(Ke<0){Ai("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=Ie;return}else if(Ke<=ne||Ke>O){Ai("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=Ie;return}this.accelerometer.set(-ce.x,-ce.y,-ce.z),ye&&(me()?this.gyroscope.set(-ye.beta,ye.alpha,ye.gamma):this.gyroscope.set(ye.alpha,ye.beta,ye.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Ie)),this.filter.addAccelMeasurement(this.accelerometer,Ie),this.previousTimestampS=Ie},Ye.prototype.onOrientationChange_=function(ie){this.setScreenTransform_()},Ye.prototype.onMessage_=function(ie){var ce=ie.data;if(!(!ce||!ce.type)){var ye=ce.type.toLowerCase();ye==="devicemotion"&&this.updateDeviceMotion_(ce.deviceMotionEvent)}},Ye.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Jt(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Jt(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Ye.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),G()&&Rn()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},Ye.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var xt=60,Mt=new Jt(1,0,0),Et=new Jt(0,0,1),Bt=new dn;Bt.setFromAxisAngle(Mt,-Math.PI/2),Bt.multiply(new dn().setFromAxisAngle(Et,Math.PI/2));var Re=function(){function ie(ce){D(this,ie),this.config=ce,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new dn,this._outQ=new dn,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return z(ie,[{key:"init",value:function(){var ye=null;try{ye=new RelativeOrientationSensor({frequency:xt,referenceFrame:"screen"}),ye.addEventListener("error",this._onSensorError)}catch(Ie){this.errors.push(Ie),Ie.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):Ie.name==="ReferenceError"?this.useDeviceMotion():console.error(Ie)}ye&&(this.api="sensor",this.sensor=ye,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Ye(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var ye=this.sensor.quaternion;this._sensorQ.set(ye[0],ye[1],ye[2],ye[3]);var Ie=this._outQ;return Ie.copy(Bt),Ie.multiply(this._sensorQ),this.config.YAW_ONLY&&(Ie.x=Ie.z=0,Ie.normalize()),this._out[0]=Ie.x,this._out[1]=Ie.y,this._out[2]=Ie.z,this._out[3]=Ie.w,this._out}},{key:"_onSensorError",value:function(ye){this.errors.push(ye.error),ye.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):ye.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(ye.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),ie}(),We="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function it(){this.loadIcon_();var ie=document.createElement("div"),vt=ie.style;vt.position="fixed",vt.top=0,vt.right=0,vt.bottom=0,vt.left=0,vt.backgroundColor="gray",vt.fontFamily="sans-serif",vt.zIndex=1e6;var ce=document.createElement("img");ce.src=this.icon;var vt=ce.style;vt.marginLeft="25%",vt.marginTop="25%",vt.width="50%",ie.appendChild(ce);var ye=document.createElement("div"),vt=ye.style;vt.textAlign="center",vt.fontSize="16px",vt.lineHeight="24px",vt.margin="24px 25%",vt.width="50%",ye.innerHTML="Place your phone into your Cardboard viewer.",ie.appendChild(ye);var Ie=document.createElement("div"),vt=Ie.style;vt.backgroundColor="#CFD8DC",vt.position="fixed",vt.bottom=0,vt.width="100%",vt.height="48px",vt.padding="14px 24px",vt.boxSizing="border-box",vt.color="#656A6B",ie.appendChild(Ie);var Ke=document.createElement("div");Ke.style.float="left",Ke.innerHTML="No Cardboard viewer?";var et=document.createElement("a");et.href="https://www.google.com/get/cardboard/get-cardboard/",et.innerHTML="get one",et.target="_blank";var vt=et.style;vt.float="right",vt.fontWeight=600,vt.textTransform="uppercase",vt.borderLeft="1px solid gray",vt.paddingLeft="24px",vt.textDecoration="none",vt.color="#656A6B",Ie.appendChild(Ke),Ie.appendChild(et),this.overlay=ie,this.text=ye,this.hide()}it.prototype.show=function(ie){!ie&&!this.overlay.parentElement?document.body.appendChild(this.overlay):ie&&(this.overlay.parentElement&&this.overlay.parentElement!=ie&&this.overlay.parentElement.removeChild(this.overlay),ie.appendChild(this.overlay)),this.overlay.style.display="block";var ce=this.overlay.querySelector("img"),ye=ce.style;Be()?(ye.width="20%",ye.marginLeft="40%",ye.marginTop="3%"):(ye.width="50%",ye.marginLeft="25%",ye.marginTop="25%")},it.prototype.hide=function(){this.overlay.style.display="none"},it.prototype.showTemporarily=function(ie,ce){this.show(ce),this.timer=setTimeout(this.hide.bind(this),ie)},it.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},it.prototype.update=function(){this.disableShowTemporarily(),!Be()&&Xt()?this.show():this.hide()},it.prototype.loadIcon_=function(){this.icon=F("image/svg+xml",We)};var gt="CardboardV1",At="WEBVR_CARDBOARD_VIEWER",Rt="webvr-polyfill-viewer-selector";function Nt(ie){try{this.selectedKey=localStorage.getItem(At)}catch(ce){console.error("Failed to load viewer profile: %s",ce)}this.selectedKey||(this.selectedKey=ie||gt),this.dialog=this.createDialog_(_i.Viewers),this.root=null,this.onChangeCallbacks_=[]}Nt.prototype.show=function(ie){this.root=ie,ie.appendChild(this.dialog);var ce=this.dialog.querySelector("#"+this.selectedKey);ce.checked=!0,this.dialog.style.display="block"},Nt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Nt.prototype.getCurrentViewer=function(){return _i.Viewers[this.selectedKey]},Nt.prototype.getSelectedKey_=function(){var ie=this.dialog.querySelector("input[name=field]:checked");return ie?ie.id:null},Nt.prototype.onChange=function(ie){this.onChangeCallbacks_.push(ie)},Nt.prototype.fireOnChange_=function(ie){for(var ce=0;ce<this.onChangeCallbacks_.length;ce++)this.onChangeCallbacks_[ce](ie)},Nt.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!_i.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(_i.Viewers[this.selectedKey]);try{localStorage.setItem(At,this.selectedKey)}catch(ie){console.error("Failed to save viewer profile: %s",ie)}this.hide()},Nt.prototype.createDialog_=function(ie){var ce=document.createElement("div");ce.classList.add(Rt),ce.style.display="none";var ye=document.createElement("div"),et=ye.style;et.position="fixed",et.left=0,et.top=0,et.width="100%",et.height="100%",et.background="rgba(0, 0, 0, 0.3)",ye.addEventListener("click",this.hide.bind(this));var Ie=280,Ke=document.createElement("div"),et=Ke.style;et.boxSizing="border-box",et.position="fixed",et.top="24px",et.left="50%",et.marginLeft=-Ie/2+"px",et.width=Ie+"px",et.padding="24px",et.overflow="hidden",et.background="#fafafa",et.fontFamily="'Roboto', sans-serif",et.boxShadow="0px 5px 20px #666",Ke.appendChild(this.createH1_("Select your viewer"));for(var vt in ie)Ke.appendChild(this.createChoice_(vt,ie[vt].label));return Ke.appendChild(this.createButton_("Save",this.onSave_.bind(this))),ce.appendChild(ye),ce.appendChild(Ke),ce},Nt.prototype.createH1_=function(ie){var ce=document.createElement("h1"),ye=ce.style;return ye.color="black",ye.fontSize="20px",ye.fontWeight="bold",ye.marginTop=0,ye.marginBottom="24px",ce.innerHTML=ie,ce},Nt.prototype.createChoice_=function(ie,ce){var ye=document.createElement("div");ye.style.marginTop="8px",ye.style.color="black";var Ie=document.createElement("input");Ie.style.fontSize="30px",Ie.setAttribute("id",ie),Ie.setAttribute("type","radio"),Ie.setAttribute("value",ie),Ie.setAttribute("name","field");var Ke=document.createElement("label");return Ke.style.marginLeft="4px",Ke.setAttribute("for",ie),Ke.innerHTML=ce,ye.appendChild(Ie),ye.appendChild(Ke),ye},Nt.prototype.createButton_=function(ie,ce){var ye=document.createElement("button");ye.innerHTML=ie;var Ie=ye.style;return Ie.float="right",Ie.textTransform="uppercase",Ie.color="#1094f7",Ie.fontSize="14px",Ie.letterSpacing=0,Ie.border=0,Ie.background="none",Ie.marginTop="16px",ye.addEventListener("click",ce),ye};var wn=typeof window<"u"?window:typeof f<"u"?f:typeof self<"u"?self:{};function yn(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}function Vt(ie,ce){return ce={exports:{}},ie(ce,ce.exports),ce.exports}var qn=Vt(function(ie,ce){(function(Ie,Ke){ie.exports=Ke()})(wn,function(){return function(ye){var Ie={};function Ke(et){if(Ie[et])return Ie[et].exports;var vt=Ie[et]={i:et,l:!1,exports:{}};return ye[et].call(vt.exports,vt,vt.exports,Ke),vt.l=!0,vt.exports}return Ke.m=ye,Ke.c=Ie,Ke.d=function(et,vt,de){Ke.o(et,vt)||Object.defineProperty(et,vt,{configurable:!1,enumerable:!0,get:de})},Ke.n=function(et){var vt=et&&et.__esModule?function(){return et.default}:function(){return et};return Ke.d(vt,"a",vt),vt},Ke.o=function(et,vt){return Object.prototype.hasOwnProperty.call(et,vt)},Ke.p="",Ke(Ke.s=0)}([function(ye,Ie,Ke){var et=function(){function xe(Ee,ct){for(var St=0;St<ct.length;St++){var zt=ct[St];zt.enumerable=zt.enumerable||!1,zt.configurable=!0,"value"in zt&&(zt.writable=!0),Object.defineProperty(Ee,zt.key,zt)}}return function(Ee,ct,St){return ct&&xe(Ee.prototype,ct),St&&xe(Ee,St),Ee}}();function vt(xe,Ee){if(!(xe instanceof Ee))throw new TypeError("Cannot call a class as a function")}var de=Ke(1),fe=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,pe=function(){function xe(){vt(this,xe),fe?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",de),this.noSleepVideo.addEventListener("timeupdate",(function(Ee){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return et(xe,[{key:"enable",value:function(){fe?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){fe?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),xe}();ye.exports=pe},function(ye,Ie,Ke){ye.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Un=yn(qn),_n=1e3,Rr=[0,0,.5,1],hi=[.5,0,.5,1],Ci=window.requestAnimationFrame,qi=window.cancelAnimationFrame;function Cr(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Jr(ie){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:ie.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:ie.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:ie.canPresent},maxLayers:{writable:!1,enumerable:!0,value:ie.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Ti("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),ie.hasOrientation}}})}function bn(ie){ie=ie||{};var ce="wakelock"in ie?ie.wakelock:!0;this.isPolyfilled=!0,this.displayId=_n++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return Ti("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Jr({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,ce&&Xt()&&(this.wakelock_=new Un)}bn.prototype.getFrameData=function(ie){return vn(ie,this._getPose(),this)},bn.prototype.getPose=function(){return Ti("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},bn.prototype.resetPose=function(){return Ti("VRDisplay.prototype.resetPose"),this._resetPose()},bn.prototype.getImmediatePose=function(){return Ti("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},bn.prototype.requestAnimationFrame=function(ie){return Ci(ie)},bn.prototype.cancelAnimationFrame=function(ie){return qi(ie)},bn.prototype.wrapForFullscreen=function(ie){if(G())return ie;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var ce=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",ce.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==ie)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=ie,this.originalParent_=ie.parentElement,this.originalParent_||document.body.appendChild(ie),!this.fullscreenWrapper_.parentElement){var ye=this.fullscreenElement_.parentElement;ye.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),ye.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var Ie=this;function Ke(){if(Ie.fullscreenElement_){var et=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];Ie.fullscreenElement_.setAttribute("style",et.join("; ")+";")}}return Ke(),this.fullscreenWrapper_},bn.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var ie=this.fullscreenElement_;this.fullscreenElementCachedStyle_?ie.setAttribute("style",this.fullscreenElementCachedStyle_):ie.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var ce=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(ie),this.originalParent_===ce?ce.insertBefore(ie,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(ie),ce.removeChild(this.fullscreenWrapper_),ie}},bn.prototype.requestPresent=function(ie){var ce=this.isPresenting,ye=this;return ie instanceof Array||(Ti("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),ie=[ie]),new Promise(function(Ie,Ke){if(!ye.capabilities.canPresent){Ke(new Error("VRDisplay is not capable of presenting."));return}if(ie.length==0||ie.length>ye.capabilities.maxLayers){Ke(new Error("Invalid number of layers."));return}var et=ie[0];if(!et.source){Ie();return}var vt=et.leftBounds||Rr,de=et.rightBounds||hi;if(ce){var fe=ye.layer_;fe.source!==et.source&&(fe.source=et.source);for(var pe=0;pe<4;pe++)fe.leftBounds[pe]=vt[pe],fe.rightBounds[pe]=de[pe];ye.wrapForFullscreen(ye.layer_.source),ye.updatePresent_(),Ie();return}if(ye.layer_={predistorted:et.predistorted,source:et.source,leftBounds:vt.slice(0),rightBounds:de.slice(0)},ye.waitingForPresent_=!1,ye.layer_&&ye.layer_.source){var xe=ye.wrapForFullscreen(ye.layer_.source),Ee=function(){var zt=Ft();ye.isPresenting=xe===zt,ye.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(en){console.error("screen.orientation.lock() failed due to",en.message)}),ye.waitingForPresent_=!1,ye.beginPresent_(),Ie()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),ye.removeFullscreenWrapper(),ye.disableWakeLock(),ye.endPresent_(),ye.removeFullscreenListeners_()),ye.fireVRDisplayPresentChange_()},ct=function(){ye.waitingForPresent_&&(ye.removeFullscreenWrapper(),ye.removeFullscreenListeners_(),ye.disableWakeLock(),ye.waitingForPresent_=!1,ye.isPresenting=!1,Ke(new Error("Unable to present.")))};ye.addFullscreenListeners_(xe,Ee,ct),st(xe)?(ye.enableWakeLock(),ye.waitingForPresent_=!0):(G()||V())&&(ye.enableWakeLock(),ye.isPresenting=!0,ye.beginPresent_(),ye.fireVRDisplayPresentChange_(),Ie())}!ye.waitingForPresent_&&!G()&&(mt(),Ke(new Error("Unable to present.")))})},bn.prototype.exitPresent=function(){var ie=this.isPresenting,ce=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(ye,Ie){ie?(!mt()&&G()&&(ce.endPresent_(),ce.fireVRDisplayPresentChange_()),V()&&(ce.removeFullscreenWrapper(),ce.removeFullscreenListeners_(),ce.endPresent_(),ce.fireVRDisplayPresentChange_()),ye()):Ie(new Error("Was not presenting to VRDisplay."))})},bn.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},bn.prototype.fireVRDisplayPresentChange_=function(){var ie=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(ie)},bn.prototype.fireVRDisplayConnect_=function(){var ie=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(ie)},bn.prototype.addFullscreenListeners_=function(ie,ce,ye){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=ie,this.fullscreenChangeHandler_=ce,this.fullscreenErrorHandler_=ye,ce&&(document.fullscreenEnabled?ie.addEventListener("fullscreenchange",ce,!1):document.webkitFullscreenEnabled?ie.addEventListener("webkitfullscreenchange",ce,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",ce,!1):document.msFullscreenEnabled&&ie.addEventListener("msfullscreenchange",ce,!1)),ye&&(document.fullscreenEnabled?ie.addEventListener("fullscreenerror",ye,!1):document.webkitFullscreenEnabled?ie.addEventListener("webkitfullscreenerror",ye,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",ye,!1):document.msFullscreenEnabled&&ie.addEventListener("msfullscreenerror",ye,!1))},bn.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var ie=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var ce=this.fullscreenChangeHandler_;ie.removeEventListener("fullscreenchange",ce,!1),ie.removeEventListener("webkitfullscreenchange",ce,!1),document.removeEventListener("mozfullscreenchange",ce,!1),ie.removeEventListener("msfullscreenchange",ce,!1)}if(this.fullscreenErrorHandler_){var ye=this.fullscreenErrorHandler_;ie.removeEventListener("fullscreenerror",ye,!1),ie.removeEventListener("webkitfullscreenerror",ye,!1),document.removeEventListener("mozfullscreenerror",ye,!1),ie.removeEventListener("msfullscreenerror",ye,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},bn.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},bn.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},bn.prototype.beginPresent_=function(){},bn.prototype.endPresent_=function(){},bn.prototype.submitFrame=function(ie){},bn.prototype.getEyeParameters=function(ie){return null};var ei={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Wr={LEFT:"left",RIGHT:"right"};function Mi(ie){var ce=on({},ei);ie=on(ce,ie||{}),bn.call(this,{wakelock:ie.MOBILE_WAKE_LOCK}),this.config=ie,this.displayName="Cardboard VRDisplay",this.capabilities=new Jr({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Re(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new li(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new _i(this.dpdb_.getDeviceParams(),ie.ADDITIONAL_VIEWERS),this.viewerSelector_=new Nt(ie.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new it),G()&&window.addEventListener("resize",this.onResize_.bind(this))}return Mi.prototype=Object.create(bn.prototype),Mi.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Mi.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Mi.prototype._getFieldOfView=function(ie){var ce;if(ie==Wr.LEFT)ce=this.deviceInfo_.getFieldOfViewLeftEye();else if(ie==Wr.RIGHT)ce=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",ie),null;return ce},Mi.prototype._getEyeOffset=function(ie){var ce;if(ie==Wr.LEFT)ce=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(ie==Wr.RIGHT)ce=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",ie),null;return ce},Mi.prototype.getEyeParameters=function(ie){var ce=this._getEyeOffset(ie),ye=this._getFieldOfView(ie),Ie={offset:ce,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(Ie,"fieldOfView",{enumerable:!0,get:function(){return Ti("VRFieldOfView","VRFrameData's projection matrices"),ye}}),Ie},Mi.prototype.onDeviceParamsUpdated_=function(ie){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(ie),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Mi.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Mi.prototype.beginPresent_=function(){var ie=this.layer_.source.getContext("webgl");ie||(ie=this.layer_.source.getContext("experimental-webgl")),ie||(ie=this.layer_.source.getContext("webgl2")),ie&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(ie.canvas.width=rt()*this.bufferScale_,ie.canvas.height=Ge()*this.bufferScale_,this.cardboardUI_=new qe(ie)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new qe(ie)),this.distorter_=new Pe(ie,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(ce){this.viewerSelector_.show(this.layer_.source.parentElement),ce.stopPropagation(),ce.preventDefault()}).bind(this),(function(ce){this.exitPresent(),ce.stopPropagation(),ce.preventDefault()}).bind(this)),this.rotateInstructions_&&(Be()&&Xt()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Mi.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Mi.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Mi.prototype.submitFrame=function(ie){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var ce=this.layer_.source.getContext("webgl");ce||(ce=this.layer_.source.getContext("experimental-webgl")),ce||(ce=this.layer_.source.getContext("webgl2"));var ye=ce.canvas;(ye.width!=this.lastWidth||ye.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=ye.width,this.lastHeight=ye.height,this.cardboardUI_.render()}},Mi.prototype.onOrientationChange_=function(ie){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Mi.prototype.onResize_=function(ie){if(this.layer_){var ce=this.layer_.source.getContext("webgl");ce||(ce=this.layer_.source.getContext("experimental-webgl")),ce||(ce=this.layer_.source.getContext("webgl2"));var ye=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];ce.canvas.setAttribute("style",ye.join("; ")+";"),nn(ce.canvas)}},Mi.prototype.onViewerChanged_=function(ie){this.deviceInfo_.setViewer(ie),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Mi.prototype.fireVRDisplayDeviceParamsChange_=function(){var ie=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(ie)},Mi.VRFrameData=Cr,Mi.VRDisplay=bn,Mi})}),b=A(x),m="0.10.12",S={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function C(P){this.config=_(_({},S),P),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&y())&&(this.enable(),this.getVRDisplays().then(function(k){k&&k[0]&&k[0].fireVRDisplayConnect_&&k[0].fireVRDisplayConnect_()}))}C.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(y()){var P=new b({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(P)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},C.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var P=this.native.VRFrameData,k=new this.native.VRFrameData,D=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(z){if(z instanceof P){D.call(this,z);return}D.call(this,k),z.pose=k.pose,v(k.leftProjectionMatrix,z.leftProjectionMatrix),v(k.rightProjectionMatrix,z.rightProjectionMatrix),v(k.leftViewMatrix,z.leftViewMatrix),v(k.rightViewMatrix,z.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=b.VRDisplay,window.VRFrameData=b.VRFrameData},C.prototype.getVRDisplays=function(){var P=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(k){return k.length>0?k:P.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},C.version=m,C.VRFrameData=b.VRFrameData,C.VRDisplay=b.VRDisplay;var M=Object.freeze({default:C}),T=M&&C||M;typeof f<"u"&&f.window&&(f.document||(f.document=f.window.document),f.navigator||(f.navigator=f.window.navigator));var N=T;return N})},"./node_modules/word-wrapper/index.js":c=>{var d=/\n/,u=`
`,f=/\s/;c.exports=function(x,b){var m=c.exports.lines(x,b);return m.map(function(S){return x.substring(S.start,S.end)}).join(`
`)},c.exports.lines=function(b,m){if(m=m||{},m.width===0&&m.mode!=="nowrap")return[];b=b||"";var S=typeof m.width=="number"?m.width:Number.MAX_VALUE,C=Math.max(0,m.start||0),M=typeof m.end=="number"?m.end:b.length,T=m.mode,N=m.measure||_;return T==="pre"?y(N,b,C,M,S):v(N,b,C,M,S,T)};function A(x,b,m,S){var C=x.indexOf(b,m);return C===-1||C>S?S:C}function g(x){return f.test(x)}function y(x,b,m,S,C){for(var M=[],T=m,N=m;N<S&&N<b.length;N++){var P=b.charAt(N),k=d.test(P);if(k||N===S-1){var D=k?N:N+1,z=x(b,T,D,C);M.push(z),T=N+1}}return M}function v(x,b,m,S,C,M){var T=[],N=C;for(M==="nowrap"&&(N=Number.MAX_VALUE);m<S&&m<b.length;){for(var P=A(b,u,m,S);m<P&&g(b.charAt(m));)m++;var k=x(b,m,P,N),D=m+(k.end-k.start),z=D+u.length;if(D<P){for(;D>m&&!g(b.charAt(D));)D--;if(D===m)z>m+u.length&&z--,D=z;else for(z=D;D>m&&g(b.charAt(D-u.length));)D--}if(D>=m){var Y=x(b,m,D,N);T.push(Y)}m=z}return T}function _(x,b,m,S){var C=Math.min(S,m-b);return{start:b,end:b+C}}},"./node_modules/xhr/index.js":(c,d,u)=>{var f=u("./node_modules/global/window.js"),A=u("./node_modules/is-function/index.js"),g=u("./node_modules/parse-headers/parse-headers.js"),y=u("./node_modules/xtend/immutable.js");c.exports=b,c.exports.default=b,b.XMLHttpRequest=f.XMLHttpRequest||C,b.XDomainRequest="withCredentials"in new b.XMLHttpRequest?b.XMLHttpRequest:f.XDomainRequest,v(["get","put","post","patch","head","delete"],function(M){b[M==="delete"?"del":M]=function(T,N,P){return N=x(T,N,P),N.method=M.toUpperCase(),m(N)}});function v(M,T){for(var N=0;N<M.length;N++)T(M[N])}function _(M){for(var T in M)if(M.hasOwnProperty(T))return!1;return!0}function x(M,T,N){var P=M;return A(T)?(N=T,typeof M=="string"&&(P={uri:M})):P=y(T,{uri:M}),P.callback=N,P}function b(M,T,N){return T=x(M,T,N),m(T)}function m(M){if(typeof M.callback>"u")throw new Error("callback argument missing");var T=!1,N=function(me,Be,Se){T||(T=!0,M.callback(me,Be,Se))};function P(){Y.readyState===4&&setTimeout(z,0)}function k(){var he=void 0;if(Y.response?he=Y.response:he=Y.responseText||S(Y),W)try{he=JSON.parse(he)}catch{}return he}function D(he){return clearTimeout(J),he instanceof Error||(he=new Error(""+(he||"Unknown XMLHttpRequest Error"))),he.statusCode=0,N(he,ee)}function z(){if(!O){var he;clearTimeout(J),M.useXDR&&Y.status===void 0?he=200:he=Y.status===1223?204:Y.status;var me=ee,Be=null;return he!==0?(me={body:k(),statusCode:he,method:U,headers:{},url:F,rawRequest:Y},Y.getAllResponseHeaders&&(me.headers=g(Y.getAllResponseHeaders()))):Be=new Error("Internal XMLHttpRequest Error"),N(Be,me,me.body)}}var Y=M.xhr||null;Y||(M.cors||M.useXDR?Y=new b.XDomainRequest:Y=new b.XMLHttpRequest);var ne,O,F=Y.url=M.uri||M.url,U=Y.method=M.method||"GET",G=M.body||M.data,V=Y.headers=M.headers||{},K=!!M.sync,W=!1,J,ee={body:void 0,headers:{},statusCode:0,method:U,url:F,rawRequest:Y};if("json"in M&&M.json!==!1&&(W=!0,V.accept||V.Accept||(V.Accept="application/json"),U!=="GET"&&U!=="HEAD"&&(V["content-type"]||V["Content-Type"]||(V["Content-Type"]="application/json"),G=JSON.stringify(M.json===!0?G:M.json))),Y.onreadystatechange=P,Y.onload=z,Y.onerror=D,Y.onprogress=function(){},Y.onabort=function(){O=!0},Y.ontimeout=D,Y.open(U,F,!K,M.username,M.password),K||(Y.withCredentials=!!M.withCredentials),!K&&M.timeout>0&&(J=setTimeout(function(){if(!O){O=!0,Y.abort("timeout");var he=new Error("XMLHttpRequest timeout");he.code="ETIMEDOUT",D(he)}},M.timeout)),Y.setRequestHeader)for(ne in V)V.hasOwnProperty(ne)&&Y.setRequestHeader(ne,V[ne]);else if(M.headers&&!_(M.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in M&&(Y.responseType=M.responseType),"beforeSend"in M&&typeof M.beforeSend=="function"&&M.beforeSend(Y),Y.send(G||null),Y}function S(M){try{if(M.responseType==="document")return M.responseXML;var T=M.responseXML&&M.responseXML.documentElement.nodeName==="parsererror";if(M.responseType===""&&!T)return M.responseXML}catch{}return null}function C(){}},"./node_modules/xml-parse-from-string/index.js":c=>{c.exports=function(){return typeof self.DOMParser<"u"?function(u){var f=new self.DOMParser;return f.parseFromString(u,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(u){var f=new self.ActiveXObject("Microsoft.XMLDOM");return f.async="false",f.loadXML(u),f}:function(u){var f=document.createElement("div");return f.innerHTML=u,f}}()},"./node_modules/xtend/immutable.js":c=>{c.exports=u;var d=Object.prototype.hasOwnProperty;function u(){for(var f={},A=0;A<arguments.length;A++){var g=arguments[A];for(var y in g)d.call(g,y)&&(f[y]=g[y])}return f}},"./src/components/animation.js":(c,d,u)=>{var f=u("./node_modules/super-animejs/lib/anime.es.js").default,A=u("./src/core/component.js").components,g=u("./src/core/component.js").registerComponent,y=u("./src/lib/three.js"),v=u("./src/utils/index.js"),_=new y.Color,x=new y.Color,b=v.entity.getComponentProperty,m=v.entity.setComponentProperty,S={},C="color",M="position",T="rotation",N="scale",P="components",k="object3D";c.exports.Component=g("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(V){return V===!0||V==="true"?!0:V===!1||V==="false"?!1:parseInt(V,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var V=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){V.animationIsPlaying=!1,V.el.emit("animationcomplete",V.eventDetail,!1),V.id&&V.el.emit("animationcomplete__"+V.id,V.eventDetail,!1)}}},update:function(V){var K=this.config,W=this.data;this.animationIsPlaying=!1,this.data.enabled&&W.property&&(K.autoplay=!1,K.direction=W.dir,K.duration=W.dur,K.easing=W.easing,K.elasticity=W.elasticity,K.loop=W.loop,K.round=W.round,this.createAndStartAnimation())},tick:function(V,K){this.animationIsPlaying&&(this.time+=K,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var V=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=f(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!V.autoplay||V.startEvents&&V.startEvents.length)){if(V.delay){setTimeout(this.beginAnimation,V.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=f(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var V=this.config,K=this.data,W=this.el,J,ee,he;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){J=K.from===""?O(W,K.property):K.from,he=K.to,this.setColorConfig(J,he),J=this.fromColor,he=this.toColor,this.targetsArray.length=0,this.targetsArray.push(J),V.targets=this.targetsArray;for(ee in he)V[ee]=he[ee];V.update=function(){var me={};return function(Be){var Se;Se=Be.animatables[0].target,!(Se.r===me.r&&Se.g===me.g&&Se.b===me.b)&&F(W,K.property,Se,K.type)}}()}},updateConfigForDefault:function(){var V=this.config,K=this.data,W=this.el,J,ee,he,me;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(K.from===""?J=G(K)?O(W,K.property):b(W,K.property):J=K.from,me=K.to,he=!isNaN(J||me),he?(J=parseFloat(J),me=parseFloat(me)):(J=J&&J.toString(),me=me&&me.toString()),ee=K.to==="true"||K.to==="false"||K.to===!0||K.to===!1,ee&&(J=K.from==="true"||K.from===!0?1:0,me=K.to==="true"||K.to===!0?1:0),this.targets.aframeProperty=J,V.targets=this.targets,V.aframeProperty=me,V.update=function(){var Be;return function(Se){var rt;rt=Se.animatables[0].target.aframeProperty,rt!==Be&&(Be=rt,ee&&(rt=rt>=1),G(K)?F(W,K.property,rt,K.type):m(W,K.property,rt))}}())},updateConfigForVector:function(){var V=this.config,K=this.data,W=this.el,J,ee,he;ee=K.from!==""?v.coordinates.parse(K.from):b(W,K.property),he=v.coordinates.parse(K.to),K.property===T&&(z(ee),z(he)),this.targetsArray.length=0,this.targetsArray.push(ee),V.targets=this.targetsArray;for(J in he)V[J]=he[J];if(K.property===M||K.property===T||K.property===N){V.update=function(){var me={};return function(Be){var Se=Be.animatables[0].target;K.property===N&&(Se.x=Math.max(1e-4,Se.x),Se.y=Math.max(1e-4,Se.y),Se.z=Math.max(1e-4,Se.z)),!(Se.x===me.x&&Se.y===me.y&&Se.z===me.z)&&(me.x=Se.x,me.y=Se.y,me.z=Se.z,W.object3D[K.property].set(Se.x,Se.y,Se.z))}}();return}V.update=function(){var me={};return function(Be){var Se=Be.animatables[0].target;Se.x===me.x&&Se.y===me.y&&Se.z===me.z||(me.x=Se.x,me.y=Se.y,me.z=Se.z,m(W,K.property,Se))}}()},updateConfig:function(){var V;V=D(this.el,this.data.property),G(this.data)&&this.data.type===C?this.updateConfigForRawColor():V==="vec2"||V==="vec3"||V==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(V){var K,W=this.data,J=this.el,ee=this;return W.from!==""||!W.property.startsWith(P)||(K=U(W.property)[1],J.components[K])?!1:(J.addEventListener("componentinitialized",function he(me){me.detail.name===K&&(V(),ee.animation=f(ee.config),J.removeEventListener("componentinitialized",he))}),!0)},stopRelatedAnimations:function(){var V,K;for(K in this.el.components)V=this.el.components[K],K!==this.attrName&&V.name==="animation"&&V.animationIsPlaying&&V.data.property===this.data.property&&(V.animationIsPlaying=!1)},addEventListeners:function(){var V=this.data,K=this.el;Y(K,V.startEvents,this.onStartEvent),Y(K,V.pauseEvents,this.pauseAnimation),Y(K,V.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var V=this.data,K=this.el;ne(K,V.startEvents,this.onStartEvent),ne(K,V.pauseEvents,this.pauseAnimation),ne(K,V.resumeEvents,this.resumeAnimation)},setColorConfig:function(V,K){_.set(V),x.set(K),V=this.fromColor,K=this.toColor,V.r=_.r,V.g=_.g,V.b=_.b,K.r=x.r,K.g=x.g,K.b=x.b}});function D(V,K){var W,J,ee,he;return ee=K.split("."),J=ee[0],he=ee[1],W=V.components[J]||A[J],!W||he&&!W.schema[he]?null:he?W.schema[he].type:W.schema.type}function z(V){V.x=y.MathUtils.degToRad(V.x),V.y=y.MathUtils.degToRad(V.y),V.z=y.MathUtils.degToRad(V.z)}function Y(V,K,W){var J;for(J=0;J<K.length;J++)V.addEventListener(K[J],W)}function ne(V,K,W){var J;for(J=0;J<K.length;J++)V.removeEventListener(K[J],W)}function O(V,K){var W,J,ee;for(J=U(K),ee=V,W=0;W<J.length;W++)ee=ee[J[W]];if(ee===void 0)throw console.log(V),new Error("[animation] property ("+K+") could not be found");return ee}function F(V,K,W,J){var ee,he,me,Be;for(K.startsWith("object3D.rotation")&&(W=y.MathUtils.degToRad(W)),he=U(K),Be=V,ee=0;ee<he.length-1;ee++)Be=Be[he[ee]];if(me=he[he.length-1],J===C){"r"in Be[me]?(Be[me].r=W.r,Be[me].g=W.g,Be[me].b=W.b):(Be[me].x=W.r,Be[me].y=W.g,Be[me].z=W.b);return}Be[me]=W}function U(V){return V in S||(S[V]=V.split(".")),S[V]}function G(V){return V.isRawProperty||V.property.startsWith(P)||V.property.startsWith(k)}},"./src/components/camera.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js");c.exports.Component=f("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var g,y=this.el;g=this.camera=new A.PerspectiveCamera,y.setObject3D("camera",g)},update:function(g){var y=this.data,v=this.camera;v.aspect=y.aspect||window.innerWidth/window.innerHeight,v.far=y.far,v.fov=y.fov,v.near=y.near,v.zoom=y.zoom,v.updateProjectionMatrix(),this.updateActiveCamera(g),this.updateSpectatorCamera(g)},updateActiveCamera:function(g){var y=this.data,v=this.el,_=this.system;g&&g.active===y.active||y.spectator||(y.active&&_.activeCameraEl!==v?_.setActiveCamera(v):!y.active&&_.activeCameraEl===v&&_.disableActiveCamera())},updateSpectatorCamera:function(g){var y=this.data,v=this.el,_=this.system;g&&g.spectator===y.spectator||(y.spectator&&_.spectatorCameraEl!==v?_.setSpectatorCamera(v):!y.spectator&&_.spectatorCameraEl===v&&_.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/index.js"),g=A.bind,y={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},v={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},_={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},x={DOWN:["selectstart"],UP:["selectend"]},b="a-mouse-cursor-hover";c.exports.Component=f("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:A.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},multiple:!0,init:function(){var m=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=A.debounce(function(){m.canvasBounds=m.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=g(this.onCursorDown,this),this.onCursorUp=g(this.onCursorUp,this),this.onIntersection=g(this.onIntersection,this),this.onIntersectionCleared=g(this.onIntersectionCleared,this),this.onMouseMove=g(this.onMouseMove,this),this.onEnterVR=g(this.onEnterVR,this)},update:function(m){this.data.rayOrigin!==m.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var m=this.el.sceneEl.frame,S=this.activeXRInput;this.data.rayOrigin==="xrselect"&&m&&S&&this.onMouseMove({frame:m,inputSource:S,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var m=this.el;m.removeState(v.HOVERING),m.removeState(v.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(v.HOVERED),this.removeEventListeners()},addEventListeners:function(){var m,S=this.data,C=this.el,M=this;function T(){m=C.sceneEl.canvas,!(S.downEvents.length||S.upEvents.length)&&(_.DOWN.forEach(function(N){m.addEventListener(N,M.onCursorDown)}),_.UP.forEach(function(N){m.addEventListener(N,M.onCursorUp)}))}m=C.sceneEl.canvas,m?T():C.sceneEl.addEventListener("render-target-loaded",T),S.downEvents.forEach(function(N){C.addEventListener(N,M.onCursorDown)}),S.upEvents.forEach(function(N){C.addEventListener(N,M.onCursorUp)}),C.addEventListener("raycaster-intersection",this.onIntersection),C.addEventListener("raycaster-closest-entity-changed",this.onIntersection),C.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),C.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),C.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var m,S=this.data,C=this.el,M=this;m=C.sceneEl.canvas,m&&!S.downEvents.length&&!S.upEvents.length&&(_.DOWN.forEach(function(T){m.removeEventListener(T,M.onCursorDown)}),_.UP.forEach(function(T){m.removeEventListener(T,M.onCursorUp)})),S.downEvents.forEach(function(T){C.removeEventListener(T,M.onCursorDown)}),S.upEvents.forEach(function(T){C.removeEventListener(T,M.onCursorUp)}),C.removeEventListener("raycaster-intersection",this.onIntersection),C.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),m.removeEventListener("mousemove",this.onMouseMove),m.removeEventListener("touchstart",this.onMouseMove),m.removeEventListener("touchmove",this.onMouseMove),C.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),C.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var m,S=this.el;m=S.sceneEl.canvas,m.removeEventListener("mousemove",this.onMouseMove),m.removeEventListener("touchmove",this.onMouseMove),S.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(m.addEventListener("mousemove",this.onMouseMove,!1),m.addEventListener("touchmove",this.onMouseMove,!1),S.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var m=new THREE.Vector3,S=new THREE.Vector2,C=new THREE.Vector3,M={origin:C,direction:m};return function(T){var N=this.canvasBounds,P=this.el.sceneEl.camera,k,D,z,Y,ne,O,F,U;P.parent.updateMatrixWorld(),T.type==="touchmove"||T.type==="touchstart"?D=T.touches.item(0):D=T,k=D.clientX-N.left,z=D.clientY-N.top,S.x=k/N.width*2-1,S.y=-(z/N.height)*2+1,this.data.rayOrigin==="xrselect"&&(T.type==="selectstart"||T.type==="fakeselectevent")?(Y=T.frame,ne=T.inputSource,O=this.el.renderer.xr.getReferenceSpace(),F=Y.getPose(ne.targetRaySpace,O),U=F.transform,m.set(0,0,-1),m.applyQuaternion(U.orientation),C.copy(U.position)):T.type==="fakeselectout"?(m.set(0,1,0),C.set(0,9999,0)):P&&P.isPerspectiveCamera?(C.setFromMatrixPosition(P.matrixWorld),m.set(S.x,S.y,.5).unproject(P).sub(C).normalize()):P&&P.isOrthographicCamera?(C.set(S.x,S.y,(P.near+P.far)/(P.near-P.far)).unproject(P),m.set(0,0,-1).transformDirection(P.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+P.type),this.el.setAttribute("raycaster",M),T.type==="touchmove"&&T.preventDefault()}}(),onCursorDown:function(m){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&m.type==="touchstart"&&(this.onMouseMove(m),this.el.components.raycaster.checkIntersections(),m.preventDefault()),this.data.rayOrigin==="xrselect"&&m.type==="selectstart"&&(this.activeXRInput=m.inputSource,this.onMouseMove(m),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(y.MOUSEDOWN,m),this.cursorDownEl=this.intersectedEl},onCursorUp:function(m){if(this.isCursorDown){this.isCursorDown=!1;var S=this.data;this.twoWayEmit(y.MOUSEUP,m),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(y.MOUSEUP,this.intersectedEventDetail)),(!S.fuse||S.rayOrigin==="mouse"||S.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(y.CLICK,m),S.rayOrigin==="xrselect"&&this.activeXRInput===m.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,m.type==="touchend"&&m.preventDefault()}},onIntersection:function(m){var S,C=this.el,M,T,N;M=m.detail.els[0]===C?1:0,N=m.detail.intersections[M],T=m.detail.els[M],T&&this.intersectedEl!==T&&(this.intersectedEl&&(S=this.el.components.raycaster.getIntersection(this.intersectedEl),S&&S.distance<=N.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(T,N)))},onIntersectionCleared:function(m){var S=m.detail.clearedEls;S.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var m=this.el.sceneEl.xrSession,S=this;m&&this.data.rayOrigin!=="mouse"&&(x.DOWN.forEach(function(C){m.addEventListener(C,S.onCursorDown)}),x.UP.forEach(function(C){m.addEventListener(C,S.onCursorUp)}))},setIntersection:function(m,S){var C=this.el,M=this.data,T=this;this.intersectedEl!==m&&(this.intersectedEl=m,C.addState(v.HOVERING),m.addState(v.HOVERED),this.twoWayEmit(y.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(b),!(M.fuseTimeout===0||!M.fuse||M.rayOrigin==="xrselect"||M.rayOrigin==="mouse")&&(C.addState(v.FUSING),this.twoWayEmit(y.FUSING),this.fuseTimeout=setTimeout(function(){C.removeState(v.FUSING),T.twoWayEmit(y.CLICK)},M.fuseTimeout)))},clearCurrentIntersection:function(m){var S,C,M,T=this.el;this.intersectedEl&&(this.intersectedEl.removeState(v.HOVERED),T.removeState(v.HOVERING),T.removeState(v.FUSING),this.twoWayEmit(y.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(b),this.intersectedEl=null,clearTimeout(this.fuseTimeout),m!==!0&&(M=this.el.components.raycaster.intersections,M.length!==0&&(S=M[0].object.el===T?1:0,C=M[S],C&&this.setIntersection(C.object.el,C))))},twoWayEmit:function(m,S){var C=this.el,M=this.intersectedEl,T;function N(P,k){S instanceof MouseEvent?P.mouseEvent=S:typeof TouchEvent<"u"&&S instanceof TouchEvent&&(P.touchEvent=S)}T=this.el.components.raycaster.getIntersection(M),this.eventDetail.intersectedEl=M,this.eventDetail.intersection=T,N(this.eventDetail),C.emit(m,this.eventDetail),M&&(this.intersectedEventDetail.intersection=T,N(this.intersectedEventDetail),M.emit(m,this.intersectedEventDetail))}})},"./src/components/daydream-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x="https://cdn.aframe.io/controllers/google/",b=x+"vr_controller_daydream.obj",m=x+"vr_controller_daydream.mtl",S=u("./src/utils/index.js").device.isWebXRAvailable,C="google-daydream",M="Daydream Controller",T=S?C:M,N={axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},P={axes:{touchpad:[0,1]},buttons:["none","none","touchpad","menu","system"]},k=S?P:N;c.exports.Component=f("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:k,bindMethods:function(){this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},init:function(){var D=this;this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(z){_(z.detail.id,"down",D)},this.onButtonUp=function(z){_(z.detail.id,"up",D)},this.onButtonTouchStart=function(z){_(z.detail.id,"touchstart",D)},this.onButtonTouchEnd=function(z){_(z.detail.id,"touchend",D)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var D=this.el;D.addEventListener("buttonchanged",this.onButtonChanged),D.addEventListener("buttondown",this.onButtonDown),D.addEventListener("buttonup",this.onButtonUp),D.addEventListener("touchstart",this.onButtonTouchStart),D.addEventListener("touchend",this.onButtonTouchEnd),D.addEventListener("model-loaded",this.onModelLoaded),D.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var D=this.el;D.removeEventListener("buttonchanged",this.onButtonChanged),D.removeEventListener("buttondown",this.onButtonDown),D.removeEventListener("buttonup",this.onButtonUp),D.removeEventListener("touchstart",this.onButtonTouchStart),D.removeEventListener("touchend",this.onButtonTouchEnd),D.removeEventListener("model-loaded",this.onModelLoaded),D.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,T,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var D=this.el,z=this.data;D.setAttribute("tracked-controls",{armModel:z.armModel,hand:z.hand,idPrefix:T,id:T,orientationOffset:z.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:b,mtl:m})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(D){var z=D.detail.model,Y;this.data.model&&(Y=this.buttonMeshes={},Y.menu=z.getObjectByName("AppButton_AppButton_Cylinder.004"),Y.system=z.getObjectByName("HomeButton_HomeButton_Cylinder.005"),Y.trackpad=z.getObjectByName("TouchPad_TouchPad_Cylinder.003"),Y.touchpad=z.getObjectByName("TouchPad_TouchPad_Cylinder.003"),z.position.set(0,0,-.04))},onAxisMoved:function(D){v(this,this.mapping.axes,D)},onButtonChanged:function(D){var z=this.mapping.buttons[D.detail.id];z&&this.el.emit(z+"changed",D.detail.state)},updateModel:function(D,z){this.data.model&&this.updateButtonModel(D,z)},updateButtonModel:function(D,z){var Y=this.buttonMeshes;if(!(!Y||!Y[D])){var ne;switch(z){case"down":ne=this.data.buttonHighlightColor;break;case"touchstart":ne=this.data.buttonTouchedColor;break;default:ne=this.data.buttonColor}Y[D].material.color.set(ne)}}})},"./src/components/gearvr-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x=u("./src/utils/index.js").device.isWebXRAvailable,b="https://cdn.aframe.io/controllers/samsung/",m=b+"gear_vr_controller.obj",S=b+"gear_vr_controller.mtl",C="samsung-gearvr",M="Gear VR",T=x?C:M,N={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},P={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},k=x?P:N;c.exports.Component=f("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:k,bindMethods:function(){this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},init:function(){var D=this;this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(z){_(z.detail.id,"down",D)},this.onButtonUp=function(z){_(z.detail.id,"up",D)},this.onButtonTouchStart=function(z){_(z.detail.id,"touchstart",D)},this.onButtonTouchEnd=function(z){_(z.detail.id,"touchend",D)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var D=this.el;D.addEventListener("buttonchanged",this.onButtonChanged),D.addEventListener("buttondown",this.onButtonDown),D.addEventListener("buttonup",this.onButtonUp),D.addEventListener("touchstart",this.onButtonTouchStart),D.addEventListener("touchend",this.onButtonTouchEnd),D.addEventListener("model-loaded",this.onModelLoaded),D.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var D=this.el;D.removeEventListener("buttonchanged",this.onButtonChanged),D.removeEventListener("buttondown",this.onButtonDown),D.removeEventListener("buttonup",this.onButtonUp),D.removeEventListener("touchstart",this.onButtonTouchStart),D.removeEventListener("touchend",this.onButtonTouchEnd),D.removeEventListener("model-loaded",this.onModelLoaded),D.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,T,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var D=this.el,z=this.data;D.setAttribute("tracked-controls",{armModel:z.armModel,hand:z.hand,idPrefix:T,id:T,orientationOffset:z.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:m,mtl:S})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(D){var z=D.detail.model,Y;this.data.model&&(Y=this.buttonMeshes={},Y.trigger=z.children[2],Y.trackpad=z.children[1],Y.touchpad=z.children[1])},onButtonChanged:function(D){var z=this.mapping.buttons[D.detail.id];z&&this.el.emit(z+"changed",D.detail.state)},onAxisMoved:function(D){v(this,this.mapping.axes,D)},updateModel:function(D,z){this.data.model&&this.updateButtonModel(D,z)},updateButtonModel:function(D,z){var Y=this.buttonMeshes;if(!(!Y||!Y[D])){var ne;switch(z){case"down":ne=this.data.buttonHighlightColor;break;case"touchstart":ne=this.data.buttonTouchedColor;break;default:ne=this.data.buttonColor}Y[D].material.color.set(ne)}}})},"./src/components/generic-tracked-controller-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x="generic",b={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};c.exports.Component=f("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},mapping:b,bindMethods:function(){this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},init:function(){var m=this;this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(S){_(S.detail.id,"down",m)},this.onButtonUp=function(S){_(S.detail.id,"up",m)},this.onButtonTouchStart=function(S){_(S.detail.id,"touchstart",m)},this.onButtonTouchEnd=function(S){_(S.detail.id,"touchend",m)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.el.addEventListener("controllerconnected",function(S){S.detail.name!==m.name&&(m.wasControllerConnected=!0,m.removeEventListeners(),m.removeControllersUpdateListener())})},addEventListeners:function(){var m=this.el;m.addEventListener("buttonchanged",this.onButtonChanged),m.addEventListener("buttondown",this.onButtonDown),m.addEventListener("buttonup",this.onButtonUp),m.addEventListener("touchstart",this.onButtonTouchStart),m.addEventListener("touchend",this.onButtonTouchEnd),m.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var m=this.el;m.removeEventListener("buttonchanged",this.onButtonChanged),m.removeEventListener("buttondown",this.onButtonDown),m.removeEventListener("buttonup",this.onButtonUp),m.removeEventListener("touchstart",this.onButtonTouchStart),m.removeEventListener("touchend",this.onButtonTouchEnd),m.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var m=this.data,S=m.hand?m.hand:void 0;y(this,x,{hand:S,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var m=this.el,S=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}m.setAttribute("tracked-controls",{hand:S.hand,idPrefix:x,orientationOffset:S.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(m){var S=this.mapping.buttons[m.detail.id];S&&this.el.emit(S+"changed",m.detail.state)},onAxisMoved:function(m){v(this,this.mapping.axes,m)},initDefaultModel:function(){var m=this.modelEl=document.createElement("a-entity");m.setAttribute("geometry",{primitive:"sphere",radius:.03}),m.setAttribute("material",{color:this.data.color}),this.el.appendChild(m)}})},"./src/components/geometry.js":(c,d,u)=>{var f=u("./src/core/geometry.js").geometries,A=u("./src/core/geometry.js").geometryNames,g=u("./src/core/component.js").registerComponent,y=u("./src/lib/three.js"),v=new y.BufferGeometry;c.exports.Component=g("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:A,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(_){var x=this.data,b=this.el,m,S=this.system;this.geometry&&(S.unuseGeometry(_),this.geometry=null),this.geometry=S.getOrCreateGeometry(x),m=b.getObject3D("mesh"),m?m.geometry=this.geometry:(m=new y.Mesh,m.geometry=this.geometry,this.el.getAttribute("material")||(m.material=new y.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),b.setObject3D("mesh",m))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=v,this.geometry=null},updateSchema:function(_){var x=this.oldData&&this.oldData.primitive,b=_.primitive,m=f[b]&&f[b].schema;if(!m)throw new Error("Unknown geometry schema `"+b+"`");x&&x===b||this.extendSchema(m)}})},"./src/components/gltf-model.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js"),g=u("./src/utils/index.js"),y=g.debug("components:gltf-model:warn");c.exports.Component=f("gltf-model",{schema:{type:"model"},init:function(){var v=this,_=this.system.getDRACOLoader(),x=this.system.getMeshoptDecoder(),b=this.system.getKTX2Loader();this.model=null,this.loader=new A.GLTFLoader,_&&this.loader.setDRACOLoader(_),x?this.ready=x.then(function(m){v.loader.setMeshoptDecoder(m)}):this.ready=Promise.resolve(),b&&this.loader.setKTX2Loader(b)},update:function(){var v=this,_=this.el,x=this.data;x&&(this.remove(),this.ready.then(function(){v.loader.load(x,function(m){v.model=m.scene||m.scenes[0],v.model.animations=m.animations,_.setObject3D("mesh",v.model),_.emit("model-loaded",{format:"gltf",model:v.model})},void 0,function(m){var S=m&&m.message?m.message:"Failed to load glTF model";y(S),_.emit("model-error",{format:"gltf",src:x})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"./src/components/hand-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A={toonLeft:"https://cdn.aframe.io/controllers/hands/leftHand.glb",toonRight:"https://cdn.aframe.io/controllers/hands/rightHand.glb",lowPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandLow.glb",lowPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandLow.glb",highPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandHigh.glb",highPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandHigh.glb"},g={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},y={};y[g.fist]="grip",y[g.thumbUp]="pistol",y[g.point]="pointing",c.exports.Component=f("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},init:function(){var x=this,b=this.el;this.gesture=g.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){x.handleButton("grip","down")},this.onGripUp=function(){x.handleButton("grip","up")},this.onTrackpadDown=function(){x.handleButton("trackpad","down")},this.onTrackpadUp=function(){x.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){x.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){x.handleButton("trackpad","touchend")},this.onTriggerDown=function(){x.handleButton("trigger","down")},this.onTriggerUp=function(){x.handleButton("trigger","up")},this.onTriggerTouchStart=function(){x.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){x.handleButton("trigger","touchend")},this.onGripTouchStart=function(){x.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){x.handleButton("grip","touchend")},this.onThumbstickDown=function(){x.handleButton("thumbstick","down")},this.onThumbstickUp=function(){x.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){x.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){x.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){x.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){x.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){x.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){x.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),b.addEventListener("controllerconnected",this.onControllerConnected),b.addEventListener("controllerdisconnected",this.onControllerDisconnected),b.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(x,b){var m=this.el.getObject3D("mesh");!m||!m.mixer||m.mixer.update(b/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var x=this.el;x.addEventListener("gripdown",this.onGripDown),x.addEventListener("gripup",this.onGripUp),x.addEventListener("trackpaddown",this.onTrackpadDown),x.addEventListener("trackpadup",this.onTrackpadUp),x.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),x.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),x.addEventListener("triggerdown",this.onTriggerDown),x.addEventListener("triggerup",this.onTriggerUp),x.addEventListener("triggertouchstart",this.onTriggerTouchStart),x.addEventListener("triggertouchend",this.onTriggerTouchEnd),x.addEventListener("griptouchstart",this.onGripTouchStart),x.addEventListener("griptouchend",this.onGripTouchEnd),x.addEventListener("thumbstickdown",this.onThumbstickDown),x.addEventListener("thumbstickup",this.onThumbstickUp),x.addEventListener("abuttontouchstart",this.onAorXTouchStart),x.addEventListener("abuttontouchend",this.onAorXTouchEnd),x.addEventListener("bbuttontouchstart",this.onBorYTouchStart),x.addEventListener("bbuttontouchend",this.onBorYTouchEnd),x.addEventListener("xbuttontouchstart",this.onAorXTouchStart),x.addEventListener("xbuttontouchend",this.onAorXTouchEnd),x.addEventListener("ybuttontouchstart",this.onBorYTouchStart),x.addEventListener("ybuttontouchend",this.onBorYTouchEnd),x.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),x.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var x=this.el;x.removeEventListener("gripdown",this.onGripDown),x.removeEventListener("gripup",this.onGripUp),x.removeEventListener("trackpaddown",this.onTrackpadDown),x.removeEventListener("trackpadup",this.onTrackpadUp),x.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),x.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),x.removeEventListener("triggerdown",this.onTriggerDown),x.removeEventListener("triggerup",this.onTriggerUp),x.removeEventListener("triggertouchstart",this.onTriggerTouchStart),x.removeEventListener("triggertouchend",this.onTriggerTouchEnd),x.removeEventListener("griptouchstart",this.onGripTouchStart),x.removeEventListener("griptouchend",this.onGripTouchEnd),x.removeEventListener("thumbstickdown",this.onThumbstickDown),x.removeEventListener("thumbstickup",this.onThumbstickUp),x.removeEventListener("abuttontouchstart",this.onAorXTouchStart),x.removeEventListener("abuttontouchend",this.onAorXTouchEnd),x.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),x.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),x.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),x.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),x.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),x.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),x.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),x.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(x){var b,m=this.el,S=this.data.hand,C=this.data.handModelStyle,M=this.data.color,T=this;if(b={hand:S,model:!1},S!==x){var N=A[C+S.charAt(0).toUpperCase()+S.slice(1)];this.loader.load(N,function(P){var k=P.scene.children[0],D=S==="left"?Math.PI/2:-Math.PI/2,z=m.sceneEl.hasWebXR?-Math.PI/2:0;k.mixer=new THREE.AnimationMixer(k),T.clips=P.animations,m.setObject3D("mesh",k);var Y=k.children[1].material;Y.color=new THREE.Color(M),k.position.set(0,0,0),k.rotation.set(z,0,D),m.setAttribute("magicleap-controls",b),m.setAttribute("vive-controls",b),m.setAttribute("oculus-touch-controls",b),m.setAttribute("windows-motion-controls",b),m.setAttribute("hp-mixed-reality-controls",b)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(x,b){var m,S=b==="down",C=b==="touchstart";if(b.indexOf("touch")===0){if(C===this.touchedButtons[x])return;this.touchedButtons[x]=C}else{if(S===this.pressedButtons[x])return;this.pressedButtons[x]=S}m=this.gesture,this.gesture=this.determineGesture(),this.gesture!==m&&(this.animateGesture(this.gesture,m),this.emitGestureEvents(this.gesture,m))},determineGesture:function(){var x,b=this.pressedButtons.grip,m=this.pressedButtons.surface||this.touchedButtons.surface,S=this.pressedButtons.trackpad||this.touchedButtons.trackpad,C=this.pressedButtons.trigger||this.touchedButtons.trigger,M=this.touchedButtons.AorX||this.touchedButtons.BorY,T=_(this.el.components["tracked-controls"]);return T?b||C?x=g.fist:S&&(x=g.point):b?m||M||S?x=C?g.fist:g.point:x=C?g.thumbUp:g.pointThumb:C&&(x=g.hold),x},getClip:function(x){var b,m;for(m=0;m<this.clips.length;m++)if(b=this.clips[m],b.name===x)return b},animateGesture:function(x,b){if(x){this.playAnimation(x||g.open,b,!1);return}this.playAnimation(b,b,!0)},emitGestureEvents:function(x,b){var m=this.el,S;b!==x&&(S=v(b,!1),S&&m.emit(S),S=v(x,!0),S&&m.emit(S))},playAnimation:function(x,b,m){var S,C,M=this.el.getObject3D("mesh"),T;if(M){if(M.mixer.stopAllAction(),S=this.getClip(x),T=M.mixer.clipAction(S),T.clampWhenFinished=!0,T.loop=THREE.LoopRepeat,T.repetitions=0,T.timeScale=m?-1:1,T.time=m?S.duration:0,T.weight=1,!b||x===b){M.mixer.stopAllAction(),T.play();return}S=this.getClip(b),C=M.mixer.clipAction(S),C.weight=.15,C.play(),T.play(),C.crossFadeTo(T,.15,!0)}}});function v(x,b){var m;if(x){if(m=y[x],m==="grip")return m+(b?"close":"open");if(m==="point")return m+(b?"up":"down");if(m==="pointing"||m==="pistol")return m+(b?"start":"end")}}function _(x){var b=x&&x.controller,m=b&&(b.id&&b.id.indexOf("OpenVR ")===0||b.profiles&&b.profiles[0]&&b.profiles[0]==="htc-vive");return m}},"./src/components/hand-tracking-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v="https://cdn.aframe.io/controllers/oculus-hands/v4/left.glb",_="https://cdn.aframe.io/controllers/oculus-hands/v4/right.glb",x=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],b=.015,m=.03,S=.5;c.exports.Component=f("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"}},bindMethods:function(){this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var C=0;C<this.jointEls.length;++C)this.jointEls[C].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var C=0;C<this.jointEls.length;++C)this.jointEls[C].object3D.visible=!1},init:function(){var C=this.el.sceneEl,M=C.getAttribute("webxr").optionalFeatures;M.push("hand-tracking"),C.setAttribute("webxr",{optionalFeatures:M}),this.onModelLoaded=this.onModelLoaded.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3},this.indexTipPosition=new THREE.Vector3,this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace)},updateReferenceSpace:function(){var C=this,M=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!M){var T=C.el.sceneEl.systems.webxr.sessionReferenceSpaceType;M.requestReferenceSpace(T).then(function(N){C.referenceSpace=N.getOffsetReferenceSpace(new XRRigidTransform({x:0,y:1.5,z:0}))}).catch(function(N){throw C.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(T,"tracked-controls-webxr uses reference space "+T),N})}},checkIfControllerPresent:function(){var C=this.data,M=C.hand?C.hand:void 0;y(this,"",{hand:M,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var C=this.el.sceneEl,M=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,T=C.frame,N=this.el.components["tracked-controls-webxr"];!M||!T||!N||M.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),T.getJointPose&&this.updateHandModel(),this.detectGesture())},updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(C){for(var M=this.bones,T=0;T<M.length;T++)if(M[T].name===C)return M[T];return null},updateHandMeshModel:function(){var C=this.el.sceneEl.frame,M=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,T=this.referenceSpace;if(!(!M||!this.mesh||!T)){this.mesh.visible=!1;for(var N of M.hand.values()){var P,k,D;k=C.getJointPose(N,T),P=this.getBone(N.jointName),P!=null&&k&&(D=k.transform,this.mesh.visible=!0,P.position.copy(D.position),P.quaternion.copy(D.orientation))}}},updateHandDotsModel:function(){var C=this.el.sceneEl.frame,M=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,T=this.el.components["tracked-controls-webxr"],N=T.system.referenceSpace,P,k,D,z=0;for(var Y of M.hand.values())P=this.jointEls[z++],k=P.object3D,D=C.getJointPose(Y,N),P.object3D.visible=!!D,D&&(k.matrix.elements=D.transform.matrix,k.matrix.decompose(k.position,k.rotation,k.scale),P.setAttribute("scale",{x:D.radius,y:D.radius,z:D.radius}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var C=new THREE.Vector3;return function(){var M=this.el.sceneEl.frame,T=this.indexTipPosition,N=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=this.el.components["tracked-controls-webxr"],k=this.referenceSpace||P.system.referenceSpace,D=N.hand.get("index-finger-tip"),z=N.hand.get("thumb-tip");if(!(!D||!z)){var Y=M.getJointPose(D,k),ne=M.getJointPose(z,k);if(!(!Y||!ne)){C.copy(ne.transform.position),T.copy(Y.transform.position);var O=T.distanceTo(C);O<b&&this.isPinched===!1&&(this.isPinched=!0,this.pinchEventDetail.position.copy(T).lerp(C,S),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchstarted",this.pinchEventDetail)),O>m&&this.isPinched===!0&&(this.isPinched=!1,this.pinchEventDetail.position.copy(T).lerp(C,S),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchended",this.pinchEventDetail)),this.isPinched&&(this.pinchEventDetail.position.copy(T).lerp(C,S),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchmoved",this.pinchEventDetail)),T.y+=1.5}}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var C=this.el,M=this.data;C.setAttribute("tracked-controls",{hand:M.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var C;this.checkIfControllerPresent(),C=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,this.el.getObject3D("mesh")&&(!C||!C.hand||!C.hand[0])&&(this.el.getObject3D("mesh").visible=!1)},initDefaultModel:function(){this.el.getObject3D("mesh")||(this.data.modelStyle==="dots"&&this.initDotsModel(),this.data.modelStyle==="mesh"&&this.initMeshHandModel())},initDotsModel:function(){if(this.jointEls.length===0)for(var C=0;C<x.length;++C){var M=this.jointEl=document.createElement("a-entity");M.setAttribute("geometry",{primitive:"sphere",radius:1}),M.setAttribute("material",{color:this.data.modelColor}),M.object3D.visible=!1,this.el.appendChild(M),this.jointEls.push(M)}},initMeshHandModel:function(){var C=this.data.hand==="left"?v:_;this.el.setAttribute("gltf-model",C)},onModelLoaded:function(){var C=this.mesh=this.el.getObject3D("mesh").children[0],M=this.skinnedMesh=C.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=M.skeleton.bones,this.el.removeObject3D("mesh"),C.position.set(0,1.5,0),C.rotation.set(0,0,0),M.frustumCulled=!1,M.material=new THREE.MeshStandardMaterial({skinning:!0,color:this.data.modelColor}),this.el.setObject3D("mesh",C))}})},"./src/components/hide-on-enter-ar.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("hide-on-enter-ar",{init:function(){var A=this;this.el.sceneEl.addEventListener("enter-vr",function(){A.el.sceneEl.is("ar-mode")&&(A.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){A.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(c,d,u)=>{var f=u("./src/utils/bind.js"),A=u("./src/core/component.js").registerComponent,g=u("./src/lib/three.js"),y=u("./src/utils/tracked-controls.js"),v=y.checkControllerPresentAndSetup,_=y.emitIfAxesChanged,x=y.onButtonEvent,b="hp-mixed-reality",m="https://cdn.aframe.io/controllers/hp/mixed-reality/",S={x:0,y:0,z:.06},C={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},M={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};c.exports.Component=A("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:M,init:function(){var T=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=f(this.onButtonChanged,this),this.onButtonDown=function(N){x(N.detail.id,"down",T,T.data.hand)},this.onButtonUp=function(N){x(N.detail.id,"up",T,T.data.hand)},this.onButtonTouchEnd=function(N){x(N.detail.id,"touchend",T,T.data.hand)},this.onButtonTouchStart=function(N){x(N.detail.id,"touchstart",T,T.data.hand)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var T=this.data;this.controllerIndex=T.hand==="right"?0:T.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=f(this.onModelLoaded,this),this.onControllersUpdate=f(this.onControllersUpdate,this),this.checkIfControllerPresent=f(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=f(this.removeControllersUpdateListener,this),this.onAxisMoved=f(this.onAxisMoved,this)},addEventListeners:function(){var T=this.el;T.addEventListener("buttonchanged",this.onButtonChanged),T.addEventListener("buttondown",this.onButtonDown),T.addEventListener("buttonup",this.onButtonUp),T.addEventListener("touchstart",this.onButtonTouchStart),T.addEventListener("touchend",this.onButtonTouchEnd),T.addEventListener("axismove",this.onAxisMoved),T.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var T=this.el;T.removeEventListener("buttonchanged",this.onButtonChanged),T.removeEventListener("buttondown",this.onButtonDown),T.removeEventListener("buttonup",this.onButtonUp),T.removeEventListener("touchstart",this.onButtonTouchStart),T.removeEventListener("touchend",this.onButtonTouchEnd),T.removeEventListener("axismove",this.onAxisMoved),T.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var T=this.data;v(this,b,{index:this.controllerIndex,hand:T.hand})},injectTrackedControls:function(){var T=this.el,N=this.data;T.setAttribute("tracked-controls",{idPrefix:b,hand:N.hand,controller:this.controllerIndex,orientationOffset:N.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",m+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(T){var N=this.mapping[this.data.hand].buttons[T.detail.id],P;N&&(N==="trigger"&&(P=T.detail.state.value,console.log("analog value of trigger press: "+P)),this.el.emit(N+"changed",T.detail.state))},onModelLoaded:function(T){var N=T.detail.model;this.data.model&&(N.position.copy(S),N.rotation.copy(C),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new g.Vector3(0,0,0)}))},onAxisMoved:function(T){_(this,this.mapping.axes,T)}})},"./src/components/index.js":(c,d,u)=>{u("./src/components/animation.js"),u("./src/components/camera.js"),u("./src/components/cursor.js"),u("./src/components/daydream-controls.js"),u("./src/components/gearvr-controls.js"),u("./src/components/geometry.js"),u("./src/components/generic-tracked-controller-controls.js"),u("./src/components/gltf-model.js"),u("./src/components/hand-tracking-controls.js"),u("./src/components/hand-controls.js"),u("./src/components/hide-on-enter-ar.js"),u("./src/components/hp-mixed-reality-controls.js"),u("./src/components/layer.js"),u("./src/components/laser-controls.js"),u("./src/components/light.js"),u("./src/components/line.js"),u("./src/components/link.js"),u("./src/components/look-controls.js"),u("./src/components/magicleap-controls.js"),u("./src/components/material.js"),u("./src/components/obj-model.js"),u("./src/components/oculus-go-controls.js"),u("./src/components/oculus-touch-controls.js"),u("./src/components/position.js"),u("./src/components/raycaster.js"),u("./src/components/rotation.js"),u("./src/components/scale.js"),u("./src/components/shadow.js"),u("./src/components/sound.js"),u("./src/components/text.js"),u("./src/components/tracked-controls.js"),u("./src/components/tracked-controls-webvr.js"),u("./src/components/tracked-controls-webxr.js"),u("./src/components/visible.js"),u("./src/components/valve-index-controls.js"),u("./src/components/vive-controls.js"),u("./src/components/vive-focus-controls.js"),u("./src/components/wasd-controls.js"),u("./src/components/windows-motion-controls.js"),u("./src/components/scene/ar-hit-test.js"),u("./src/components/scene/background.js"),u("./src/components/scene/debug.js"),u("./src/components/scene/device-orientation-permission-ui.js"),u("./src/components/scene/embedded.js"),u("./src/components/scene/inspector.js"),u("./src/components/scene/fog.js"),u("./src/components/scene/keyboard-shortcuts.js"),u("./src/components/scene/pool.js"),u("./src/components/scene/reflection.js"),u("./src/components/scene/screenshot.js"),u("./src/components/scene/stats.js"),u("./src/components/scene/vr-mode-ui.js")},"./src/components/laser-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/index.js");f("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var g=this.config,y=this.data,v=this.el,_=this,x={hand:y.hand,model:y.model};v.setAttribute("daydream-controls",x),v.setAttribute("gearvr-controls",x),v.setAttribute("hp-mixed-reality-controls",x),v.setAttribute("magicleap-controls",x),v.setAttribute("oculus-go-controls",x),v.setAttribute("oculus-touch-controls",x),v.setAttribute("valve-index-controls",x),v.setAttribute("vive-controls",x),v.setAttribute("vive-focus-controls",x),v.setAttribute("windows-motion-controls",x),v.setAttribute("generic-tracked-controller-controls",{hand:x.hand}),v.addEventListener("controllerconnected",b),v.addEventListener("controllerdisconnected",m),v.addEventListener("controllermodelready",function(S){b(S),_.modelReady=!0});function b(S){var C=g[S.detail.name];if(C){var M=A.extend({showLine:!0},C.raycaster||{});S.detail.rayOrigin&&(M.origin=S.detail.rayOrigin.origin,M.direction=S.detail.rayOrigin.direction,M.showLine=!0),S.detail.rayOrigin||!_.modelReady?v.setAttribute("raycaster",M):v.setAttribute("raycaster","showLine",!0),v.setAttribute("cursor",A.extend({fuse:!1},C.cursor))}}function m(){v.setAttribute("raycaster","showLine",!1)}},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:.001,z:0}}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/index.js"),g=A.debug("components:layer:warn");c.exports.Component=f("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var v=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=v.createFramebuffer();var _=this.el.sceneEl.getAttribute("webxr").requiredFeatures;_.push("layers"),this.el.sceneEl.getAttribute("webxr","requiredFeatures",_),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(v){this.data.src!==v.src&&this.updateSrc()},updateSrc:function(){var v=this.data.type;if(this.texture=void 0,v==="quad"){this.loadQuadImage();return}if(v==="monocubemap"||v==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var v,_=this.xrGLFactory,x=this.el.sceneEl.frame,b=this.data.src,m=this.data.type;this.visibilityChanged=!1,this.layer&&(m!=="monocubemap"&&m!=="stereocubemap"||(b.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,m==="monocubemap"?(v=_.getSubImage(this.layer,x),this.loadCubeMapImage(v.colorTexture,b,0)):(v=_.getSubImage(this.layer,x,"left"),this.loadCubeMapImage(v.colorTexture,b,0),v=_.getSubImage(this.layer,x,"right"),this.loadCubeMapImage(v.colorTexture,b,6))))},loadQuadImage:function(){var v=this.data.src,_=this;this.el.sceneEl.systems.material.loadTexture(v,{src:v},function(b){_.el.sceneEl.renderer.initTexture(b),_.texture=b,v.tagName==="VIDEO"&&setTimeout(function(){_.textureIsVideo=!0},1e3),_.layer&&(_.layer.height=_.data.height/2||_.texture.image.height/1e3,_.layer.width=_.data.width/2||_.texture.image.width/1e3,_.needsRedraw=!0),_.updateQuadPanel()})},preGenerateCubeMapTextures:function(v,_){this.data.type==="monocubemap"?this.generateCubeMapTextures(v,0,_):(this.generateCubeMapTextures(v,0,_),this.generateCubeMapTextures(v,6,_))},generateCubeMapTextures:function(v,_,x){for(var b=this.data,m=this.cubeFaceSize,S=Math.min(v.width,v.height),C=[],M,T,N=0;N<6;N++){var P=document.createElement("CANVAS");P.width=P.height=m;var k=P.getContext("2d");b.rotateCubemap&&(N===2||N===3)&&(k.save(),k.translate(m,m),k.rotate(Math.PI)),k.drawImage(v,(N+_)*S,0,S,S,0,0,m,m),k.restore(),x&&x(),C.push(P)}return b.rotateCubemap&&(M=C[0],T=C[1],C[0]=T,C[1]=M,M=C[4],T=C[5],C[4]=T,C[5]=M),x&&x(),C},loadCubeMapImage:function(v,_,x){var b=this.el.sceneEl.renderer.getContext(),m;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),b.bindTexture(b.TEXTURE_CUBE_MAP,v),!_.complete||this.loadingScreen?m=this.loadingScreenImages:m=this.generateCubeMapTextures(_,x);var S=0;m.forEach(function(C,M){b.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+M,0,0,0,b.RGBA,b.UNSIGNED_BYTE,C),S=b.getError()}),S!==0&&console.log("renderingError, WebGL Error Code: "+S),b.bindTexture(b.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(!this.layer&&this.el.sceneEl.is("vr-mode")&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var v=this,_=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(x){v.visibilityChanged=x.session.visibilityState!=="hidden"},_==="quad"){this.initQuadLayer();return}if(_==="monocubemap"||_==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var v=this.el.sceneEl,_=v.renderer.getContext(),x=this.xrGLFactory=new XRWebGLBinding(v.xrSession,_);this.texture&&(this.layer=x.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),v.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var v=this.data.src,_=this.el.sceneEl,x=_.renderer.getContext(),b=x.getParameter(x.MAX_CUBE_MAP_TEXTURE_SIZE),m=this.cubeFaceSize=Math.min(b,Math.min(v.width,v.height)),S=this.xrGLFactory=new XRWebGLBinding(_.xrSession,x);this.layer=S.createCubeLayer({space:this.referenceSpace,viewPixelWidth:m,viewPixelHeight:m,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),_.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var v=this.cubeFaceSize,_=this.loadingScreenImages=[],x=0;x<6;x++){var b=document.createElement("CANVAS");b.width=b.height=v;var m=b.getContext("2d");b.width=b.height=v,m.fillStyle="black",m.fillRect(0,0,v,v),x!==2&&x!==3&&(m.translate(v,0),m.scale(-1,1),m.fillStyle="white",m.font="30px Arial",m.fillText("Loading",v/2,v/2)),_.push(b)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(v){this.layerEnabled=v,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var v=this.quadPanelEl;this.quadPanelEl||(v=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(v)),v.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),v.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var v=this.el.sceneEl,_=this.el.sceneEl.renderer.getContext(),x=this.xrGLFactory.getSubImage(this.layer,v.frame),b=v.renderer.properties.get(this.texture).__webglTexture,m=_.getParameter(_.FRAMEBUFFER_BINDING);_.viewport(x.viewport.x,x.viewport.y,x.viewport.width,x.viewport.height),_.bindFramebuffer(_.FRAMEBUFFER,this.frameBuffer),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,x.colorTexture,0),y(_,b,x,this.data.src),_.bindFramebuffer(_.FRAMEBUFFER,m)},updateTransform:function(){var v=this.el,_=this.position,x=this.quaternion;v.object3D.updateMatrixWorld(),_.setFromMatrixPosition(v.object3D.matrixWorld),x.setFromRotationMatrix(v.object3D.matrixWorld),this.layerEnabled||_.set(0,0,1e8),this.layer.transform=new XRRigidTransform(_,x)},onEnterVR:function(){var v=this.el.sceneEl,_=v.xrSession;if(!v.hasWebXR||!XRWebGLBinding||!_){g("The layer component requires WebXR and the layers API enabled");return}_.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.needsRedraw=!0,this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(v){this.referenceSpace=v}});function y(v,_,x,b){var m=v.createFramebuffer(),S=x.viewport.x,C=x.viewport.y,M=x.viewport.x+x.viewport.width,T=x.viewport.y+x.viewport.height;b.tagName==="VIDEO"&&(v.bindTexture(v.TEXTURE_2D,_),v.texSubImage2D(v.TEXTURE_2D,0,0,0,b.width,b.height,v.RGB,v.UNSIGNED_BYTE,b)),v.bindFramebuffer(v.READ_FRAMEBUFFER,m),v.framebufferTexture2D(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,_,0),v.readBuffer(v.COLOR_ATTACHMENT0),v.blitFramebuffer(0,0,b.width,b.height,S,C,M,T,v.COLOR_BUFFER_BIT,v.NEAREST),v.bindFramebuffer(v.READ_FRAMEBUFFER,null),v.deleteFramebuffer(m)}},"./src/components/light.js":(c,d,u)=>{var f=u("./src/utils/bind.js"),A=u("./src/utils/index.js"),g=A.diff,y=u("./src/utils/debug.js"),v=u("./src/core/component.js").registerComponent,_=u("./src/lib/three.js"),x=u("./src/utils/math.js"),b=_.MathUtils.degToRad,m=y("components:light:warn"),S=new _.CubeTextureLoader,C={};c.exports.Component=v("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var M=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(M)},update:function(M){var T=this.data,N=g(T,M),P=this.light,k=this.rendererSystem,D=this;if(P&&!("type"in N)){var z=!1;Object.keys(N).forEach(function(Y){var ne=T[Y];switch(Y){case"color":{P.color.set(ne),k.applyColorCorrection(P.color);break}case"groundColor":{P.groundColor.set(ne),k.applyColorCorrection(P.groundColor);break}case"angle":{P.angle=b(ne);break}case"target":{ne===null?(T.type==="spot"||T.type==="directional")&&(P.target=D.defaultTarget):ne.hasLoaded?D.onSetTarget(ne,P):ne.addEventListener("loaded",f(D.onSetTarget,D,ne,P));break}case"envMap":D.updateProbeMap(T,P);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":z||(D.updateShadow(),z=!0);break;case"shadowCameraAutomatic":T.shadowCameraAutomatic?D.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(T.shadowCameraAutomatic)):D.shadowCameraAutomaticEls=[];break;default:P[Y]=ne}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var M=new _.Box3,T=new _.Vector3,N=new _.Vector3,P=new _.Matrix4,k=new _.Sphere,D=new _.Vector3;return function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof _.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var z=this.light.shadow.camera;z.getWorldDirection(T),z.getWorldPosition(N),P.copy(z.matrixWorld),P.invert(),z.near=1,z.left=1e5,z.right=-1e5,z.top=-1e5,z.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(Y){M.setFromObject(Y.object3D),M.getBoundingSphere(k);var ne=x.distanceOfPointFromPlane(N,T,k.center),O=x.nearestPointInPlane(N,T,k.center,D),F=O.applyMatrix4(P);z.near=Math.min(-ne-k.radius-1,z.near),z.left=Math.min(-k.radius+F.x,z.left),z.right=Math.max(k.radius+F.x,z.right),z.top=Math.max(k.radius+F.y,z.top),z.bottom=Math.min(-k.radius+F.y,z.bottom)}),z.updateProjectionMatrix()}}}(),setLight:function(M){var T=this.el,N=this.getLight(M);N&&(this.light&&T.removeObject3D("light"),this.light=N,this.light.el=T,T.setObject3D("light",this.light),(M.type==="spot"||M.type==="directional"||M.type==="hemisphere")&&T.getObject3D("light").translateY(-1),M.type==="spot"&&(T.setObject3D("light-target",this.defaultTarget),T.getObject3D("light-target").position.set(0,0,-1)),M.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(M.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var M=this.el,T=this.data,N=this.light;N.castShadow=T.castShadow;var P=M.getObject3D("cameraHelper");if(T.shadowCameraVisible&&!P?M.setObject3D("cameraHelper",new _.CameraHelper(N.shadow.camera)):!T.shadowCameraVisible&&P&&M.removeObject3D("cameraHelper"),!T.castShadow)return N;N.shadow.bias=T.shadowBias,N.shadow.radius=T.shadowRadius,N.shadow.mapSize.height=T.shadowMapHeight,N.shadow.mapSize.width=T.shadowMapWidth,N.shadow.camera.near=T.shadowCameraNear,N.shadow.camera.far=T.shadowCameraFar,N.shadow.camera instanceof _.OrthographicCamera?(N.shadow.camera.top=T.shadowCameraTop,N.shadow.camera.right=T.shadowCameraRight,N.shadow.camera.bottom=T.shadowCameraBottom,N.shadow.camera.left=T.shadowCameraLeft):N.shadow.camera.fov=T.shadowCameraFov,N.shadow.camera.updateProjectionMatrix(),P&&P.update()},getLight:function(M){var T=M.angle,N=new _.Color(M.color);this.rendererSystem.applyColorCorrection(N),N=N.getHex();var P=M.decay,k=M.distance,D=new _.Color(M.groundColor);this.rendererSystem.applyColorCorrection(D),D=D.getHex();var z=M.intensity,Y=M.type,ne=M.target,O=null;switch(Y.toLowerCase()){case"ambient":return new _.AmbientLight(N,z);case"directional":return O=new _.DirectionalLight(N,z),this.defaultTarget=O.target,ne&&(ne.hasLoaded?this.onSetTarget(ne,O):ne.addEventListener("loaded",f(this.onSetTarget,this,ne,O))),O;case"hemisphere":return new _.HemisphereLight(N,D,z);case"point":return new _.PointLight(N,z,k,P);case"spot":return O=new _.SpotLight(N,z,k,b(T),M.penumbra,P),this.defaultTarget=O.target,ne&&(ne.hasLoaded?this.onSetTarget(ne,O):ne.addEventListener("loaded",f(this.onSetTarget,this,ne,O))),O;case"probe":return O=new _.LightProbe,this.updateProbeMap(M,O),O;default:m("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",Y)}},updateProbeMap:function(M,T){M.envMap||T.copy(new _.LightProbe),C[M.envMap]instanceof window.Promise&&C[M.envMap].then(function(N){T.copy(N)}),C[M.envMap]instanceof _.LightProbe&&T.copy(C[M.envMap]),C[M.envMap]=new window.Promise(function(N){A.srcLoader.validateCubemapSrc(M.envMap,function(k){S.load(k,function(D){var z=_.LightProbeGenerator.fromCubeTexture(D);C[M.envMap]=z,T.copy(z)})})})},onSetTarget:function(M,T){T.target=M.object3D},remove:function(){var M=this.el;M.removeObject3D("light"),M.getObject3D("cameraHelper")&&M.removeObject3D("cameraHelper")}})},"./src/components/line.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var g=this.data,y,v;this.rendererSystem=this.el.sceneEl.systems.renderer,v=this.material=new THREE.LineBasicMaterial({color:g.color,opacity:g.opacity,transparent:g.opacity<1,visible:g.visible}),y=this.geometry=new THREE.BufferGeometry,y.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(v.color),this.line=new THREE.Line(y,v),this.el.setObject3D(this.attrName,this.line)},update:function(g){var y=this.data,v=this.geometry,_=!1,x=this.material,b=v.attributes.position.array;A(y.start,g.start)||(b[0]=y.start.x,b[1]=y.start.y,b[2]=y.start.z,_=!0),A(y.end,g.end)||(b[3]=y.end.x,b[4]=y.end.y,b[5]=y.end.z,_=!0),_&&(v.attributes.position.needsUpdate=!0,v.computeBoundingSphere()),x.color.setStyle(y.color),this.rendererSystem.applyColorCorrection(x.color),x.opacity=y.opacity,x.transparent=y.opacity<1,x.visible=y.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function A(g,y){return!g||!y?!1:g.x===y.x&&g.y===y.y&&g.z===y.z}},"./src/components/link.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/core/shader.js").registerShader,g=u("./src/lib/three.js");c.exports.Component=f("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new g.Quaternion,this.hiddenEls=[]},update:function(y){var v=this.data,_=this.el,x,b;v.visualAspectEnabled&&(this.initVisualAspect(),x=v.highlighted?v.highlightedColor:v.backgroundColor,b=v.highlighted?v.highlightedColor:v.borderColor,_.setAttribute("material","backgroundColor",x),_.setAttribute("material","strokeColor",b),v.on!==y.on&&this.updateEventListener(),y.peekMode!==void 0&&v.peekMode!==y.peekMode&&this.updatePeekMode(),!(!v.image||y.image===v.image)&&_.setAttribute("material","pano",typeof v.image=="string"?v.image:v.image.src))},updatePeekMode:function(){var y=this.el,v=this.sphereEl;this.data.peekMode?(this.hideAll(),y.getObject3D("mesh").visible=!1,v.setAttribute("visible",!0)):(this.showAll(),y.getObject3D("mesh").visible=!0,v.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var y=this.el;y.isPlaying&&(this.removeEventListener(),y.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var y=this.data.on;y&&this.el.removeEventListener(y,this.navigate)},initVisualAspect:function(){var y=this.el,v,_,x;!this.data.visualAspectEnabled||this.visualAspectInitialized||(x=this.textEl=this.textEl||document.createElement("a-entity"),_=this.sphereEl=this.sphereEl||document.createElement("a-entity"),v=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),y.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),y.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),x.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),x.setAttribute("position","0 1.5 0"),y.appendChild(x),v.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),v.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),v.setAttribute("rotation","0 180 0"),v.setAttribute("position","0 0 0"),v.setAttribute("visible",!1),y.appendChild(v),_.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),_.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),_.setAttribute("visible",!1),y.appendChild(_),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var y=new g.Vector3,v=new g.Vector3,_=new g.Quaternion,x=new g.Vector3;return function(){var b=this.el,m=b.object3D,S=b.sceneEl.camera,C,M,T=this.textEl;if(this.data.visualAspectEnabled)if(m.updateMatrixWorld(),S.parent.updateMatrixWorld(),S.updateMatrixWorld(),m.matrix.decompose(v,_,x),v.setFromMatrixPosition(m.matrixWorld),y.setFromMatrixPosition(S.matrixWorld),M=v.distanceTo(y),M>20)this.previousQuaternion||(this.quaternionClone.copy(_),this.previousQuaternion=this.quaternionClone),m.lookAt(y);else{if(C=this.calculateCameraPortalOrientation(),M<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;T.setAttribute("text","width",1.5),C<=0?(T.setAttribute("position","0 0 0.75"),T.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(T.setAttribute("position","0 0 -0.75"),T.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),b.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=C}else C<=0?T.setAttribute("rotation","0 180 0"):T.setAttribute("rotation","0 0 0"),T.setAttribute("text","width",5),T.setAttribute("position","0 1.5 0"),b.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(m.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var y=this.el,v=this.hiddenEls,_=this;v.length>0||y.sceneEl.object3D.traverse(function(x){x&&x.el&&x.el.hasAttribute("link-controls")||!x.el||x===y.sceneEl.object3D||x.el===y||x.el===_.sphereEl||x.el===y.sceneEl.cameraEl||x.el.getAttribute("visible")===!1||x.el===_.textEl||x.el===_.semiSphereEl||(x.el.setAttribute("visible",!1),v.push(x.el))})},showAll:function(){this.hiddenEls.forEach(function(y){y.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var y=new g.Matrix4,v=new g.Vector3,_=new g.Vector3(0,0,1),x=new g.Vector3(0,0,0);return function(){var b=this.el,m=b.sceneEl.camera;return v.set(0,0,0),_.set(0,0,1),x.set(0,0,0),b.object3D.matrixWorld.extractRotation(y),_.applyMatrix4(y),b.object3D.updateMatrixWorld(),b.object3D.localToWorld(x),m.parent.parent.updateMatrixWorld(),m.parent.updateMatrixWorld(),m.updateMatrixWorld(),m.localToWorld(v),v.sub(x).normalize(),_.normalize(),Math.sign(_.dot(v))}}(),remove:function(){this.removeEventListener()}}),A("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js"),g=u("./src/utils/index.js"),y=g.bind,v=Math.PI/2;c.exports.Component=f("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new A.Vector3,this.hmdQuaternion=new A.Quaternion,this.magicWindowAbsoluteEuler=new A.Euler,this.magicWindowDeltaEuler=new A.Euler,this.position=new A.Vector3,this.magicWindowObject=new A.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new A.Vector3,rotation:new A.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var _,x=this.data;(g.device.isMobile()||g.device.isMobileDeviceRequestingDesktopSite())&&(_=this.magicWindowControls=new A.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(_.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?_.enabled=x.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){_.enabled=x.magicWindowTrackingEnabled})))},update:function(_){var x=this.data;x.enabled!==_.enabled&&this.updateGrabCursor(x.enabled),_&&!x.magicWindowTrackingEnabled&&_.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=x.magicWindowTrackingEnabled),_&&!x.pointerLockEnabled!==_.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(_){var x=this.data;x.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=y(this.onMouseDown,this),this.onMouseMove=y(this.onMouseMove,this),this.onMouseUp=y(this.onMouseUp,this),this.onTouchStart=y(this.onTouchStart,this),this.onTouchMove=y(this.onTouchMove,this),this.onTouchEnd=y(this.onTouchEnd,this),this.onEnterVR=y(this.onEnterVR,this),this.onExitVR=y(this.onExitVR,this),this.onPointerLockChange=y(this.onPointerLockChange,this),this.onPointerLockError=y(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new A.Object3D,this.yawObject=new A.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var _=this.el.sceneEl,x=_.canvas;if(!x){_.addEventListener("render-target-loaded",y(this.addEventListeners,this));return}x.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),x.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),_.addEventListener("enter-vr",this.onEnterVR),_.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var _=this.el.sceneEl,x=_&&_.canvas;x&&(x.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),x.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),_.removeEventListener("enter-vr",this.onEnterVR),_.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var _=this.el.object3D,x=this.pitchObject,b=this.yawObject,m=this.el.sceneEl;(m.is("vr-mode")||m.is("ar-mode"))&&m.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),_.rotation.x=this.magicWindowDeltaEuler.x+x.rotation.x,_.rotation.y=this.magicWindowDeltaEuler.y+b.rotation.y,_.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var _=this.magicWindowAbsoluteEuler,x=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),_.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&_.y!==0&&(this.previousMagicWindowYaw=_.y),this.previousMagicWindowYaw&&(x.x=_.x,x.y+=_.y-this.previousMagicWindowYaw,x.z=_.z,this.previousMagicWindowYaw=_.y))},onMouseMove:function(_){var x,b,m,S=this.pitchObject,C=this.previousMouseEvent,M=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(b=_.movementX||_.mozMovementX||0,m=_.movementY||_.mozMovementY||0):(b=_.screenX-C.screenX,m=_.screenY-C.screenY),this.previousMouseEvent.screenX=_.screenX,this.previousMouseEvent.screenY=_.screenY,x=this.data.reverseMouseDrag?1:-1,M.rotation.y+=b*.002*x,S.rotation.x+=m*.002*x,S.rotation.x=Math.max(-v,Math.min(v,S.rotation.x)))},onMouseDown:function(_){var x=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(x.is("vr-mode")||x.is("ar-mode"))&&x.checkHeadsetConnected())&&_.button===0){var b=x&&x.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=_.screenX,this.previousMouseEvent.screenY=_.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(b.requestPointerLock?b.requestPointerLock():b.mozRequestPointerLock&&b.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(_){_.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:_.touches[0].pageX,y:_.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(_){var x,b=this.el.sceneEl.canvas,m,S=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(m=2*Math.PI*(_.touches[0].pageX-this.touchStart.x)/b.clientWidth,x=this.data.reverseTouchDrag?1:-1,S.rotation.y-=m*.5*x,this.touchStart={x:_.touches[0].pageX,y:_.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var _=this.el.sceneEl;_.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),_.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(_){var x=this.el.sceneEl;function b(){x.canvas.classList.add("a-grab-cursor")}function m(){x.canvas.classList.remove("a-grab-cursor")}if(!x.canvas){_?x.addEventListener("render-target-loaded",b):x.addEventListener("render-target-loaded",m);return}if(_){b();return}m()},saveCameraPose:function(){var _=this.el;this.savedPose.position.copy(_.object3D.position),this.savedPose.rotation.copy(_.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var _=this.el,x=this.savedPose;this.hasSavedPose&&(_.object3D.position.copy(x.position),_.object3D.rotation.copy(x.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(c,d,u)=>{var f=u("./src/utils/bind.js"),A=u("./src/core/component.js").registerComponent,g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x="magicleap",b="-one",m=x+b,S="https://cdn.aframe.io/controllers/magicleap/magicleap-one-controller.glb",C={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};c.exports.Component=A("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:C,init:function(){var M=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=f(this.onButtonChanged,this),this.onButtonDown=function(T){_(T.detail.id,"down",M)},this.onButtonUp=function(T){_(T.detail.id,"up",M)},this.onButtonTouchEnd=function(T){_(T.detail.id,"touchend",M)},this.onButtonTouchStart=function(T){_(T.detail.id,"touchstart",M)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var M=this.data;this.controllerIndex=M.hand==="right"?0:M.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=f(this.onModelLoaded,this),this.onControllersUpdate=f(this.onControllersUpdate,this),this.checkIfControllerPresent=f(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=f(this.removeControllersUpdateListener,this),this.onAxisMoved=f(this.onAxisMoved,this)},addEventListeners:function(){var M=this.el;M.addEventListener("buttonchanged",this.onButtonChanged),M.addEventListener("buttondown",this.onButtonDown),M.addEventListener("buttonup",this.onButtonUp),M.addEventListener("touchstart",this.onButtonTouchStart),M.addEventListener("touchend",this.onButtonTouchEnd),M.addEventListener("axismove",this.onAxisMoved),M.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var M=this.el;M.removeEventListener("buttonchanged",this.onButtonChanged),M.removeEventListener("buttondown",this.onButtonDown),M.removeEventListener("buttonup",this.onButtonUp),M.removeEventListener("touchstart",this.onButtonTouchStart),M.removeEventListener("touchend",this.onButtonTouchEnd),M.removeEventListener("axismove",this.onAxisMoved),M.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var M=this.data;y(this,m,{index:this.controllerIndex,hand:M.hand})},injectTrackedControls:function(){var M=this.el,T=this.data;M.setAttribute("tracked-controls",{idPrefix:m,hand:T.hand,controller:this.controllerIndex,orientationOffset:T.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",S)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(M){var T=this.mapping.buttons[M.detail.id],N;T&&(T==="trigger"&&(N=M.detail.state.value,console.log("analog value of trigger press: "+N)),this.el.emit(T+"changed",M.detail.state))},onModelLoaded:function(M){var T=M.detail.model;T.scale.set(.01,.01,.01)},onAxisMoved:function(M){v(this,this.mapping.axes,M)},updateModel:function(M,T){},setButtonColor:function(M,T){}})},"./src/components/material.js":(c,d,u)=>{var f=u("./src/utils/index.js"),A=u("./src/core/component.js"),g=u("./src/lib/three.js"),y=u("./src/core/shader.js"),v=f.debug("components:material:error"),_=A.registerComponent,x=y.shaders,b=y.shaderNames;c.exports.Component=_("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:b,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0}},init:function(){this.material=null},update:function(M){var T=this.data;(!this.shader||T.shader!==M.shader)&&this.updateShader(T.shader),this.shader.update(this.data),this.updateMaterial(M)},updateSchema:function(M){var T,N,P,k;N=M&&M.shader,T=this.oldData&&this.oldData.shader,k=N||T,P=x[k]&&x[k].schema,P||v("Unknown shader schema "+k),!(T&&N===T)&&(this.extendSchema(P),this.updateBehavior())},updateBehavior:function(){var M,T=this.el.sceneEl,N=this.schema,P=this,k;function D(z,Y){var ne;for(ne in k)k[ne]=z;P.shader.update(k)}this.tick=void 0,k={};for(M in N)N[M].type==="time"&&(this.tick=D,k[M]=!0);T&&(this.tick?T.addBehavior(this):T.removeBehavior(this))},updateShader:function(M){var T=this.data,N=x[M]&&x[M].Shader,P;if(!N)throw new Error("Unknown shader "+M);P=this.shader=new N,P.el=this.el,P.init(T),this.setMaterial(P.material),this.updateSchema(T)},updateMaterial:function(M){var T=this.data,N=this.material,P;N.alphaTest=T.alphaTest,N.depthTest=T.depthTest!==!1,N.depthWrite=T.depthWrite!==!1,N.opacity=T.opacity,N.flatShading=T.flatShading,N.side=m(T.side),N.transparent=T.transparent!==!1||T.opacity<1,N.vertexColors=T.vertexColorsEnabled,N.visible=T.visible,N.blending=S(T.blending),N.dithering=T.dithering;for(P in M)break;P&&(M.alphaTest!==T.alphaTest||M.side!==T.side||M.vertexColorsEnabled!==T.vertexColorsEnabled)&&(N.needsUpdate=!0)},remove:function(){var M=new g.MeshBasicMaterial,T=this.material,N=this.el.getObject3D("mesh");N&&(N.material=M),C(T,this.system)},setMaterial:function(M){var T=this.el,N,P=this.system;this.material&&C(this.material,P),this.material=M,P.registerMaterial(M),N=T.getObject3D("mesh"),N?N.material=M:T.addEventListener("object3dset",function k(D){D.detail.type!=="mesh"||D.target!==T||(T.getObject3D("mesh").material=M,T.removeEventListener("object3dset",k))})}});function m(M){switch(M){case"back":return g.BackSide;case"double":return g.DoubleSide;default:return g.FrontSide}}function S(M){switch(M){case"none":return g.NoBlending;case"additive":return g.AdditiveBlending;case"subtractive":return g.SubtractiveBlending;case"multiply":return g.MultiplyBlending;default:return g.NormalBlending}}function C(M,T){M.dispose(),T.unregisterMaterial(M)}},"./src/components/obj-model.js":(c,d,u)=>{var f=u("./src/utils/debug.js"),A=u("./src/core/component.js").registerComponent,g=u("./src/lib/three.js"),y=f("components:obj-model:warn");c.exports.Component=A("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var v=this;this.model=null,this.objLoader=new g.OBJLoader,this.mtlLoader=new g.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(_){v.model&&_.detail.name==="material"&&v.applyMaterial()})},update:function(){var v=this.data;v.obj&&(this.resetMesh(),this.loadObj(v.obj,v.mtl))},remove:function(){this.model&&this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(v,_){var x=this,b=this.el,m=this.mtlLoader,S=this.objLoader,C=this.el.sceneEl.systems.renderer,M=_.substr(0,_.lastIndexOf("/")+1);if(_){b.hasAttribute("material")&&y("Material component properties are ignored when a .MTL is provided"),m.setResourcePath(M),m.load(_,function(T){T.preload(),S.setMaterials(T),S.load(v,function(N){x.model=N,x.model.traverse(function(P){if(P.isMesh){var k=P.material;k.color&&C.applyColorCorrection(k.color),k.map&&C.applyColorCorrection(k.map),k.emissive&&C.applyColorCorrection(k.emissive),k.emissiveMap&&C.applyColorCorrection(k.emissiveMap)}}),b.setObject3D("mesh",N),b.emit("model-loaded",{format:"obj",model:N})})});return}S.load(v,function(N){x.model=N,x.applyMaterial(),b.setObject3D("mesh",N),b.emit("model-loaded",{format:"obj",model:N})})},applyMaterial:function(){var v=this.el.components.material;v&&this.model.traverse(function(_){_ instanceof g.Mesh&&(_.material=v.material)})}})},"./src/components/oculus-go-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x=u("./src/utils/index.js").device.isWebXRAvailable,b="oculus-go",m="Oculus Go",S="https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf",C=x?b:m,M={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},T={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},N=x?T:M;c.exports.Component=f("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:N,bindMethods:function(){this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},init:function(){var P=this;this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(k){_(k.detail.id,"down",P)},this.onButtonUp=function(k){_(k.detail.id,"up",P)},this.onButtonTouchStart=function(k){_(k.detail.id,"touchstart",P)},this.onButtonTouchEnd=function(k){_(k.detail.id,"touchend",P)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var P=this.el;P.addEventListener("buttonchanged",this.onButtonChanged),P.addEventListener("buttondown",this.onButtonDown),P.addEventListener("buttonup",this.onButtonUp),P.addEventListener("touchstart",this.onButtonTouchStart),P.addEventListener("touchend",this.onButtonTouchEnd),P.addEventListener("model-loaded",this.onModelLoaded),P.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var P=this.el;P.removeEventListener("buttonchanged",this.onButtonChanged),P.removeEventListener("buttondown",this.onButtonDown),P.removeEventListener("buttonup",this.onButtonUp),P.removeEventListener("touchstart",this.onButtonTouchStart),P.removeEventListener("touchend",this.onButtonTouchEnd),P.removeEventListener("model-loaded",this.onModelLoaded),P.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,C,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var P=this.el,k=this.data;P.setAttribute("tracked-controls",{armModel:k.armModel,hand:k.hand,idPrefix:C,orientationOffset:k.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",S)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(P){var k=P.detail.model,D;this.data.model&&(D=this.buttonMeshes={},D.trigger=k.getObjectByName("oculus_go_button_trigger"),D.trackpad=k.getObjectByName("oculus_go_touchpad"),D.touchpad=k.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(P){var k=this.mapping.buttons[P.detail.id];k&&this.el.emit(k+"changed",P.detail.state)},onAxisMoved:function(P){v(this,this.mapping.axes,P)},updateModel:function(P,k){this.data.model&&this.updateButtonModel(P,k)},updateButtonModel:function(P,k){var D=this.buttonMeshes;if(!(!D||!D[P])){var z,Y;switch(k){case"down":z=this.data.buttonHighlightColor;break;case"touchstart":z=this.data.buttonTouchedColor;break;default:z=this.data.buttonColor}Y=D[P],Y.material.color.set(z),this.rendererSystem.applyColorCorrection(Y.material.color)}}})},"./src/components/oculus-touch-controls.js":(c,d,u)=>{var f=u("./src/utils/bind.js"),A=u("./src/core/component.js").registerComponent,g=u("./src/lib/three.js"),y=u("./src/utils/tracked-controls.js"),v=y.checkControllerPresentAndSetup,_=y.emitIfAxesChanged,x=y.onButtonEvent,b=u("./src/utils/index.js").device.isWebXRAvailable,m="oculus-touch",S="Oculus Touch",C=b?m:S,M="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",T="https://cdn.aframe.io/controllers/meta/",N={left:{modelUrl:M+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new g.Vector3(-.005,.003,-.055),modelPivotRotation:new g.Euler(0,0,0)},right:{modelUrl:M+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new g.Vector3(.005,.003,-.055),modelPivotRotation:new g.Euler(0,0,0)}},P={left:{modelUrl:M+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new g.Vector3(-.005,.036,-.037),modelPivotRotation:new g.Euler(Math.PI/4.5,0,0)},right:{modelUrl:M+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new g.Vector3(.005,.036,-.037),modelPivotRotation:new g.Euler(Math.PI/4.5,0,0)}},k=b?P:N,D="oculus-touch",z={"oculus-touch":k,"oculus-touch-v2":{left:{modelUrl:M+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new g.Vector3(0,-.007,-.021),modelPivotRotation:new g.Euler(-Math.PI/4,0,0)},right:{modelUrl:M+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new g.Vector3(0,-.007,-.021),modelPivotRotation:new g.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:M+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new g.Vector3(0,0,0),modelPivotRotation:new g.Euler(0,0,0)},right:{modelUrl:M+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new g.Vector3(0,0,0),modelPivotRotation:new g.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:T+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new g.Vector3(0,0,0),modelPivotRotation:new g.Euler(0,0,0)},right:{modelUrl:T+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new g.Vector3(0,0,0),modelPivotRotation:new g.Euler(0,0,0)}}},Y={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},ne={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},O=b?ne:Y;c.exports.Component=A("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:O,bindMethods:function(){this.onButtonChanged=f(this.onButtonChanged,this),this.onThumbstickMoved=f(this.onThumbstickMoved,this),this.onModelLoaded=f(this.onModelLoaded,this),this.onControllersUpdate=f(this.onControllersUpdate,this),this.checkIfControllerPresent=f(this.checkIfControllerPresent,this),this.onAxisMoved=f(this.onAxisMoved,this)},init:function(){var U=this;this.onButtonDown=function(G){x(G.detail.id,"down",U,U.data.hand)},this.onButtonUp=function(G){x(G.detail.id,"up",U,U.data.hand)},this.onButtonTouchStart=function(G){x(G.detail.id,"touchstart",U,U.data.hand)},this.onButtonTouchEnd=function(G){x(G.detail.id,"touchend",U,U.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.triggerEuler=new g.Euler},addEventListeners:function(){var U=this.el;U.addEventListener("buttonchanged",this.onButtonChanged),U.addEventListener("buttondown",this.onButtonDown),U.addEventListener("buttonup",this.onButtonUp),U.addEventListener("touchstart",this.onButtonTouchStart),U.addEventListener("touchend",this.onButtonTouchEnd),U.addEventListener("axismove",this.onAxisMoved),U.addEventListener("model-loaded",this.onModelLoaded),U.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var U=this.el;U.removeEventListener("buttonchanged",this.onButtonChanged),U.removeEventListener("buttondown",this.onButtonDown),U.removeEventListener("buttonup",this.onButtonUp),U.removeEventListener("touchstart",this.onButtonTouchStart),U.removeEventListener("touchend",this.onButtonTouchEnd),U.removeEventListener("axismove",this.onAxisMoved),U.removeEventListener("model-loaded",this.onModelLoaded),U.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){v(this,C,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(U){var G=this.data,V;if(G.model){if(this.displayModel=z[G.controllerType]||z[D],G.controllerType==="auto"){var K=this.el.sceneEl.systems["tracked-controls-webvr"];if(K&&K.vrDisplay){var W=K.vrDisplay.displayName;/^Oculus Quest$/.test(W)&&(this.displayModel=z["oculus-touch-v2"])}else{V=D;for(var J=Object.keys(z),ee=0;ee<U.profiles.length;ee++)if(J.indexOf(U.profiles[ee])!==-1){V=U.profiles[ee];break}this.displayModel=z[V]}}var he=this.displayModel[G.hand].modelUrl;this.isOculusTouchV3=this.displayModel===z["oculus-touch-v3"],this.el.setAttribute("gltf-model",he)}},injectTrackedControls:function(U){var G=this.data,V=m,K=G.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",W=b?V:K;this.el.setAttribute("tracked-controls",{id:W,hand:G.hand,orientationOffset:G.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(U)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(U){var G=this.mapping[this.data.hand].buttons[U.detail.id];if(G){if(this.isOculusTouchV3)this.onButtonChangedV3(U);else{var V=this.buttonMeshes,K;(G==="trigger"||G==="grip")&&(K=U.detail.state.value),V&&(G==="trigger"&&V.trigger&&(V.trigger.rotation.x=this.originalXRotationTrigger-K*(Math.PI/26)),G==="grip"&&V.grip&&(K*=this.data.hand==="left"?-1:1,V.grip.position.x=this.originalXPositionGrip+K*.004))}this.el.emit(G+"changed",U.detail.state)}},clickButtons:["xbutton","ybutton","abutton","bbutton","thumbstick"],onButtonChangedV3:function(U){var G=this.mapping[this.data.hand].buttons[U.detail.id],V=this.buttonObjects,K;V&&(K=U.detail.state.value,K*=this.data.hand==="left"?-1:1,G==="trigger"?(this.triggerEuler.copy(this.buttonRanges.trigger.min.rotation),this.triggerEuler.x+=K*this.buttonRanges.trigger.diff.x,this.triggerEuler.y+=K*this.buttonRanges.trigger.diff.y,this.triggerEuler.z+=K*this.buttonRanges.trigger.diff.z,V.trigger.setRotationFromEuler(this.triggerEuler)):G==="grip"?V.grip.position.x=V.grip.minX+K*.004:this.clickButtons.includes(G)&&(V[G].position.y=K===0?this.buttonRanges[G].unpressedY:this.buttonRanges[G].pressedY))},onModelLoaded:function(U){if(this.data.model){if(this.isOculusTouchV3)this.onOculusTouchV3ModelLoaded(U);else{var G=this.controllerObject3D=U.detail.model,V;V=this.buttonMeshes={},V.grip=G.getObjectByName("buttonHand"),this.originalXPositionGrip=V.grip&&V.grip.position.x,V.trigger=G.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=V.trigger&&V.trigger.rotation.x,V.thumbstick=G.getObjectByName("stick"),V.xbutton=G.getObjectByName("buttonX"),V.abutton=G.getObjectByName("buttonA"),V.ybutton=G.getObjectByName("buttonY"),V.bbutton=G.getObjectByName("buttonB")}for(var K in this.buttonMeshes)this.buttonMeshes[K]&&F(this.buttonMeshes[K]);this.applyOffset(U.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(U){U.position.copy(this.displayModel[this.data.hand].modelPivotOffset),U.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onOculusTouchV3ModelLoaded:function(U){var G=this.controllerObject3D=U.detail.model,V=this.buttonObjects={},K=this.buttonMeshes={},W=this.buttonRanges={};K.grip=G.getObjectByName("squeeze"),V.grip=G.getObjectByName("xr_standard_squeeze_pressed_value"),W.grip={min:G.getObjectByName("xr_standard_squeeze_pressed_min"),max:G.getObjectByName("xr_standard_squeeze_pressed_max")},V.grip.minX=V.grip.position.x,K.thumbstick=G.getObjectByName("thumbstick"),V.thumbstick=G.getObjectByName("xr_standard_thumbstick_pressed_value"),W.thumbstick={min:G.getObjectByName("xr_standard_thumbstick_pressed_min"),max:G.getObjectByName("xr_standard_thumbstick_pressed_max"),originalRotation:this.buttonObjects.thumbstick.rotation.clone()},W.thumbstick.pressedY=V.thumbstick.position.y,W.thumbstick.unpressedY=W.thumbstick.pressedY+Math.abs(W.thumbstick.max.position.y)-Math.abs(W.thumbstick.min.position.y),K.trigger=G.getObjectByName("trigger"),V.trigger=G.getObjectByName("xr_standard_trigger_pressed_value"),W.trigger={min:G.getObjectByName("xr_standard_trigger_pressed_min"),max:G.getObjectByName("xr_standard_trigger_pressed_max")},W.trigger.diff={x:Math.abs(W.trigger.max.rotation.x)-Math.abs(W.trigger.min.rotation.x),y:Math.abs(W.trigger.max.rotation.y)-Math.abs(W.trigger.min.rotation.y),z:Math.abs(W.trigger.max.rotation.z)-Math.abs(W.trigger.min.rotation.z)};var J=this.data.hand==="left"?"x":"a",ee=this.data.hand==="left"?"y":"b",he=J+"button",me=ee+"button";K[he]=G.getObjectByName(J+"_button"),V[he]=G.getObjectByName(J+"_button_pressed_value"),W[he]={min:G.getObjectByName(J+"_button_pressed_min"),max:G.getObjectByName(J+"_button_pressed_max")},K[me]=G.getObjectByName(ee+"_button"),V[me]=G.getObjectByName(ee+"_button_pressed_value"),W[me]={min:G.getObjectByName(ee+"_button_pressed_min"),max:G.getObjectByName(ee+"_button_pressed_max")},W[he].unpressedY=V[he].position.y,W[he].pressedY=W[he].unpressedY+Math.abs(W[he].max.position.y)-Math.abs(W[he].min.position.y),W[me].unpressedY=V[me].position.y,W[me].pressedY=W[me].unpressedY-Math.abs(W[me].max.position.y)+Math.abs(W[me].min.position.y)},onAxisMoved:function(U){_(this,this.mapping[this.data.hand].axes,U)},onThumbstickMoved:function(U){if(!(!this.isOculusTouchV3||!this.buttonMeshes||!this.buttonMeshes.thumbstick))for(var G in U.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[G]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[G]]-Math.PI/8*U.detail[G]*(G==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateModel:function(U,G){this.data.model&&this.updateButtonModel(U,G)},updateButtonModel:function(U,G){var V=this.buttonMeshes,K,W;V&&V[U]&&(W=G==="up"||G==="touchend"?V[U].originalColor||this.data.buttonColor:G==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,K=V[U],K.material.color.set(W),this.rendererSystem.applyColorCorrection(K.material.color))}});function F(U){U.traverse(function(G){var V;G.type==="Mesh"&&(V=G.material.clone(),U.originalColor=G.material.color,G.material.dispose(),G.material=V)})}},"./src/components/position.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("position",{schema:{type:"vec3"},update:function(){var A=this.el.object3D,g=this.data;A.position.set(g.x,g.y,g.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js"),g=u("./src/utils/index.js"),y=g.debug("components:raycaster:warn"),v=/^[\w\s-.,[\]#]*$/,_={childList:!0,attributes:!0,subtree:!0},x={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};c.exports.Component=f("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new A.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new A.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new A.Vector3,this.otherLineEndVec3=new A.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(m){var S=this.data,C=this.el,M=this.raycaster;M.far=S.far,M.near=S.near,S.showLine&&(S.far!==m.far||S.origin!==m.origin||S.direction!==m.direction||!m.showLine)&&(this.unitLineEndVec3.copy(S.direction).normalize(),this.drawLine()),!S.showLine&&m.showLine&&C.removeAttribute("line"),S.objects!==m.objects&&!v.test(S.objects)&&y('[raycaster] Selector "'+S.objects+'" may not update automatically with DOM changes.'),S.objects||y('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),S.autoRefresh!==m.autoRefresh&&C.isPlaying&&(S.autoRefresh?this.addEventListeners():this.removeEventListeners()),m.enabled&&!S.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,_),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var m=this.data,S;S=m.objects?this.el.sceneEl.querySelectorAll(m.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(S),this.dirty=!1},tock:function(m){var S=this.data,C=this.prevCheckTime;S.enabled&&(C&&m-C<S.interval||(this.prevCheckTime=m,this.checkIntersections()))},checkIntersections:function(){var m=this.clearedIntersectedEls,S=this.el,C=this.data,M,T=this.intersectedEls,N,P=this.intersections,k=this.newIntersectedEls,D=this.newIntersections,z=this.prevIntersectedEls,Y=this.rawIntersections;for(this.dirty&&this.refreshObjects(),b(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),Y.length=0,this.raycaster.intersectObjects(this.objects,!0,Y),P.length=0,T.length=0,M=0;M<Y.length;M++)N=Y[M],!(C.showLine&&N.object===S.getObject3D("line"))&&N.object.el&&(P.push(N),T.push(N.object.el));for(D.length=0,k.length=0,M=0;M<P.length;M++)z.indexOf(P[M].object.el)===-1&&(D.push(P[M]),k.push(P[M].object.el));for(m.length=0,M=0;M<z.length;M++)T.indexOf(z[M])===-1&&(z[M].emit(x.INTERSECT_CLEAR,this.intersectedClearedDetail),m.push(z[M]));for(m.length&&S.emit(x.INTERSECTION_CLEAR,this.intersectionClearedDetail),M=0;M<k.length;M++)k[M].emit(x.INTERSECT,this.intersectedDetail);D.length&&(this.intersectionDetail.els=k,this.intersectionDetail.intersections=D,S.emit(x.INTERSECTION,this.intersectionDetail)),(z.length===0&&P.length>0||z.length>0&&P.length===0||z.length&&P.length&&z[0]!==P[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=P,S.emit(x.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),C.showLine&&setTimeout(this.updateLine)},updateLine:function(){var m=this.el,S=this.intersections,C;S.length&&(S[0].object.el===m&&S[1]?C=S[1].distance:C=S[0].distance),this.drawLine(C)},getIntersection:function(m){var S,C;for(S=0;S<this.intersections.length;S++)if(C=this.intersections[S],C.object.el===m)return C;return null},updateOriginDirection:function(){var m=new A.Vector3,S=new A.Vector3;return function(){var M=this.el,T=this.data;if(T.useWorldCoordinates){this.raycaster.set(T.origin,T.direction);return}M.object3D.updateMatrixWorld(),S.setFromMatrixPosition(M.object3D.matrixWorld),(T.origin.x!==0||T.origin.y!==0||T.origin.z!==0)&&(S=M.object3D.localToWorld(S.copy(T.origin))),m.copy(T.direction).transformDirection(M.object3D.matrixWorld).normalize(),this.raycaster.set(S,m)}}(),drawLine:function(m){var S=this.data,C=this.el,M;M=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,m===void 0&&(m=S.far===1/0?1e3:S.far),this.lineData.start=S.origin,this.lineData.end=M.copy(this.unitLineEndVec3).multiplyScalar(m).add(S.origin),this.lineData.color=S.lineColor,this.lineData.opacity=S.lineOpacity,C.setAttribute("line",this.lineData)},flattenObject3DMaps:function(m){var S,C,M=this.objects,T=this.el.sceneEl.object3D;function N(k){return k.parent?N(k.parent):k===T}for(M.length=0,C=0;C<m.length;C++){var P=m[C];if(P.isEntity&&P.object3D&&N(P.object3D))for(S in P.object3DMap)M.push(P.getObject3D(S))}return M},clearAllIntersections:function(){var m;for(m=0;m<this.intersectedEls.length;m++)this.intersectedEls[m].emit(x.INTERSECT_CLEAR,this.intersectedClearedDetail);b(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(x.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function b(m,S){var C;for(m.length=S.length,C=0;C<S.length;C++)m[C]=S[C]}},"./src/components/rotation.js":(c,d,u)=>{var f=u("./src/lib/three.js").MathUtils.degToRad,A=u("./src/core/component.js").registerComponent;c.exports.Component=A("rotation",{schema:{type:"vec3"},update:function(){var g=this.data,y=this.el.object3D;y.rotation.set(f(g.x),f(g.y),f(g.z)),y.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=1e-5;c.exports.Component=f("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var g=this.data,y=this.el.object3D,v=g.x===0?A:g.x,_=g.y===0?A:g.y,x=g.z===0?A:g.z;y.scale.set(v,_,x)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(c,d,u)=>{var f="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",A=u("./src/core/component.js").registerComponent,g=u("./src/lib/three.js"),y=21,v=function(){var m=new g.Quaternion,S=new g.Vector3;function C(M,T,N){T.position.copy(M.transform.position),T.quaternion.copy(M.transform.orientation),S.copy(N),m.copy(M.transform.orientation),S.applyQuaternion(m),T.position.sub(S)}return C}();v.tempFakePose={transform:{orientation:new g.Quaternion,position:new g.Vector3}};function _(m,S){this.renderer=m,this.xrHitTestSource=null,m.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),m.xr.addEventListener("sessionstart",(function(){this.sessionStart(S)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(S)}_.prototype.previousFrameAnchors=new Set,_.prototype.anchorToObject3D=new Map;function x(m){console.warn(m.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}_.prototype.sessionStart=function(S){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){x({message:"No requestHitTestSource on the session."});return}S.space?this.session.requestHitTestSource(S).then((function(C){this.xrHitTestSource=C}).bind(this)).catch(x):S.profile&&this.session.requestHitTestSourceForTransientInput(S).then((function(C){this.xrHitTestSource=C,this.transient=!0}).bind(this)).catch(x)},_.prototype.anchorFromLastHitTestResult=function(m,S){var C=this.lastHitTest;if(C){var M={object3D:m,offset:S};Array.from(this.anchorToObject3D.entries()).forEach((function(T){var N=T[1].object3D,P=T[0];N===m&&(this.anchorToObject3D.delete(P),P.delete())}).bind(this)),C.createAnchor&&C.createAnchor().then((function(T){this.anchorToObject3D.set(T,M)}).bind(this)).catch(function(T){console.warn(T.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},_.prototype.doHit=function(S){if(this.renderer.xr.isPresenting){var C=this.renderer.xr.getReferenceSpace(),M=S.getViewerPose(C),T,N;if(this.xrHitTestSource&&M)return this.transient?(T=S.getHitTestResultsForTransientInput(this.xrHitTestSource),T.length>0?(N=T[0].results,N.length>0?(this.lastHitTest=N[0],N[0].getPose(C)):!1):!1):(T=S.getHitTestResults(this.xrHitTestSource),T.length>0?(this.lastHitTest=T[0],T[0].getPose(C)):!1)}},_.updateAnchorPoses=function(m,S){var C=m.trackedAnchors||_.prototype.previousFrameAnchors;_.prototype.previousFrameAnchors.forEach(function(M){C.has(M)||_.prototype.anchorToObject3D.delete(M)}),C.forEach(function(M){var T,N,P,k;try{T=m.getPose(M.anchorSpace,S)}catch{}T&&(N=_.prototype.anchorToObject3D.get(M),P=N.offset,k=N.object3D,v(T,k,P))})};var b;c.exports.Component=A("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:f,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new g.OrthographicCamera,this.orthoCam.layers.set(y),this.textureTarget=new g.WebGLRenderTarget(512,512,{}),this.basicMaterial=new g.MeshBasicMaterial({color:0,side:g.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new g.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var m=this.el.getAttribute("webxr"),S=m.optionalFeatures;(!S.includes("hit-test")||!S.includes("anchors"))&&(S.push("hit-test"),S.push("anchors"),this.el.setAttribute("webxr",m)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",(function(){if(this.el.is("ar-mode")){var C=this.el.sceneEl.renderer,M=this.session=C.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,b||(b=new Map),M.requestReferenceSpace("viewer").then((function(P){this.hitTest=new _(C,{space:P}),b.set(P,this.hitTest),this.el.emit("ar-hit-test-start")}).bind(this));var T="generic-touchscreen",N=new _(C,{profile:T});M.addEventListener("selectstart",(function(P){if(this.data.enabled===!0){var k=P.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:k,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),k.profiles[0]===T?this.hitTest=N:(this.hitTest=b.get(k)||new _(C,{space:k.targetRaySpace}),b.set(k,this.hitTest)))}}).bind(this)),M.addEventListener("selectend",(function(P){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var k=P.inputSource,D;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(D=this.data.target.object3D,D&&(v.tempFakePose.transform.position.copy(this.bboxMesh.position),v.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),v(v.tempFakePose,D,this.bboxOffset),D.visible=!0,this.hitTest.anchorFromLastHitTestResult(D,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:k,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new g.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(y),this.data.target.object3D.traverse(function(m){m.layers.enable(y)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var m=new g.PlaneGeometry(1,1),S=new g.MeshBasicMaterial({transparent:!0,color:16777215});m.rotateX(-Math.PI/2),m.rotateY(-Math.PI/2),this.bbox=new g.Box3,this.bboxMesh=new g.Mesh(m,S),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var m,S=this.el.sceneEl.renderer,C,M,T=S.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),C=S.getRenderTarget(),S.setRenderTarget(this.textureTarget),S.xr.enabled=!1,M=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,S.render(this.el.object3D,this.orthoCam),this.el.object3D.background=M,this.el.object3D.overrideMaterial=null,S.xr.enabled=T,S.setRenderTarget(C),S.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),m=this.context.getImageData(0,0,512,512);for(var N=0;N<262144;N++)m.data[N*4+3]!==0&&m.data[N*4+3]!==255&&(m.data[N*4+3]=128);this.context.putImageData(m,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var m,S=this.el.sceneEl.frame,C=this.el.sceneEl.renderer;if(S&&_.updateAnchorPoses(S,C.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var M;this.textureCache.has(this.data.src)?M=this.textureCache.get(this.data.src):(M=new g.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,M)),this.bboxMesh.material.map=M,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(m=this.hitTest.doHit(S),m&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(m.transform.position),this.bboxMesh.quaternion.copy(m.transform.orientation)))}})},"./src/components/scene/background.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/core/component.js").components;c.exports.Component=f("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var g=this.data,y=this.el.object3D;g.transparent?y.background=null:y.background=new THREE.Color(g.color)},remove:function(){var g=this.data,y=this.el.object3D;if(g.transparent){y.background=null;return}y.background=A[this.name].schema.color.default}})},"./src/components/scene/debug.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("debug",{schema:{default:!0}})},"./src/components/scene/device-orientation-permission-ui.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/index.js"),g=A.bind,y=u("./src/constants/index.js"),v="a-modal",_="a-dialog",x="a-dialog-text",b="a-dialog-text-container",m="a-dialog-buttons-container",S="a-dialog-button",C="a-dialog-allow-button",M="a-dialog-deny-button",T="a-dialog-ok-button";c.exports.Component=f("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},init:function(){var D=this;if(this.data.enabled){if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&location.protocol==="http:"&&this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=g(this.onDeviceMotionDialogAllowClicked,this),this.onDeviceMotionDialogDenyClicked=g(this.onDeviceMotionDialogDenyClicked,this),DeviceOrientationEvent.requestPermission().then(function(){D.el.emit("deviceorientationpermissiongranted"),D.permissionGranted=!0}).catch(function(){D.devicePermissionDialogEl=N(D.data.denyButtonText,D.data.allowButtonText,D.data.deviceMotionMessage,D.onDeviceMotionDialogAllowClicked,D.onDeviceMotionDialogDenyClicked),D.el.appendChild(D.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var D=this,z=P(D.data.cancelButtonText,D.data.httpsMessage,function(){D.el.removeChild(z)});this.el.appendChild(z)},onDeviceMotionDialogAllowClicked:function(){var D=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(z){z==="granted"?(D.el.emit("deviceorientationpermissiongranted"),D.permissionGranted=!0):D.el.emit("deviceorientationpermissionrejected"),D.remove()}).catch(console.error)}});function N(D,z,Y,ne,O){var F,U,G;return F=document.createElement("div"),F.classList.add(m),U=document.createElement("button"),U.classList.add(S,M),U.setAttribute(y.AFRAME_INJECTED,""),U.innerHTML=D,F.appendChild(U),G=document.createElement("button"),G.classList.add(S,C),G.setAttribute(y.AFRAME_INJECTED,""),G.innerHTML=z,F.appendChild(G),G.addEventListener("click",function(V){V.stopPropagation(),ne()}),U.addEventListener("click",function(V){V.stopPropagation(),O()}),k(Y,F)}function P(D,z,Y){var ne,O;return ne=document.createElement("div"),ne.classList.add(m),O=document.createElement("button"),O.classList.add(S,T),O.setAttribute(y.AFRAME_INJECTED,""),O.innerHTML=D,ne.appendChild(O),O.addEventListener("click",function(F){F.stopPropagation(),Y()}),k(z,ne)}function k(D,z){var Y,ne,O,F;return Y=document.createElement("div"),Y.classList.add(v),Y.setAttribute(y.AFRAME_INJECTED,""),ne=document.createElement("div"),ne.className=_,ne.setAttribute(y.AFRAME_INJECTED,""),Y.appendChild(ne),O=document.createElement("div"),O.classList.add(b),ne.appendChild(O),F=document.createElement("div"),F.classList.add(x),F.innerHTML=D,O.appendChild(F),ne.appendChild(z),Y}},"./src/components/scene/embedded.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var A=this.el,g=A.querySelector(".a-enter-vr");this.data===!0?(g&&g.classList.add("embedded"),A.removeFullScreenStyles()):(g&&g.classList.remove("embedded"),A.addFullScreenStyles())}})},"./src/components/scene/fog.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js"),g=u("./src/utils/debug.js"),y=g("components:fog:warn");c.exports.Component=f("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var _=this.data,x=this.el,b=this.el.object3D.fog;if(!x.isScene){y("Fog component can only be applied to <a-scene>");return}if(!b||_.type!==b.name){x.object3D.fog=v(_),x.systems.material.updateMaterials();return}Object.keys(this.schema).forEach(function(m){var S=_[m];m==="color"&&(S=new A.Color(S)),b[m]=S})},remove:function(){var _=this.el.object3D.fog;_&&(_.far=0,_.near=.1)}});function v(_){var x;return _.type==="exponential"?x=new A.FogExp2(_.color,_.density):x=new A.Fog(_.color,_.near,_.far),x.name=_.type,x}},"./src/components/scene/inspector.js":(c,d,u)=>{var f=u("./src/constants/index.js").AFRAME_INJECTED,A=u("./package.json"),g=u("./src/core/component.js").registerComponent,y=u("./src/utils/index.js");function v(S){var C=S.split(".");return C[2]="x",C.join(".")}var _="https://unpkg.com/aframe-inspector@"+v(A.version)+"/dist/aframe-inspector.min.js",x=_,b="Loading Inspector",m="Error loading Inspector";c.exports.Component=g("inspector",{schema:{url:{default:x}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var S;this.firstPlay&&(S=y.getUrlParameter("inspector"),S!=="false"&&S&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var S='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=b+S},remove:function(){this.removeEventListeners()},onKeydown:function(S){var C=S.keyCode===73&&(S.ctrlKey&&S.altKey||S.getModifierState("AltGraph"));C&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(S){S.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(S){var C=this,M;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(S);return}this.showLoader(),M=document.createElement("script"),M.src=this.data.url,M.setAttribute("data-name","aframe-inspector"),M.setAttribute(f,""),M.onload=function(){AFRAME.INSPECTOR.open(S),C.hideLoader(),C.removeEventListeners()},M.onerror=function(){C.loadingMessageEl.innerHTML=m},document.head.appendChild(M),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/index.js").shouldCaptureKeyEvent;c.exports.Component=f("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(g){var y=this.data;this.enterVREnabled=y.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(g){var y=this.el;A(g)&&(this.enterVREnabled&&g.keyCode===70&&y.enterVR(),this.enterVREnabled&&g.keyCode===27&&y.exitVR())}})},"./src/components/scene/pool.js":(c,d,u)=>{var f=u("./src/utils/debug.js"),A=u("./src/core/component.js").registerComponent,g=f("components:pool:warn");c.exports.Component=A("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var y;for(this.availableEls=[],this.usedEls=[],this.data.mixin||g("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||g("Container "+this.data.container+" not found.")),this.container=this.container||this.el,y=0;y<this.data.size;++y)this.createEntity()},update:function(y){var v=this.data;(y.mixin!==v.mixin||y.size!==v.size)&&this.initPool()},createEntity:function(){var y;y=document.createElement("a-entity"),y.play=this.wrapPlay(y.play),y.setAttribute("mixin",this.data.mixin),y.object3D.visible=!1,y.pause(),this.container.appendChild(y),this.availableEls.push(y);var v=this.usedEls;y.addEventListener("loaded",function(){v.indexOf(y)===-1&&(y.object3DParent=y.object3D.parent,y.object3D.parent.remove(y.object3D))})},wrapPlay:function(y){var v=this.usedEls;return function(){v.indexOf(this)!==-1&&y.call(this)}},requestEntity:function(){var y;if(this.availableEls.length===0){if(this.data.dynamic===!1){g("Requested entity from empty pool: "+this.attrName);return}else g("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return y=this.availableEls.shift(),this.usedEls.push(y),y.object3DParent&&(y.object3DParent.add(y.object3D),this.updateRaycasters()),y.object3D.visible=!0,y},returnEntity:function(y){var v=this.usedEls.indexOf(y);if(v===-1){g("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(v,1),this.availableEls.push(y),y.object3DParent=y.object3D.parent,y.object3D.parent.remove(y.object3D),this.updateRaycasters(),y.object3D.visible=!1,y.pause(),y},updateRaycasters(){var y=document.querySelectorAll("[raycaster]");y.forEach(function(v){v.components.raycaster.setDirty()})}})},"./src/components/scene/reflection.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;function A(g,y,v,_){var x=Math.max(g.primaryLightIntensity.x,Math.max(g.primaryLightIntensity.y,g.primaryLightIntensity.z));y.sh.fromArray(g.sphericalHarmonicsCoefficients),y.intensity=1,v&&(v.color.setRGB(g.primaryLightIntensity.x/x,g.primaryLightIntensity.y/x,g.primaryLightIntensity.z/x),v.intensity=x,_.copy(g.primaryLightDirection))}c.exports.Component=f("reflection",{schema:{directionalLight:{type:"selector"}},init:function(){var g=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var y=this.el.getAttribute("webxr"),v=y.optionalFeatures;v.includes("light-estimation")||(v.push("light-estimation"),this.el.setAttribute("webxr",y)),this.el.addEventListener("enter-vr",function(){var _=g.el.renderer,x=_.xr.getSession();x.requestLightProbe&&g.el.is("ar-mode")&&g.startLightProbe()}),this.el.addEventListener("exit-vr",function(){g.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var g=this.el.renderer,y=g.xr.getSession(),v=this,_=g.getContext();if(!this.probeLight){var x=document.createElement("a-light");x.setAttribute("type","probe"),x.setAttribute("intensity",0),this.el.appendChild(x),this.probeLight=x}switch(y.preferredReflectionFormat){case"srgba8":_.getExtension("EXT_sRGB");break;case"rgba16f":_.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(y,_),_.getExtension("EXT_sRGB"),_.getExtension("OES_texture_half_float"),y.requestLightProbe().then(function(b){v.xrLightProbe=b,b.addEventListener("reflectionchange",v.updateXRCubeMap.bind(v))}).catch(function(b){console.warn("Lighting estimation not supported: "+b.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var g=this.el.renderer,y=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(y){var v=g.properties.get(this.lightingEstimationTexture);v.__webglTexture=y,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var g=this.el.object3D,y=this.el.renderer,v=this.el.frame;if(v&&this.xrLightProbe){var _=v.getLightEstimate(this.xrLightProbe);_&&A(_,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(g.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(y,g),g.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&v&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js"),g=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),y=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);c.exports.Component=f("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var v=this.el,_=this;v.renderer?x():v.addEventListener("render-target-loaded",x);function x(){var b=v.renderer.getContext();b&&(_.cubeMapSize=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),_.material=new A.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:g,fragmentShader:y,side:A.DoubleSide}),_.quad=new A.Mesh(new A.PlaneGeometry(1,1),_.material),_.quad.visible=!1,_.camera=new A.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),_.canvas=document.createElement("canvas"),_.ctx=_.canvas.getContext("2d"),v.object3D.add(_.quad),_.onKeyDown=_.onKeyDown.bind(_))}},getRenderTarget:function(v,_){return new A.WebGLRenderTarget(v,_,{encoding:this.el.sceneEl.renderer.outputEncoding,minFilter:A.LinearFilter,magFilter:A.LinearFilter,wrapS:A.ClampToEdgeWrapping,wrapT:A.ClampToEdgeWrapping,format:A.RGBAFormat,type:A.UnsignedByteType})},resize:function(v,_){this.quad.scale.set(v,_,1),this.camera.left=-1*v/2,this.camera.right=v/2,this.camera.top=_/2,this.camera.bottom=-1*_/2,this.camera.updateProjectionMatrix(),this.canvas.width=v,this.canvas.height=_},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(v){var _=v.keyCode===83&&v.ctrlKey&&v.altKey;if(!(!this.data||!_)){var x=v.shiftKey?"equirectangular":"perspective";this.capture(x)}},setCapture:function(v){var _=this.el,x,b,m,S;return v==="perspective"?(this.quad.visible=!1,b=this.data.camera&&this.data.camera.components.camera.camera||_.camera,x={width:this.data.width,height:this.data.height}):(b=this.camera,S=new A.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:A.RGBFormat,generateMipmaps:!0,minFilter:A.LinearMipmapLinearFilter,encoding:A.sRGBEncoding}),m=new A.CubeCamera(_.camera.near,_.camera.far,S),_.camera.getWorldPosition(m.position),_.camera.getWorldQuaternion(m.quaternion),m.update(_.renderer,_.object3D),this.quad.material.uniforms.map.value=m.renderTarget.texture,x={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:b,size:x,projection:v}},capture:function(v){var _=this.el.renderer.xr.enabled,x=this.el.renderer,b;x.xr.enabled=!1,b=this.setCapture(v),this.renderCapture(b.camera,b.size,b.projection),this.saveCapture(),x.xr.enabled=_},getCanvas:function(v){var _=this.el.renderer.xr.enabled,x=this.el.renderer,b=this.setCapture(v);return x.xr.enabled=!1,this.renderCapture(b.camera,b.size,b.projection),x.xr.enabled=_,this.canvas},renderCapture:function(v,_,x){var b=this.el.renderer.autoClear,m=this.el,S,C,M,T=m.renderer;C=this.getRenderTarget(_.width,_.height),M=new Uint8Array(4*_.width*_.height),this.resize(_.width,_.height),T.autoClear=!0,T.clear(),T.setRenderTarget(C),T.render(m.object3D,v),T.autoClear=b,T.readRenderTargetPixels(C,0,0,_.width,_.height,M),T.setRenderTarget(null),x==="perspective"&&(M=this.flipPixelsVertically(M,_.width,_.height)),S=new ImageData(new Uint8ClampedArray(M),_.width,_.height),this.quad.visible=!1,this.ctx.putImageData(S,0,0)},flipPixelsVertically:function(v,_,x){for(var b=v.slice(0),m=0;m<_;++m)for(var S=0;S<x;++S)b[m*4+S*_*4]=v[m*4+(x-S)*_*4],b[m*4+1+S*_*4]=v[m*4+1+(x-S)*_*4],b[m*4+2+S*_*4]=v[m*4+2+(x-S)*_*4],b[m*4+3+S*_*4]=v[m*4+3+(x-S)*_*4];return b},saveCapture:function(){this.canvas.toBlob(function(v){var _="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",x=document.createElement("a"),b=URL.createObjectURL(v);x.href=b,x.setAttribute("download",_),x.innerHTML="downloading...",x.style.display="none",document.body.appendChild(x),setTimeout(function(){x.click(),document.body.removeChild(x)},1)},"image/png")}})},"./src/components/scene/stats.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./vendor/rStats.js"),g=u("./src/utils/index.js");u("./vendor/rStats.extras.js"),u("./src/lib/rStatsAframe.js");var y=window.aframeStats,v=g.bind,_="a-hidden",x=window.threeStats;c.exports.Component=f("stats",{schema:{default:!0},init:function(){var m=this.el;g.getUrlParameter("stats")!=="false"&&(this.stats=b(m),this.statsEl=document.querySelector(".rs-base"),this.hideBound=v(this.hide,this),this.showBound=v(this.show,this),m.addEventListener("enter-vr",this.hideBound),m.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var m=this.stats;m&&(m("rAF").tick(),m("FPS").frame(),m().update())},hide:function(){this.statsEl.classList.add(_)},show:function(){this.statsEl.classList.remove(_)}});function b(m){var S=new x(m.renderer),C=new y(m),M=m.isMobile?[]:[S,C];return new A({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:M})}},"./src/components/scene/vr-mode-ui.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/constants/index.js"),g=u("./src/utils/index.js"),y=g.bind,v="a-enter-vr",_="a-enter-ar",x="a-enter-vr-button",b="a-enter-ar-button",m="a-hidden",S="a-orientation-modal";c.exports.Component=f("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterARButton:{default:""}},init:function(){var P=this,k=this.el;g.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),k.addEventListener("enter-vr",this.updateEnterInterfaces),k.addEventListener("exit-vr",this.updateEnterInterfaces),k.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(D){D.data.type==="loaderReady"&&(P.insideLoader=!0,P.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=y(this.onEnterVRButtonClick,this),this.onEnterARButtonClick=y(this.onEnterARButtonClick,this),this.onModalClick=y(this.onModalClick,this),this.toggleOrientationModalIfNeeded=y(this.toggleOrientationModalIfNeeded,this),this.updateEnterInterfaces=y(this.updateEnterInterfaces,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var P=this.data,k=this.el;if(!P.enabled||this.insideLoader||g.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(P.enterVRButton?(this.enterVREl=document.querySelector(P.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=C(this.onEnterVRButtonClick),k.appendChild(this.enterVREl)),P.enterARButton?(this.enterAREl=document.querySelector(P.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=M(this.onEnterARButtonClick),k.appendChild(this.enterAREl)),this.orientationModalEl=T(this.onModalClick),k.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(P){P&&P.parentNode&&P.parentNode.removeChild(P)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var P=this.el;this.enterVREl&&(P.is("vr-mode")||(P.isMobile||g.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!g.device.checkVRSupport()?this.enterVREl.classList.add(m):(g.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(m)))},toggleEnterARButtonIfNeeded:function(){var P=this.el;this.enterAREl&&(P.is("vr-mode")||!g.device.checkARSupport()?this.enterAREl.classList.add(m):this.enterAREl.classList.remove(m))},toggleOrientationModalIfNeeded:function(){var P=this.el,k=this.orientationModalEl;!k||!P.isMobile||(!g.device.isLandscape()&&P.is("vr-mode")?k.classList.remove(m):k.classList.add(m))}});function C(P){var k,D;return D=document.createElement("div"),D.classList.add(v),D.setAttribute(A.AFRAME_INJECTED,""),k=document.createElement("button"),k.className=x,k.setAttribute("title","Enter VR mode with a headset or fullscreen without"),k.setAttribute(A.AFRAME_INJECTED,""),g.device.isMobile()&&N(k),D.appendChild(k),k.addEventListener("click",function(z){P(),z.stopPropagation()}),D}function M(P){var k,D;return D=document.createElement("div"),D.classList.add(_),D.setAttribute(A.AFRAME_INJECTED,""),k=document.createElement("button"),k.className=b,k.setAttribute("title","Enter AR mode with a headset or handheld device."),k.setAttribute(A.AFRAME_INJECTED,""),g.device.isMobile()&&N(k),D.appendChild(k),k.addEventListener("click",function(z){P(),z.stopPropagation()}),D}function T(P){var k=document.createElement("div");k.className=S,k.classList.add(m),k.setAttribute(A.AFRAME_INJECTED,"");var D=document.createElement("button");return D.setAttribute(A.AFRAME_INJECTED,""),D.innerHTML="Exit VR",D.addEventListener("click",P),k.appendChild(D),k}function N(P){P.addEventListener("touchstart",function(){P.classList.remove("resethover")}),P.addEventListener("touchend",function(){P.classList.add("resethover")})}},"./src/components/shadow.js":(c,d,u)=>{var f=u("./src/core/component.js"),A=u("./src/lib/three.js"),g=u("./src/utils/bind.js"),y=f.registerComponent;c.exports.Component=y("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=g(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var v=this.data;this.updateDescendants(v.cast,v.receive)},remove:function(){var v=this.el;v.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(v,_){var x=this.el.sceneEl;this.el.object3D.traverse(function(b){if(b instanceof A.Mesh&&(b.castShadow=v,b.receiveShadow=_,x.hasLoaded&&b.material))for(var m=Array.isArray(b.material)?b.material:[b.material],S=0;S<m.length;S++)m[S].needsUpdate=!0})}})},"./src/components/sound.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/debug.js"),g=u("./src/lib/three.js"),y=A("components:sound:warn");c.exports.Component=f("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var v=this;this.listener=null,this.audioLoader=new g.AudioLoader,this.pool=new g.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){v.playSound()}},update:function(v){var _=this.data,x,b,m=_.src!==v.src;if(m){if(!_.src)return;this.setupSound()}for(x=0;x<this.pool.children.length;x++)b=this.pool.children[x],_.positional&&(b.setDistanceModel(_.distanceModel),b.setMaxDistance(_.maxDistance),b.setRefDistance(_.refDistance),b.setRolloffFactor(_.rolloffFactor)),b.setLoop(_.loop),b.setVolume(_.volume),b.isPaused=!1;if(_.on!==v.on&&this.updateEventListener(v.on),m){var S=this;this.loaded=!1,this.audioLoader.load(_.src,function(C){for(x=0;x<S.pool.children.length;x++)b=S.pool.children[x],b.setBuffer(C);S.loaded=!0,g.Cache.remove(_.src),(S.data.autoplay||S.mustPlay)&&S.playSound(),S.el.emit("sound-loaded",S.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var v,_;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(v=0;v<this.pool.children.length;v++)_=this.pool.children[v],_.disconnect()}catch{y("Audio source not properly disconnected")}},updateEventListener:function(v){var _=this.el;v&&_.removeEventListener(v,this.playSoundBound),_.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var v=this.el,_,x=v.sceneEl,b=this,m;this.pool.children.length>0&&(this.stopSound(),v.removeObject3D("sound"));var S=this.listener=x.audioListener||new g.AudioListener;for(x.audioListener=S,x.camera&&x.camera.add(S),x.addEventListener("camera-set-active",function(C){C.detail.cameraEl.getObject3D("camera").add(S)}),this.pool=new g.Group,_=0;_<this.data.poolSize;_++)m=this.data.positional?new g.PositionalAudio(S):new g.Audio(S),this.pool.add(m);for(v.setObject3D(this.attrName,this.pool),_=0;_<this.pool.children.length;_++)m=this.pool.children[_],m.onEnded=function(){this.isPlaying=!1,b.el.emit("sound-ended",b.evtDetail,!1)}},pauseSound:function(){var v,_;for(this.isPlaying=!1,v=0;v<this.pool.children.length;v++)_=this.pool.children[v],!(!_.source||!_.source.buffer||!_.isPlaying||_.isPaused)&&(_.isPaused=!0,_.pause())},playSound:function(v){var _,x,b;if(!this.loaded){y("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0;return}for(_=!1,this.isPlaying=!0,x=0;x<this.pool.children.length;x++)if(b=this.pool.children[x],!b.isPlaying&&b.buffer&&!_){v&&v(b),b.play(),b.isPaused=!1,_=!0;continue}if(!_){y("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1},stopSound:function(){var v,_;for(this.isPlaying=!1,v=0;v<this.pool.children.length;v++){if(_=this.pool.children[v],!_.source||!_.source.buffer)return;_.stop()}}})},"./src/components/text.js":(c,d,u)=>{var f=u("./node_modules/three-bmfont-text/index.js"),A=u("./node_modules/load-bmfont/browser.js"),g=u("./src/core/component.js").registerComponent,y=u("./src/core/shader.js"),v=u("./src/lib/three.js"),_=u("./src/utils/index.js"),x=_.debug("components:text:error"),b=y.shaders,m=_.debug("components:text:warn"),S=1,C=16,M="https://cdn.aframe.io/fonts/",T={aileronsemibold:M+"Aileron-Semibold.fnt",dejavu:M+"DejaVu-sdf.fnt",exo2bold:M+"Exo2Bold.fnt",exo2semibold:M+"Exo2SemiBold.fnt",kelsonsans:M+"KelsonSans.fnt",monoid:M+"Monoid.fnt",mozillavr:M+"mozillavr.fnt",roboto:M+"Roboto-msdf.json",sourcecodepro:M+"SourceCodePro.fnt"},N=["roboto"],P="roboto";c.exports.FONTS=T;var k=new K,D={},z={},Y=/^\w+:/;c.exports.Component=g("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:P},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:b},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=f(),this.createOrUpdateMaterial()},update:function(W){var J=this.data,ee=this.currentFont;if(z[J.font]?this.texture=z[J.font]:(this.texture=z[J.font]=new v.Texture,this.texture.anisotropy=C),this.createOrUpdateMaterial(),W.font!==J.font){this.updateFont();return}ee&&(this.updateGeometry(this.geometry,ee),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var W=this.data,J,ee=this.material,he,me=this.shaderData,Be;if(Be=W.shader,N.indexOf(W.font)!==-1||W.font.indexOf("-msdf.")>=0?Be="msdf":W.font in T&&N.indexOf(W.font)===-1&&(Be="sdf"),J=(this.shaderObject&&this.shaderObject.name)!==Be,me.alphaTest=W.alphaTest,me.color=W.color,me.map=this.texture,me.opacity=W.opacity,me.side=ne(W.side),me.transparent=W.transparent,me.negate=W.negate,!J){this.shaderObject.update(me),ee.transparent=me.transparent,ee.side=me.side;return}he=U(this.el,Be,me),this.material=he.material,this.shaderObject=he.shader,this.material.side=me.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var W=this.data,J=this.el,ee,he=this.geometry,me=this;W.font||m("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),ee=this.lookupFont(W.font||P)||W.font,k.get(ee,function(){return O(ee,W.yOffset)}).then(function(Se){var rt;if(Se.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");D[ee]||(Se.widthFactor=D[Se]=V(Se)),me.currentFont=Se,rt=me.getFontImageSrc(),k.get(rt,function(){return F(rt)}).then(function(Ge){var st=me.texture;st&&(st.image=Ge,st.needsUpdate=!0,z[W.font]=st,me.texture=st,me.initMesh(),me.currentFont=Se,me.updateGeometry(he,Se),me.updateLayout(),me.mesh.visible=!0,J.emit("textfontset",{font:W.font,fontObj:Se}))}).catch(function(Ge){x(Ge.message),x(Ge.stack)})}).catch(function(Be){x(Be.message),x(Be.stack)})},initMesh:function(){this.mesh||(this.mesh=new v.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var W=this.lookupFont(this.data.font||P)||this.data.font,J=this.currentFont.pages[0];return J.match(Y)&&J.indexOf("http")!==0?W.replace(/(\.fnt)|(\.json)/,".png"):v.LoaderUtils.extractUrlBase(W)+J},updateLayout:function(){var W,J,ee=this.el,he=this.data,me=this.geometry,Be,Se,rt,Ge=this.mesh,st,mt,Ft,Pt,nt;if(!(!Ge||!me.layout)){if(Be=ee.getAttribute("geometry"),Ft=he.width||Be&&Be.width||S,st=G(he.wrapPixels,he.wrapCount,this.currentFont.widthFactor),mt=Ft/st,rt=me.layout,Se=mt*(rt.height+rt.descender),Be&&Be.primitive==="plane"&&(Be.width||ee.setAttribute("geometry","width",Ft),Be.height||ee.setAttribute("geometry","height",Se)),W=he.anchor==="align"?he.align:he.anchor,W==="left")Pt=0;else if(W==="right")Pt=-1*rt.width;else if(W==="center")Pt=-1*rt.width/2;else throw new TypeError("Invalid text.anchor property value",W);if(J=he.baseline,J==="bottom")nt=0;else if(J==="top")nt=-1*rt.height+rt.ascender;else if(J==="center")nt=-1*rt.height/2;else throw new TypeError("Invalid text.baseline property value",J);Ge.position.x=Pt*mt+he.xOffset,Ge.position.y=nt*mt,Ge.position.z=he.zOffset,Ge.scale.set(mt,-1*mt,mt)}},lookupFont:function(W){return T[W]},updateGeometry:function(){var W={},J={},ee=/\\n/g,he=/\\t/g;return function(me,Be){var Se=this.data;J.font=Be,J.lineHeight=Se.lineHeight&&isFinite(Se.lineHeight)?Se.lineHeight:Be.common.lineHeight,J.text=Se.value.toString().replace(ee,`
`).replace(he,"	"),J.width=G(Se.wrapPixels,Se.wrapCount,Be.widthFactor),me.update(_.extend(W,Se,J))}}()});function ne(W){switch(W){case"back":return v.FrontSide;case"double":return v.DoubleSide;default:return v.BackSide}}function O(W,J){return new Promise(function(ee,he){A(W,function(me,Be){if(me){x("Error loading font",W),he(me);return}W.indexOf("/Roboto-msdf.json")>=0&&(J=30),J&&Be.chars.map(function(rt){rt.yoffset+=J}),ee(Be)})})}function F(W){return new Promise(function(J,ee){new v.ImageLoader().load(W,function(he){J(he)},void 0,function(){x("Error loading font image",W),ee(null)})})}function U(W,J,ee){var he,me;return me=new b[J].Shader,me.el=W,me.init(ee),me.update(ee),he=me.material,he.transparent=ee.transparent,{material:he,shader:me}}function G(W,J,ee){return W||(.5+J)*ee}function V(W){var J=0,ee=0,he=0;return W.chars.map(function(me){J+=me.xadvance,me.id>=48&&me.id<=57&&(he++,ee+=me.xadvance)}),he?ee/he:J/W.chars.length}function K(){var W=this.cache={};this.get=function(J,ee){return J in W||(W[J]=ee()),W[J]}}},"./src/components/tracked-controls-webvr.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/tracked-controls.js"),g=u("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,y=u("./src/lib/three.js"),v=u("./src/constants/index.js").DEFAULT_HANDEDNESS,_={x:.175,y:-.3,z:-.03},x={x:0,y:0,z:-.175},b={touches:[]},m={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};c.exports.Component=f("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new y.Vector3,this.controllerQuaternion=new y.Quaternion,this.controllerEuler=new y.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(S,C){var M=this.el.getObject3D("mesh");M&&M.update&&M.update(C/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return g},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var S=this.data,C=A.findMatchingControllerWebVR(this.system.controllers,S.id,S.idPrefix,S.hand,S.controller);this.controller=C,this.el.components["tracked-controls"].controller=C,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(S){var C=this.controller,M=this.controllerEuler,T=this.controllerQuaternion,N=this.deltaControllerPosition,P,k,D,z,Y;k=this.getHeadElement(),D=k.object3D,Y=this.defaultUserHeight(),z=C.pose,P=(C?C.hand:void 0)||v,S.copy(D.position),N.set(_.x*(P==="left"?-1:P==="right"?1:0),_.y,_.z),N.multiplyScalar(Y),N.applyAxisAngle(D.up,D.rotation.y),S.add(N),N.set(x.x,x.y,x.z),N.multiplyScalar(Y),z.orientation?T.fromArray(z.orientation):T.copy(D.quaternion),M.setFromQuaternion(T),M.set(M.x,M.y,0),N.applyEuler(M),S.add(N)},updatePose:function(){var S=this.controller,C=this.data,M=this.el.object3D,T,N=this.system.vrDisplay,P;S&&(T=S.pose,T.position?M.position.fromArray(T.position):C.armModel&&this.applyArmModel(M.position),T.orientation&&M.quaternion.fromArray(T.orientation),N&&T.position&&(P=this.el.sceneEl.renderer.xr.getStandingMatrix(),M.matrix.compose(M.position,M.quaternion,M.scale),M.matrix.multiplyMatrices(P,M.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),M.rotateX(this.data.orientationOffset.x*y.MathUtils.DEG2RAD),M.rotateY(this.data.orientationOffset.y*y.MathUtils.DEG2RAD),M.rotateZ(this.data.orientationOffset.z*y.MathUtils.DEG2RAD))},updateButtons:function(){var S,C=this.controller,M;if(C){for(M=0;M<C.buttons.length;++M)this.buttonStates[M]||(this.buttonStates[M]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[M]||(this.buttonEventDetails[M]={id:M,state:this.buttonStates[M]}),S=C.buttons[M],this.handleButton(M,S);this.handleAxes()}},handleButton:function(S,C){var M;return M=this.handlePress(S,C)|this.handleTouch(S,C)|this.handleValue(S,C),M?(this.el.emit(m.BUTTONCHANGED,this.buttonEventDetails[S],!1),!0):!1},handleAxes:function(){var S=!1,C=this.controller.axes,M,T=this.axis,N=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),M=0;M<C.length;++M)N.push(T[M]!==C[M]),N[M]&&(S=!0);if(!S)return!1;for(this.axis.splice(0,this.axis.length),M=0;M<C.length;M++)this.axis.push(C[M]);return this.el.emit(m.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(S,C){var M,T=this.buttonStates[S];return C.pressed===T.pressed?!1:(M=C.pressed?m.BUTTONDOWN:m.BUTTONUP,this.el.emit(M,this.buttonEventDetails[S],!1),T.pressed=C.pressed,!0)},handleTouch:function(S,C){var M,T=this.buttonStates[S];return C.touched===T.touched?!1:(M=C.touched?m.TOUCHSTART:m.TOUCHEND,this.el.emit(M,this.buttonEventDetails[S],!1,b),T.touched=C.touched,!0)},handleValue:function(S,C){var M=this.buttonStates[S];return C.value===M.value?!1:(M.value=C.value,!0)}})},"./src/components/tracked-controls-webxr.js":(c,d,u)=>{var f=u("./src/utils/tracked-controls.js"),A=u("./src/core/component.js").registerComponent,g={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};c.exports.Component=A("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var y=this.el.sceneEl;this.updateController(),y.addEventListener("controllersupdated",this.updateController)},pause:function(){var y=this.el.sceneEl;y.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(y){return!(!this.controller||this.controller.gamepad||y.inputSource.handedness!=="none"&&y.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=f.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var y=this.el.sceneEl,v=this.controller,_=y.frame;!v||!y.frame||!this.system.referenceSpace||v.hand||(this.pose=_.getPose(v[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var y=this.el.object3D,v=this.pose;v&&(y.matrix.elements=v.transform.matrix,y.matrix.decompose(y.position,y.rotation,y.scale))},updateButtons:function(){var y,v,_=this.controller,x;if(!(!_||!_.gamepad)){for(x=_.gamepad,v=0;v<x.buttons.length;++v)this.buttonStates[v]||(this.buttonStates[v]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[v]||(this.buttonEventDetails[v]={id:v,state:this.buttonStates[v]}),y=x.buttons[v],this.handleButton(v,y);this.handleAxes()}},handleButton:function(y,v){var _;return _=this.handlePress(y,v)|this.handleTouch(y,v)|this.handleValue(y,v),_?(this.el.emit(g.BUTTONCHANGED,this.buttonEventDetails[y],!1),!0):!1},handleAxes:function(){var y=!1,v=this.controller.gamepad.axes,_,x=this.axis,b=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),_=0;_<v.length;++_)b.push(x[_]!==v[_]),b[_]&&(y=!0);if(!y)return!1;for(this.axis.splice(0,this.axis.length),_=0;_<v.length;_++)this.axis.push(v[_]);return this.el.emit(g.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(y,v){var _,x=this.buttonStates[y];return v.pressed===x.pressed?!1:(_=v.pressed?g.BUTTONDOWN:g.BUTTONUP,this.el.emit(_,this.buttonEventDetails[y],!1),x.pressed=v.pressed,!0)},handleTouch:function(y,v){var _,x=this.buttonStates[y];return v.touched===x.touched?!1:(_=v.touched?g.TOUCHSTART:g.TOUCHEND,this.el.emit(_,this.buttonEventDetails[y],!1),x.touched=v.touched,!0)},handleValue:function(y,v){var _=this.buttonStates[y];return v.value===_.value?!1:(_.value=v.value,!0)}})},"./src/components/tracked-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},update:function(){var A=this.data,g=this.el;g.sceneEl.hasWebXR?g.setAttribute("tracked-controls-webxr",{id:A.id,hand:A.hand,index:A.controller,iterateControllerProfiles:A.iterateControllerProfiles,handTrackingEnabled:A.handTrackingEnabled,space:A.space}):g.setAttribute("tracked-controls-webvr",A)}})},"./src/components/valve-index-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/lib/three.js"),y=u("./src/utils/tracked-controls.js"),v=y.checkControllerPresentAndSetup,_=y.emitIfAxesChanged,x=y.onButtonEvent,b="https://cdn.aframe.io/controllers/valve/index/valve-index-",m={left:b+"left.glb",right:b+"right.glb"},S="valve",C=u("./src/utils/index.js").device.isWebXRAvailable,M={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},T={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},N={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},P={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},k=C?P:N,D=C?T:M;c.exports.Component=f("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var z=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(Y){x(Y.detail.id,"down",z)},this.onButtonUp=function(Y){x(Y.detail.id,"up",z)},this.onButtonTouchEnd=function(Y){x(Y.detail.id,"touchend",z)},this.onButtonTouchStart=function(Y){x(Y.detail.id,"touchstart",z)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},addEventListeners:function(){var z=this.el;z.addEventListener("buttonchanged",this.onButtonChanged),z.addEventListener("buttondown",this.onButtonDown),z.addEventListener("buttonup",this.onButtonUp),z.addEventListener("touchend",this.onButtonTouchEnd),z.addEventListener("touchstart",this.onButtonTouchStart),z.addEventListener("model-loaded",this.onModelLoaded),z.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var z=this.el;z.removeEventListener("buttonchanged",this.onButtonChanged),z.removeEventListener("buttondown",this.onButtonDown),z.removeEventListener("buttonup",this.onButtonUp),z.removeEventListener("touchend",this.onButtonTouchEnd),z.removeEventListener("touchstart",this.onButtonTouchStart),z.removeEventListener("model-loaded",this.onModelLoaded),z.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var z=this.data,Y=z.hand==="right"?0:z.hand==="left"?1:2;v(this,S,{index:Y,iterateControllerProfiles:!0,hand:z.hand})},injectTrackedControls:function(){var z=this.el,Y=this.data;z.setAttribute("tracked-controls",{idPrefix:S,controller:Y.hand==="right"?1:Y.hand==="left"?0:2,hand:Y.hand,orientationOffset:Y.orientationOffset}),this.loadModel()},loadModel:function(){var z=this.data;z.model&&this.el.setAttribute("gltf-model",""+m[z.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(z){var Y=this.mapping.buttons[z.detail.id],ne=this.buttonMeshes,O;Y&&(Y==="trigger"&&(O=z.detail.state.value,ne&&ne.trigger&&(ne.trigger.rotation.x=this.triggerOriginalRotationX-O*(Math.PI/40))),this.el.emit(Y+"changed",z.detail.state))},onModelLoaded:function(z){var Y,ne=z.detail.model,O=this;this.data.model&&(Y=this.buttonMeshes={},Y.grip={left:ne.getObjectByName("leftgrip"),right:ne.getObjectByName("rightgrip")},Y.menu=ne.getObjectByName("menubutton"),Y.system=ne.getObjectByName("systembutton"),Y.trackpad=ne.getObjectByName("touchpad"),Y.trigger=ne.getObjectByName("trigger"),this.triggerOriginalRotationX=Y.trigger.rotation.x,Object.keys(Y).forEach(function(F){O.setButtonColor(F,O.data.buttonColor)}),ne.position.copy(D[this.data.hand]),ne.rotation.copy(k[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controlls",model:this.data.model,rayOrigin:new g.Vector3(0,0,0)}))},onAxisMoved:function(z){_(this,this.mapping.axes,z)},updateModel:function(z,Y){var ne,O;this.data.model&&(O=Y.indexOf("touch")!==-1,!O&&(ne=Y==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(z,ne)))},setButtonColor:function(z,Y){}})},"./src/components/visible.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent;c.exports.Component=f("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x="https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",b="https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl",m=u("./src/utils/index.js").device.isWebXRAvailable,S="htc-vive",C="OpenVR ",M=m?S:C,T={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},N={axes:{thumbstick:[0,1]},buttons:["trigger","grip","trackpad","none","menu"]},P=m?N:T;c.exports.Component=f("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:P,init:function(){var k=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(D){_(D.detail.id,"down",k)},this.onButtonUp=function(D){_(D.detail.id,"up",k)},this.onButtonTouchEnd=function(D){_(D.detail.id,"touchend",k)},this.onButtonTouchStart=function(D){_(D.detail.id,"touchstart",k)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var k=this.data;this.controllerIndex=k.hand==="right"?0:k.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},addEventListeners:function(){var k=this.el;k.addEventListener("buttonchanged",this.onButtonChanged),k.addEventListener("buttondown",this.onButtonDown),k.addEventListener("buttonup",this.onButtonUp),k.addEventListener("touchend",this.onButtonTouchEnd),k.addEventListener("touchstart",this.onButtonTouchStart),k.addEventListener("model-loaded",this.onModelLoaded),k.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var k=this.el;k.removeEventListener("buttonchanged",this.onButtonChanged),k.removeEventListener("buttondown",this.onButtonDown),k.removeEventListener("buttonup",this.onButtonUp),k.removeEventListener("touchend",this.onButtonTouchEnd),k.removeEventListener("touchstart",this.onButtonTouchStart),k.removeEventListener("model-loaded",this.onModelLoaded),k.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var k=this.data;y(this,M,{index:this.controllerIndex,hand:k.hand})},injectTrackedControls:function(){var k=this.el,D=this.data;k.setAttribute("tracked-controls",{idPrefix:M,hand:D.hand,controller:this.controllerIndex,orientationOffset:D.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:x,mtl:b})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(k){var D=this.mapping.buttons[k.detail.id],z=this.buttonMeshes,Y;D&&(D==="trigger"&&(Y=k.detail.state.value,z&&z.trigger&&(z.trigger.rotation.x=-Y*(Math.PI/12))),this.el.emit(D+"changed",k.detail.state))},onModelLoaded:function(k){var D,z=k.detail.model,Y=this;this.data.model&&(D=this.buttonMeshes={},D.grip={left:z.getObjectByName("leftgrip"),right:z.getObjectByName("rightgrip")},D.menu=z.getObjectByName("menubutton"),D.system=z.getObjectByName("systembutton"),D.trackpad=z.getObjectByName("touchpad"),D.trigger=z.getObjectByName("trigger"),Object.keys(D).forEach(function(ne){Y.setButtonColor(ne,Y.data.buttonColor)}),z.position.set(0,-.015,.04))},onAxisMoved:function(k){v(this,this.mapping.axes,k)},updateModel:function(k,D){var z,Y;this.data.model&&(Y=D.indexOf("touch")!==-1,!Y&&(z=D==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(k,z)))},setButtonColor:function(k,D){var z=this.buttonMeshes,Y=this.rendererSystem;if(z){if(k==="grip"){z.grip.left.material.color.set(D),z.grip.right.material.color.set(D),Y.applyColorCorrection(z.grip.left.material.color),Y.applyColorCorrection(z.grip.right.material.color);return}z[k].material.color.set(D),Y.applyColorCorrection(z[k].material.color)}}})},"./src/components/vive-focus-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x="HTC Vive Focus",b="https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf";c.exports.Component=f("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=A(this.removeControllersUpdateListener,this),this.onAxisMoved=A(this.onAxisMoved,this)},init:function(){var m=this;this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(S){_(S.detail.id,"down",m)},this.onButtonUp=function(S){_(S.detail.id,"up",m)},this.onButtonTouchStart=function(S){_(S.detail.id,"touchstart",m)},this.onButtonTouchEnd=function(S){_(S.detail.id,"touchend",m)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var m=this.el;m.addEventListener("buttonchanged",this.onButtonChanged),m.addEventListener("buttondown",this.onButtonDown),m.addEventListener("buttonup",this.onButtonUp),m.addEventListener("touchstart",this.onButtonTouchStart),m.addEventListener("touchend",this.onButtonTouchEnd),m.addEventListener("model-loaded",this.onModelLoaded),m.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var m=this.el;m.removeEventListener("buttonchanged",this.onButtonChanged),m.removeEventListener("buttondown",this.onButtonDown),m.removeEventListener("buttonup",this.onButtonUp),m.removeEventListener("touchstart",this.onButtonTouchStart),m.removeEventListener("touchend",this.onButtonTouchEnd),m.removeEventListener("model-loaded",this.onModelLoaded),m.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){y(this,x,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var m=this.el,S=this.data;m.setAttribute("tracked-controls",{armModel:S.armModel,idPrefix:x,orientationOffset:S.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",b)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(m){var S=m.detail.model,C;this.data.model&&(C=this.buttonMeshes={},C.trigger=S.getObjectByName("BumperKey"),C.triggerPressed=S.getObjectByName("BumperKey_Press"),C.triggerPressed&&(C.triggerPressed.visible=!1),C.trackpad=S.getObjectByName("TouchPad"),C.trackpadPressed=S.getObjectByName("TouchPad_Press"),C.trackpadPressed&&(C.trackpadPressed.visible=!1))},onButtonChanged:function(m){var S=this.mapping.buttons[m.detail.id];S&&this.el.emit(S+"changed",m.detail.state)},onAxisMoved:function(m){v(this,this.mapping.axes,m)},updateModel:function(m,S){this.data.model&&this.updateButtonModel(m,S)},updateButtonModel:function(m,S){var C=this.buttonMeshes,M=m+"Pressed";if(!(!C||!C[m]||!C[M])){var T;switch(S){case"down":T=this.data.buttonHighlightColor;break;case"touchstart":T=this.data.buttonTouchedColor;break}T&&C[M].material.color.set(T),C[M].visible=!!T,C[m].visible=!T}}})},"./src/components/wasd-controls.js":(c,d,u)=>{var f=u("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,A=u("./src/core/component.js").registerComponent,g=u("./src/lib/three.js"),y=u("./src/utils/index.js"),v=y.bind,_=y.shouldCaptureKeyEvent,x=1e-5,b=.2,m=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];c.exports.Component=A("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new g.Vector3,this.onBlur=v(this.onBlur,this),this.onContextMenu=v(this.onContextMenu,this),this.onFocus=v(this.onFocus,this),this.onKeyDown=v(this.onKeyDown,this),this.onKeyUp=v(this.onKeyUp,this),this.onVisibilityChange=v(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(C,M){var T=this.data,N=this.el,P=this.velocity;!P[T.adAxis]&&!P[T.wsAxis]&&S(this.keys)||(M=M/1e3,this.updateVelocity(M),!(!P[T.adAxis]&&!P[T.wsAxis])&&N.object3D.position.add(this.getMovementVector(M)))},update:function(C){C.adAxis!==this.data.adAxis&&(this.velocity[C.adAxis]=0),C.wsAxis!==this.data.wsAxis&&(this.velocity[C.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(C){var M,T,N,P=this.data,k=this.keys,D=this.velocity,z,Y;if(T=P.adAxis,z=P.wsAxis,C>b){D[T]=0,D[z]=0;return}var ne=Math.pow(1/this.easing,C*60);D[T]!==0&&(D[T]=D[T]*ne),D[z]!==0&&(D[z]=D[z]*ne),Math.abs(D[T])<x&&(D[T]=0),Math.abs(D[z])<x&&(D[z]=0),P.enabled&&(M=P.acceleration,P.adEnabled&&(N=P.adInverted?-1:1,(k.KeyA||k.ArrowLeft)&&(D[T]-=N*M*C),(k.KeyD||k.ArrowRight)&&(D[T]+=N*M*C)),P.wsEnabled&&(Y=P.wsInverted?-1:1,(k.KeyW||k.ArrowUp)&&(D[z]-=Y*M*C),(k.KeyS||k.ArrowDown)&&(D[z]+=Y*M*C)))},getMovementVector:function(){var C=new g.Vector3(0,0,0),M=new g.Euler(0,0,0,"YXZ");return function(T){var N=this.el.getAttribute("rotation"),P=this.velocity,k;return C.copy(P),C.multiplyScalar(T),N&&(k=this.data.fly?N.x:0,M.set(g.MathUtils.degToRad(k),g.MathUtils.degToRad(N.y),0),C.applyEuler(M)),C}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var C=Object.keys(this.keys),M=0;M<C.length;M++)delete this.keys[C[M]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(C){var M;_(C)&&(M=C.code||f[C.keyCode],m.indexOf(M)!==-1&&(this.keys[M]=!0))},onKeyUp:function(C){var M;M=C.code||f[C.keyCode],delete this.keys[M]}});function S(C){var M;for(M in C)return!1;return!0}},"./src/components/windows-motion-controls.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/utils/bind.js"),g=u("./src/utils/tracked-controls.js"),y=g.checkControllerPresentAndSetup,v=g.emitIfAxesChanged,_=g.onButtonEvent,x=u("./src/utils/index.js"),b=x.debug("components:windows-motion-controls:debug"),m=x.debug("components:windows-motion-controls:warn"),S=u("./src/constants/index.js").DEFAULT_HANDEDNESS,C="https://cdn.aframe.io/controllers/microsoft/",M={left:"left.glb",right:"right.glb",default:"universal.glb"},T=u("./src/utils/index.js").device.isWebXRAvailable,N="windows-mixed-reality",P="Spatial Controller (Spatial Interaction Source) ",k=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,D=T?N:P,z={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},Y={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},ne=T?Y:z;c.exports.Component=f("windows-motion-controls",{schema:{hand:{default:S},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:ne,bindMethods:function(){this.onModelError=A(this.onModelError,this),this.onModelLoaded=A(this.onModelLoaded,this),this.onControllersUpdate=A(this.onControllersUpdate,this),this.checkIfControllerPresent=A(this.checkIfControllerPresent,this),this.onAxisMoved=A(this.onAxisMoved,this)},init:function(){var O=this,F=this.el;this.onButtonChanged=A(this.onButtonChanged,this),this.onButtonDown=function(U){_(U.detail.id,"down",O)},this.onButtonUp=function(U){_(U.detail.id,"up",O)},this.onButtonTouchStart=function(U){_(U.detail.id,"touchstart",O)},this.onButtonTouchEnd=function(U){_(U.detail.id,"touchend",O)},this.onControllerConnected=function(){O.setModelVisibility(!0)},this.onControllerDisconnected=function(){O.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},F.addEventListener("controllerconnected",this.onControllerConnected),F.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var O=this.el;O.addEventListener("buttonchanged",this.onButtonChanged),O.addEventListener("buttondown",this.onButtonDown),O.addEventListener("buttonup",this.onButtonUp),O.addEventListener("touchstart",this.onButtonTouchStart),O.addEventListener("touchend",this.onButtonTouchEnd),O.addEventListener("axismove",this.onAxisMoved),O.addEventListener("model-error",this.onModelError),O.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var O=this.el;O.removeEventListener("buttonchanged",this.onButtonChanged),O.removeEventListener("buttondown",this.onButtonDown),O.removeEventListener("buttonup",this.onButtonUp),O.removeEventListener("touchstart",this.onButtonTouchStart),O.removeEventListener("touchend",this.onButtonTouchEnd),O.removeEventListener("axismove",this.onAxisMoved),O.removeEventListener("model-error",this.onModelError),O.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,D,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var O=this.createControllerModelUrl();this.loadModel(O)},createControllerModelUrl:function(O){var F=this.el.components["tracked-controls"],U=F?F.controller:null,G="default",V=this.data.hand,K;if(U&&!window.hasNativeWebXRImplementation&&(V=U.hand,!O)){var W=U.id.match(k);G=W&&W[0]||G}return K=M[V]||M.default,C+G+"/"+K},injectTrackedControls:function(){var O=this.data;this.el.setAttribute("tracked-controls",{idPrefix:D,controller:O.pair,hand:O.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(O){var F=this.createControllerModelUrl(!0);O.detail.src!==F?(m("Failed to load controller model for device, attempting to load default."),this.loadModel(F)):m("Failed to load default controller model.")},loadModel:function(O){this.el.setAttribute("gltf-model","url("+O+")")},onModelLoaded:function(O){var F=this.controllerModel=O.detail.model,U=this.loadedMeshInfo,G,V,K,W;if(b("Processing model"),U.buttonMeshes={},U.axisMeshes={},F){for(G=0;G<this.mapping.buttons.length;G++){if(V=this.mapping.buttonMeshNames[this.mapping.buttons[G]],!V){b("Skipping unknown button at index: "+G+" with mapped name: "+this.mapping.buttons[G]);continue}if(K=F.getObjectByName(V),!K){m("Missing button mesh with name: "+V);continue}W={index:G,value:J(K,"VALUE"),pressed:J(K,"PRESSED"),unpressed:J(K,"UNPRESSED")},W.value&&W.pressed&&W.unpressed?U.buttonMeshes[this.mapping.buttons[G]]=W:m("Missing button submesh under mesh with name: "+V+"(VALUE: "+!!W.value+", PRESSED: "+!!W.pressed+", UNPRESSED:"+!!W.unpressed+")")}for(G=0;G<this.mapping.axisMeshNames.length;G++){if(V=this.mapping.axisMeshNames[G],!V){b("Skipping unknown axis at index: "+G);continue}if(K=F.getObjectByName(V),!K){m("Missing axis mesh with name: "+V);continue}W={index:G,value:J(K,"VALUE"),min:J(K,"MIN"),max:J(K,"MAX")},W.value&&W.min&&W.max?U.axisMeshes[G]=W:m("Missing axis submesh under mesh with name: "+V+"(VALUE: "+!!W.value+", MIN: "+!!W.min+", MAX:"+!!W.max+")")}this.calculateRayOriginFromMesh(F),this.setModelVisibility()}b("Model load complete.");function J(ee,he){for(var me=0,Be=ee.children.length;me<Be;me++){var Se=ee.children[me];if(Se&&Se.name===he)return Se}}},calculateRayOriginFromMesh:function(){var O=new THREE.Quaternion;return function(F){var U;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,U=F.getObjectByName(this.mapping.pointingPoseMeshName),U){var G=F.parent;G&&(F.parent=null,F.updateMatrixWorld(!0),F.parent=G),U.getWorldPosition(this.rayOrigin.origin),U.getWorldQuaternion(O),this.rayOrigin.direction.applyQuaternion(O),G&&F.updateMatrixWorld(!0)}else b("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var O=new THREE.Quaternion;return function(F,U){var G=this.loadedMeshInfo.axisMeshes[F];if(G){var V=G.min,K=G.max,W=G.value,J=U*.5+.5;W.setRotationFromQuaternion(O.copy(V.quaternion).slerp(K.quaternion,J)),W.position.lerpVectors(V.position,K.position,J)}}}(),lerpButtonTransform:function(){var O=new THREE.Quaternion;return function(F,U){var G=this.loadedMeshInfo.buttonMeshes[F];if(G){var V=G.unpressed,K=G.pressed,W=G.value;W.setRotationFromQuaternion(O.copy(V.quaternion).slerp(K.quaternion,U)),W.position.lerpVectors(V.position,K.position,U)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(O){var F=this.mapping.buttons[O.detail.id];F&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(F,O.detail.state.value),this.el.emit(F+"changed",O.detail.state))},onAxisMoved:function(O){var F=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var U=0;U<F;U++)this.lerpAxisTransform(U,O.detail.axis[U]||0);v(this,this.mapping.axes,O)},setModelVisibility:function(O){var F=this.el.getObject3D("mesh");O=O!==void 0?O:this.modelVisible,this.modelVisible=O,F&&(F.visible=O)}})},"./src/constants/index.js":(c,d,u)=>{c.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:u("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":c=>{c.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(c,d,u)=>{var f=u("./src/core/a-node.js").ANode,A=u("./src/utils/bind.js"),g=u("./src/utils/debug.js"),y=u("./src/lib/three.js"),v=new y.FileLoader,_=g("core:a-assets:warn");class x extends f{constructor(){super(),this.isAssets=!0,this.fileLoader=v,this.timeout=null}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var k=this,D,z=[],Y,ne,O,F,U;if(super.connectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(F=this.querySelectorAll("img"),D=0;D<F.length;D++)O=S(F[D]),z.push(new Promise(function(G,V){if(y.Cache.add(F[D].getAttribute("src"),O),O.complete){G();return}O.onload=G,O.onerror=V}));for(ne=this.querySelectorAll("audio, video"),D=0;D<ne.length;D++)Y=S(ne[D]),!Y.src&&!Y.srcObject&&_("Audio/video asset has neither `src` nor `srcObject` attributes."),z.push(m(Y));Promise.allSettled(z).then(A(this.load,this)),U=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){k.hasLoaded||(_("Asset loading timed out in ",U,"ms"),k.emit("timeout"),k.load())},U)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(D){return D.isAssetItem&&D.hasAttribute("src")})}}customElements.define("a-assets",x);class b extends f{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var k=this,D=this.getAttribute("src");v.setResponseType(this.getAttribute("response-type")||T(D)),v.load(D,function(Y){k.data=Y,setTimeout(function(){f.prototype.load.call(k)})},function(Y){k.emit("progress",{loadedBytes:Y.loaded,totalBytes:Y.total,xhr:Y})},function(Y){k.emit("error",{xhr:Y})})}}customElements.define("a-asset-item",b);function m(P){if(!(!P.hasAttribute("autoplay")&&P.getAttribute("preload")!=="auto"))return new Promise(function(k,D){if(P.readyState===4)return k();if(P.error)return D();P.addEventListener("loadeddata",z,!1),P.addEventListener("progress",z,!1),P.addEventListener("error",D,!1);function z(){for(var Y=0,ne=0;ne<P.buffered.length;ne++)Y+=P.buffered.end(ne)-P.buffered.start(ne);Y>=P.duration&&(P.tagName==="VIDEO"&&y.Cache.add(P.getAttribute("src"),P),k())}})}function S(P){var k=C(P);return k.tagName&&k.tagName.toLowerCase()==="video"&&(k.setAttribute("playsinline",""),k.setAttribute("webkit-playsinline","")),k!==P&&(P.parentNode.appendChild(k),P.parentNode.removeChild(P)),k}function C(P){var k,D;return P.hasAttribute("crossorigin")||(D=P.getAttribute("src"),D!==null&&(D.indexOf("://")===-1||M(D)===window.location.host))?P:(_('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',D),P.crossOrigin="anonymous",k=P.cloneNode(!0),k)}function M(P){var k=P.indexOf("://")>-1?P.split("/")[2]:P.split("/")[0];return k.substring(0,k.indexOf(":"))}function T(P){var k=N(P),D=k.lastIndexOf(".");if(D>=0){var z=k.slice(D,P.search(/\?|#|$/));if(z===".glb")return"arraybuffer"}return"text"}c.exports.inferResponseType=T;function N(P){var k=document.createElement("a");k.href=P;var D=k.search.replace(/^\?/,""),z=P.replace(D,"").replace("?","");return z.substring(z.lastIndexOf("/")+1)}c.exports.getFileNameFromURL=N},"./src/core/a-cubemap.js":(c,d,u)=>{var f=u("./src/utils/debug.js"),A=f("core:cubemap:warn");class g extends HTMLElement{constructor(v){return v=super(v),v}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}g.prototype.doConnectedCallback.call(this)}doConnectedCallback(){this.srcs=this.validate()}validate(){var v=this.querySelectorAll("[src]"),_,x=[];if(v.length===6){for(_=0;_<v.length;_++)x.push(v[_].getAttribute("src"));return x}A("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",g)},"./src/core/a-entity.js":(c,d,u)=>{var f=u("./src/core/a-node.js").ANode,A=u("./src/core/component.js").components,g=u("./src/lib/three.js"),y=u("./src/utils/index.js"),v=y.debug("core:a-entity:debug"),_=y.debug("core:a-entity:warn"),x="__",b=["position","rotation","scale","visible"],m={once:!0};class S extends f{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new g.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(D,z,Y){var ne=this.components[D];if(super.attributeChangedCallback(),ne&&ne.justInitialized&&Y===""){delete ne.justInitialized;return}!ne&&Y===null||this.setEntityAttribute(D,z,Y)}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}S.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var D=this,z,Y;if(super.connectedCallback(),Y=this.sceneEl,this.addToParent(),!this.isScene){if(!Y){this.load();return}if(z=Y.querySelector("a-assets"),z&&!z.hasLoaded){z.addEventListener("loaded",function(){D.load()});return}this.load()}}disconnectedCallback(){var D;if(this.parentEl){for(D in this.components)this.removeComponent(D,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(D){return this.object3DMap[D]}setObject3D(D,z){var Y,ne=this;if(!(z instanceof g.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");Y=this.getObject3D(D),Y&&this.object3D.remove(Y),z.el=this,z.children.length&&z.traverse(function(F){F.el=ne}),this.object3D.add(z),this.object3DMap[D]=z,this.emit("object3dset",{object:z,type:D})}removeObject3D(D){var z=this.getObject3D(D);if(!z){_("Tried to remove `Object3D` of type:",D,"which was not defined.");return}this.object3D.remove(z),delete this.object3DMap[D],this.emit("object3dremove",{type:D})}getOrCreateObject3D(D,z){var Y=this.getObject3D(D);return!Y&&z&&(Y=new z,this.setObject3D(D,Y)),_("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),Y}add(D){if(!D.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(D.object3D),this.emit("child-attached",{el:D})}addToParent(){var D=this.parentEl=this.parentNode;!D||!D.add||this.attachedToParent||(D.add(this),this.attachedToParent=!0)}removeFromParent(){var D=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,D.emit("child-detached",{el:this})}load(){var D=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){D.parentEl&&(D.updateComponents(),(D.isScene||D.parentEl.isPlaying)&&D.play())})}remove(D){D?this.object3D.remove(D.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var D=this.children,z=[],Y=0;Y<D.length;Y++){var ne=D[Y];ne instanceof S&&z.push(ne)}return z}initComponent(D,z,Y){var ne,O,F,U,G;if(F=y.split(D,x),U=F[0],O=F.length>2?F.slice(1).join("__"):F[1],!!A[U]&&(G=C(this,D)||z!==void 0,!(!G&&!Y)&&!(D in this.components))){if(this.initComponentDependencies(U),O&&!A[U].multiple)throw new Error("Trying to initialize multiple components of type `"+U+"`. There can only be one component of this type per entity.");ne=new A[U].Component(this,z,O),this.isPlaying&&ne.play(),this.hasAttribute(D)||(ne.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,D,"")),v("Component initialized: %s",D)}}initComponentDependencies(D){var z=this,Y=A[D],ne,O;if(Y&&(ne=A[D].dependencies,!!ne))for(O=0;O<ne.length;O++)z.initComponent(ne[O],window.HTMLElement.prototype.getAttribute.call(z,ne[O])||void 0,!0)}removeComponent(D,z){var Y;if(Y=this.components[D],!!Y){if(!Y.initialized){this.addEventListener("componentinitialized",function ne(O){O.detail.name===D&&(this.removeComponent(D,z),this.removeEventListener("componentinitialized",ne))});return}Y.pause(),Y.remove(),z&&(Y.destroy(),delete this.components[D]),this.emit("componentremoved",Y.evtDetail,!1)}}updateComponents(){var D,z,Y,ne,O=this.componentsToUpdate;if(this.hasLoaded){for(Y=0;Y<this.mixinEls.length;Y++)for(ne in this.mixinEls[Y].componentCache)N(ne)&&(O[ne]=!0);if(this.getExtraComponents){z=this.getExtraComponents();for(ne in z)N(ne)&&(O[ne]=!0)}for(Y=0;Y<this.attributes.length;++Y)ne=this.attributes[Y].name,b.indexOf(ne)===-1&&N(ne)&&(O[ne]=!0);for(Y=0;Y<b.length;Y++)ne=b[Y],this.hasAttribute(ne)&&this.updateComponent(ne,this.getDOMAttribute(ne));for(ne in O)D=T(this.getDOMAttribute(ne),z&&z[ne]),this.updateComponent(ne,D),delete O[ne]}}updateComponent(D,z,Y){var ne=this.components[D];if(ne){if(z===null&&!C(this,D)){this.removeComponent(D,!0);return}ne.updateProperties(z,Y);return}this.initComponent(D,z,!1)}removeAttribute(D,z){var Y=this.components[D];if(Y&&z===void 0&&this.removeComponent(D,!0),Y&&z!==void 0){Y.resetProperty(z);return}D==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,D)}play(){var D,z,Y;if(!(this.isPlaying||!this.hasLoaded)){this.isPlaying=!0;for(Y in this.components)this.components[Y].play();for(D=this.getChildEntities(),z=0;z<D.length;z++)D[z].play();this.emit("play")}}pause(){var D,z,Y;if(this.isPlaying){this.isPlaying=!1;for(Y in this.components)this.components[Y].pause();for(D=this.getChildEntities(),z=0;z<D.length;z++)D[z].pause();this.emit("pause")}}setEntityAttribute(D,z,Y){if(A[D]||this.components[D]){this.updateComponent(D,Y);return}if(D==="mixin"){if(Y===this.computedMixinStr)return;this.mixinUpdate(Y,z)}}mixinUpdate(D,z){var Y=S.componentsUpdated,ne,O,F,U,G=this;if(!this.hasLoaded){this.addEventListener("loaded",function(){G.mixinUpdate(D,z)},m);return}for(z=z||this.getAttribute("mixin"),F=this.updateMixins(D,z),Y.length=0,U=0;U<this.mixinEls.length;U++)for(ne in this.mixinEls[U].componentCache)Y.indexOf(ne)===-1&&(this.components[ne]?this.components[ne].handleMixinUpdate():this.initComponent(ne,null),Y.push(ne));for(U=0;U<F.oldMixinIds.length;U++)if(O=document.getElementById(F.oldMixinIds[U]),!!O)for(ne in O.componentCache)Y.indexOf(ne)===-1&&this.components[ne]&&(this.getDOMAttribute(ne)?this.components[ne].handleMixinUpdate():this.removeComponent(ne,!0))}setAttribute(D,z,Y){var ne=S.singlePropUpdate,O,F,U,G,V,K;if(G=D.indexOf(x),U=G>0?D.substring(0,G):D,!A[U]){D==="mixin"&&this.mixinUpdate(z),super.setAttribute.call(this,D,z);return}if(!this.components[D]&&this.hasAttribute(D)&&this.updateComponent(D,window.HTMLElement.prototype.getAttribute.call(this,D)),typeof Y<"u"&&typeof z=="string"&&z.length>0&&typeof y.styleParser.parse(z)=="string"){for(K in ne)delete ne[K];O=ne,O[z]=Y,F=!1}else O=z,F=Y===!0;this.updateComponent(D,O,F),V=this.sceneEl&&this.sceneEl.getAttribute("debug"),V&&this.components[D].flushToDOM()}flushToDOM(D){var z=this.components,Y,ne=this.children,O,F;for(F in z)z[F].flushToDOM();if(D)for(O=0;O<ne.length;++O)Y=ne[O],Y.flushToDOM&&Y.flushToDOM(D)}getAttribute(D){var z;return D==="position"?this.object3D.position:D==="rotation"?P(this):D==="scale"?this.object3D.scale:D==="visible"?this.object3D.visible:(z=this.components[D],z?z.data:window.HTMLElement.prototype.getAttribute.call(this,D))}getDOMAttribute(D){var z=this.components[D];return z?z.attrValue:window.HTMLElement.prototype.getAttribute.call(this,D)}addState(D){this.is(D)||(this.states.push(D),this.emit("stateadded",D))}removeState(D){var z=this.states.indexOf(D);z!==-1&&(this.states.splice(z,1),this.emit("stateremoved",D))}is(D){return this.states.indexOf(D)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var D;if(this.parentNode){_("Entity can only be destroyed if detached from scenegraph.");return}for(D in this.components)this.components[D].destroy()}}function C(k,D){return k.components[D]&&k.components[D].attrValue?!0:M(D,k.mixinEls)}function M(k,D){var z,Y=!1;for(z=0;z<D.length&&(Y=D[z].hasAttribute(k),!Y);++z);return Y}function T(k,D){return D?D.constructor===Object?y.extend(D,y.styleParser.parse(k||{})):k||D:k}function N(k){return k.indexOf(x)!==-1&&(k=y.split(k,x)[0]),!!A[k]}function P(k){var D=g.MathUtils.radToDeg,z=k.object3D.rotation,Y=k.rotationObj;return Y.x=D(z.x),Y.y=D(z.y),Y.z=D(z.z),Y}S.componentsUpdated=[],S.singlePropUpdate={},customElements.define("a-entity",S),c.exports.AEntity=S},"./src/core/a-mixin.js":(c,d,u)=>{var f=u("./src/core/a-node.js").ANode,A=u("./src/core/component.js").components,g=u("./src/utils/index.js"),y="__";class v extends f{constructor(){super(),this.componentCache={},this.isMixin=!0}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){super.connectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(x,b,m){super.attributeChangedCallback(),this.cacheAttribute(x,m),this.updateEntities()}setAttribute(x,b){window.HTMLElement.prototype.setAttribute.call(this,x,b),this.cacheAttribute(x,b)}cacheAttribute(x,b){var m,S;S=g.split(x,y)[0],m=A[S],m&&(b===void 0&&(b=window.HTMLElement.prototype.getAttribute.call(this,x)),this.componentCache[x]=m.parseAttrValueForCache(b))}getAttribute(x){return this.componentCache[x]||window.HTMLElement.prototype.getAttribute.call(this,x)}cacheAttributes(){var x=this.attributes,b,m;for(m=0;m<x.length;m++)b=x[m].name,this.cacheAttribute(b)}updateEntities(){var x,b,m;if(this.sceneEl)for(b=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),m=0;m<b.length;m++)x=b[m],!(!x.hasLoaded||x.isMixin)&&x.mixinUpdate(this.id)}}customElements.define("a-mixin",v)},"./src/core/a-node.js":(c,d,u)=>{var f=u("./src/utils/index.js"),A=f.debug("core:a-node:warn"),g={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function y(_){return _.tagName.toLowerCase()in g||_.isNode}class v extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}v.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var x;this.sceneEl=this.closestScene(),this.sceneEl||A("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(x=this.getAttribute("mixin"),x&&this.updateMixins(x))}attributeChangedCallback(x,b,m){m!==this.computedMixinStr&&x==="mixin"&&!this.isMixin&&this.updateMixins(m,b)}closestScene(){for(var x=this;x&&!x.isScene;)x=x.parentElement;return x}closest(x){for(var b=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,m=this;m&&!b.call(m,x);)m=m.parentElement;return m}disconnectedCallback(){this.hasLoaded=!1}load(x,b){var m,S,C=this;this.hasLoaded||(b=b||y,m=this.getChildren(),S=m.filter(b).map(function(M){return new Promise(function(N,P){if(M.hasLoaded)return N();M.addEventListener("loaded",N),M.addEventListener("error",P)})}),Promise.allSettled(S).then(function(T){T.forEach(function(P){P.status==="rejected"&&A("Rendering scene with errors on node: ",P.reason.target)}),C.hasLoaded=!0,C.setupMutationObserver(),x&&x(),C.emit("loaded",void 0,!1)}))}setupMutationObserver(){var x=this,b={attributes:!0,attributeOldValue:!0},m=new MutationObserver(function(C){var M;for(M=0;M<C.length;M++)if(C[M].type==="attributes"){var T=C[M].attributeName,N=window.HTMLElement.prototype.getAttribute.call(x,T),P=C[M].oldValue;x.attributeChangedCallback(T,P,N)}});m.observe(this,b)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(x,b){var m=v.newMixinIdArray,S=v.oldMixinIdArray,C=v.mixinIds,M,T,N;for(m.length=0,S.length=0,T=x?f.split(x.trim(),/\s+/):m,N=b?f.split(b.trim(),/\s+/):S,C.newMixinIds=T,C.oldMixinIds=N,M=0;M<N.length;M++)T.indexOf(N[M])===-1&&this.unregisterMixin(N[M]);for(this.computedMixinStr="",this.mixinEls.length=0,M=0;M<T.length;M++)this.registerMixin(document.getElementById(T[M]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),C}registerMixin(x){var b,m,S;if(x){if(S=x.getAttribute("mixin"),S)for(b=f.split(S.trim(),/\s+/),m=0;m<b.length;m++)this.registerMixin(document.getElementById(b[m]));this.computedMixinStr=this.computedMixinStr+" "+x.id,this.mixinEls.push(x)}}setAttribute(x,b){x==="mixin"&&this.updateMixins(b),window.HTMLElement.prototype.setAttribute.call(this,x,b)}unregisterMixin(x){var b,m=this.mixinEls,S;for(b=0;b<m.length;++b)if(S=m[b],x===S.id){m.splice(b,1);break}}emit(x,b,m,S){var C=v.evtData;m===void 0&&(m=!0),C.bubbles=!!m,C.detail=b,S&&(C=f.extend({},S,C)),this.dispatchEvent(new CustomEvent(x,C))}}v.evtData={},v.newMixinIdArray=[],v.oldMixinIdArray=[],v.mixinIds={},customElements.define("a-node",v),c.exports.ANode=v,c.exports.knownTags=g},"./src/core/component.js":(c,d,u)=>{var f=u("./src/core/schema.js"),A=u("./src/core/scene/scenes.js"),g=u("./src/core/system.js"),y=u("./src/utils/index.js"),v=c.exports.components={},_=f.parseProperties,x=f.parseProperty,b=f.process,m=f.isSingleProperty,S=f.stringifyProperties,C=f.stringifyProperty,M=y.styleParser,T=y.debug("core:component:warn"),N=document.currentScript,P=new RegExp("[A-Z]+"),k={},D=c.exports.Component=function(W,J,ee){var he=this;this.el=W,this.id=ee,this.attrName=this.name+(ee?"__"+ee:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=k[this.name];var me=this.events;this.events={},z(this,me),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=y.throttleLeadingAndTrailing(function(){W.emit("componentchanged",he.evtDetail,!1)},200),this.updateProperties(J)};D.prototype={schema:{},init:function(){},events:{},update:function(W){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(W,J){var ee=this.schema;return this.isSingleProperty?x(W,ee):_(M.parse(W),ee,!0,this.name,J)},stringify:function(W){var J=this.schema;return typeof W=="string"?W:this.isSingleProperty?C(W,J):(W=S(W,J),M.stringify(W))},updateCachedAttrValue:function(W,J){var ee,he,me;if(W!==void 0){if(W===null){this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0;return}if(W instanceof Object&&!(W instanceof window.HTMLElement)?(he=this.objectPool.use(),ee=y.extend(he,W)):ee=this.parseAttrValueForCache(W),this.isObjectBased&&!J&&this.attrValue)for(me in this.attrValue)ee[me]===void 0&&(ee[me]=this.attrValue[me]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),y.objectPool.clearObject(this.attrValue),this.attrValue=O(this.attrValue,ee,this.isObjectBased),y.objectPool.clearObject(he)}},parseAttrValueForCache:function(W){var J;return typeof W!="string"?W:(this.isSingleProperty?(J=this.schema.parse(W),typeof J=="string"&&(J=W)):(y.objectPool.clearObject(this.parsingAttrValue),J=M.parse(W,this.parsingAttrValue)),J)},flushToDOM:function(W){var J=W?this.data:this.attrValue;J!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(J))},updateProperties:function(W,J){var ee=this.el;if(!ee.hasLoaded){this.updateCachedAttrValue(W);return}W!==null&&(W=this.parseAttrValueForCache(W)),this.updateCachedAttrValue(W,J),this.initialized?(this.updateComponent(W,J),this.callUpdateHandler()):this.initComponent()},initComponent:function(){var W=this.el,J;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),!W.initializingComponents[this.name]&&(W.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete W.initializingComponents[this.name],this.oldData=O(this.oldData,this.data,this.isObjectBased),J=this.isObjectBased?this.objectPool.use():void 0,this.update(J),this.isObjectBased&&this.objectPool.recycle(J),W.isPlaying&&this.play(),W.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(W,J){var ee,he;if(J){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}if(this.isSingleProperty){this.isObjectBased&&x(W,this.schema),this.data=W;return}if(_(W,this.schema,!0,this.name),this.schemaChangeKeys.length){for(ee in W)if(this.schema[ee].schemaChange){he=!0;break}}if(he){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}for(ee in W)W[ee]!==void 0&&(this.data[ee]=W[ee])},callUpdateHandler:function(){var W;this.previousOldData instanceof Object&&y.objectPool.clearObject(this.previousOldData),this.isObjectBased?ne(this.previousOldData,this.oldData):this.previousOldData=this.oldData,W=!y.deepEqual(this.oldData,this.data),!(!this.isPositionRotationScale&&!W)&&(this.oldData instanceof Object&&y.objectPool.clearObject(this.oldData),this.oldData=O(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(W){if(this.isObjectBased){if(!(W in this.attrValue))return;delete this.attrValue[W],this.data[W]=this.schema[W].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(W){var J;J=y.extend({},v[this.name].schema),y.extend(J,W),this.schema=b(J),this.el.emit("schemachanged",this.evtDetail)},buildData:function(W,J,ee){var he,me,Be,Se,rt,Ge=this.nextData,st=this.schema,mt,Ft=this.el.mixinEls,Pt;if(he=W&&W.constructor===Array?W.length:W!=null,this.isObjectBased&&y.objectPool.clearObject(Ge),this.isSingleProperty)this.isObjectBased?me=ne(Ge,st.default):me=K(st.default)?y.clone(st.default):st.default;else{Pt=!J&&this.attrValue,me=Pt instanceof Object?ne(Ge,Pt):Ge;for(Se in st)Be=st[Se].default,me[Se]===void 0&&(me[Se]=K(Be)?y.clone(Be):Be)}for(mt=0;mt<Ft.length;mt++)rt=Ft[mt].getAttribute(this.attrName),rt&&(me=O(me,rt,this.isObjectBased));if(he){if(this.isSingleProperty)return V(W)?(ne(this.parsingAttrValue,W),x(this.parsingAttrValue,st)):x(W,st);me=O(me,W,this.isObjectBased)}else if(this.isSingleProperty)return x(me,st);return _(me,st,void 0,this.name,ee)},eventsAttach:function(){var W;this.eventsDetach();for(W in this.events)this.el.addEventListener(W,this.events[W])},eventsDetach:function(){var W;for(W in this.events)this.el.removeEventListener(W,this.events[W])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}};function z(W,J){var ee;for(ee in J)W.events[ee]=J[ee].bind(W)}if(window.debug)var Y=c.exports.registrationOrderWarnings={};c.exports.registerComponent=function(W,J){var ee,he,me={},Be,Se,rt;if(document.currentScript&&document.currentScript!==N&&A.forEach(function(st){st.hasLoaded||document.currentScript.compareDocumentPosition(st)!==Node.DOCUMENT_POSITION_FOLLOWING&&(T("The component `"+W+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(Y[W]=!0))}),P.test(W)===!0&&T("The component name `"+W+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+W.toLowerCase()+"`"),W.indexOf("__")!==-1)throw new Error("The component name `"+W+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(J).forEach(function(Ge){me[Ge]={value:J[Ge],writable:!0}}),v[W])throw new Error("The component `"+W+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(ee=function(Ge,st,mt){D.call(this,Ge,st,mt)},ee.prototype=Object.create(D.prototype,me),ee.prototype.name=W,ee.prototype.isPositionRotationScale=W==="position"||W==="rotation"||W==="scale",ee.prototype.constructor=ee,ee.prototype.system=g&&g.systems[W],ee.prototype.play=G(ee.prototype.play),ee.prototype.pause=U(ee.prototype.pause),Be=y.extend(b(ee.prototype.schema,ee.prototype.name)),ee.prototype.isSingleProperty=Se=m(ee.prototype.schema),ee.prototype.isSinglePropertyObject=rt=Se&&V(x(void 0,Be))&&!(Be.default instanceof window.HTMLElement),ee.prototype.isObjectBased=!Se||rt,!Se){ee.prototype.schemaChangeKeys=[];for(he in Be)Be[he].schemaChange&&ee.prototype.schemaChangeKeys.push(he)}return k[W]=y.objectPool.createPool(),v[W]={Component:ee,dependencies:ee.prototype.dependencies,isSingleProperty:ee.prototype.isSingleProperty,isSinglePropertyObject:ee.prototype.isSinglePropertyObject,isObjectBased:ee.prototype.isObjectBased,multiple:ee.prototype.multiple,name:W,parse:ee.prototype.parse,parseAttrValueForCache:ee.prototype.parseAttrValueForCache,schema:Be,stringify:ee.prototype.stringify,type:ee.prototype.type},ee};function ne(W,J){var ee,he;for(he in J)J[he]!==void 0&&(ee=J[he],W[he]=K(ee)?y.clone(ee):ee);return W}function O(W,J,ee){var he;if(ee&&J.constructor===Object){for(he in J)J[he]!==void 0&&(J[he]&&J[he].constructor===Object?W[he]=y.clone(J[he]):W[he]=J[he]);return W}return J}function F(W){return W.tick||W.tock}function U(W){return function(){var ee=this.el.sceneEl;this.isPlaying&&(W.call(this),this.isPlaying=!1,this.eventsDetach(),F(this)&&ee.removeBehavior(this))}}function G(W){return function(){var ee=this.el.sceneEl,he=this.el.isPlaying&&!this.isPlaying;!this.initialized||!he||(W.call(this),this.isPlaying=!0,this.eventsAttach(),F(this)&&ee.addBehavior(this))}}function V(W){return W&&W.constructor===Object&&!(W instanceof window.HTMLElement)}function K(W){return W&&(W.constructor===Object||W.constructor===Array)&&!(W instanceof window.HTMLElement)}},"./src/core/geometry.js":(c,d,u)=>{var f=u("./src/core/schema.js"),A=f.process,g=c.exports.geometries={},y=c.exports.geometryNames=[],v=u("./src/lib/three.js"),_=c.exports.Geometry=function(){};_.prototype={schema:{},init:function(x){return this.geometry=new v.BufferGeometry,this.geometry},update:function(x){}},c.exports.registerGeometry=function(x,b){var m,S={};if(Object.keys(b).forEach(function(M){S[M]={value:b[M],writable:!0}}),g[x])throw new Error("The geometry `"+x+"` has been already registered");return m=function(){_.call(this)},m.prototype=Object.create(_.prototype,S),m.prototype.name=x,m.prototype.constructor=m,g[x]={Geometry:m,schema:A(m.prototype.schema)},y.push(x),m}},"./src/core/propertyTypes.js":(c,d,u)=>{var f=u("./src/utils/coordinates.js"),A=u("./node_modules/debug/browser.js"),g=A("core:propertyTypes:warn"),y=A("core:propertyTypes:warn"),v=c.exports.propertyTypes={},_=/[,> .[\]:]/,x=/\url\((.+)\)/;b("audio","",C),b("array",[],m,S),b("asset","",C),b("boolean",!1,N),b("color","#FFF",M,T),b("int",0,P),b("number",0,k),b("map","",C),b("model","",C),b("selector",null,D,Y),b("selectorAll",null,z,ne),b("src","",O),b("string","",M,T),b("time",0,P),b("vec2",{x:0,y:0},F,f.stringify),b("vec3",{x:0,y:0,z:0},F,f.stringify),b("vec4",{x:0,y:0,z:0,w:1},F,f.stringify);function b(V,K,W,J){if("type"in v){g("Property type "+V+" is already registered.");return}v[V]={default:K,parse:W||M,stringify:J||T}}c.exports.registerPropertyType=b;function m(V){if(Array.isArray(V))return V;if(!V||typeof V!="string")return[];return V.split(",").map(K);function K(W){return W.trim()}}function S(V){return V.join(", ")}function C(V){var K,W;if(typeof V!="string")return V;if(W=V.match(x),W)return W[1];if(V.charAt(0)==="#"){if(K=document.getElementById(V.substring(1)),K)return K.tagName==="CANVAS"||K.tagName==="VIDEO"||K.tagName==="IMG"?K:K.getAttribute("src");y('"'+V+'" asset not found.');return}return V}function M(V){return V}function T(V){return V===null?"null":V.toString()}function N(V){return V!=="false"&&V!==!1}function P(V){return parseInt(V,10)}function k(V){return parseFloat(V,10)}function D(V){return V?typeof V!="string"?V:V[0]==="#"&&!_.test(V)?document.getElementById(V.substring(1)):document.querySelector(V):null}function z(V){return V?typeof V!="string"?V:Array.prototype.slice.call(document.querySelectorAll(V),0):null}function Y(V){return V.getAttribute?"#"+V.getAttribute("id"):T(V)}function ne(V){return V instanceof Array?V.map(function(K){return"#"+K.getAttribute("id")}).join(", "):T(V)}function O(V){return y("`src` property type is deprecated. Use `asset` instead."),C(V)}function F(V){return f.parse(V,this.default)}function U(V,K){return V==="audio"&&typeof K!="string"||V==="array"&&!Array.isArray(K)||V==="asset"&&typeof K!="string"||V==="boolean"&&typeof K!="boolean"||V==="color"&&typeof K!="string"||V==="int"&&typeof K!="number"||V==="number"&&typeof K!="number"||V==="map"&&typeof K!="string"||V==="model"&&typeof K!="string"||V==="selector"&&typeof K!="string"&&K!==null||V==="selectorAll"&&typeof K!="string"&&K!==null||V==="src"&&typeof K!="string"||V==="string"&&typeof K!="string"||V==="time"&&typeof K!="number"?!1:V==="vec2"?G(K,2):V==="vec3"?G(K,3):V==="vec4"?G(K,4):!0}c.exports.isValidDefaultValue=U;function G(V,K){if(V===null)return!0;if(typeof V!="object"||Object.keys(V).length!==K)return!1;var W=V.x,J=V.y,ee=V.z,he=V.w;return!(typeof W!="number"||typeof J!="number"||K>2&&typeof ee!="number"||K>3&&typeof he!="number")}c.exports.isValidDefaultCoordinate=G},"./src/core/scene/a-scene.js":(c,d,u)=>{var f=u("./src/core/scene/metaTags.js").inject,A=u("./src/core/scene/wakelock.js"),g=u("./src/core/scene/loadingScreen.js"),y=u("./src/core/scene/scenes.js"),v=u("./src/core/system.js").systems,_=u("./src/lib/three.js"),x=u("./src/utils/index.js"),b=u("./src/core/a-entity.js").AEntity,m=u("./src/core/a-node.js").ANode,S=u("./src/core/scene/postMessage.js"),C=x.bind,M=x.device.isIOS(),T=x.device.isMobile(),N=x.device.isWebXRAvailable,P=x.debug("core:a-scene:warn");M&&u("./src/utils/ios-orientationchange-blank-bug.js");class k extends b{constructor(){var G;super(),G=this,G.clock=new _.Clock,G.isIOS=M,G.isMobile=T,G.hasWebXR=N,G.isAR=!1,G.isScene=!0,G.object3D=new _.Scene,G.object3D.onAfterRender=function(V,K,W){G.isPlaying&&G.tock(G.time,G.delta,W)},G.resize=C(G.resize,G),G.render=C(G.render,G),G.systems={},G.systemNames=[],G.time=G.delta=0,G.behaviors={tick:[],tock:[]},G.hasLoaded=!1,G.isPlaying=!1,G.originalHTML=G.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var G=this,V=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.connectedCallback(),F(this),this.setupRenderer(),g.setup(this,z),this.resize(),V||this.addFullScreenStyles(),S(this),f(this),A(this),this.onVRPresentChangeBound=C(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){G.enterVR()},this.exitVRBound=function(){G.exitVR()},this.exitVRTrueBound=function(){G.exitVR(!0)},this.pointerRestrictedBound=function(){G.pointerRestricted()},this.pointerUnrestrictedBound=function(){G.pointerUnrestricted()},G.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){G.attachedCallbackPostCamera()}),this.initSystems(),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){G.enterVR()})}attachedCallbackPostCamera(){var G,V=this;window.addEventListener("load",G),window.addEventListener("resize",function(){V.isIOS?setTimeout(V.resize,100):V.resize()}),this.play(),y.push(this)}initSystems(){var G;this.initSystem("camera");for(G in v)G!=="camera"&&this.initSystem(G)}initSystem(G){this.systems[G]||(this.systems[G]=new v[G](this),this.systemNames.push(G))}disconnectedCallback(){var G=y.indexOf(this);super.disconnectedCallback(),y.splice(G,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(G){var V,K=this.behaviors,W;for(W in K)G[W]&&(V=this.behaviors[W],V.indexOf(G)===-1&&V.push(G))}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return x.device.checkHeadsetConnected()}enterAR(){var G;if(!this.hasWebXR)throw G="Failed to enter AR mode, WebXR not supported.",new Error(G);if(!x.device.checkARSupport())throw G="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(G);return this.enterVR(!0)}enterVR(G){var V=this,K,W=V.renderer.xr,J;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var ee=V.getAttribute("renderer");if(W.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var he=this.sceneEl.systems.webxr.sessionReferenceSpaceType;W.setReferenceSpaceType(he);var me=G?"immersive-ar":"immersive-vr";return J=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(Ge,st){navigator.xr.requestSession(me,J).then(function(Ft){V.xrSession=Ft,W.layersEnabled=J.requiredFeatures.indexOf("layers")!==-1,W.setSession(Ft).then(function(){W.setFoveation(ee.foveationLevel)}),V.systems.renderer.setWebXRFrameRate(Ft),Ft.addEventListener("end",V.exitVRBound),Se(Ge)},function(Ft){var Pt=me==="immersive-ar",nt=Pt?"AR":"VR";throw new Error("Failed to enter "+nt+" mode (`requestSession`) "+Ft)})})}else{if(K=x.device.getVRDisplay(),W.setDevice(K),K.isPresenting&&!window.hasNativeWebVRImplementation)return Se(),Promise.resolve();var Be={highRefreshRate:ee.highRefreshRate};return K.requestPresent([{source:this.canvas,attributes:Be}]).then(Se,rt)}}return Se(),Promise.resolve();function Se(Ge){var st;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(st=new CustomEvent("vrdisplaypresentchange",{detail:{display:x.device.getVRDisplay()}}),window.dispatchEvent(st)),G?V.addState("ar-mode"):V.addState("vr-mode"),V.emit("enter-vr",{target:V}),!V.hasWebXR&&V.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),V.addFullScreenStyles(),!V.isMobile&&!V.checkHeadsetConnected()&&ne(V.canvas),V.resize(),Ge&&Ge()}function rt(Ge){throw V.removeState("vr-mode"),Ge&&Ge.message?new Error("Failed to enter VR mode (`requestPresent`): "+Ge.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var G=this,V,K=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(K.enabled=!1,V=x.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(V.isPresenting)return V.exitPresent().then(W,J)}else O();return W(),Promise.resolve();function W(){G.removeState("vr-mode"),G.removeState("ar-mode"),G.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),G.hasAttribute("embedded")&&G.removeFullScreenStyles(),G.resize(),G.isIOS&&x.forceCanvasResizeSafariMobile(G.canvas),G.renderer.setPixelRatio(window.devicePixelRatio),G.emit("exit-vr",{target:G})}function J(ee){throw ee&&ee.message?new Error("Failed to exit VR mode (`exitPresent`): "+ee.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var G=this.getPointerLockElement();G&&G!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var G=this.getPointerLockElement();G&&G===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(G){var V=G.display||G.detail.display;if(V&&V.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(G){var V=this.systems[G];return V?V.data:b.prototype.getAttribute.call(this,G)}getComputedAttribut(G){P("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(G)}getDOMAttribute(G){var V=this.systems[G];return V?V.data:b.prototype.getDOMAttribute.call(this,G)}setAttribute(G,V,K){var W=this.systems[G];if(W){m.prototype.setAttribute.call(this,G,V),W.updateProperties(V);return}b.prototype.setAttribute.call(this,G,V,K)}removeBehavior(G){var V,K,W=this.behaviors,J;for(K in W)G[K]&&(V=this.behaviors[K],J=V.indexOf(G),J!==-1&&V.splice(J,1))}resize(){var G=this.camera,V=this.canvas,K,W,J,ee=this.renderer.xr.isPresenting;W=this.renderer.xr.enabled&&ee,!(!G||!V||this.is("vr-mode")&&(this.isMobile||W))&&(K=this.getAttribute("embedded")&&!this.is("vr-mode"),J=z(V,K,this.maxCanvasSize,this.is("vr-mode")),G.aspect=J.width/J.height,G.updateProjectionMatrix(),this.renderer.setSize(J.width,J.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var G=this,V,K,W,J;J={alpha:!0,antialias:!T,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(W=this.getAttribute("renderer"),K=x.styleParser.parse(W),K.precision&&(J.precision=K.precision+"p"),K.antialias&&K.antialias!=="auto"&&(J.antialias=K.antialias==="true"),K.logarithmicDepthBuffer&&K.logarithmicDepthBuffer!=="auto"&&(J.logarithmicDepthBuffer=K.logarithmicDepthBuffer==="true"),K.alpha&&(J.alpha=K.alpha==="true"),this.maxCanvasSize={width:K.maxCanvasWidth?parseInt(K.maxCanvasWidth):this.maxCanvasSize.width,height:K.maxCanvasHeight?parseInt(K.maxCanvasHeight):this.maxCanvasSize.height}),V=this.renderer=new _.WebGLRenderer(J),V.setPixelRatio(window.devicePixelRatio),V.sortObjects=!1,this.camera&&V.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){V.xr.setPoseTarget(G.camera.el.object3D)})}play(){var G=this,V=this;if(this.renderStarted){b.prototype.play.call(this);return}this.addEventListener("loaded",function(){var K=this.renderer,W,J=this.renderer.xr;b.prototype.play.call(this),!V.renderStarted&&(V.resize(),V.renderer&&(window.performance&&window.performance.mark("render-started"),g.remove(),W=x.device.getVRDisplay(),W&&W.isPresenting&&(J.setDevice(W),J.enabled=!0,V.enterVR()),K.setAnimationLoop(this.render),V.renderStarted=!0,V.emit("renderstart")))}),setTimeout(function(){b.prototype.load.call(G)})}updateComponent(G){G in v||b.prototype.updateComponent.apply(this,arguments)}tick(G,V){var K,W=this.systems;for(K=0;K<this.behaviors.tick.length;K++)this.behaviors.tick[K].el.isPlaying&&this.behaviors.tick[K].tick(G,V);for(K=0;K<this.systemNames.length;K++)W[this.systemNames[K]].tick&&W[this.systemNames[K]].tick(G,V)}tock(G,V,K){var W,J=this.systems;for(W=0;W<this.behaviors.tock.length;W++)this.behaviors.tock[W].el.isPlaying&&this.behaviors.tock[W].tock(G,V,K);for(W=0;W<this.systemNames.length;W++)J[this.systemNames[W]].tock&&J[this.systemNames[W]].tock(G,V,K)}render(G,V){var K=this.renderer;this.frame=V,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var W=null;this.is("ar-mode")&&(W=this.object3D.background,this.object3D.background=null),K.render(this.object3D,this.camera),W&&(this.object3D.background=W)}}function D(U,G){var V,K=window.devicePixelRatio;return!G||G.width===-1&&G.height===-1||U.width*K<G.width&&U.height*K<G.height||(V=U.width/U.height,U.width*K>G.width&&G.width!==-1&&(U.width=Math.round(G.width/K),U.height=Math.round(G.width/V/K)),U.height*K>G.height&&G.height!==-1&&(U.height=Math.round(G.height/K),U.width=Math.round(G.height*V/K))),U}window.customElements.define("a-scene",k);function z(U,G,V,K){if(!U.parentElement)return{height:0,width:0};if(G){var W;return W={height:U.parentElement.offsetHeight,width:U.parentElement.offsetWidth},D(W,V)}return Y(V,K)}function Y(U,G){var V;return V={height:document.body.offsetHeight,width:document.body.offsetWidth},G?V:D(V,U)}function ne(U){var G=U.requestFullscreen||U.webkitRequestFullscreen||U.mozRequestFullScreen||U.msRequestFullscreen;G.apply(U,[{navigationUI:"hide"}])}function O(){var U=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;U&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function F(U){var G;G=document.createElement("canvas"),G.classList.add("a-canvas"),G.dataset.aframeCanvas=!0,U.appendChild(G),document.addEventListener("fullscreenchange",V),document.addEventListener("mozfullscreenchange",V),document.addEventListener("webkitfullscreenchange",V),document.addEventListener("MSFullscreenChange",V),G.addEventListener("touchmove",function(K){K.preventDefault()}),U.canvas=G,U.emit("render-target-loaded",{target:G}),setTimeout(C(U.resize,U),0);function V(){var K=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;K||U.exitVR(),document.activeElement.blur(),document.body.focus()}}c.exports.setupCanvas=F,c.exports.AScene=k},"./src/core/scene/loadingScreen.js":(c,d,u)=>{var f=u("./src/utils/index.js"),A=f.styleParser,g,y,v,_="loading-screen",x="a-loader-title";c.exports.setup=function(C,M){g=C,v=M;var T=g.hasAttribute(_)?A.parse(g.getAttribute(_)):void 0,N=T&&T.dotsColor||"white",P=T&&T.backgroundColor||"#24CAFF",k=T===void 0||T.enabled==="true"||T.enabled===void 0,D,z,Y,ne,O,F,U,G,V,K;k&&(D=new THREE.Scene,z=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),Y=new THREE.MeshBasicMaterial({color:N}),ne=new THREE.Mesh(z,Y),O=ne.clone(),F=ne.clone(),U=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),G=new THREE.Clock,V=0,K=function(){g.renderer.render(D,U),V=G.getElapsedTime()%4,ne.visible=V>=1,O.visible=V>=2,F.visible=V>=3},D.background=new THREE.Color(P),D.add(U),ne.position.set(-1,0,-15),O.position.set(0,0,-15),F.position.set(1,0,-15),U.add(ne),U.add(O),U.add(F),m(),setTimeout(function(){g.hasLoaded||(b(U),y.style.display="block",window.addEventListener("resize",function(){b(U)}),g.renderer.setAnimationLoop(K))},200))},c.exports.remove=function(){window.removeEventListener("resize",b),y&&(y.style.display="none")};function b(S){var C=g.hasAttribute("embedded"),M=v(g.canvas,C,g.maxCanvasSize,g.is("vr-mode"));S.aspect=M.width/M.height,S.updateProjectionMatrix(),g.renderer.setSize(M.width,M.height,!1)}function m(){y=document.createElement("div"),y.className=x,y.innerHTML=document.title,y.style.display="none",g.appendChild(y)}},"./src/core/scene/metaTags.js":(c,d,u)=>{var f=u("./src/constants/index.js"),A=u("./src/utils/index.js").extend,g=c.exports.MOBILE_HEAD_TAGS=[v({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),v({name:"mobile-web-app-capable",content:"yes"}),v({name:"theme-color",content:"black"})],y=[v({name:"apple-mobile-web-app-capable",content:"yes"}),v({name:"apple-mobile-web-app-status-bar-style",content:"black"}),_({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function v(b){return{tagName:"meta",attributes:b,exists:function(){return document.querySelector('meta[name="'+b.name+'"]')}}}function _(b){return{tagName:"link",attributes:b,exists:function(){return document.querySelector('link[rel="'+b.rel+'"]')}}}c.exports.inject=function(m){var S=document.head,C=S.querySelector("script"),M,T=[];return g.forEach(N),m.isIOS&&y.forEach(N),T;function N(P){!P||P.exists()||(M=x(P),M&&(C?C.parentNode.insertBefore(M,C):S.appendChild(M),T.push(M)))}};function x(b){if(!(!b||!b.tagName)){var m=document.createElement(b.tagName);return m.setAttribute(f.AFRAME_INJECTED,""),A(m,b.attributes)}}},"./src/core/scene/postMessage.js":(c,d,u)=>{var f=u("./src/utils/bind.js"),A=u("./src/utils/index.js").isIframed;c.exports=function(v){A()&&window.addEventListener("message",f(g,v))};function g(y){var v=this;if(y.data)switch(y.data.type){case"vr":switch(y.data.data){case"enter":v.enterVR();break;case"exit":v.exitVR();break}}}},"./src/core/scene/scenes.js":c=>{c.exports=[]},"./src/core/scene/wakelock.js":(c,d,u)=>{var f=u("./vendor/wakelock/wakelock.js");c.exports=function(g){if(g.isMobile){var y=g.wakelock=new f;g.addEventListener("enter-vr",function(){y.request()}),g.addEventListener("exit-vr",function(){y.release()})}}},"./src/core/schema.js":(c,d,u)=>{var f=u("./src/utils/index.js"),A=u("./src/core/propertyTypes.js"),g=f.debug,y=A.isValidDefaultValue,v=A.propertyTypes,_=g("core:schema:warn");function x(C){return"type"in C?typeof C.type=="string":"default"in C}c.exports.isSingleProperty=x,c.exports.process=function(C,M){var T;if(x(C))return b(C,M);for(T in C)C[T]=b(C[T],M);return C};function b(C,M){var T=C.default,N,P,k=C.type;return C.type?C.type==="bool"?k="boolean":C.type==="float"&&(k="number"):T!==void 0&&(typeof T=="boolean"||typeof T=="number")?k=typeof T:Array.isArray(T)?k="array":k="string",P=v[k],P||_("Unknown property type for component `"+M+"`: "+k),N=!!C.parse,C.parse=C.parse||P.parse,C.stringify=C.stringify||P.stringify,C.type=k,"default"in C?!N&&!y(k,T)&&_("Default value `"+T+"` does not match type `"+k+"` in component `"+M+"`"):C.default=P.default,C}c.exports.processPropertyDefinition=b,c.exports.parseProperties=function(){var C=[];return function(M,T,N,P,k){var D,z,Y,ne;C.length=0;for(z in N?M:T)N&&M[z]===void 0||C.push(z);if(M===null||typeof M!="object")return M;for(z in M)M[z]!==void 0&&!T[z]&&!k&&_("Unknown property `"+z+"` for component/system `"+P+"`.");for(D=0;D<C.length;D++){if(z=C[D],Y=T[z],ne=M[z],!T[z])return;M[z]=m(ne,Y)}return M}}();function m(C,M){return(C==null||C==="")&&(C=M.default,Array.isArray(C)&&(C=C.slice())),M.parse(C,M.default)}c.exports.parseProperty=m,c.exports.stringifyProperties=function(C,M){var T,N,P,k={},D;for(T in C)N=M[T],P=C[T],D=P,typeof D=="object"&&(D=S(P,N),N||_("Unknown component property: "+T)),k[T]=D;return k};function S(C,M){return typeof C!="object"?C:!M||C===null?JSON.stringify(C):M.stringify(C)}c.exports.stringifyProperty=S},"./src/core/shader.js":(c,d,u)=>{var f=u("./src/core/schema.js"),A=f.process,g=c.exports.shaders={},y=c.exports.shaderNames=[],v=u("./src/lib/three.js"),_=u("./src/utils/index.js"),x={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},b=c.exports.Shader=function(){};b.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(m){return this.attributes=this.initVariables(m,"attribute"),this.uniforms=this.initVariables(m,"uniform"),this.material=new(this.raw?v.RawShaderMaterial:v.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(m,S){var C,M=this.schema,T={},N;for(C in M)M[C].is===S&&(N=x[M[C].type],T[C]={type:N,value:void 0});return T},update:function(m){this.updateVariables(m,"attribute"),this.updateVariables(m,"uniform")},updateVariables:function(m,S){var C,M,T=this.schema,N;N=S==="uniform"?this.uniforms:this.attributes;for(C in m)if(!(!T[C]||T[C].is!==S)){if(T[C].type==="map"){if(!N[C]||N[C].value===m[C])continue;M="_texture_"+C,this.setMapOnTextureLoad(N,C,M),_.material.updateMapMaterialFromData(M,C,this,m);continue}N[C].value=this.parseValue(T[C].type,m[C]),N[C].needsUpdate=!0}},parseValue:function(m,S){var C;switch(m){case"vec2":return new v.Vector2(S.x,S.y);case"vec3":return new v.Vector3(S.x,S.y,S.z);case"vec4":return new v.Vector4(S.x,S.y,S.z,S.w);case"color":return C=new v.Color(S),new v.Vector3(C.r,C.g,C.b);case"map":return v.ImageUtils.loadTexture(S);default:return S}},setMapOnTextureLoad:function(m,S,C){var M=this;this.el.addEventListener("materialtextureloaded",function(){m[S].value=M.material[C],m[S].needsUpdate=!0})}},c.exports.registerShader=function(m,S){var C,M={};if(Object.keys(S).forEach(function(T){M[T]={value:S[T],writable:!0}}),g[m])throw new Error("The shader "+m+" has been already registered");return C=function(){b.call(this)},C.prototype=Object.create(b.prototype,M),C.prototype.name=m,C.prototype.constructor=C,g[m]={Shader:C,schema:A(C.prototype.schema)},y.push(m),C}},"./src/core/system.js":(c,d,u)=>{var f=u("./src/core/component.js"),A=u("./src/core/schema.js"),g=u("./src/utils/index.js"),y=A.parseProperties,v=A.parseProperty,_=A.process,x=A.isSingleProperty,b=g.styleParser,m=c.exports.systems={},S=c.exports.System=function(C){var M=f&&f.components[this.name];this.el=C,this.sceneEl=C,M&&(M.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};S.prototype={schema:{},init:function(){},update:function(C){},updateProperties:function(C){var M=this.data;Object.keys(A).length&&(this.buildData(C),this.update(M))},buildData:function(C){var M=this.schema;Object.keys(M).length&&(C=C||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),x(M)?this.data=v(C,M):this.data=y(b.parse(C)||{},M))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},c.exports.registerSystem=function(C,M){var T,N,P={},k=g.findAllScenes(document);if(Object.keys(M).forEach(function(D){P[D]={value:M[D],writable:!0}}),m[C])throw new Error("The system `"+C+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(N=function(D){S.call(this,D)},N.prototype=Object.create(S.prototype,P),N.prototype.name=C,N.prototype.constructor=N,N.prototype.schema=g.extend(_(N.prototype.schema)),m[C]=N,T=0;T<k.length;T++)k[T].initSystem(C)}},"./src/extras/components/index.js":(c,d,u)=>{u("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(c,d,u)=>{var f=u("./src/core/component.js").registerComponent,A=u("./src/lib/three.js"),g=new A.Vector3,y=new A.Vector3;f("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var v=this.data,_=this.el,x=_.object3D.parent,b=_.object3D,m=new A.Group;g.copy(b.position),y.copy(b.rotation),x.remove(b),m.add(b),x.add(m),_.object3D=m,b.position.set(-1*v.x,-1*v.y,-1*v.z),m.position.set(v.x+g.x,v.y+g.y,v.z+g.z),m.rotation.copy(b.rotation),b.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(c,d,u)=>{var f=u("./src/core/component.js").components,A=u("./src/core/shader.js").shaders,g=u("./src/utils/index.js"),y={};Object.keys(f.material.schema).forEach(v),Object.keys(A.standard.schema).forEach(v);function v(_){var x=_.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();_==="fog"&&(x="material-fog"),_==="visible"&&(x="material-visible"),y[x]="material."+_}c.exports=function(){return{defaultComponents:{material:{}},mappings:g.extend({},y)}}},"./src/extras/primitives/index.js":(c,d,u)=>{u("./src/extras/primitives/primitives/a-camera.js"),u("./src/extras/primitives/primitives/a-cursor.js"),u("./src/extras/primitives/primitives/a-curvedimage.js"),u("./src/extras/primitives/primitives/a-gltf-model.js"),u("./src/extras/primitives/primitives/a-image.js"),u("./src/extras/primitives/primitives/a-light.js"),u("./src/extras/primitives/primitives/a-link.js"),u("./src/extras/primitives/primitives/a-obj-model.js"),u("./src/extras/primitives/primitives/a-sky.js"),u("./src/extras/primitives/primitives/a-sound.js"),u("./src/extras/primitives/primitives/a-text.js"),u("./src/extras/primitives/primitives/a-video.js"),u("./src/extras/primitives/primitives/a-videosphere.js"),u("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(c,d,u)=>{var f=u("./src/core/a-node.js").knownTags,A=u("./src/core/a-entity.js").AEntity,g=u("./src/core/component.js").components,y=u("./src/utils/index.js"),v=y.debug,_=y.entity.setComponentProperty,x=v("extras:primitives:debug"),b=v("extras:primitives:warn"),m=v("extras:primitives:error"),S=c.exports.primitives={};c.exports.registerPrimitive=function(N,P){if(N=N.toLowerCase(),f[N]){m("Trying to register primitive "+N+" that has been already previously registered");return}f[N]=!0,x("Registering <%s>",N),P.defaultAttributes&&b("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var k=P.mappings||{},D=class extends A{constructor(){super(),this.defaultComponentsFromPrimitive=P.defaultComponents||P.defaultAttributes||{},this.deprecated=P.deprecated||null,this.deprecatedMappings=P.deprecatedMappings||{},this.mappings=k,P.deprecated&&console.warn(P.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var z=this.mappings,Y=this;Object.keys(z).forEach(function(O){var F;O!==O.toLowerCase()&&b("Mapping keys should be specified in lower case. The mapping key "+O+" may not be recognized"),g[O]&&(F=z[O].replace(".","-"),z[F]=z[O],delete z[O],console.warn("The primitive "+Y.tagName.toLowerCase()+" has a mapping collision. The attribute "+O+" has the same name as a registered component and has been renamed to "+F))})}getExtraComponents(){var z,Y,ne,O,F,U,G=this;for(Y=y.clone(this.defaultComponentsFromPrimitive),F=this.getAttribute("mixin"),F&&(F=F.trim().split(" "),F.forEach(function(he){var me=G.sceneEl.querySelector("#"+he).componentCache;Object.keys(me).forEach(function(Se){Y[Se]=V(Y[Se],me[Se])})})),ne=0;ne<this.attributes.length;ne++)if(z=this.attributes[ne],O=this.mappings[z.name],O){U=y.entity.getComponentPropertyPath(O),U.constructor===Array?(Y[U[0]]=Y[U[0]]||{},Y[U[0]][U[1]]=z.value.trim()):Y[U]=z.value.trim();continue}return Y;function V(ee,he){return K(ee)?W(he):K(he)?W(ee):J(ee)&&J(he)?y.extendDeep(ee,he):W(he)}function K(ee){return typeof ee>"u"}function W(ee){return J(ee)?y.extendDeep({},ee):ee}function J(ee){return ee!==null&&ee.constructor===Object}}attributeChangedCallback(z,Y,ne){var O=this.mappings[z];if(z in this.deprecatedMappings&&console.warn(this.deprecatedMappings[z]),!z||!O){super.attributeChangedCallback(z,Y,ne);return}_(this,O,ne)}};return customElements.define(N,D),D.mappings=k,S[N]=D,D};function C(T,N){var P=g[T].schema;Object.keys(P).map(function(k){var D=k.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();N[D]!==void 0&&(D=T+"-"+k),N[D]=T+"."+k})}function M(T,N,P){P=P||{},Object.keys(N).map(function(D){C(D,P)}),c.exports.registerPrimitive(T,y.extendDeep({},null,{defaultComponents:N,mappings:P}))}c.exports.definePrimitive=M},"./src/extras/primitives/primitives/a-camera.js":(c,d,u)=>{var f=u("./src/extras/primitives/primitives.js").registerPrimitive;f("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js");A("a-cursor",g.extendDeep({},f(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js");A("a-curvedimage",g.extendDeep({},f(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(c,d,u)=>{var f=u("./src/extras/primitives/primitives.js").registerPrimitive;f("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js");A("a-image",g.extendDeep({},f(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(c,d,u)=>{var f=u("./src/extras/primitives/primitives.js").registerPrimitive;f("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(c,d,u)=>{var f=u("./src/extras/primitives/primitives.js").registerPrimitive;f("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js")(),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js");A("a-obj-model",g.extendDeep({},f,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js"),y=u("./src/extras/primitives/primitives/meshPrimitives.js");A("a-sky",g.extendDeep({},f(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:g.extendDeep({},y["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(c,d,u)=>{var f=u("./src/extras/primitives/primitives.js").registerPrimitive;f("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(c,d,u)=>{var f=u("./src/extras/primitives/primitives.js").definePrimitive;f("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js");A("a-video",g.extendDeep({},f(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/extras/primitives/primitives.js").registerPrimitive,g=u("./src/utils/index.js");A("a-videosphere",g.extendDeep({},f(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(c,d,u)=>{var f=u("./src/extras/primitives/getMeshMixin.js"),A=u("./src/core/geometry.js").geometries,g=u("./src/core/geometry.js").geometryNames,y=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js"),_=c.exports={};g.forEach(function(m){var S=A[m],C=x(m),M={};Object.keys(S.schema).forEach(function(k){M[x(k)]="geometry."+k});var T="a-"+C,N=y(T,v.extendDeep({},f(),{defaultComponents:{geometry:{primitive:m}},mappings:M}));_[T]=N});function x(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(g){this.geometry=new A.BoxGeometry(g.width,g.height,g.depth,g.segmentsWidth,g.segmentsHeight,g.segmentsDepth)}})},"./src/geometries/circle.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=A.MathUtils.degToRad;f("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new A.CircleGeometry(y.radius,y.segments,g(y.thetaStart),g(y.thetaLength))}})},"./src/geometries/cone.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=A.MathUtils.degToRad;f("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new A.CylinderGeometry(y.radiusTop,y.radiusBottom,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,g(y.thetaStart),g(y.thetaLength))}})},"./src/geometries/cylinder.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=A.MathUtils.degToRad;f("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new A.CylinderGeometry(y.radius,y.radius,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,g(y.thetaStart),g(y.thetaLength))}})},"./src/geometries/dodecahedron.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(g){this.geometry=new A.DodecahedronGeometry(g.radius,g.detail)}})},"./src/geometries/icosahedron.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(g){this.geometry=new A.IcosahedronGeometry(g.radius,g.detail)}})},"./src/geometries/index.js":(c,d,u)=>{u("./src/geometries/box.js"),u("./src/geometries/circle.js"),u("./src/geometries/cone.js"),u("./src/geometries/cylinder.js"),u("./src/geometries/dodecahedron.js"),u("./src/geometries/icosahedron.js"),u("./src/geometries/octahedron.js"),u("./src/geometries/plane.js"),u("./src/geometries/ring.js"),u("./src/geometries/sphere.js"),u("./src/geometries/tetrahedron.js"),u("./src/geometries/torus.js"),u("./src/geometries/torusKnot.js"),u("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(g){this.geometry=new A.OctahedronGeometry(g.radius,g.detail)}})},"./src/geometries/plane.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(g){this.geometry=new A.PlaneGeometry(g.width,g.height,g.segmentsWidth,g.segmentsHeight)}})},"./src/geometries/ring.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=A.MathUtils.degToRad;f("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new A.RingGeometry(y.radiusInner,y.radiusOuter,y.segmentsTheta,y.segmentsPhi,g(y.thetaStart),g(y.thetaLength))}})},"./src/geometries/sphere.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=A.MathUtils.degToRad;f("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(y){this.geometry=new A.SphereGeometry(y.radius,y.segmentsWidth,y.segmentsHeight,g(y.phiStart),g(y.phiLength),g(y.thetaStart),g(y.thetaLength))}})},"./src/geometries/tetrahedron.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(g){this.geometry=new A.TetrahedronGeometry(g.radius,g.detail)}})},"./src/geometries/torus.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=A.MathUtils.degToRad;f("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(y){this.geometry=new A.TorusGeometry(y.radius,y.radiusTubular*2,y.segmentsRadial,y.segmentsTubular,g(y.arc))}})},"./src/geometries/torusKnot.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js");f("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(g){this.geometry=new A.TorusKnotGeometry(g.radius,g.radiusTubular*2,g.segmentsTubular,g.segmentsRadial,g.p,g.q)}})},"./src/geometries/triangle.js":(c,d,u)=>{var f=u("./src/core/geometry.js").registerGeometry,A=u("./src/lib/three.js"),g=new A.Quaternion,y=new A.Vector3(0,0,1),v=new A.Vector2,_=new A.Vector2,x=new A.Vector2;f("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(b){var m,S,C,M,T,N,P,k,D;C=new A.Triangle,C.a.set(b.vertexA.x,b.vertexA.y,b.vertexA.z),C.b.set(b.vertexB.x,b.vertexB.y,b.vertexB.z),C.c.set(b.vertexC.x,b.vertexC.y,b.vertexC.z),S=C.getNormal(new A.Vector3),g.setFromUnitVectors(S,y),M=C.a.clone().applyQuaternion(g),T=C.b.clone().applyQuaternion(g),N=C.c.clone().applyQuaternion(g),v.set(Math.min(M.x,T.x,N.x),Math.min(M.y,T.y,N.y)),_.set(Math.max(M.x,T.x,N.x),Math.max(M.y,T.y,N.y)),x.set(0,0).subVectors(_,v),M=new A.Vector2().subVectors(M,v).divide(x),T=new A.Vector2().subVectors(T,v).divide(x),N=new A.Vector2().subVectors(N,v).divide(x),m=this.geometry=new A.BufferGeometry,P=[C.a.x,C.a.y,C.a.z,C.b.x,C.b.y,C.b.z,C.c.x,C.c.y,C.c.z],k=[S.x,S.y,S.z,S.x,S.y,S.z,S.x,S.y,S.z],D=[M.x,M.y,T.x,T.y,N.x,N.y],m.setAttribute("position",new A.Float32BufferAttribute(P,3)),m.setAttribute("normal",new A.Float32BufferAttribute(k,3)),m.setAttribute("uv",new A.Float32BufferAttribute(D,2))}})},"./src/index.js":(c,d,u)=>{if(window.Promise=window.Promise||u("./node_modules/promise-polyfill/Promise.js"),u("./node_modules/@ungap/custom-elements/index.js"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var f=u("./src/utils/isIOSOlderThan10.js"),A=f(window.navigator.userAgent)?1/window.devicePixelRatio:1,g=u("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),y={BUFFER_SCALE:A,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new g(y)}var v=u("./src/utils/index.js"),_=v.debug;v.isIE11&&(u("./node_modules/custom-event-polyfill/polyfill.js"),u("./vendor/starts-with-polyfill.js"));var x=_("A-Frame:error"),b=_("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&b("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&x("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),u("./node_modules/present/lib/present-browser.js"),v.device.isBrowserEnvironment&&(u("./src/style/aframe.css"),u("./src/style/rStats.css"));var m=u("./src/core/scene/a-scene.js").AScene,S=u("./src/core/component.js").components,C=u("./src/core/component.js").registerComponent,M=u("./src/core/geometry.js").registerGeometry,T=u("./src/extras/primitives/primitives.js").registerPrimitive,N=u("./src/core/shader.js").registerShader,P=u("./src/core/system.js").registerSystem,k=u("./src/core/shader.js").shaders,D=u("./src/core/system.js").systems,z=window.THREE=u("./src/lib/three.js"),Y=u("./package.json");u("./src/components/index.js"),u("./src/geometries/index.js"),u("./src/shaders/index.js"),u("./src/systems/index.js");var ne=u("./src/core/a-node.js").ANode,O=u("./src/core/a-entity.js").AEntity;u("./src/core/a-assets.js"),u("./src/core/a-cubemap.js"),u("./src/core/a-mixin.js"),u("./src/extras/components/index.js"),u("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.4.2 (Date 2023-04-22, Commit #4e521f1f)"),console.log("THREE Version (https://github.com/supermedium/three.js):",Y.dependencies["super-three"]),console.log("WebVR Polyfill Version:",Y.dependencies["webvr-polyfill"]),c.exports=window.AFRAME={AComponent:u("./src/core/component.js").Component,AEntity:O,ANode:ne,ANIME:u("./node_modules/super-animejs/lib/anime.es.js").default,AScene:m,components:S,coreComponents:Object.keys(S),geometries:u("./src/core/geometry.js").geometries,registerComponent:C,registerGeometry:M,registerPrimitive:T,registerShader:N,registerSystem:P,primitives:{getMeshMixin:u("./src/extras/primitives/getMeshMixin.js"),primitives:u("./src/extras/primitives/primitives.js").primitives},scenes:u("./src/core/scene/scenes.js"),schema:u("./src/core/schema.js"),shaders:k,systems:D,THREE:z,utils:v,version:Y.version}},"./src/lib/rStatsAframe.js":c=>{window.aframeStats=function(d){var u=null,f=d,A={te:{caption:"Entities"},lt:{caption:"Load Time"}},g=[{caption:"A-Frame",values:["te","lt"]}];function y(){u("te").set(v()),window.performance.getEntriesByName&&u("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function v(){var m=f.querySelectorAll("*");return Array.prototype.slice.call(m).filter(function(S){return S.isEntity}),m.length}function _(){}function x(){}function b(m){u=m}return{update:y,start:_,end:x,attach:b,values:A,groups:g,fractions:[]}},c.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(c,d,u)=>{var f=u("./src/lib/three.module.js").default;f.TextureLoader&&(f.TextureLoader.prototype.crossOrigin="anonymous"),f.ImageLoader&&(f.ImageLoader.prototype.crossOrigin="anonymous"),f.Cache&&(f.Cache.enabled=!0),f.DRACOLoader.prototype.crossOrigin="anonymous",f.GLTFLoader.prototype.crossOrigin="anonymous",f.KTX2Loader.prototype.crossOrigin="anonymous",f.MTLLoader.prototype.crossOrigin="anonymous",f.OBJLoader.prototype.crossOrigin="anonymous",c.exports=f},"./src/lib/three.module.js":(c,d,u)=>{u.r(d),u.d(d,{default:()=>C});var f=u("./node_modules/super-three/build/three.module.js"),A=u("./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js"),g=u("./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js"),y=u("./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js"),v=u("./node_modules/super-three/examples/jsm/loaders/OBJLoader.js"),_=u("./node_modules/super-three/examples/jsm/loaders/MTLLoader.js"),x=u("./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js"),b=u("./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js"),m=u("./node_modules/object-assign/index.js"),S=window.THREE=m({},f);u("./vendor/DeviceOrientationControls.js"),S.DRACOLoader=A.DRACOLoader,S.GLTFLoader=g.GLTFLoader,S.KTX2Loader=y.KTX2Loader,S.OBJLoader=v.OBJLoader,S.MTLLoader=_.MTLLoader,S.BufferGeometryUtils=x,S.LightProbeGenerator=b.LightProbeGenerator;const C=S},"./src/shaders/flat.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader,A=u("./src/lib/three.js"),g=u("./src/utils/index.js");c.exports.Shader=f("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(v){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new A.Color},this.textureSrc=null,y(v,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new A.MeshBasicMaterial(this.materialData)},update:function(v){this.updateMaterial(v),g.material.updateMap(this,v)},updateMaterial:function(v){var _;y(v,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(_ in this.materialData)this.material[_]=this.materialData[_]}});function y(v,_){return _.color.set(v.color),_.fog=v.fog,_.wireframe=v.wireframe,_.toneMapped=v.toneMapped,_.wireframeLinewidth=v.wireframeLinewidth,_}},"./src/shaders/index.js":(c,d,u)=>{u("./src/shaders/flat.js"),u("./src/shaders/standard.js"),u("./src/shaders/phong.js"),u("./src/shaders/sdf.js"),u("./src/shaders/msdf.js"),u("./src/shaders/ios10hls.js"),u("./src/shaders/shadow.js")},"./src/shaders/ios10hls.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader;c.exports.Shader=f("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join(`
`)})},"./src/shaders/msdf.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader,A=!!document.createElement("canvas").getContext("webgl2"),g=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),v=A?y:g,_=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture2D(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),x=["#version 300 es","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  fragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),b=A?x:_;c.exports.Shader=f("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:v,fragmentShader:b})},"./src/shaders/phong.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader,A=u("./src/lib/three.js"),g=u("./src/utils/index.js"),y=new A.CubeTextureLoader,v={};c.exports.Shader=f("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(x){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new A.Color,specular:new A.Color,emissive:new A.Color},this.textureSrc=null,_(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new A.MeshPhongMaterial(this.materialData),g.material.updateMap(this,x)},update:function(x){this.updateMaterial(x),g.material.updateMap(this,x),x.normalMap&&g.material.updateDistortionMap("normal",this,x),x.displacementMap&&g.material.updateDistortionMap("displacement",this,x),x.ambientOcclusionMap&&g.material.updateDistortionMap("ambientOcclusion",this,x),x.bump&&g.material.updateDistortionMap("bump",this,x),this.updateEnvMap(x)},updateMaterial:function(x){var b;_(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(b in this.materialData)this.material[b]=this.materialData[b]},updateEnvMap:function(x){var b=this,m=this.material,S=x.envMap,C=x.sphericalEnvMap,M=x.refract,T=this.el.sceneEl;if(!S&&!C||this.isLoadingEnvMap){Object.defineProperty(m,"envMap",{get:function(){return T.object3D.environment},set:function(N){delete this.envMap,this.envMap=N}}),m.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,delete m.envMap,C){this.el.sceneEl.systems.material.loadTexture(C,{src:C},function(P){b.isLoadingEnvMap=!1,P.mapping=M?A.EquirectangularRefractionMapping:A.EquirectangularReflectionMapping,m.envMap=P,g.material.handleTextureEvents(b.el,P),m.needsUpdate=!0});return}if(v[S]){v[S].then(function(N){b.isLoadingEnvMap=!1,m.envMap=N,g.material.handleTextureEvents(b.el,N),m.needsUpdate=!0});return}v[S]=new Promise(function(N){g.srcLoader.validateCubemapSrc(S,function(k){y.load(k,function(D){b.isLoadingEnvMap=!1,m.envMap=D,D.mapping=M?A.CubeRefractionMapping:A.CubeReflectionMapping,g.material.handleTextureEvents(b.el,D),N(D)})})})}});function _(x,b){switch(b.color.set(x.color),b.specular.set(x.emissive),b.emissive.set(x.emissive),b.emissiveIntensity=x.emissiveIntensity,b.fog=x.fog,b.transparent=x.transparent,b.wireframe=x.wireframe,b.wireframeLinewidth=x.wireframeLinewidth,b.shininess=x.shininess,b.flatShading=x.flatShading,b.wireframe=x.wireframe,b.wireframeLinewidth=x.wireframeLinewidth,b.reflectivity=x.reflectivity,b.refractionRatio=x.refractionRatio,x.combine){case"mix":b.combine=A.MixOperation;break;case"multiply":b.combine=A.MultiplyOperation;break;case"add":b.combine=A.AddOperation;break}return x.normalMap&&(b.normalScale=x.normalScale),x.ambientOcclusionMap&&(b.aoMapIntensity=x.ambientOcclusionMapIntensity),x.bumpMap&&(b.aoMapIntensity=x.bumpMapScale),x.displacementMap&&(b.displacementScale=x.displacementScale,b.displacementBias=x.displacementBias),b}},"./src/shaders/sdf.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader,A=!!document.createElement("canvas").getContext("webgl2"),g=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),v=A?y:g,_=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture2D(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture2D(map, box.xy).a, width)","        + contour(texture2D(map, box.zw).a, width)","        + contour(texture2D(map, box.xw).a, width)","        + contour(texture2D(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture2D(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join(`
`),x=["#version 300 es","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture(map, box.xy).a, width)","        + contour(texture(map, box.zw).a, width)","        + contour(texture(map, box.xw).a, width)","        + contour(texture(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  fragColor = vec4(color, opacity * alpha);","}"].join(`
`),b=A?x:_;c.exports.Shader=f("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:v,fragmentShader:b})},"./src/shaders/shadow.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader,A=u("./src/lib/three.js");c.exports.Shader=f("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(g){this.rendererSystem=this.el.sceneEl.systems.renderer,this.material=new A.ShadowMaterial},update:function(g){this.material.opacity=g.opacity,this.material.alphaToCoverage=g.alphaToCoverage,this.material.transparent=g.transparent}})},"./src/shaders/standard.js":(c,d,u)=>{var f=u("./src/core/shader.js").registerShader,A=u("./src/lib/three.js"),g=u("./src/utils/index.js"),y=new A.CubeTextureLoader,v={};c.exports.Shader=f("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(x){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new A.Color,emissive:new A.Color},_(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new A.MeshStandardMaterial(this.materialData)},update:function(x){this.updateMaterial(x),g.material.updateMap(this,x),x.normalMap&&g.material.updateDistortionMap("normal",this,x),x.displacementMap&&g.material.updateDistortionMap("displacement",this,x),x.ambientOcclusionMap&&g.material.updateDistortionMap("ambientOcclusion",this,x),x.metalnessMap&&g.material.updateDistortionMap("metalness",this,x),x.roughnessMap&&g.material.updateDistortionMap("roughness",this,x),this.updateEnvMap(x)},updateMaterial:function(x){var b,m=this.material;_(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive);for(b in this.materialData)m[b]=this.materialData[b]},updateEnvMap:function(x){var b=this,m=this.material,S=x.envMap,C=x.sphericalEnvMap;if(!S&&!C||this.isLoadingEnvMap){m.envMap=null,m.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,C){this.el.sceneEl.systems.material.loadTexture(C,{src:C},function(T){b.isLoadingEnvMap=!1,T.mapping=A.EquirectangularReflectionMapping,m.envMap=T,g.material.handleTextureEvents(b.el,T),m.needsUpdate=!0});return}if(v[S]){v[S].then(function(M){b.isLoadingEnvMap=!1,m.envMap=M,g.material.handleTextureEvents(b.el,M),m.needsUpdate=!0});return}v[S]=new Promise(function(M){g.srcLoader.validateCubemapSrc(S,function(N){y.load(N,function(P){b.isLoadingEnvMap=!1,m.envMap=P,g.material.handleTextureEvents(b.el,P),M(P)})})})}});function _(x,b){return b.color.set(x.color),b.emissive.set(x.emissive),b.emissiveIntensity=x.emissiveIntensity,b.fog=x.fog,b.metalness=x.metalness,b.roughness=x.roughness,b.wireframe=x.wireframe,b.wireframeLinewidth=x.wireframeLinewidth,x.normalMap&&(b.normalScale=x.normalScale),x.ambientOcclusionMap&&(b.aoMapIntensity=x.ambientOcclusionMapIntensity),x.displacementMap&&(b.displacementScale=x.displacementScale,b.displacementBias=x.displacementBias),b}},"./src/systems/camera.js":(c,d,u)=>{var f=u("./src/constants/index.js"),A=u("./src/core/system.js").registerSystem,g="data-aframe-default-camera";c.exports.System=A("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var v,_,x=this.sceneEl,b=this;if(x.camera&&!x.camera.el.getAttribute("camera").spectator){x.emit("cameraready",{cameraEl:x.camera.el});return}if(v=x.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!v.length){this.createDefaultCamera();return}for(this.numUserCameras=v.length,_=0;_<v.length;_++)v[_].addEventListener("object3dset",function(m){m.detail.type==="camera"&&b.checkUserCamera(this)}),v[_].isNode?v[_].load():v[_].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(v){var _,x=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(_=v.getAttribute("camera"),!_.active||_.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,x.camera=v.getObject3D("camera"),x.emit("cameraready",{cameraEl:v})}},createDefaultCamera:function(){var v,_=this.sceneEl;v=document.createElement("a-entity"),v.setAttribute("camera",{active:!0}),v.setAttribute("position",{x:0,y:f.DEFAULT_CAMERA_HEIGHT,z:0}),v.setAttribute("wasd-controls",""),v.setAttribute("look-controls",""),v.setAttribute(f.AFRAME_INJECTED,""),v.addEventListener("object3dset",function(x){x.detail.type==="camera"&&(_.camera=x.detail.object,_.emit("cameraready",{cameraEl:v}))}),_.appendChild(v)},disableActiveCamera:function(){var v,_;v=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),_=v[v.length-1],_.setAttribute("camera","active",!0)},setActiveCamera:function(v){var _,x,b,m,S=this.activeCameraEl,C=this.sceneEl;if(m=v.getObject3D("camera"),!(!m||v===this.activeCameraEl)){var M=C.querySelector("["+g+"]"),T=M&&M.querySelector(":not(a-mixin)[camera]");for(v!==T&&y(C),this.activeCameraEl=v,this.activeCameraEl.play(),C.camera=m,S&&S.setAttribute("camera","active",!1),x=C.querySelectorAll(":not(a-mixin)[camera]"),b=0;b<x.length;b++)_=x[b],!(!_.isEntity||v===_)&&(_.setAttribute("camera","active",!1),_.pause());C.emit("camera-set-active",{cameraEl:v})}},setSpectatorCamera:function(v){var _,x=this.spectatorCameraEl,b=this.sceneEl,m;_=v.getObject3D("camera"),!(!_||v===this.spectatorCameraEl)&&(x&&x.setAttribute("camera","spectator",!1),m=this.spectatorCameraEl=v,b.addEventListener("enter-vr",this.wrapRender),b.addEventListener("exit-vr",this.unwrapRender),m.setAttribute("camera","active",!1),m.play(),b.emit("camera-set-spectator",{cameraEl:v}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(v,_){var x,b=this.sceneEl,m;x=b.renderer.xr.enabled,this.originalRender.call(b.renderer,v,_),!(!this.spectatorCameraEl||b.isMobile||!x)&&(m=this.spectatorCameraEl.components.camera.camera,b.renderer.xr.enabled=!1,this.originalRender.call(b.renderer,v,m),b.renderer.xr.enabled=x)}});function y(v){var _,x=v.camera;x&&(_=v.querySelector("["+g+"]"),_&&v.removeChild(_))}},"./src/systems/geometry.js":(c,d,u)=>{var f=u("./src/core/geometry.js").geometries,A=u("./src/core/system.js").registerSystem;c.exports.System=A("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(_){var x=this.cache,b,m;return _.skipCache?g(_):(m=this.hash(_),b=x[m],v(this.cacheCount,m),b||(b=g(_),x[m]=b,b))},unuseGeometry:function(_){var x=this.cache,b=this.cacheCount,m,S;_.skipCache||(S=this.hash(_),x[S]&&(y(b,S),!(b[S]>0)&&(m=x[S],m.dispose(),delete x[S],delete b[S])))},hash:function(_){return JSON.stringify(_)}});function g(_){var x=_.primitive,b=f[x]&&f[x].Geometry,m=new b;if(!b)throw new Error("Unknown geometry `"+x+"`");return m.init(_),m.geometry}function y(_,x){_[x]--}function v(_,x){_[x]=_[x]===void 0?1:_[x]+1}},"./src/systems/gltf-model.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/lib/three.js");function g(y){return new Promise(function(v,_){var x=document.createElement("script");document.body.appendChild(x),x.onload=v,x.onerror=_,x.async=!0,x.src=y})}c.exports.System=f("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var y=this.data.dracoDecoderPath,v=this.data.basisTranscoderPath,_=this.data.meshoptDecoderPath;!this.dracoLoader&&y&&(this.dracoLoader=new A.DRACOLoader,this.dracoLoader.setDecoderPath(y)),!this.ktx2Loader&&v&&(this.ktx2Loader=new A.KTX2Loader,this.ktx2Loader.setTranscoderPath(v).detectSupport(this.el.renderer)),!this.meshoptDecoder&&_&&(this.meshoptDecoder=g(_).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(c,d,u)=>{u("./src/systems/camera.js"),u("./src/systems/geometry.js"),u("./src/systems/gltf-model.js"),u("./src/systems/light.js"),u("./src/systems/material.js"),u("./src/systems/renderer.js"),u("./src/systems/shadow.js"),u("./src/systems/tracked-controls-webvr.js"),u("./src/systems/tracked-controls-webxr.js"),u("./src/systems/webxr.js")},"./src/systems/light.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/utils/bind.js"),g=u("./src/constants/index.js"),y="data-aframe-default-light";c.exports.System=f("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",A(this.setupDefaultLights,this))},registerLight:function(v){v.hasAttribute(y)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var v,_=this.sceneEl;if(this.defaultLights){v=document.querySelectorAll("["+y+"]");for(var x=0;x<v.length;x++)_.removeChild(v[x]);this.defaultLights=!1}},setupDefaultLights:function(){var v=this.sceneEl,_,x;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(_=document.createElement("a-entity"),_.setAttribute("light",{color:"#BBB",type:"ambient"}),_.setAttribute(y,""),_.setAttribute(g.AFRAME_INJECTED,""),v.appendChild(_),x=document.createElement("a-entity"),x.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),x.setAttribute("position",{x:-.5,y:1,z:1}),x.setAttribute(y,""),x.setAttribute(g.AFRAME_INJECTED,""),v.appendChild(x),this.defaultLights=!0)}})},"./src/systems/material.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/lib/three.js"),g=u("./src/utils/index.js"),y=u("./src/utils/material.js").isHLS,v=u("./src/utils/material.js").setTextureProperties,_=g.bind,x=g.debug,b=x("components:texture:error"),m=new A.TextureLoader,S=x("components:texture:warn");m.setCrossOrigin("anonymous"),c.exports.System=f("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",_(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(P,k,D){var z=this;if(P.tagName==="CANVAS"){this.loadCanvas(P,k,D);return}if(P.tagName==="VIDEO"){!P.src&&!P.srcObject&&!P.childElementCount&&S("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),this.loadVideo(P,k,D);return}g.srcLoader.validateSrc(P,Y,ne);function Y(O){z.loadImage(O,k,D)}function ne(O){z.loadVideo(O,k,D)}},loadImage:function(P,k,D){var z=this.hash(k),Y=this.textureCache;if(Y[z]){Y[z].then(D);return}Y[z]=M(P,k),Y[z].then(D)},loadCanvas:function(P,k,D){var z;z=new A.CanvasTexture(P),v(z,k),D(z)},loadVideo:function(P,k,D){var z,Y,ne=this.textureCache,O,F;function U(G){G.texture.needsUpdate=!0,D(G.texture,G.videoEl)}if(typeof P!="string"){if(O=P,z=this.hashVideo(k,O),ne[z]){ne[z].then(U);return}N(O)}if(O=O||T(P,k.width,k.height),z=this.hashVideo(k,O),ne[z]){ne[z].then(U);return}Y=new A.VideoTexture(O),Y.minFilter=A.LinearFilter,v(Y,k),this.sceneEl.isIOS&&y(O.src||O.getAttribute("src"),O.type||O.getAttribute("type"))&&(Y.format=A.RGBAFormat,Y.needsCorrectionBGRA=!0,Y.flipY=!1,Y.needsCorrectionFlipY=!0),F={texture:Y,videoEl:O},ne[z]=Promise.resolve(F),U(F)},hash:function(P){return P.src.tagName&&(P=g.extendDeep({},P),P.src=P.src.src),JSON.stringify(P)},hashVideo:function(P,k){return C(P,k)},registerMaterial:function(P){this.materials[P.uuid]=P},unregisterMaterial:function(P){delete this.materials[P.uuid];var k=this.textureCounts;Object.keys(P).filter(function(D){return P[D]&&P[D].isTexture}).forEach(function(D){k[P[D].uuid]--,k[P[D].uuid]<=0&&P[D].dispose()})},updateMaterials:function(P){var k=this.materials;Object.keys(k).forEach(function(D){k[D].needsUpdate=!0})},onMaterialTextureLoaded:function(P){this.textureCounts[P.detail.texture.uuid]||(this.textureCounts[P.detail.texture.uuid]=0),this.textureCounts[P.detail.texture.uuid]++}});function C(P,k){var D,z=k.getAttribute("id"),Y,ne;if(z)return z;for(Y="",ne=P||{},D=0;D<k.attributes.length;D++)ne[k.attributes[D].name]=k.attributes[D].value;return Object.keys(ne).sort().forEach(function(O){Y+=O+":"+ne[O]+";"}),Y}function M(P,k){return new Promise(D);function D(z,Y){var ne=typeof P!="string";function O(F){v(F,k),F.needsUpdate=!0,z(F)}if(ne){O(new A.Texture(P));return}m.load(P,O,function(){},function(F){b("`$s` could not be fetched (Error code: %s; Response: %s)",F.status,F.statusText)})}}function T(P,k,D){var z=document.createElement("video");return z.width=k,z.height=D,z.setAttribute("playsinline",""),z.setAttribute("webkit-playsinline",""),z.autoplay=!0,z.loop=!0,z.crossOrigin="anonymous",z.addEventListener("error",function(){S("`$s` is not a valid video",P)},!0),z.src=P,z}function N(P){return P.autoplay=P.hasAttribute("autoplay")&&P.getAttribute("autoplay")!=="false",P.controls=P.hasAttribute("controls")&&P.getAttribute("controls")!=="false",P.getAttribute("loop")==="false"&&P.removeAttribute("loop"),P.getAttribute("preload")==="false"&&(P.preload="none"),P.crossOrigin=P.crossOrigin||"anonymous",P.setAttribute("playsinline",""),P.setAttribute("webkit-playsinline",""),P}},"./src/systems/renderer.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/utils/index.js"),g=u("./src/lib/three.js"),y=A.debug,v=y("components:renderer:warn");c.exports.System=f("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:A.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:1}},init:function(){var _=this.data,x=this.el,b=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),m=x.renderer;m.sortObjects=_.sortObjects,m.physicallyCorrectLights=_.physicallyCorrectLights,m.toneMapping=g[b+"ToneMapping"],(_.colorManagement||_.gammaOutput)&&(m.outputEncoding=g.sRGBEncoding,_.gammaOutput&&v('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),x.hasAttribute("antialias")&&v('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),x.hasAttribute("logarithmicDepthBuffer")&&v('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},update:function(){var _=this.data,x=this.el,b=x.renderer,m=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);b.toneMapping=g[m+"ToneMapping"],b.toneMappingExposure=_.exposure,b.xr.setFoveation(_.foveationLevel)},applyColorCorrection:function(_){!this.data.colorManagement||!_||(_.isColor?_.convertSRGBToLinear():_.isTexture&&(_.encoding=g.sRGBEncoding))},setWebXRFrameRate:function(_){var x=this.data,b=_.supportedFrameRates;if(b&&_.updateTargetFrameRate){let m;b.includes(90)?m=x.highRefreshRate?90:72:m=x.highRefreshRate?72:60,_.updateTargetFrameRate(m).catch(function(S){console.warn("failed to set target frame rate of "+m+". Error info: "+S)})}}})},"./src/systems/shadow.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/lib/three.js"),g={basic:A.BasicShadowMap,pcf:A.PCFShadowMap,pcfsoft:A.PCFSoftShadowMap};c.exports.System=f("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var y=this.sceneEl,v=this.data;this.shadowMapEnabled=!1,y.renderer&&(y.renderer.shadowMap.type=g[v.type],y.renderer.shadowMap.autoUpdate=v.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(y){y.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(y){var v=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&y,v&&(v.shadowMap.enabled=this.shadowMapEnabled)}})},"./src/systems/tracked-controls-webvr.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/utils/index.js"),g=A.device.isWebXRAvailable;c.exports.System=f("tracked-controls-webvr",{init:function(){var y=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=A.throttle(this.updateControllerList,500,this),!g&&navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(v){v.length&&(y.vrDisplay=v[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var y=this.controllers,v,_,x,b;if(_=navigator.getGamepads&&navigator.getGamepads(),!!_){for(b=y.length,y.length=0,x=0;x<_.length;++x)v=_[x],v&&v.pose&&y.push(v);y.length!==b&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/utils/index.js");c.exports.System=f("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=A.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var g=this,y=this.el.xrSession;if(!y){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var v=g.el.sceneEl.systems.webxr.sessionReferenceSpaceType;y.requestReferenceSpace(v).then(function(_){g.referenceSpace=_}).catch(function(_){throw g.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(v,'tracked-controls-webxr uses reference space "'+v+'".'),_})},updateControllerList:function(){var g=this.el.xrSession,y=this.oldControllers,v;if(!g){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(g.inputSources){if(this.controllers=g.inputSources,this.oldControllersLength===this.controllers.length){var _=!0;for(v=0;v<this.controllers.length;++v)if(!(this.controllers[v]===y[v]&&this.controllers[v].gamepad===y[v].gamepad)){_=!1;break}if(_)return}for(y.length=0,v=0;v<this.controllers.length;v++)y.push(this.controllers[v]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(c,d,u)=>{var f=u("./src/core/system.js").registerSystem,A=u("./src/utils/index.js"),g=A.debug("systems:webxr:warn");c.exports.System=f("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var y=this.data;this.sessionConfiguration={requiredFeatures:y.requiredFeatures,optionalFeatures:y.optionalFeatures},this.sessionReferenceSpaceType=y.referenceSpaceType,y.overlayElement&&(y.overlayElement.classList.remove("a-dom-overlay"),y.optionalFeatures.includes("dom-overlay")||(y.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",y)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:y.overlayElement},y.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(y){return!!(y==="viewer"||y==="local"||this.sessionConfiguration.requiredFeatures.includes(y)||this.sessionConfiguration.optionalFeatures.includes(y))},warnIfFeatureNotRequested:function(y,v){if(!this.wasFeatureRequested(y)){var _='Please add the feature "'+y+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;g((v?v+" ":"")+_)}}})},"./src/utils/bind.js":c=>{c.exports=function(u,f){return function(A){return function(){var y=A.concat(Array.prototype.slice.call(arguments,0));return u.apply(f,y)}}(Array.prototype.slice.call(arguments,2))}},"./src/utils/coordinates.js":(c,d,u)=>{var f=u("./src/utils/debug.js"),A=u("./node_modules/object-assign/index.js"),g=f("utils:coordinates:warn"),y=["x","y","z","w"],v=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;c.exports.regex=v;var _="object",x=/\s+/g;function b(M,T){var N,P,k,D,z,Y,ne,O,F;if(M&&M instanceof Object)return Y=M.x===void 0?T&&T.x:M.x,ne=M.y===void 0?T&&T.y:M.y,O=M.z===void 0?T&&T.z:M.z,F=M.w===void 0?T&&T.w:M.w,Y!=null&&(M.x=C(Y)),ne!=null&&(M.y=C(ne)),O!=null&&(M.z=C(O)),F!=null&&(M.w=C(F)),M;if(M==null)return typeof T===_?A({},T):T;for(N=M.trim().split(x),z={},D=0;D<y.length;D++)if(k=y[D],N[D])z[k]=parseFloat(N[D],10);else{if(P=T&&T[k],P===void 0)continue;z[k]=C(P)}return z}c.exports.parse=b;function m(M){var T;return typeof M!==_?M:(T=M.x+" "+M.y,M.z!=null&&(T+=" "+M.z),M.w!=null&&(T+=" "+M.w),T)}c.exports.stringify=m;function S(M){return v.test(M)}c.exports.isCoordinates=S,c.exports.isCoordinate=function(M){return g("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),S(M)};function C(M){return M!=null&&M.constructor===String?parseFloat(M,10):M}c.exports.toVector3=function(M){return new THREE.Vector3(M.x,M.y,M.z)}},"./src/utils/debug.js":(c,d,u)=>{var f=u("./node_modules/process/browser.js"),A=u("./node_modules/debug/browser.js"),g=u("./node_modules/object-assign/index.js"),y={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},v=function(S){var C=A(S);return C.color=x(S),C};g(v,A);function _(S){var C=S.split(":");return C[C.length-1]}function x(S){var C=_(S),M=y.colors&&y.colors[C];return M||null}function b(){try{return window.localStorage}catch{}}var m=b();m&&(parseInt(m.logs,10)||m.logs==="true")?v.enable("*"):v.enable("*:error,*:info,*:warn"),f.browser&&(window.logs=v),c.exports=v},"./src/utils/device.js":(c,d,u)=>{var f=u("./node_modules/process/browser.js"),A=u("./node_modules/debug/browser.js")("device:error"),g,y=!1,v=!1,_=c.exports.isWebXRAvailable=!window.debug&&navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(O){var F;_||(F=document.createElement("canvas"),g=O.display,F.getContext("webgl",{}),g.requestPresent([{source:F}]).then(function(){},function(){}))}),_){var x=function(){var O=document.querySelector("a-scene");if(!O){window.addEventListener("DOMContentLoaded",x);return}O.hasLoaded?O.components["vr-mode-ui"].updateEnterInterfaces():O.addEventListener("loaded",x)},b=function(O){A("WebXR session support error: "+O.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(O){y=O,x()}).catch(b),navigator.xr.isSessionSupported("immersive-ar").then(function(O){v=O,x()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){y=!0,x()}).catch(b),navigator.xr.supportsSession("immersive-ar").then(function(){v=!0,x()}).catch(function(){})):A("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(O){var F=document.querySelector("a-scene");g=O.length&&O[0],F&&F.emit("displayconnected",{vrDisplay:g})});function m(){return g}c.exports.getVRDisplay=m;function S(){return y||v||!!m()}c.exports.checkHeadsetConnected=S;function C(){return v}c.exports.checkARSupport=C;function M(){return y}c.exports.checkVRSupport=M;var T=function(){var O=!1;return function(F){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(F)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(F.substr(0,4)))&&(O=!0),(P()||N()||ne())&&(O=!0),Y()&&(O=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return O}}();c.exports.isMobile=T;function N(O){var F=O||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(F)}c.exports.isTablet=N;function P(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}c.exports.isIOS=P;function k(){return!T()&&!Y()&&window.orientation!==void 0}c.exports.isMobileDeviceRequestingDesktopSite=k;function D(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}c.exports.isOculusBrowser=D;function z(){return/(Mobile VR)/i.test(window.navigator.userAgent)}c.exports.isFirefoxReality=z;function Y(){return D()||z()}c.exports.isMobileVR=Y;function ne(){return/R7 Build/.test(window.navigator.userAgent)}c.exports.isR7=ne,c.exports.isLandscape=function(){var O=window.orientation;return ne()&&(O+=90),O===90||O===-90},c.exports.isBrowserEnvironment=!!(!f||f.browser),c.exports.isNodeEnvironment=!c.exports.isBrowserEnvironment},"./src/utils/entity.js":c=>{var d={};function u(f,A){return A=A||".",d[A]||(d[A]={}),f.indexOf(A)!==-1?d[A][f]=f.split(A):d[A][f]=f,d[A][f]}c.exports.getComponentPropertyPath=u,c.exports.propertyPathCache=d,c.exports.getComponentProperty=function(f,A,g){var y;return g=g||".",A.indexOf(g)!==-1?(y=u(A,g),y.constructor===String?f.getAttribute(y):f.getAttribute(y[0])[y[1]]):f.getAttribute(A)},c.exports.setComponentProperty=function(f,A,g,y){var v;if(y=y||".",A.indexOf(y)!==-1){v=u(A,y),v.constructor===String?f.setAttribute(v,g):f.setAttribute(v[0],v[1],g);return}f.setAttribute(A,g)}},"./src/utils/forceCanvasResizeSafariMobile.js":c=>{c.exports=function(u){var f=u.style.width,A=u.style.height;u.style.width=parseInt(f,10)+1+"px",u.style.height=parseInt(A,10)+1+"px",setTimeout(function(){u.style.width=f,u.style.height=A},200)}},"./src/utils/index.js":(c,d,u)=>{var f=u("./src/utils/debug.js"),A=u("./node_modules/deep-assign/index.js"),g=u("./src/utils/device.js"),y=u("./node_modules/object-assign/index.js"),v=u("./src/utils/object-pool.js"),_=f("utils:warn");c.exports.bind=u("./src/utils/bind.js"),c.exports.coordinates=u("./src/utils/coordinates.js"),c.exports.debug=f,c.exports.device=g,c.exports.entity=u("./src/utils/entity.js"),c.exports.forceCanvasResizeSafariMobile=u("./src/utils/forceCanvasResizeSafariMobile.js"),c.exports.isIE11=u("./src/utils/is-ie11.js"),c.exports.material=u("./src/utils/material.js"),c.exports.objectPool=v,c.exports.split=u("./src/utils/split.js").split,c.exports.styleParser=u("./src/utils/styleParser.js"),c.exports.trackedControls=u("./src/utils/tracked-controls.js"),c.exports.checkHeadsetConnected=function(){return _("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),g.checkHeadsetConnected(arguments)},c.exports.isGearVR=c.exports.device.isGearVR=function(){_("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},c.exports.isIOS=function(){return _("`utils.isIOS` has moved to `utils.device.isIOS`"),g.isIOS(arguments)},c.exports.isOculusGo=c.exports.device.isOculusGo=function(){_("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},c.exports.isMobile=function(){return _("`utils.isMobile has moved to `utils.device.isMobile`"),g.isMobile(arguments)},c.exports.throttle=function(b,m,S){var C;return S&&(b=c.exports.bind(b,S)),function(){var M=Date.now(),T=typeof C>"u"?m:M-C;(typeof C>"u"||T>=m)&&(C=M,b.apply(null,arguments))}},c.exports.throttleLeadingAndTrailing=function(b,m,S){var C,M;return S&&(b=c.exports.bind(b,S)),function(){var T=Date.now(),N=typeof C>"u"?m:T-C,P=arguments;typeof C>"u"||N>=m?(clearTimeout(M),C=T,b.apply(null,P)):(clearTimeout(M),M=setTimeout(function(){C=Date.now(),b.apply(this,P)},m-N))}},c.exports.throttleTick=function(b,m,S){var C;return S&&(b=c.exports.bind(b,S)),function(M,T){var N=typeof C>"u"?T:M-C;(typeof C>"u"||N>=m)&&(C=M,b(M,N))}},c.exports.debounce=function(b,m,S){var C;return function(){var M=this,T=arguments,N=function(){C=null,S||b.apply(M,T)},P=S&&!C;clearTimeout(C),C=setTimeout(N,m),P&&b.apply(M,T)}},c.exports.extend=y,c.exports.extendDeep=A,c.exports.clone=function(b){return JSON.parse(JSON.stringify(b))};var x=function(){var b=v.createPool(function(){return[]});return function(m,S){var C,M,T,N,P,k;if(m===void 0||S===void 0||m===null||S===null||!(m&&S&&m.constructor===Object&&S.constructor===Object||m.constructor===Array&&S.constructor===Array))return m===S;M=b.use(),T=b.use(),M.length=0,T.length=0;for(C in m)M.push(C);for(C in S)T.push(C);if(M.length!==T.length)return b.recycle(M),b.recycle(T),!1;for(N=0;N<M.length;++N)if(P=m[M[N]],k=S[M[N]],typeof P=="object"||typeof k=="object"||Array.isArray(P)&&Array.isArray(k)){if(P===k)continue;if(!x(P,k))return b.recycle(M),b.recycle(T),!1}else if(P!==k)return b.recycle(M),b.recycle(T),!1;return b.recycle(M),b.recycle(T),!0}}();c.exports.deepEqual=x,c.exports.diff=function(){var b=[];return function(m,S,C){var M,T,N,P,k,D,z;P=C||{},b.length=0;for(k in m)b.push(k);if(!S)return P;for(N in S)b.indexOf(N)===-1&&b.push(N);for(D=0;D<b.length;D++)k=b[D],M=m[k],T=S[k],z=M&&T&&M.constructor===Object&&T.constructor===Object,(z&&!x(M,T)||!z&&M!==T)&&(P[k]=T);return P}}(),c.exports.shouldCaptureKeyEvent=function(b){return b.metaKey?!1:document.activeElement===document.body},c.exports.splitString=function(b,m){typeof m>"u"&&(m=" ");var S=new RegExp(m,"g");return b=(b||"").replace(S,m),b.split(m)},c.exports.getElData=function(b,m){m=m||{};var S={};Object.keys(m).forEach(C);function C(M){b.hasAttribute(M)&&(S[M]=b.getAttribute(M))}return S},c.exports.getUrlParameter=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var m=new RegExp("[\\?&]"+b+"=([^&#]*)"),S=m.exec(location.search);return S===null?"":decodeURIComponent(S[1].replace(/\+/g," "))},c.exports.isIframed=function(){return window.top!==window.self},c.exports.findAllScenes=function(b){for(var m=[],S=b.getElementsByTagName("*"),C=0,M=S.length;C<M;C++)S[C].isScene&&m.push(S[C]);return m},c.exports.srcLoader=u("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/is-ie11.js":c=>{function d(){var u=-1,f=navigator.userAgent,A;return navigator.appName==="Microsoft Internet Explorer"?(A=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),A.exec(f)!=null&&(u=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(A=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),A.exec(f)!=null&&(u=parseFloat(RegExp.$1))),u}c.exports=d()===11},"./src/utils/isIOSOlderThan10.js":c=>{c.exports=function(u){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(u)}},"./src/utils/material.js":(c,d,u)=>{var f=u("./src/lib/three.js"),A=["application/x-mpegurl","application/vnd.apple.mpegurl"],g=new Set(["emissiveMap","envMap","map","specularMap"]);function y(_,x){var b=x.offset||{x:0,y:0},m=x.repeat||{x:1,y:1},S=x.npot||!1;S&&(_.wrapS=f.ClampToEdgeWrapping,_.wrapT=f.ClampToEdgeWrapping,_.magFilter=f.LinearFilter,_.minFilter=f.LinearFilter),(m.x!==1||m.y!==1)&&(_.wrapS=f.RepeatWrapping,_.wrapT=f.RepeatWrapping,_.repeat.set(m.x,m.y)),(b.x!==0||b.y!==0)&&_.offset.set(b.x,b.y)}c.exports.setTextureProperties=y,c.exports.updateMapMaterialFromData=function(_,x,b,m){var S=b.el,C=b.material,M=S.sceneEl.systems.renderer,T=m[x];if(b.materialSrcs||(b.materialSrcs={}),!T){delete b.materialSrcs[_],P(null);return}if(T===b.materialSrcs[_]&&C[_]){y(C[_],m);return}b.materialSrcs[_]=T,T instanceof f.Texture?P(T):S.sceneEl.systems.material.loadTexture(T,{src:T,repeat:m.repeat,offset:m.offset,npot:m.npot},N);function N(k){b.materialSrcs[_]===T&&P(k)}function P(k){C[_]=k,k&&g.has(_)&&M.applyColorCorrection(k),C.needsUpdate=!0,v(S,k)}},c.exports.updateMap=function(_,x){return c.exports.updateMapMaterialFromData("map","src",_,x)},c.exports.updateDistortionMap=function(_,x,b){var m=_;_==="ambientOcclusion"&&(m="ao");var S=x.el,C=x.material,M=S.sceneEl.systems.renderer,T=b[_+"Map"],N={};if(N.src=T,N.offset=b[_+"TextureOffset"],N.repeat=b[_+"TextureRepeat"],N.wrap=b[_+"TextureWrap"],T){if(T===x[_+"TextureSrc"])return;x[_+"TextureSrc"]=T,S.sceneEl.systems.material.loadTexture(T,N,P);return}if(!C.map)return;P(null);function P(k){var D=m+"Map";C[D]=k,k&&g.has(D)&&M.applyColorCorrection(k),k&&y(k,b),C.needsUpdate=!0,v(S,k)}};function v(_,x){x&&(_.emit("materialtextureloaded",{src:x.image,texture:x}),!(!x.image||x.image.tagName!=="VIDEO")&&(x.image.addEventListener("loadeddata",function(){!_.components||!_.components.material||(x.needsCorrectionBGRA&&x.needsCorrectionFlipY&&["standard","flat"].indexOf(_.components.material.data.shader)!==-1&&_.setAttribute("material","shader","ios10hls"),_.emit("materialvideoloadeddata",{src:x.image,texture:x}))}),x.image.addEventListener("ended",function(){_.emit("materialvideoended",{src:x.image,texture:x})})))}c.exports.handleTextureEvents=v,c.exports.isHLS=function(_,x){return!!(x&&A.includes(x.toLowerCase())||_&&_.toLowerCase().indexOf(".m3u8")>0)}},"./src/utils/math.js":c=>{function d(f,A,g){var y=A.dot(f);return(y-A.dot(g))/A.length()}function u(f,A,g,y){var v=d(f,A,g);return y.copy(A),y.multiplyScalar(v),y.add(g),y}c.exports.distanceOfPointFromPlane=d,c.exports.nearestPointInPlane=u},"./src/utils/object-pool.js":c=>{var d=Object.freeze(Object.create(null));function u(){return{}}c.exports.createPool=function(y){var v=[],_=null;y=y||u;function x(){var C;return(_===null||_===v.length)&&m(v.length||5),C=v[_],v[_++]=d,f(C),C}function b(C){if(C instanceof Object){if(_===null||_===-1){v[v.length]=C;return}v[--_]=C}}function m(C){var M,T;if(C=C===void 0?v.length:C,C>0&&_==null&&(_=0),C>0)for(M=v.length,v.length+=Number(C),T=M;T<v.length;T++)v[T]=y();return v.length}function S(){return v.length}return{grow:m,pool:v,recycle:b,size:S,use:x}};function f(g){var y;if(!(!g||g.constructor!==Object))for(y in g)g[y]=void 0}c.exports.clearObject=f;function A(g,y){var v;if(!(!g||g.constructor!==Object))for(v in g)v in y||delete g[v]}c.exports.removeUnusedKeys=A},"./src/utils/split.js":c=>{c.exports.split=function(){var d={};return function(u,f){return f in d||(d[f]={}),u in d[f]||(d[f][u]=u.split(f)),d[f][u]}}()},"./src/utils/src-loader.js":(c,d,u)=>{var f=u("./src/utils/debug.js"),A=f("utils:src-loader:warn");function g(m,S,C){_(m,function(T){if(T){S(m);return}C(m)})}function y(m,S){var C,M="",T,N,P=[];for(T=0;T<5;T++)M+="(url\\((?:[^\\)]+)\\),\\s*)";M+="(url\\((?:[^\\)]+)\\)\\s*)",N=m.match(new RegExp(M));function k(D){P.push(D),P.length===6&&S(P)}if(N){for(T=1;T<7;T++)g(v(N[T]),k);return}if(C=b(m),!!C){if(C.tagName==="A-CUBEMAP"&&C.srcs)return S(C.srcs);A('Selector "%s" does not point to <a-cubemap>',m)}}function v(m){var S=m.match(/\url\((.+)\)/);if(S)return S[1]}function _(m,S){var C;if(m.tagName){S(m.tagName==="IMG");return}C=new XMLHttpRequest,C.open("HEAD",m),C.addEventListener("load",function(M){var T;C.status>=200&&C.status<300?(T=C.getResponseHeader("Content-Type"),T==null?x(m,S):T.startsWith("image")?S(!0):S(!1)):x(m,S),C.abort()}),C.send()}function x(m,S){var C=new Image;C.addEventListener("load",M);function M(){S(!0)}C.addEventListener("error",T);function T(){S(!1)}C.src=m}function b(m){try{var S=document.querySelector(m);return S||A('No element was found matching the selector: "%s"',m),S}catch{A('"%s" is not a valid selector',m);return}}c.exports={parseUrl:v,validateSrc:g,validateCubemapSrc:y}},"./src/utils/styleParser.js":c=>{var d=/-([a-z])/g;c.exports.parse=function(_,x){var b;return typeof _!="string"||(b=g(_,x),b[""])?_:f(b)},c.exports.stringify=function(_){return typeof _=="string"?_:y(_)};function u(_){return _.replace(d,v)}c.exports.toCamelCase=u;function f(_){var x,b;for(b in _)x=u(b),b!==x&&(_[x]=_[b],delete _[b]);return _}c.exports.transformKeysToCamelCase=f;var A=function(){var _=[],x=/url\([^)]+$/;return function(m){var S="",C,M=0,T=";";for(_.length=0;M<m.length;){if(C=m.indexOf(T,M),C===-1&&(C=m.length),S+=m.substring(M,C),x.test(S)){S+=";",M=C+1;continue}_.push(S.trim()),S="",M=C+1}return _}}();function g(_,x){var b,m,S,C,M,T;for(x=x||{},b=A(_),m=0;m<b.length;m++)S=b[m],S&&(C=S.indexOf(":"),M=S.substr(0,C).trim(),T=S.substr(C+1).trim(),x[M]=T);return x}function y(_){var x,b=0,m=0,S="";for(x in _)b++;for(x in _)S+=x+": "+_[x],m<b-1&&(S+="; "),m++;return S}function v(_){return _[1].toUpperCase()}},"./src/utils/tracked-controls.js":(c,d,u)=>{var f=u("./src/constants/index.js").DEFAULT_HANDEDNESS,A=["x","y","z","w"],g=2;c.exports.checkControllerPresentAndSetup=function(b,m,S){var C=b.el,M,T=C.sceneEl.hasWebXR,N=T?v:y,P;if(M=N(b,m,S),P=!!M,b.controllerPresent&&!b.controllerEventsActive&&!T&&b.addEventListeners(),P===b.controllerPresent)return P;b.controllerPresent=P,P?(b.addEventListeners(),b.injectTrackedControls(M),C.emit("controllerconnected",{name:b.name,component:b})):(b.removeEventListeners(),C.emit("controllerdisconnected",{name:b.name,component:b}))};function y(b,m,S){var C,M=b.el.sceneEl,T,N=S.index||0;return!m||(T=M&&M.systems["tracked-controls-webvr"],!T)||(C=T.controllers,!C.length)?!1:!!_(C,null,m,S.hand,N)}function v(b,m,S){var C,M=b.el.sceneEl,T=M&&M.systems["tracked-controls-webxr"];return!T||(C=T.controllers,!C||!C.length)?!1:x(C,m,S.hand,S.index,S.iterateControllerProfiles,S.handTracking)}c.exports.isControllerPresentWebVR=y,c.exports.isControllerPresentWebXR=v;function _(b,m,S,C,M){var T,N,P=0,k=M>=0?M:0;for(N=0;N<b.length;N++)if(T=b[N],!(S&&!T.id.startsWith(S))&&!(!S&&T.id!==m)&&!(C&&T.hand&&C!==T.hand)){if(C&&!T.hand)k=g*M+(C===f?0:1);else return T;if(P===k)return T;++P}}function x(b,m,S,C,M,T){var N,P,k,D=!1,z,Y;for(N=0;N<b.length;N++){if(k=b[N],Y=k.profiles,T)D=k.hand;else if(M)for(P=0;P<Y.length&&(D=Y[P].startsWith(m),!D);P++);else D=Y.length>0&&Y[0].startsWith(m);if(D){if(z=k.handedness==="right"||k.handedness==="left",z){if(k.handedness===S)return b[N]}else if(N===C)return b[N]}}}c.exports.findMatchingControllerWebVR=_,c.exports.findMatchingControllerWebXR=x,c.exports.emitIfAxesChanged=function(b,m,S){var C,M,T,N,P;for(M in m){for(C=m[M],T=!1,P=0;P<C.length;P++)S.detail.changed[C[P]]&&(T=!0);if(T){for(N={},P=0;P<C.length;P++)N[A[P]]=S.detail.axis[C[P]];b.el.emit(M+"moved",N)}}},c.exports.onButtonEvent=function(b,m,S,C){var M=C?S.mapping[C]:S.mapping,T=M.buttons[b];S.el.emit(T+m),S.updateModel&&S.updateModel(T,m)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(c){var d=this;this.object=c,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var u=function(g){d.deviceOrientation=g},f=function(){d.screenOrientation=window.orientation||0},A=function(){var g=new THREE.Vector3(0,0,1),y=new THREE.Euler,v=new THREE.Quaternion,_=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(x,b,m,S,C){y.set(m,b,-S,"YXZ"),x.setFromEuler(y),x.multiply(_),x.multiply(v.setFromAxisAngle(g,-C))}}();this.connect=function(){f(),window.addEventListener("orientationchange",f,!1),window.addEventListener("deviceorientation",u,!1),d.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",f,!1),window.removeEventListener("deviceorientation",u,!1),d.enabled=!1},this.update=function(){if(d.enabled!==!1){var g=d.deviceOrientation;if(g){var y=g.alpha?THREE.MathUtils.degToRad(g.alpha)+d.alphaOffset:0,v=g.beta?THREE.MathUtils.degToRad(g.beta):0,_=g.gamma?THREE.MathUtils.degToRad(g.gamma):0,x=d.screenOrientation?THREE.MathUtils.degToRad(d.screenOrientation):0;A(d.object.quaternion,y,v,_,x)}}},this.dispose=function(){d.disconnect()},this.connect()}},"./vendor/rStats.extras.js":c=>{window.glStats=function(){var d=null,u=0,f=0,A=0,g=0,y=0,v=0,_=0;function x(P,k){return function(){k.apply(this,arguments),P.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=x(WebGLRenderingContext.prototype.drawArrays,function(){u++,arguments[0]==this.POINTS?v+=arguments[2]:y+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=x(WebGLRenderingContext.prototype.drawElements,function(){f++,g+=arguments[1]/3,y+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=x(WebGLRenderingContext.prototype.useProgram,function(){A++}),WebGLRenderingContext.prototype.bindTexture=x(WebGLRenderingContext.prototype.bindTexture,function(){_++});var b={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},m=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],S=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function C(){d("allcalls").set(u+f),d("drawElements").set(f),d("drawArrays").set(u),d("bindTexture").set(_),d("useProgram").set(A),d("glfaces").set(g),d("glvertices").set(y),d("glpoints").set(v)}function M(){u=0,f=0,A=0,g=0,y=0,v=0,_=0}function T(){}function N(P){d=P}return{update:C,start:M,end:T,attach:N,values:b,groups:m,fractions:S}},window.threeStats=function(d){var u=null,f={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},A=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],g=[];function y(){u("renderer.info.memory.geometries").set(d.info.memory.geometries),u("renderer.info.programs").set(d.info.programs.length),u("renderer.info.memory.textures").set(d.info.memory.textures),u("renderer.info.render.calls").set(d.info.render.calls),u("renderer.info.render.triangles").set(d.info.render.triangles),u("renderer.info.render.points").set(d.info.render.points)}function v(){}function _(){}function x(b){u=b}return{update:y,start:v,end:_,attach:x,values:f,groups:A,fractions:g}},window.BrowserStats=function(){var d=null,u=0,f=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var A={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},g=[{caption:"Browser",values:["memory","total"]}],y=[{base:"total",steps:["memory"]}],v=Math.log(1024);function _(C){var M=100,T=Math.floor(Math.log(C)/v);return Math.round(C*M/Math.pow(1024,T))/M}function x(){u=_(performance.memory.usedJSHeapSize),f=_(performance.memory.totalJSHeapSize),d("memory").set(u),d("total").set(f)}function b(){u=0}function m(){}function S(C){d=C}return{update:x,start:b,end:m,attach:S,values:A,groups:g,fractions:y}},c.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":c=>{(function(){"performance"in window||(window.performance={});var d=window.performance;if(!("now"in d)){var u=Date.now();d.timing&&d.timing.navigationStart&&(u=d.timing.navigationStart),d.now=function(){return Date.now()-u}}d.mark||(d.mark=function(){}),d.measure||(d.measure=function(){})})(),window.rStats=function(u){function f(Y,ne){for(var O=Object.keys(Y),F=0,U=O.length;F<U;F++)ne(O[F])}function A(Y){var ne=document.createElement("link");ne.href=Y,ne.rel="stylesheet",ne.type="text/css",document.getElementsByTagName("head")[0].appendChild(ne)}var g=u||{},y=g.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],v="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",_=(g.CSSPath?g.CSSPath:"")+"rStats.css",x=g.css||[v,_];x.forEach(function(Y){A(Y)}),g.values||(g.values={});var b,m,S=10,C=200,M={};function T(Y,ne,O){var F=O||{},U=document.createElement("canvas"),G=U.getContext("2d"),V=0,K=0,W=F.color?F.color:"#666666",J=document.createElement("canvas"),ee=J.getContext("2d");J.width=1,J.height=2*S,ee.fillStyle="#444444",ee.fillRect(0,0,1,2*S),ee.fillStyle=W,ee.fillRect(0,S,1,S),ee.fillStyle="#ffffff",ee.globalAlpha=.5,ee.fillRect(0,S,1,1),ee.globalAlpha=1;var he=document.createElement("canvas"),me=he.getContext("2d");he.width=1,he.height=2*S,me.fillStyle="#444444",me.fillRect(0,0,1,2*S),me.fillStyle="#b70000",me.fillRect(0,S,1,S),me.globalAlpha=.5,me.fillStyle="#ffffff",me.fillRect(0,S,1,1),me.globalAlpha=1;function Be(){U.width=C,U.height=S,U.style.width=U.width+"px",U.style.height=U.height+"px",U.className="rs-canvas",Y.appendChild(U),G.fillStyle="#444444",G.fillRect(0,0,U.width,U.height)}function Se(rt,Ge){K+=(rt-K)*.1,V*=.99,K>V&&(V=K),G.drawImage(U,1,0,U.width-1,U.height,0,0,U.width-1,U.height),Ge?G.drawImage(he,U.width-1,U.height-K*U.height/V-S):G.drawImage(J,U.width-1,U.height-K*U.height/V-S)}return Be(),{draw:Se}}function N(Y,ne){var O=document.createElement("canvas"),F=O.getContext("2d");function U(){O.width=C,O.height=S*ne,O.style.width=O.width+"px",O.style.height=O.height+"px",O.className="rs-canvas",Y.appendChild(O),F.fillStyle="#444444",F.fillRect(0,0,O.width,O.height)}function G(V){F.drawImage(O,1,0,O.width-1,O.height,0,0,O.width-1,O.height);var K=0;f(V,function(W){var J=V[W]*O.height;F.fillStyle=y[W],F.fillRect(O.width-1,K,1,J),K+=J})}return U(),{draw:G}}function P(Y,ne){var O=Y,F,U=0,G=0,V=0,K=0,W=performance.now(),J=0,ee=document.createElement("div"),he=document.createElement("span"),me=document.createElement("div"),Be=document.createTextNode(""),Se=g?g.values[O.toLowerCase()]:null,rt=new T(ee,O,Se),Ge=!1;he.className="rs-counter-id",he.textContent=Se&&Se.caption?Se.caption:O,me.className="rs-counter-value",me.appendChild(Be),ee.appendChild(he),ee.appendChild(me),ne?ne.div.appendChild(ee):m.appendChild(ee),F=performance.now();function st(on){if(Se&&Se.average){K+=on,J++;var nn=performance.now();nn-W>=(Se.avgMs||1e3)&&(V=K/J,K=0,W=nn,J=0)}}function mt(){F=performance.now(),g.userTimingAPI&&performance.mark(O+"-start"),Ge=!0}function Ft(){U=performance.now()-F,g.userTimingAPI&&(performance.mark(O+"-end"),Ge&&performance.measure(O,O+"-start",O+"-end")),st(U)}function Pt(){Ft(),mt()}function nt(){var on=Se&&Se.average?V:U;Be.nodeValue=Math.round(on*100)/100;var nn=Se&&(Se.below&&U<Se.below||Se.over&&U>Se.over);rt.draw(U,nn),ee.className=nn?"rs-counter-base alarm":"rs-counter-base"}function Fn(){var on=performance.now(),nn=on-F;G++,nn>1e3&&(Se&&Se.interpolate===!1?U=G:U=G*1e3/nn,G=0,F=on,st(U))}function Xt(on){U=on,st(U)}return{set:Xt,start:mt,tick:Pt,end:Ft,frame:Fn,value:function(){return U},draw:nt}}function k(Y){var ne=Y.toLowerCase();if(ne===void 0&&(ne="default"),M[ne])return M[ne];var O=null;g&&g.groups&&f(g.groups,function(U){var G=g.groups[parseInt(U,10)];!O&&G.values.indexOf(ne.toLowerCase())!==-1&&(O=G)});var F=new P(ne,O);return M[ne]=F,F}function D(){if(g.plugins){g.values||(g.values={}),g.groups||(g.groups=[]),g.fractions||(g.fractions=[]);for(var Y=0;Y<g.plugins.length;Y++)g.plugins[Y].attach(k),f(g.plugins[Y].values,function(ne){g.values[ne]=g.plugins[Y].values[ne]}),g.groups=g.groups.concat(g.plugins[Y].groups),g.fractions=g.fractions.concat(g.plugins[Y].fractions)}else g.plugins={};b=document.createElement("div"),b.className="rs-base",m=document.createElement("div"),m.className="rs-container",m.style.height="auto",b.appendChild(m),document.body.appendChild(b),g&&(g.groups&&f(g.groups,function(ne){var O=g.groups[parseInt(ne,10)],F=document.createElement("div");F.className="rs-group",O.div=F;var U=document.createElement("h1");U.textContent=O.caption,U.addEventListener("click",(function(G){this.classList.toggle("hidden"),G.preventDefault()}).bind(F)),m.appendChild(U),m.appendChild(F)}),g.fractions&&f(g.fractions,function(ne){var O=g.fractions[parseInt(ne,10)],F=document.createElement("div");F.className="rs-fraction";var U=document.createElement("div");U.className="rs-legend";var G=0;f(g.fractions[ne].steps,function(K){var W=document.createElement("p");W.textContent=g.fractions[ne].steps[K],W.style.color=y[G],U.appendChild(W),G++}),F.appendChild(U),F.style.height=G*S+"px",O.div=F;var V=new N(F,G);O.graph=V,m.appendChild(F)}))}function z(){f(g.plugins,function(Y){g.plugins[Y].update()}),f(M,function(Y){M[Y].draw()}),g&&g.fractions&&f(g.fractions,function(Y){var ne=g.fractions[parseInt(Y,10)],O=[],F=M[ne.base.toLowerCase()];F&&(F=F.value(),f(g.fractions[Y].steps,function(U){var G=g.fractions[Y].steps[parseInt(U,10)].toLowerCase(),V=M[G];V&&O.push(V.value()/F)})),ne.graph.draw(O)})}return D(),function(Y){return Y?k(Y):{element:b,update:z}}},c.exports=window.rStats},"./vendor/starts-with-polyfill.js":()=>{String.prototype.startsWith||(String.prototype.startsWith=function(c,d){return d=d||0,this.substr(d,c.length)===c})},"./vendor/wakelock/util.js":c=>{var d={};d.base64=function(u,f){return"data:"+u+";base64,"+f},d.isMobile=function(){var u=!1;return function(f){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(f)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(f.substr(0,4)))&&(u=!0)}(navigator.userAgent||navigator.vendor||window.opera),u},d.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},d.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},d.appendQueryParameter=function(u,f,A){var g=u.indexOf("?")<0?"?":"&";return u+=g+f+"="+A,u},d.getQueryParameter=function(u){u=u.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var f=new RegExp("[\\?&]"+u+"=([^&#]*)"),A=f.exec(location.search);return A===null?"":decodeURIComponent(A[1].replace(/\+/g," "))},d.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},c.exports=d},"./vendor/wakelock/wakelock.js":(c,d,u)=>{var f=u("./vendor/wakelock/util.js");function A(){var v=document.createElement("video");v.addEventListener("ended",function(){v.play()}),this.request=function(){v.paused&&(v.src=f.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),v.play())},this.release=function(){v.pause(),v.src=""}}function g(){var v=null;this.request=function(){v||(v=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){v&&(clearInterval(v),v=null)}}function y(){var v=navigator.userAgent||navigator.vendor||window.opera;return v.match(/iPhone/i)||v.match(/iPod/i)?g:A}c.exports=y()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(c,d,u)=>{u.r(d),u.d(d,{default:()=>z});var f=u("./node_modules/css-loader/dist/runtime/sourceMaps.js"),A=u.n(f),g=u("./node_modules/css-loader/dist/runtime/api.js"),y=u.n(g),v=u("./node_modules/css-loader/dist/runtime/getUrl.js"),_=u.n(v),x=new URL(u("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),u.b),b=new URL(u("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),u.b),m=new URL(u("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),u.b),S=new URL(u("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),u.b),C=new URL(u("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),u.b),M=y()(A()),T=_()(x),N=_()(b),P=_()(m),k=_()(S),D=_()(C);M.push([c.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+T+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+N+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+P+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+k+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+D+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;;AAGA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const z=M},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(c,d,u)=>{u.r(d),u.d(d,{default:()=>_});var f=u("./node_modules/css-loader/dist/runtime/sourceMaps.js"),A=u.n(f),g=u("./node_modules/css-loader/dist/runtime/api.js"),y=u.n(g),v=y()(A());v.push([c.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const _=v},"./src/style/aframe.css":(c,d,u)=>{u.r(d),u.d(d,{default:()=>P});var f=u("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=u.n(f),g=u("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),y=u.n(g),v=u("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_=u.n(v),x=u("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),b=u.n(x),m=u("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),S=u.n(m),C=u("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),M=u.n(C),T=u("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),N={};N.styleTagTransform=M(),N.setAttributes=b(),N.insert=_().bind(null,"head"),N.domAPI=y(),N.insertStyleElement=S(),A()(T.default,N);const P=T.default&&T.default.locals?T.default.locals:void 0},"./src/style/rStats.css":(c,d,u)=>{u.r(d),u.d(d,{default:()=>P});var f=u("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=u.n(f),g=u("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),y=u.n(g),v=u("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_=u.n(v),x=u("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),b=u.n(x),m=u("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),S=u.n(m),C=u("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),M=u.n(C),T=u("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),N={};N.styleTagTransform=M(),N.setAttributes=b(),N.insert=_().bind(null,"head"),N.domAPI=y(),N.insertStyleElement=S(),A()(T.default,N);const P=T.default&&T.default.locals?T.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":c=>{var d=[];function u(g){for(var y=-1,v=0;v<d.length;v++)if(d[v].identifier===g){y=v;break}return y}function f(g,y){for(var v={},_=[],x=0;x<g.length;x++){var b=g[x],m=y.base?b[0]+y.base:b[0],S=v[m]||0,C="".concat(m," ").concat(S);v[m]=S+1;var M=u(C),T={css:b[1],media:b[2],sourceMap:b[3],supports:b[4],layer:b[5]};if(M!==-1)d[M].references++,d[M].updater(T);else{var N=A(T,y);y.byIndex=x,d.splice(x,0,{identifier:C,updater:N,references:1})}_.push(C)}return _}function A(g,y){var v=y.domAPI(y);v.update(g);var _=function(b){if(b){if(b.css===g.css&&b.media===g.media&&b.sourceMap===g.sourceMap&&b.supports===g.supports&&b.layer===g.layer)return;v.update(g=b)}else v.remove()};return _}c.exports=function(g,y){y=y||{},g=g||[];var v=f(g,y);return function(x){x=x||[];for(var b=0;b<v.length;b++){var m=v[b],S=u(m);d[S].references--}for(var C=f(x,y),M=0;M<v.length;M++){var T=v[M],N=u(T);d[N].references===0&&(d[N].updater(),d.splice(N,1))}v=C}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":c=>{var d={};function u(A){if(typeof d[A]>"u"){var g=document.querySelector(A);if(window.HTMLIFrameElement&&g instanceof window.HTMLIFrameElement)try{g=g.contentDocument.head}catch{g=null}d[A]=g}return d[A]}function f(A,g){var y=u(A);if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(g)}c.exports=f},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":c=>{function d(u){var f=document.createElement("style");return u.setAttributes(f,u.attributes),u.insert(f,u.options),f}c.exports=d},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(c,d,u)=>{function f(A){var g=u.nc;g&&A.setAttribute("nonce",g)}c.exports=f},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":c=>{function d(A,g,y){var v="";y.supports&&(v+="@supports (".concat(y.supports,") {")),y.media&&(v+="@media ".concat(y.media," {"));var _=typeof y.layer<"u";_&&(v+="@layer".concat(y.layer.length>0?" ".concat(y.layer):""," {")),v+=y.css,_&&(v+="}"),y.media&&(v+="}"),y.supports&&(v+="}");var x=y.sourceMap;x&&typeof btoa<"u"&&(v+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(x))))," */")),g.styleTagTransform(v,A,g.options)}function u(A){if(A.parentNode===null)return!1;A.parentNode.removeChild(A)}function f(A){if(typeof document>"u")return{update:function(){},remove:function(){}};var g=A.insertStyleElement(A);return{update:function(v){d(g,A,v)},remove:function(){u(g)}}}c.exports=f},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":c=>{function d(u,f){if(f.styleSheet)f.styleSheet.cssText=u;else{for(;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(document.createTextNode(u))}}c.exports=d},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":c=>{c.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":c=>{c.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":c=>{c.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":c=>{c.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":c=>{c.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/super-three/build/three.module.js":(c,d,u)=>{u.r(d),u.d(d,{ACESFilmicToneMapping:()=>we,AddEquation:()=>O,AddOperation:()=>zn,AdditiveAnimationBlendMode:()=>en,AdditiveBlending:()=>D,AlphaFormat:()=>li,AlwaysDepth:()=>Ft,AlwaysStencilFunc:()=>Ml,AmbientLight:()=>eR,AmbientLightProbe:()=>K5,AnimationClip:()=>OA,AnimationLoader:()=>P5,AnimationMixer:()=>dN,AnimationObjectGroup:()=>cN,AnimationUtils:()=>ba,ArcCurve:()=>pA,ArrayCamera:()=>Ji,ArrowHelper:()=>PN,Audio:()=>dR,AudioAnalyser:()=>Z5,AudioContext:()=>gC,AudioListener:()=>q5,AudioLoader:()=>Q5,AxesHelper:()=>ON,BackSide:()=>T,BasicDepthPacking:()=>di,BasicShadowMap:()=>b,Bone:()=>Ur,BooleanKeyframeTrack:()=>Gf,Box2:()=>xN,Box3:()=>Br,Box3Helper:()=>BN,BoxBufferGeometry:()=>QN,BoxGeometry:()=>Js,BoxHelper:()=>LN,BufferAttribute:()=>ts,BufferGeometry:()=>pr,BufferGeometryLoader:()=>rR,ByteType:()=>Sn,Cache:()=>Hf,Camera:()=>Jp,CameraHelper:()=>RN,CanvasTexture:()=>jw,CapsuleBufferGeometry:()=>WN,CapsuleGeometry:()=>Mf,CatmullRomCurve3:()=>hx,CineonToneMapping:()=>Je,CircleBufferGeometry:()=>KN,CircleGeometry:()=>Sf,ClampToEdgeWrapping:()=>Xe,Clock:()=>cR,Color:()=>si,ColorKeyframeTrack:()=>uC,ColorManagement:()=>io,CompressedArrayTexture:()=>Vw,CompressedTexture:()=>Im,CompressedTextureLoader:()=>O5,ConeBufferGeometry:()=>XN,ConeGeometry:()=>Tf,CubeCamera:()=>y0,CubeReflectionMapping:()=>Pe,CubeRefractionMapping:()=>Te,CubeTexture:()=>Xo,CubeTextureLoader:()=>F5,CubeUVReflectionMapping:()=>Ue,CubicBezierCurve:()=>vA,CubicBezierCurve3:()=>px,CubicInterpolant:()=>Wa,CullFaceBack:()=>v,CullFaceFront:()=>_,CullFaceFrontBack:()=>x,CullFaceNone:()=>y,Curve:()=>ul,CurvePath:()=>gx,CustomBlending:()=>ne,CustomToneMapping:()=>ge,CylinderBufferGeometry:()=>YN,CylinderGeometry:()=>ju,Cylindrical:()=>yN,Data3DTexture:()=>yt,DataArrayTexture:()=>Pu,DataTexture:()=>ad,DataTexture2DArray:()=>VN,DataTexture3D:()=>jN,DataTextureLoader:()=>k5,DataUtils:()=>GN,DecrementStencilOp:()=>ur,DecrementWrapStencilOp:()=>tc,DefaultLoadingManager:()=>WI,DepthFormat:()=>Ye,DepthStencilFormat:()=>xt,DepthTexture:()=>q1,DirectionalLight:()=>ZI,DirectionalLightHelper:()=>IN,DiscreteInterpolant:()=>BA,DodecahedronBufferGeometry:()=>qN,DodecahedronGeometry:()=>If,DoubleSide:()=>N,DstAlphaFactor:()=>Be,DstColorFactor:()=>rt,DynamicCopyUsage:()=>kp,DynamicDrawUsage:()=>rf,DynamicReadUsage:()=>Pp,EdgesGeometry:()=>Om,EllipseCurve:()=>bf,EqualDepth:()=>Fn,EqualStencilFunc:()=>sc,EquirectangularReflectionMapping:()=>He,EquirectangularRefractionMapping:()=>Fe,Euler:()=>uo,EventDispatcher:()=>Do,ExtrudeBufferGeometry:()=>$N,ExtrudeGeometry:()=>Bf,FileLoader:()=>Xu,Float16BufferAttribute:()=>Rb,Float32BufferAttribute:()=>yi,Float64BufferAttribute:()=>Lb,FloatType:()=>Tn,Fog:()=>Gu,FogExp2:()=>xf,FramebufferTexture:()=>Hw,FrontSide:()=>M,Frustum:()=>tm,GLBufferAttribute:()=>gN,GLSL1:()=>Bo,GLSL3:()=>sf,GreaterDepth:()=>on,GreaterEqualDepth:()=>Xt,GreaterEqualStencilFunc:()=>nf,GreaterStencilFunc:()=>o0,GridHelper:()=>SN,Group:()=>Ea,HalfFloatType:()=>Qt,HemisphereLight:()=>KI,HemisphereLightHelper:()=>MN,HemisphereLightProbe:()=>W5,IcosahedronBufferGeometry:()=>JN,IcosahedronGeometry:()=>Df,ImageBitmapLoader:()=>j5,ImageLoader:()=>FA,ImageUtils:()=>Tl,ImmediateRenderObject:()=>zN,IncrementStencilOp:()=>_r,IncrementWrapStencilOp:()=>tl,InstancedBufferAttribute:()=>ld,InstancedBufferGeometry:()=>iR,InstancedInterleavedBuffer:()=>mN,InstancedMesh:()=>rx,Int16BufferAttribute:()=>Tb,Int32BufferAttribute:()=>Ib,Int8BufferAttribute:()=>Cb,IntType:()=>Ir,InterleavedBuffer:()=>ls,InterleavedBufferAttribute:()=>zu,Interpolant:()=>cs,InterpolateDiscrete:()=>fe,InterpolateLinear:()=>pe,InterpolateSmooth:()=>xe,InvertStencilOp:()=>nc,KeepStencilOp:()=>es,KeyframeTrack:()=>Ac,LOD:()=>aA,LatheBufferGeometry:()=>ZN,LatheGeometry:()=>hd,Layers:()=>Fi,LessDepth:()=>Pt,LessEqualDepth:()=>nt,LessEqualStencilFunc:()=>ds,LessStencilFunc:()=>rc,Light:()=>md,LightProbe:()=>bx,Line:()=>mu,Line3:()=>EN,LineBasicMaterial:()=>ko,LineCurve:()=>Lm,LineCurve3:()=>mx,LineDashedMaterial:()=>Xn,LineLoop:()=>cx,LineSegments:()=>Gl,LinearEncoding:()=>ui,LinearFilter:()=>qe,LinearInterpolant:()=>hl,LinearMipMapLinearFilter:()=>Jt,LinearMipMapNearestFilter:()=>It,LinearMipmapLinearFilter:()=>Ot,LinearMipmapNearestFilter:()=>Qe,LinearSRGBColorSpace:()=>Er,LinearToneMapping:()=>Ai,Loader:()=>dl,LoaderUtils:()=>mC,LoadingManager:()=>hC,LoopOnce:()=>et,LoopPingPong:()=>de,LoopRepeat:()=>vt,LuminanceAlphaFormat:()=>ar,LuminanceFormat:()=>Ar,MOUSE:()=>A,Material:()=>yo,MaterialLoader:()=>wx,MathUtils:()=>Po,Matrix3:()=>Fs,Matrix4:()=>oi,MaxEquation:()=>V,Mesh:()=>as,MeshBasicMaterial:()=>eu,MeshDepthMaterial:()=>nA,MeshDistanceMaterial:()=>iA,MeshLambertMaterial:()=>sn,MeshMatcapMaterial:()=>gn,MeshNormalMaterial:()=>rn,MeshPhongMaterial:()=>pt,MeshPhysicalMaterial:()=>lt,MeshStandardMaterial:()=>Ve,MeshToonMaterial:()=>wt,MinEquation:()=>G,MirroredRepeatWrapping:()=>dt,MixOperation:()=>Rn,MultiplyBlending:()=>Y,MultiplyOperation:()=>vn,NearestFilter:()=>ue,NearestMipMapLinearFilter:()=>be,NearestMipMapNearestFilter:()=>re,NearestMipmapLinearFilter:()=>ke,NearestMipmapNearestFilter:()=>q,NeverDepth:()=>mt,NeverStencilFunc:()=>ic,NoBlending:()=>P,NoColorSpace:()=>ji,NoToneMapping:()=>Wn,NormalAnimationBlendMode:()=>zt,NormalBlending:()=>k,NotEqualDepth:()=>nn,NotEqualStencilFunc:()=>Xs,NumberKeyframeTrack:()=>DA,Object3D:()=>Or,ObjectLoader:()=>H5,ObjectSpaceNormalMap:()=>Ri,OctahedronBufferGeometry:()=>e8,OctahedronGeometry:()=>fd,OneFactor:()=>W,OneMinusDstAlphaFactor:()=>Se,OneMinusDstColorFactor:()=>Ge,OneMinusSrcAlphaFactor:()=>me,OneMinusSrcColorFactor:()=>ee,OrthographicCamera:()=>kl,PCFShadowMap:()=>m,PCFSoftShadowMap:()=>S,PMREMGenerator:()=>Q0,Path:()=>Cf,PerspectiveCamera:()=>Vs,Plane:()=>Is,PlaneBufferGeometry:()=>t8,PlaneGeometry:()=>$h,PlaneHelper:()=>DN,PointLight:()=>JI,PointLightHelper:()=>wN,Points:()=>fA,PointsMaterial:()=>js,PolarGridHelper:()=>TN,PolyhedronBufferGeometry:()=>n8,PolyhedronGeometry:()=>gc,PositionalAudio:()=>J5,PropertyBinding:()=>Vr,PropertyMixer:()=>pR,QuadraticBezierCurve:()=>yA,QuadraticBezierCurve3:()=>xA,Quaternion:()=>Nn,QuaternionKeyframeTrack:()=>Um,QuaternionLinearInterpolant:()=>QI,REVISION:()=>f,RGBADepthPacking:()=>Kn,RGBAFormat:()=>Li,RGBAIntegerFormat:()=>We,RGBA_ASTC_10x10_Format:()=>ce,RGBA_ASTC_10x5_Format:()=>Wr,RGBA_ASTC_10x6_Format:()=>Mi,RGBA_ASTC_10x8_Format:()=>ie,RGBA_ASTC_12x10_Format:()=>ye,RGBA_ASTC_12x12_Format:()=>Ie,RGBA_ASTC_4x4_Format:()=>Rr,RGBA_ASTC_5x4_Format:()=>hi,RGBA_ASTC_5x5_Format:()=>Ci,RGBA_ASTC_6x5_Format:()=>qi,RGBA_ASTC_6x6_Format:()=>Cr,RGBA_ASTC_8x5_Format:()=>Jr,RGBA_ASTC_8x6_Format:()=>bn,RGBA_ASTC_8x8_Format:()=>ei,RGBA_BPTC_Format:()=>Ke,RGBA_ETC2_EAC_Format:()=>_n,RGBA_PVRTC_2BPPV1_Format:()=>Vt,RGBA_PVRTC_4BPPV1_Format:()=>yn,RGBA_S3TC_DXT1_Format:()=>gt,RGBA_S3TC_DXT3_Format:()=>At,RGBA_S3TC_DXT5_Format:()=>Rt,RGBFormat:()=>bi,RGB_ETC1_Format:()=>qn,RGB_ETC2_Format:()=>Un,RGB_PVRTC_2BPPV1_Format:()=>wn,RGB_PVRTC_4BPPV1_Format:()=>Nt,RGB_S3TC_DXT1_Format:()=>it,RGFormat:()=>Bt,RGIntegerFormat:()=>Re,RawShaderMaterial:()=>Me,Ray:()=>ks,Raycaster:()=>AN,RectAreaLight:()=>tR,RedFormat:()=>Mt,RedIntegerFormat:()=>Et,ReinhardToneMapping:()=>Ti,RepeatWrapping:()=>Ae,ReplaceStencilOp:()=>Ui,ReverseSubtractEquation:()=>U,RingBufferGeometry:()=>i8,RingGeometry:()=>Pf,SRGBColorSpace:()=>Di,Scene:()=>ps,ShaderChunk:()=>cr,ShaderLib:()=>ja,ShaderMaterial:()=>va,ShadowMaterial:()=>ae,Shape:()=>Au,ShapeBufferGeometry:()=>r8,ShapeGeometry:()=>Of,ShapePath:()=>FN,ShapeUtils:()=>zl,ShortType:()=>er,Skeleton:()=>wm,SkeletonHelper:()=>bN,SkinnedMesh:()=>tx,Source:()=>qs,Sphere:()=>Wo,SphereBufferGeometry:()=>s8,SphereGeometry:()=>pd,Spherical:()=>vN,SphericalHarmonics3:()=>nR,SplineCurve:()=>EA,SpotLight:()=>qI,SpotLightHelper:()=>_N,Sprite:()=>Z1,SpriteMaterial:()=>oA,SrcAlphaFactor:()=>he,SrcAlphaSaturateFactor:()=>st,SrcColorFactor:()=>J,StaticCopyUsage:()=>Fp,StaticDrawUsage:()=>zc,StaticReadUsage:()=>Dp,StereoCamera:()=>X5,StreamCopyUsage:()=>Np,StreamDrawUsage:()=>Vo,StreamReadUsage:()=>Op,StringKeyframeTrack:()=>zf,SubtractEquation:()=>F,SubtractiveBlending:()=>z,TOUCH:()=>g,TangentSpaceNormalMap:()=>vi,TetrahedronBufferGeometry:()=>o8,TetrahedronGeometry:()=>Ff,Texture:()=>vs,TextureLoader:()=>N5,TorusBufferGeometry:()=>a8,TorusGeometry:()=>kf,TorusKnotBufferGeometry:()=>l8,TorusKnotGeometry:()=>Nf,Triangle:()=>ys,TriangleFanDrawMode:()=>kn,TriangleStripDrawMode:()=>Wt,TrianglesDrawMode:()=>An,TubeBufferGeometry:()=>c8,TubeGeometry:()=>Uf,UVMapping:()=>_e,Uint16BufferAttribute:()=>ll,Uint32BufferAttribute:()=>p0,Uint8BufferAttribute:()=>Mb,Uint8ClampedBufferAttribute:()=>Sb,Uniform:()=>yC,UniformsGroup:()=>pN,UniformsLib:()=>Hn,UniformsUtils:()=>dc,UnsignedByteType:()=>dn,UnsignedInt248Type:()=>Cn,UnsignedIntType:()=>_i,UnsignedShort4444Type:()=>mn,UnsignedShort5551Type:()=>ri,UnsignedShortType:()=>Pi,VSMShadowMap:()=>C,Vector2:()=>un,Vector3:()=>je,Vector4:()=>kr,VectorKeyframeTrack:()=>PA,VideoTexture:()=>zw,WebGL1Renderer:()=>Nl,WebGL3DRenderTarget:()=>Yt,WebGLArrayRenderTarget:()=>Kc,WebGLCubeRenderTarget:()=>Zp,WebGLMultipleRenderTargets:()=>Gt,WebGLMultisampleRenderTarget:()=>HN,WebGLRenderTarget:()=>Qo,WebGLRenderer:()=>$1,WebGLUtils:()=>K1,WireframeGeometry:()=>E,WrapAroundEnding:()=>St,ZeroCurvatureEnding:()=>Ee,ZeroFactor:()=>K,ZeroSlopeEnding:()=>ct,ZeroStencilOp:()=>$i,_SRGBAFormat:()=>co,sRGBEncoding:()=>Ln});/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const f="147",A={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},g={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},y=0,v=1,_=2,x=3,b=0,m=1,S=2,C=3,M=0,T=1,N=2,P=0,k=1,D=2,z=3,Y=4,ne=5,O=100,F=101,U=102,G=103,V=104,K=200,W=201,J=202,ee=203,he=204,me=205,Be=206,Se=207,rt=208,Ge=209,st=210,mt=0,Ft=1,Pt=2,nt=3,Fn=4,Xt=5,on=6,nn=7,vn=0,Rn=1,zn=2,Wn=0,Ai=1,Ti=2,Je=3,we=4,ge=5,_e=300,Pe=301,Te=302,He=303,Fe=304,Ue=306,Ae=1e3,Xe=1001,dt=1002,ue=1003,q=1004,re=1004,ke=1005,be=1005,qe=1006,Qe=1007,It=1007,Ot=1008,Jt=1008,dn=1009,Sn=1010,er=1011,Pi=1012,Ir=1013,_i=1014,Tn=1015,Qt=1016,mn=1017,ri=1018,Cn=1020,li=1021,bi=1022,Li=1023,Ar=1024,ar=1025,Ye=1026,xt=1027,Mt=1028,Et=1029,Bt=1030,Re=1031,We=1033,it=33776,gt=33777,At=33778,Rt=33779,Nt=35840,wn=35841,yn=35842,Vt=35843,qn=36196,Un=37492,_n=37496,Rr=37808,hi=37809,Ci=37810,qi=37811,Cr=37812,Jr=37813,bn=37814,ei=37815,Wr=37816,Mi=37817,ie=37818,ce=37819,ye=37820,Ie=37821,Ke=36492,et=2200,vt=2201,de=2202,fe=2300,pe=2301,xe=2302,Ee=2400,ct=2401,St=2402,zt=2500,en=2501,An=0,Wt=1,kn=2,ui=3e3,Ln=3001,di=3200,Kn=3201,vi=0,Ri=1,ji="",Di="srgb",Er="srgb-linear",$i=0,es=7680,Ui=7681,_r=7682,ur=7683,tl=34055,tc=34056,nc=5386,ic=512,rc=513,sc=514,ds=515,o0=516,Xs=517,nf=518,Ml=519,zc=35044,rf=35048,Vo=35040,Dp=35045,Pp=35049,Op=35041,Fp=35046,kp=35050,Np=35042,Bo="100",sf="300 es",co=1035;class Do{addEventListener(r,a){this._listeners===void 0&&(this._listeners={});const h=this._listeners;h[r]===void 0&&(h[r]=[]),h[r].indexOf(a)===-1&&h[r].push(a)}hasEventListener(r,a){if(this._listeners===void 0)return!1;const h=this._listeners;return h[r]!==void 0&&h[r].indexOf(a)!==-1}removeEventListener(r,a){if(this._listeners===void 0)return;const p=this._listeners[r];if(p!==void 0){const w=p.indexOf(a);w!==-1&&p.splice(w,1)}}dispatchEvent(r){if(this._listeners===void 0)return;const h=this._listeners[r.type];if(h!==void 0){r.target=this;const p=h.slice(0);for(let w=0,R=p.length;w<R;w++)p[w].call(this,r);r.target=null}}}const Ys=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nl=1234567;const Fa=Math.PI/180,oc=180/Math.PI;function vr(){const B=Math.random()*4294967295|0,r=Math.random()*4294967295|0,a=Math.random()*4294967295|0,h=Math.random()*4294967295|0;return(Ys[B&255]+Ys[B>>8&255]+Ys[B>>16&255]+Ys[B>>24&255]+"-"+Ys[r&255]+Ys[r>>8&255]+"-"+Ys[r>>16&15|64]+Ys[r>>24&255]+"-"+Ys[a&63|128]+Ys[a>>8&255]+"-"+Ys[a>>16&255]+Ys[a>>24&255]+Ys[h&255]+Ys[h>>8&255]+Ys[h>>16&255]+Ys[h>>24&255]).toLowerCase()}function Kr(B,r,a){return Math.max(r,Math.min(a,B))}function Lu(B,r){return(B%r+r)%r}function a0(B,r,a,h,p){return h+(B-r)*(p-h)/(a-r)}function of(B,r,a){return B!==r?(a-B)/(r-B):0}function Bu(B,r,a){return(1-a)*B+a*r}function l0(B,r,a,h){return Bu(B,r,1-Math.exp(-a*h))}function c0(B,r=1){return r-Math.abs(Lu(B,r*2)-r)}function Up(B,r,a){return B<=r?0:B>=a?1:(B=(B-r)/(a-r),B*B*(3-2*B))}function Oh(B,r,a){return B<=r?0:B>=a?1:(B=(B-r)/(a-r),B*B*B*(B*(B*6-15)+10))}function Hc(B,r){return B+Math.floor(Math.random()*(r-B+1))}function u0(B,r){return B+Math.random()*(r-B)}function Gp(B){return B*(.5-Math.random())}function zp(B){B!==void 0&&(nl=B);let r=nl+=1831565813;return r=Math.imul(r^r>>>15,r|1),r^=r+Math.imul(r^r>>>7,r|61),((r^r>>>14)>>>0)/4294967296}function af(B){return B*Fa}function lf(B){return B*oc}function Fh(B){return(B&B-1)===0&&B!==0}function Hp(B){return Math.pow(2,Math.ceil(Math.log(B)/Math.LN2))}function Vc(B){return Math.pow(2,Math.floor(Math.log(B)/Math.LN2))}function cf(B,r,a,h,p){const w=Math.cos,R=Math.sin,L=w(a/2),H=R(a/2),j=w((r+h)/2),X=R((r+h)/2),$=w((r-h)/2),Z=R((r-h)/2),te=w((h-r)/2),le=R((h-r)/2);switch(p){case"XYX":B.set(L*X,H*$,H*Z,L*j);break;case"YZY":B.set(H*Z,L*X,H*$,L*j);break;case"ZXZ":B.set(H*$,H*Z,L*X,L*j);break;case"XZX":B.set(L*X,H*le,H*te,L*j);break;case"YXY":B.set(H*te,L*X,H*le,L*j);break;case"ZYZ":B.set(H*le,H*te,L*X,L*j);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+p)}}function il(B,r){switch(r.constructor){case Float32Array:return B;case Uint16Array:return B/65535;case Uint8Array:return B/255;case Int16Array:return Math.max(B/32767,-1);case Int8Array:return Math.max(B/127,-1);default:throw new Error("Invalid component type.")}}function Xr(B,r){switch(r.constructor){case Float32Array:return B;case Uint16Array:return Math.round(B*65535);case Uint8Array:return Math.round(B*255);case Int16Array:return Math.round(B*32767);case Int8Array:return Math.round(B*127);default:throw new Error("Invalid component type.")}}var Po=Object.freeze({__proto__:null,DEG2RAD:Fa,RAD2DEG:oc,generateUUID:vr,clamp:Kr,euclideanModulo:Lu,mapLinear:a0,inverseLerp:of,lerp:Bu,damp:l0,pingpong:c0,smoothstep:Up,smootherstep:Oh,randInt:Hc,randFloat:u0,randFloatSpread:Gp,seededRandom:zp,degToRad:af,radToDeg:lf,isPowerOfTwo:Fh,ceilPowerOfTwo:Hp,floorPowerOfTwo:Vc,setQuaternionFromProperEuler:cf,normalize:Xr,denormalize:il});class un{constructor(r=0,a=0){un.prototype.isVector2=!0,this.x=r,this.y=a}get width(){return this.x}set width(r){this.x=r}get height(){return this.y}set height(r){this.y=r}set(r,a){return this.x=r,this.y=a,this}setScalar(r){return this.x=r,this.y=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setComponent(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y)}copy(r){return this.x=r.x,this.y=r.y,this}add(r){return this.x+=r.x,this.y+=r.y,this}addScalar(r){return this.x+=r,this.y+=r,this}addVectors(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this}addScaledVector(r,a){return this.x+=r.x*a,this.y+=r.y*a,this}sub(r){return this.x-=r.x,this.y-=r.y,this}subScalar(r){return this.x-=r,this.y-=r,this}subVectors(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this}multiply(r){return this.x*=r.x,this.y*=r.y,this}multiplyScalar(r){return this.x*=r,this.y*=r,this}divide(r){return this.x/=r.x,this.y/=r.y,this}divideScalar(r){return this.multiplyScalar(1/r)}applyMatrix3(r){const a=this.x,h=this.y,p=r.elements;return this.x=p[0]*a+p[3]*h+p[6],this.y=p[1]*a+p[4]*h+p[7],this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}clamp(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this}clampScalar(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this}clampLength(r,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(r,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(r){return this.x*r.x+this.y*r.y}cross(r){return this.x*r.y-this.y*r.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const a=this.x-r.x,h=this.y-r.y;return a*a+h*h}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this}lerpVectors(r,a,h){return this.x=r.x+(a.x-r.x)*h,this.y=r.y+(a.y-r.y)*h,this}equals(r){return r.x===this.x&&r.y===this.y}fromArray(r,a=0){return this.x=r[a],this.y=r[a+1],this}toArray(r=[],a=0){return r[a]=this.x,r[a+1]=this.y,r}fromBufferAttribute(r,a){return this.x=r.getX(a),this.y=r.getY(a),this}rotateAround(r,a){const h=Math.cos(a),p=Math.sin(a),w=this.x-r.x,R=this.y-r.y;return this.x=w*h-R*p+r.x,this.y=w*p+R*h+r.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fs{constructor(){Fs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(r,a,h,p,w,R,L,H,j){const X=this.elements;return X[0]=r,X[1]=p,X[2]=L,X[3]=a,X[4]=w,X[5]=H,X[6]=h,X[7]=R,X[8]=j,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(r){const a=this.elements,h=r.elements;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],this}extractBasis(r,a,h){return r.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),h.setFromMatrix3Column(this,2),this}setFromMatrix4(r){const a=r.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,a){const h=r.elements,p=a.elements,w=this.elements,R=h[0],L=h[3],H=h[6],j=h[1],X=h[4],$=h[7],Z=h[2],te=h[5],le=h[8],oe=p[0],se=p[3],ve=p[6],De=p[1],Ce=p[4],Le=p[7],ze=p[2],tt=p[5],ft=p[8];return w[0]=R*oe+L*De+H*ze,w[3]=R*se+L*Ce+H*tt,w[6]=R*ve+L*Le+H*ft,w[1]=j*oe+X*De+$*ze,w[4]=j*se+X*Ce+$*tt,w[7]=j*ve+X*Le+$*ft,w[2]=Z*oe+te*De+le*ze,w[5]=Z*se+te*Ce+le*tt,w[8]=Z*ve+te*Le+le*ft,this}multiplyScalar(r){const a=this.elements;return a[0]*=r,a[3]*=r,a[6]*=r,a[1]*=r,a[4]*=r,a[7]*=r,a[2]*=r,a[5]*=r,a[8]*=r,this}determinant(){const r=this.elements,a=r[0],h=r[1],p=r[2],w=r[3],R=r[4],L=r[5],H=r[6],j=r[7],X=r[8];return a*R*X-a*L*j-h*w*X+h*L*H+p*w*j-p*R*H}invert(){const r=this.elements,a=r[0],h=r[1],p=r[2],w=r[3],R=r[4],L=r[5],H=r[6],j=r[7],X=r[8],$=X*R-L*j,Z=L*H-X*w,te=j*w-R*H,le=a*$+h*Z+p*te;if(le===0)return this.set(0,0,0,0,0,0,0,0,0);const oe=1/le;return r[0]=$*oe,r[1]=(p*j-X*h)*oe,r[2]=(L*h-p*R)*oe,r[3]=Z*oe,r[4]=(X*a-p*H)*oe,r[5]=(p*w-L*a)*oe,r[6]=te*oe,r[7]=(h*H-j*a)*oe,r[8]=(R*a-h*w)*oe,this}transpose(){let r;const a=this.elements;return r=a[1],a[1]=a[3],a[3]=r,r=a[2],a[2]=a[6],a[6]=r,r=a[5],a[5]=a[7],a[7]=r,this}getNormalMatrix(r){return this.setFromMatrix4(r).invert().transpose()}transposeIntoArray(r){const a=this.elements;return r[0]=a[0],r[1]=a[3],r[2]=a[6],r[3]=a[1],r[4]=a[4],r[5]=a[7],r[6]=a[2],r[7]=a[5],r[8]=a[8],this}setUvTransform(r,a,h,p,w,R,L){const H=Math.cos(w),j=Math.sin(w);return this.set(h*H,h*j,-h*(H*R+j*L)+R+r,-p*j,p*H,-p*(-j*R+H*L)+L+a,0,0,1),this}scale(r,a){return this.premultiply(kh.makeScale(r,a)),this}rotate(r){return this.premultiply(kh.makeRotation(-r)),this}translate(r,a){return this.premultiply(kh.makeTranslation(r,a)),this}makeTranslation(r,a){return this.set(1,0,r,0,1,a,0,0,1),this}makeRotation(r){const a=Math.cos(r),h=Math.sin(r);return this.set(a,-h,0,h,a,0,0,0,1),this}makeScale(r,a){return this.set(r,0,0,0,a,0,0,0,1),this}equals(r){const a=this.elements,h=r.elements;for(let p=0;p<9;p++)if(a[p]!==h[p])return!1;return!0}fromArray(r,a=0){for(let h=0;h<9;h++)this.elements[h]=r[h+a];return this}toArray(r=[],a=0){const h=this.elements;return r[a]=h[0],r[a+1]=h[1],r[a+2]=h[2],r[a+3]=h[3],r[a+4]=h[4],r[a+5]=h[5],r[a+6]=h[6],r[a+7]=h[7],r[a+8]=h[8],r}clone(){return new this.constructor().fromArray(this.elements)}}const kh=new Fs;function uf(B){for(let r=B.length-1;r>=0;--r)if(B[r]>=65535)return!0;return!1}const h0={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function jc(B,r){return new h0[B](r)}function Du(B){return document.createElementNS("http://www.w3.org/1999/xhtml",B)}function ac(B){return B<.04045?B*.0773993808:Math.pow(B*.9478672986+.0521327014,2.4)}function Nh(B){return B<.0031308?B*12.92:1.055*Math.pow(B,.41666)-.055}const Sl={[Di]:{[Er]:ac},[Er]:{[Di]:Nh}},io={legacyMode:!0,get workingColorSpace(){return Er},set workingColorSpace(B){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(B,r,a){if(this.legacyMode||r===a||!r||!a)return B;if(Sl[r]&&Sl[r][a]!==void 0){const h=Sl[r][a];return B.r=h(B.r),B.g=h(B.g),B.b=h(B.b),B}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(B,r){return this.convert(B,this.workingColorSpace,r)},toWorkingColorSpace:function(B,r){return this.convert(B,r,this.workingColorSpace)}},Vp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},As={r:0,g:0,b:0},jo={h:0,s:0,l:0},ca={h:0,s:0,l:0};function Qc(B,r,a){return a<0&&(a+=1),a>1&&(a-=1),a<.16666666666666666?B+(r-B)*6*a:a<.5?r:a<.6666666666666666?B+(r-B)*6*(.6666666666666666-a):B}function Uh(B,r){return r.r=B.r,r.g=B.g,r.b=B.b,r}class si{constructor(r,a,h){return this.isColor=!0,this.r=1,this.g=1,this.b=1,a===void 0&&h===void 0?this.set(r):this.setRGB(r,a,h)}set(r){return r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r),this}setScalar(r){return this.r=r,this.g=r,this.b=r,this}setHex(r,a=Di){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(r&255)/255,io.toWorkingColorSpace(this,a),this}setRGB(r,a,h,p=io.workingColorSpace){return this.r=r,this.g=a,this.b=h,io.toWorkingColorSpace(this,p),this}setHSL(r,a,h,p=io.workingColorSpace){if(r=Lu(r,1),a=Kr(a,0,1),h=Kr(h,0,1),a===0)this.r=this.g=this.b=h;else{const w=h<=.5?h*(1+a):h+a-h*a,R=2*h-w;this.r=Qc(R,w,r+.3333333333333333),this.g=Qc(R,w,r),this.b=Qc(R,w,r-.3333333333333333)}return io.toWorkingColorSpace(this,p),this}setStyle(r,a=Di){function h(w){w!==void 0&&parseFloat(w)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}let p;if(p=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(r)){let w;const R=p[1],L=p[2];switch(R){case"rgb":case"rgba":if(w=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(L))return this.r=Math.min(255,parseInt(w[1],10))/255,this.g=Math.min(255,parseInt(w[2],10))/255,this.b=Math.min(255,parseInt(w[3],10))/255,io.toWorkingColorSpace(this,a),h(w[4]),this;if(w=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(L))return this.r=Math.min(100,parseInt(w[1],10))/100,this.g=Math.min(100,parseInt(w[2],10))/100,this.b=Math.min(100,parseInt(w[3],10))/100,io.toWorkingColorSpace(this,a),h(w[4]),this;break;case"hsl":case"hsla":if(w=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(L)){const H=parseFloat(w[1])/360,j=parseFloat(w[2])/100,X=parseFloat(w[3])/100;return h(w[4]),this.setHSL(H,j,X,a)}break}}else if(p=/^\#([A-Fa-f\d]+)$/.exec(r)){const w=p[1],R=w.length;if(R===3)return this.r=parseInt(w.charAt(0)+w.charAt(0),16)/255,this.g=parseInt(w.charAt(1)+w.charAt(1),16)/255,this.b=parseInt(w.charAt(2)+w.charAt(2),16)/255,io.toWorkingColorSpace(this,a),this;if(R===6)return this.r=parseInt(w.charAt(0)+w.charAt(1),16)/255,this.g=parseInt(w.charAt(2)+w.charAt(3),16)/255,this.b=parseInt(w.charAt(4)+w.charAt(5),16)/255,io.toWorkingColorSpace(this,a),this}return r&&r.length>0?this.setColorName(r,a):this}setColorName(r,a=Di){const h=Vp[r.toLowerCase()];return h!==void 0?this.setHex(h,a):console.warn("THREE.Color: Unknown color "+r),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(r){return this.r=r.r,this.g=r.g,this.b=r.b,this}copySRGBToLinear(r){return this.r=ac(r.r),this.g=ac(r.g),this.b=ac(r.b),this}copyLinearToSRGB(r){return this.r=Nh(r.r),this.g=Nh(r.g),this.b=Nh(r.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(r=Di){return io.fromWorkingColorSpace(Uh(this,As),r),Kr(As.r*255,0,255)<<16^Kr(As.g*255,0,255)<<8^Kr(As.b*255,0,255)<<0}getHexString(r=Di){return("000000"+this.getHex(r).toString(16)).slice(-6)}getHSL(r,a=io.workingColorSpace){io.fromWorkingColorSpace(Uh(this,As),a);const h=As.r,p=As.g,w=As.b,R=Math.max(h,p,w),L=Math.min(h,p,w);let H,j;const X=(L+R)/2;if(L===R)H=0,j=0;else{const $=R-L;switch(j=X<=.5?$/(R+L):$/(2-R-L),R){case h:H=(p-w)/$+(p<w?6:0);break;case p:H=(w-h)/$+2;break;case w:H=(h-p)/$+4;break}H/=6}return r.h=H,r.s=j,r.l=X,r}getRGB(r,a=io.workingColorSpace){return io.fromWorkingColorSpace(Uh(this,As),a),r.r=As.r,r.g=As.g,r.b=As.b,r}getStyle(r=Di){return io.fromWorkingColorSpace(Uh(this,As),r),r!==Di?`color(${r} ${As.r} ${As.g} ${As.b})`:`rgb(${As.r*255|0},${As.g*255|0},${As.b*255|0})`}offsetHSL(r,a,h){return this.getHSL(jo),jo.h+=r,jo.s+=a,jo.l+=h,this.setHSL(jo.h,jo.s,jo.l),this}add(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this}addColors(r,a){return this.r=r.r+a.r,this.g=r.g+a.g,this.b=r.b+a.b,this}addScalar(r){return this.r+=r,this.g+=r,this.b+=r,this}sub(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this}multiply(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this}multiplyScalar(r){return this.r*=r,this.g*=r,this.b*=r,this}lerp(r,a){return this.r+=(r.r-this.r)*a,this.g+=(r.g-this.g)*a,this.b+=(r.b-this.b)*a,this}lerpColors(r,a,h){return this.r=r.r+(a.r-r.r)*h,this.g=r.g+(a.g-r.g)*h,this.b=r.b+(a.b-r.b)*h,this}lerpHSL(r,a){this.getHSL(jo),r.getHSL(ca);const h=Bu(jo.h,ca.h,a),p=Bu(jo.s,ca.s,a),w=Bu(jo.l,ca.l,a);return this.setHSL(h,p,w),this}equals(r){return r.r===this.r&&r.g===this.g&&r.b===this.b}fromArray(r,a=0){return this.r=r[a],this.g=r[a+1],this.b=r[a+2],this}toArray(r=[],a=0){return r[a]=this.r,r[a+1]=this.g,r[a+2]=this.b,r}fromBufferAttribute(r,a){return this.r=r.getX(a),this.g=r.getY(a),this.b=r.getZ(a),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}si.NAMES=Vp;let Wc;class Tl{static getDataURL(r){if(/^data:/i.test(r.src)||typeof HTMLCanvasElement>"u")return r.src;let a;if(r instanceof HTMLCanvasElement)a=r;else{Wc===void 0&&(Wc=Du("canvas")),Wc.width=r.width,Wc.height=r.height;const h=Wc.getContext("2d");r instanceof ImageData?h.putImageData(r,0,0):h.drawImage(r,0,0,r.width,r.height),a=Wc}return a.width>2048||a.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",r),a.toDataURL("image/jpeg",.6)):a.toDataURL("image/png")}static sRGBToLinear(r){if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap){const a=Du("canvas");a.width=r.width,a.height=r.height;const h=a.getContext("2d");h.drawImage(r,0,0,r.width,r.height);const p=h.getImageData(0,0,r.width,r.height),w=p.data;for(let R=0;R<w.length;R++)w[R]=ac(w[R]/255)*255;return h.putImageData(p,0,0),a}else if(r.data){const a=r.data.slice(0);for(let h=0;h<a.length;h++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[h]=Math.floor(ac(a[h]/255)*255):a[h]=ac(a[h]);return{data:a,width:r.width,height:r.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),r}}class qs{constructor(r=null){this.isSource=!0,this.uuid=vr(),this.data=r,this.version=0}set needsUpdate(r){r===!0&&this.version++}toJSON(r){const a=r===void 0||typeof r=="string";if(!a&&r.images[this.uuid]!==void 0)return r.images[this.uuid];const h={uuid:this.uuid,url:""},p=this.data;if(p!==null){let w;if(Array.isArray(p)){w=[];for(let R=0,L=p.length;R<L;R++)p[R].isDataTexture?w.push(Gh(p[R].image)):w.push(Gh(p[R]))}else w=Gh(p);h.url=w}return a||(r.images[this.uuid]=h),h}}function Gh(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap?Tl.getDataURL(B):B.data?{data:Array.from(B.data),width:B.width,height:B.height,type:B.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let d0=0;class vs extends Do{constructor(r=vs.DEFAULT_IMAGE,a=vs.DEFAULT_MAPPING,h=Xe,p=Xe,w=qe,R=Ot,L=Li,H=dn,j=vs.DEFAULT_ANISOTROPY,X=ui){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:d0++}),this.uuid=vr(),this.name="",this.source=new qs(r),this.mipmaps=[],this.mapping=a,this.wrapS=h,this.wrapT=p,this.magFilter=w,this.minFilter=R,this.anisotropy=j,this.format=L,this.internalFormat=null,this.type=H,this.offset=new un(0,0),this.repeat=new un(1,1),this.center=new un(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=X,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(r){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.encoding=r.encoding,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const a=r===void 0||typeof r=="string";if(!a&&r.textures[this.uuid]!==void 0)return r.textures[this.uuid];const h={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(h.userData=this.userData),a||(r.textures[this.uuid]=h),h}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(this.mapping!==_e)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case Ae:r.x=r.x-Math.floor(r.x);break;case Xe:r.x=r.x<0?0:1;break;case dt:Math.abs(Math.floor(r.x)%2)===1?r.x=Math.ceil(r.x)-r.x:r.x=r.x-Math.floor(r.x);break}if(r.y<0||r.y>1)switch(this.wrapT){case Ae:r.y=r.y-Math.floor(r.y);break;case Xe:r.y=r.y<0?0:1;break;case dt:Math.abs(Math.floor(r.y)%2)===1?r.y=Math.ceil(r.y)-r.y:r.y=r.y-Math.floor(r.y);break}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){r===!0&&(this.version++,this.source.needsUpdate=!0)}}vs.DEFAULT_IMAGE=null,vs.DEFAULT_MAPPING=_e,vs.DEFAULT_ANISOTROPY=1;class kr{constructor(r=0,a=0,h=0,p=1){kr.prototype.isVector4=!0,this.x=r,this.y=a,this.z=h,this.w=p}get width(){return this.z}set width(r){this.z=r}get height(){return this.w}set height(r){this.w=r}set(r,a,h,p){return this.x=r,this.y=a,this.z=h,this.w=p,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setW(r){return this.w=r,this}setComponent(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==void 0?r.w:1,this}add(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}addVectors(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this.w=r.w+a.w,this}addScaledVector(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a,this.w+=r.w*a,this}sub(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}subVectors(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this.z=r.z-a.z,this.w=r.w-a.w,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}applyMatrix4(r){const a=this.x,h=this.y,p=this.z,w=this.w,R=r.elements;return this.x=R[0]*a+R[4]*h+R[8]*p+R[12]*w,this.y=R[1]*a+R[5]*h+R[9]*p+R[13]*w,this.z=R[2]*a+R[6]*h+R[10]*p+R[14]*w,this.w=R[3]*a+R[7]*h+R[11]*p+R[15]*w,this}divideScalar(r){return this.multiplyScalar(1/r)}setAxisAngleFromQuaternion(r){this.w=2*Math.acos(r.w);const a=Math.sqrt(1-r.w*r.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/a,this.y=r.y/a,this.z=r.z/a),this}setAxisAngleFromRotationMatrix(r){let a,h,p,w;const H=r.elements,j=H[0],X=H[4],$=H[8],Z=H[1],te=H[5],le=H[9],oe=H[2],se=H[6],ve=H[10];if(Math.abs(X-Z)<.01&&Math.abs($-oe)<.01&&Math.abs(le-se)<.01){if(Math.abs(X+Z)<.1&&Math.abs($+oe)<.1&&Math.abs(le+se)<.1&&Math.abs(j+te+ve-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;const Ce=(j+1)/2,Le=(te+1)/2,ze=(ve+1)/2,tt=(X+Z)/4,ft=($+oe)/4,Oe=(le+se)/4;return Ce>Le&&Ce>ze?Ce<.01?(h=0,p=.707106781,w=.707106781):(h=Math.sqrt(Ce),p=tt/h,w=ft/h):Le>ze?Le<.01?(h=.707106781,p=0,w=.707106781):(p=Math.sqrt(Le),h=tt/p,w=Oe/p):ze<.01?(h=.707106781,p=.707106781,w=0):(w=Math.sqrt(ze),h=ft/w,p=Oe/w),this.set(h,p,w,a),this}let De=Math.sqrt((se-le)*(se-le)+($-oe)*($-oe)+(Z-X)*(Z-X));return Math.abs(De)<.001&&(De=1),this.x=(se-le)/De,this.y=($-oe)/De,this.z=(Z-X)/De,this.w=Math.acos((j+te+ve-1)/2),this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}clamp(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this.z=Math.max(r.z,Math.min(a.z,this.z)),this.w=Math.max(r.w,Math.min(a.w,this.w)),this}clampScalar(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this.z=Math.max(r,Math.min(a,this.z)),this.w=Math.max(r,Math.min(a,this.w)),this}clampLength(r,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(r,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this.z+=(r.z-this.z)*a,this.w+=(r.w-this.w)*a,this}lerpVectors(r,a,h){return this.x=r.x+(a.x-r.x)*h,this.y=r.y+(a.y-r.y)*h,this.z=r.z+(a.z-r.z)*h,this.w=r.w+(a.w-r.w)*h,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}fromArray(r,a=0){return this.x=r[a],this.y=r[a+1],this.z=r[a+2],this.w=r[a+3],this}toArray(r=[],a=0){return r[a]=this.x,r[a+1]=this.y,r[a+2]=this.z,r[a+3]=this.w,r}fromBufferAttribute(r,a){return this.x=r.getX(a),this.y=r.getY(a),this.z=r.getZ(a),this.w=r.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qo extends Do{constructor(r=1,a=1,h={}){super(),this.isWebGLRenderTarget=!0,this.width=r,this.height=a,this.depth=1,this.scissor=new kr(0,0,r,a),this.scissorTest=!1,this.viewport=new kr(0,0,r,a);const p={width:r,height:a,depth:1};this.texture=new vs(p,h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=h.generateMipmaps!==void 0?h.generateMipmaps:!1,this.texture.internalFormat=h.internalFormat!==void 0?h.internalFormat:null,this.texture.minFilter=h.minFilter!==void 0?h.minFilter:qe,this.depthBuffer=h.depthBuffer!==void 0?h.depthBuffer:!0,this.stencilBuffer=h.stencilBuffer!==void 0?h.stencilBuffer:!1,this.depthTexture=h.depthTexture!==void 0?h.depthTexture:null,this.samples=h.samples!==void 0?h.samples:0}setSize(r,a,h=1){(this.width!==r||this.height!==a||this.depth!==h)&&(this.width=r,this.height=a,this.depth=h,this.texture.image.width=r,this.texture.image.height=a,this.texture.image.depth=h,this.dispose()),this.viewport.set(0,0,r,a),this.scissor.set(0,0,r,a)}clone(){return new this.constructor().copy(this)}copy(r){this.width=r.width,this.height=r.height,this.depth=r.depth,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.texture.isRenderTargetTexture=!0;const a=Object.assign({},r.texture.image);return this.texture.source=new qs(a),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,r.depthTexture!==null&&(this.depthTexture=r.depthTexture.clone()),this.samples=r.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pu extends vs{constructor(r=null,a=1,h=1,p=1){super(null),this.isDataArrayTexture=!0,this.image={data:r,width:a,height:h,depth:p},this.magFilter=ue,this.minFilter=ue,this.wrapR=Xe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Kc extends Qo{constructor(r=1,a=1,h=1){super(r,a),this.isWebGLArrayRenderTarget=!0,this.depth=h,this.texture=new Pu(null,r,a,h),this.texture.isRenderTargetTexture=!0}}class yt extends vs{constructor(r=null,a=1,h=1,p=1){super(null),this.isData3DTexture=!0,this.image={data:r,width:a,height:h,depth:p},this.magFilter=ue,this.minFilter=ue,this.wrapR=Xe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Yt extends Qo{constructor(r=1,a=1,h=1){super(r,a),this.isWebGL3DRenderTarget=!0,this.depth=h,this.texture=new yt(null,r,a,h),this.texture.isRenderTargetTexture=!0}}class Gt extends Qo{constructor(r=1,a=1,h=1,p={}){super(r,a,p),this.isWebGLMultipleRenderTargets=!0;const w=this.texture;this.texture=[];for(let R=0;R<h;R++)this.texture[R]=w.clone(),this.texture[R].isRenderTargetTexture=!0}setSize(r,a,h=1){if(this.width!==r||this.height!==a||this.depth!==h){this.width=r,this.height=a,this.depth=h;for(let p=0,w=this.texture.length;p<w;p++)this.texture[p].image.width=r,this.texture[p].image.height=a,this.texture[p].image.depth=h;this.dispose()}return this.viewport.set(0,0,r,a),this.scissor.set(0,0,r,a),this}copy(r){this.dispose(),this.width=r.width,this.height=r.height,this.depth=r.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,r.depthTexture!==null&&(this.depthTexture=r.depthTexture.clone()),this.texture.length=0;for(let a=0,h=r.texture.length;a<h;a++)this.texture[a]=r.texture[a].clone(),this.texture[a].isRenderTargetTexture=!0;return this}}class Nn{constructor(r=0,a=0,h=0,p=1){this.isQuaternion=!0,this._x=r,this._y=a,this._z=h,this._w=p}static slerpFlat(r,a,h,p,w,R,L){let H=h[p+0],j=h[p+1],X=h[p+2],$=h[p+3];const Z=w[R+0],te=w[R+1],le=w[R+2],oe=w[R+3];if(L===0){r[a+0]=H,r[a+1]=j,r[a+2]=X,r[a+3]=$;return}if(L===1){r[a+0]=Z,r[a+1]=te,r[a+2]=le,r[a+3]=oe;return}if($!==oe||H!==Z||j!==te||X!==le){let se=1-L;const ve=H*Z+j*te+X*le+$*oe,De=ve>=0?1:-1,Ce=1-ve*ve;if(Ce>Number.EPSILON){const ze=Math.sqrt(Ce),tt=Math.atan2(ze,ve*De);se=Math.sin(se*tt)/ze,L=Math.sin(L*tt)/ze}const Le=L*De;if(H=H*se+Z*Le,j=j*se+te*Le,X=X*se+le*Le,$=$*se+oe*Le,se===1-L){const ze=1/Math.sqrt(H*H+j*j+X*X+$*$);H*=ze,j*=ze,X*=ze,$*=ze}}r[a]=H,r[a+1]=j,r[a+2]=X,r[a+3]=$}static multiplyQuaternionsFlat(r,a,h,p,w,R){const L=h[p],H=h[p+1],j=h[p+2],X=h[p+3],$=w[R],Z=w[R+1],te=w[R+2],le=w[R+3];return r[a]=L*le+X*$+H*te-j*Z,r[a+1]=H*le+X*Z+j*$-L*te,r[a+2]=j*le+X*te+L*Z-H*$,r[a+3]=X*le-L*$-H*Z-j*te,r}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get w(){return this._w}set w(r){this._w=r,this._onChangeCallback()}set(r,a,h,p){return this._x=r,this._y=a,this._z=h,this._w=p,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}setFromEuler(r,a){const h=r._x,p=r._y,w=r._z,R=r._order,L=Math.cos,H=Math.sin,j=L(h/2),X=L(p/2),$=L(w/2),Z=H(h/2),te=H(p/2),le=H(w/2);switch(R){case"XYZ":this._x=Z*X*$+j*te*le,this._y=j*te*$-Z*X*le,this._z=j*X*le+Z*te*$,this._w=j*X*$-Z*te*le;break;case"YXZ":this._x=Z*X*$+j*te*le,this._y=j*te*$-Z*X*le,this._z=j*X*le-Z*te*$,this._w=j*X*$+Z*te*le;break;case"ZXY":this._x=Z*X*$-j*te*le,this._y=j*te*$+Z*X*le,this._z=j*X*le+Z*te*$,this._w=j*X*$-Z*te*le;break;case"ZYX":this._x=Z*X*$-j*te*le,this._y=j*te*$+Z*X*le,this._z=j*X*le-Z*te*$,this._w=j*X*$+Z*te*le;break;case"YZX":this._x=Z*X*$+j*te*le,this._y=j*te*$+Z*X*le,this._z=j*X*le-Z*te*$,this._w=j*X*$-Z*te*le;break;case"XZY":this._x=Z*X*$-j*te*le,this._y=j*te*$-Z*X*le,this._z=j*X*le+Z*te*$,this._w=j*X*$+Z*te*le;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+R)}return a!==!1&&this._onChangeCallback(),this}setFromAxisAngle(r,a){const h=a/2,p=Math.sin(h);return this._x=r.x*p,this._y=r.y*p,this._z=r.z*p,this._w=Math.cos(h),this._onChangeCallback(),this}setFromRotationMatrix(r){const a=r.elements,h=a[0],p=a[4],w=a[8],R=a[1],L=a[5],H=a[9],j=a[2],X=a[6],$=a[10],Z=h+L+$;if(Z>0){const te=.5/Math.sqrt(Z+1);this._w=.25/te,this._x=(X-H)*te,this._y=(w-j)*te,this._z=(R-p)*te}else if(h>L&&h>$){const te=2*Math.sqrt(1+h-L-$);this._w=(X-H)/te,this._x=.25*te,this._y=(p+R)/te,this._z=(w+j)/te}else if(L>$){const te=2*Math.sqrt(1+L-h-$);this._w=(w-j)/te,this._x=(p+R)/te,this._y=.25*te,this._z=(H+X)/te}else{const te=2*Math.sqrt(1+$-h-L);this._w=(R-p)/te,this._x=(w+j)/te,this._y=(H+X)/te,this._z=.25*te}return this._onChangeCallback(),this}setFromUnitVectors(r,a){let h=r.dot(a)+1;return h<Number.EPSILON?(h=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=h):(this._x=0,this._y=-r.z,this._z=r.y,this._w=h)):(this._x=r.y*a.z-r.z*a.y,this._y=r.z*a.x-r.x*a.z,this._z=r.x*a.y-r.y*a.x,this._w=h),this.normalize()}angleTo(r){return 2*Math.acos(Math.abs(Kr(this.dot(r),-1,1)))}rotateTowards(r,a){const h=this.angleTo(r);if(h===0)return this;const p=Math.min(1,a/h);return this.slerp(r,p),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let r=this.length();return r===0?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}multiply(r){return this.multiplyQuaternions(this,r)}premultiply(r){return this.multiplyQuaternions(r,this)}multiplyQuaternions(r,a){const h=r._x,p=r._y,w=r._z,R=r._w,L=a._x,H=a._y,j=a._z,X=a._w;return this._x=h*X+R*L+p*j-w*H,this._y=p*X+R*H+w*L-h*j,this._z=w*X+R*j+h*H-p*L,this._w=R*X-h*L-p*H-w*j,this._onChangeCallback(),this}slerp(r,a){if(a===0)return this;if(a===1)return this.copy(r);const h=this._x,p=this._y,w=this._z,R=this._w;let L=R*r._w+h*r._x+p*r._y+w*r._z;if(L<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,L=-L):this.copy(r),L>=1)return this._w=R,this._x=h,this._y=p,this._z=w,this;const H=1-L*L;if(H<=Number.EPSILON){const te=1-a;return this._w=te*R+a*this._w,this._x=te*h+a*this._x,this._y=te*p+a*this._y,this._z=te*w+a*this._z,this.normalize(),this._onChangeCallback(),this}const j=Math.sqrt(H),X=Math.atan2(j,L),$=Math.sin((1-a)*X)/j,Z=Math.sin(a*X)/j;return this._w=R*$+this._w*Z,this._x=h*$+this._x*Z,this._y=p*$+this._y*Z,this._z=w*$+this._z*Z,this._onChangeCallback(),this}slerpQuaternions(r,a,h){return this.copy(r).slerp(a,h)}random(){const r=Math.random(),a=Math.sqrt(1-r),h=Math.sqrt(r),p=2*Math.PI*Math.random(),w=2*Math.PI*Math.random();return this.set(a*Math.cos(p),h*Math.sin(w),h*Math.cos(w),a*Math.sin(p))}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}fromArray(r,a=0){return this._x=r[a],this._y=r[a+1],this._z=r[a+2],this._w=r[a+3],this._onChangeCallback(),this}toArray(r=[],a=0){return r[a]=this._x,r[a+1]=this._y,r[a+2]=this._z,r[a+3]=this._w,r}fromBufferAttribute(r,a){return this._x=r.getX(a),this._y=r.getY(a),this._z=r.getZ(a),this._w=r.getW(a),this}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class je{constructor(r=0,a=0,h=0){je.prototype.isVector3=!0,this.x=r,this.y=a,this.z=h}set(r,a,h){return h===void 0&&(h=this.z),this.x=r,this.y=a,this.z=h,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setComponent(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}add(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this}addVectors(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this}addScaledVector(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a,this}sub(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this}subVectors(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this.z=r.z-a.z,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this}multiplyVectors(r,a){return this.x=r.x*a.x,this.y=r.y*a.y,this.z=r.z*a.z,this}applyEuler(r){return this.applyQuaternion(ws.setFromEuler(r))}applyAxisAngle(r,a){return this.applyQuaternion(ws.setFromAxisAngle(r,a))}applyMatrix3(r){const a=this.x,h=this.y,p=this.z,w=r.elements;return this.x=w[0]*a+w[3]*h+w[6]*p,this.y=w[1]*a+w[4]*h+w[7]*p,this.z=w[2]*a+w[5]*h+w[8]*p,this}applyNormalMatrix(r){return this.applyMatrix3(r).normalize()}applyMatrix4(r){const a=this.x,h=this.y,p=this.z,w=r.elements,R=1/(w[3]*a+w[7]*h+w[11]*p+w[15]);return this.x=(w[0]*a+w[4]*h+w[8]*p+w[12])*R,this.y=(w[1]*a+w[5]*h+w[9]*p+w[13])*R,this.z=(w[2]*a+w[6]*h+w[10]*p+w[14])*R,this}applyQuaternion(r){const a=this.x,h=this.y,p=this.z,w=r.x,R=r.y,L=r.z,H=r.w,j=H*a+R*p-L*h,X=H*h+L*a-w*p,$=H*p+w*h-R*a,Z=-w*a-R*h-L*p;return this.x=j*H+Z*-w+X*-L-$*-R,this.y=X*H+Z*-R+$*-w-j*-L,this.z=$*H+Z*-L+j*-R-X*-w,this}project(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}unproject(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}transformDirection(r){const a=this.x,h=this.y,p=this.z,w=r.elements;return this.x=w[0]*a+w[4]*h+w[8]*p,this.y=w[1]*a+w[5]*h+w[9]*p,this.z=w[2]*a+w[6]*h+w[10]*p,this.normalize()}divide(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}divideScalar(r){return this.multiplyScalar(1/r)}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}clamp(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this.z=Math.max(r.z,Math.min(a.z,this.z)),this}clampScalar(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this.z=Math.max(r,Math.min(a,this.z)),this}clampLength(r,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(r,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this.z+=(r.z-this.z)*a,this}lerpVectors(r,a,h){return this.x=r.x+(a.x-r.x)*h,this.y=r.y+(a.y-r.y)*h,this.z=r.z+(a.z-r.z)*h,this}cross(r){return this.crossVectors(this,r)}crossVectors(r,a){const h=r.x,p=r.y,w=r.z,R=a.x,L=a.y,H=a.z;return this.x=p*H-w*L,this.y=w*R-h*H,this.z=h*L-p*R,this}projectOnVector(r){const a=r.lengthSq();if(a===0)return this.set(0,0,0);const h=r.dot(this)/a;return this.copy(r).multiplyScalar(h)}projectOnPlane(r){return Lr.copy(this).projectOnVector(r),this.sub(Lr)}reflect(r){return this.sub(Lr.copy(r).multiplyScalar(2*this.dot(r)))}angleTo(r){const a=Math.sqrt(this.lengthSq()*r.lengthSq());if(a===0)return Math.PI/2;const h=this.dot(r)/a;return Math.acos(Kr(h,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const a=this.x-r.x,h=this.y-r.y,p=this.z-r.z;return a*a+h*h+p*p}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}setFromSpherical(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}setFromSphericalCoords(r,a,h){const p=Math.sin(a)*r;return this.x=p*Math.sin(h),this.y=Math.cos(a)*r,this.z=p*Math.cos(h),this}setFromCylindrical(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}setFromCylindricalCoords(r,a,h){return this.x=r*Math.sin(a),this.y=h,this.z=r*Math.cos(a),this}setFromMatrixPosition(r){const a=r.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(r){const a=this.setFromMatrixColumn(r,0).length(),h=this.setFromMatrixColumn(r,1).length(),p=this.setFromMatrixColumn(r,2).length();return this.x=a,this.y=h,this.z=p,this}setFromMatrixColumn(r,a){return this.fromArray(r.elements,a*4)}setFromMatrix3Column(r,a){return this.fromArray(r.elements,a*3)}setFromEuler(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}fromArray(r,a=0){return this.x=r[a],this.y=r[a+1],this.z=r[a+2],this}toArray(r=[],a=0){return r[a]=this.x,r[a+1]=this.y,r[a+2]=this.z,r}fromBufferAttribute(r,a){return this.x=r.getX(a),this.y=r.getY(a),this.z=r.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const r=(Math.random()-.5)*2,a=Math.random()*Math.PI*2,h=Math.sqrt(1-r**2);return this.x=h*Math.cos(a),this.y=h*Math.sin(a),this.z=r,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Lr=new je,ws=new Nn;class Br{constructor(r=new je(1/0,1/0,1/0),a=new je(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=r,this.max=a}set(r,a){return this.min.copy(r),this.max.copy(a),this}setFromArray(r){let a=1/0,h=1/0,p=1/0,w=-1/0,R=-1/0,L=-1/0;for(let H=0,j=r.length;H<j;H+=3){const X=r[H],$=r[H+1],Z=r[H+2];X<a&&(a=X),$<h&&(h=$),Z<p&&(p=Z),X>w&&(w=X),$>R&&(R=$),Z>L&&(L=Z)}return this.min.set(a,h,p),this.max.set(w,R,L),this}setFromBufferAttribute(r){let a=1/0,h=1/0,p=1/0,w=-1/0,R=-1/0,L=-1/0;for(let H=0,j=r.count;H<j;H++){const X=r.getX(H),$=r.getY(H),Z=r.getZ(H);X<a&&(a=X),$<h&&(h=$),Z<p&&(p=Z),X>w&&(w=X),$>R&&(R=$),Z>L&&(L=Z)}return this.min.set(a,h,p),this.max.set(w,R,L),this}setFromPoints(r){this.makeEmpty();for(let a=0,h=r.length;a<h;a++)this.expandByPoint(r[a]);return this}setFromCenterAndSize(r,a){const h=lc.copy(a).multiplyScalar(.5);return this.min.copy(r).sub(h),this.max.copy(r).add(h),this}setFromObject(r,a=!1){return this.makeEmpty(),this.expandByObject(r,a)}clone(){return new this.constructor().copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}expandByObject(r,a=!1){r.updateWorldMatrix(!1,!1);const h=r.geometry;if(h!==void 0)if(a&&h.attributes!=null&&h.attributes.position!==void 0){const w=h.attributes.position;for(let R=0,L=w.count;R<L;R++)lc.fromBufferAttribute(w,R).applyMatrix4(r.matrixWorld),this.expandByPoint(lc)}else h.boundingBox===null&&h.computeBoundingBox(),vo.copy(h.boundingBox),vo.applyMatrix4(r.matrixWorld),this.union(vo);const p=r.children;for(let w=0,R=p.length;w<R;w++)this.expandByObject(p[w],a);return this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z}getParameter(r,a){return a.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)}intersectsSphere(r){return this.clampPoint(r.center,lc),lc.distanceToSquared(r.center)<=r.radius*r.radius}intersectsPlane(r){let a,h;return r.normal.x>0?(a=r.normal.x*this.min.x,h=r.normal.x*this.max.x):(a=r.normal.x*this.max.x,h=r.normal.x*this.min.x),r.normal.y>0?(a+=r.normal.y*this.min.y,h+=r.normal.y*this.max.y):(a+=r.normal.y*this.max.y,h+=r.normal.y*this.min.y),r.normal.z>0?(a+=r.normal.z*this.min.z,h+=r.normal.z*this.max.z):(a+=r.normal.z*this.max.z,h+=r.normal.z*this.min.z),a<=-r.constant&&h>=-r.constant}intersectsTriangle(r){if(this.isEmpty())return!1;this.getCenter(Yc),sl.subVectors(this.max,Yc),rl.subVectors(r.a,Yc),Xc.subVectors(r.b,Yc),ha.subVectors(r.c,Yc),da.subVectors(Xc,rl),fa.subVectors(ha,Xc),br.subVectors(rl,ha);let a=[0,-da.z,da.y,0,-fa.z,fa.y,0,-br.z,br.y,da.z,0,-da.x,fa.z,0,-fa.x,br.z,0,-br.x,-da.y,da.x,0,-fa.y,fa.x,0,-br.y,br.x,0];return!zh(a,rl,Xc,ha,sl)||(a=[1,0,0,0,1,0,0,0,1],!zh(a,rl,Xc,ha,sl))?!1:(Il.crossVectors(da,fa),a=[Il.x,Il.y,Il.z],zh(a,rl,Xc,ha,sl))}clampPoint(r,a){return a.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return lc.copy(r).clamp(this.min,this.max).sub(r).length()}getBoundingSphere(r){return this.getCenter(r.center),r.radius=this.getSize(lc).length()*.5,r}intersect(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}applyMatrix4(r){return this.isEmpty()?this:(ua[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),ua[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),ua[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),ua[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),ua[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),ua[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),ua[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),ua[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(ua),this)}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}const ua=[new je,new je,new je,new je,new je,new je,new je,new je],lc=new je,vo=new Br,rl=new je,Xc=new je,ha=new je,da=new je,fa=new je,br=new je,Yc=new je,sl=new je,Il=new je,os=new je;function zh(B,r,a,h,p){for(let w=0,R=B.length-3;w<=R;w+=3){os.fromArray(B,w);const L=p.x*Math.abs(os.x)+p.y*Math.abs(os.y)+p.z*Math.abs(os.z),H=r.dot(os),j=a.dot(os),X=h.dot(os);if(Math.max(-Math.max(H,j,X),Math.min(H,j,X))>L)return!1}return!0}const jp=new Br,pa=new je,ka=new je;class Wo{constructor(r=new je,a=-1){this.center=r,this.radius=a}set(r,a){return this.center.copy(r),this.radius=a,this}setFromPoints(r,a){const h=this.center;a!==void 0?h.copy(a):jp.setFromPoints(r).getCenter(h);let p=0;for(let w=0,R=r.length;w<R;w++)p=Math.max(p,h.distanceToSquared(r[w]));return this.radius=Math.sqrt(p),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const a=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=a*a}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,a){const h=this.center.distanceToSquared(r);return a.copy(r),h>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){if(this.isEmpty())return this.center.copy(r),this.radius=0,this;pa.subVectors(r,this.center);const a=pa.lengthSq();if(a>this.radius*this.radius){const h=Math.sqrt(a),p=(h-this.radius)*.5;this.center.addScaledVector(pa,p/h),this.radius+=p}return this}union(r){return r.isEmpty()?this:this.isEmpty()?(this.copy(r),this):(this.center.equals(r.center)===!0?this.radius=Math.max(this.radius,r.radius):(ka.subVectors(r.center,this.center).setLength(r.radius),this.expandByPoint(pa.copy(r.center).add(ka)),this.expandByPoint(pa.copy(r.center).sub(ka))),this)}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Na=new je,qc=new je,ti=new je,Oi=new je,lr=new je,Cs=new je,hr=new je;class ks{constructor(r=new je,a=new je(0,0,-1)){this.origin=r,this.direction=a}set(r,a){return this.origin.copy(r),this.direction.copy(a),this}copy(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this}at(r,a){return a.copy(this.direction).multiplyScalar(r).add(this.origin)}lookAt(r){return this.direction.copy(r).sub(this.origin).normalize(),this}recast(r){return this.origin.copy(this.at(r,Na)),this}closestPointToPoint(r,a){a.subVectors(r,this.origin);const h=a.dot(this.direction);return h<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(h).add(this.origin)}distanceToPoint(r){return Math.sqrt(this.distanceSqToPoint(r))}distanceSqToPoint(r){const a=Na.subVectors(r,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(r):(Na.copy(this.direction).multiplyScalar(a).add(this.origin),Na.distanceToSquared(r))}distanceSqToSegment(r,a,h,p){qc.copy(r).add(a).multiplyScalar(.5),ti.copy(a).sub(r).normalize(),Oi.copy(this.origin).sub(qc);const w=r.distanceTo(a)*.5,R=-this.direction.dot(ti),L=Oi.dot(this.direction),H=-Oi.dot(ti),j=Oi.lengthSq(),X=Math.abs(1-R*R);let $,Z,te,le;if(X>0)if($=R*H-L,Z=R*L-H,le=w*X,$>=0)if(Z>=-le)if(Z<=le){const oe=1/X;$*=oe,Z*=oe,te=$*($+R*Z+2*L)+Z*(R*$+Z+2*H)+j}else Z=w,$=Math.max(0,-(R*Z+L)),te=-$*$+Z*(Z+2*H)+j;else Z=-w,$=Math.max(0,-(R*Z+L)),te=-$*$+Z*(Z+2*H)+j;else Z<=-le?($=Math.max(0,-(-R*w+L)),Z=$>0?-w:Math.min(Math.max(-w,-H),w),te=-$*$+Z*(Z+2*H)+j):Z<=le?($=0,Z=Math.min(Math.max(-w,-H),w),te=Z*(Z+2*H)+j):($=Math.max(0,-(R*w+L)),Z=$>0?w:Math.min(Math.max(-w,-H),w),te=-$*$+Z*(Z+2*H)+j);else Z=R>0?-w:w,$=Math.max(0,-(R*Z+L)),te=-$*$+Z*(Z+2*H)+j;return h&&h.copy(this.direction).multiplyScalar($).add(this.origin),p&&p.copy(ti).multiplyScalar(Z).add(qc),te}intersectSphere(r,a){Na.subVectors(r.center,this.origin);const h=Na.dot(this.direction),p=Na.dot(Na)-h*h,w=r.radius*r.radius;if(p>w)return null;const R=Math.sqrt(w-p),L=h-R,H=h+R;return L<0&&H<0?null:L<0?this.at(H,a):this.at(L,a)}intersectsSphere(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius}distanceToPlane(r){const a=r.normal.dot(this.direction);if(a===0)return r.distanceToPoint(this.origin)===0?0:null;const h=-(this.origin.dot(r.normal)+r.constant)/a;return h>=0?h:null}intersectPlane(r,a){const h=this.distanceToPlane(r);return h===null?null:this.at(h,a)}intersectsPlane(r){const a=r.distanceToPoint(this.origin);return a===0||r.normal.dot(this.direction)*a<0}intersectBox(r,a){let h,p,w,R,L,H;const j=1/this.direction.x,X=1/this.direction.y,$=1/this.direction.z,Z=this.origin;return j>=0?(h=(r.min.x-Z.x)*j,p=(r.max.x-Z.x)*j):(h=(r.max.x-Z.x)*j,p=(r.min.x-Z.x)*j),X>=0?(w=(r.min.y-Z.y)*X,R=(r.max.y-Z.y)*X):(w=(r.max.y-Z.y)*X,R=(r.min.y-Z.y)*X),h>R||w>p||((w>h||isNaN(h))&&(h=w),(R<p||isNaN(p))&&(p=R),$>=0?(L=(r.min.z-Z.z)*$,H=(r.max.z-Z.z)*$):(L=(r.max.z-Z.z)*$,H=(r.min.z-Z.z)*$),h>H||L>p)||((L>h||h!==h)&&(h=L),(H<p||p!==p)&&(p=H),p<0)?null:this.at(h>=0?h:p,a)}intersectsBox(r){return this.intersectBox(r,Na)!==null}intersectTriangle(r,a,h,p,w){lr.subVectors(a,r),Cs.subVectors(h,r),hr.crossVectors(lr,Cs);let R=this.direction.dot(hr),L;if(R>0){if(p)return null;L=1}else if(R<0)L=-1,R=-R;else return null;Oi.subVectors(this.origin,r);const H=L*this.direction.dot(Cs.crossVectors(Oi,Cs));if(H<0)return null;const j=L*this.direction.dot(lr.cross(Oi));if(j<0||H+j>R)return null;const X=-L*Oi.dot(hr);return X<0?null:this.at(X/R,w)}applyMatrix4(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this}equals(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class oi{constructor(){oi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(r,a,h,p,w,R,L,H,j,X,$,Z,te,le,oe,se){const ve=this.elements;return ve[0]=r,ve[4]=a,ve[8]=h,ve[12]=p,ve[1]=w,ve[5]=R,ve[9]=L,ve[13]=H,ve[2]=j,ve[6]=X,ve[10]=$,ve[14]=Z,ve[3]=te,ve[7]=le,ve[11]=oe,ve[15]=se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new oi().fromArray(this.elements)}copy(r){const a=this.elements,h=r.elements;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],this}copyPosition(r){const a=this.elements,h=r.elements;return a[12]=h[12],a[13]=h[13],a[14]=h[14],this}setFromMatrix3(r){const a=r.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(r,a,h){return r.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this}makeBasis(r,a,h){return this.set(r.x,a.x,h.x,0,r.y,a.y,h.y,0,r.z,a.z,h.z,0,0,0,0,1),this}extractRotation(r){const a=this.elements,h=r.elements,p=1/Ko.setFromMatrixColumn(r,0).length(),w=1/Ko.setFromMatrixColumn(r,1).length(),R=1/Ko.setFromMatrixColumn(r,2).length();return a[0]=h[0]*p,a[1]=h[1]*p,a[2]=h[2]*p,a[3]=0,a[4]=h[4]*w,a[5]=h[5]*w,a[6]=h[6]*w,a[7]=0,a[8]=h[8]*R,a[9]=h[9]*R,a[10]=h[10]*R,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(r){const a=this.elements,h=r.x,p=r.y,w=r.z,R=Math.cos(h),L=Math.sin(h),H=Math.cos(p),j=Math.sin(p),X=Math.cos(w),$=Math.sin(w);if(r.order==="XYZ"){const Z=R*X,te=R*$,le=L*X,oe=L*$;a[0]=H*X,a[4]=-H*$,a[8]=j,a[1]=te+le*j,a[5]=Z-oe*j,a[9]=-L*H,a[2]=oe-Z*j,a[6]=le+te*j,a[10]=R*H}else if(r.order==="YXZ"){const Z=H*X,te=H*$,le=j*X,oe=j*$;a[0]=Z+oe*L,a[4]=le*L-te,a[8]=R*j,a[1]=R*$,a[5]=R*X,a[9]=-L,a[2]=te*L-le,a[6]=oe+Z*L,a[10]=R*H}else if(r.order==="ZXY"){const Z=H*X,te=H*$,le=j*X,oe=j*$;a[0]=Z-oe*L,a[4]=-R*$,a[8]=le+te*L,a[1]=te+le*L,a[5]=R*X,a[9]=oe-Z*L,a[2]=-R*j,a[6]=L,a[10]=R*H}else if(r.order==="ZYX"){const Z=R*X,te=R*$,le=L*X,oe=L*$;a[0]=H*X,a[4]=le*j-te,a[8]=Z*j+oe,a[1]=H*$,a[5]=oe*j+Z,a[9]=te*j-le,a[2]=-j,a[6]=L*H,a[10]=R*H}else if(r.order==="YZX"){const Z=R*H,te=R*j,le=L*H,oe=L*j;a[0]=H*X,a[4]=oe-Z*$,a[8]=le*$+te,a[1]=$,a[5]=R*X,a[9]=-L*X,a[2]=-j*X,a[6]=te*$+le,a[10]=Z-oe*$}else if(r.order==="XZY"){const Z=R*H,te=R*j,le=L*H,oe=L*j;a[0]=H*X,a[4]=-$,a[8]=j*X,a[1]=Z*$+oe,a[5]=R*X,a[9]=te*$-le,a[2]=le*$-te,a[6]=L*X,a[10]=oe*$+Z}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(r){return this.compose(Hh,r,Rl)}lookAt(r,a,h){const p=this.elements;return Wi.subVectors(r,a),Wi.lengthSq()===0&&(Wi.z=1),Wi.normalize(),$s.crossVectors(h,Wi),$s.lengthSq()===0&&(Math.abs(h.z)===1?Wi.x+=1e-4:Wi.z+=1e-4,Wi.normalize(),$s.crossVectors(h,Wi)),$s.normalize(),ro.crossVectors(Wi,$s),p[0]=$s.x,p[4]=ro.x,p[8]=Wi.x,p[1]=$s.y,p[5]=ro.y,p[9]=Wi.y,p[2]=$s.z,p[6]=ro.z,p[10]=Wi.z,this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,a){const h=r.elements,p=a.elements,w=this.elements,R=h[0],L=h[4],H=h[8],j=h[12],X=h[1],$=h[5],Z=h[9],te=h[13],le=h[2],oe=h[6],se=h[10],ve=h[14],De=h[3],Ce=h[7],Le=h[11],ze=h[15],tt=p[0],ft=p[4],Oe=p[8],ot=p[12],ut=p[1],Tt=p[5],jt=p[9],Lt=p[13],bt=p[2],Ut=p[6],fn=p[10],xn=p[14],hn=p[3],Dn=p[7],In=p[11],fi=p[15];return w[0]=R*tt+L*ut+H*bt+j*hn,w[4]=R*ft+L*Tt+H*Ut+j*Dn,w[8]=R*Oe+L*jt+H*fn+j*In,w[12]=R*ot+L*Lt+H*xn+j*fi,w[1]=X*tt+$*ut+Z*bt+te*hn,w[5]=X*ft+$*Tt+Z*Ut+te*Dn,w[9]=X*Oe+$*jt+Z*fn+te*In,w[13]=X*ot+$*Lt+Z*xn+te*fi,w[2]=le*tt+oe*ut+se*bt+ve*hn,w[6]=le*ft+oe*Tt+se*Ut+ve*Dn,w[10]=le*Oe+oe*jt+se*fn+ve*In,w[14]=le*ot+oe*Lt+se*xn+ve*fi,w[3]=De*tt+Ce*ut+Le*bt+ze*hn,w[7]=De*ft+Ce*Tt+Le*Ut+ze*Dn,w[11]=De*Oe+Ce*jt+Le*fn+ze*In,w[15]=De*ot+Ce*Lt+Le*xn+ze*fi,this}multiplyScalar(r){const a=this.elements;return a[0]*=r,a[4]*=r,a[8]*=r,a[12]*=r,a[1]*=r,a[5]*=r,a[9]*=r,a[13]*=r,a[2]*=r,a[6]*=r,a[10]*=r,a[14]*=r,a[3]*=r,a[7]*=r,a[11]*=r,a[15]*=r,this}determinant(){const r=this.elements,a=r[0],h=r[4],p=r[8],w=r[12],R=r[1],L=r[5],H=r[9],j=r[13],X=r[2],$=r[6],Z=r[10],te=r[14],le=r[3],oe=r[7],se=r[11],ve=r[15];return le*(+w*H*$-p*j*$-w*L*Z+h*j*Z+p*L*te-h*H*te)+oe*(+a*H*te-a*j*Z+w*R*Z-p*R*te+p*j*X-w*H*X)+se*(+a*j*$-a*L*te-w*R*$+h*R*te+w*L*X-h*j*X)+ve*(-p*L*X-a*H*$+a*L*Z+p*R*$-h*R*Z+h*H*X)}transpose(){const r=this.elements;let a;return a=r[1],r[1]=r[4],r[4]=a,a=r[2],r[2]=r[8],r[8]=a,a=r[6],r[6]=r[9],r[9]=a,a=r[3],r[3]=r[12],r[12]=a,a=r[7],r[7]=r[13],r[13]=a,a=r[11],r[11]=r[14],r[14]=a,this}setPosition(r,a,h){const p=this.elements;return r.isVector3?(p[12]=r.x,p[13]=r.y,p[14]=r.z):(p[12]=r,p[13]=a,p[14]=h),this}invert(){const r=this.elements,a=r[0],h=r[1],p=r[2],w=r[3],R=r[4],L=r[5],H=r[6],j=r[7],X=r[8],$=r[9],Z=r[10],te=r[11],le=r[12],oe=r[13],se=r[14],ve=r[15],De=$*se*j-oe*Z*j+oe*H*te-L*se*te-$*H*ve+L*Z*ve,Ce=le*Z*j-X*se*j-le*H*te+R*se*te+X*H*ve-R*Z*ve,Le=X*oe*j-le*$*j+le*L*te-R*oe*te-X*L*ve+R*$*ve,ze=le*$*H-X*oe*H-le*L*Z+R*oe*Z+X*L*se-R*$*se,tt=a*De+h*Ce+p*Le+w*ze;if(tt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ft=1/tt;return r[0]=De*ft,r[1]=(oe*Z*w-$*se*w-oe*p*te+h*se*te+$*p*ve-h*Z*ve)*ft,r[2]=(L*se*w-oe*H*w+oe*p*j-h*se*j-L*p*ve+h*H*ve)*ft,r[3]=($*H*w-L*Z*w-$*p*j+h*Z*j+L*p*te-h*H*te)*ft,r[4]=Ce*ft,r[5]=(X*se*w-le*Z*w+le*p*te-a*se*te-X*p*ve+a*Z*ve)*ft,r[6]=(le*H*w-R*se*w-le*p*j+a*se*j+R*p*ve-a*H*ve)*ft,r[7]=(R*Z*w-X*H*w+X*p*j-a*Z*j-R*p*te+a*H*te)*ft,r[8]=Le*ft,r[9]=(le*$*w-X*oe*w-le*h*te+a*oe*te+X*h*ve-a*$*ve)*ft,r[10]=(R*oe*w-le*L*w+le*h*j-a*oe*j-R*h*ve+a*L*ve)*ft,r[11]=(X*L*w-R*$*w-X*h*j+a*$*j+R*h*te-a*L*te)*ft,r[12]=ze*ft,r[13]=(X*oe*p-le*$*p+le*h*Z-a*oe*Z-X*h*se+a*$*se)*ft,r[14]=(le*L*p-R*oe*p-le*h*H+a*oe*H+R*h*se-a*L*se)*ft,r[15]=(R*$*p-X*L*p+X*h*H-a*$*H-R*h*Z+a*L*Z)*ft,this}scale(r){const a=this.elements,h=r.x,p=r.y,w=r.z;return a[0]*=h,a[4]*=p,a[8]*=w,a[1]*=h,a[5]*=p,a[9]*=w,a[2]*=h,a[6]*=p,a[10]*=w,a[3]*=h,a[7]*=p,a[11]*=w,this}getMaxScaleOnAxis(){const r=this.elements,a=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],h=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],p=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return Math.sqrt(Math.max(a,h,p))}makeTranslation(r,a,h){return this.set(1,0,0,r,0,1,0,a,0,0,1,h,0,0,0,1),this}makeRotationX(r){const a=Math.cos(r),h=Math.sin(r);return this.set(1,0,0,0,0,a,-h,0,0,h,a,0,0,0,0,1),this}makeRotationY(r){const a=Math.cos(r),h=Math.sin(r);return this.set(a,0,h,0,0,1,0,0,-h,0,a,0,0,0,0,1),this}makeRotationZ(r){const a=Math.cos(r),h=Math.sin(r);return this.set(a,-h,0,0,h,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(r,a){const h=Math.cos(a),p=Math.sin(a),w=1-h,R=r.x,L=r.y,H=r.z,j=w*R,X=w*L;return this.set(j*R+h,j*L-p*H,j*H+p*L,0,j*L+p*H,X*L+h,X*H-p*R,0,j*H-p*L,X*H+p*R,w*H*H+h,0,0,0,0,1),this}makeScale(r,a,h){return this.set(r,0,0,0,0,a,0,0,0,0,h,0,0,0,0,1),this}makeShear(r,a,h,p,w,R){return this.set(1,h,w,0,r,1,R,0,a,p,1,0,0,0,0,1),this}compose(r,a,h){const p=this.elements,w=a._x,R=a._y,L=a._z,H=a._w,j=w+w,X=R+R,$=L+L,Z=w*j,te=w*X,le=w*$,oe=R*X,se=R*$,ve=L*$,De=H*j,Ce=H*X,Le=H*$,ze=h.x,tt=h.y,ft=h.z;return p[0]=(1-(oe+ve))*ze,p[1]=(te+Le)*ze,p[2]=(le-Ce)*ze,p[3]=0,p[4]=(te-Le)*tt,p[5]=(1-(Z+ve))*tt,p[6]=(se+De)*tt,p[7]=0,p[8]=(le+Ce)*ft,p[9]=(se-De)*ft,p[10]=(1-(Z+oe))*ft,p[11]=0,p[12]=r.x,p[13]=r.y,p[14]=r.z,p[15]=1,this}decompose(r,a,h){const p=this.elements;let w=Ko.set(p[0],p[1],p[2]).length();const R=Ko.set(p[4],p[5],p[6]).length(),L=Ko.set(p[8],p[9],p[10]).length();this.determinant()<0&&(w=-w),r.x=p[12],r.y=p[13],r.z=p[14],dr.copy(this);const j=1/w,X=1/R,$=1/L;return dr.elements[0]*=j,dr.elements[1]*=j,dr.elements[2]*=j,dr.elements[4]*=X,dr.elements[5]*=X,dr.elements[6]*=X,dr.elements[8]*=$,dr.elements[9]*=$,dr.elements[10]*=$,a.setFromRotationMatrix(dr),h.x=w,h.y=R,h.z=L,this}makePerspective(r,a,h,p,w,R){const L=this.elements,H=2*w/(a-r),j=2*w/(h-p),X=(a+r)/(a-r),$=(h+p)/(h-p),Z=-(R+w)/(R-w),te=-2*R*w/(R-w);return L[0]=H,L[4]=0,L[8]=X,L[12]=0,L[1]=0,L[5]=j,L[9]=$,L[13]=0,L[2]=0,L[6]=0,L[10]=Z,L[14]=te,L[3]=0,L[7]=0,L[11]=-1,L[15]=0,this}makeOrthographic(r,a,h,p,w,R){const L=this.elements,H=1/(a-r),j=1/(h-p),X=1/(R-w),$=(a+r)*H,Z=(h+p)*j,te=(R+w)*X;return L[0]=2*H,L[4]=0,L[8]=0,L[12]=-$,L[1]=0,L[5]=2*j,L[9]=0,L[13]=-Z,L[2]=0,L[6]=0,L[10]=-2*X,L[14]=-te,L[3]=0,L[7]=0,L[11]=0,L[15]=1,this}equals(r){const a=this.elements,h=r.elements;for(let p=0;p<16;p++)if(a[p]!==h[p])return!1;return!0}fromArray(r,a=0){for(let h=0;h<16;h++)this.elements[h]=r[h+a];return this}toArray(r=[],a=0){const h=this.elements;return r[a]=h[0],r[a+1]=h[1],r[a+2]=h[2],r[a+3]=h[3],r[a+4]=h[4],r[a+5]=h[5],r[a+6]=h[6],r[a+7]=h[7],r[a+8]=h[8],r[a+9]=h[9],r[a+10]=h[10],r[a+11]=h[11],r[a+12]=h[12],r[a+13]=h[13],r[a+14]=h[14],r[a+15]=h[15],r}}const Ko=new je,dr=new oi,Hh=new je(0,0,0),Rl=new je(1,1,1),$s=new je,ro=new je,Wi=new je,Ua=new oi,Ou=new Nn;class uo{constructor(r=0,a=0,h=0,p=uo.DefaultOrder){this.isEuler=!0,this._x=r,this._y=a,this._z=h,this._order=p}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,a,h,p=this._order){return this._x=r,this._y=a,this._z=h,this._order=p,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,a=this._order,h=!0){const p=r.elements,w=p[0],R=p[4],L=p[8],H=p[1],j=p[5],X=p[9],$=p[2],Z=p[6],te=p[10];switch(a){case"XYZ":this._y=Math.asin(Kr(L,-1,1)),Math.abs(L)<.9999999?(this._x=Math.atan2(-X,te),this._z=Math.atan2(-R,w)):(this._x=Math.atan2(Z,j),this._z=0);break;case"YXZ":this._x=Math.asin(-Kr(X,-1,1)),Math.abs(X)<.9999999?(this._y=Math.atan2(L,te),this._z=Math.atan2(H,j)):(this._y=Math.atan2(-$,w),this._z=0);break;case"ZXY":this._x=Math.asin(Kr(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-$,te),this._z=Math.atan2(-R,j)):(this._y=0,this._z=Math.atan2(H,w));break;case"ZYX":this._y=Math.asin(-Kr($,-1,1)),Math.abs($)<.9999999?(this._x=Math.atan2(Z,te),this._z=Math.atan2(H,w)):(this._x=0,this._z=Math.atan2(-R,j));break;case"YZX":this._z=Math.asin(Kr(H,-1,1)),Math.abs(H)<.9999999?(this._x=Math.atan2(-X,j),this._y=Math.atan2(-$,w)):(this._x=0,this._y=Math.atan2(L,te));break;case"XZY":this._z=Math.asin(-Kr(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(Z,j),this._y=Math.atan2(L,w)):(this._x=Math.atan2(-X,te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+a)}return this._order=a,h===!0&&this._onChangeCallback(),this}setFromQuaternion(r,a,h){return Ua.makeRotationFromQuaternion(r),this.setFromRotationMatrix(Ua,a,h)}setFromVector3(r,a=this._order){return this.set(r.x,r.y,r.z,a)}reorder(r){return Ou.setFromEuler(this),this.setFromQuaternion(Ou,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==void 0&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],a=0){return r[a]=this._x,r[a+1]=this._y,r[a+2]=this._z,r[a+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}uo.DefaultOrder="XYZ",uo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Fi{constructor(){this.mask=1}set(r){this.mask=(1<<r|0)>>>0}enable(r){this.mask|=1<<r|0}enableAll(){this.mask=-1}toggle(r){this.mask^=1<<r|0}disable(r){this.mask&=~(1<<r|0)}disableAll(){this.mask=0}test(r){return(this.mask&r.mask)!==0}isEnabled(r){return(this.mask&(1<<r|0))!==0}}let sr=0;const fr=new je,Nr=new Nn,Ms=new oi,ol=new je,al=new je,$c=new je,Vh=new Nn,Ll=new je(1,0,0),cc=new je(0,1,0),Jc=new je(0,0,1),jh={type:"added"},uc={type:"removed"};class Or extends Do{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sr++}),this.uuid=vr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Or.DefaultUp.clone();const r=new je,a=new uo,h=new Nn,p=new je(1,1,1);function w(){h.setFromEuler(a,!1)}function R(){a.setFromQuaternion(h,void 0,!1)}a._onChange(w),h._onChange(R),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:p},modelViewMatrix:{value:new oi},normalMatrix:{value:new Fs}}),this.matrix=new oi,this.matrixWorld=new oi,this.matrixAutoUpdate=Or.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Or.DefaultMatrixWorldAutoUpdate,this.layers=new Fi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,a){this.quaternion.setFromAxisAngle(r,a)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,a){return Nr.setFromAxisAngle(r,a),this.quaternion.multiply(Nr),this}rotateOnWorldAxis(r,a){return Nr.setFromAxisAngle(r,a),this.quaternion.premultiply(Nr),this}rotateX(r){return this.rotateOnAxis(Ll,r)}rotateY(r){return this.rotateOnAxis(cc,r)}rotateZ(r){return this.rotateOnAxis(Jc,r)}translateOnAxis(r,a){return fr.copy(r).applyQuaternion(this.quaternion),this.position.add(fr.multiplyScalar(a)),this}translateX(r){return this.translateOnAxis(Ll,r)}translateY(r){return this.translateOnAxis(cc,r)}translateZ(r){return this.translateOnAxis(Jc,r)}localToWorld(r){return r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return r.applyMatrix4(Ms.copy(this.matrixWorld).invert())}lookAt(r,a,h){r.isVector3?ol.copy(r):ol.set(r,a,h);const p=this.parent;this.updateWorldMatrix(!0,!1),al.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ms.lookAt(al,ol,this.up):Ms.lookAt(ol,al,this.up),this.quaternion.setFromRotationMatrix(Ms),p&&(Ms.extractRotation(p.matrixWorld),Nr.setFromRotationMatrix(Ms),this.quaternion.premultiply(Nr.invert()))}add(r){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.parent!==null&&r.parent.remove(r),r.parent=this,this.children.push(r),r.dispatchEvent(jh)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.remove(arguments[h]);return this}const a=this.children.indexOf(r);return a!==-1&&(r.parent=null,this.children.splice(a,1),r.dispatchEvent(uc)),this}removeFromParent(){const r=this.parent;return r!==null&&r.remove(this),this}clear(){for(let r=0;r<this.children.length;r++){const a=this.children[r];a.parent=null,a.dispatchEvent(uc)}return this.children.length=0,this}attach(r){return this.updateWorldMatrix(!0,!1),Ms.copy(this.matrixWorld).invert(),r.parent!==null&&(r.parent.updateWorldMatrix(!0,!1),Ms.multiply(r.parent.matrixWorld)),r.applyMatrix4(Ms),this.add(r),r.updateWorldMatrix(!1,!0),this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,a){if(this[r]===a)return this;for(let h=0,p=this.children.length;h<p;h++){const R=this.children[h].getObjectByProperty(r,a);if(R!==void 0)return R}}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(al,r,$c),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(al,Vh,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return r.set(a[8],a[9],a[10]).normalize()}raycast(){}traverse(r){r(this);const a=this.children;for(let h=0,p=a.length;h<p;h++)a[h].traverse(r)}traverseVisible(r){if(this.visible===!1)return;r(this);const a=this.children;for(let h=0,p=a.length;h<p;h++)a[h].traverseVisible(r)}traverseAncestors(r){const a=this.parent;a!==null&&(r(a),a.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);const a=this.children;for(let h=0,p=a.length;h<p;h++){const w=a[h];(w.matrixWorldAutoUpdate===!0||r===!0)&&w.updateMatrixWorld(r)}}updateWorldMatrix(r,a){const h=this.parent;if(r===!0&&h!==null&&h.matrixWorldAutoUpdate===!0&&h.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),a===!0){const p=this.children;for(let w=0,R=p.length;w<R;w++){const L=p[w];L.matrixWorldAutoUpdate===!0&&L.updateWorldMatrix(!1,!0)}}}toJSON(r){const a=r===void 0||typeof r=="string",h={};a&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},h.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const p={};p.uuid=this.uuid,p.type=this.type,this.name!==""&&(p.name=this.name),this.castShadow===!0&&(p.castShadow=!0),this.receiveShadow===!0&&(p.receiveShadow=!0),this.visible===!1&&(p.visible=!1),this.frustumCulled===!1&&(p.frustumCulled=!1),this.renderOrder!==0&&(p.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(p.userData=this.userData),p.layers=this.layers.mask,p.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(p.matrixAutoUpdate=!1),this.isInstancedMesh&&(p.type="InstancedMesh",p.count=this.count,p.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(p.instanceColor=this.instanceColor.toJSON()));function w(L,H){return L[H.uuid]===void 0&&(L[H.uuid]=H.toJSON(r)),H.uuid}if(this.isScene)this.background&&(this.background.isColor?p.background=this.background.toJSON():this.background.isTexture&&(p.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(p.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){p.geometry=w(r.geometries,this.geometry);const L=this.geometry.parameters;if(L!==void 0&&L.shapes!==void 0){const H=L.shapes;if(Array.isArray(H))for(let j=0,X=H.length;j<X;j++){const $=H[j];w(r.shapes,$)}else w(r.shapes,H)}}if(this.isSkinnedMesh&&(p.bindMode=this.bindMode,p.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(w(r.skeletons,this.skeleton),p.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const L=[];for(let H=0,j=this.material.length;H<j;H++)L.push(w(r.materials,this.material[H]));p.material=L}else p.material=w(r.materials,this.material);if(this.children.length>0){p.children=[];for(let L=0;L<this.children.length;L++)p.children.push(this.children[L].toJSON(r).object)}if(this.animations.length>0){p.animations=[];for(let L=0;L<this.animations.length;L++){const H=this.animations[L];p.animations.push(w(r.animations,H))}}if(a){const L=R(r.geometries),H=R(r.materials),j=R(r.textures),X=R(r.images),$=R(r.shapes),Z=R(r.skeletons),te=R(r.animations),le=R(r.nodes);L.length>0&&(h.geometries=L),H.length>0&&(h.materials=H),j.length>0&&(h.textures=j),X.length>0&&(h.images=X),$.length>0&&(h.shapes=$),Z.length>0&&(h.skeletons=Z),te.length>0&&(h.animations=te),le.length>0&&(h.nodes=le)}return h.object=p,h;function R(L){const H=[];for(const j in L){const X=L[j];delete X.metadata,H.push(X)}return H}}clone(r){return new this.constructor().copy(this,r)}copy(r,a=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.userData=JSON.parse(JSON.stringify(r.userData)),a===!0)for(let h=0;h<r.children.length;h++){const p=r.children[h];this.add(p.clone())}return this}}Or.DefaultUp=new je(0,1,0),Or.DefaultMatrixAutoUpdate=!0,Or.DefaultMatrixWorldAutoUpdate=!0;const ma=new je,Ss=new je,ga=new je,Ga=new je,za=new je,Bl=new je,f0=new je,Ne=new je,Zc=new je,Qh=new je;class ys{constructor(r=new je,a=new je,h=new je){this.a=r,this.b=a,this.c=h}static getNormal(r,a,h,p){p.subVectors(h,a),ma.subVectors(r,a),p.cross(ma);const w=p.lengthSq();return w>0?p.multiplyScalar(1/Math.sqrt(w)):p.set(0,0,0)}static getBarycoord(r,a,h,p,w){ma.subVectors(p,a),Ss.subVectors(h,a),ga.subVectors(r,a);const R=ma.dot(ma),L=ma.dot(Ss),H=ma.dot(ga),j=Ss.dot(Ss),X=Ss.dot(ga),$=R*j-L*L;if($===0)return w.set(-2,-1,-1);const Z=1/$,te=(j*H-L*X)*Z,le=(R*X-L*H)*Z;return w.set(1-te-le,le,te)}static containsPoint(r,a,h,p){return this.getBarycoord(r,a,h,p,Ga),Ga.x>=0&&Ga.y>=0&&Ga.x+Ga.y<=1}static getUV(r,a,h,p,w,R,L,H){return this.getBarycoord(r,a,h,p,Ga),H.set(0,0),H.addScaledVector(w,Ga.x),H.addScaledVector(R,Ga.y),H.addScaledVector(L,Ga.z),H}static isFrontFacing(r,a,h,p){return ma.subVectors(h,a),Ss.subVectors(r,a),ma.cross(Ss).dot(p)<0}set(r,a,h){return this.a.copy(r),this.b.copy(a),this.c.copy(h),this}setFromPointsAndIndices(r,a,h,p){return this.a.copy(r[a]),this.b.copy(r[h]),this.c.copy(r[p]),this}setFromAttributeAndIndices(r,a,h,p){return this.a.fromBufferAttribute(r,a),this.b.fromBufferAttribute(r,h),this.c.fromBufferAttribute(r,p),this}clone(){return new this.constructor().copy(this)}copy(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this}getArea(){return ma.subVectors(this.c,this.b),Ss.subVectors(this.a,this.b),ma.cross(Ss).length()*.5}getMidpoint(r){return r.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(r){return ys.getNormal(this.a,this.b,this.c,r)}getPlane(r){return r.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(r,a){return ys.getBarycoord(r,this.a,this.b,this.c,a)}getUV(r,a,h,p,w){return ys.getUV(r,this.a,this.b,this.c,a,h,p,w)}containsPoint(r){return ys.containsPoint(r,this.a,this.b,this.c)}isFrontFacing(r){return ys.isFrontFacing(this.a,this.b,this.c,r)}intersectsBox(r){return r.intersectsTriangle(this)}closestPointToPoint(r,a){const h=this.a,p=this.b,w=this.c;let R,L;za.subVectors(p,h),Bl.subVectors(w,h),Ne.subVectors(r,h);const H=za.dot(Ne),j=Bl.dot(Ne);if(H<=0&&j<=0)return a.copy(h);Zc.subVectors(r,p);const X=za.dot(Zc),$=Bl.dot(Zc);if(X>=0&&$<=X)return a.copy(p);const Z=H*$-X*j;if(Z<=0&&H>=0&&X<=0)return R=H/(H-X),a.copy(h).addScaledVector(za,R);Qh.subVectors(r,w);const te=za.dot(Qh),le=Bl.dot(Qh);if(le>=0&&te<=le)return a.copy(w);const oe=te*j-H*le;if(oe<=0&&j>=0&&le<=0)return L=j/(j-le),a.copy(h).addScaledVector(Bl,L);const se=X*le-te*$;if(se<=0&&$-X>=0&&te-le>=0)return f0.subVectors(w,p),L=($-X)/($-X+(te-le)),a.copy(p).addScaledVector(f0,L);const ve=1/(se+oe+Z);return R=oe*ve,L=Z*ve,a.copy(h).addScaledVector(za,R).addScaledVector(Bl,L)}equals(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}let Mr=0;class yo extends Do{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mr++}),this.uuid=vr(),this.name="",this.type="Material",this.blending=k,this.side=M,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=he,this.blendDst=me,this.blendEquation=O,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=nt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ml,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=es,this.stencilZFail=es,this.stencilZPass=es,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(r){this._alphaTest>0!=r>0&&this.version++,this._alphaTest=r}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(r){if(r!==void 0)for(const a in r){const h=r[a];if(h===void 0){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}const p=this[a];if(p===void 0){console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.");continue}p&&p.isColor?p.set(h):p&&p.isVector3&&h&&h.isVector3?p.copy(h):this[a]=h}}toJSON(r){const a=r===void 0||typeof r=="string";a&&(r={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};h.uuid=this.uuid,h.type=this.type,this.name!==""&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),this.roughness!==void 0&&(h.roughness=this.roughness),this.metalness!==void 0&&(h.metalness=this.metalness),this.sheen!==void 0&&(h.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(h.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(h.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(h.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(h.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(h.shininess=this.shininess),this.clearcoat!==void 0&&(h.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(r).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(r).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(r).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(h.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(h.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(h.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(h.iridescenceMap=this.iridescenceMap.toJSON(r).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(h.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(r).uuid),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(r).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(r).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(r).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(r).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(r).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(r).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(r).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(r).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(r).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(r).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(r).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(r).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(h.specularIntensityMap=this.specularIntensityMap.toJSON(r).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(h.specularColorMap=this.specularColorMap.toJSON(r).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(r).uuid,this.combine!==void 0&&(h.combine=this.combine)),this.envMapIntensity!==void 0&&(h.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(h.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(h.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(r).uuid),this.transmission!==void 0&&(h.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(h.transmissionMap=this.transmissionMap.toJSON(r).uuid),this.thickness!==void 0&&(h.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(h.thicknessMap=this.thicknessMap.toJSON(r).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(h.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(h.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(h.size=this.size),this.shadowSide!==null&&(h.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(h.sizeAttenuation=this.sizeAttenuation),this.blending!==k&&(h.blending=this.blending),this.side!==M&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),this.transparent===!0&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.colorWrite=this.colorWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(h.rotation=this.rotation),this.polygonOffset===!0&&(h.polygonOffset=!0),this.polygonOffsetFactor!==0&&(h.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(h.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(h.linewidth=this.linewidth),this.dashSize!==void 0&&(h.dashSize=this.dashSize),this.gapSize!==void 0&&(h.gapSize=this.gapSize),this.scale!==void 0&&(h.scale=this.scale),this.dithering===!0&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(h.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(h.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(h.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(h.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(h.flatShading=this.flatShading),this.visible===!1&&(h.visible=!1),this.toneMapped===!1&&(h.toneMapped=!1),this.fog===!1&&(h.fog=!1),JSON.stringify(this.userData)!=="{}"&&(h.userData=this.userData);function p(w){const R=[];for(const L in w){const H=w[L];delete H.metadata,R.push(H)}return R}if(a){const w=p(r.textures),R=p(r.images);w.length>0&&(h.textures=w),R.length>0&&(h.images=R)}return h}clone(){return new this.constructor().copy(this)}copy(r){this.name=r.name,this.blending=r.blending,this.side=r.side,this.vertexColors=r.vertexColors,this.opacity=r.opacity,this.transparent=r.transparent,this.blendSrc=r.blendSrc,this.blendDst=r.blendDst,this.blendEquation=r.blendEquation,this.blendSrcAlpha=r.blendSrcAlpha,this.blendDstAlpha=r.blendDstAlpha,this.blendEquationAlpha=r.blendEquationAlpha,this.depthFunc=r.depthFunc,this.depthTest=r.depthTest,this.depthWrite=r.depthWrite,this.stencilWriteMask=r.stencilWriteMask,this.stencilFunc=r.stencilFunc,this.stencilRef=r.stencilRef,this.stencilFuncMask=r.stencilFuncMask,this.stencilFail=r.stencilFail,this.stencilZFail=r.stencilZFail,this.stencilZPass=r.stencilZPass,this.stencilWrite=r.stencilWrite;const a=r.clippingPlanes;let h=null;if(a!==null){const p=a.length;h=new Array(p);for(let w=0;w!==p;++w)h[w]=a[w].clone()}return this.clippingPlanes=h,this.clipIntersection=r.clipIntersection,this.clipShadows=r.clipShadows,this.shadowSide=r.shadowSide,this.colorWrite=r.colorWrite,this.precision=r.precision,this.polygonOffset=r.polygonOffset,this.polygonOffsetFactor=r.polygonOffsetFactor,this.polygonOffsetUnits=r.polygonOffsetUnits,this.dithering=r.dithering,this.alphaTest=r.alphaTest,this.alphaToCoverage=r.alphaToCoverage,this.premultipliedAlpha=r.premultipliedAlpha,this.visible=r.visible,this.toneMapped=r.toneMapped,this.userData=JSON.parse(JSON.stringify(r.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(r){r===!0&&this.version++}}class eu extends yo{constructor(r){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.fog=r.fog,this}}const Hs=new je,Dl=new un;class ts{constructor(r,a,h){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=r,this.itemSize=a,this.count=r!==void 0?r.length/a:0,this.normalized=h===!0,this.usage=zc,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(r){r===!0&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this}copyAt(r,a,h){r*=this.itemSize,h*=a.itemSize;for(let p=0,w=this.itemSize;p<w;p++)this.array[r+p]=a.array[h+p];return this}copyArray(r){return this.array.set(r),this}applyMatrix3(r){if(this.itemSize===2)for(let a=0,h=this.count;a<h;a++)Dl.fromBufferAttribute(this,a),Dl.applyMatrix3(r),this.setXY(a,Dl.x,Dl.y);else if(this.itemSize===3)for(let a=0,h=this.count;a<h;a++)Hs.fromBufferAttribute(this,a),Hs.applyMatrix3(r),this.setXYZ(a,Hs.x,Hs.y,Hs.z);return this}applyMatrix4(r){for(let a=0,h=this.count;a<h;a++)Hs.fromBufferAttribute(this,a),Hs.applyMatrix4(r),this.setXYZ(a,Hs.x,Hs.y,Hs.z);return this}applyNormalMatrix(r){for(let a=0,h=this.count;a<h;a++)Hs.fromBufferAttribute(this,a),Hs.applyNormalMatrix(r),this.setXYZ(a,Hs.x,Hs.y,Hs.z);return this}transformDirection(r){for(let a=0,h=this.count;a<h;a++)Hs.fromBufferAttribute(this,a),Hs.transformDirection(r),this.setXYZ(a,Hs.x,Hs.y,Hs.z);return this}set(r,a=0){return this.array.set(r,a),this}getX(r){let a=this.array[r*this.itemSize];return this.normalized&&(a=il(a,this.array)),a}setX(r,a){return this.normalized&&(a=Xr(a,this.array)),this.array[r*this.itemSize]=a,this}getY(r){let a=this.array[r*this.itemSize+1];return this.normalized&&(a=il(a,this.array)),a}setY(r,a){return this.normalized&&(a=Xr(a,this.array)),this.array[r*this.itemSize+1]=a,this}getZ(r){let a=this.array[r*this.itemSize+2];return this.normalized&&(a=il(a,this.array)),a}setZ(r,a){return this.normalized&&(a=Xr(a,this.array)),this.array[r*this.itemSize+2]=a,this}getW(r){let a=this.array[r*this.itemSize+3];return this.normalized&&(a=il(a,this.array)),a}setW(r,a){return this.normalized&&(a=Xr(a,this.array)),this.array[r*this.itemSize+3]=a,this}setXY(r,a,h){return r*=this.itemSize,this.normalized&&(a=Xr(a,this.array),h=Xr(h,this.array)),this.array[r+0]=a,this.array[r+1]=h,this}setXYZ(r,a,h,p){return r*=this.itemSize,this.normalized&&(a=Xr(a,this.array),h=Xr(h,this.array),p=Xr(p,this.array)),this.array[r+0]=a,this.array[r+1]=h,this.array[r+2]=p,this}setXYZW(r,a,h,p,w){return r*=this.itemSize,this.normalized&&(a=Xr(a,this.array),h=Xr(h,this.array),p=Xr(p,this.array),w=Xr(w,this.array)),this.array[r+0]=a,this.array[r+1]=h,this.array[r+2]=p,this.array[r+3]=w,this}onUpload(r){return this.onUploadCallback=r,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const r={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(r.name=this.name),this.usage!==zc&&(r.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(r.updateRange=this.updateRange),r}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Cb extends ts{constructor(r,a,h){super(new Int8Array(r),a,h)}}class Mb extends ts{constructor(r,a,h){super(new Uint8Array(r),a,h)}}class Sb extends ts{constructor(r,a,h){super(new Uint8ClampedArray(r),a,h)}}class Tb extends ts{constructor(r,a,h){super(new Int16Array(r),a,h)}}class ll extends ts{constructor(r,a,h){super(new Uint16Array(r),a,h)}}class Ib extends ts{constructor(r,a,h){super(new Int32Array(r),a,h)}}class p0 extends ts{constructor(r,a,h){super(new Uint32Array(r),a,h)}}class Rb extends ts{constructor(r,a,h){super(new Uint16Array(r),a,h),this.isFloat16BufferAttribute=!0}}class yi extends ts{constructor(r,a,h){super(new Float32Array(r),a,h)}}class Lb extends ts{constructor(r,a,h){super(new Float64Array(r),a,h)}}let hc=0;const Ha=new oi,m0=new Or,Wh=new je,Aa=new Br,hf=new Br,fs=new je;class pr extends Do{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hc++}),this.uuid=vr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(r){return Array.isArray(r)?this.index=new(uf(r)?p0:ll)(r,1):this.index=r,this}getAttribute(r){return this.attributes[r]}setAttribute(r,a){return this.attributes[r]=a,this}deleteAttribute(r){return delete this.attributes[r],this}hasAttribute(r){return this.attributes[r]!==void 0}addGroup(r,a,h=0){this.groups.push({start:r,count:a,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(r,a){this.drawRange.start=r,this.drawRange.count=a}applyMatrix4(r){const a=this.attributes.position;a!==void 0&&(a.applyMatrix4(r),a.needsUpdate=!0);const h=this.attributes.normal;if(h!==void 0){const w=new Fs().getNormalMatrix(r);h.applyNormalMatrix(w),h.needsUpdate=!0}const p=this.attributes.tangent;return p!==void 0&&(p.transformDirection(r),p.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(r){return Ha.makeRotationFromQuaternion(r),this.applyMatrix4(Ha),this}rotateX(r){return Ha.makeRotationX(r),this.applyMatrix4(Ha),this}rotateY(r){return Ha.makeRotationY(r),this.applyMatrix4(Ha),this}rotateZ(r){return Ha.makeRotationZ(r),this.applyMatrix4(Ha),this}translate(r,a,h){return Ha.makeTranslation(r,a,h),this.applyMatrix4(Ha),this}scale(r,a,h){return Ha.makeScale(r,a,h),this.applyMatrix4(Ha),this}lookAt(r){return m0.lookAt(r),m0.updateMatrix(),this.applyMatrix4(m0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wh).negate(),this.translate(Wh.x,Wh.y,Wh.z),this}setFromPoints(r){const a=[];for(let h=0,p=r.length;h<p;h++){const w=r[h];a.push(w.x,w.y,w.z||0)}return this.setAttribute("position",new yi(a,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);const r=this.attributes.position,a=this.morphAttributes.position;if(r&&r.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new je(-1/0,-1/0,-1/0),new je(1/0,1/0,1/0));return}if(r!==void 0){if(this.boundingBox.setFromBufferAttribute(r),a)for(let h=0,p=a.length;h<p;h++){const w=a[h];Aa.setFromBufferAttribute(w),this.morphTargetsRelative?(fs.addVectors(this.boundingBox.min,Aa.min),this.boundingBox.expandByPoint(fs),fs.addVectors(this.boundingBox.max,Aa.max),this.boundingBox.expandByPoint(fs)):(this.boundingBox.expandByPoint(Aa.min),this.boundingBox.expandByPoint(Aa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Wo);const r=this.attributes.position,a=this.morphAttributes.position;if(r&&r.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new je,1/0);return}if(r){const h=this.boundingSphere.center;if(Aa.setFromBufferAttribute(r),a)for(let w=0,R=a.length;w<R;w++){const L=a[w];hf.setFromBufferAttribute(L),this.morphTargetsRelative?(fs.addVectors(Aa.min,hf.min),Aa.expandByPoint(fs),fs.addVectors(Aa.max,hf.max),Aa.expandByPoint(fs)):(Aa.expandByPoint(hf.min),Aa.expandByPoint(hf.max))}Aa.getCenter(h);let p=0;for(let w=0,R=r.count;w<R;w++)fs.fromBufferAttribute(r,w),p=Math.max(p,h.distanceToSquared(fs));if(a)for(let w=0,R=a.length;w<R;w++){const L=a[w],H=this.morphTargetsRelative;for(let j=0,X=L.count;j<X;j++)fs.fromBufferAttribute(L,j),H&&(Wh.fromBufferAttribute(r,j),fs.add(Wh)),p=Math.max(p,h.distanceToSquared(fs))}this.boundingSphere.radius=Math.sqrt(p),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const r=this.index,a=this.attributes;if(r===null||a.position===void 0||a.normal===void 0||a.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const h=r.array,p=a.position.array,w=a.normal.array,R=a.uv.array,L=p.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ts(new Float32Array(4*L),4));const H=this.getAttribute("tangent").array,j=[],X=[];for(let ut=0;ut<L;ut++)j[ut]=new je,X[ut]=new je;const $=new je,Z=new je,te=new je,le=new un,oe=new un,se=new un,ve=new je,De=new je;function Ce(ut,Tt,jt){$.fromArray(p,ut*3),Z.fromArray(p,Tt*3),te.fromArray(p,jt*3),le.fromArray(R,ut*2),oe.fromArray(R,Tt*2),se.fromArray(R,jt*2),Z.sub($),te.sub($),oe.sub(le),se.sub(le);const Lt=1/(oe.x*se.y-se.x*oe.y);isFinite(Lt)&&(ve.copy(Z).multiplyScalar(se.y).addScaledVector(te,-oe.y).multiplyScalar(Lt),De.copy(te).multiplyScalar(oe.x).addScaledVector(Z,-se.x).multiplyScalar(Lt),j[ut].add(ve),j[Tt].add(ve),j[jt].add(ve),X[ut].add(De),X[Tt].add(De),X[jt].add(De))}let Le=this.groups;Le.length===0&&(Le=[{start:0,count:h.length}]);for(let ut=0,Tt=Le.length;ut<Tt;++ut){const jt=Le[ut],Lt=jt.start,bt=jt.count;for(let Ut=Lt,fn=Lt+bt;Ut<fn;Ut+=3)Ce(h[Ut+0],h[Ut+1],h[Ut+2])}const ze=new je,tt=new je,ft=new je,Oe=new je;function ot(ut){ft.fromArray(w,ut*3),Oe.copy(ft);const Tt=j[ut];ze.copy(Tt),ze.sub(ft.multiplyScalar(ft.dot(Tt))).normalize(),tt.crossVectors(Oe,Tt);const Lt=tt.dot(X[ut])<0?-1:1;H[ut*4]=ze.x,H[ut*4+1]=ze.y,H[ut*4+2]=ze.z,H[ut*4+3]=Lt}for(let ut=0,Tt=Le.length;ut<Tt;++ut){const jt=Le[ut],Lt=jt.start,bt=jt.count;for(let Ut=Lt,fn=Lt+bt;Ut<fn;Ut+=3)ot(h[Ut+0]),ot(h[Ut+1]),ot(h[Ut+2])}}computeVertexNormals(){const r=this.index,a=this.getAttribute("position");if(a!==void 0){let h=this.getAttribute("normal");if(h===void 0)h=new ts(new Float32Array(a.count*3),3),this.setAttribute("normal",h);else for(let Z=0,te=h.count;Z<te;Z++)h.setXYZ(Z,0,0,0);const p=new je,w=new je,R=new je,L=new je,H=new je,j=new je,X=new je,$=new je;if(r)for(let Z=0,te=r.count;Z<te;Z+=3){const le=r.getX(Z+0),oe=r.getX(Z+1),se=r.getX(Z+2);p.fromBufferAttribute(a,le),w.fromBufferAttribute(a,oe),R.fromBufferAttribute(a,se),X.subVectors(R,w),$.subVectors(p,w),X.cross($),L.fromBufferAttribute(h,le),H.fromBufferAttribute(h,oe),j.fromBufferAttribute(h,se),L.add(X),H.add(X),j.add(X),h.setXYZ(le,L.x,L.y,L.z),h.setXYZ(oe,H.x,H.y,H.z),h.setXYZ(se,j.x,j.y,j.z)}else for(let Z=0,te=a.count;Z<te;Z+=3)p.fromBufferAttribute(a,Z+0),w.fromBufferAttribute(a,Z+1),R.fromBufferAttribute(a,Z+2),X.subVectors(R,w),$.subVectors(p,w),X.cross($),h.setXYZ(Z+0,X.x,X.y,X.z),h.setXYZ(Z+1,X.x,X.y,X.z),h.setXYZ(Z+2,X.x,X.y,X.z);this.normalizeNormals(),h.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const r=this.attributes.normal;for(let a=0,h=r.count;a<h;a++)fs.fromBufferAttribute(r,a),fs.normalize(),r.setXYZ(a,fs.x,fs.y,fs.z)}toNonIndexed(){function r(L,H){const j=L.array,X=L.itemSize,$=L.normalized,Z=new j.constructor(H.length*X);let te=0,le=0;for(let oe=0,se=H.length;oe<se;oe++){L.isInterleavedBufferAttribute?te=H[oe]*L.data.stride+L.offset:te=H[oe]*X;for(let ve=0;ve<X;ve++)Z[le++]=j[te++]}return new ts(Z,X,$)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const a=new pr,h=this.index.array,p=this.attributes;for(const L in p){const H=p[L],j=r(H,h);a.setAttribute(L,j)}const w=this.morphAttributes;for(const L in w){const H=[],j=w[L];for(let X=0,$=j.length;X<$;X++){const Z=j[X],te=r(Z,h);H.push(te)}a.morphAttributes[L]=H}a.morphTargetsRelative=this.morphTargetsRelative;const R=this.groups;for(let L=0,H=R.length;L<H;L++){const j=R[L];a.addGroup(j.start,j.count,j.materialIndex)}return a}toJSON(){const r={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),Object.keys(this.userData).length>0&&(r.userData=this.userData),this.parameters!==void 0){const H=this.parameters;for(const j in H)H[j]!==void 0&&(r[j]=H[j]);return r}r.data={attributes:{}};const a=this.index;a!==null&&(r.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const h=this.attributes;for(const H in h){const j=h[H];r.data.attributes[H]=j.toJSON(r.data)}const p={};let w=!1;for(const H in this.morphAttributes){const j=this.morphAttributes[H],X=[];for(let $=0,Z=j.length;$<Z;$++){const te=j[$];X.push(te.toJSON(r.data))}X.length>0&&(p[H]=X,w=!0)}w&&(r.data.morphAttributes=p,r.data.morphTargetsRelative=this.morphTargetsRelative);const R=this.groups;R.length>0&&(r.data.groups=JSON.parse(JSON.stringify(R)));const L=this.boundingSphere;return L!==null&&(r.data.boundingSphere={center:L.center.toArray(),radius:L.radius}),r}clone(){return new this.constructor().copy(this)}copy(r){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=r.name;const h=r.index;h!==null&&this.setIndex(h.clone(a));const p=r.attributes;for(const j in p){const X=p[j];this.setAttribute(j,X.clone(a))}const w=r.morphAttributes;for(const j in w){const X=[],$=w[j];for(let Z=0,te=$.length;Z<te;Z++)X.push($[Z].clone(a));this.morphAttributes[j]=X}this.morphTargetsRelative=r.morphTargetsRelative;const R=r.groups;for(let j=0,X=R.length;j<X;j++){const $=R[j];this.addGroup($.start,$.count,$.materialIndex)}const L=r.boundingBox;L!==null&&(this.boundingBox=L.clone());const H=r.boundingSphere;return H!==null&&(this.boundingSphere=H.clone()),this.drawRange.start=r.drawRange.start,this.drawRange.count=r.drawRange.count,this.userData=r.userData,r.parameters!==void 0&&(this.parameters=Object.assign({},r.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ry=new oi,xo=new ks,g0=new Wo,tu=new je,nu=new je,iu=new je,A0=new je,Qp=new je,Wp=new je,Kp=new je,Xp=new je,Kh=new je,ru=new un,Fu=new un,Yp=new un,qp=new je,$p=new je;class as extends Or{constructor(r=new pr,a=new eu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=r,this.material=a,this.updateMorphTargets()}copy(r,a){return super.copy(r,a),r.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),r.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},r.morphTargetDictionary)),this.material=r.material,this.geometry=r.geometry,this}updateMorphTargets(){const a=this.geometry.morphAttributes,h=Object.keys(a);if(h.length>0){const p=a[h[0]];if(p!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,R=p.length;w<R;w++){const L=p[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=w}}}}raycast(r,a){const h=this.geometry,p=this.material,w=this.matrixWorld;if(p===void 0||(h.boundingSphere===null&&h.computeBoundingSphere(),g0.copy(h.boundingSphere),g0.applyMatrix4(w),r.ray.intersectsSphere(g0)===!1)||(Ry.copy(w).invert(),xo.copy(r.ray).applyMatrix4(Ry),h.boundingBox!==null&&xo.intersectsBox(h.boundingBox)===!1))return;let R;const L=h.index,H=h.attributes.position,j=h.morphAttributes.position,X=h.morphTargetsRelative,$=h.attributes.uv,Z=h.attributes.uv2,te=h.groups,le=h.drawRange;if(L!==null)if(Array.isArray(p))for(let oe=0,se=te.length;oe<se;oe++){const ve=te[oe],De=p[ve.materialIndex],Ce=Math.max(ve.start,le.start),Le=Math.min(L.count,Math.min(ve.start+ve.count,le.start+le.count));for(let ze=Ce,tt=Le;ze<tt;ze+=3){const ft=L.getX(ze),Oe=L.getX(ze+1),ot=L.getX(ze+2);R=Pl(this,De,r,xo,H,j,X,$,Z,ft,Oe,ot),R&&(R.faceIndex=Math.floor(ze/3),R.face.materialIndex=ve.materialIndex,a.push(R))}}else{const oe=Math.max(0,le.start),se=Math.min(L.count,le.start+le.count);for(let ve=oe,De=se;ve<De;ve+=3){const Ce=L.getX(ve),Le=L.getX(ve+1),ze=L.getX(ve+2);R=Pl(this,p,r,xo,H,j,X,$,Z,Ce,Le,ze),R&&(R.faceIndex=Math.floor(ve/3),a.push(R))}}else if(H!==void 0)if(Array.isArray(p))for(let oe=0,se=te.length;oe<se;oe++){const ve=te[oe],De=p[ve.materialIndex],Ce=Math.max(ve.start,le.start),Le=Math.min(H.count,Math.min(ve.start+ve.count,le.start+le.count));for(let ze=Ce,tt=Le;ze<tt;ze+=3){const ft=ze,Oe=ze+1,ot=ze+2;R=Pl(this,De,r,xo,H,j,X,$,Z,ft,Oe,ot),R&&(R.faceIndex=Math.floor(ze/3),R.face.materialIndex=ve.materialIndex,a.push(R))}}else{const oe=Math.max(0,le.start),se=Math.min(H.count,le.start+le.count);for(let ve=oe,De=se;ve<De;ve+=3){const Ce=ve,Le=ve+1,ze=ve+2;R=Pl(this,p,r,xo,H,j,X,$,Z,Ce,Le,ze),R&&(R.faceIndex=Math.floor(ve/3),a.push(R))}}}}function v0(B,r,a,h,p,w,R,L){let H;if(r.side===T?H=h.intersectTriangle(R,w,p,!0,L):H=h.intersectTriangle(p,w,R,r.side!==N,L),H===null)return null;$p.copy(L),$p.applyMatrix4(B.matrixWorld);const j=a.ray.origin.distanceTo($p);return j<a.near||j>a.far?null:{distance:j,point:$p.clone(),object:B}}function Pl(B,r,a,h,p,w,R,L,H,j,X,$){tu.fromBufferAttribute(p,j),nu.fromBufferAttribute(p,X),iu.fromBufferAttribute(p,$);const Z=B.morphTargetInfluences;if(w&&Z){Kp.set(0,0,0),Xp.set(0,0,0),Kh.set(0,0,0);for(let le=0,oe=w.length;le<oe;le++){const se=Z[le],ve=w[le];se!==0&&(A0.fromBufferAttribute(ve,j),Qp.fromBufferAttribute(ve,X),Wp.fromBufferAttribute(ve,$),R?(Kp.addScaledVector(A0,se),Xp.addScaledVector(Qp,se),Kh.addScaledVector(Wp,se)):(Kp.addScaledVector(A0.sub(tu),se),Xp.addScaledVector(Qp.sub(nu),se),Kh.addScaledVector(Wp.sub(iu),se)))}tu.add(Kp),nu.add(Xp),iu.add(Kh)}B.isSkinnedMesh&&(B.boneTransform(j,tu),B.boneTransform(X,nu),B.boneTransform($,iu));const te=v0(B,r,a,h,tu,nu,iu,qp);if(te){L&&(ru.fromBufferAttribute(L,j),Fu.fromBufferAttribute(L,X),Yp.fromBufferAttribute(L,$),te.uv=ys.getUV(qp,tu,nu,iu,ru,Fu,Yp,new un)),H&&(ru.fromBufferAttribute(H,j),Fu.fromBufferAttribute(H,X),Yp.fromBufferAttribute(H,$),te.uv2=ys.getUV(qp,tu,nu,iu,ru,Fu,Yp,new un));const le={a:j,b:X,c:$,normal:new je,materialIndex:0};ys.getNormal(tu,nu,iu,le.normal),te.face=le}return te}class Js extends pr{constructor(r=1,a=1,h=1,p=1,w=1,R=1){super(),this.type="BoxGeometry",this.parameters={width:r,height:a,depth:h,widthSegments:p,heightSegments:w,depthSegments:R};const L=this;p=Math.floor(p),w=Math.floor(w),R=Math.floor(R);const H=[],j=[],X=[],$=[];let Z=0,te=0;le("z","y","x",-1,-1,h,a,r,R,w,0),le("z","y","x",1,-1,h,a,-r,R,w,1),le("x","z","y",1,1,r,h,a,p,R,2),le("x","z","y",1,-1,r,h,-a,p,R,3),le("x","y","z",1,-1,r,a,h,p,w,4),le("x","y","z",-1,-1,r,a,-h,p,w,5),this.setIndex(H),this.setAttribute("position",new yi(j,3)),this.setAttribute("normal",new yi(X,3)),this.setAttribute("uv",new yi($,2));function le(oe,se,ve,De,Ce,Le,ze,tt,ft,Oe,ot){const ut=Le/ft,Tt=ze/Oe,jt=Le/2,Lt=ze/2,bt=tt/2,Ut=ft+1,fn=Oe+1;let xn=0,hn=0;const Dn=new je;for(let In=0;In<fn;In++){const fi=In*Tt-Lt;for(let ni=0;ni<Ut;ni++){const qt=ni*ut-jt;Dn[oe]=qt*De,Dn[se]=fi*Ce,Dn[ve]=bt,j.push(Dn.x,Dn.y,Dn.z),Dn[oe]=0,Dn[se]=0,Dn[ve]=tt>0?1:-1,X.push(Dn.x,Dn.y,Dn.z),$.push(ni/ft),$.push(1-In/Oe),xn+=1}}for(let In=0;In<Oe;In++)for(let fi=0;fi<ft;fi++){const ni=Z+fi+Ut*In,qt=Z+fi+Ut*(In+1),En=Z+(fi+1)+Ut*(In+1),$n=Z+(fi+1)+Ut*In;H.push(ni,qt,$n),H.push(qt,En,$n),hn+=6}L.addGroup(te,hn,ot),te+=hn,Z+=xn}}static fromJSON(r){return new Js(r.width,r.height,r.depth,r.widthSegments,r.heightSegments,r.depthSegments)}}function Xh(B){const r={};for(const a in B){r[a]={};for(const h in B[a]){const p=B[a][h];p&&(p.isColor||p.isMatrix3||p.isMatrix4||p.isVector2||p.isVector3||p.isVector4||p.isTexture||p.isQuaternion)?r[a][h]=p.clone():Array.isArray(p)?r[a][h]=p.slice():r[a][h]=p}}return r}function Eo(B){const r={};for(let a=0;a<B.length;a++){const h=Xh(B[a]);for(const p in h)r[p]=h[p]}return r}function Ly(B){const r=[];for(let a=0;a<B.length;a++)r.push(B[a].clone());return r}function Yh(B){return B.getRenderTarget()===null&&B.outputEncoding===Ln?Di:Er}const dc={clone:Xh,merge:Eo};var By=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Bb=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class va extends yo{constructor(r){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=By,this.fragmentShader=Bb,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,r!==void 0&&this.setValues(r)}copy(r){return super.copy(r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=Xh(r.uniforms),this.uniformsGroups=Ly(r.uniformsGroups),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.fog=r.fog,this.lights=r.lights,this.clipping=r.clipping,this.extensions=Object.assign({},r.extensions),this.glslVersion=r.glslVersion,this}toJSON(r){const a=super.toJSON(r);a.glslVersion=this.glslVersion,a.uniforms={};for(const p in this.uniforms){const R=this.uniforms[p].value;R&&R.isTexture?a.uniforms[p]={type:"t",value:R.toJSON(r).uuid}:R&&R.isColor?a.uniforms[p]={type:"c",value:R.getHex()}:R&&R.isVector2?a.uniforms[p]={type:"v2",value:R.toArray()}:R&&R.isVector3?a.uniforms[p]={type:"v3",value:R.toArray()}:R&&R.isVector4?a.uniforms[p]={type:"v4",value:R.toArray()}:R&&R.isMatrix3?a.uniforms[p]={type:"m3",value:R.toArray()}:R&&R.isMatrix4?a.uniforms[p]={type:"m4",value:R.toArray()}:a.uniforms[p]={value:R}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;const h={};for(const p in this.extensions)this.extensions[p]===!0&&(h[p]=!0);return Object.keys(h).length>0&&(a.extensions=h),a}}class Jp extends Or{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new oi,this.projectionMatrix=new oi,this.projectionMatrixInverse=new oi}copy(r,a){return super.copy(r,a),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this.projectionMatrixInverse.copy(r.projectionMatrixInverse),this}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return r.set(-a[8],-a[9],-a[10]).normalize()}updateMatrixWorld(r){super.updateMatrixWorld(r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(r,a){super.updateWorldMatrix(r,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Vs extends Jp{constructor(r=50,a=1,h=.1,p=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=r,this.zoom=1,this.near=h,this.far=p,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(r,a){return super.copy(r,a),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=r.view===null?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this}setFocalLength(r){const a=.5*this.getFilmHeight()/r;this.fov=oc*2*Math.atan(a),this.updateProjectionMatrix()}getFocalLength(){const r=Math.tan(Fa*.5*this.fov);return .5*this.getFilmHeight()/r}getEffectiveFOV(){return oc*2*Math.atan(Math.tan(Fa*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(r,a,h,p,w,R){this.aspect=r/a,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=a,this.view.offsetX=h,this.view.offsetY=p,this.view.width=w,this.view.height=R,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=this.near;let a=r*Math.tan(Fa*.5*this.fov)/this.zoom,h=2*a,p=this.aspect*h,w=-.5*p;const R=this.view;if(this.view!==null&&this.view.enabled){const H=R.fullWidth,j=R.fullHeight;w+=R.offsetX*p/H,a-=R.offsetY*h/j,p*=R.width/H,h*=R.height/j}const L=this.filmOffset;L!==0&&(w+=r*L/this.getFilmWidth()),this.projectionMatrix.makePerspective(w,w+p,a,a-h,r,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const a=super.toJSON(r);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,this.view!==null&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}}const Ts=-90,su=1;class y0 extends Or{constructor(r,a,h){super(),this.type="CubeCamera",this.renderTarget=h;const p=new Vs(Ts,su,r,a);p.layers=this.layers,p.up.set(0,1,0),p.lookAt(1,0,0),this.add(p);const w=new Vs(Ts,su,r,a);w.layers=this.layers,w.up.set(0,1,0),w.lookAt(-1,0,0),this.add(w);const R=new Vs(Ts,su,r,a);R.layers=this.layers,R.up.set(0,0,-1),R.lookAt(0,1,0),this.add(R);const L=new Vs(Ts,su,r,a);L.layers=this.layers,L.up.set(0,0,1),L.lookAt(0,-1,0),this.add(L);const H=new Vs(Ts,su,r,a);H.layers=this.layers,H.up.set(0,1,0),H.lookAt(0,0,1),this.add(H);const j=new Vs(Ts,su,r,a);j.layers=this.layers,j.up.set(0,1,0),j.lookAt(0,0,-1),this.add(j)}update(r,a){this.parent===null&&this.updateMatrixWorld();const h=this.renderTarget,[p,w,R,L,H,j]=this.children,X=r.getRenderTarget(),$=r.toneMapping,Z=r.xr.enabled;r.toneMapping=Wn,r.xr.enabled=!1;const te=h.texture.generateMipmaps;h.texture.generateMipmaps=!1,r.setRenderTarget(h,0),r.render(a,p),r.setRenderTarget(h,1),r.render(a,w),r.setRenderTarget(h,2),r.render(a,R),r.setRenderTarget(h,3),r.render(a,L),r.setRenderTarget(h,4),r.render(a,H),h.texture.generateMipmaps=te,r.setRenderTarget(h,5),r.render(a,j),r.setRenderTarget(X),r.toneMapping=$,r.xr.enabled=Z,h.texture.needsPMREMUpdate=!0}}class Xo extends vs{constructor(r,a,h,p,w,R,L,H,j,X){r=r!==void 0?r:[],a=a!==void 0?a:Pe,super(r,a,h,p,w,R,L,H,j,X),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(r){this.image=r}}class Zp extends Qo{constructor(r=1,a={}){super(r,r,a),this.isWebGLCubeRenderTarget=!0;const h={width:r,height:r,depth:1},p=[h,h,h,h,h,h];this.texture=new Xo(p,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=a.generateMipmaps!==void 0?a.generateMipmaps:!1,this.texture.minFilter=a.minFilter!==void 0?a.minFilter:qe}fromEquirectangularTexture(r,a){this.texture.type=a.type,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const h={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},p=new Js(5,5,5),w=new va({name:"CubemapFromEquirect",uniforms:Xh(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,side:T,blending:P});w.uniforms.tEquirect.value=a;const R=new as(p,w),L=a.minFilter;return a.minFilter===Ot&&(a.minFilter=qe),new y0(1,10,this).update(r,R),a.minFilter=L,R.geometry.dispose(),R.material.dispose(),this}clear(r,a,h,p){const w=r.getRenderTarget();for(let R=0;R<6;R++)r.setRenderTarget(this,R),r.clear(a,h,p);r.setRenderTarget(w)}}const qh=new je,ku=new je,Dy=new Fs;class Is{constructor(r=new je(1,0,0),a=0){this.isPlane=!0,this.normal=r,this.constant=a}set(r,a){return this.normal.copy(r),this.constant=a,this}setComponents(r,a,h,p){return this.normal.set(r,a,h),this.constant=p,this}setFromNormalAndCoplanarPoint(r,a){return this.normal.copy(r),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(r,a,h){const p=qh.subVectors(h,a).cross(ku.subVectors(r,a)).normalize();return this.setFromNormalAndCoplanarPoint(p,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,a){return a.copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)}intersectLine(r,a){const h=r.delta(qh),p=this.normal.dot(h);if(p===0)return this.distanceToPoint(r.start)===0?a.copy(r.start):null;const w=-(r.start.dot(this.normal)+this.constant)/p;return w<0||w>1?null:a.copy(h).multiplyScalar(w).add(r.start)}intersectsLine(r){const a=this.distanceToPoint(r.start),h=this.distanceToPoint(r.end);return a<0&&h>0||h<0&&a>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,a){const h=a||Dy.getNormalMatrix(r),p=this.coplanarPoint(qh).applyMatrix4(r),w=this.normal.applyMatrix3(h).normalize();return this.constant=-p.dot(w),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ou=new Wo,em=new je;class tm{constructor(r=new Is,a=new Is,h=new Is,p=new Is,w=new Is,R=new Is){this.planes=[r,a,h,p,w,R]}set(r,a,h,p,w,R){const L=this.planes;return L[0].copy(r),L[1].copy(a),L[2].copy(h),L[3].copy(p),L[4].copy(w),L[5].copy(R),this}copy(r){const a=this.planes;for(let h=0;h<6;h++)a[h].copy(r.planes[h]);return this}setFromProjectionMatrix(r){const a=this.planes,h=r.elements,p=h[0],w=h[1],R=h[2],L=h[3],H=h[4],j=h[5],X=h[6],$=h[7],Z=h[8],te=h[9],le=h[10],oe=h[11],se=h[12],ve=h[13],De=h[14],Ce=h[15];return a[0].setComponents(L-p,$-H,oe-Z,Ce-se).normalize(),a[1].setComponents(L+p,$+H,oe+Z,Ce+se).normalize(),a[2].setComponents(L+w,$+j,oe+te,Ce+ve).normalize(),a[3].setComponents(L-w,$-j,oe-te,Ce-ve).normalize(),a[4].setComponents(L-R,$-X,oe-le,Ce-De).normalize(),a[5].setComponents(L+R,$+X,oe+le,Ce+De).normalize(),this}intersectsObject(r){const a=r.geometry;return a.boundingSphere===null&&a.computeBoundingSphere(),ou.copy(a.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(ou)}intersectsSprite(r){return ou.center.set(0,0,0),ou.radius=.7071067811865476,ou.applyMatrix4(r.matrixWorld),this.intersectsSphere(ou)}intersectsSphere(r){const a=this.planes,h=r.center,p=-r.radius;for(let w=0;w<6;w++)if(a[w].distanceToPoint(h)<p)return!1;return!0}intersectsBox(r){const a=this.planes;for(let h=0;h<6;h++){const p=a[h];if(em.x=p.normal.x>0?r.max.x:r.min.x,em.y=p.normal.y>0?r.max.y:r.min.y,em.z=p.normal.z>0?r.max.z:r.min.z,p.distanceToPoint(em)<0)return!1}return!0}containsPoint(r){const a=this.planes;for(let h=0;h<6;h++)if(a[h].distanceToPoint(r)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function x0(){let B=null,r=!1,a=null,h=null;function p(w,R){a(w,R),h=B.requestAnimationFrame(p)}return{start:function(){r!==!0&&a!==null&&(h=B.requestAnimationFrame(p),r=!0)},stop:function(){B.cancelAnimationFrame(h),r=!1},setAnimationLoop:function(w){a=w},setContext:function(w){B=w}}}function E0(B,r){const a=r.isWebGL2,h=new WeakMap;function p(j,X){const $=j.array,Z=j.usage,te=B.createBuffer();B.bindBuffer(X,te),B.bufferData(X,$,Z),j.onUploadCallback();let le;if($ instanceof Float32Array)le=5126;else if($ instanceof Uint16Array)if(j.isFloat16BufferAttribute)if(a)le=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else le=5123;else if($ instanceof Int16Array)le=5122;else if($ instanceof Uint32Array)le=5125;else if($ instanceof Int32Array)le=5124;else if($ instanceof Int8Array)le=5120;else if($ instanceof Uint8Array)le=5121;else if($ instanceof Uint8ClampedArray)le=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+$);return{buffer:te,type:le,bytesPerElement:$.BYTES_PER_ELEMENT,version:j.version}}function w(j,X,$){const Z=X.array,te=X.updateRange;B.bindBuffer($,j),te.count===-1?B.bufferSubData($,0,Z):(a?B.bufferSubData($,te.offset*Z.BYTES_PER_ELEMENT,Z,te.offset,te.count):B.bufferSubData($,te.offset*Z.BYTES_PER_ELEMENT,Z.subarray(te.offset,te.offset+te.count)),te.count=-1),X.onUploadCallback()}function R(j){return j.isInterleavedBufferAttribute&&(j=j.data),h.get(j)}function L(j){j.isInterleavedBufferAttribute&&(j=j.data);const X=h.get(j);X&&(B.deleteBuffer(X.buffer),h.delete(j))}function H(j,X){if(j.isGLBufferAttribute){const Z=h.get(j);(!Z||Z.version<j.version)&&h.set(j,{buffer:j.buffer,type:j.type,bytesPerElement:j.elementSize,version:j.version});return}j.isInterleavedBufferAttribute&&(j=j.data);const $=h.get(j);$===void 0?h.set(j,p(j,X)):$.version<j.version&&(w($.buffer,j,X),$.version=j.version)}return{get:R,remove:L,update:H}}class $h extends pr{constructor(r=1,a=1,h=1,p=1){super(),this.type="PlaneGeometry",this.parameters={width:r,height:a,widthSegments:h,heightSegments:p};const w=r/2,R=a/2,L=Math.floor(h),H=Math.floor(p),j=L+1,X=H+1,$=r/L,Z=a/H,te=[],le=[],oe=[],se=[];for(let ve=0;ve<X;ve++){const De=ve*Z-R;for(let Ce=0;Ce<j;Ce++){const Le=Ce*$-w;le.push(Le,-De,0),oe.push(0,0,1),se.push(Ce/L),se.push(1-ve/H)}}for(let ve=0;ve<H;ve++)for(let De=0;De<L;De++){const Ce=De+j*ve,Le=De+j*(ve+1),ze=De+1+j*(ve+1),tt=De+1+j*ve;te.push(Ce,Le,tt),te.push(Le,ze,tt)}this.setIndex(te),this.setAttribute("position",new yi(le,3)),this.setAttribute("normal",new yi(oe,3)),this.setAttribute("uv",new yi(se,2))}static fromJSON(r){return new $h(r.width,r.height,r.widthSegments,r.heightSegments)}}var df=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Py=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Db=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Pb=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ff=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ob=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Fb="vec3 transformed = vec3( position );",_0=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Oy=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kb=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Nb=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ub=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Fy=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,b0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Gb=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,w0=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ky=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Ny=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Uy=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,nm=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,zb=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Gy=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,zy=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Hb=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Hy=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Vb=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,C0="gl_FragColor = linearToOutputTexel( gl_FragColor );",Vy=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,M0=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,jb=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,S0=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mr=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qb=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Wb=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,pf=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,jy=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kb=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Xb=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Va=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Yb=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,im=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,T0=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Qy=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Wy=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,ya=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,au=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,I0=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ky=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,rm=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Xy=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,R0=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Yy=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,L0=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,B0=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lu=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qb=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,cu=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,qy=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$y=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,D0=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$b=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jb=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Zb=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Jy=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Zy=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,e2=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,e1=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,t1=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Yo=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ol=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,t2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,n2=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sm=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Jh=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,n1=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,i1=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,i2=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,r1=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Zh=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,mf=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,r2=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,s1=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,o1=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,om=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,a1=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,am=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,P0=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lm=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,s2=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,l1=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,c1=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,O0=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,o2=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,u1=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fc=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,h1=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,d1=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,a2=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,f1=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,l2=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,c2=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,pc=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,F0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,k0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,N0=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cr={alphamap_fragment:df,alphamap_pars_fragment:Py,alphatest_fragment:Db,alphatest_pars_fragment:Pb,aomap_fragment:ff,aomap_pars_fragment:Ob,begin_vertex:Fb,beginnormal_vertex:_0,bsdfs:Oy,iridescence_fragment:kb,bumpmap_pars_fragment:Nb,clipping_planes_fragment:Ub,clipping_planes_pars_fragment:Fy,clipping_planes_pars_vertex:b0,clipping_planes_vertex:Gb,color_fragment:w0,color_pars_fragment:ky,color_pars_vertex:Ny,color_vertex:Uy,common:nm,cube_uv_reflection_fragment:zb,defaultnormal_vertex:Gy,displacementmap_pars_vertex:zy,displacementmap_vertex:Hb,emissivemap_fragment:Hy,emissivemap_pars_fragment:Vb,encodings_fragment:C0,encodings_pars_fragment:Vy,envmap_fragment:M0,envmap_common_pars_fragment:jb,envmap_pars_fragment:S0,envmap_pars_vertex:mr,envmap_physical_pars_fragment:Wy,envmap_vertex:Qb,fog_vertex:Wb,fog_pars_vertex:pf,fog_fragment:jy,fog_pars_fragment:Kb,gradientmap_pars_fragment:Xb,lightmap_fragment:Va,lightmap_pars_fragment:Yb,lights_lambert_fragment:im,lights_lambert_pars_fragment:T0,lights_pars_begin:Qy,lights_toon_fragment:ya,lights_toon_pars_fragment:au,lights_phong_fragment:I0,lights_phong_pars_fragment:Ky,lights_physical_fragment:rm,lights_physical_pars_fragment:Xy,lights_fragment_begin:R0,lights_fragment_maps:Yy,lights_fragment_end:L0,logdepthbuf_fragment:B0,logdepthbuf_pars_fragment:lu,logdepthbuf_pars_vertex:qb,logdepthbuf_vertex:cu,map_fragment:qy,map_pars_fragment:$y,map_particle_fragment:D0,map_particle_pars_fragment:$b,metalnessmap_fragment:Jb,metalnessmap_pars_fragment:Zb,morphcolor_vertex:Jy,morphnormal_vertex:Zy,morphtarget_pars_vertex:e2,morphtarget_vertex:e1,normal_fragment_begin:t1,normal_fragment_maps:Yo,normal_pars_fragment:Ol,normal_pars_vertex:t2,normal_vertex:n2,normalmap_pars_fragment:sm,clearcoat_normal_fragment_begin:Jh,clearcoat_normal_fragment_maps:n1,clearcoat_pars_fragment:i1,iridescence_pars_fragment:i2,output_fragment:r1,packing:Zh,premultiplied_alpha_fragment:mf,project_vertex:r2,dithering_fragment:s1,dithering_pars_fragment:o1,roughnessmap_fragment:om,roughnessmap_pars_fragment:a1,shadowmap_pars_fragment:am,shadowmap_pars_vertex:P0,shadowmap_vertex:lm,shadowmask_pars_fragment:s2,skinbase_vertex:l1,skinning_pars_vertex:cm,skinning_vertex:c1,skinnormal_vertex:O0,specularmap_fragment:o2,specularmap_pars_fragment:u1,tonemapping_fragment:fc,tonemapping_pars_fragment:h1,transmission_fragment:d1,transmission_pars_fragment:a2,uv_pars_fragment:f1,uv_pars_vertex:l2,uv_vertex:c2,uv2_pars_fragment:pc,uv2_pars_vertex:F0,uv2_vertex:k0,worldpos_vertex:N0,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},Hn={common:{diffuse:{value:new si(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Fs},uv2Transform:{value:new Fs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new un(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fs}},sprite:{diffuse:{value:new si(16777215)},opacity:{value:1},center:{value:new un(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fs}}},ja={basic:{uniforms:Eo([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.fog]),vertexShader:cr.meshbasic_vert,fragmentShader:cr.meshbasic_frag},lambert:{uniforms:Eo([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,Hn.lights,{emissive:{value:new si(0)}}]),vertexShader:cr.meshlambert_vert,fragmentShader:cr.meshlambert_frag},phong:{uniforms:Eo([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,Hn.lights,{emissive:{value:new si(0)},specular:{value:new si(1118481)},shininess:{value:30}}]),vertexShader:cr.meshphong_vert,fragmentShader:cr.meshphong_frag},standard:{uniforms:Eo([Hn.common,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.roughnessmap,Hn.metalnessmap,Hn.fog,Hn.lights,{emissive:{value:new si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},toon:{uniforms:Eo([Hn.common,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.gradientmap,Hn.fog,Hn.lights,{emissive:{value:new si(0)}}]),vertexShader:cr.meshtoon_vert,fragmentShader:cr.meshtoon_frag},matcap:{uniforms:Eo([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,{matcap:{value:null}}]),vertexShader:cr.meshmatcap_vert,fragmentShader:cr.meshmatcap_frag},points:{uniforms:Eo([Hn.points,Hn.fog]),vertexShader:cr.points_vert,fragmentShader:cr.points_frag},dashed:{uniforms:Eo([Hn.common,Hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cr.linedashed_vert,fragmentShader:cr.linedashed_frag},depth:{uniforms:Eo([Hn.common,Hn.displacementmap]),vertexShader:cr.depth_vert,fragmentShader:cr.depth_frag},normal:{uniforms:Eo([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,{opacity:{value:1}}]),vertexShader:cr.meshnormal_vert,fragmentShader:cr.meshnormal_frag},sprite:{uniforms:Eo([Hn.sprite,Hn.fog]),vertexShader:cr.sprite_vert,fragmentShader:cr.sprite_frag},background:{uniforms:{uvTransform:{value:new Fs},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cr.background_vert,fragmentShader:cr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cr.backgroundCube_vert,fragmentShader:cr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cr.cube_vert,fragmentShader:cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cr.equirect_vert,fragmentShader:cr.equirect_frag},distanceRGBA:{uniforms:Eo([Hn.common,Hn.displacementmap,{referencePosition:{value:new je},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cr.distanceRGBA_vert,fragmentShader:cr.distanceRGBA_frag},shadow:{uniforms:Eo([Hn.lights,Hn.fog,{color:{value:new si(0)},opacity:{value:1}}]),vertexShader:cr.shadow_vert,fragmentShader:cr.shadow_frag}};ja.physical={uniforms:Eo([ja.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new un(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new si(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new un},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new si(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new si(1,1,1)},specularColorMap:{value:null}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag};const hu={r:0,b:0,g:0};function z0(B,r,a,h,p,w,R){const L=new si(0);let H=w===!0?0:1,j,X,$=null,Z=0,te=null;function le(se,ve){let De=!1,Ce=ve.isScene===!0?ve.background:null;Ce&&Ce.isTexture&&(Ce=(ve.backgroundBlurriness>0?a:r).get(Ce));const Le=B.xr,ze=Le.getSession&&Le.getSession();ze&&ze.environmentBlendMode==="additive"&&(Ce=null),Ce===null?oe(L,H):Ce&&Ce.isColor&&(oe(Ce,1),De=!0),(B.autoClear||De)&&B.clear(B.autoClearColor,B.autoClearDepth,B.autoClearStencil),Ce&&(Ce.isCubeTexture||Ce.mapping===Ue)?(X===void 0&&(X=new as(new Js(1,1,1),new va({name:"BackgroundCubeMaterial",uniforms:Xh(ja.backgroundCube.uniforms),vertexShader:ja.backgroundCube.vertexShader,fragmentShader:ja.backgroundCube.fragmentShader,side:T,depthTest:!1,depthWrite:!1,fog:!1})),X.geometry.deleteAttribute("normal"),X.geometry.deleteAttribute("uv"),X.onBeforeRender=function(tt,ft,Oe){this.matrixWorld.copyPosition(Oe.matrixWorld)},Object.defineProperty(X.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),p.update(X)),X.material.uniforms.envMap.value=Ce,X.material.uniforms.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1,X.material.uniforms.backgroundBlurriness.value=ve.backgroundBlurriness,X.material.uniforms.backgroundIntensity.value=ve.backgroundIntensity,($!==Ce||Z!==Ce.version||te!==B.toneMapping)&&(X.material.needsUpdate=!0,$=Ce,Z=Ce.version,te=B.toneMapping),X.layers.enableAll(),se.unshift(X,X.geometry,X.material,0,0,null)):Ce&&Ce.isTexture&&(j===void 0&&(j=new as(new $h(2,2),new va({name:"BackgroundMaterial",uniforms:Xh(ja.background.uniforms),vertexShader:ja.background.vertexShader,fragmentShader:ja.background.fragmentShader,side:M,depthTest:!1,depthWrite:!1,fog:!1})),j.geometry.deleteAttribute("normal"),Object.defineProperty(j.material,"map",{get:function(){return this.uniforms.t2D.value}}),p.update(j)),j.material.uniforms.t2D.value=Ce,j.material.uniforms.backgroundIntensity.value=ve.backgroundIntensity,Ce.matrixAutoUpdate===!0&&Ce.updateMatrix(),j.material.uniforms.uvTransform.value.copy(Ce.matrix),($!==Ce||Z!==Ce.version||te!==B.toneMapping)&&(j.material.needsUpdate=!0,$=Ce,Z=Ce.version,te=B.toneMapping),j.layers.enableAll(),se.unshift(j,j.geometry,j.material,0,0,null))}function oe(se,ve){se.getRGB(hu,Yh(B)),h.buffers.color.setClear(hu.r,hu.g,hu.b,ve,R)}return{getClearColor:function(){return L},setClearColor:function(se,ve=1){L.set(se),H=ve,oe(L,H)},getClearAlpha:function(){return H},setClearAlpha:function(se){H=se,oe(L,H)},render:le}}function v1(B,r,a,h){const p=B.getParameter(34921),w=h.isWebGL2?null:r.get("OES_vertex_array_object"),R=h.isWebGL2||w!==null,L={},H=se(null);let j=H,X=!1;function $(bt,Ut,fn,xn,hn){let Dn=!1;if(R){const In=oe(xn,fn,Ut);j!==In&&(j=In,te(j.object)),Dn=ve(bt,xn,fn,hn),Dn&&De(bt,xn,fn,hn)}else{const In=Ut.wireframe===!0;(j.geometry!==xn.id||j.program!==fn.id||j.wireframe!==In)&&(j.geometry=xn.id,j.program=fn.id,j.wireframe=In,Dn=!0)}hn!==null&&a.update(hn,34963),(Dn||X)&&(X=!1,Oe(bt,Ut,fn,xn),hn!==null&&B.bindBuffer(34963,a.get(hn).buffer))}function Z(){return h.isWebGL2?B.createVertexArray():w.createVertexArrayOES()}function te(bt){return h.isWebGL2?B.bindVertexArray(bt):w.bindVertexArrayOES(bt)}function le(bt){return h.isWebGL2?B.deleteVertexArray(bt):w.deleteVertexArrayOES(bt)}function oe(bt,Ut,fn){const xn=fn.wireframe===!0;let hn=L[bt.id];hn===void 0&&(hn={},L[bt.id]=hn);let Dn=hn[Ut.id];Dn===void 0&&(Dn={},hn[Ut.id]=Dn);let In=Dn[xn];return In===void 0&&(In=se(Z()),Dn[xn]=In),In}function se(bt){const Ut=[],fn=[],xn=[];for(let hn=0;hn<p;hn++)Ut[hn]=0,fn[hn]=0,xn[hn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ut,enabledAttributes:fn,attributeDivisors:xn,object:bt,attributes:{},index:null}}function ve(bt,Ut,fn,xn){const hn=j.attributes,Dn=Ut.attributes;let In=0;const fi=fn.getAttributes();for(const ni in fi)if(fi[ni].location>=0){const En=hn[ni];let $n=Dn[ni];if($n===void 0&&(ni==="instanceMatrix"&&bt.instanceMatrix&&($n=bt.instanceMatrix),ni==="instanceColor"&&bt.instanceColor&&($n=bt.instanceColor)),En===void 0||En.attribute!==$n||$n&&En.data!==$n.data)return!0;In++}return j.attributesNum!==In||j.index!==xn}function De(bt,Ut,fn,xn){const hn={},Dn=Ut.attributes;let In=0;const fi=fn.getAttributes();for(const ni in fi)if(fi[ni].location>=0){let En=Dn[ni];En===void 0&&(ni==="instanceMatrix"&&bt.instanceMatrix&&(En=bt.instanceMatrix),ni==="instanceColor"&&bt.instanceColor&&(En=bt.instanceColor));const $n={};$n.attribute=En,En&&En.data&&($n.data=En.data),hn[ni]=$n,In++}j.attributes=hn,j.attributesNum=In,j.index=xn}function Ce(){const bt=j.newAttributes;for(let Ut=0,fn=bt.length;Ut<fn;Ut++)bt[Ut]=0}function Le(bt){ze(bt,0)}function ze(bt,Ut){const fn=j.newAttributes,xn=j.enabledAttributes,hn=j.attributeDivisors;fn[bt]=1,xn[bt]===0&&(B.enableVertexAttribArray(bt),xn[bt]=1),hn[bt]!==Ut&&((h.isWebGL2?B:r.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](bt,Ut),hn[bt]=Ut)}function tt(){const bt=j.newAttributes,Ut=j.enabledAttributes;for(let fn=0,xn=Ut.length;fn<xn;fn++)Ut[fn]!==bt[fn]&&(B.disableVertexAttribArray(fn),Ut[fn]=0)}function ft(bt,Ut,fn,xn,hn,Dn){h.isWebGL2===!0&&(fn===5124||fn===5125)?B.vertexAttribIPointer(bt,Ut,fn,hn,Dn):B.vertexAttribPointer(bt,Ut,fn,xn,hn,Dn)}function Oe(bt,Ut,fn,xn){if(h.isWebGL2===!1&&(bt.isInstancedMesh||xn.isInstancedBufferGeometry)&&r.get("ANGLE_instanced_arrays")===null)return;Ce();const hn=xn.attributes,Dn=fn.getAttributes(),In=Ut.defaultAttributeValues;for(const fi in Dn){const ni=Dn[fi];if(ni.location>=0){let qt=hn[fi];if(qt===void 0&&(fi==="instanceMatrix"&&bt.instanceMatrix&&(qt=bt.instanceMatrix),fi==="instanceColor"&&bt.instanceColor&&(qt=bt.instanceColor)),qt!==void 0){const En=qt.normalized,$n=qt.itemSize,Ht=a.get(qt);if(Ht===void 0)continue;const gi=Ht.buffer,Zn=Ht.type,Ni=Ht.bytesPerElement;if(qt.isInterleavedBufferAttribute){const Gn=qt.data,yr=Gn.stride,pn=qt.offset;if(Gn.isInstancedInterleavedBuffer){for(let ln=0;ln<ni.locationSize;ln++)ze(ni.location+ln,Gn.meshPerAttribute);bt.isInstancedMesh!==!0&&xn._maxInstanceCount===void 0&&(xn._maxInstanceCount=Gn.meshPerAttribute*Gn.count)}else for(let ln=0;ln<ni.locationSize;ln++)Le(ni.location+ln);B.bindBuffer(34962,gi);for(let ln=0;ln<ni.locationSize;ln++)ft(ni.location+ln,$n/ni.locationSize,Zn,En,yr*Ni,(pn+$n/ni.locationSize*ln)*Ni)}else{if(qt.isInstancedBufferAttribute){for(let Gn=0;Gn<ni.locationSize;Gn++)ze(ni.location+Gn,qt.meshPerAttribute);bt.isInstancedMesh!==!0&&xn._maxInstanceCount===void 0&&(xn._maxInstanceCount=qt.meshPerAttribute*qt.count)}else for(let Gn=0;Gn<ni.locationSize;Gn++)Le(ni.location+Gn);B.bindBuffer(34962,gi);for(let Gn=0;Gn<ni.locationSize;Gn++)ft(ni.location+Gn,$n/ni.locationSize,Zn,En,$n*Ni,$n/ni.locationSize*Gn*Ni)}}else if(In!==void 0){const En=In[fi];if(En!==void 0)switch(En.length){case 2:B.vertexAttrib2fv(ni.location,En);break;case 3:B.vertexAttrib3fv(ni.location,En);break;case 4:B.vertexAttrib4fv(ni.location,En);break;default:B.vertexAttrib1fv(ni.location,En)}}}}tt()}function ot(){jt();for(const bt in L){const Ut=L[bt];for(const fn in Ut){const xn=Ut[fn];for(const hn in xn)le(xn[hn].object),delete xn[hn];delete Ut[fn]}delete L[bt]}}function ut(bt){if(L[bt.id]===void 0)return;const Ut=L[bt.id];for(const fn in Ut){const xn=Ut[fn];for(const hn in xn)le(xn[hn].object),delete xn[hn];delete Ut[fn]}delete L[bt.id]}function Tt(bt){for(const Ut in L){const fn=L[Ut];if(fn[bt.id]===void 0)continue;const xn=fn[bt.id];for(const hn in xn)le(xn[hn].object),delete xn[hn];delete fn[bt.id]}}function jt(){Lt(),X=!0,j!==H&&(j=H,te(j.object))}function Lt(){H.geometry=null,H.program=null,H.wireframe=!1}return{setup:$,reset:jt,resetDefaultState:Lt,dispose:ot,releaseStatesOfGeometry:ut,releaseStatesOfProgram:Tt,initAttributes:Ce,enableAttribute:Le,disableUnusedAttributes:tt}}function y1(B,r,a,h){const p=h.isWebGL2;let w;function R(j){w=j}function L(j,X){B.drawArrays(w,j,X),a.update(X,w,1)}function H(j,X,$){if($===0)return;let Z,te;if(p)Z=B,te="drawArraysInstanced";else if(Z=r.get("ANGLE_instanced_arrays"),te="drawArraysInstancedANGLE",Z===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Z[te](w,j,X,$),a.update(X,w,$)}this.setMode=R,this.render=L,this.renderInstances=H}function hm(B,r,a){let h;function p(){if(h!==void 0)return h;if(r.has("EXT_texture_filter_anisotropic")===!0){const ft=r.get("EXT_texture_filter_anisotropic");h=B.getParameter(ft.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h}function w(ft){if(ft==="highp"){if(B.getShaderPrecisionFormat(35633,36338).precision>0&&B.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ft="mediump"}return ft==="mediump"&&B.getShaderPrecisionFormat(35633,36337).precision>0&&B.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const R=typeof WebGL2RenderingContext<"u"&&B instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&B instanceof WebGL2ComputeRenderingContext;let L=a.precision!==void 0?a.precision:"highp";const H=w(L);H!==L&&(console.warn("THREE.WebGLRenderer:",L,"not supported, using",H,"instead."),L=H);const j=R||r.has("WEBGL_draw_buffers"),X=a.logarithmicDepthBuffer===!0,$=B.getParameter(34930),Z=B.getParameter(35660),te=B.getParameter(3379),le=B.getParameter(34076),oe=B.getParameter(34921),se=B.getParameter(36347),ve=B.getParameter(36348),De=B.getParameter(36349),Ce=Z>0,Le=R||r.has("OES_texture_float"),ze=Ce&&Le,tt=R?B.getParameter(36183):0;return{isWebGL2:R,drawBuffers:j,getMaxAnisotropy:p,getMaxPrecision:w,precision:L,logarithmicDepthBuffer:X,maxTextures:$,maxVertexTextures:Z,maxTextureSize:te,maxCubemapSize:le,maxAttributes:oe,maxVertexUniforms:se,maxVaryings:ve,maxFragmentUniforms:De,vertexTextures:Ce,floatFragmentTextures:Le,floatVertexTextures:ze,maxSamples:tt}}function x1(B){const r=this;let a=null,h=0,p=!1,w=!1;const R=new Is,L=new Fs,H={value:null,needsUpdate:!1};this.uniform=H,this.numPlanes=0,this.numIntersection=0,this.init=function($,Z,te){const le=$.length!==0||Z||h!==0||p;return p=Z,a=X($,te,0),h=$.length,le},this.beginShadows=function(){w=!0,X(null)},this.endShadows=function(){w=!1,j()},this.setState=function($,Z,te){const le=$.clippingPlanes,oe=$.clipIntersection,se=$.clipShadows,ve=B.get($);if(!p||le===null||le.length===0||w&&!se)w?X(null):j();else{const De=w?0:h,Ce=De*4;let Le=ve.clippingState||null;H.value=Le,Le=X(le,Z,Ce,te);for(let ze=0;ze!==Ce;++ze)Le[ze]=a[ze];ve.clippingState=Le,this.numIntersection=oe?this.numPlanes:0,this.numPlanes+=De}};function j(){H.value!==a&&(H.value=a,H.needsUpdate=h>0),r.numPlanes=h,r.numIntersection=0}function X($,Z,te,le){const oe=$!==null?$.length:0;let se=null;if(oe!==0){if(se=H.value,le!==!0||se===null){const ve=te+oe*4,De=Z.matrixWorldInverse;L.getNormalMatrix(De),(se===null||se.length<ve)&&(se=new Float32Array(ve));for(let Ce=0,Le=te;Ce!==oe;++Ce,Le+=4)R.copy($[Ce]).applyMatrix4(De,L),R.normal.toArray(se,Le),se[Le+3]=R.constant}H.value=se,H.needsUpdate=!0}return r.numPlanes=oe,r.numIntersection=0,se}}function Fl(B){let r=new WeakMap;function a(R,L){return L===He?R.mapping=Pe:L===Fe&&(R.mapping=Te),R}function h(R){if(R&&R.isTexture&&R.isRenderTargetTexture===!1){const L=R.mapping;if(L===He||L===Fe)if(r.has(R)){const H=r.get(R).texture;return a(H,R.mapping)}else{const H=R.image;if(H&&H.height>0){const j=new Zp(H.height/2);return j.fromEquirectangularTexture(B,R),r.set(R,j),R.addEventListener("dispose",p),a(j.texture,R.mapping)}else return null}}return R}function p(R){const L=R.target;L.removeEventListener("dispose",p);const H=r.get(L);H!==void 0&&(r.delete(L),H.dispose())}function w(){r=new WeakMap}return{get:h,dispose:w}}class kl extends Jp{constructor(r=-1,a=1,h=1,p=-1,w=.1,R=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r,this.right=a,this.top=h,this.bottom=p,this.near=w,this.far=R,this.updateProjectionMatrix()}copy(r,a){return super.copy(r,a),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=r.view===null?null:Object.assign({},r.view),this}setViewOffset(r,a,h,p,w,R){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=a,this.view.offsetX=h,this.view.offsetY=p,this.view.width=w,this.view.height=R,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,p=(this.top+this.bottom)/2;let w=h-r,R=h+r,L=p+a,H=p-a;if(this.view!==null&&this.view.enabled){const j=(this.right-this.left)/this.view.fullWidth/this.zoom,X=(this.top-this.bottom)/this.view.fullHeight/this.zoom;w+=j*this.view.offsetX,R=w+j*this.view.width,L-=X*this.view.offsetY,H=L-X*this.view.height}this.projectionMatrix.makeOrthographic(w,R,L,H,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const a=super.toJSON(r);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,this.view!==null&&(a.object.view=Object.assign({},this.view)),a}}const td=4,H0=[.125,.215,.35,.446,.526,.582],Nu=20,V0=new kl,E1=new si;let j0=null;const Uu=(1+Math.sqrt(5))/2,nd=1/Uu,_1=[new je(1,1,1),new je(-1,1,1),new je(1,1,-1),new je(-1,1,-1),new je(0,Uu,nd),new je(0,Uu,-nd),new je(nd,0,Uu),new je(-nd,0,Uu),new je(Uu,nd,0),new je(-Uu,nd,0)];class Q0{constructor(r){this._renderer=r,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(r,a=0,h=.1,p=100){j0=this._renderer.getRenderTarget(),this._setSize(256);const w=this._allocateTargets();return w.depthBuffer=!0,this._sceneToCubeUV(r,h,p,w),a>0&&this._blur(w,0,0,a),this._applyPMREM(w),this._cleanup(w),w}fromEquirectangular(r,a=null){return this._fromTexture(r,a)}fromCubemap(r,a=null){return this._fromTexture(r,a)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=K0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=W0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(r){this._lodMax=Math.floor(Math.log2(r)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let r=0;r<this._lodPlanes.length;r++)this._lodPlanes[r].dispose()}_cleanup(r){this._renderer.setRenderTarget(j0),r.scissorTest=!1,dm(r,0,0,r.width,r.height)}_fromTexture(r,a){r.mapping===Pe||r.mapping===Te?this._setSize(r.image.length===0?16:r.image[0].width||r.image[0].image.width):this._setSize(r.image.width/4),j0=this._renderer.getRenderTarget();const h=a||this._allocateTargets();return this._textureToCubeUV(r,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(){const r=3*Math.max(this._cubeSize,112),a=4*this._cubeSize,h={magFilter:qe,minFilter:qe,generateMipmaps:!1,type:Qt,format:Li,encoding:ui,depthBuffer:!1},p=b1(r,a,h);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=b1(r,a,h);const{_lodMax:w}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=A2(w)),this._blurMaterial=w1(w,r,a)}return p}_compileMaterial(r){const a=new as(this._lodPlanes[0],r);this._renderer.compile(a,V0)}_sceneToCubeUV(r,a,h,p){const L=new Vs(90,1,a,h),H=[1,-1,1,1,1,1],j=[1,1,1,-1,-1,-1],X=this._renderer,$=X.autoClear,Z=X.toneMapping;X.getClearColor(E1),X.toneMapping=Wn,X.autoClear=!1;const te=new eu({name:"PMREM.Background",side:T,depthWrite:!1,depthTest:!1}),le=new as(new Js,te);let oe=!1;const se=r.background;se?se.isColor&&(te.color.copy(se),r.background=null,oe=!0):(te.color.copy(E1),oe=!0);for(let ve=0;ve<6;ve++){const De=ve%3;De===0?(L.up.set(0,H[ve],0),L.lookAt(j[ve],0,0)):De===1?(L.up.set(0,0,H[ve]),L.lookAt(0,j[ve],0)):(L.up.set(0,H[ve],0),L.lookAt(0,0,j[ve]));const Ce=this._cubeSize;dm(p,De*Ce,ve>2?Ce:0,Ce,Ce),X.setRenderTarget(p),oe&&X.render(le,L),X.render(r,L)}le.geometry.dispose(),le.material.dispose(),X.toneMapping=Z,X.autoClear=$,r.background=se}_textureToCubeUV(r,a){const h=this._renderer,p=r.mapping===Pe||r.mapping===Te;p?(this._cubemapMaterial===null&&(this._cubemapMaterial=K0()),this._cubemapMaterial.uniforms.flipEnvMap.value=r.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=W0());const w=p?this._cubemapMaterial:this._equirectMaterial,R=new as(this._lodPlanes[0],w),L=w.uniforms;L.envMap.value=r;const H=this._cubeSize;dm(a,0,0,3*H,2*H),h.setRenderTarget(a),h.render(R,V0)}_applyPMREM(r){const a=this._renderer,h=a.autoClear;a.autoClear=!1;for(let p=1;p<this._lodPlanes.length;p++){const w=Math.sqrt(this._sigmas[p]*this._sigmas[p]-this._sigmas[p-1]*this._sigmas[p-1]),R=_1[(p-1)%_1.length];this._blur(r,p-1,p,w,R)}a.autoClear=h}_blur(r,a,h,p,w){const R=this._pingPongRenderTarget;this._halfBlur(r,R,a,h,p,"latitudinal",w),this._halfBlur(R,r,h,h,p,"longitudinal",w)}_halfBlur(r,a,h,p,w,R,L){const H=this._renderer,j=this._blurMaterial;R!=="latitudinal"&&R!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const X=3,$=new as(this._lodPlanes[p],j),Z=j.uniforms,te=this._sizeLods[h]-1,le=isFinite(w)?Math.PI/(2*te):2*Math.PI/(2*Nu-1),oe=w/le,se=isFinite(w)?1+Math.floor(X*oe):Nu;se>Nu&&console.warn(`sigmaRadians, ${w}, is too large and will clip, as it requested ${se} samples when the maximum is set to ${Nu}`);const ve=[];let De=0;for(let ft=0;ft<Nu;++ft){const Oe=ft/oe,ot=Math.exp(-Oe*Oe/2);ve.push(ot),ft===0?De+=ot:ft<se&&(De+=2*ot)}for(let ft=0;ft<ve.length;ft++)ve[ft]=ve[ft]/De;Z.envMap.value=r.texture,Z.samples.value=se,Z.weights.value=ve,Z.latitudinal.value=R==="latitudinal",L&&(Z.poleAxis.value=L);const{_lodMax:Ce}=this;Z.dTheta.value=le,Z.mipInt.value=Ce-h;const Le=this._sizeLods[p],ze=3*Le*(p>Ce-td?p-Ce+td:0),tt=4*(this._cubeSize-Le);dm(a,ze,tt,3*Le,2*Le),H.setRenderTarget(a),H.render($,V0)}}function A2(B){const r=[],a=[],h=[];let p=B;const w=B-td+1+H0.length;for(let R=0;R<w;R++){const L=Math.pow(2,p);a.push(L);let H=1/L;R>B-td?H=H0[R-B+td-1]:R===0&&(H=0),h.push(H);const j=1/(L-2),X=-j,$=1+j,Z=[X,X,$,X,$,$,X,X,$,$,X,$],te=6,le=6,oe=3,se=2,ve=1,De=new Float32Array(oe*le*te),Ce=new Float32Array(se*le*te),Le=new Float32Array(ve*le*te);for(let tt=0;tt<te;tt++){const ft=tt%3*2/3-1,Oe=tt>2?0:-1,ot=[ft,Oe,0,ft+2/3,Oe,0,ft+2/3,Oe+1,0,ft,Oe,0,ft+2/3,Oe+1,0,ft,Oe+1,0];De.set(ot,oe*le*tt),Ce.set(Z,se*le*tt);const ut=[tt,tt,tt,tt,tt,tt];Le.set(ut,ve*le*tt)}const ze=new pr;ze.setAttribute("position",new ts(De,oe)),ze.setAttribute("uv",new ts(Ce,se)),ze.setAttribute("faceIndex",new ts(Le,ve)),r.push(ze),p>td&&p--}return{lodPlanes:r,sizeLods:a,sigmas:h}}function b1(B,r,a){const h=new Qo(B,r,a);return h.texture.mapping=Ue,h.texture.name="PMREM.cubeUv",h.scissorTest=!0,h}function dm(B,r,a,h,p){B.viewport.set(r,a,h,p),B.scissor.set(r,a,h,p)}function w1(B,r,a){const h=new Float32Array(Nu),p=new je(0,1,0);return new va({name:"SphericalGaussianBlur",defines:{n:Nu,CUBEUV_TEXEL_WIDTH:1/r,CUBEUV_TEXEL_HEIGHT:1/a,CUBEUV_MAX_MIP:`${B}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:h},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:p}},vertexShader:X0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:P,depthTest:!1,depthWrite:!1})}function W0(){return new va({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:X0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:P,depthTest:!1,depthWrite:!1})}function K0(){return new va({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:X0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:P,depthTest:!1,depthWrite:!1})}function X0(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function v2(B){let r=new WeakMap,a=null;function h(L){if(L&&L.isTexture){const H=L.mapping,j=H===He||H===Fe,X=H===Pe||H===Te;if(j||X)if(L.isRenderTargetTexture&&L.needsPMREMUpdate===!0){L.needsPMREMUpdate=!1;let $=r.get(L);return a===null&&(a=new Q0(B)),$=j?a.fromEquirectangular(L,$):a.fromCubemap(L,$),r.set(L,$),$.texture}else{if(r.has(L))return r.get(L).texture;{const $=L.image;if(j&&$&&$.height>0||X&&$&&p($)){a===null&&(a=new Q0(B));const Z=j?a.fromEquirectangular(L):a.fromCubemap(L);return r.set(L,Z),L.addEventListener("dispose",w),Z.texture}else return null}}}return L}function p(L){let H=0;const j=6;for(let X=0;X<j;X++)L[X]!==void 0&&H++;return H===j}function w(L){const H=L.target;H.removeEventListener("dispose",w);const j=r.get(H);j!==void 0&&(r.delete(H),j.dispose())}function R(){r=new WeakMap,a!==null&&(a.dispose(),a=null)}return{get:h,dispose:R}}function y2(B){const r={};function a(h){if(r[h]!==void 0)return r[h];let p;switch(h){case"WEBGL_depth_texture":p=B.getExtension("WEBGL_depth_texture")||B.getExtension("MOZ_WEBGL_depth_texture")||B.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":p=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":p=B.getExtension("WEBGL_compressed_texture_s3tc")||B.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":p=B.getExtension("WEBGL_compressed_texture_pvrtc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:p=B.getExtension(h)}return r[h]=p,p}return{has:function(h){return a(h)!==null},init:function(h){h.isWebGL2?a("EXT_color_buffer_float"):(a("WEBGL_depth_texture"),a("OES_texture_float"),a("OES_texture_half_float"),a("OES_texture_half_float_linear"),a("OES_standard_derivatives"),a("OES_element_index_uint"),a("OES_vertex_array_object"),a("ANGLE_instanced_arrays")),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float"),a("WEBGL_multisampled_render_to_texture")},get:function(h){const p=a(h);return p===null&&console.warn("THREE.WebGLRenderer: "+h+" extension not supported."),p}}}function C1(B,r,a,h){const p={},w=new WeakMap;function R($){const Z=$.target;Z.index!==null&&r.remove(Z.index);for(const le in Z.attributes)r.remove(Z.attributes[le]);Z.removeEventListener("dispose",R),delete p[Z.id];const te=w.get(Z);te&&(r.remove(te),w.delete(Z)),h.releaseStatesOfGeometry(Z),Z.isInstancedBufferGeometry===!0&&delete Z._maxInstanceCount,a.memory.geometries--}function L($,Z){return p[Z.id]===!0||(Z.addEventListener("dispose",R),p[Z.id]=!0,a.memory.geometries++),Z}function H($){const Z=$.attributes;for(const le in Z)r.update(Z[le],34962);const te=$.morphAttributes;for(const le in te){const oe=te[le];for(let se=0,ve=oe.length;se<ve;se++)r.update(oe[se],34962)}}function j($){const Z=[],te=$.index,le=$.attributes.position;let oe=0;if(te!==null){const De=te.array;oe=te.version;for(let Ce=0,Le=De.length;Ce<Le;Ce+=3){const ze=De[Ce+0],tt=De[Ce+1],ft=De[Ce+2];Z.push(ze,tt,tt,ft,ft,ze)}}else{const De=le.array;oe=le.version;for(let Ce=0,Le=De.length/3-1;Ce<Le;Ce+=3){const ze=Ce+0,tt=Ce+1,ft=Ce+2;Z.push(ze,tt,tt,ft,ft,ze)}}const se=new(uf(Z)?p0:ll)(Z,1);se.version=oe;const ve=w.get($);ve&&r.remove(ve),w.set($,se)}function X($){const Z=w.get($);if(Z){const te=$.index;te!==null&&Z.version<te.version&&j($)}else j($);return w.get($)}return{get:L,update:H,getWireframeAttribute:X}}function x2(B,r,a,h){const p=h.isWebGL2;let w;function R(Z){w=Z}let L,H;function j(Z){L=Z.type,H=Z.bytesPerElement}function X(Z,te){B.drawElements(w,te,L,Z*H),a.update(te,w,1)}function $(Z,te,le){if(le===0)return;let oe,se;if(p)oe=B,se="drawElementsInstanced";else if(oe=r.get("ANGLE_instanced_arrays"),se="drawElementsInstancedANGLE",oe===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}oe[se](w,te,L,Z*H,le),a.update(te,w,le)}this.setMode=R,this.setIndex=j,this.render=X,this.renderInstances=$}function E2(B){const r={geometries:0,textures:0},a={frame:0,calls:0,triangles:0,points:0,lines:0};function h(w,R,L){switch(a.calls++,R){case 4:a.triangles+=L*(w/3);break;case 1:a.lines+=L*(w/2);break;case 3:a.lines+=L*(w-1);break;case 2:a.lines+=L*w;break;case 0:a.points+=L*w;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",R);break}}function p(){a.frame++,a.calls=0,a.triangles=0,a.points=0,a.lines=0}return{memory:r,render:a,programs:null,autoReset:!0,reset:p,update:h}}function _2(B,r){return B[0]-r[0]}function b2(B,r){return Math.abs(r[1])-Math.abs(B[1])}function w2(B,r,a){const h={},p=new Float32Array(8),w=new WeakMap,R=new kr,L=[];for(let j=0;j<8;j++)L[j]=[j,0];function H(j,X,$,Z){const te=j.morphTargetInfluences;if(r.isWebGL2===!0){const oe=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,se=oe!==void 0?oe.length:0;let ve=w.get(X);if(ve===void 0||ve.count!==se){let fn=function(){bt.dispose(),w.delete(X),X.removeEventListener("dispose",fn)};var le=fn;ve!==void 0&&ve.texture.dispose();const Le=X.morphAttributes.position!==void 0,ze=X.morphAttributes.normal!==void 0,tt=X.morphAttributes.color!==void 0,ft=X.morphAttributes.position||[],Oe=X.morphAttributes.normal||[],ot=X.morphAttributes.color||[];let ut=0;Le===!0&&(ut=1),ze===!0&&(ut=2),tt===!0&&(ut=3);let Tt=X.attributes.position.count*ut,jt=1;Tt>r.maxTextureSize&&(jt=Math.ceil(Tt/r.maxTextureSize),Tt=r.maxTextureSize);const Lt=new Float32Array(Tt*jt*4*se),bt=new Pu(Lt,Tt,jt,se);bt.type=Tn,bt.needsUpdate=!0;const Ut=ut*4;for(let xn=0;xn<se;xn++){const hn=ft[xn],Dn=Oe[xn],In=ot[xn],fi=Tt*jt*4*xn;for(let ni=0;ni<hn.count;ni++){const qt=ni*Ut;Le===!0&&(R.fromBufferAttribute(hn,ni),Lt[fi+qt+0]=R.x,Lt[fi+qt+1]=R.y,Lt[fi+qt+2]=R.z,Lt[fi+qt+3]=0),ze===!0&&(R.fromBufferAttribute(Dn,ni),Lt[fi+qt+4]=R.x,Lt[fi+qt+5]=R.y,Lt[fi+qt+6]=R.z,Lt[fi+qt+7]=0),tt===!0&&(R.fromBufferAttribute(In,ni),Lt[fi+qt+8]=R.x,Lt[fi+qt+9]=R.y,Lt[fi+qt+10]=R.z,Lt[fi+qt+11]=In.itemSize===4?R.w:1)}}ve={count:se,texture:bt,size:new un(Tt,jt)},w.set(X,ve),X.addEventListener("dispose",fn)}let De=0;for(let Le=0;Le<te.length;Le++)De+=te[Le];const Ce=X.morphTargetsRelative?1:1-De;Z.getUniforms().setValue(B,"morphTargetBaseInfluence",Ce),Z.getUniforms().setValue(B,"morphTargetInfluences",te),Z.getUniforms().setValue(B,"morphTargetsTexture",ve.texture,a),Z.getUniforms().setValue(B,"morphTargetsTextureSize",ve.size)}else{const oe=te===void 0?0:te.length;let se=h[X.id];if(se===void 0||se.length!==oe){se=[];for(let ze=0;ze<oe;ze++)se[ze]=[ze,0];h[X.id]=se}for(let ze=0;ze<oe;ze++){const tt=se[ze];tt[0]=ze,tt[1]=te[ze]}se.sort(b2);for(let ze=0;ze<8;ze++)ze<oe&&se[ze][1]?(L[ze][0]=se[ze][0],L[ze][1]=se[ze][1]):(L[ze][0]=Number.MAX_SAFE_INTEGER,L[ze][1]=0);L.sort(_2);const ve=X.morphAttributes.position,De=X.morphAttributes.normal;let Ce=0;for(let ze=0;ze<8;ze++){const tt=L[ze],ft=tt[0],Oe=tt[1];ft!==Number.MAX_SAFE_INTEGER&&Oe?(ve&&X.getAttribute("morphTarget"+ze)!==ve[ft]&&X.setAttribute("morphTarget"+ze,ve[ft]),De&&X.getAttribute("morphNormal"+ze)!==De[ft]&&X.setAttribute("morphNormal"+ze,De[ft]),p[ze]=Oe,Ce+=Oe):(ve&&X.hasAttribute("morphTarget"+ze)===!0&&X.deleteAttribute("morphTarget"+ze),De&&X.hasAttribute("morphNormal"+ze)===!0&&X.deleteAttribute("morphNormal"+ze),p[ze]=0)}const Le=X.morphTargetsRelative?1:1-Ce;Z.getUniforms().setValue(B,"morphTargetBaseInfluence",Le),Z.getUniforms().setValue(B,"morphTargetInfluences",p)}}return{update:H}}function C2(B,r,a,h){let p=new WeakMap;function w(H){const j=h.render.frame,X=H.geometry,$=r.get(H,X);return p.get($)!==j&&(r.update($),p.set($,j)),H.isInstancedMesh&&(H.hasEventListener("dispose",L)===!1&&H.addEventListener("dispose",L),a.update(H.instanceMatrix,34962),H.instanceColor!==null&&a.update(H.instanceColor,34962)),$}function R(){p=new WeakMap}function L(H){const j=H.target;j.removeEventListener("dispose",L),a.remove(j.instanceMatrix),j.instanceColor!==null&&a.remove(j.instanceColor)}return{update:w,dispose:R}}const xa=new vs,M1=new Pu,S1=new yt,T1=new Xo,Y0=[],I1=[],R1=new Float32Array(16),L1=new Float32Array(9),B1=new Float32Array(4);function du(B,r,a){const h=B[0];if(h<=0||h>0)return B;const p=r*a;let w=Y0[p];if(w===void 0&&(w=new Float32Array(p),Y0[p]=w),r!==0){h.toArray(w,0);for(let R=1,L=0;R!==r;++R)L+=a,B[R].toArray(w,L)}return w}function Zs(B,r){if(B.length!==r.length)return!1;for(let a=0,h=B.length;a<h;a++)if(B[a]!==r[a])return!1;return!0}function eo(B,r){for(let a=0,h=r.length;a<h;a++)B[a]=r[a]}function fm(B,r){let a=I1[r];a===void 0&&(a=new Int32Array(r),I1[r]=a);for(let h=0;h!==r;++h)a[h]=B.allocateTextureUnit();return a}function M2(B,r){const a=this.cache;a[0]!==r&&(B.uniform1f(this.addr,r),a[0]=r)}function S2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y)&&(B.uniform2f(this.addr,r.x,r.y),a[0]=r.x,a[1]=r.y);else{if(Zs(a,r))return;B.uniform2fv(this.addr,r),eo(a,r)}}function T2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y||a[2]!==r.z)&&(B.uniform3f(this.addr,r.x,r.y,r.z),a[0]=r.x,a[1]=r.y,a[2]=r.z);else if(r.r!==void 0)(a[0]!==r.r||a[1]!==r.g||a[2]!==r.b)&&(B.uniform3f(this.addr,r.r,r.g,r.b),a[0]=r.r,a[1]=r.g,a[2]=r.b);else{if(Zs(a,r))return;B.uniform3fv(this.addr,r),eo(a,r)}}function I2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y||a[2]!==r.z||a[3]!==r.w)&&(B.uniform4f(this.addr,r.x,r.y,r.z,r.w),a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=r.w);else{if(Zs(a,r))return;B.uniform4fv(this.addr,r),eo(a,r)}}function R2(B,r){const a=this.cache,h=r.elements;if(h===void 0){if(Zs(a,r))return;B.uniformMatrix2fv(this.addr,!1,r),eo(a,r)}else{if(Zs(a,h))return;B1.set(h),B.uniformMatrix2fv(this.addr,!1,B1),eo(a,h)}}function L2(B,r){const a=this.cache,h=r.elements;if(h===void 0){if(Zs(a,r))return;B.uniformMatrix3fv(this.addr,!1,r),eo(a,r)}else{if(Zs(a,h))return;L1.set(h),B.uniformMatrix3fv(this.addr,!1,L1),eo(a,h)}}function B2(B,r){const a=this.cache,h=r.elements;if(h===void 0){if(Zs(a,r))return;B.uniformMatrix4fv(this.addr,!1,r),eo(a,r)}else{if(Zs(a,h))return;R1.set(h),B.uniformMatrix4fv(this.addr,!1,R1),eo(a,h)}}function D2(B,r){const a=this.cache;a[0]!==r&&(B.uniform1i(this.addr,r),a[0]=r)}function P2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y)&&(B.uniform2i(this.addr,r.x,r.y),a[0]=r.x,a[1]=r.y);else{if(Zs(a,r))return;B.uniform2iv(this.addr,r),eo(a,r)}}function O2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y||a[2]!==r.z)&&(B.uniform3i(this.addr,r.x,r.y,r.z),a[0]=r.x,a[1]=r.y,a[2]=r.z);else{if(Zs(a,r))return;B.uniform3iv(this.addr,r),eo(a,r)}}function F2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y||a[2]!==r.z||a[3]!==r.w)&&(B.uniform4i(this.addr,r.x,r.y,r.z,r.w),a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=r.w);else{if(Zs(a,r))return;B.uniform4iv(this.addr,r),eo(a,r)}}function k2(B,r){const a=this.cache;a[0]!==r&&(B.uniform1ui(this.addr,r),a[0]=r)}function N2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y)&&(B.uniform2ui(this.addr,r.x,r.y),a[0]=r.x,a[1]=r.y);else{if(Zs(a,r))return;B.uniform2uiv(this.addr,r),eo(a,r)}}function U2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y||a[2]!==r.z)&&(B.uniform3ui(this.addr,r.x,r.y,r.z),a[0]=r.x,a[1]=r.y,a[2]=r.z);else{if(Zs(a,r))return;B.uniform3uiv(this.addr,r),eo(a,r)}}function G2(B,r){const a=this.cache;if(r.x!==void 0)(a[0]!==r.x||a[1]!==r.y||a[2]!==r.z||a[3]!==r.w)&&(B.uniform4ui(this.addr,r.x,r.y,r.z,r.w),a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=r.w);else{if(Zs(a,r))return;B.uniform4uiv(this.addr,r),eo(a,r)}}function z2(B,r,a){const h=this.cache,p=a.allocateTextureUnit();h[0]!==p&&(B.uniform1i(this.addr,p),h[0]=p),a.setTexture2D(r||xa,p)}function H2(B,r,a){const h=this.cache,p=a.allocateTextureUnit();h[0]!==p&&(B.uniform1i(this.addr,p),h[0]=p),a.setTexture3D(r||S1,p)}function q0(B,r,a){const h=this.cache,p=a.allocateTextureUnit();h[0]!==p&&(B.uniform1i(this.addr,p),h[0]=p),a.setTextureCube(r||T1,p)}function D1(B,r,a){const h=this.cache,p=a.allocateTextureUnit();h[0]!==p&&(B.uniform1i(this.addr,p),h[0]=p),a.setTexture2DArray(r||M1,p)}function V2(B){switch(B){case 5126:return M2;case 35664:return S2;case 35665:return T2;case 35666:return I2;case 35674:return R2;case 35675:return L2;case 35676:return B2;case 5124:case 35670:return D2;case 35667:case 35671:return P2;case 35668:case 35672:return O2;case 35669:case 35673:return F2;case 5125:return k2;case 36294:return N2;case 36295:return U2;case 36296:return G2;case 35678:case 36198:case 36298:case 36306:case 35682:return z2;case 35679:case 36299:case 36307:return H2;case 35680:case 36300:case 36308:case 36293:return q0;case 36289:case 36303:case 36311:case 36292:return D1}}function j2(B,r){B.uniform1fv(this.addr,r)}function Q2(B,r){const a=du(r,this.size,2);B.uniform2fv(this.addr,a)}function W2(B,r){const a=du(r,this.size,3);B.uniform3fv(this.addr,a)}function K2(B,r){const a=du(r,this.size,4);B.uniform4fv(this.addr,a)}function X2(B,r){const a=du(r,this.size,4);B.uniformMatrix2fv(this.addr,!1,a)}function Y2(B,r){const a=du(r,this.size,9);B.uniformMatrix3fv(this.addr,!1,a)}function q2(B,r){const a=du(r,this.size,16);B.uniformMatrix4fv(this.addr,!1,a)}function P1(B,r){B.uniform1iv(this.addr,r)}function $2(B,r){B.uniform2iv(this.addr,r)}function pm(B,r){B.uniform3iv(this.addr,r)}function J2(B,r){B.uniform4iv(this.addr,r)}function Z2(B,r){B.uniform1uiv(this.addr,r)}function ew(B,r){B.uniform2uiv(this.addr,r)}function tw(B,r){B.uniform3uiv(this.addr,r)}function nw(B,r){B.uniform4uiv(this.addr,r)}function iw(B,r,a){const h=this.cache,p=r.length,w=fm(a,p);Zs(h,w)||(B.uniform1iv(this.addr,w),eo(h,w));for(let R=0;R!==p;++R)a.setTexture2D(r[R]||xa,w[R])}function rw(B,r,a){const h=this.cache,p=r.length,w=fm(a,p);Zs(h,w)||(B.uniform1iv(this.addr,w),eo(h,w));for(let R=0;R!==p;++R)a.setTexture3D(r[R]||S1,w[R])}function sw(B,r,a){const h=this.cache,p=r.length,w=fm(a,p);Zs(h,w)||(B.uniform1iv(this.addr,w),eo(h,w));for(let R=0;R!==p;++R)a.setTextureCube(r[R]||T1,w[R])}function ow(B,r,a){const h=this.cache,p=r.length,w=fm(a,p);Zs(h,w)||(B.uniform1iv(this.addr,w),eo(h,w));for(let R=0;R!==p;++R)a.setTexture2DArray(r[R]||M1,w[R])}function aw(B){switch(B){case 5126:return j2;case 35664:return Q2;case 35665:return W2;case 35666:return K2;case 35674:return X2;case 35675:return Y2;case 35676:return q2;case 5124:case 35670:return P1;case 35667:case 35671:return $2;case 35668:case 35672:return pm;case 35669:case 35673:return J2;case 5125:return Z2;case 36294:return ew;case 36295:return tw;case 36296:return nw;case 35678:case 36198:case 36298:case 36306:case 35682:return iw;case 35679:case 36299:case 36307:return rw;case 35680:case 36300:case 36308:case 36293:return sw;case 36289:case 36303:case 36311:case 36292:return ow}}class lw{constructor(r,a,h){this.id=r,this.addr=h,this.cache=[],this.setValue=V2(a.type)}}class cw{constructor(r,a,h){this.id=r,this.addr=h,this.cache=[],this.size=a.size,this.setValue=aw(a.type)}}class uw{constructor(r){this.id=r,this.seq=[],this.map={}}setValue(r,a,h){const p=this.seq;for(let w=0,R=p.length;w!==R;++w){const L=p[w];L.setValue(r,a[L.id],h)}}}const $0=/(\w+)(\])?(\[|\.)?/g;function O1(B,r){B.seq.push(r),B.map[r.id]=r}function hw(B,r,a){const h=B.name,p=h.length;for($0.lastIndex=0;;){const w=$0.exec(h),R=$0.lastIndex;let L=w[1];const H=w[2]==="]",j=w[3];if(H&&(L=L|0),j===void 0||j==="["&&R+2===p){O1(a,j===void 0?new lw(L,B,r):new cw(L,B,r));break}else{let $=a.map[L];$===void 0&&($=new uw(L),O1(a,$)),a=$}}}class Af{constructor(r,a){this.seq=[],this.map={};const h=r.getProgramParameter(a,35718);for(let p=0;p<h;++p){const w=r.getActiveUniform(a,p),R=r.getUniformLocation(a,w.name);hw(w,R,this)}}setValue(r,a,h,p){const w=this.map[a];w!==void 0&&w.setValue(r,h,p)}setOptional(r,a,h){const p=a[h];p!==void 0&&this.setValue(r,h,p)}static upload(r,a,h,p){for(let w=0,R=a.length;w!==R;++w){const L=a[w],H=h[L.id];H.needsUpdate!==!1&&L.setValue(r,H.value,p)}}static seqWithValue(r,a){const h=[];for(let p=0,w=r.length;p!==w;++p){const R=r[p];R.id in a&&h.push(R)}return h}}function J0(B,r,a){const h=B.createShader(r);return B.shaderSource(h,a),B.compileShader(h),h}let dw=0;function fw(B,r){const a=B.split(`
`),h=[],p=Math.max(r-6,0),w=Math.min(r+6,a.length);for(let R=p;R<w;R++){const L=R+1;h.push(`${L===r?">":" "} ${L}: ${a[R]}`)}return h.join(`
`)}function pw(B){switch(B){case ui:return["Linear","( value )"];case Ln:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",B),["Linear","( value )"]}}function F1(B,r,a){const h=B.getShaderParameter(r,35713),p=B.getShaderInfoLog(r).trim();if(h&&p==="")return"";const w=/ERROR: 0:(\d+)/.exec(p);if(w){const R=parseInt(w[1]);return a.toUpperCase()+`

`+p+`

`+fw(B.getShaderSource(r),R)}else return p}function mm(B,r){const a=pw(r);return"vec4 "+B+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function mw(B,r){let a;switch(r){case Ai:a="Linear";break;case Ti:a="Reinhard";break;case Je:a="OptimizedCineon";break;case we:a="ACESFilmic";break;case ge:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),a="Linear"}return"vec3 "+B+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function gw(B){return[B.extensionDerivatives||B.envMapCubeUVHeight||B.bumpMap||B.tangentSpaceNormalMap||B.clearcoatNormalMap||B.flatShading||B.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(B.extensionFragDepth||B.logarithmicDepthBuffer)&&B.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",B.extensionDrawBuffers&&B.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(B.extensionShaderTextureLOD||B.envMap||B.transmission)&&B.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(vf).join(`
`)}function Aw(B){const r=[];for(const a in B){const h=B[a];h!==!1&&r.push("#define "+a+" "+h)}return r.join(`
`)}function vw(B,r){const a={},h=B.getProgramParameter(r,35721);for(let p=0;p<h;p++){const w=B.getActiveAttrib(r,p),R=w.name;let L=1;w.type===35674&&(L=2),w.type===35675&&(L=3),w.type===35676&&(L=4),a[R]={type:w.type,location:B.getAttribLocation(r,R),locationSize:L}}return a}function vf(B){return B!==""}function k1(B,r){const a=r.numSpotLightShadows+r.numSpotLightMaps-r.numSpotLightShadowsWithMaps;return B.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,r.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,a).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,r.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function N1(B,r){return B.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}const yw=/^[ \t]*#include +<([\w\d./]+)>/gm;function Z0(B){return B.replace(yw,xw)}function xw(B,r){const a=cr[r];if(a===void 0)throw new Error("Can not resolve #include <"+r+">");return Z0(a)}const Ew=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yf(B){return B.replace(Ew,_w)}function _w(B,r,a,h){let p="";for(let w=parseInt(r);w<parseInt(a);w++)p+=h.replace(/\[\s*i\s*\]/g,"[ "+w+" ]").replace(/UNROLLED_LOOP_INDEX/g,w);return p}function eA(B){let r="precision "+B.precision+` float;
precision `+B.precision+" int;";return B.precision==="highp"?r+=`
#define HIGH_PRECISION`:B.precision==="mediump"?r+=`
#define MEDIUM_PRECISION`:B.precision==="lowp"&&(r+=`
#define LOW_PRECISION`),r}function U1(B){let r="SHADOWMAP_TYPE_BASIC";return B.shadowMapType===m?r="SHADOWMAP_TYPE_PCF":B.shadowMapType===S?r="SHADOWMAP_TYPE_PCF_SOFT":B.shadowMapType===C&&(r="SHADOWMAP_TYPE_VSM"),r}function tA(B){let r="ENVMAP_TYPE_CUBE";if(B.envMap)switch(B.envMapMode){case Pe:case Te:r="ENVMAP_TYPE_CUBE";break;case Ue:r="ENVMAP_TYPE_CUBE_UV";break}return r}function G1(B){let r="ENVMAP_MODE_REFLECTION";if(B.envMap)switch(B.envMapMode){case Te:r="ENVMAP_MODE_REFRACTION";break}return r}function z1(B){let r="ENVMAP_BLENDING_NONE";if(B.envMap)switch(B.combine){case vn:r="ENVMAP_BLENDING_MULTIPLY";break;case Rn:r="ENVMAP_BLENDING_MIX";break;case zn:r="ENVMAP_BLENDING_ADD";break}return r}function H1(B){const r=B.envMapCubeUVHeight;if(r===null)return null;const a=Math.log2(r)-2,h=1/r;return{texelWidth:1/(3*Math.max(Math.pow(2,a),7*16)),texelHeight:h,maxMip:a}}function V1(B,r,a,h){const p=B.getContext(),w=a.defines;let R=a.vertexShader,L=a.fragmentShader;const H=U1(a),j=tA(a),X=G1(a),$=z1(a),Z=H1(a),te=a.isWebGL2?"":gw(a),le=Aw(w),oe=p.createProgram();let se,ve,De=a.glslVersion?"#version "+a.glslVersion+`
`:"";a.isRawShaderMaterial?(se=[le].filter(vf).join(`
`),se.length>0&&(se+=`
`),ve=[te,le].filter(vf).join(`
`),ve.length>0&&(ve+=`
`)):(se=[eA(a),"#define SHADER_NAME "+a.shaderName,le,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+X:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.morphColors&&a.isWebGL2?"#define USE_MORPHCOLORS":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+a.morphTextureStride:"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+H:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vf).join(`
`),ve=[te,eA(a),"#define SHADER_NAME "+a.shaderName,le,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+j:"",a.envMap?"#define "+X:"",a.envMap?"#define "+$:"",Z?"#define CUBEUV_TEXEL_WIDTH "+Z.texelWidth:"",Z?"#define CUBEUV_TEXEL_HEIGHT "+Z.texelHeight:"",Z?"#define CUBEUV_MAX_MIP "+Z.maxMip+".0":"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescence?"#define USE_IRIDESCENCE":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+H:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==Wn?"#define TONE_MAPPING":"",a.toneMapping!==Wn?cr.tonemapping_pars_fragment:"",a.toneMapping!==Wn?mw("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.opaque?"#define OPAQUE":"",cr.encodings_pars_fragment,mm("linearToOutputTexel",a.outputEncoding),a.useDepthPacking?"#define DEPTH_PACKING "+a.depthPacking:"",`
`].filter(vf).join(`
`)),R=Z0(R),R=k1(R,a),R=N1(R,a),L=Z0(L),L=k1(L,a),L=N1(L,a),R=yf(R),L=yf(L),a.isWebGL2&&a.isRawShaderMaterial!==!0&&(De=`#version 300 es
`,se=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+se,ve=["#define varying in",a.glslVersion===sf?"":"layout(location = 0) out highp vec4 pc_fragColor;",a.glslVersion===sf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ve);const Ce=De+se+R,Le=De+ve+L,ze=J0(p,35633,Ce),tt=J0(p,35632,Le);if(p.attachShader(oe,ze),p.attachShader(oe,tt),a.index0AttributeName!==void 0?p.bindAttribLocation(oe,0,a.index0AttributeName):a.morphTargets===!0&&p.bindAttribLocation(oe,0,"position"),p.linkProgram(oe),B.debug.checkShaderErrors){const ot=p.getProgramInfoLog(oe).trim(),ut=p.getShaderInfoLog(ze).trim(),Tt=p.getShaderInfoLog(tt).trim();let jt=!0,Lt=!0;if(p.getProgramParameter(oe,35714)===!1){jt=!1;const bt=F1(p,ze,"vertex"),Ut=F1(p,tt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+p.getError()+" - VALIDATE_STATUS "+p.getProgramParameter(oe,35715)+`

Program Info Log: `+ot+`
`+bt+`
`+Ut)}else ot!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ot):(ut===""||Tt==="")&&(Lt=!1);Lt&&(this.diagnostics={runnable:jt,programLog:ot,vertexShader:{log:ut,prefix:se},fragmentShader:{log:Tt,prefix:ve}})}p.deleteShader(ze),p.deleteShader(tt);let ft;this.getUniforms=function(){return ft===void 0&&(ft=new Af(p,oe)),ft};let Oe;return this.getAttributes=function(){return Oe===void 0&&(Oe=vw(p,oe)),Oe},this.destroy=function(){h.releaseStatesOfProgram(this),p.deleteProgram(oe),this.program=void 0},this.name=a.shaderName,this.id=dw++,this.cacheKey=r,this.usedTimes=1,this.program=oe,this.vertexShader=ze,this.fragmentShader=tt,this}let bw=0;class ww{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(r){const a=r.vertexShader,h=r.fragmentShader,p=this._getShaderStage(a),w=this._getShaderStage(h),R=this._getShaderCacheForMaterial(r);return R.has(p)===!1&&(R.add(p),p.usedTimes++),R.has(w)===!1&&(R.add(w),w.usedTimes++),this}remove(r){const a=this.materialCache.get(r);for(const h of a)h.usedTimes--,h.usedTimes===0&&this.shaderCache.delete(h.code);return this.materialCache.delete(r),this}getVertexShaderID(r){return this._getShaderStage(r.vertexShader).id}getFragmentShaderID(r){return this._getShaderStage(r.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(r){const a=this.materialCache;let h=a.get(r);return h===void 0&&(h=new Set,a.set(r,h)),h}_getShaderStage(r){const a=this.shaderCache;let h=a.get(r);return h===void 0&&(h=new Cw(r),a.set(r,h)),h}}class Cw{constructor(r){this.id=bw++,this.code=r,this.usedTimes=0}}function gm(B,r,a,h,p,w,R){const L=new Fi,H=new ww,j=[],X=p.isWebGL2,$=p.logarithmicDepthBuffer,Z=p.vertexTextures;let te=p.precision;const le={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function oe(Oe,ot,ut,Tt,jt){const Lt=Tt.fog,bt=jt.geometry,Ut=Oe.isMeshStandardMaterial?Tt.environment:null,fn=(Oe.isMeshStandardMaterial?a:r).get(Oe.envMap||Ut),xn=fn&&fn.mapping===Ue?fn.image.height:null,hn=le[Oe.type];Oe.precision!==null&&(te=p.getMaxPrecision(Oe.precision),te!==Oe.precision&&console.warn("THREE.WebGLProgram.getParameters:",Oe.precision,"not supported, using",te,"instead."));const Dn=bt.morphAttributes.position||bt.morphAttributes.normal||bt.morphAttributes.color,In=Dn!==void 0?Dn.length:0;let fi=0;bt.morphAttributes.position!==void 0&&(fi=1),bt.morphAttributes.normal!==void 0&&(fi=2),bt.morphAttributes.color!==void 0&&(fi=3);let ni,qt,En,$n;if(hn){const yr=ja[hn];ni=yr.vertexShader,qt=yr.fragmentShader}else ni=Oe.vertexShader,qt=Oe.fragmentShader,H.update(Oe),En=H.getVertexShaderID(Oe),$n=H.getFragmentShaderID(Oe);const Ht=B.getRenderTarget(),gi=Oe.alphaTest>0,Zn=Oe.clearcoat>0,Ni=Oe.iridescence>0;return{isWebGL2:X,shaderID:hn,shaderName:Oe.type,vertexShader:ni,fragmentShader:qt,defines:Oe.defines,customVertexShaderID:En,customFragmentShaderID:$n,isRawShaderMaterial:Oe.isRawShaderMaterial===!0,glslVersion:Oe.glslVersion,precision:te,instancing:jt.isInstancedMesh===!0,instancingColor:jt.isInstancedMesh===!0&&jt.instanceColor!==null,supportsVertexTextures:Z,outputEncoding:Ht===null?B.outputEncoding:Ht.isXRRenderTarget===!0?Ht.texture.encoding:ui,map:!!Oe.map,matcap:!!Oe.matcap,envMap:!!fn,envMapMode:fn&&fn.mapping,envMapCubeUVHeight:xn,lightMap:!!Oe.lightMap,aoMap:!!Oe.aoMap,emissiveMap:!!Oe.emissiveMap,bumpMap:!!Oe.bumpMap,normalMap:!!Oe.normalMap,objectSpaceNormalMap:Oe.normalMapType===Ri,tangentSpaceNormalMap:Oe.normalMapType===vi,decodeVideoTexture:!!Oe.map&&Oe.map.isVideoTexture===!0&&Oe.map.encoding===Ln,clearcoat:Zn,clearcoatMap:Zn&&!!Oe.clearcoatMap,clearcoatRoughnessMap:Zn&&!!Oe.clearcoatRoughnessMap,clearcoatNormalMap:Zn&&!!Oe.clearcoatNormalMap,iridescence:Ni,iridescenceMap:Ni&&!!Oe.iridescenceMap,iridescenceThicknessMap:Ni&&!!Oe.iridescenceThicknessMap,displacementMap:!!Oe.displacementMap,roughnessMap:!!Oe.roughnessMap,metalnessMap:!!Oe.metalnessMap,specularMap:!!Oe.specularMap,specularIntensityMap:!!Oe.specularIntensityMap,specularColorMap:!!Oe.specularColorMap,opaque:Oe.transparent===!1&&Oe.blending===k,alphaMap:!!Oe.alphaMap,alphaTest:gi,gradientMap:!!Oe.gradientMap,sheen:Oe.sheen>0,sheenColorMap:!!Oe.sheenColorMap,sheenRoughnessMap:!!Oe.sheenRoughnessMap,transmission:Oe.transmission>0,transmissionMap:!!Oe.transmissionMap,thicknessMap:!!Oe.thicknessMap,combine:Oe.combine,vertexTangents:!!Oe.normalMap&&!!bt.attributes.tangent,vertexColors:Oe.vertexColors,vertexAlphas:Oe.vertexColors===!0&&!!bt.attributes.color&&bt.attributes.color.itemSize===4,vertexUvs:!!Oe.map||!!Oe.bumpMap||!!Oe.normalMap||!!Oe.specularMap||!!Oe.alphaMap||!!Oe.emissiveMap||!!Oe.roughnessMap||!!Oe.metalnessMap||!!Oe.clearcoatMap||!!Oe.clearcoatRoughnessMap||!!Oe.clearcoatNormalMap||!!Oe.iridescenceMap||!!Oe.iridescenceThicknessMap||!!Oe.displacementMap||!!Oe.transmissionMap||!!Oe.thicknessMap||!!Oe.specularIntensityMap||!!Oe.specularColorMap||!!Oe.sheenColorMap||!!Oe.sheenRoughnessMap,uvsVertexOnly:!(Oe.map||Oe.bumpMap||Oe.normalMap||Oe.specularMap||Oe.alphaMap||Oe.emissiveMap||Oe.roughnessMap||Oe.metalnessMap||Oe.clearcoatNormalMap||Oe.iridescenceMap||Oe.iridescenceThicknessMap||Oe.transmission>0||Oe.transmissionMap||Oe.thicknessMap||Oe.specularIntensityMap||Oe.specularColorMap||Oe.sheen>0||Oe.sheenColorMap||Oe.sheenRoughnessMap)&&!!Oe.displacementMap,fog:!!Lt,useFog:Oe.fog===!0,fogExp2:Lt&&Lt.isFogExp2,flatShading:!!Oe.flatShading,sizeAttenuation:Oe.sizeAttenuation,logarithmicDepthBuffer:$,skinning:jt.isSkinnedMesh===!0,morphTargets:bt.morphAttributes.position!==void 0,morphNormals:bt.morphAttributes.normal!==void 0,morphColors:bt.morphAttributes.color!==void 0,morphTargetsCount:In,morphTextureStride:fi,numDirLights:ot.directional.length,numPointLights:ot.point.length,numSpotLights:ot.spot.length,numSpotLightMaps:ot.spotLightMap.length,numRectAreaLights:ot.rectArea.length,numHemiLights:ot.hemi.length,numDirLightShadows:ot.directionalShadowMap.length,numPointLightShadows:ot.pointShadowMap.length,numSpotLightShadows:ot.spotShadowMap.length,numSpotLightShadowsWithMaps:ot.numSpotLightShadowsWithMaps,numClippingPlanes:R.numPlanes,numClipIntersection:R.numIntersection,dithering:Oe.dithering,shadowMapEnabled:B.shadowMap.enabled&&ut.length>0,shadowMapType:B.shadowMap.type,toneMapping:Oe.toneMapped?B.toneMapping:Wn,physicallyCorrectLights:B.physicallyCorrectLights,premultipliedAlpha:Oe.premultipliedAlpha,doubleSided:Oe.side===N,flipSided:Oe.side===T,useDepthPacking:!!Oe.depthPacking,depthPacking:Oe.depthPacking||0,index0AttributeName:Oe.index0AttributeName,extensionDerivatives:Oe.extensions&&Oe.extensions.derivatives,extensionFragDepth:Oe.extensions&&Oe.extensions.fragDepth,extensionDrawBuffers:Oe.extensions&&Oe.extensions.drawBuffers,extensionShaderTextureLOD:Oe.extensions&&Oe.extensions.shaderTextureLOD,rendererExtensionFragDepth:X||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:X||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:X||h.has("EXT_shader_texture_lod"),customProgramCacheKey:Oe.customProgramCacheKey()}}function se(Oe){const ot=[];if(Oe.shaderID?ot.push(Oe.shaderID):(ot.push(Oe.customVertexShaderID),ot.push(Oe.customFragmentShaderID)),Oe.defines!==void 0)for(const ut in Oe.defines)ot.push(ut),ot.push(Oe.defines[ut]);return Oe.isRawShaderMaterial===!1&&(ve(ot,Oe),De(ot,Oe),ot.push(B.outputEncoding)),ot.push(Oe.customProgramCacheKey),ot.join()}function ve(Oe,ot){Oe.push(ot.precision),Oe.push(ot.outputEncoding),Oe.push(ot.envMapMode),Oe.push(ot.envMapCubeUVHeight),Oe.push(ot.combine),Oe.push(ot.vertexUvs),Oe.push(ot.fogExp2),Oe.push(ot.sizeAttenuation),Oe.push(ot.morphTargetsCount),Oe.push(ot.morphAttributeCount),Oe.push(ot.numDirLights),Oe.push(ot.numPointLights),Oe.push(ot.numSpotLights),Oe.push(ot.numSpotLightMaps),Oe.push(ot.numHemiLights),Oe.push(ot.numRectAreaLights),Oe.push(ot.numDirLightShadows),Oe.push(ot.numPointLightShadows),Oe.push(ot.numSpotLightShadows),Oe.push(ot.numSpotLightShadowsWithMaps),Oe.push(ot.shadowMapType),Oe.push(ot.toneMapping),Oe.push(ot.numClippingPlanes),Oe.push(ot.numClipIntersection),Oe.push(ot.depthPacking)}function De(Oe,ot){L.disableAll(),ot.isWebGL2&&L.enable(0),ot.supportsVertexTextures&&L.enable(1),ot.instancing&&L.enable(2),ot.instancingColor&&L.enable(3),ot.map&&L.enable(4),ot.matcap&&L.enable(5),ot.envMap&&L.enable(6),ot.lightMap&&L.enable(7),ot.aoMap&&L.enable(8),ot.emissiveMap&&L.enable(9),ot.bumpMap&&L.enable(10),ot.normalMap&&L.enable(11),ot.objectSpaceNormalMap&&L.enable(12),ot.tangentSpaceNormalMap&&L.enable(13),ot.clearcoat&&L.enable(14),ot.clearcoatMap&&L.enable(15),ot.clearcoatRoughnessMap&&L.enable(16),ot.clearcoatNormalMap&&L.enable(17),ot.iridescence&&L.enable(18),ot.iridescenceMap&&L.enable(19),ot.iridescenceThicknessMap&&L.enable(20),ot.displacementMap&&L.enable(21),ot.specularMap&&L.enable(22),ot.roughnessMap&&L.enable(23),ot.metalnessMap&&L.enable(24),ot.gradientMap&&L.enable(25),ot.alphaMap&&L.enable(26),ot.alphaTest&&L.enable(27),ot.vertexColors&&L.enable(28),ot.vertexAlphas&&L.enable(29),ot.vertexUvs&&L.enable(30),ot.vertexTangents&&L.enable(31),ot.uvsVertexOnly&&L.enable(32),Oe.push(L.mask),L.disableAll(),ot.fog&&L.enable(0),ot.useFog&&L.enable(1),ot.flatShading&&L.enable(2),ot.logarithmicDepthBuffer&&L.enable(3),ot.skinning&&L.enable(4),ot.morphTargets&&L.enable(5),ot.morphNormals&&L.enable(6),ot.morphColors&&L.enable(7),ot.premultipliedAlpha&&L.enable(8),ot.shadowMapEnabled&&L.enable(9),ot.physicallyCorrectLights&&L.enable(10),ot.doubleSided&&L.enable(11),ot.flipSided&&L.enable(12),ot.useDepthPacking&&L.enable(13),ot.dithering&&L.enable(14),ot.specularIntensityMap&&L.enable(15),ot.specularColorMap&&L.enable(16),ot.transmission&&L.enable(17),ot.transmissionMap&&L.enable(18),ot.thicknessMap&&L.enable(19),ot.sheen&&L.enable(20),ot.sheenColorMap&&L.enable(21),ot.sheenRoughnessMap&&L.enable(22),ot.decodeVideoTexture&&L.enable(23),ot.opaque&&L.enable(24),Oe.push(L.mask)}function Ce(Oe){const ot=le[Oe.type];let ut;if(ot){const Tt=ja[ot];ut=dc.clone(Tt.uniforms)}else ut=Oe.uniforms;return ut}function Le(Oe,ot){let ut;for(let Tt=0,jt=j.length;Tt<jt;Tt++){const Lt=j[Tt];if(Lt.cacheKey===ot){ut=Lt,++ut.usedTimes;break}}return ut===void 0&&(ut=new V1(B,ot,Oe,w),j.push(ut)),ut}function ze(Oe){if(--Oe.usedTimes===0){const ot=j.indexOf(Oe);j[ot]=j[j.length-1],j.pop(),Oe.destroy()}}function tt(Oe){H.remove(Oe)}function ft(){H.dispose()}return{getParameters:oe,getProgramCacheKey:se,getUniforms:Ce,acquireProgram:Le,releaseProgram:ze,releaseShaderCache:tt,programs:j,dispose:ft}}function Am(){let B=new WeakMap;function r(w){let R=B.get(w);return R===void 0&&(R={},B.set(w,R)),R}function a(w){B.delete(w)}function h(w,R,L){B.get(w)[R]=L}function p(){B=new WeakMap}return{get:r,remove:a,update:h,dispose:p}}function Mw(B,r){return B.groupOrder!==r.groupOrder?B.groupOrder-r.groupOrder:B.renderOrder!==r.renderOrder?B.renderOrder-r.renderOrder:B.material.id!==r.material.id?B.material.id-r.material.id:B.z!==r.z?B.z-r.z:B.id-r.id}function j1(B,r){return B.groupOrder!==r.groupOrder?B.groupOrder-r.groupOrder:B.renderOrder!==r.renderOrder?B.renderOrder-r.renderOrder:B.z!==r.z?r.z-B.z:B.id-r.id}function vm(){const B=[];let r=0;const a=[],h=[],p=[];function w(){r=0,a.length=0,h.length=0,p.length=0}function R($,Z,te,le,oe,se){let ve=B[r];return ve===void 0?(ve={id:$.id,object:$,geometry:Z,material:te,groupOrder:le,renderOrder:$.renderOrder,z:oe,group:se},B[r]=ve):(ve.id=$.id,ve.object=$,ve.geometry=Z,ve.material=te,ve.groupOrder=le,ve.renderOrder=$.renderOrder,ve.z=oe,ve.group=se),r++,ve}function L($,Z,te,le,oe,se){const ve=R($,Z,te,le,oe,se);te.transmission>0?h.push(ve):te.transparent===!0?p.push(ve):a.push(ve)}function H($,Z,te,le,oe,se){const ve=R($,Z,te,le,oe,se);te.transmission>0?h.unshift(ve):te.transparent===!0?p.unshift(ve):a.unshift(ve)}function j($,Z){a.length>1&&a.sort($||Mw),h.length>1&&h.sort(Z||j1),p.length>1&&p.sort(Z||j1)}function X(){for(let $=r,Z=B.length;$<Z;$++){const te=B[$];if(te.id===null)break;te.id=null,te.object=null,te.geometry=null,te.material=null,te.group=null}}return{opaque:a,transmissive:h,transparent:p,init:w,push:L,unshift:H,finish:X,sort:j}}function Q1(){let B=new WeakMap;function r(h,p){const w=B.get(h);let R;return w===void 0?(R=new vm,B.set(h,[R])):p>=w.length?(R=new vm,w.push(R)):R=w[p],R}function a(){B=new WeakMap}return{get:r,dispose:a}}function Sw(){const B={};return{get:function(r){if(B[r.id]!==void 0)return B[r.id];let a;switch(r.type){case"DirectionalLight":a={direction:new je,color:new si};break;case"SpotLight":a={position:new je,direction:new je,color:new si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new je,color:new si,distance:0,decay:0};break;case"HemisphereLight":a={direction:new je,skyColor:new si,groundColor:new si};break;case"RectAreaLight":a={color:new si,position:new je,halfWidth:new je,halfHeight:new je};break}return B[r.id]=a,a}}}function Tw(){const B={};return{get:function(r){if(B[r.id]!==void 0)return B[r.id];let a;switch(r.type){case"DirectionalLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un};break;case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un,shadowCameraNear:1,shadowCameraFar:1e3};break}return B[r.id]=a,a}}}let Iw=0;function Rw(B,r){return(r.castShadow?2:0)-(B.castShadow?2:0)+(r.map?1:0)-(B.map?1:0)}function Lw(B,r){const a=new Sw,h=Tw(),p={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let X=0;X<9;X++)p.probe.push(new je);const w=new je,R=new oi,L=new oi;function H(X,$){let Z=0,te=0,le=0;for(let Tt=0;Tt<9;Tt++)p.probe[Tt].set(0,0,0);let oe=0,se=0,ve=0,De=0,Ce=0,Le=0,ze=0,tt=0,ft=0,Oe=0;X.sort(Rw);const ot=$!==!0?Math.PI:1;for(let Tt=0,jt=X.length;Tt<jt;Tt++){const Lt=X[Tt],bt=Lt.color,Ut=Lt.intensity,fn=Lt.distance,xn=Lt.shadow&&Lt.shadow.map?Lt.shadow.map.texture:null;if(Lt.isAmbientLight)Z+=bt.r*Ut*ot,te+=bt.g*Ut*ot,le+=bt.b*Ut*ot;else if(Lt.isLightProbe)for(let hn=0;hn<9;hn++)p.probe[hn].addScaledVector(Lt.sh.coefficients[hn],Ut);else if(Lt.isDirectionalLight){const hn=a.get(Lt);if(hn.color.copy(Lt.color).multiplyScalar(Lt.intensity*ot),Lt.castShadow){const Dn=Lt.shadow,In=h.get(Lt);In.shadowBias=Dn.bias,In.shadowNormalBias=Dn.normalBias,In.shadowRadius=Dn.radius,In.shadowMapSize=Dn.mapSize,p.directionalShadow[oe]=In,p.directionalShadowMap[oe]=xn,p.directionalShadowMatrix[oe]=Lt.shadow.matrix,Le++}p.directional[oe]=hn,oe++}else if(Lt.isSpotLight){const hn=a.get(Lt);hn.position.setFromMatrixPosition(Lt.matrixWorld),hn.color.copy(bt).multiplyScalar(Ut*ot),hn.distance=fn,hn.coneCos=Math.cos(Lt.angle),hn.penumbraCos=Math.cos(Lt.angle*(1-Lt.penumbra)),hn.decay=Lt.decay,p.spot[ve]=hn;const Dn=Lt.shadow;if(Lt.map&&(p.spotLightMap[ft]=Lt.map,ft++,Dn.updateMatrices(Lt),Lt.castShadow&&Oe++),p.spotLightMatrix[ve]=Dn.matrix,Lt.castShadow){const In=h.get(Lt);In.shadowBias=Dn.bias,In.shadowNormalBias=Dn.normalBias,In.shadowRadius=Dn.radius,In.shadowMapSize=Dn.mapSize,p.spotShadow[ve]=In,p.spotShadowMap[ve]=xn,tt++}ve++}else if(Lt.isRectAreaLight){const hn=a.get(Lt);hn.color.copy(bt).multiplyScalar(Ut),hn.halfWidth.set(Lt.width*.5,0,0),hn.halfHeight.set(0,Lt.height*.5,0),p.rectArea[De]=hn,De++}else if(Lt.isPointLight){const hn=a.get(Lt);if(hn.color.copy(Lt.color).multiplyScalar(Lt.intensity*ot),hn.distance=Lt.distance,hn.decay=Lt.decay,Lt.castShadow){const Dn=Lt.shadow,In=h.get(Lt);In.shadowBias=Dn.bias,In.shadowNormalBias=Dn.normalBias,In.shadowRadius=Dn.radius,In.shadowMapSize=Dn.mapSize,In.shadowCameraNear=Dn.camera.near,In.shadowCameraFar=Dn.camera.far,p.pointShadow[se]=In,p.pointShadowMap[se]=xn,p.pointShadowMatrix[se]=Lt.shadow.matrix,ze++}p.point[se]=hn,se++}else if(Lt.isHemisphereLight){const hn=a.get(Lt);hn.skyColor.copy(Lt.color).multiplyScalar(Ut*ot),hn.groundColor.copy(Lt.groundColor).multiplyScalar(Ut*ot),p.hemi[Ce]=hn,Ce++}}De>0&&(r.isWebGL2||B.has("OES_texture_float_linear")===!0?(p.rectAreaLTC1=Hn.LTC_FLOAT_1,p.rectAreaLTC2=Hn.LTC_FLOAT_2):B.has("OES_texture_half_float_linear")===!0?(p.rectAreaLTC1=Hn.LTC_HALF_1,p.rectAreaLTC2=Hn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),p.ambient[0]=Z,p.ambient[1]=te,p.ambient[2]=le;const ut=p.hash;(ut.directionalLength!==oe||ut.pointLength!==se||ut.spotLength!==ve||ut.rectAreaLength!==De||ut.hemiLength!==Ce||ut.numDirectionalShadows!==Le||ut.numPointShadows!==ze||ut.numSpotShadows!==tt||ut.numSpotMaps!==ft)&&(p.directional.length=oe,p.spot.length=ve,p.rectArea.length=De,p.point.length=se,p.hemi.length=Ce,p.directionalShadow.length=Le,p.directionalShadowMap.length=Le,p.pointShadow.length=ze,p.pointShadowMap.length=ze,p.spotShadow.length=tt,p.spotShadowMap.length=tt,p.directionalShadowMatrix.length=Le,p.pointShadowMatrix.length=ze,p.spotLightMatrix.length=tt+ft-Oe,p.spotLightMap.length=ft,p.numSpotLightShadowsWithMaps=Oe,ut.directionalLength=oe,ut.pointLength=se,ut.spotLength=ve,ut.rectAreaLength=De,ut.hemiLength=Ce,ut.numDirectionalShadows=Le,ut.numPointShadows=ze,ut.numSpotShadows=tt,ut.numSpotMaps=ft,p.version=Iw++)}function j(X,$){let Z=0,te=0,le=0,oe=0,se=0;const ve=$.matrixWorldInverse;for(let De=0,Ce=X.length;De<Ce;De++){const Le=X[De];if(Le.isDirectionalLight){const ze=p.directional[Z];ze.direction.setFromMatrixPosition(Le.matrixWorld),w.setFromMatrixPosition(Le.target.matrixWorld),ze.direction.sub(w),ze.direction.transformDirection(ve),Z++}else if(Le.isSpotLight){const ze=p.spot[le];ze.position.setFromMatrixPosition(Le.matrixWorld),ze.position.applyMatrix4(ve),ze.direction.setFromMatrixPosition(Le.matrixWorld),w.setFromMatrixPosition(Le.target.matrixWorld),ze.direction.sub(w),ze.direction.transformDirection(ve),le++}else if(Le.isRectAreaLight){const ze=p.rectArea[oe];ze.position.setFromMatrixPosition(Le.matrixWorld),ze.position.applyMatrix4(ve),L.identity(),R.copy(Le.matrixWorld),R.premultiply(ve),L.extractRotation(R),ze.halfWidth.set(Le.width*.5,0,0),ze.halfHeight.set(0,Le.height*.5,0),ze.halfWidth.applyMatrix4(L),ze.halfHeight.applyMatrix4(L),oe++}else if(Le.isPointLight){const ze=p.point[te];ze.position.setFromMatrixPosition(Le.matrixWorld),ze.position.applyMatrix4(ve),te++}else if(Le.isHemisphereLight){const ze=p.hemi[se];ze.direction.setFromMatrixPosition(Le.matrixWorld),ze.direction.transformDirection(ve),se++}}}return{setup:H,setupView:j,state:p}}function W1(B,r){const a=new Lw(B,r),h=[],p=[];function w(){h.length=0,p.length=0}function R($){h.push($)}function L($){p.push($)}function H($){a.setup(h,$)}function j($){a.setupView(h,$)}return{init:w,state:{lightsArray:h,shadowsArray:p,lights:a},setupLights:H,setupLightsView:j,pushLight:R,pushShadow:L}}function Bw(B,r){let a=new WeakMap;function h(w,R=0){const L=a.get(w);let H;return L===void 0?(H=new W1(B,r),a.set(w,[H])):R>=L.length?(H=new W1(B,r),L.push(H)):H=L[R],H}function p(){a=new WeakMap}return{get:h,dispose:p}}class nA extends yo{constructor(r){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=di,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(r)}copy(r){return super.copy(r),this.depthPacking=r.depthPacking,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this}}class iA extends yo{constructor(r){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new je,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(r)}copy(r){return super.copy(r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this}}const Dw=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Pw=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ow(B,r,a){let h=new tm;const p=new un,w=new un,R=new kr,L=new nA({depthPacking:Kn}),H=new iA,j={},X=a.maxTextureSize,$={0:T,1:M,2:N},Z=new va({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new un},radius:{value:4}},vertexShader:Dw,fragmentShader:Pw}),te=Z.clone();te.defines.HORIZONTAL_PASS=1;const le=new pr;le.setAttribute("position",new ts(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const oe=new as(le,Z),se=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=m,this.render=function(Le,ze,tt){if(se.enabled===!1||se.autoUpdate===!1&&se.needsUpdate===!1||Le.length===0)return;const ft=B.getRenderTarget(),Oe=B.getActiveCubeFace(),ot=B.getActiveMipmapLevel(),ut=B.state;ut.setBlending(P),ut.buffers.color.setClear(1,1,1,1),ut.buffers.depth.setTest(!0),ut.setScissorTest(!1);for(let Tt=0,jt=Le.length;Tt<jt;Tt++){const Lt=Le[Tt],bt=Lt.shadow;if(bt===void 0){console.warn("THREE.WebGLShadowMap:",Lt,"has no shadow.");continue}if(bt.autoUpdate===!1&&bt.needsUpdate===!1)continue;p.copy(bt.mapSize);const Ut=bt.getFrameExtents();if(p.multiply(Ut),w.copy(bt.mapSize),(p.x>X||p.y>X)&&(p.x>X&&(w.x=Math.floor(X/Ut.x),p.x=w.x*Ut.x,bt.mapSize.x=w.x),p.y>X&&(w.y=Math.floor(X/Ut.y),p.y=w.y*Ut.y,bt.mapSize.y=w.y)),bt.map===null){const xn=this.type!==C?{minFilter:ue,magFilter:ue}:{};bt.map=new Qo(p.x,p.y,xn),bt.map.texture.name=Lt.name+".shadowMap",bt.camera.updateProjectionMatrix()}B.setRenderTarget(bt.map),B.clear();const fn=bt.getViewportCount();for(let xn=0;xn<fn;xn++){const hn=bt.getViewport(xn);R.set(w.x*hn.x,w.y*hn.y,w.x*hn.z,w.y*hn.w),ut.viewport(R),bt.updateMatrices(Lt,xn),h=bt.getFrustum(),Ce(ze,tt,bt.camera,Lt,this.type)}bt.isPointLightShadow!==!0&&this.type===C&&ve(bt,tt),bt.needsUpdate=!1}se.needsUpdate=!1,B.setRenderTarget(ft,Oe,ot)};function ve(Le,ze){const tt=r.update(oe);Z.defines.VSM_SAMPLES!==Le.blurSamples&&(Z.defines.VSM_SAMPLES=Le.blurSamples,te.defines.VSM_SAMPLES=Le.blurSamples,Z.needsUpdate=!0,te.needsUpdate=!0),Le.mapPass===null&&(Le.mapPass=new Qo(p.x,p.y)),Z.uniforms.shadow_pass.value=Le.map.texture,Z.uniforms.resolution.value=Le.mapSize,Z.uniforms.radius.value=Le.radius,B.setRenderTarget(Le.mapPass),B.clear(),B.renderBufferDirect(ze,null,tt,Z,oe,null),te.uniforms.shadow_pass.value=Le.mapPass.texture,te.uniforms.resolution.value=Le.mapSize,te.uniforms.radius.value=Le.radius,B.setRenderTarget(Le.map),B.clear(),B.renderBufferDirect(ze,null,tt,te,oe,null)}function De(Le,ze,tt,ft,Oe,ot){let ut=null;const Tt=tt.isPointLight===!0?Le.customDistanceMaterial:Le.customDepthMaterial;if(Tt!==void 0?ut=Tt:ut=tt.isPointLight===!0?H:L,B.localClippingEnabled&&ze.clipShadows===!0&&Array.isArray(ze.clippingPlanes)&&ze.clippingPlanes.length!==0||ze.displacementMap&&ze.displacementScale!==0||ze.alphaMap&&ze.alphaTest>0||ze.map&&ze.alphaTest>0){const jt=ut.uuid,Lt=ze.uuid;let bt=j[jt];bt===void 0&&(bt={},j[jt]=bt);let Ut=bt[Lt];Ut===void 0&&(Ut=ut.clone(),bt[Lt]=Ut),ut=Ut}return ut.visible=ze.visible,ut.wireframe=ze.wireframe,ot===C?ut.side=ze.shadowSide!==null?ze.shadowSide:ze.side:ut.side=ze.shadowSide!==null?ze.shadowSide:$[ze.side],ut.alphaMap=ze.alphaMap,ut.alphaTest=ze.alphaTest,ut.map=ze.map,ut.clipShadows=ze.clipShadows,ut.clippingPlanes=ze.clippingPlanes,ut.clipIntersection=ze.clipIntersection,ut.displacementMap=ze.displacementMap,ut.displacementScale=ze.displacementScale,ut.displacementBias=ze.displacementBias,ut.wireframeLinewidth=ze.wireframeLinewidth,ut.linewidth=ze.linewidth,tt.isPointLight===!0&&ut.isMeshDistanceMaterial===!0&&(ut.referencePosition.setFromMatrixPosition(tt.matrixWorld),ut.nearDistance=ft,ut.farDistance=Oe),ut}function Ce(Le,ze,tt,ft,Oe){if(Le.visible===!1)return;if(Le.layers.test(ze.layers)&&(Le.isMesh||Le.isLine||Le.isPoints)&&(Le.castShadow||Le.receiveShadow&&Oe===C)&&(!Le.frustumCulled||h.intersectsObject(Le))){Le.modelViewMatrix.multiplyMatrices(tt.matrixWorldInverse,Le.matrixWorld);const Tt=r.update(Le),jt=Le.material;if(Array.isArray(jt)){const Lt=Tt.groups;for(let bt=0,Ut=Lt.length;bt<Ut;bt++){const fn=Lt[bt],xn=jt[fn.materialIndex];if(xn&&xn.visible){const hn=De(Le,xn,ft,tt.near,tt.far,Oe);B.renderBufferDirect(tt,null,Tt,hn,Le,fn)}}}else if(jt.visible){const Lt=De(Le,jt,ft,tt.near,tt.far,Oe);B.renderBufferDirect(tt,null,Tt,Lt,Le,null)}}const ut=Le.children;for(let Tt=0,jt=ut.length;Tt<jt;Tt++)Ce(ut[Tt],ze,tt,ft,Oe)}}function cl(B,r,a){const h=a.isWebGL2;function p(){let _t=!1;const tn=new kr;let Bn=null;const pi=new kr(0,0,0,0);return{setMask:function(Bi){Bn!==Bi&&!_t&&(B.colorMask(Bi,Bi,Bi,Bi),Bn=Bi)},setLocked:function(Bi){_t=Bi},setClear:function(Bi,Zr,wo,Zo,Xf){Xf===!0&&(Bi*=Zo,Zr*=Zo,wo*=Zo),tn.set(Bi,Zr,wo,Zo),pi.equals(tn)===!1&&(B.clearColor(Bi,Zr,wo,Zo),pi.copy(tn))},reset:function(){_t=!1,Bn=null,pi.set(-1,0,0,0)}}}function w(){let _t=!1,tn=null,Bn=null,pi=null;return{setTest:function(Bi){Bi?gi(2929):Zn(2929)},setMask:function(Bi){tn!==Bi&&!_t&&(B.depthMask(Bi),tn=Bi)},setFunc:function(Bi){if(Bn!==Bi){switch(Bi){case mt:B.depthFunc(512);break;case Ft:B.depthFunc(519);break;case Pt:B.depthFunc(513);break;case nt:B.depthFunc(515);break;case Fn:B.depthFunc(514);break;case Xt:B.depthFunc(518);break;case on:B.depthFunc(516);break;case nn:B.depthFunc(517);break;default:B.depthFunc(515)}Bn=Bi}},setLocked:function(Bi){_t=Bi},setClear:function(Bi){pi!==Bi&&(B.clearDepth(Bi),pi=Bi)},reset:function(){_t=!1,tn=null,Bn=null,pi=null}}}function R(){let _t=!1,tn=null,Bn=null,pi=null,Bi=null,Zr=null,wo=null,Zo=null,Xf=null;return{setTest:function(Ls){_t||(Ls?gi(2960):Zn(2960))},setMask:function(Ls){tn!==Ls&&!_t&&(B.stencilMask(Ls),tn=Ls)},setFunc:function(Ls,qu,Hl){(Bn!==Ls||pi!==qu||Bi!==Hl)&&(B.stencilFunc(Ls,qu,Hl),Bn=Ls,pi=qu,Bi=Hl)},setOp:function(Ls,qu,Hl){(Zr!==Ls||wo!==qu||Zo!==Hl)&&(B.stencilOp(Ls,qu,Hl),Zr=Ls,wo=qu,Zo=Hl)},setLocked:function(Ls){_t=Ls},setClear:function(Ls){Xf!==Ls&&(B.clearStencil(Ls),Xf=Ls)},reset:function(){_t=!1,tn=null,Bn=null,pi=null,Bi=null,Zr=null,wo=null,Zo=null,Xf=null}}}const L=new p,H=new w,j=new R,X=new WeakMap,$=new WeakMap;let Z={},te={},le=new WeakMap,oe=[],se=null,ve=!1,De=null,Ce=null,Le=null,ze=null,tt=null,ft=null,Oe=null,ot=!1,ut=null,Tt=null,jt=null,Lt=null,bt=null;const Ut=B.getParameter(35661);let fn=!1,xn=0;const hn=B.getParameter(7938);hn.indexOf("WebGL")!==-1?(xn=parseFloat(/^WebGL (\d)/.exec(hn)[1]),fn=xn>=1):hn.indexOf("OpenGL ES")!==-1&&(xn=parseFloat(/^OpenGL ES (\d)/.exec(hn)[1]),fn=xn>=2);let Dn=null,In={};const fi=B.getParameter(3088),ni=B.getParameter(2978),qt=new kr().fromArray(fi),En=new kr().fromArray(ni);function $n(_t,tn,Bn){const pi=new Uint8Array(4),Bi=B.createTexture();B.bindTexture(_t,Bi),B.texParameteri(_t,10241,9728),B.texParameteri(_t,10240,9728);for(let Zr=0;Zr<Bn;Zr++)B.texImage2D(tn+Zr,0,6408,1,1,0,6408,5121,pi);return Bi}const Ht={};Ht[3553]=$n(3553,3553,1),Ht[34067]=$n(34067,34069,6),L.setClear(0,0,0,1),H.setClear(1),j.setClear(0),gi(2929),H.setFunc(nt),ii(!1),rr(v),gi(2884),Qn(P);function gi(_t){Z[_t]!==!0&&(B.enable(_t),Z[_t]=!0)}function Zn(_t){Z[_t]!==!1&&(B.disable(_t),Z[_t]=!1)}function Ni(_t,tn){return te[_t]!==tn?(B.bindFramebuffer(_t,tn),te[_t]=tn,h&&(_t===36009&&(te[36160]=tn),_t===36160&&(te[36009]=tn)),!0):!1}function Gn(_t,tn){let Bn=oe,pi=!1;if(_t)if(Bn=le.get(tn),Bn===void 0&&(Bn=[],le.set(tn,Bn)),_t.isWebGLMultipleRenderTargets){const Bi=_t.texture;if(Bn.length!==Bi.length||Bn[0]!==36064){for(let Zr=0,wo=Bi.length;Zr<wo;Zr++)Bn[Zr]=36064+Zr;Bn.length=Bi.length,pi=!0}}else Bn[0]!==36064&&(Bn[0]=36064,pi=!0);else Bn[0]!==1029&&(Bn[0]=1029,pi=!0);pi&&(a.isWebGL2?B.drawBuffers(Bn):r.get("WEBGL_draw_buffers").drawBuffersWEBGL(Bn))}function yr(_t){return se!==_t?(B.useProgram(_t),se=_t,!0):!1}const pn={[O]:32774,[F]:32778,[U]:32779};if(h)pn[G]=32775,pn[V]=32776;else{const _t=r.get("EXT_blend_minmax");_t!==null&&(pn[G]=_t.MIN_EXT,pn[V]=_t.MAX_EXT)}const ln={[K]:0,[W]:1,[J]:768,[he]:770,[st]:776,[rt]:774,[Be]:772,[ee]:769,[me]:771,[Ge]:775,[Se]:773};function Qn(_t,tn,Bn,pi,Bi,Zr,wo,Zo){if(_t===P){ve===!0&&(Zn(3042),ve=!1);return}if(ve===!1&&(gi(3042),ve=!0),_t!==ne){if(_t!==De||Zo!==ot){if((Ce!==O||tt!==O)&&(B.blendEquation(32774),Ce=O,tt=O),Zo)switch(_t){case k:B.blendFuncSeparate(1,771,1,771);break;case D:B.blendFunc(1,1);break;case z:B.blendFuncSeparate(0,769,0,1);break;case Y:B.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",_t);break}else switch(_t){case k:B.blendFuncSeparate(770,771,1,771);break;case D:B.blendFunc(770,1);break;case z:B.blendFuncSeparate(0,769,0,1);break;case Y:B.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",_t);break}Le=null,ze=null,ft=null,Oe=null,De=_t,ot=Zo}return}Bi=Bi||tn,Zr=Zr||Bn,wo=wo||pi,(tn!==Ce||Bi!==tt)&&(B.blendEquationSeparate(pn[tn],pn[Bi]),Ce=tn,tt=Bi),(Bn!==Le||pi!==ze||Zr!==ft||wo!==Oe)&&(B.blendFuncSeparate(ln[Bn],ln[pi],ln[Zr],ln[wo]),Le=Bn,ze=pi,ft=Zr,Oe=wo),De=_t,ot=!1}function Ii(_t,tn){_t.side===N?Zn(2884):gi(2884);let Bn=_t.side===T;tn&&(Bn=!Bn),ii(Bn),_t.blending===k&&_t.transparent===!1?Qn(P):Qn(_t.blending,_t.blendEquation,_t.blendSrc,_t.blendDst,_t.blendEquationAlpha,_t.blendSrcAlpha,_t.blendDstAlpha,_t.premultipliedAlpha),H.setFunc(_t.depthFunc),H.setTest(_t.depthTest),H.setMask(_t.depthWrite),L.setMask(_t.colorWrite);const pi=_t.stencilWrite;j.setTest(pi),pi&&(j.setMask(_t.stencilWriteMask),j.setFunc(_t.stencilFunc,_t.stencilRef,_t.stencilFuncMask),j.setOp(_t.stencilFail,_t.stencilZFail,_t.stencilZPass)),zi(_t.polygonOffset,_t.polygonOffsetFactor,_t.polygonOffsetUnits),_t.alphaToCoverage===!0?gi(32926):Zn(32926)}function ii(_t){ut!==_t&&(_t?B.frontFace(2304):B.frontFace(2305),ut=_t)}function rr(_t){_t!==y?(gi(2884),_t!==Tt&&(_t===v?B.cullFace(1029):_t===_?B.cullFace(1028):B.cullFace(1032))):Zn(2884),Tt=_t}function Ki(_t){_t!==jt&&(fn&&B.lineWidth(_t),jt=_t)}function zi(_t,tn,Bn){_t?(gi(32823),(Lt!==tn||bt!==Bn)&&(B.polygonOffset(tn,Bn),Lt=tn,bt=Bn)):Zn(32823)}function us(_t){_t?gi(3089):Zn(3089)}function ns(_t){_t===void 0&&(_t=33984+Ut-1),Dn!==_t&&(B.activeTexture(_t),Dn=_t)}function at(_t,tn,Bn){Bn===void 0&&(Dn===null?Bn=33984+Ut-1:Bn=Dn);let pi=In[Bn];pi===void 0&&(pi={type:void 0,texture:void 0},In[Bn]=pi),(pi.type!==_t||pi.texture!==tn)&&(Dn!==Bn&&(B.activeTexture(Bn),Dn=Bn),B.bindTexture(_t,tn||Ht[_t]),pi.type=_t,pi.texture=tn)}function $e(){const _t=In[Dn];_t!==void 0&&_t.type!==void 0&&(B.bindTexture(_t.type,null),_t.type=void 0,_t.texture=void 0)}function Kt(){try{B.compressedTexImage2D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function Pn(){try{B.compressedTexImage3D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function Vn(){try{B.texSubImage2D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function ai(){try{B.texSubImage3D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function tr(){try{B.compressedTexSubImage2D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function ci(){try{B.compressedTexSubImage3D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function cn(){try{B.texStorage2D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function Hi(){try{B.texStorage3D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function Zi(){try{B.texImage2D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function Ei(){try{B.texImage3D.apply(B,arguments)}catch(_t){console.error("THREE.WebGLState:",_t)}}function Xi(_t){qt.equals(_t)===!1&&(B.scissor(_t.x,_t.y,_t.z,_t.w),qt.copy(_t))}function Vi(_t){En.equals(_t)===!1&&(B.viewport(_t.x,_t.y,_t.z,_t.w),En.copy(_t))}function Yr(_t,tn){let Bn=$.get(tn);Bn===void 0&&(Bn=new WeakMap,$.set(tn,Bn));let pi=Bn.get(_t);pi===void 0&&(pi=B.getUniformBlockIndex(tn,_t.name),Bn.set(_t,pi))}function Rs(_t,tn){const pi=$.get(tn).get(_t);X.get(_t)!==pi&&(B.uniformBlockBinding(tn,pi,_t.__bindingPointIndex),X.set(_t,pi))}function bo(){B.disable(3042),B.disable(2884),B.disable(2929),B.disable(32823),B.disable(3089),B.disable(2960),B.disable(32926),B.blendEquation(32774),B.blendFunc(1,0),B.blendFuncSeparate(1,0,1,0),B.colorMask(!0,!0,!0,!0),B.clearColor(0,0,0,0),B.depthMask(!0),B.depthFunc(513),B.clearDepth(1),B.stencilMask(4294967295),B.stencilFunc(519,0,4294967295),B.stencilOp(7680,7680,7680),B.clearStencil(0),B.cullFace(1029),B.frontFace(2305),B.polygonOffset(0,0),B.activeTexture(33984),B.bindFramebuffer(36160,null),h===!0&&(B.bindFramebuffer(36009,null),B.bindFramebuffer(36008,null)),B.useProgram(null),B.lineWidth(1),B.scissor(0,0,B.canvas.width,B.canvas.height),B.viewport(0,0,B.canvas.width,B.canvas.height),Z={},Dn=null,In={},te={},le=new WeakMap,oe=[],se=null,ve=!1,De=null,Ce=null,Le=null,ze=null,tt=null,ft=null,Oe=null,ot=!1,ut=null,Tt=null,jt=null,Lt=null,bt=null,qt.set(0,0,B.canvas.width,B.canvas.height),En.set(0,0,B.canvas.width,B.canvas.height),L.reset(),H.reset(),j.reset()}return{buffers:{color:L,depth:H,stencil:j},enable:gi,disable:Zn,bindFramebuffer:Ni,drawBuffers:Gn,useProgram:yr,setBlending:Qn,setMaterial:Ii,setFlipSided:ii,setCullFace:rr,setLineWidth:Ki,setPolygonOffset:zi,setScissorTest:us,activeTexture:ns,bindTexture:at,unbindTexture:$e,compressedTexImage2D:Kt,compressedTexImage3D:Pn,texImage2D:Zi,texImage3D:Ei,updateUBOMapping:Yr,uniformBlockBinding:Rs,texStorage2D:cn,texStorage3D:Hi,texSubImage2D:Vn,texSubImage3D:ai,compressedTexSubImage2D:tr,compressedTexSubImage3D:ci,scissor:Xi,viewport:Vi,reset:bo}}function Fw(B,r,a,h,p,w,R){const L=p.isWebGL2,H=p.maxTextures,j=p.maxCubemapSize,X=p.maxTextureSize,$=p.maxSamples,Z=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):null,te=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),le=new WeakMap;let oe;const se=new WeakMap;let ve=!1;try{ve=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function De(at,$e){return ve?new OffscreenCanvas(at,$e):Du("canvas")}function Ce(at,$e,Kt,Pn){let Vn=1;if((at.width>Pn||at.height>Pn)&&(Vn=Pn/Math.max(at.width,at.height)),Vn<1||$e===!0)if(typeof HTMLImageElement<"u"&&at instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&at instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&at instanceof ImageBitmap){const ai=$e?Vc:Math.floor,tr=ai(Vn*at.width),ci=ai(Vn*at.height);oe===void 0&&(oe=De(tr,ci));const cn=Kt?De(tr,ci):oe;return cn.width=tr,cn.height=ci,cn.getContext("2d").drawImage(at,0,0,tr,ci),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+at.width+"x"+at.height+") to ("+tr+"x"+ci+")."),cn}else return"data"in at&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+at.width+"x"+at.height+")."),at;return at}function Le(at){return Fh(at.width)&&Fh(at.height)}function ze(at){return L?!1:at.wrapS!==Xe||at.wrapT!==Xe||at.minFilter!==ue&&at.minFilter!==qe}function tt(at,$e){return at.generateMipmaps&&$e&&at.minFilter!==ue&&at.minFilter!==qe}function ft(at){B.generateMipmap(at)}function Oe(at,$e,Kt,Pn,Vn=!1){if(L===!1)return $e;if(at!==null){if(B[at]!==void 0)return B[at];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+at+"'")}let ai=$e;return $e===6403&&(Kt===5126&&(ai=33326),Kt===5131&&(ai=33325),Kt===5121&&(ai=33321)),$e===33319&&(Kt===5126&&(ai=33328),Kt===5131&&(ai=33327),Kt===5121&&(ai=33323)),$e===6408&&(Kt===5126&&(ai=34836),Kt===5131&&(ai=34842),Kt===5121&&(ai=Pn===Ln&&Vn===!1?35907:32856),Kt===32819&&(ai=32854),Kt===32820&&(ai=32855)),(ai===33325||ai===33326||ai===33327||ai===33328||ai===34842||ai===34836)&&r.get("EXT_color_buffer_float"),ai}function ot(at,$e,Kt){return tt(at,Kt)===!0||at.isFramebufferTexture&&at.minFilter!==ue&&at.minFilter!==qe?Math.log2(Math.max($e.width,$e.height))+1:at.mipmaps!==void 0&&at.mipmaps.length>0?at.mipmaps.length:at.isCompressedTexture&&Array.isArray(at.image)?$e.mipmaps.length:1}function ut(at){return at===ue||at===q||at===ke?9728:9729}function Tt(at){const $e=at.target;$e.removeEventListener("dispose",Tt),Lt($e),$e.isVideoTexture&&le.delete($e)}function jt(at){const $e=at.target;$e.removeEventListener("dispose",jt),Ut($e)}function Lt(at){const $e=h.get(at);if($e.__webglInit===void 0)return;const Kt=at.source,Pn=se.get(Kt);if(Pn){const Vn=Pn[$e.__cacheKey];Vn.usedTimes--,Vn.usedTimes===0&&bt(at),Object.keys(Pn).length===0&&se.delete(Kt)}h.remove(at)}function bt(at){const $e=h.get(at);B.deleteTexture($e.__webglTexture);const Kt=at.source,Pn=se.get(Kt);delete Pn[$e.__cacheKey],R.memory.textures--}function Ut(at){const $e=at.texture,Kt=h.get(at),Pn=h.get($e);if(Pn.__webglTexture!==void 0&&(B.deleteTexture(Pn.__webglTexture),R.memory.textures--),at.depthTexture&&at.depthTexture.dispose(),at.isWebGLCubeRenderTarget)for(let Vn=0;Vn<6;Vn++)B.deleteFramebuffer(Kt.__webglFramebuffer[Vn]),Kt.__webglDepthbuffer&&B.deleteRenderbuffer(Kt.__webglDepthbuffer[Vn]);else{if(B.deleteFramebuffer(Kt.__webglFramebuffer),Kt.__webglDepthbuffer&&B.deleteRenderbuffer(Kt.__webglDepthbuffer),Kt.__webglMultisampledFramebuffer&&B.deleteFramebuffer(Kt.__webglMultisampledFramebuffer),Kt.__webglColorRenderbuffer)for(let Vn=0;Vn<Kt.__webglColorRenderbuffer.length;Vn++)Kt.__webglColorRenderbuffer[Vn]&&B.deleteRenderbuffer(Kt.__webglColorRenderbuffer[Vn]);Kt.__webglDepthRenderbuffer&&B.deleteRenderbuffer(Kt.__webglDepthRenderbuffer)}if(at.isWebGLMultipleRenderTargets)for(let Vn=0,ai=$e.length;Vn<ai;Vn++){const tr=h.get($e[Vn]);tr.__webglTexture&&(B.deleteTexture(tr.__webglTexture),R.memory.textures--),h.remove($e[Vn])}h.remove($e),h.remove(at)}let fn=0;function xn(){fn=0}function hn(){const at=fn;return at>=H&&console.warn("THREE.WebGLTextures: Trying to use "+at+" texture units while this GPU supports only "+H),fn+=1,at}function Dn(at){const $e=[];return $e.push(at.wrapS),$e.push(at.wrapT),$e.push(at.wrapR||0),$e.push(at.magFilter),$e.push(at.minFilter),$e.push(at.anisotropy),$e.push(at.internalFormat),$e.push(at.format),$e.push(at.type),$e.push(at.generateMipmaps),$e.push(at.premultiplyAlpha),$e.push(at.flipY),$e.push(at.unpackAlignment),$e.push(at.encoding),$e.join()}function In(at,$e){const Kt=h.get(at);if(at.isVideoTexture&&us(at),at.isRenderTargetTexture===!1&&at.version>0&&Kt.__version!==at.version){const Pn=at.image;if(Pn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Zn(Kt,at,$e);return}}a.bindTexture(3553,Kt.__webglTexture,33984+$e)}function fi(at,$e){const Kt=h.get(at);if(at.version>0&&Kt.__version!==at.version){Zn(Kt,at,$e);return}a.bindTexture(35866,Kt.__webglTexture,33984+$e)}function ni(at,$e){const Kt=h.get(at);if(at.version>0&&Kt.__version!==at.version){Zn(Kt,at,$e);return}a.bindTexture(32879,Kt.__webglTexture,33984+$e)}function qt(at,$e){const Kt=h.get(at);if(at.version>0&&Kt.__version!==at.version){Ni(Kt,at,$e);return}a.bindTexture(34067,Kt.__webglTexture,33984+$e)}const En={[Ae]:10497,[Xe]:33071,[dt]:33648},$n={[ue]:9728,[q]:9984,[ke]:9986,[qe]:9729,[Qe]:9985,[Ot]:9987};function Ht(at,$e,Kt){if(Kt?(B.texParameteri(at,10242,En[$e.wrapS]),B.texParameteri(at,10243,En[$e.wrapT]),(at===32879||at===35866)&&B.texParameteri(at,32882,En[$e.wrapR]),B.texParameteri(at,10240,$n[$e.magFilter]),B.texParameteri(at,10241,$n[$e.minFilter])):(B.texParameteri(at,10242,33071),B.texParameteri(at,10243,33071),(at===32879||at===35866)&&B.texParameteri(at,32882,33071),($e.wrapS!==Xe||$e.wrapT!==Xe)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),B.texParameteri(at,10240,ut($e.magFilter)),B.texParameteri(at,10241,ut($e.minFilter)),$e.minFilter!==ue&&$e.minFilter!==qe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),r.has("EXT_texture_filter_anisotropic")===!0){const Pn=r.get("EXT_texture_filter_anisotropic");if($e.type===Tn&&r.has("OES_texture_float_linear")===!1||L===!1&&$e.type===Qt&&r.has("OES_texture_half_float_linear")===!1)return;($e.anisotropy>1||h.get($e).__currentAnisotropy)&&(B.texParameterf(at,Pn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($e.anisotropy,p.getMaxAnisotropy())),h.get($e).__currentAnisotropy=$e.anisotropy)}}function gi(at,$e){let Kt=!1;at.__webglInit===void 0&&(at.__webglInit=!0,$e.addEventListener("dispose",Tt));const Pn=$e.source;let Vn=se.get(Pn);Vn===void 0&&(Vn={},se.set(Pn,Vn));const ai=Dn($e);if(ai!==at.__cacheKey){Vn[ai]===void 0&&(Vn[ai]={texture:B.createTexture(),usedTimes:0},R.memory.textures++,Kt=!0),Vn[ai].usedTimes++;const tr=Vn[at.__cacheKey];tr!==void 0&&(Vn[at.__cacheKey].usedTimes--,tr.usedTimes===0&&bt($e)),at.__cacheKey=ai,at.__webglTexture=Vn[ai].texture}return Kt}function Zn(at,$e,Kt){let Pn=3553;($e.isDataArrayTexture||$e.isCompressedArrayTexture)&&(Pn=35866),$e.isData3DTexture&&(Pn=32879);const Vn=gi(at,$e),ai=$e.source;a.bindTexture(Pn,at.__webglTexture,33984+Kt);const tr=h.get(ai);if(ai.version!==tr.__version||Vn===!0){a.activeTexture(33984+Kt),B.pixelStorei(37440,$e.flipY),B.pixelStorei(37441,$e.premultiplyAlpha),B.pixelStorei(3317,$e.unpackAlignment),B.pixelStorei(37443,0);const ci=ze($e)&&Le($e.image)===!1;let cn=Ce($e.image,ci,!1,X);cn=ns($e,cn);const Hi=Le(cn)||L,Zi=w.convert($e.format,$e.encoding);let Ei=w.convert($e.type),Xi=Oe($e.internalFormat,Zi,Ei,$e.encoding,$e.isVideoTexture);Ht(Pn,$e,Hi);let Vi;const Yr=$e.mipmaps,Rs=L&&$e.isVideoTexture!==!0,bo=tr.__version===void 0||Vn===!0,_t=ot($e,cn,Hi);if($e.isDepthTexture)Xi=6402,L?$e.type===Tn?Xi=36012:$e.type===_i?Xi=33190:$e.type===Cn?Xi=35056:Xi=33189:$e.type===Tn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),$e.format===Ye&&Xi===6402&&$e.type!==Pi&&$e.type!==_i&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$e.type=_i,Ei=w.convert($e.type)),$e.format===xt&&Xi===6402&&(Xi=34041,$e.type!==Cn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$e.type=Cn,Ei=w.convert($e.type))),bo&&(Rs?a.texStorage2D(3553,1,Xi,cn.width,cn.height):a.texImage2D(3553,0,Xi,cn.width,cn.height,0,Zi,Ei,null));else if($e.isDataTexture)if(Yr.length>0&&Hi){Rs&&bo&&a.texStorage2D(3553,_t,Xi,Yr[0].width,Yr[0].height);for(let tn=0,Bn=Yr.length;tn<Bn;tn++)Vi=Yr[tn],Rs?a.texSubImage2D(3553,tn,0,0,Vi.width,Vi.height,Zi,Ei,Vi.data):a.texImage2D(3553,tn,Xi,Vi.width,Vi.height,0,Zi,Ei,Vi.data);$e.generateMipmaps=!1}else Rs?(bo&&a.texStorage2D(3553,_t,Xi,cn.width,cn.height),a.texSubImage2D(3553,0,0,0,cn.width,cn.height,Zi,Ei,cn.data)):a.texImage2D(3553,0,Xi,cn.width,cn.height,0,Zi,Ei,cn.data);else if($e.isCompressedTexture)if($e.isCompressedArrayTexture){Rs&&bo&&a.texStorage3D(35866,_t,Xi,Yr[0].width,Yr[0].height,cn.depth);for(let tn=0,Bn=Yr.length;tn<Bn;tn++)Vi=Yr[tn],$e.format!==Li?Zi!==null?Rs?a.compressedTexSubImage3D(35866,tn,0,0,0,Vi.width,Vi.height,cn.depth,Zi,Vi.data,0,0):a.compressedTexImage3D(35866,tn,Xi,Vi.width,Vi.height,cn.depth,0,Vi.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Rs?a.texSubImage3D(35866,tn,0,0,0,Vi.width,Vi.height,cn.depth,Zi,Ei,Vi.data):a.texImage3D(35866,tn,Xi,Vi.width,Vi.height,cn.depth,0,Zi,Ei,Vi.data)}else{Rs&&bo&&a.texStorage2D(3553,_t,Xi,Yr[0].width,Yr[0].height);for(let tn=0,Bn=Yr.length;tn<Bn;tn++)Vi=Yr[tn],$e.format!==Li?Zi!==null?Rs?a.compressedTexSubImage2D(3553,tn,0,0,Vi.width,Vi.height,Zi,Vi.data):a.compressedTexImage2D(3553,tn,Xi,Vi.width,Vi.height,0,Vi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Rs?a.texSubImage2D(3553,tn,0,0,Vi.width,Vi.height,Zi,Ei,Vi.data):a.texImage2D(3553,tn,Xi,Vi.width,Vi.height,0,Zi,Ei,Vi.data)}else if($e.isDataArrayTexture)Rs?(bo&&a.texStorage3D(35866,_t,Xi,cn.width,cn.height,cn.depth),a.texSubImage3D(35866,0,0,0,0,cn.width,cn.height,cn.depth,Zi,Ei,cn.data)):a.texImage3D(35866,0,Xi,cn.width,cn.height,cn.depth,0,Zi,Ei,cn.data);else if($e.isData3DTexture)Rs?(bo&&a.texStorage3D(32879,_t,Xi,cn.width,cn.height,cn.depth),a.texSubImage3D(32879,0,0,0,0,cn.width,cn.height,cn.depth,Zi,Ei,cn.data)):a.texImage3D(32879,0,Xi,cn.width,cn.height,cn.depth,0,Zi,Ei,cn.data);else if($e.isFramebufferTexture){if(bo)if(Rs)a.texStorage2D(3553,_t,Xi,cn.width,cn.height);else{let tn=cn.width,Bn=cn.height;for(let pi=0;pi<_t;pi++)a.texImage2D(3553,pi,Xi,tn,Bn,0,Zi,Ei,null),tn>>=1,Bn>>=1}}else if(Yr.length>0&&Hi){Rs&&bo&&a.texStorage2D(3553,_t,Xi,Yr[0].width,Yr[0].height);for(let tn=0,Bn=Yr.length;tn<Bn;tn++)Vi=Yr[tn],Rs?a.texSubImage2D(3553,tn,0,0,Zi,Ei,Vi):a.texImage2D(3553,tn,Xi,Zi,Ei,Vi);$e.generateMipmaps=!1}else Rs?(bo&&a.texStorage2D(3553,_t,Xi,cn.width,cn.height),a.texSubImage2D(3553,0,0,0,Zi,Ei,cn)):a.texImage2D(3553,0,Xi,Zi,Ei,cn);tt($e,Hi)&&ft(Pn),tr.__version=ai.version,$e.onUpdate&&$e.onUpdate($e)}at.__version=$e.version}function Ni(at,$e,Kt){if($e.image.length!==6)return;const Pn=gi(at,$e),Vn=$e.source;a.bindTexture(34067,at.__webglTexture,33984+Kt);const ai=h.get(Vn);if(Vn.version!==ai.__version||Pn===!0){a.activeTexture(33984+Kt),B.pixelStorei(37440,$e.flipY),B.pixelStorei(37441,$e.premultiplyAlpha),B.pixelStorei(3317,$e.unpackAlignment),B.pixelStorei(37443,0);const tr=$e.isCompressedTexture||$e.image[0].isCompressedTexture,ci=$e.image[0]&&$e.image[0].isDataTexture,cn=[];for(let tn=0;tn<6;tn++)!tr&&!ci?cn[tn]=Ce($e.image[tn],!1,!0,j):cn[tn]=ci?$e.image[tn].image:$e.image[tn],cn[tn]=ns($e,cn[tn]);const Hi=cn[0],Zi=Le(Hi)||L,Ei=w.convert($e.format,$e.encoding),Xi=w.convert($e.type),Vi=Oe($e.internalFormat,Ei,Xi,$e.encoding),Yr=L&&$e.isVideoTexture!==!0,Rs=ai.__version===void 0||Pn===!0;let bo=ot($e,Hi,Zi);Ht(34067,$e,Zi);let _t;if(tr){Yr&&Rs&&a.texStorage2D(34067,bo,Vi,Hi.width,Hi.height);for(let tn=0;tn<6;tn++){_t=cn[tn].mipmaps;for(let Bn=0;Bn<_t.length;Bn++){const pi=_t[Bn];$e.format!==Li?Ei!==null?Yr?a.compressedTexSubImage2D(34069+tn,Bn,0,0,pi.width,pi.height,Ei,pi.data):a.compressedTexImage2D(34069+tn,Bn,Vi,pi.width,pi.height,0,pi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yr?a.texSubImage2D(34069+tn,Bn,0,0,pi.width,pi.height,Ei,Xi,pi.data):a.texImage2D(34069+tn,Bn,Vi,pi.width,pi.height,0,Ei,Xi,pi.data)}}}else{_t=$e.mipmaps,Yr&&Rs&&(_t.length>0&&bo++,a.texStorage2D(34067,bo,Vi,cn[0].width,cn[0].height));for(let tn=0;tn<6;tn++)if(ci){Yr?a.texSubImage2D(34069+tn,0,0,0,cn[tn].width,cn[tn].height,Ei,Xi,cn[tn].data):a.texImage2D(34069+tn,0,Vi,cn[tn].width,cn[tn].height,0,Ei,Xi,cn[tn].data);for(let Bn=0;Bn<_t.length;Bn++){const Bi=_t[Bn].image[tn].image;Yr?a.texSubImage2D(34069+tn,Bn+1,0,0,Bi.width,Bi.height,Ei,Xi,Bi.data):a.texImage2D(34069+tn,Bn+1,Vi,Bi.width,Bi.height,0,Ei,Xi,Bi.data)}}else{Yr?a.texSubImage2D(34069+tn,0,0,0,Ei,Xi,cn[tn]):a.texImage2D(34069+tn,0,Vi,Ei,Xi,cn[tn]);for(let Bn=0;Bn<_t.length;Bn++){const pi=_t[Bn];Yr?a.texSubImage2D(34069+tn,Bn+1,0,0,Ei,Xi,pi.image[tn]):a.texImage2D(34069+tn,Bn+1,Vi,Ei,Xi,pi.image[tn])}}}tt($e,Zi)&&ft(34067),ai.__version=Vn.version,$e.onUpdate&&$e.onUpdate($e)}at.__version=$e.version}function Gn(at,$e,Kt,Pn,Vn){const ai=w.convert(Kt.format,Kt.encoding),tr=w.convert(Kt.type),ci=Oe(Kt.internalFormat,ai,tr,Kt.encoding);h.get($e).__hasExternalTextures||(Vn===32879||Vn===35866?a.texImage3D(Vn,0,ci,$e.width,$e.height,$e.depth,0,ai,tr,null):a.texImage2D(Vn,0,ci,$e.width,$e.height,0,ai,tr,null)),a.bindFramebuffer(36160,at),zi($e)?Z.framebufferTexture2DMultisampleEXT(36160,Pn,Vn,h.get(Kt).__webglTexture,0,Ki($e)):(Vn===3553||Vn>=34069&&Vn<=34074)&&B.framebufferTexture2D(36160,Pn,Vn,h.get(Kt).__webglTexture,0),a.bindFramebuffer(36160,null)}function yr(at,$e,Kt){if(B.bindRenderbuffer(36161,at),$e.depthBuffer&&!$e.stencilBuffer){let Pn=33189;if(Kt||zi($e)){const Vn=$e.depthTexture;Vn&&Vn.isDepthTexture&&(Vn.type===Tn?Pn=36012:Vn.type===_i&&(Pn=33190));const ai=Ki($e);zi($e)?Z.renderbufferStorageMultisampleEXT(36161,ai,Pn,$e.width,$e.height):B.renderbufferStorageMultisample(36161,ai,Pn,$e.width,$e.height)}else B.renderbufferStorage(36161,Pn,$e.width,$e.height);B.framebufferRenderbuffer(36160,36096,36161,at)}else if($e.depthBuffer&&$e.stencilBuffer){const Pn=Ki($e);Kt&&zi($e)===!1?B.renderbufferStorageMultisample(36161,Pn,35056,$e.width,$e.height):zi($e)?Z.renderbufferStorageMultisampleEXT(36161,Pn,35056,$e.width,$e.height):B.renderbufferStorage(36161,34041,$e.width,$e.height),B.framebufferRenderbuffer(36160,33306,36161,at)}else{const Pn=$e.isWebGLMultipleRenderTargets===!0?$e.texture:[$e.texture];for(let Vn=0;Vn<Pn.length;Vn++){const ai=Pn[Vn],tr=w.convert(ai.format,ai.encoding),ci=w.convert(ai.type),cn=Oe(ai.internalFormat,tr,ci,ai.encoding),Hi=Ki($e);Kt&&zi($e)===!1?B.renderbufferStorageMultisample(36161,Hi,cn,$e.width,$e.height):zi($e)?Z.renderbufferStorageMultisampleEXT(36161,Hi,cn,$e.width,$e.height):B.renderbufferStorage(36161,cn,$e.width,$e.height)}}B.bindRenderbuffer(36161,null)}function pn(at,$e){if($e&&$e.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,at),!($e.depthTexture&&$e.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!h.get($e.depthTexture).__webglTexture||$e.depthTexture.image.width!==$e.width||$e.depthTexture.image.height!==$e.height)&&($e.depthTexture.image.width=$e.width,$e.depthTexture.image.height=$e.height,$e.depthTexture.needsUpdate=!0),In($e.depthTexture,0);const Pn=h.get($e.depthTexture).__webglTexture,Vn=Ki($e);if($e.depthTexture.format===Ye)zi($e)?Z.framebufferTexture2DMultisampleEXT(36160,36096,3553,Pn,0,Vn):B.framebufferTexture2D(36160,36096,3553,Pn,0);else if($e.depthTexture.format===xt)zi($e)?Z.framebufferTexture2DMultisampleEXT(36160,33306,3553,Pn,0,Vn):B.framebufferTexture2D(36160,33306,3553,Pn,0);else throw new Error("Unknown depthTexture format")}function ln(at){const $e=h.get(at),Kt=at.isWebGLCubeRenderTarget===!0;if(at.depthTexture&&!$e.__autoAllocateDepthBuffer){if(Kt)throw new Error("target.depthTexture not supported in Cube render targets");pn($e.__webglFramebuffer,at)}else if(Kt){$e.__webglDepthbuffer=[];for(let Pn=0;Pn<6;Pn++)a.bindFramebuffer(36160,$e.__webglFramebuffer[Pn]),$e.__webglDepthbuffer[Pn]=B.createRenderbuffer(),yr($e.__webglDepthbuffer[Pn],at,!1)}else a.bindFramebuffer(36160,$e.__webglFramebuffer),$e.__webglDepthbuffer=B.createRenderbuffer(),yr($e.__webglDepthbuffer,at,!1);a.bindFramebuffer(36160,null)}function Qn(at,$e,Kt){const Pn=h.get(at);$e!==void 0&&Gn(Pn.__webglFramebuffer,at,at.texture,36064,3553),Kt!==void 0&&ln(at)}function Ii(at){const $e=at.texture,Kt=h.get(at),Pn=h.get($e);at.addEventListener("dispose",jt),at.isWebGLMultipleRenderTargets!==!0&&(Pn.__webglTexture===void 0&&(Pn.__webglTexture=B.createTexture()),Pn.__version=$e.version,R.memory.textures++);const Vn=at.isWebGLCubeRenderTarget===!0,ai=at.isWebGLMultipleRenderTargets===!0,tr=Le(at)||L;if(Vn){Kt.__webglFramebuffer=[];for(let ci=0;ci<6;ci++)Kt.__webglFramebuffer[ci]=B.createFramebuffer()}else{if(Kt.__webglFramebuffer=B.createFramebuffer(),ai)if(p.drawBuffers){const ci=at.texture;for(let cn=0,Hi=ci.length;cn<Hi;cn++){const Zi=h.get(ci[cn]);Zi.__webglTexture===void 0&&(Zi.__webglTexture=B.createTexture(),R.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(L&&at.samples>0&&zi(at)===!1){const ci=ai?$e:[$e];Kt.__webglMultisampledFramebuffer=B.createFramebuffer(),Kt.__webglColorRenderbuffer=[],a.bindFramebuffer(36160,Kt.__webglMultisampledFramebuffer);for(let cn=0;cn<ci.length;cn++){const Hi=ci[cn];Kt.__webglColorRenderbuffer[cn]=B.createRenderbuffer(),B.bindRenderbuffer(36161,Kt.__webglColorRenderbuffer[cn]);const Zi=w.convert(Hi.format,Hi.encoding),Ei=w.convert(Hi.type),Xi=Oe(Hi.internalFormat,Zi,Ei,Hi.encoding,at.isXRRenderTarget===!0),Vi=Ki(at);B.renderbufferStorageMultisample(36161,Vi,Xi,at.width,at.height),B.framebufferRenderbuffer(36160,36064+cn,36161,Kt.__webglColorRenderbuffer[cn])}B.bindRenderbuffer(36161,null),at.depthBuffer&&(Kt.__webglDepthRenderbuffer=B.createRenderbuffer(),yr(Kt.__webglDepthRenderbuffer,at,!0)),a.bindFramebuffer(36160,null)}}if(Vn){a.bindTexture(34067,Pn.__webglTexture),Ht(34067,$e,tr);for(let ci=0;ci<6;ci++)Gn(Kt.__webglFramebuffer[ci],at,$e,36064,34069+ci);tt($e,tr)&&ft(34067),a.unbindTexture()}else if(ai){const ci=at.texture;for(let cn=0,Hi=ci.length;cn<Hi;cn++){const Zi=ci[cn],Ei=h.get(Zi);a.bindTexture(3553,Ei.__webglTexture),Ht(3553,Zi,tr),Gn(Kt.__webglFramebuffer,at,Zi,36064+cn,3553),tt(Zi,tr)&&ft(3553)}a.unbindTexture()}else{let ci=3553;(at.isWebGL3DRenderTarget||at.isWebGLArrayRenderTarget)&&(L?ci=at.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),a.bindTexture(ci,Pn.__webglTexture),Ht(ci,$e,tr),Gn(Kt.__webglFramebuffer,at,$e,36064,ci),tt($e,tr)&&ft(ci),a.unbindTexture()}at.depthBuffer&&ln(at)}function ii(at){const $e=Le(at)||L,Kt=at.isWebGLMultipleRenderTargets===!0?at.texture:[at.texture];for(let Pn=0,Vn=Kt.length;Pn<Vn;Pn++){const ai=Kt[Pn];if(tt(ai,$e)){const tr=at.isWebGLCubeRenderTarget?34067:3553,ci=h.get(ai).__webglTexture;a.bindTexture(tr,ci),ft(tr),a.unbindTexture()}}}function rr(at){if(L&&at.samples>0&&zi(at)===!1){const $e=at.isWebGLMultipleRenderTargets?at.texture:[at.texture],Kt=at.width,Pn=at.height;let Vn=16384;const ai=[],tr=at.stencilBuffer?33306:36096,ci=h.get(at),cn=at.isWebGLMultipleRenderTargets===!0;if(cn)for(let Hi=0;Hi<$e.length;Hi++)a.bindFramebuffer(36160,ci.__webglMultisampledFramebuffer),B.framebufferRenderbuffer(36160,36064+Hi,36161,null),a.bindFramebuffer(36160,ci.__webglFramebuffer),B.framebufferTexture2D(36009,36064+Hi,3553,null,0);a.bindFramebuffer(36008,ci.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,ci.__webglFramebuffer);for(let Hi=0;Hi<$e.length;Hi++){ai.push(36064+Hi),at.depthBuffer&&ai.push(tr);const Zi=ci.__ignoreDepthValues!==void 0?ci.__ignoreDepthValues:!1;if(Zi===!1&&(at.depthBuffer&&(Vn|=256),at.stencilBuffer&&(Vn|=1024)),cn&&B.framebufferRenderbuffer(36008,36064,36161,ci.__webglColorRenderbuffer[Hi]),Zi===!0&&(B.invalidateFramebuffer(36008,[tr]),B.invalidateFramebuffer(36009,[tr])),cn){const Ei=h.get($e[Hi]).__webglTexture;B.framebufferTexture2D(36009,36064,3553,Ei,0)}B.blitFramebuffer(0,0,Kt,Pn,0,0,Kt,Pn,Vn,9728),te&&B.invalidateFramebuffer(36008,ai)}if(a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,null),cn)for(let Hi=0;Hi<$e.length;Hi++){a.bindFramebuffer(36160,ci.__webglMultisampledFramebuffer),B.framebufferRenderbuffer(36160,36064+Hi,36161,ci.__webglColorRenderbuffer[Hi]);const Zi=h.get($e[Hi]).__webglTexture;a.bindFramebuffer(36160,ci.__webglFramebuffer),B.framebufferTexture2D(36009,36064+Hi,3553,Zi,0)}a.bindFramebuffer(36009,ci.__webglMultisampledFramebuffer)}}function Ki(at){return Math.min($,at.samples)}function zi(at){const $e=h.get(at);return L&&at.samples>0&&r.has("WEBGL_multisampled_render_to_texture")===!0&&$e.__useRenderToTexture!==!1}function us(at){const $e=R.render.frame;le.get(at)!==$e&&(le.set(at,$e),at.update())}function ns(at,$e){const Kt=at.encoding,Pn=at.format,Vn=at.type;return at.isCompressedTexture===!0||at.isVideoTexture===!0||at.format===co||Kt!==ui&&(Kt===Ln?L===!1?r.has("EXT_sRGB")===!0&&Pn===Li?(at.format=co,at.minFilter=qe,at.generateMipmaps=!1):$e=Tl.sRGBToLinear($e):(Pn!==Li||Vn!==dn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Kt)),$e}this.allocateTextureUnit=hn,this.resetTextureUnits=xn,this.setTexture2D=In,this.setTexture2DArray=fi,this.setTexture3D=ni,this.setTextureCube=qt,this.rebindTextures=Qn,this.setupRenderTarget=Ii,this.updateRenderTargetMipmap=ii,this.updateMultisampleRenderTarget=rr,this.setupDepthRenderbuffer=ln,this.setupFrameBufferTexture=Gn,this.useMultisampledRTT=zi}function K1(B,r,a){const h=a.isWebGL2;function p(w,R=null){let L;if(w===dn)return 5121;if(w===mn)return 32819;if(w===ri)return 32820;if(w===Sn)return 5120;if(w===er)return 5122;if(w===Pi)return 5123;if(w===Ir)return 5124;if(w===_i)return 5125;if(w===Tn)return 5126;if(w===Qt)return h?5131:(L=r.get("OES_texture_half_float"),L!==null?L.HALF_FLOAT_OES:null);if(w===li)return 6406;if(w===Li)return 6408;if(w===Ar)return 6409;if(w===ar)return 6410;if(w===Ye)return 6402;if(w===xt)return 34041;if(w===bi)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(w===co)return L=r.get("EXT_sRGB"),L!==null?L.SRGB_ALPHA_EXT:null;if(w===Mt)return 6403;if(w===Et)return 36244;if(w===Bt)return 33319;if(w===Re)return 33320;if(w===We)return 36249;if(w===it||w===gt||w===At||w===Rt)if(R===Ln)if(L=r.get("WEBGL_compressed_texture_s3tc_srgb"),L!==null){if(w===it)return L.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(w===gt)return L.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(w===At)return L.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(w===Rt)return L.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(L=r.get("WEBGL_compressed_texture_s3tc"),L!==null){if(w===it)return L.COMPRESSED_RGB_S3TC_DXT1_EXT;if(w===gt)return L.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(w===At)return L.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(w===Rt)return L.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(w===Nt||w===wn||w===yn||w===Vt)if(L=r.get("WEBGL_compressed_texture_pvrtc"),L!==null){if(w===Nt)return L.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(w===wn)return L.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(w===yn)return L.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(w===Vt)return L.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(w===qn)return L=r.get("WEBGL_compressed_texture_etc1"),L!==null?L.COMPRESSED_RGB_ETC1_WEBGL:null;if(w===Un||w===_n)if(L=r.get("WEBGL_compressed_texture_etc"),L!==null){if(w===Un)return R===Ln?L.COMPRESSED_SRGB8_ETC2:L.COMPRESSED_RGB8_ETC2;if(w===_n)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:L.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(w===Rr||w===hi||w===Ci||w===qi||w===Cr||w===Jr||w===bn||w===ei||w===Wr||w===Mi||w===ie||w===ce||w===ye||w===Ie)if(L=r.get("WEBGL_compressed_texture_astc"),L!==null){if(w===Rr)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:L.COMPRESSED_RGBA_ASTC_4x4_KHR;if(w===hi)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:L.COMPRESSED_RGBA_ASTC_5x4_KHR;if(w===Ci)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:L.COMPRESSED_RGBA_ASTC_5x5_KHR;if(w===qi)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:L.COMPRESSED_RGBA_ASTC_6x5_KHR;if(w===Cr)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:L.COMPRESSED_RGBA_ASTC_6x6_KHR;if(w===Jr)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:L.COMPRESSED_RGBA_ASTC_8x5_KHR;if(w===bn)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:L.COMPRESSED_RGBA_ASTC_8x6_KHR;if(w===ei)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:L.COMPRESSED_RGBA_ASTC_8x8_KHR;if(w===Wr)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:L.COMPRESSED_RGBA_ASTC_10x5_KHR;if(w===Mi)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:L.COMPRESSED_RGBA_ASTC_10x6_KHR;if(w===ie)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:L.COMPRESSED_RGBA_ASTC_10x8_KHR;if(w===ce)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:L.COMPRESSED_RGBA_ASTC_10x10_KHR;if(w===ye)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:L.COMPRESSED_RGBA_ASTC_12x10_KHR;if(w===Ie)return R===Ln?L.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:L.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(w===Ke)if(L=r.get("EXT_texture_compression_bptc"),L!==null){if(w===Ke)return R===Ln?L.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:L.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return w===Cn?h?34042:(L=r.get("WEBGL_depth_texture"),L!==null?L.UNSIGNED_INT_24_8_WEBGL:null):B[w]!==void 0?B[w]:null}return{convert:p}}class Ea extends Or{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Ji extends Vs{constructor(r=[]){super(),this.isArrayCamera=!0,this.cameras=r}}var X1=new je,Fo=new je;function Ns(B,r,a){X1.setFromMatrixPosition(r.matrixWorld),Fo.setFromMatrixPosition(a.matrixWorld);var h=X1.distanceTo(Fo),p=r.projectionMatrix.elements,w=a.projectionMatrix.elements,R=p[14]/(p[10]-1),L=p[14]/(p[10]+1),H=(p[9]+1)/p[5],j=(p[9]-1)/p[5],X=(p[8]-1)/p[0],$=(w[8]+1)/w[0],Z=R*X,te=R*$,le=h/(-X+$),oe=le*-X;r.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(oe),B.translateZ(le),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();var se=R+le,ve=L+le,De=Z-oe,Ce=te+(h-oe),Le=H*L/ve*se,ze=j*L/ve*se;B.projectionMatrix.makePerspective(De,Ce,Le,ze,se,ve)}function Y1(B){var r,a,h=this,p=null,w=null,R=null,L=[],H=new oi,j=new oi,X=1,$="local-floor";typeof window<"u"&&"VRFrameData"in window&&(w=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",Le,!1));var Z=new oi,te=new Nn,le=new je,oe=new Vs;oe.viewport=new kr,oe.layers.enable(1);var se=new Vs;se.viewport=new kr,se.layers.enable(2);var ve=new Ji([oe,se]);ve.layers.enable(1),ve.layers.enable(2);var De=new un,Ce;function Le(){var Tt=h.isPresenting=p!==null&&p.isPresenting===!0;if(Tt){var jt=p.getEyeParameters("left");r=2*jt.renderWidth*X,a=jt.renderHeight*X,Ce=B.getPixelRatio(),B.getSize(De),B.setDrawingBufferSize(r,a,1),oe.viewport.set(0,0,r/2,a),se.viewport.set(r/2,0,r/2,a),ut.start(),h.dispatchEvent({type:"sessionstart"})}else h.enabled&&B.setDrawingBufferSize(De.width,De.height,Ce),ut.stop(),h.dispatchEvent({type:"sessionend"})}var ze=[],tt=[];function ft(Tt){for(var jt=navigator.getGamepads&&navigator.getGamepads(),Lt=0,bt=jt.length;Lt<bt;Lt++){var Ut=jt[Lt];if(Ut&&(Ut.id==="Daydream Controller"||Ut.id==="Gear VR Controller"||Ut.id==="Oculus Go Controller"||Ut.id==="OpenVR Gamepad"||Ut.id.startsWith("Oculus Touch")||Ut.id.startsWith("HTC Vive Focus")||Ut.id.startsWith("Spatial Controller"))){var fn=Ut.hand;if(Tt===0&&(fn===""||fn==="right")||Tt===1&&fn==="left")return Ut}}}function Oe(){for(var Tt=0;Tt<L.length;Tt++){var jt=L[Tt],Lt=ft(Tt);if(Lt!==void 0&&Lt.pose!==void 0){if(Lt.pose===null)return;var bt=Lt.pose;bt.hasPosition===!1&&jt.position.set(.2,-.6,-.05),bt.position!==null&&jt.position.fromArray(bt.position),bt.orientation!==null&&jt.quaternion.fromArray(bt.orientation),jt.matrix.compose(jt.position,jt.quaternion,jt.scale),jt.matrix.premultiply(H),jt.matrix.decompose(jt.position,jt.quaternion,jt.scale),jt.matrixWorldNeedsUpdate=!0,jt.visible=!0;var Ut=Lt.id==="Daydream Controller"?0:1;ze[Tt]===void 0&&(ze[Tt]=!1),ze[Tt]!==Lt.buttons[Ut].pressed&&(ze[Tt]=Lt.buttons[Ut].pressed,ze[Tt]===!0?jt.dispatchEvent({type:"selectstart"}):(jt.dispatchEvent({type:"selectend"}),jt.dispatchEvent({type:"select"}))),Ut=2,tt[Tt]===void 0&&(tt[Tt]=!1),Lt.buttons[Ut]!==void 0&&tt[Tt]!==Lt.buttons[Ut].pressed&&(tt[Tt]=Lt.buttons[Ut].pressed,tt[Tt]===!0?jt.dispatchEvent({type:"squeezestart"}):(jt.dispatchEvent({type:"squeezeend"}),jt.dispatchEvent({type:"squeeze"})))}else jt.visible=!1}}function ot(Tt,jt){jt!==null&&jt.length===4&&Tt.set(jt[0]*r,jt[1]*a,jt[2]*r,jt[3]*a)}this.enabled=!1,this.getController=function(Tt){var jt=L[Tt];return jt===void 0&&(jt=new Ea,jt.matrixAutoUpdate=!1,jt.visible=!1,L[Tt]=jt),jt},this.getDevice=function(){return p},this.setDevice=function(Tt){Tt!==void 0&&(p=Tt),ut.setContext(Tt)},this.setFramebufferScaleFactor=function(Tt){X=Tt},this.setReferenceSpaceType=function(Tt){$=Tt},this.setPoseTarget=function(Tt){Tt!==void 0&&(R=Tt)},this.cameraAutoUpdate=!0,this.updateCamera=function(Tt){var jt=$==="local-floor"?1.6:0;if(p.depthNear=Tt.near,p.depthFar=Tt.far,p.getFrameData(w),$==="local-floor"){var Lt=p.stageParameters;Lt?H.fromArray(Lt.sittingToStandingTransform):H.makeTranslation(0,jt,0)}var bt=w.pose,Ut=R!==null?R:Tt;Ut.matrix.copy(H),Ut.matrix.decompose(Ut.position,Ut.quaternion,Ut.scale),bt.orientation!==null&&(te.fromArray(bt.orientation),Ut.quaternion.multiply(te)),bt.position!==null&&(te.setFromRotationMatrix(H),le.fromArray(bt.position),le.applyQuaternion(te),Ut.position.add(le)),Ut.updateMatrixWorld();for(var fn=Ut.children,xn=0,hn=fn.length;xn<hn;xn++)fn[xn].updateMatrixWorld(!0);oe.near=Tt.near,se.near=Tt.near,oe.far=Tt.far,se.far=Tt.far,oe.matrixWorldInverse.fromArray(w.leftViewMatrix),se.matrixWorldInverse.fromArray(w.rightViewMatrix),j.copy(H).invert(),$==="local-floor"&&(oe.matrixWorldInverse.multiply(j),se.matrixWorldInverse.multiply(j));var Dn=Ut.parent;Dn!==null&&(Z.copy(Dn.matrixWorld).invert(),oe.matrixWorldInverse.multiply(Z),se.matrixWorldInverse.multiply(Z)),oe.matrixWorld.copy(oe.matrixWorldInverse).invert(),se.matrixWorld.copy(se.matrixWorldInverse).invert(),oe.projectionMatrix.fromArray(w.leftProjectionMatrix),se.projectionMatrix.fromArray(w.rightProjectionMatrix),Ns(ve,oe,se);var In=p.getLayers();if(In.length){var fi=In[0];ot(oe.viewport,fi.leftBounds),ot(se.viewport,fi.rightBounds)}return Oe(),ve},this.getCamera=function(){return ve},this.getFoveation=function(){return 1},this.setFoveation=function(Tt){Tt!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getStandingMatrix=function(){return H},this.isPresenting=!1;var ut=new x0;this.setAnimationLoop=function(Tt){ut.setAnimationLoop(Tt),this.isPresenting&&ut.start()},this.submitFrame=function(){this.isPresenting&&p.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",Le)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(Y1.prototype,{addEventListener:Do.prototype.addEventListener,hasEventListener:Do.prototype.hasEventListener,removeEventListener:Do.prototype.removeEventListener,dispatchEvent:Do.prototype.dispatchEvent});const fu={type:"move"};class rA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ea,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ea,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new je,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new je),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ea,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new je,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new je),this._grip}dispatchEvent(r){return this._targetRay!==null&&this._targetRay.dispatchEvent(r),this._grip!==null&&this._grip.dispatchEvent(r),this._hand!==null&&this._hand.dispatchEvent(r),this}connect(r){if(r&&r.hand){const a=this._hand;if(a)for(const h of r.hand.values())this._getHandJoint(a,h)}return this.dispatchEvent({type:"connected",data:r}),this}disconnect(r){return this.dispatchEvent({type:"disconnected",data:r}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(r,a,h){let p=null,w=null,R=null;const L=this._targetRay,H=this._grip,j=this._hand;if(r&&a.session.visibilityState!=="visible-blurred"){if(j&&r.hand){R=!0;for(const oe of r.hand.values()){const se=a.getJointPose(oe,h),ve=this._getHandJoint(j,oe);se!==null&&(ve.matrix.fromArray(se.transform.matrix),ve.matrix.decompose(ve.position,ve.rotation,ve.scale),ve.jointRadius=se.radius),ve.visible=se!==null}const X=j.joints["index-finger-tip"],$=j.joints["thumb-tip"],Z=X.position.distanceTo($.position),te=.02,le=.005;j.inputState.pinching&&Z>te+le?(j.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:r.handedness,target:this})):!j.inputState.pinching&&Z<=te-le&&(j.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:r.handedness,target:this}))}else H!==null&&r.gripSpace&&(w=a.getPose(r.gripSpace,h),w!==null&&(H.matrix.fromArray(w.transform.matrix),H.matrix.decompose(H.position,H.rotation,H.scale),w.linearVelocity?(H.hasLinearVelocity=!0,H.linearVelocity.copy(w.linearVelocity)):H.hasLinearVelocity=!1,w.angularVelocity?(H.hasAngularVelocity=!0,H.angularVelocity.copy(w.angularVelocity)):H.hasAngularVelocity=!1));L!==null&&(p=a.getPose(r.targetRaySpace,h),p===null&&w!==null&&(p=w),p!==null&&(L.matrix.fromArray(p.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale),p.linearVelocity?(L.hasLinearVelocity=!0,L.linearVelocity.copy(p.linearVelocity)):L.hasLinearVelocity=!1,p.angularVelocity?(L.hasAngularVelocity=!0,L.angularVelocity.copy(p.angularVelocity)):L.hasAngularVelocity=!1,this.dispatchEvent(fu)))}return L!==null&&(L.visible=p!==null),H!==null&&(H.visible=w!==null),j!==null&&(j.visible=R!==null),this}_getHandJoint(r,a){if(r.joints[a.jointName]===void 0){const h=new Ea;h.matrixAutoUpdate=!1,h.visible=!1,r.joints[a.jointName]=h,r.add(h)}return r.joints[a.jointName]}}class q1 extends vs{constructor(r,a,h,p,w,R,L,H,j,X){if(X=X!==void 0?X:Ye,X!==Ye&&X!==xt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");h===void 0&&X===Ye&&(h=_i),h===void 0&&X===xt&&(h=Cn),super(null,p,w,R,L,H,X,h,j),this.isDepthTexture=!0,this.image={width:r,height:a},this.magFilter=L!==void 0?L:ue,this.minFilter=H!==void 0?H:ue,this.flipY=!1,this.generateMipmaps=!1}}class kw extends Do{constructor(r,a){super();const h=this;let p=null,w=1;var R=null;let L=null,H="local-floor",j=null,X=null;var $=[];let Z=null,te=null,le=null,oe=null;const se=a.getContextAttributes();let ve=null,De=null;const Ce=[],Le=[],ze=new Set,tt=new Map,ft=new Vs;ft.layers.enable(1),ft.viewport=new kr;const Oe=new Vs;Oe.layers.enable(2),Oe.viewport=new kr;const ot=[ft,Oe],ut=new Ji;ut.layers.enable(1),ut.layers.enable(2);let Tt=null,jt=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.getCameraPose=function(){return X},this.getController=function(qt){let En=Ce[qt];return En===void 0&&(En=new rA,Ce[qt]=En),En.getTargetRaySpace()},this.getControllerGrip=function(qt){let En=Ce[qt];return En===void 0&&(En=new rA,Ce[qt]=En),En.getGripSpace()},this.getHand=function(qt){let En=Ce[qt];return En===void 0&&(En=new rA,Ce[qt]=En),En.getHandSpace()};function Lt(qt){const En=Le.indexOf(qt.inputSource);if(En===-1)return;const $n=Ce[En];$n!==void 0&&$n.dispatchEvent({type:qt.type,data:qt.inputSource})}function bt(){p.removeEventListener("select",Lt),p.removeEventListener("selectstart",Lt),p.removeEventListener("selectend",Lt),p.removeEventListener("squeeze",Lt),p.removeEventListener("squeezestart",Lt),p.removeEventListener("squeezeend",Lt),p.removeEventListener("end",bt),p.removeEventListener("inputsourceschange",Ut);for(let qt=0;qt<Ce.length;qt++){const En=Le[qt];En!==null&&(Le[qt]=null,Ce[qt].disconnect(En))}Tt=null,jt=null,r.setRenderTarget(ve),le=null,te=null,Z=null,p=null,De=null,ni.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(qt){w=qt,h.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(qt){H=qt,h.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return j||L},this.setReferenceSpace=function(qt){j=qt},this.getBaseLayer=function(){return te!==null?te:le},this.getBinding=function(){return Z},this.getFrame=function(){return oe},this.getSession=function(){return p},this.setSession=async function(qt){if(p=qt,p!==null){if(ve=r.getRenderTarget(),p.addEventListener("select",Lt),p.addEventListener("selectstart",Lt),p.addEventListener("selectend",Lt),p.addEventListener("squeeze",Lt),p.addEventListener("squeezestart",Lt),p.addEventListener("squeezeend",Lt),p.addEventListener("end",bt),p.addEventListener("inputsourceschange",Ut),se.xrCompatible!==!0&&await a.makeXRCompatible(),p.renderState.layers===void 0||r.capabilities.isWebGL2===!1){const En={antialias:p.renderState.layers===void 0?se.antialias:!0,alpha:se.alpha,depth:se.depth,stencil:se.stencil,framebufferScaleFactor:w};le=new XRWebGLLayer(p,a,En),p.updateRenderState({baseLayer:le}),De=new Qo(le.framebufferWidth,le.framebufferHeight,{format:Li,type:dn,encoding:r.outputEncoding,stencilBuffer:se.stencil})}else{let En=null,$n=null,Ht=null;se.depth&&(Ht=se.stencil?35056:33190,En=se.stencil?xt:Ye,$n=se.stencil?Cn:_i);const gi={colorFormat:32856,depthFormat:Ht,scaleFactor:w};Z=new XRWebGLBinding(p,a),te=Z.createProjectionLayer(gi),p.updateRenderState({layers:[te]}),De=new Qo(te.textureWidth,te.textureHeight,{format:Li,type:dn,depthTexture:new q1(te.textureWidth,te.textureHeight,$n,void 0,void 0,void 0,void 0,void 0,void 0,En),stencilBuffer:se.stencil,encoding:r.outputEncoding,samples:se.antialias?4:0});const Zn=r.properties.get(De);Zn.__ignoreDepthValues=te.ignoreDepthValues}De.isXRRenderTarget=!0,this.setFoveation(1),j=null,L=await p.requestReferenceSpace(H),ni.setContext(p),ni.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}},this.addLayer=function(qt){!window.XRWebGLBinding||!this.layersEnabled||!p||($.push(qt),this.updateLayers())},this.removeLayer=function(qt){$.splice($.indexOf(qt),1),!(!window.XRWebGLBinding||!this.layersEnabled||!p)&&this.updateLayers()},this.updateLayers=function(){var qt=$.map(function(En){return En});qt.unshift(p.renderState.layers[0]),p.updateRenderState({layers:qt})};function Ut(qt){for(let En=0;En<qt.removed.length;En++){const $n=qt.removed[En],Ht=Le.indexOf($n);Ht>=0&&(Le[Ht]=null,Ce[Ht].disconnect($n))}for(let En=0;En<qt.added.length;En++){const $n=qt.added[En];let Ht=Le.indexOf($n);if(Ht===-1){for(let Zn=0;Zn<Ce.length;Zn++)if(Zn>=Le.length){Le.push($n),Ht=Zn;break}else if(Le[Zn]===null){Le[Zn]=$n,Ht=Zn;break}if(Ht===-1)break}const gi=Ce[Ht];gi&&gi.connect($n)}}const fn=new je,xn=new je;function hn(qt,En,$n){fn.setFromMatrixPosition(En.matrixWorld),xn.setFromMatrixPosition($n.matrixWorld);const Ht=fn.distanceTo(xn),gi=En.projectionMatrix.elements,Zn=$n.projectionMatrix.elements,Ni=gi[14]/(gi[10]-1),Gn=gi[14]/(gi[10]+1),yr=(gi[9]+1)/gi[5],pn=(gi[9]-1)/gi[5],ln=(gi[8]-1)/gi[0],Qn=(Zn[8]+1)/Zn[0],Ii=Ni*ln,ii=Ni*Qn,rr=Ht/(-ln+Qn),Ki=rr*-ln;En.matrixWorld.decompose(qt.position,qt.quaternion,qt.scale),qt.translateX(Ki),qt.translateZ(rr),qt.matrixWorld.compose(qt.position,qt.quaternion,qt.scale),qt.matrixWorldInverse.copy(qt.matrixWorld).invert();const zi=Ni+rr,us=Gn+rr,ns=Ii-Ki,at=ii+(Ht-Ki),$e=yr*Gn/us*zi,Kt=pn*Gn/us*zi;qt.projectionMatrix.makePerspective(ns,at,$e,Kt,zi,us)}function Dn(qt,En){En===null?qt.matrixWorld.copy(qt.matrix):qt.matrixWorld.multiplyMatrices(En.matrixWorld,qt.matrix),qt.matrixWorldInverse.copy(qt.matrixWorld).invert()}this.setPoseTarget=function(qt){qt!==void 0&&(R=qt)},this.updateCamera=function(qt){if(p===null)return;ut.near=Oe.near=ft.near=qt.near,ut.far=Oe.far=ft.far=qt.far,(Tt!==ut.near||jt!==ut.far)&&(p.updateRenderState({depthNear:ut.near,depthFar:ut.far}),Tt=ut.near,jt=ut.far);const En=ut.cameras;var $n=R||qt;const Ht=$n.parent;Dn(ut,Ht);for(let Zn=0;Zn<En.length;Zn++)Dn(En[Zn],Ht);ut.matrixWorld.decompose(ut.position,ut.quaternion,ut.scale),$n.matrixWorld.copy(ut.matrixWorld),$n.matrix.copy(ut.matrix),$n.matrix.decompose($n.position,$n.quaternion,$n.scale);const gi=$n.children;for(let Zn=0,Ni=gi.length;Zn<Ni;Zn++)gi[Zn].updateMatrixWorld(!0);En.length===2?hn(ut,ft,Oe):ut.projectionMatrix.copy(ft.projectionMatrix)},this.getCamera=function(){return ut},this.getFoveation=function(){if(te!==null)return te.fixedFoveation;if(le!==null)return le.fixedFoveation},this.setFoveation=function(qt){te!==null&&(te.fixedFoveation=qt),le!==null&&le.fixedFoveation!==void 0&&(le.fixedFoveation=qt)},this.getPlanes=function(){return ze};let In=null;function fi(qt,En){if(X=En.getViewerPose(j||L),oe=En,X!==null){const $n=X.views;le!==null&&(r.setRenderTargetFramebuffer(De,le.framebuffer),r.setRenderTarget(De));let Ht=!1;$n.length!==ut.cameras.length&&(ut.cameras.length=0,Ht=!0);for(let gi=0;gi<$n.length;gi++){const Zn=$n[gi];let Ni=null;if(le!==null)Ni=le.getViewport(Zn);else{const yr=Z.getViewSubImage(te,Zn);Ni=yr.viewport,gi===0&&(r.setRenderTargetTextures(De,yr.colorTexture,te.ignoreDepthValues?void 0:yr.depthStencilTexture),r.setRenderTarget(De))}let Gn=ot[gi];Gn===void 0&&(Gn=new Vs,Gn.layers.enable(gi),Gn.viewport=new kr,ot[gi]=Gn),Gn.matrix.fromArray(Zn.transform.matrix),Gn.projectionMatrix.fromArray(Zn.projectionMatrix),Gn.viewport.set(Ni.x,Ni.y,Ni.width,Ni.height),gi===0&&ut.matrix.copy(Gn.matrix),Ht===!0&&ut.cameras.push(Gn)}}for(let $n=0;$n<Ce.length;$n++){const Ht=Le[$n],gi=Ce[$n];Ht!==null&&gi!==void 0&&gi.update(Ht,En,j||L)}if(In&&In(qt,En),En.detectedPlanes){h.dispatchEvent({type:"planesdetected",data:En.detectedPlanes});let $n=null;for(const Ht of ze)En.detectedPlanes.has(Ht)||($n===null&&($n=[]),$n.push(Ht));if($n!==null)for(const Ht of $n)ze.delete(Ht),tt.delete(Ht),h.dispatchEvent({type:"planeremoved",data:Ht});for(const Ht of En.detectedPlanes)if(!ze.has(Ht))ze.add(Ht),tt.set(Ht,En.lastChangedTime),h.dispatchEvent({type:"planeadded",data:Ht});else{const gi=tt.get(Ht);Ht.lastChangedTime>gi&&(tt.set(Ht,Ht.lastChangedTime),h.dispatchEvent({type:"planechanged",data:Ht}))}}oe=null}const ni=new x0;ni.setAnimationLoop(fi),this.setAnimationLoop=function(qt){In=qt},this.dispose=function(){}}}function Nw(B,r){function a(oe,se){se.color.getRGB(oe.fogColor.value,Yh(B)),se.isFog?(oe.fogNear.value=se.near,oe.fogFar.value=se.far):se.isFogExp2&&(oe.fogDensity.value=se.density)}function h(oe,se,ve,De,Ce){se.isMeshBasicMaterial||se.isMeshLambertMaterial?p(oe,se):se.isMeshToonMaterial?(p(oe,se),X(oe,se)):se.isMeshPhongMaterial?(p(oe,se),j(oe,se)):se.isMeshStandardMaterial?(p(oe,se),$(oe,se),se.isMeshPhysicalMaterial&&Z(oe,se,Ce)):se.isMeshMatcapMaterial?(p(oe,se),te(oe,se)):se.isMeshDepthMaterial?p(oe,se):se.isMeshDistanceMaterial?(p(oe,se),le(oe,se)):se.isMeshNormalMaterial?p(oe,se):se.isLineBasicMaterial?(w(oe,se),se.isLineDashedMaterial&&R(oe,se)):se.isPointsMaterial?L(oe,se,ve,De):se.isSpriteMaterial?H(oe,se):se.isShadowMaterial?(oe.color.value.copy(se.color),oe.opacity.value=se.opacity):se.isShaderMaterial&&(se.uniformsNeedUpdate=!1)}function p(oe,se){oe.opacity.value=se.opacity,se.color&&oe.diffuse.value.copy(se.color),se.emissive&&oe.emissive.value.copy(se.emissive).multiplyScalar(se.emissiveIntensity),se.map&&(oe.map.value=se.map),se.alphaMap&&(oe.alphaMap.value=se.alphaMap),se.bumpMap&&(oe.bumpMap.value=se.bumpMap,oe.bumpScale.value=se.bumpScale,se.side===T&&(oe.bumpScale.value*=-1)),se.displacementMap&&(oe.displacementMap.value=se.displacementMap,oe.displacementScale.value=se.displacementScale,oe.displacementBias.value=se.displacementBias),se.emissiveMap&&(oe.emissiveMap.value=se.emissiveMap),se.normalMap&&(oe.normalMap.value=se.normalMap,oe.normalScale.value.copy(se.normalScale),se.side===T&&oe.normalScale.value.negate()),se.specularMap&&(oe.specularMap.value=se.specularMap),se.alphaTest>0&&(oe.alphaTest.value=se.alphaTest);const ve=r.get(se).envMap;if(ve&&(oe.envMap.value=ve,oe.flipEnvMap.value=ve.isCubeTexture&&ve.isRenderTargetTexture===!1?-1:1,oe.reflectivity.value=se.reflectivity,oe.ior.value=se.ior,oe.refractionRatio.value=se.refractionRatio),se.lightMap){oe.lightMap.value=se.lightMap;const Le=B.physicallyCorrectLights!==!0?Math.PI:1;oe.lightMapIntensity.value=se.lightMapIntensity*Le}se.aoMap&&(oe.aoMap.value=se.aoMap,oe.aoMapIntensity.value=se.aoMapIntensity);let De;se.map?De=se.map:se.specularMap?De=se.specularMap:se.displacementMap?De=se.displacementMap:se.normalMap?De=se.normalMap:se.bumpMap?De=se.bumpMap:se.roughnessMap?De=se.roughnessMap:se.metalnessMap?De=se.metalnessMap:se.alphaMap?De=se.alphaMap:se.emissiveMap?De=se.emissiveMap:se.clearcoatMap?De=se.clearcoatMap:se.clearcoatNormalMap?De=se.clearcoatNormalMap:se.clearcoatRoughnessMap?De=se.clearcoatRoughnessMap:se.iridescenceMap?De=se.iridescenceMap:se.iridescenceThicknessMap?De=se.iridescenceThicknessMap:se.specularIntensityMap?De=se.specularIntensityMap:se.specularColorMap?De=se.specularColorMap:se.transmissionMap?De=se.transmissionMap:se.thicknessMap?De=se.thicknessMap:se.sheenColorMap?De=se.sheenColorMap:se.sheenRoughnessMap&&(De=se.sheenRoughnessMap),De!==void 0&&(De.isWebGLRenderTarget&&(De=De.texture),De.matrixAutoUpdate===!0&&De.updateMatrix(),oe.uvTransform.value.copy(De.matrix));let Ce;se.aoMap?Ce=se.aoMap:se.lightMap&&(Ce=se.lightMap),Ce!==void 0&&(Ce.isWebGLRenderTarget&&(Ce=Ce.texture),Ce.matrixAutoUpdate===!0&&Ce.updateMatrix(),oe.uv2Transform.value.copy(Ce.matrix))}function w(oe,se){oe.diffuse.value.copy(se.color),oe.opacity.value=se.opacity}function R(oe,se){oe.dashSize.value=se.dashSize,oe.totalSize.value=se.dashSize+se.gapSize,oe.scale.value=se.scale}function L(oe,se,ve,De){oe.diffuse.value.copy(se.color),oe.opacity.value=se.opacity,oe.size.value=se.size*ve,oe.scale.value=De*.5,se.map&&(oe.map.value=se.map),se.alphaMap&&(oe.alphaMap.value=se.alphaMap),se.alphaTest>0&&(oe.alphaTest.value=se.alphaTest);let Ce;se.map?Ce=se.map:se.alphaMap&&(Ce=se.alphaMap),Ce!==void 0&&(Ce.matrixAutoUpdate===!0&&Ce.updateMatrix(),oe.uvTransform.value.copy(Ce.matrix))}function H(oe,se){oe.diffuse.value.copy(se.color),oe.opacity.value=se.opacity,oe.rotation.value=se.rotation,se.map&&(oe.map.value=se.map),se.alphaMap&&(oe.alphaMap.value=se.alphaMap),se.alphaTest>0&&(oe.alphaTest.value=se.alphaTest);let ve;se.map?ve=se.map:se.alphaMap&&(ve=se.alphaMap),ve!==void 0&&(ve.matrixAutoUpdate===!0&&ve.updateMatrix(),oe.uvTransform.value.copy(ve.matrix))}function j(oe,se){oe.specular.value.copy(se.specular),oe.shininess.value=Math.max(se.shininess,1e-4)}function X(oe,se){se.gradientMap&&(oe.gradientMap.value=se.gradientMap)}function $(oe,se){oe.roughness.value=se.roughness,oe.metalness.value=se.metalness,se.roughnessMap&&(oe.roughnessMap.value=se.roughnessMap),se.metalnessMap&&(oe.metalnessMap.value=se.metalnessMap),r.get(se).envMap&&(oe.envMapIntensity.value=se.envMapIntensity)}function Z(oe,se,ve){oe.ior.value=se.ior,se.sheen>0&&(oe.sheenColor.value.copy(se.sheenColor).multiplyScalar(se.sheen),oe.sheenRoughness.value=se.sheenRoughness,se.sheenColorMap&&(oe.sheenColorMap.value=se.sheenColorMap),se.sheenRoughnessMap&&(oe.sheenRoughnessMap.value=se.sheenRoughnessMap)),se.clearcoat>0&&(oe.clearcoat.value=se.clearcoat,oe.clearcoatRoughness.value=se.clearcoatRoughness,se.clearcoatMap&&(oe.clearcoatMap.value=se.clearcoatMap),se.clearcoatRoughnessMap&&(oe.clearcoatRoughnessMap.value=se.clearcoatRoughnessMap),se.clearcoatNormalMap&&(oe.clearcoatNormalScale.value.copy(se.clearcoatNormalScale),oe.clearcoatNormalMap.value=se.clearcoatNormalMap,se.side===T&&oe.clearcoatNormalScale.value.negate())),se.iridescence>0&&(oe.iridescence.value=se.iridescence,oe.iridescenceIOR.value=se.iridescenceIOR,oe.iridescenceThicknessMinimum.value=se.iridescenceThicknessRange[0],oe.iridescenceThicknessMaximum.value=se.iridescenceThicknessRange[1],se.iridescenceMap&&(oe.iridescenceMap.value=se.iridescenceMap),se.iridescenceThicknessMap&&(oe.iridescenceThicknessMap.value=se.iridescenceThicknessMap)),se.transmission>0&&(oe.transmission.value=se.transmission,oe.transmissionSamplerMap.value=ve.texture,oe.transmissionSamplerSize.value.set(ve.width,ve.height),se.transmissionMap&&(oe.transmissionMap.value=se.transmissionMap),oe.thickness.value=se.thickness,se.thicknessMap&&(oe.thicknessMap.value=se.thicknessMap),oe.attenuationDistance.value=se.attenuationDistance,oe.attenuationColor.value.copy(se.attenuationColor)),oe.specularIntensity.value=se.specularIntensity,oe.specularColor.value.copy(se.specularColor),se.specularIntensityMap&&(oe.specularIntensityMap.value=se.specularIntensityMap),se.specularColorMap&&(oe.specularColorMap.value=se.specularColorMap)}function te(oe,se){se.matcap&&(oe.matcap.value=se.matcap)}function le(oe,se){oe.referencePosition.value.copy(se.referencePosition),oe.nearDistance.value=se.nearDistance,oe.farDistance.value=se.farDistance}return{refreshFogUniforms:a,refreshMaterialUniforms:h}}function Uw(B,r,a,h){let p={},w={},R=[];const L=a.isWebGL2?B.getParameter(35375):0;function H(De,Ce){const Le=Ce.program;h.uniformBlockBinding(De,Le)}function j(De,Ce){let Le=p[De.id];Le===void 0&&(le(De),Le=X(De),p[De.id]=Le,De.addEventListener("dispose",se));const ze=Ce.program;h.updateUBOMapping(De,ze);const tt=r.render.frame;w[De.id]!==tt&&(Z(De),w[De.id]=tt)}function X(De){const Ce=$();De.__bindingPointIndex=Ce;const Le=B.createBuffer(),ze=De.__size,tt=De.usage;return B.bindBuffer(35345,Le),B.bufferData(35345,ze,tt),B.bindBuffer(35345,null),B.bindBufferBase(35345,Ce,Le),Le}function $(){for(let De=0;De<L;De++)if(R.indexOf(De)===-1)return R.push(De),De;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Z(De){const Ce=p[De.id],Le=De.uniforms,ze=De.__cache;B.bindBuffer(35345,Ce);for(let tt=0,ft=Le.length;tt<ft;tt++){const Oe=Le[tt];if(te(Oe,tt,ze)===!0){const ot=Oe.value,ut=Oe.__offset;typeof ot=="number"?(Oe.__data[0]=ot,B.bufferSubData(35345,ut,Oe.__data)):(Oe.value.isMatrix3?(Oe.__data[0]=Oe.value.elements[0],Oe.__data[1]=Oe.value.elements[1],Oe.__data[2]=Oe.value.elements[2],Oe.__data[3]=Oe.value.elements[0],Oe.__data[4]=Oe.value.elements[3],Oe.__data[5]=Oe.value.elements[4],Oe.__data[6]=Oe.value.elements[5],Oe.__data[7]=Oe.value.elements[0],Oe.__data[8]=Oe.value.elements[6],Oe.__data[9]=Oe.value.elements[7],Oe.__data[10]=Oe.value.elements[8],Oe.__data[11]=Oe.value.elements[0]):ot.toArray(Oe.__data),B.bufferSubData(35345,ut,Oe.__data))}}B.bindBuffer(35345,null)}function te(De,Ce,Le){const ze=De.value;if(Le[Ce]===void 0)return typeof ze=="number"?Le[Ce]=ze:Le[Ce]=ze.clone(),!0;if(typeof ze=="number"){if(Le[Ce]!==ze)return Le[Ce]=ze,!0}else{const tt=Le[Ce];if(tt.equals(ze)===!1)return tt.copy(ze),!0}return!1}function le(De){const Ce=De.uniforms;let Le=0;const ze=16;let tt=0;for(let ft=0,Oe=Ce.length;ft<Oe;ft++){const ot=Ce[ft],ut=oe(ot);if(ot.__data=new Float32Array(ut.storage/Float32Array.BYTES_PER_ELEMENT),ot.__offset=Le,ft>0){tt=Le%ze;const Tt=ze-tt;tt!==0&&Tt-ut.boundary<0&&(Le+=ze-tt,ot.__offset=Le)}Le+=ut.storage}return tt=Le%ze,tt>0&&(Le+=ze-tt),De.__size=Le,De.__cache={},this}function oe(De){const Ce=De.value,Le={boundary:0,storage:0};return typeof Ce=="number"?(Le.boundary=4,Le.storage=4):Ce.isVector2?(Le.boundary=8,Le.storage=8):Ce.isVector3||Ce.isColor?(Le.boundary=16,Le.storage=12):Ce.isVector4?(Le.boundary=16,Le.storage=16):Ce.isMatrix3?(Le.boundary=48,Le.storage=48):Ce.isMatrix4?(Le.boundary=64,Le.storage=64):Ce.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ce),Le}function se(De){const Ce=De.target;Ce.removeEventListener("dispose",se);const Le=R.indexOf(Ce.__bindingPointIndex);R.splice(Le,1),B.deleteBuffer(p[Ce.id]),delete p[Ce.id],delete w[Ce.id]}function ve(){for(const De in p)B.deleteBuffer(p[De]);R=[],p={},w={}}return{bind:H,update:j,dispose:ve}}function sA(){const B=Du("canvas");return B.style.display="block",B}function $1(B={}){this.isWebGLRenderer=!0;const r=B.canvas!==void 0?B.canvas:sA(),a=B.context!==void 0?B.context:null,h=B.depth!==void 0?B.depth:!0,p=B.stencil!==void 0?B.stencil:!0,w=B.antialias!==void 0?B.antialias:!1,R=B.premultipliedAlpha!==void 0?B.premultipliedAlpha:!0,L=B.preserveDrawingBuffer!==void 0?B.preserveDrawingBuffer:!1,H=B.powerPreference!==void 0?B.powerPreference:"default",j=B.failIfMajorPerformanceCaveat!==void 0?B.failIfMajorPerformanceCaveat:!1;let X;a!==null?X=a.getContextAttributes().alpha:X=B.alpha!==void 0?B.alpha:!1;let $=null,Z=null;const te=[],le=[];this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ui,this.physicallyCorrectLights=!1,this.toneMapping=Wn,this.toneMappingExposure=1;const oe=this;let se=!1,ve=0,De=0,Ce=null,Le=-1,ze=null;const tt=new kr,ft=new kr;let Oe=null,ot=r.width,ut=r.height,Tt=1,jt=null,Lt=null;const bt=new kr(0,0,ot,ut),Ut=new kr(0,0,ot,ut);let fn=!1;const xn=new tm;let hn=!1,Dn=!1,In=null;const fi=new oi,ni=new un,qt=new je,En={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $n(){return Ce===null?Tt:1}let Ht=a;function gi(Ze,kt){for(let $t=0;$t<Ze.length;$t++){const Dt=Ze[$t],an=r.getContext(Dt,kt);if(an!==null)return an}return null}try{const Ze={alpha:!0,depth:h,stencil:p,antialias:w,premultipliedAlpha:R,preserveDrawingBuffer:L,powerPreference:H,failIfMajorPerformanceCaveat:j};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${f}`),r.addEventListener("webglcontextlost",Xi,!1),r.addEventListener("webglcontextrestored",Vi,!1),r.addEventListener("webglcontextcreationerror",Yr,!1),Ht===null){const kt=["webgl2","webgl","experimental-webgl"];if(oe.isWebGL1Renderer===!0&&kt.shift(),Ht=gi(kt,Ze),Ht===null)throw gi(kt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ht.getShaderPrecisionFormat===void 0&&(Ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ze){throw console.error("THREE.WebGLRenderer: "+Ze.message),Ze}let Zn,Ni,Gn,yr,pn,ln,Qn,Ii,ii,rr,Ki,zi,us,ns,at,$e,Kt,Pn,Vn,ai,tr,ci,cn,Hi;function Zi(){Zn=new y2(Ht),Ni=new hm(Ht,Zn,B),Zn.init(Ni),ci=new K1(Ht,Zn,Ni),Gn=new cl(Ht,Zn,Ni),yr=new E2,pn=new Am,ln=new Fw(Ht,Zn,Gn,pn,Ni,ci,yr),Qn=new Fl(oe),Ii=new v2(oe),ii=new E0(Ht,Ni),cn=new v1(Ht,Zn,ii,Ni),rr=new C1(Ht,ii,yr,cn),Ki=new C2(Ht,rr,ii,yr),Vn=new w2(Ht,Ni,ln),$e=new x1(pn),zi=new gm(oe,Qn,Ii,Zn,Ni,cn,$e),us=new Nw(oe,pn),ns=new Q1,at=new Bw(Zn,Ni),Pn=new z0(oe,Qn,Ii,Gn,Ki,X,R),Kt=new Ow(oe,Ki,Ni),Hi=new Uw(Ht,yr,Ni,Gn),ai=new y1(Ht,Zn,yr,Ni),tr=new x2(Ht,Zn,yr,Ni),yr.programs=zi.programs,oe.capabilities=Ni,oe.extensions=Zn,oe.properties=pn,oe.renderLists=ns,oe.shadowMap=Kt,oe.state=Gn,oe.info=yr}Zi();const Ei=typeof navigator<"u"&&"xr"in navigator?new kw(oe,Ht):new Y1(oe);this.xr=Ei,this.getContext=function(){return Ht},this.getContextAttributes=function(){return Ht.getContextAttributes()},this.forceContextLoss=function(){const Ze=Zn.get("WEBGL_lose_context");Ze&&Ze.loseContext()},this.forceContextRestore=function(){const Ze=Zn.get("WEBGL_lose_context");Ze&&Ze.restoreContext()},this.getPixelRatio=function(){return Tt},this.setPixelRatio=function(Ze){Ze!==void 0&&(Tt=Ze,this.setSize(ot,ut,!1))},this.getSize=function(Ze){return Ze.set(ot,ut)},this.setSize=function(Ze,kt,$t){if(Ei.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ot=Ze,ut=kt,r.width=Math.floor(Ze*Tt),r.height=Math.floor(kt*Tt),$t!==!1&&(r.style.width=Ze+"px",r.style.height=kt+"px"),this.setViewport(0,0,Ze,kt)},this.getDrawingBufferSize=function(Ze){return Ze.set(ot*Tt,ut*Tt).floor()},this.setDrawingBufferSize=function(Ze,kt,$t){ot=Ze,ut=kt,Tt=$t,r.width=Math.floor(Ze*$t),r.height=Math.floor(kt*$t),this.setViewport(0,0,Ze,kt)},this.getCurrentViewport=function(Ze){return Ze.copy(tt)},this.getViewport=function(Ze){return Ze.copy(bt)},this.setViewport=function(Ze,kt,$t,Dt){Ze.isVector4?bt.set(Ze.x,Ze.y,Ze.z,Ze.w):bt.set(Ze,kt,$t,Dt),Gn.viewport(tt.copy(bt).multiplyScalar(Tt).floor())},this.getScissor=function(Ze){return Ze.copy(Ut)},this.setScissor=function(Ze,kt,$t,Dt){Ze.isVector4?Ut.set(Ze.x,Ze.y,Ze.z,Ze.w):Ut.set(Ze,kt,$t,Dt),Gn.scissor(ft.copy(Ut).multiplyScalar(Tt).floor())},this.getScissorTest=function(){return fn},this.setScissorTest=function(Ze){Gn.setScissorTest(fn=Ze)},this.setOpaqueSort=function(Ze){jt=Ze},this.setTransparentSort=function(Ze){Lt=Ze},this.getClearColor=function(Ze){return Ze.copy(Pn.getClearColor())},this.setClearColor=function(){Pn.setClearColor.apply(Pn,arguments)},this.getClearAlpha=function(){return Pn.getClearAlpha()},this.setClearAlpha=function(){Pn.setClearAlpha.apply(Pn,arguments)},this.clear=function(Ze=!0,kt=!0,$t=!0){let Dt=0;Ze&&(Dt|=16384),kt&&(Dt|=256),$t&&(Dt|=1024),Ht.clear(Dt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Xi,!1),r.removeEventListener("webglcontextrestored",Vi,!1),r.removeEventListener("webglcontextcreationerror",Yr,!1),ns.dispose(),at.dispose(),pn.dispose(),Qn.dispose(),Ii.dispose(),Ki.dispose(),cn.dispose(),Hi.dispose(),zi.dispose(),Ei.dispose(),Ei.removeEventListener("sessionstart",pi),Ei.removeEventListener("sessionend",Bi),In&&(In.dispose(),In=null),Zr.stop()};function Xi(Ze){Ze.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),se=!0}function Vi(){console.log("THREE.WebGLRenderer: Context Restored."),se=!1;const Ze=yr.autoReset,kt=Kt.enabled,$t=Kt.autoUpdate,Dt=Kt.needsUpdate,an=Kt.type;Zi(),yr.autoReset=Ze,Kt.enabled=kt,Kt.autoUpdate=$t,Kt.needsUpdate=Dt,Kt.type=an}function Yr(Ze){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ze.statusMessage)}function Rs(Ze){const kt=Ze.target;kt.removeEventListener("dispose",Rs),bo(kt)}function bo(Ze){_t(Ze),pn.remove(Ze)}function _t(Ze){const kt=pn.get(Ze).programs;kt!==void 0&&(kt.forEach(function($t){zi.releaseProgram($t)}),Ze.isShaderMaterial&&zi.releaseShaderCache(Ze))}this.renderBufferDirect=function(Ze,kt,$t,Dt,an,Qi){kt===null&&(kt=En);const or=an.isMesh&&an.matrixWorld.determinant()<0,Sr=u8(Ze,kt,$t,Dt,an);Gn.setMaterial(Dt,or);let Dr=$t.index,qr=1;Dt.wireframe===!0&&(Dr=rr.getWireframeAttribute($t),qr=2);const Gr=$t.drawRange,zr=$t.attributes.position;let so=Gr.start*qr,fl=(Gr.start+Gr.count)*qr;Qi!==null&&(so=Math.max(so,Qi.start*qr),fl=Math.min(fl,(Qi.start+Qi.count)*qr)),Dr!==null?(so=Math.max(so,0),fl=Math.min(fl,Dr.count)):zr!=null&&(so=Math.max(so,0),fl=Math.min(fl,zr.count));const $u=fl-so;if($u<0||$u===1/0)return;cn.setup(an,Dt,Sr,$t,Dr);let Yf,oo=ai;if(Dr!==null&&(Yf=ii.get(Dr),oo=tr,oo.setIndex(Yf)),an.isMesh)Dt.wireframe===!0?(Gn.setLineWidth(Dt.wireframeLinewidth*$n()),oo.setMode(1)):oo.setMode(4);else if(an.isLine){let Hr=Dt.linewidth;Hr===void 0&&(Hr=1),Gn.setLineWidth(Hr*$n()),an.isLineSegments?oo.setMode(1):an.isLineLoop?oo.setMode(2):oo.setMode(3)}else an.isPoints?oo.setMode(0):an.isSprite&&oo.setMode(4);if(an.isInstancedMesh)oo.renderInstances(so,$u,an.count);else if($t.isInstancedBufferGeometry){const Hr=$t._maxInstanceCount!==void 0?$t._maxInstanceCount:1/0,bC=Math.min($t.instanceCount,Hr);oo.renderInstances(so,$u,bC)}else oo.render(so,$u)},this.compile=function(Ze,kt){function $t(Dt,an,Qi){Dt.transparent===!0&&Dt.side===N?(Dt.side=T,Dt.needsUpdate=!0,Hl(Dt,an,Qi),Dt.side=M,Dt.needsUpdate=!0,Hl(Dt,an,Qi),Dt.side=N):Hl(Dt,an,Qi)}Z=at.get(Ze),Z.init(),le.push(Z),Ze.traverseVisible(function(Dt){Dt.isLight&&Dt.layers.test(kt.layers)&&(Z.pushLight(Dt),Dt.castShadow&&Z.pushShadow(Dt))}),Z.setupLights(oe.physicallyCorrectLights),Ze.traverse(function(Dt){const an=Dt.material;if(an)if(Array.isArray(an))for(let Qi=0;Qi<an.length;Qi++){const or=an[Qi];$t(or,Ze,Dt)}else $t(an,Ze,Dt)}),le.pop(),Z=null};let tn=null;function Bn(Ze){tn&&tn(Ze)}function pi(){Zr.stop()}function Bi(){Zr.start()}const Zr=new x0;Zr.setAnimationLoop(Bn),typeof self<"u"&&Zr.setContext(self),this.setAnimationLoop=function(Ze){tn=Ze,Ei.setAnimationLoop(Ze),Ze===null?Zr.stop():Zr.start()},Ei.addEventListener("sessionstart",pi),Ei.addEventListener("sessionend",Bi),this.render=function(Ze,kt){if(kt!==void 0&&kt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(se===!0)return;Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),kt.parent===null&&kt.matrixWorldAutoUpdate===!0&&kt.updateMatrixWorld(),Ei.enabled===!0&&Ei.isPresenting===!0&&(Ei.cameraAutoUpdate===!0&&Ei.updateCamera(kt),kt=Ei.getCamera()),Ze.isScene===!0&&Ze.onBeforeRender(oe,Ze,kt,Ce),Z=at.get(Ze,le.length),Z.init(),le.push(Z),fi.multiplyMatrices(kt.projectionMatrix,kt.matrixWorldInverse),xn.setFromProjectionMatrix(fi),Dn=this.localClippingEnabled,hn=$e.init(this.clippingPlanes,Dn,kt),$=ns.get(Ze,te.length),$.init(),te.push($),wo(Ze,kt,0,oe.sortObjects),$.finish(),oe.sortObjects===!0&&$.sort(jt,Lt),hn===!0&&$e.beginShadows();const $t=Z.state.shadowsArray;if(Kt.render($t,Ze,kt),hn===!0&&$e.endShadows(),this.info.autoReset===!0&&this.info.reset(),Pn.render($,Ze),Z.setupLights(oe.physicallyCorrectLights),kt.isArrayCamera){const Dt=kt.cameras;for(let an=0,Qi=Dt.length;an<Qi;an++){const or=Dt[an];Zo($,Ze,or,or.viewport)}}else Zo($,Ze,kt);Ce!==null&&(ln.updateMultisampleRenderTarget(Ce),ln.updateRenderTargetMipmap(Ce)),Ze.isScene===!0&&Ze.onAfterRender(oe,Ze,kt),Ei.enabled&&Ei.submitFrame&&Ei.submitFrame(),cn.resetDefaultState(),Le=-1,ze=null,le.pop(),le.length>0?Z=le[le.length-1]:Z=null,te.pop(),te.length>0?$=te[te.length-1]:$=null};function wo(Ze,kt,$t,Dt){if(Ze.visible===!1)return;if(Ze.layers.test(kt.layers)){if(Ze.isGroup)$t=Ze.renderOrder;else if(Ze.isLOD)Ze.autoUpdate===!0&&Ze.update(kt);else if(Ze.isLight)Z.pushLight(Ze),Ze.castShadow&&Z.pushShadow(Ze);else if(Ze.isSprite){if(!Ze.frustumCulled||xn.intersectsSprite(Ze)){Dt&&qt.setFromMatrixPosition(Ze.matrixWorld).applyMatrix4(fi);const or=Ki.update(Ze),Sr=Ze.material;Sr.visible&&$.push(Ze,or,Sr,$t,qt.z,null)}}else if((Ze.isMesh||Ze.isLine||Ze.isPoints)&&(Ze.isSkinnedMesh&&Ze.skeleton.frame!==yr.render.frame&&(Ze.skeleton.update(),Ze.skeleton.frame=yr.render.frame),!Ze.frustumCulled||xn.intersectsObject(Ze))){Dt&&qt.setFromMatrixPosition(Ze.matrixWorld).applyMatrix4(fi);const or=Ki.update(Ze),Sr=Ze.material;if(Array.isArray(Sr)){const Dr=or.groups;for(let qr=0,Gr=Dr.length;qr<Gr;qr++){const zr=Dr[qr],so=Sr[zr.materialIndex];so&&so.visible&&$.push(Ze,or,so,$t,qt.z,zr)}}else Sr.visible&&$.push(Ze,or,Sr,$t,qt.z,null)}}const Qi=Ze.children;for(let or=0,Sr=Qi.length;or<Sr;or++)wo(Qi[or],kt,$t,Dt)}function Zo(Ze,kt,$t,Dt){const an=Ze.opaque,Qi=Ze.transmissive,or=Ze.transparent;Z.setupLightsView($t),Qi.length>0&&Xf(an,kt,$t),Dt&&Gn.viewport(tt.copy(Dt)),an.length>0&&Ls(an,kt,$t),Qi.length>0&&Ls(Qi,kt,$t),or.length>0&&Ls(or,kt,$t),Gn.buffers.depth.setTest(!0),Gn.buffers.depth.setMask(!0),Gn.buffers.color.setMask(!0),Gn.setPolygonOffset(!1)}function Xf(Ze,kt,$t){const Dt=Ni.isWebGL2;In===null&&(In=new Qo(1,1,{generateMipmaps:!0,type:Zn.has("EXT_color_buffer_half_float")?Qt:dn,minFilter:Ot,samples:Dt&&w===!0?4:0})),oe.getDrawingBufferSize(ni),Dt?In.setSize(ni.x,ni.y):In.setSize(Vc(ni.x),Vc(ni.y));const an=oe.getRenderTarget();oe.setRenderTarget(In),oe.clear();const Qi=oe.toneMapping;oe.toneMapping=Wn,Ls(Ze,kt,$t),oe.toneMapping=Qi,ln.updateMultisampleRenderTarget(In),ln.updateRenderTargetMipmap(In),oe.setRenderTarget(an)}function Ls(Ze,kt,$t){const Dt=kt.isScene===!0?kt.overrideMaterial:null;for(let an=0,Qi=Ze.length;an<Qi;an++){const or=Ze[an],Sr=or.object,Dr=or.geometry,qr=Dt===null?or.material:Dt,Gr=or.group;Sr.layers.test($t.layers)&&qu(Sr,kt,$t,Dr,qr,Gr)}}function qu(Ze,kt,$t,Dt,an,Qi){Ze.onBeforeRender(oe,kt,$t,Dt,an,Qi),Ze.modelViewMatrix.multiplyMatrices($t.matrixWorldInverse,Ze.matrixWorld),Ze.normalMatrix.getNormalMatrix(Ze.modelViewMatrix),an.onBeforeRender(oe,kt,$t,Dt,Ze,Qi),an.transparent===!0&&an.side===N?(an.side=T,an.needsUpdate=!0,oe.renderBufferDirect($t,kt,Dt,an,Ze,Qi),an.side=M,an.needsUpdate=!0,oe.renderBufferDirect($t,kt,Dt,an,Ze,Qi),an.side=N):oe.renderBufferDirect($t,kt,Dt,an,Ze,Qi),Ze.onAfterRender(oe,kt,$t,Dt,an,Qi)}function Hl(Ze,kt,$t){kt.isScene!==!0&&(kt=En);const Dt=pn.get(Ze),an=Z.state.lights,Qi=Z.state.shadowsArray,or=an.state.version,Sr=zi.getParameters(Ze,an.state,Qi,kt,$t),Dr=zi.getProgramCacheKey(Sr);let qr=Dt.programs;Dt.environment=Ze.isMeshStandardMaterial?kt.environment:null,Dt.fog=kt.fog,Dt.envMap=(Ze.isMeshStandardMaterial?Ii:Qn).get(Ze.envMap||Dt.environment),qr===void 0&&(Ze.addEventListener("dispose",Rs),qr=new Map,Dt.programs=qr);let Gr=qr.get(Dr);if(Gr!==void 0){if(Dt.currentProgram===Gr&&Dt.lightsStateVersion===or)return CR(Ze,Sr),Gr}else Sr.uniforms=zi.getUniforms(Ze),Ze.onBuild($t,Sr,oe),Ze.onBeforeCompile(Sr,oe),Gr=zi.acquireProgram(Sr,Dr),qr.set(Dr,Gr),Dt.uniforms=Sr.uniforms;const zr=Dt.uniforms;(!Ze.isShaderMaterial&&!Ze.isRawShaderMaterial||Ze.clipping===!0)&&(zr.clippingPlanes=$e.uniform),CR(Ze,Sr),Dt.needsLights=d8(Ze),Dt.lightsStateVersion=or,Dt.needsLights&&(zr.ambientLightColor.value=an.state.ambient,zr.lightProbe.value=an.state.probe,zr.directionalLights.value=an.state.directional,zr.directionalLightShadows.value=an.state.directionalShadow,zr.spotLights.value=an.state.spot,zr.spotLightShadows.value=an.state.spotShadow,zr.rectAreaLights.value=an.state.rectArea,zr.ltc_1.value=an.state.rectAreaLTC1,zr.ltc_2.value=an.state.rectAreaLTC2,zr.pointLights.value=an.state.point,zr.pointLightShadows.value=an.state.pointShadow,zr.hemisphereLights.value=an.state.hemi,zr.directionalShadowMap.value=an.state.directionalShadowMap,zr.directionalShadowMatrix.value=an.state.directionalShadowMatrix,zr.spotShadowMap.value=an.state.spotShadowMap,zr.spotLightMatrix.value=an.state.spotLightMatrix,zr.spotLightMap.value=an.state.spotLightMap,zr.pointShadowMap.value=an.state.pointShadowMap,zr.pointShadowMatrix.value=an.state.pointShadowMatrix);const so=Gr.getUniforms(),fl=Af.seqWithValue(so.seq,zr);return Dt.currentProgram=Gr,Dt.uniformsList=fl,Gr}function CR(Ze,kt){const $t=pn.get(Ze);$t.outputEncoding=kt.outputEncoding,$t.instancing=kt.instancing,$t.skinning=kt.skinning,$t.morphTargets=kt.morphTargets,$t.morphNormals=kt.morphNormals,$t.morphColors=kt.morphColors,$t.morphTargetsCount=kt.morphTargetsCount,$t.numClippingPlanes=kt.numClippingPlanes,$t.numIntersection=kt.numClipIntersection,$t.vertexAlphas=kt.vertexAlphas,$t.vertexTangents=kt.vertexTangents,$t.toneMapping=kt.toneMapping}function u8(Ze,kt,$t,Dt,an){kt.isScene!==!0&&(kt=En),ln.resetTextureUnits();const Qi=kt.fog,or=Dt.isMeshStandardMaterial?kt.environment:null,Sr=Ce===null?oe.outputEncoding:Ce.isXRRenderTarget===!0?Ce.texture.encoding:ui,Dr=(Dt.isMeshStandardMaterial?Ii:Qn).get(Dt.envMap||or),qr=Dt.vertexColors===!0&&!!$t.attributes.color&&$t.attributes.color.itemSize===4,Gr=!!Dt.normalMap&&!!$t.attributes.tangent,zr=!!$t.morphAttributes.position,so=!!$t.morphAttributes.normal,fl=!!$t.morphAttributes.color,$u=Dt.toneMapped?oe.toneMapping:Wn,Yf=$t.morphAttributes.position||$t.morphAttributes.normal||$t.morphAttributes.color,oo=Yf!==void 0?Yf.length:0,Hr=pn.get(Dt),bC=Z.state.lights;if(hn===!0&&(Dn===!0||Ze!==ze)){const pl=Ze===ze&&Dt.id===Le;$e.setState(Dt,Ze,pl)}let Co=!1;Dt.version===Hr.__version?(Hr.needsLights&&Hr.lightsStateVersion!==bC.state.version||Hr.outputEncoding!==Sr||an.isInstancedMesh&&Hr.instancing===!1||!an.isInstancedMesh&&Hr.instancing===!0||an.isSkinnedMesh&&Hr.skinning===!1||!an.isSkinnedMesh&&Hr.skinning===!0||Hr.envMap!==Dr||Dt.fog===!0&&Hr.fog!==Qi||Hr.numClippingPlanes!==void 0&&(Hr.numClippingPlanes!==$e.numPlanes||Hr.numIntersection!==$e.numIntersection)||Hr.vertexAlphas!==qr||Hr.vertexTangents!==Gr||Hr.morphTargets!==zr||Hr.morphNormals!==so||Hr.morphColors!==fl||Hr.toneMapping!==$u||Ni.isWebGL2===!0&&Hr.morphTargetsCount!==oo)&&(Co=!0):(Co=!0,Hr.__version=Dt.version);let qf=Hr.currentProgram;Co===!0&&(qf=Hl(Dt,kt,an));let MR=!1,NA=!1,wC=!1;const wa=qf.getUniforms(),$f=Hr.uniforms;if(Gn.useProgram(qf.program)&&(MR=!0,NA=!0,wC=!0),Dt.id!==Le&&(Le=Dt.id,NA=!0),MR||ze!==Ze){if(wa.setValue(Ht,"projectionMatrix",Ze.projectionMatrix),Ni.logarithmicDepthBuffer&&wa.setValue(Ht,"logDepthBufFC",2/(Math.log(Ze.far+1)/Math.LN2)),ze!==Ze&&(ze=Ze,NA=!0,wC=!0),Dt.isShaderMaterial||Dt.isMeshPhongMaterial||Dt.isMeshToonMaterial||Dt.isMeshStandardMaterial||Dt.envMap){const pl=wa.map.cameraPosition;pl!==void 0&&pl.setValue(Ht,qt.setFromMatrixPosition(Ze.matrixWorld))}(Dt.isMeshPhongMaterial||Dt.isMeshToonMaterial||Dt.isMeshLambertMaterial||Dt.isMeshBasicMaterial||Dt.isMeshStandardMaterial||Dt.isShaderMaterial)&&wa.setValue(Ht,"isOrthographic",Ze.isOrthographicCamera===!0),(Dt.isMeshPhongMaterial||Dt.isMeshToonMaterial||Dt.isMeshLambertMaterial||Dt.isMeshBasicMaterial||Dt.isMeshStandardMaterial||Dt.isShaderMaterial||Dt.isShadowMaterial||an.isSkinnedMesh)&&wa.setValue(Ht,"viewMatrix",Ze.matrixWorldInverse)}if(an.isSkinnedMesh){wa.setOptional(Ht,an,"bindMatrix"),wa.setOptional(Ht,an,"bindMatrixInverse");const pl=an.skeleton;pl&&(Ni.floatVertexTextures?(pl.boneTexture===null&&pl.computeBoneTexture(),wa.setValue(Ht,"boneTexture",pl.boneTexture,ln),wa.setValue(Ht,"boneTextureSize",pl.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const CC=$t.morphAttributes;if((CC.position!==void 0||CC.normal!==void 0||CC.color!==void 0&&Ni.isWebGL2===!0)&&Vn.update(an,$t,Dt,qf),(NA||Hr.receiveShadow!==an.receiveShadow)&&(Hr.receiveShadow=an.receiveShadow,wa.setValue(Ht,"receiveShadow",an.receiveShadow)),Dt.isMeshGouraudMaterial&&Dt.envMap!==null&&($f.envMap.value=Dr,$f.flipEnvMap.value=Dr.isCubeTexture&&Dr.isRenderTargetTexture===!1?-1:1),NA&&(wa.setValue(Ht,"toneMappingExposure",oe.toneMappingExposure),Hr.needsLights&&h8($f,wC),Qi&&Dt.fog===!0&&us.refreshFogUniforms($f,Qi),us.refreshMaterialUniforms($f,Dt,Tt,ut,In),Af.upload(Ht,Hr.uniformsList,$f,ln)),Dt.isShaderMaterial&&Dt.uniformsNeedUpdate===!0&&(Af.upload(Ht,Hr.uniformsList,$f,ln),Dt.uniformsNeedUpdate=!1),Dt.isSpriteMaterial&&wa.setValue(Ht,"center",an.center),wa.setValue(Ht,"modelViewMatrix",an.modelViewMatrix),wa.setValue(Ht,"normalMatrix",an.normalMatrix),wa.setValue(Ht,"modelMatrix",an.matrixWorld),Dt.isShaderMaterial||Dt.isRawShaderMaterial){const pl=Dt.uniformsGroups;for(let MC=0,f8=pl.length;MC<f8;MC++)if(Ni.isWebGL2){const SR=pl[MC];Hi.update(SR,qf),Hi.bind(SR,qf)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qf}function h8(Ze,kt){Ze.ambientLightColor.needsUpdate=kt,Ze.lightProbe.needsUpdate=kt,Ze.directionalLights.needsUpdate=kt,Ze.directionalLightShadows.needsUpdate=kt,Ze.pointLights.needsUpdate=kt,Ze.pointLightShadows.needsUpdate=kt,Ze.spotLights.needsUpdate=kt,Ze.spotLightShadows.needsUpdate=kt,Ze.rectAreaLights.needsUpdate=kt,Ze.hemisphereLights.needsUpdate=kt}function d8(Ze){return Ze.isMeshLambertMaterial||Ze.isMeshToonMaterial||Ze.isMeshPhongMaterial||Ze.isMeshStandardMaterial||Ze.isShadowMaterial||Ze.isShaderMaterial&&Ze.lights===!0}this.setTexture2D=function(){var Ze=!1;return function($t,Dt){$t&&$t.isWebGLRenderTarget&&(Ze||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ze=!0),$t=$t.texture),ln.setTexture2D($t,Dt)}}(),this.getActiveCubeFace=function(){return ve},this.getActiveMipmapLevel=function(){return De},this.getRenderTarget=function(){return Ce},this.setRenderTargetTextures=function(Ze,kt,$t){pn.get(Ze.texture).__webglTexture=kt,pn.get(Ze.depthTexture).__webglTexture=$t;const Dt=pn.get(Ze);Dt.__hasExternalTextures=!0,Dt.__hasExternalTextures&&(Dt.__autoAllocateDepthBuffer=$t===void 0,Dt.__autoAllocateDepthBuffer||Zn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Dt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ze,kt){const $t=pn.get(Ze);$t.__webglFramebuffer=kt,$t.__useDefaultFramebuffer=kt===void 0},this.setRenderTarget=function(Ze,kt=0,$t=0){Ce=Ze,ve=kt,De=$t;let Dt=!0,an=null,Qi=!1,or=!1;if(Ze){const Dr=pn.get(Ze);Dr.__useDefaultFramebuffer!==void 0?(Gn.bindFramebuffer(36160,null),Dt=!1):Dr.__webglFramebuffer===void 0?ln.setupRenderTarget(Ze):Dr.__hasExternalTextures&&ln.rebindTextures(Ze,pn.get(Ze.texture).__webglTexture,pn.get(Ze.depthTexture).__webglTexture);const qr=Ze.texture;(qr.isData3DTexture||qr.isDataArrayTexture||qr.isCompressedArrayTexture)&&(or=!0);const Gr=pn.get(Ze).__webglFramebuffer;Ze.isWebGLCubeRenderTarget?(an=Gr[kt],Qi=!0):Ni.isWebGL2&&Ze.samples>0&&ln.useMultisampledRTT(Ze)===!1?an=pn.get(Ze).__webglMultisampledFramebuffer:an=Gr,tt.copy(Ze.viewport),ft.copy(Ze.scissor),Oe=Ze.scissorTest}else tt.copy(bt).multiplyScalar(Tt).floor(),ft.copy(Ut).multiplyScalar(Tt).floor(),Oe=fn;if(Gn.bindFramebuffer(36160,an)&&Ni.drawBuffers&&Dt&&Gn.drawBuffers(Ze,an),Gn.viewport(tt),Gn.scissor(ft),Gn.setScissorTest(Oe),Qi){const Dr=pn.get(Ze.texture);Ht.framebufferTexture2D(36160,36064,34069+kt,Dr.__webglTexture,$t)}else if(or){const Dr=pn.get(Ze.texture),qr=kt||0;Ht.framebufferTextureLayer(36160,36064,Dr.__webglTexture,$t||0,qr)}Le=-1},this.readRenderTargetPixels=function(Ze,kt,$t,Dt,an,Qi,or){if(!(Ze&&Ze.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Sr=pn.get(Ze).__webglFramebuffer;if(Ze.isWebGLCubeRenderTarget&&or!==void 0&&(Sr=Sr[or]),Sr){Gn.bindFramebuffer(36160,Sr);try{const Dr=Ze.texture,qr=Dr.format,Gr=Dr.type;if(qr!==Li&&ci.convert(qr)!==Ht.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const zr=Gr===Qt&&(Zn.has("EXT_color_buffer_half_float")||Ni.isWebGL2&&Zn.has("EXT_color_buffer_float"));if(Gr!==dn&&ci.convert(Gr)!==Ht.getParameter(35738)&&!(Gr===Tn&&(Ni.isWebGL2||Zn.has("OES_texture_float")||Zn.has("WEBGL_color_buffer_float")))&&!zr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}kt>=0&&kt<=Ze.width-Dt&&$t>=0&&$t<=Ze.height-an&&Ht.readPixels(kt,$t,Dt,an,ci.convert(qr),ci.convert(Gr),Qi)}finally{const Dr=Ce!==null?pn.get(Ce).__webglFramebuffer:null;Gn.bindFramebuffer(36160,Dr)}}},this.copyFramebufferToTexture=function(Ze,kt,$t=0){const Dt=Math.pow(2,-$t),an=Math.floor(kt.image.width*Dt),Qi=Math.floor(kt.image.height*Dt);ln.setTexture2D(kt,0),Ht.copyTexSubImage2D(3553,$t,0,0,Ze.x,Ze.y,an,Qi),Gn.unbindTexture()},this.copyTextureToTexture=function(Ze,kt,$t,Dt=0){const an=kt.image.width,Qi=kt.image.height,or=ci.convert($t.format),Sr=ci.convert($t.type);ln.setTexture2D($t,0),Ht.pixelStorei(37440,$t.flipY),Ht.pixelStorei(37441,$t.premultiplyAlpha),Ht.pixelStorei(3317,$t.unpackAlignment),kt.isDataTexture?Ht.texSubImage2D(3553,Dt,Ze.x,Ze.y,an,Qi,or,Sr,kt.image.data):kt.isCompressedTexture?Ht.compressedTexSubImage2D(3553,Dt,Ze.x,Ze.y,kt.mipmaps[0].width,kt.mipmaps[0].height,or,kt.mipmaps[0].data):Ht.texSubImage2D(3553,Dt,Ze.x,Ze.y,or,Sr,kt.image),Dt===0&&$t.generateMipmaps&&Ht.generateMipmap(3553),Gn.unbindTexture()},this.copyTextureToTexture3D=function(Ze,kt,$t,Dt,an=0){if(oe.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Qi=Ze.max.x-Ze.min.x+1,or=Ze.max.y-Ze.min.y+1,Sr=Ze.max.z-Ze.min.z+1,Dr=ci.convert(Dt.format),qr=ci.convert(Dt.type);let Gr;if(Dt.isData3DTexture)ln.setTexture3D(Dt,0),Gr=32879;else if(Dt.isDataArrayTexture)ln.setTexture2DArray(Dt,0),Gr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ht.pixelStorei(37440,Dt.flipY),Ht.pixelStorei(37441,Dt.premultiplyAlpha),Ht.pixelStorei(3317,Dt.unpackAlignment);const zr=Ht.getParameter(3314),so=Ht.getParameter(32878),fl=Ht.getParameter(3316),$u=Ht.getParameter(3315),Yf=Ht.getParameter(32877),oo=$t.isCompressedTexture?$t.mipmaps[0]:$t.image;Ht.pixelStorei(3314,oo.width),Ht.pixelStorei(32878,oo.height),Ht.pixelStorei(3316,Ze.min.x),Ht.pixelStorei(3315,Ze.min.y),Ht.pixelStorei(32877,Ze.min.z),$t.isDataTexture||$t.isData3DTexture?Ht.texSubImage3D(Gr,an,kt.x,kt.y,kt.z,Qi,or,Sr,Dr,qr,oo.data):$t.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ht.compressedTexSubImage3D(Gr,an,kt.x,kt.y,kt.z,Qi,or,Sr,Dr,oo.data)):Ht.texSubImage3D(Gr,an,kt.x,kt.y,kt.z,Qi,or,Sr,Dr,qr,oo),Ht.pixelStorei(3314,zr),Ht.pixelStorei(32878,so),Ht.pixelStorei(3316,fl),Ht.pixelStorei(3315,$u),Ht.pixelStorei(32877,Yf),an===0&&Dt.generateMipmaps&&Ht.generateMipmap(Gr),Gn.unbindTexture()},this.initTexture=function(Ze){Ze.isCubeTexture?ln.setTextureCube(Ze,0):Ze.isData3DTexture?ln.setTexture3D(Ze,0):Ze.isDataArrayTexture||Ze.isCompressedArrayTexture?ln.setTexture2DArray(Ze,0):ln.setTexture2D(Ze,0),Gn.unbindTexture()},this.resetState=function(){ve=0,De=0,Ce=null,Gn.reset(),cn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Nl extends $1{}Nl.prototype.isWebGL1Renderer=!0;class xf{constructor(r,a=25e-5){this.isFogExp2=!0,this.name="",this.color=new si(r),this.density=a}clone(){return new xf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Gu{constructor(r,a=1,h=1e3){this.isFog=!0,this.name="",this.color=new si(r),this.near=a,this.far=h}clone(){return new Gu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ps extends Or{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(r,a){return super.copy(r,a),r.background!==null&&(this.background=r.background.clone()),r.environment!==null&&(this.environment=r.environment.clone()),r.fog!==null&&(this.fog=r.fog.clone()),this.backgroundBlurriness=r.backgroundBlurriness,this.backgroundIntensity=r.backgroundIntensity,r.overrideMaterial!==null&&(this.overrideMaterial=r.overrideMaterial.clone()),this.matrixAutoUpdate=r.matrixAutoUpdate,this}toJSON(r){const a=super.toJSON(r);return this.fog!==null&&(a.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(a.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(a.backgroundIntensity=this.backgroundIntensity),a}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(r){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=r}}class ls{constructor(r,a){this.isInterleavedBuffer=!0,this.array=r,this.stride=a,this.count=r!==void 0?r.length/a:0,this.usage=zc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=vr()}onUploadCallback(){}set needsUpdate(r){r===!0&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.array=new r.array.constructor(r.array),this.count=r.count,this.stride=r.stride,this.usage=r.usage,this}copyAt(r,a,h){r*=this.stride,h*=a.stride;for(let p=0,w=this.stride;p<w;p++)this.array[r+p]=a.array[h+p];return this}set(r,a=0){return this.array.set(r,a),this}clone(r){r.arrayBuffers===void 0&&(r.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vr()),r.arrayBuffers[this.array.buffer._uuid]===void 0&&(r.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const a=new this.array.constructor(r.arrayBuffers[this.array.buffer._uuid]),h=new this.constructor(a,this.stride);return h.setUsage(this.usage),h}onUpload(r){return this.onUploadCallback=r,this}toJSON(r){return r.arrayBuffers===void 0&&(r.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vr()),r.arrayBuffers[this.array.buffer._uuid]===void 0&&(r.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _o=new je;class zu{constructor(r,a,h,p=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=r,this.itemSize=a,this.offset=h,this.normalized=p===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(r){this.data.needsUpdate=r}applyMatrix4(r){for(let a=0,h=this.data.count;a<h;a++)_o.fromBufferAttribute(this,a),_o.applyMatrix4(r),this.setXYZ(a,_o.x,_o.y,_o.z);return this}applyNormalMatrix(r){for(let a=0,h=this.count;a<h;a++)_o.fromBufferAttribute(this,a),_o.applyNormalMatrix(r),this.setXYZ(a,_o.x,_o.y,_o.z);return this}transformDirection(r){for(let a=0,h=this.count;a<h;a++)_o.fromBufferAttribute(this,a),_o.transformDirection(r),this.setXYZ(a,_o.x,_o.y,_o.z);return this}setX(r,a){return this.normalized&&(a=Xr(a,this.array)),this.data.array[r*this.data.stride+this.offset]=a,this}setY(r,a){return this.normalized&&(a=Xr(a,this.array)),this.data.array[r*this.data.stride+this.offset+1]=a,this}setZ(r,a){return this.normalized&&(a=Xr(a,this.array)),this.data.array[r*this.data.stride+this.offset+2]=a,this}setW(r,a){return this.normalized&&(a=Xr(a,this.array)),this.data.array[r*this.data.stride+this.offset+3]=a,this}getX(r){let a=this.data.array[r*this.data.stride+this.offset];return this.normalized&&(a=il(a,this.array)),a}getY(r){let a=this.data.array[r*this.data.stride+this.offset+1];return this.normalized&&(a=il(a,this.array)),a}getZ(r){let a=this.data.array[r*this.data.stride+this.offset+2];return this.normalized&&(a=il(a,this.array)),a}getW(r){let a=this.data.array[r*this.data.stride+this.offset+3];return this.normalized&&(a=il(a,this.array)),a}setXY(r,a,h){return r=r*this.data.stride+this.offset,this.normalized&&(a=Xr(a,this.array),h=Xr(h,this.array)),this.data.array[r+0]=a,this.data.array[r+1]=h,this}setXYZ(r,a,h,p){return r=r*this.data.stride+this.offset,this.normalized&&(a=Xr(a,this.array),h=Xr(h,this.array),p=Xr(p,this.array)),this.data.array[r+0]=a,this.data.array[r+1]=h,this.data.array[r+2]=p,this}setXYZW(r,a,h,p,w){return r=r*this.data.stride+this.offset,this.normalized&&(a=Xr(a,this.array),h=Xr(h,this.array),p=Xr(p,this.array),w=Xr(w,this.array)),this.data.array[r+0]=a,this.data.array[r+1]=h,this.data.array[r+2]=p,this.data.array[r+3]=w,this}clone(r){if(r===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const a=[];for(let h=0;h<this.count;h++){const p=h*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)a.push(this.data.array[p+w])}return new ts(new this.array.constructor(a),this.itemSize,this.normalized)}else return r.interleavedBuffers===void 0&&(r.interleavedBuffers={}),r.interleavedBuffers[this.data.uuid]===void 0&&(r.interleavedBuffers[this.data.uuid]=this.data.clone(r)),new zu(r.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(r){if(r===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const a=[];for(let h=0;h<this.count;h++){const p=h*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)a.push(this.data.array[p+w])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}else return r.interleavedBuffers===void 0&&(r.interleavedBuffers={}),r.interleavedBuffers[this.data.uuid]===void 0&&(r.interleavedBuffers[this.data.uuid]=this.data.toJSON(r)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class oA extends yo{constructor(r){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new si(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.rotation=r.rotation,this.sizeAttenuation=r.sizeAttenuation,this.fog=r.fog,this}}let id;const Ef=new je,rd=new je,sd=new je,Hu=new un,mc=new un,ym=new oi,xm=new je,od=new je,Vu=new je,$o=new un,pu=new un,J1=new un;class Z1 extends Or{constructor(r){if(super(),this.isSprite=!0,this.type="Sprite",id===void 0){id=new pr;const a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),h=new ls(a,5);id.setIndex([0,1,2,0,2,3]),id.setAttribute("position",new zu(h,3,0,!1)),id.setAttribute("uv",new zu(h,2,3,!1))}this.geometry=id,this.material=r!==void 0?r:new oA,this.center=new un(.5,.5)}raycast(r,a){r.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rd.setFromMatrixScale(this.matrixWorld),ym.copy(r.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(r.camera.matrixWorldInverse,this.matrixWorld),sd.setFromMatrixPosition(this.modelViewMatrix),r.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&rd.multiplyScalar(-sd.z);const h=this.material.rotation;let p,w;h!==0&&(w=Math.cos(h),p=Math.sin(h));const R=this.center;Em(xm.set(-.5,-.5,0),sd,R,rd,p,w),Em(od.set(.5,-.5,0),sd,R,rd,p,w),Em(Vu.set(.5,.5,0),sd,R,rd,p,w),$o.set(0,0),pu.set(1,0),J1.set(1,1);let L=r.ray.intersectTriangle(xm,od,Vu,!1,Ef);if(L===null&&(Em(od.set(-.5,.5,0),sd,R,rd,p,w),pu.set(0,1),L=r.ray.intersectTriangle(xm,Vu,od,!1,Ef),L===null))return;const H=r.ray.origin.distanceTo(Ef);H<r.near||H>r.far||a.push({distance:H,point:Ef.clone(),uv:ys.getUV(Ef,xm,od,Vu,$o,pu,J1,new un),face:null,object:this})}copy(r,a){return super.copy(r,a),r.center!==void 0&&this.center.copy(r.center),this.material=r.material,this}}function Em(B,r,a,h,p,w){Hu.subVectors(B,a).addScalar(.5).multiply(h),p!==void 0?(mc.x=w*Hu.x-p*Hu.y,mc.y=p*Hu.x+w*Hu.y):mc.copy(Hu),B.copy(r),B.x+=mc.x,B.y+=mc.y,B.applyMatrix4(ym)}const _m=new je,ex=new je;class aA extends Or{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(r){super.copy(r,!1);const a=r.levels;for(let h=0,p=a.length;h<p;h++){const w=a[h];this.addLevel(w.object.clone(),w.distance,w.hysteresis)}return this.autoUpdate=r.autoUpdate,this}addLevel(r,a=0,h=0){a=Math.abs(a);const p=this.levels;let w;for(w=0;w<p.length&&!(a<p[w].distance);w++);return p.splice(w,0,{distance:a,hysteresis:h,object:r}),this.add(r),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(r){const a=this.levels;if(a.length>0){let h,p;for(h=1,p=a.length;h<p;h++){let w=a[h].distance;if(a[h].object.visible&&(w-=w*a[h].hysteresis),r<w)break}return a[h-1].object}return null}raycast(r,a){if(this.levels.length>0){_m.setFromMatrixPosition(this.matrixWorld);const p=r.ray.origin.distanceTo(_m);this.getObjectForDistance(p).raycast(r,a)}}update(r){const a=this.levels;if(a.length>1){_m.setFromMatrixPosition(r.matrixWorld),ex.setFromMatrixPosition(this.matrixWorld);const h=_m.distanceTo(ex)/r.zoom;a[0].object.visible=!0;let p,w;for(p=1,w=a.length;p<w;p++){let R=a[p].distance;if(a[p].object.visible&&(R-=R*a[p].hysteresis),h>=R)a[p-1].object.visible=!1,a[p].object.visible=!0;else break}for(this._currentLevel=p-1;p<w;p++)a[p].object.visible=!1}}toJSON(r){const a=super.toJSON(r);this.autoUpdate===!1&&(a.object.autoUpdate=!1),a.object.levels=[];const h=this.levels;for(let p=0,w=h.length;p<w;p++){const R=h[p];a.object.levels.push({object:R.object.uuid,distance:R.distance,hysteresis:R.hysteresis})}return a}}const Ul=new je,nr=new kr,lA=new kr,Qa=new je,cA=new oi;class tx extends as{constructor(r,a){super(r,a),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new oi,this.bindMatrixInverse=new oi}copy(r,a){return super.copy(r,a),this.bindMode=r.bindMode,this.bindMatrix.copy(r.bindMatrix),this.bindMatrixInverse.copy(r.bindMatrixInverse),this.skeleton=r.skeleton,this}bind(r,a){this.skeleton=r,a===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),a=this.matrixWorld),this.bindMatrix.copy(a),this.bindMatrixInverse.copy(a).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const r=new kr,a=this.geometry.attributes.skinWeight;for(let h=0,p=a.count;h<p;h++){r.fromBufferAttribute(a,h);const w=1/r.manhattanLength();w!==1/0?r.multiplyScalar(w):r.set(1,0,0,0),a.setXYZW(h,r.x,r.y,r.z,r.w)}}updateMatrixWorld(r){super.updateMatrixWorld(r),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(r,a){const h=this.skeleton,p=this.geometry;nr.fromBufferAttribute(p.attributes.skinIndex,r),lA.fromBufferAttribute(p.attributes.skinWeight,r),Ul.copy(a).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let w=0;w<4;w++){const R=lA.getComponent(w);if(R!==0){const L=nr.getComponent(w);cA.multiplyMatrices(h.bones[L].matrixWorld,h.boneInverses[L]),a.addScaledVector(Qa.copy(Ul).applyMatrix4(cA),R)}}return a.applyMatrix4(this.bindMatrixInverse)}}class Ur extends Or{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ad extends vs{constructor(r=null,a=1,h=1,p,w,R,L,H,j=ue,X=ue,$,Z){super(null,R,L,H,j,X,p,w,$,Z),this.isDataTexture=!0,this.image={data:r,width:a,height:h},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const uA=new oi,bm=new oi;class wm{constructor(r=[],a=[]){this.uuid=vr(),this.bones=r.slice(0),this.boneInverses=a,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const r=this.bones,a=this.boneInverses;if(this.boneMatrices=new Float32Array(r.length*16),a.length===0)this.calculateInverses();else if(r.length!==a.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let h=0,p=this.bones.length;h<p;h++)this.boneInverses.push(new oi)}}calculateInverses(){this.boneInverses.length=0;for(let r=0,a=this.bones.length;r<a;r++){const h=new oi;this.bones[r]&&h.copy(this.bones[r].matrixWorld).invert(),this.boneInverses.push(h)}}pose(){for(let r=0,a=this.bones.length;r<a;r++){const h=this.bones[r];h&&h.matrixWorld.copy(this.boneInverses[r]).invert()}for(let r=0,a=this.bones.length;r<a;r++){const h=this.bones[r];h&&(h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(h.matrixWorld)):h.matrix.copy(h.matrixWorld),h.matrix.decompose(h.position,h.quaternion,h.scale))}}update(){const r=this.bones,a=this.boneInverses,h=this.boneMatrices,p=this.boneTexture;for(let w=0,R=r.length;w<R;w++){const L=r[w]?r[w].matrixWorld:bm;uA.multiplyMatrices(L,a[w]),uA.toArray(h,w*16)}p!==null&&(p.needsUpdate=!0)}clone(){return new wm(this.bones,this.boneInverses)}computeBoneTexture(){let r=Math.sqrt(this.bones.length*4);r=Hp(r),r=Math.max(r,4);const a=new Float32Array(r*r*4);a.set(this.boneMatrices);const h=new ad(a,r,r,Li,Tn);return h.needsUpdate=!0,this.boneMatrices=a,this.boneTexture=h,this.boneTextureSize=r,this}getBoneByName(r){for(let a=0,h=this.bones.length;a<h;a++){const p=this.bones[a];if(p.name===r)return p}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(r,a){this.uuid=r.uuid;for(let h=0,p=r.bones.length;h<p;h++){const w=r.bones[h];let R=a[w];R===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",w),R=new Ur),this.bones.push(R),this.boneInverses.push(new oi().fromArray(r.boneInverses[h]))}return this.init(),this}toJSON(){const r={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};r.uuid=this.uuid;const a=this.bones,h=this.boneInverses;for(let p=0,w=a.length;p<w;p++){const R=a[p];r.bones.push(R.uuid);const L=h[p];r.boneInverses.push(L.toArray())}return r}}class ld extends ts{constructor(r,a,h,p=1){super(r,a,h),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=p}copy(r){return super.copy(r),this.meshPerAttribute=r.meshPerAttribute,this}toJSON(){const r=super.toJSON();return r.meshPerAttribute=this.meshPerAttribute,r.isInstancedBufferAttribute=!0,r}}const nx=new oi,ix=new oi,Cm=[],Gw=new oi,_f=new as;class rx extends as{constructor(r,a,h){super(r,a),this.isInstancedMesh=!0,this.instanceMatrix=new ld(new Float32Array(h*16),16),this.instanceColor=null,this.count=h,this.frustumCulled=!1;for(let p=0;p<h;p++)this.setMatrixAt(p,Gw)}copy(r,a){return super.copy(r,a),this.instanceMatrix.copy(r.instanceMatrix),r.instanceColor!==null&&(this.instanceColor=r.instanceColor.clone()),this.count=r.count,this}getColorAt(r,a){a.fromArray(this.instanceColor.array,r*3)}getMatrixAt(r,a){a.fromArray(this.instanceMatrix.array,r*16)}raycast(r,a){const h=this.matrixWorld,p=this.count;if(_f.geometry=this.geometry,_f.material=this.material,_f.material!==void 0)for(let w=0;w<p;w++){this.getMatrixAt(w,nx),ix.multiplyMatrices(h,nx),_f.matrixWorld=ix,_f.raycast(r,Cm);for(let R=0,L=Cm.length;R<L;R++){const H=Cm[R];H.instanceId=w,H.object=this,a.push(H)}Cm.length=0}}setColorAt(r,a){this.instanceColor===null&&(this.instanceColor=new ld(new Float32Array(this.instanceMatrix.count*3),3)),a.toArray(this.instanceColor.array,r*3)}setMatrixAt(r,a){a.toArray(this.instanceMatrix.array,r*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ko extends yo{constructor(r){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new si(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this.fog=r.fog,this}}const sx=new je,ox=new je,ax=new oi,hA=new ks,cd=new Wo;class mu extends Or{constructor(r=new pr,a=new ko){super(),this.isLine=!0,this.type="Line",this.geometry=r,this.material=a,this.updateMorphTargets()}copy(r,a){return super.copy(r,a),this.material=r.material,this.geometry=r.geometry,this}computeLineDistances(){const r=this.geometry;if(r.index===null){const a=r.attributes.position,h=[0];for(let p=1,w=a.count;p<w;p++)sx.fromBufferAttribute(a,p-1),ox.fromBufferAttribute(a,p),h[p]=h[p-1],h[p]+=sx.distanceTo(ox);r.setAttribute("lineDistance",new yi(h,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(r,a){const h=this.geometry,p=this.matrixWorld,w=r.params.Line.threshold,R=h.drawRange;if(h.boundingSphere===null&&h.computeBoundingSphere(),cd.copy(h.boundingSphere),cd.applyMatrix4(p),cd.radius+=w,r.ray.intersectsSphere(cd)===!1)return;ax.copy(p).invert(),hA.copy(r.ray).applyMatrix4(ax);const L=w/((this.scale.x+this.scale.y+this.scale.z)/3),H=L*L,j=new je,X=new je,$=new je,Z=new je,te=this.isLineSegments?2:1,le=h.index,se=h.attributes.position;if(le!==null){const ve=Math.max(0,R.start),De=Math.min(le.count,R.start+R.count);for(let Ce=ve,Le=De-1;Ce<Le;Ce+=te){const ze=le.getX(Ce),tt=le.getX(Ce+1);if(j.fromBufferAttribute(se,ze),X.fromBufferAttribute(se,tt),hA.distanceSqToSegment(j,X,Z,$)>H)continue;Z.applyMatrix4(this.matrixWorld);const Oe=r.ray.origin.distanceTo(Z);Oe<r.near||Oe>r.far||a.push({distance:Oe,point:$.clone().applyMatrix4(this.matrixWorld),index:Ce,face:null,faceIndex:null,object:this})}}else{const ve=Math.max(0,R.start),De=Math.min(se.count,R.start+R.count);for(let Ce=ve,Le=De-1;Ce<Le;Ce+=te){if(j.fromBufferAttribute(se,Ce),X.fromBufferAttribute(se,Ce+1),hA.distanceSqToSegment(j,X,Z,$)>H)continue;Z.applyMatrix4(this.matrixWorld);const tt=r.ray.origin.distanceTo(Z);tt<r.near||tt>r.far||a.push({distance:tt,point:$.clone().applyMatrix4(this.matrixWorld),index:Ce,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const a=this.geometry.morphAttributes,h=Object.keys(a);if(h.length>0){const p=a[h[0]];if(p!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,R=p.length;w<R;w++){const L=p[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=w}}}}}const Mm=new je,lx=new je;class Gl extends mu{constructor(r,a){super(r,a),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const r=this.geometry;if(r.index===null){const a=r.attributes.position,h=[];for(let p=0,w=a.count;p<w;p+=2)Mm.fromBufferAttribute(a,p),lx.fromBufferAttribute(a,p+1),h[p]=p===0?0:h[p-1],h[p+1]=h[p]+Mm.distanceTo(lx);r.setAttribute("lineDistance",new yi(h,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class cx extends mu{constructor(r,a){super(r,a),this.isLineLoop=!0,this.type="LineLoop"}}class js extends yo{constructor(r){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new si(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this.fog=r.fog,this}}const No=new oi,dA=new ks,Sm=new Wo,Tm=new je;class fA extends Or{constructor(r=new pr,a=new js){super(),this.isPoints=!0,this.type="Points",this.geometry=r,this.material=a,this.updateMorphTargets()}copy(r,a){return super.copy(r,a),this.material=r.material,this.geometry=r.geometry,this}raycast(r,a){const h=this.geometry,p=this.matrixWorld,w=r.params.Points.threshold,R=h.drawRange;if(h.boundingSphere===null&&h.computeBoundingSphere(),Sm.copy(h.boundingSphere),Sm.applyMatrix4(p),Sm.radius+=w,r.ray.intersectsSphere(Sm)===!1)return;No.copy(p).invert(),dA.copy(r.ray).applyMatrix4(No);const L=w/((this.scale.x+this.scale.y+this.scale.z)/3),H=L*L,j=h.index,$=h.attributes.position;if(j!==null){const Z=Math.max(0,R.start),te=Math.min(j.count,R.start+R.count);for(let le=Z,oe=te;le<oe;le++){const se=j.getX(le);Tm.fromBufferAttribute($,se),ux(Tm,se,H,p,r,a,this)}}else{const Z=Math.max(0,R.start),te=Math.min($.count,R.start+R.count);for(let le=Z,oe=te;le<oe;le++)Tm.fromBufferAttribute($,le),ux(Tm,le,H,p,r,a,this)}}updateMorphTargets(){const a=this.geometry.morphAttributes,h=Object.keys(a);if(h.length>0){const p=a[h[0]];if(p!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,R=p.length;w<R;w++){const L=p[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=w}}}}}function ux(B,r,a,h,p,w,R){const L=dA.distanceSqToPoint(B);if(L<a){const H=new je;dA.closestPointToPoint(B,H),H.applyMatrix4(h);const j=p.ray.origin.distanceTo(H);if(j<p.near||j>p.far)return;w.push({distance:j,distanceToRay:Math.sqrt(L),point:H,index:r,face:null,object:R})}}class zw extends vs{constructor(r,a,h,p,w,R,L,H,j){super(r,a,h,p,w,R,L,H,j),this.isVideoTexture=!0,this.minFilter=R!==void 0?R:qe,this.magFilter=w!==void 0?w:qe,this.generateMipmaps=!1;const X=this;function $(){X.needsUpdate=!0,r.requestVideoFrameCallback($)}"requestVideoFrameCallback"in r&&r.requestVideoFrameCallback($)}clone(){return new this.constructor(this.image).copy(this)}update(){const r=this.image;"requestVideoFrameCallback"in r===!1&&r.readyState>=r.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Hw extends vs{constructor(r,a,h){super({width:r,height:a}),this.isFramebufferTexture=!0,this.format=h,this.magFilter=ue,this.minFilter=ue,this.generateMipmaps=!1,this.needsUpdate=!0}}class Im extends vs{constructor(r,a,h,p,w,R,L,H,j,X,$,Z){super(null,R,L,H,j,X,p,w,$,Z),this.isCompressedTexture=!0,this.image={width:a,height:h},this.mipmaps=r,this.flipY=!1,this.generateMipmaps=!1}}class Vw extends Im{constructor(r,a,h,p,w,R){super(r,a,h,w,R),this.isCompressedArrayTexture=!0,this.image.depth=p,this.wrapR=Xe}}class jw extends vs{constructor(r,a,h,p,w,R,L,H,j){super(r,a,h,p,w,R,L,H,j),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ul{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(r,a){const h=this.getUtoTmapping(r);return this.getPoint(h,a)}getPoints(r=5){const a=[];for(let h=0;h<=r;h++)a.push(this.getPoint(h/r));return a}getSpacedPoints(r=5){const a=[];for(let h=0;h<=r;h++)a.push(this.getPointAt(h/r));return a}getLength(){const r=this.getLengths();return r[r.length-1]}getLengths(r=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const a=[];let h,p=this.getPoint(0),w=0;a.push(0);for(let R=1;R<=r;R++)h=this.getPoint(R/r),w+=h.distanceTo(p),a.push(w),p=h;return this.cacheArcLengths=a,a}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(r,a){const h=this.getLengths();let p=0;const w=h.length;let R;a?R=a:R=r*h[w-1];let L=0,H=w-1,j;for(;L<=H;)if(p=Math.floor(L+(H-L)/2),j=h[p]-R,j<0)L=p+1;else if(j>0)H=p-1;else{H=p;break}if(p=H,h[p]===R)return p/(w-1);const X=h[p],Z=h[p+1]-X,te=(R-X)/Z;return(p+te)/(w-1)}getTangent(r,a){let p=r-1e-4,w=r+1e-4;p<0&&(p=0),w>1&&(w=1);const R=this.getPoint(p),L=this.getPoint(w),H=a||(R.isVector2?new un:new je);return H.copy(L).sub(R).normalize(),H}getTangentAt(r,a){const h=this.getUtoTmapping(r);return this.getTangent(h,a)}computeFrenetFrames(r,a){const h=new je,p=[],w=[],R=[],L=new je,H=new oi;for(let te=0;te<=r;te++){const le=te/r;p[te]=this.getTangentAt(le,new je)}w[0]=new je,R[0]=new je;let j=Number.MAX_VALUE;const X=Math.abs(p[0].x),$=Math.abs(p[0].y),Z=Math.abs(p[0].z);X<=j&&(j=X,h.set(1,0,0)),$<=j&&(j=$,h.set(0,1,0)),Z<=j&&h.set(0,0,1),L.crossVectors(p[0],h).normalize(),w[0].crossVectors(p[0],L),R[0].crossVectors(p[0],w[0]);for(let te=1;te<=r;te++){if(w[te]=w[te-1].clone(),R[te]=R[te-1].clone(),L.crossVectors(p[te-1],p[te]),L.length()>Number.EPSILON){L.normalize();const le=Math.acos(Kr(p[te-1].dot(p[te]),-1,1));w[te].applyMatrix4(H.makeRotationAxis(L,le))}R[te].crossVectors(p[te],w[te])}if(a===!0){let te=Math.acos(Kr(w[0].dot(w[r]),-1,1));te/=r,p[0].dot(L.crossVectors(w[0],w[r]))>0&&(te=-te);for(let le=1;le<=r;le++)w[le].applyMatrix4(H.makeRotationAxis(p[le],te*le)),R[le].crossVectors(p[le],w[le])}return{tangents:p,normals:w,binormals:R}}clone(){return new this.constructor().copy(this)}copy(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}toJSON(){const r={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return r.arcLengthDivisions=this.arcLengthDivisions,r.type=this.type,r}fromJSON(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}}class bf extends ul{constructor(r=0,a=0,h=1,p=1,w=0,R=Math.PI*2,L=!1,H=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=r,this.aY=a,this.xRadius=h,this.yRadius=p,this.aStartAngle=w,this.aEndAngle=R,this.aClockwise=L,this.aRotation=H}getPoint(r,a){const h=a||new un,p=Math.PI*2;let w=this.aEndAngle-this.aStartAngle;const R=Math.abs(w)<Number.EPSILON;for(;w<0;)w+=p;for(;w>p;)w-=p;w<Number.EPSILON&&(R?w=0:w=p),this.aClockwise===!0&&!R&&(w===p?w=-p:w=w-p);const L=this.aStartAngle+r*w;let H=this.aX+this.xRadius*Math.cos(L),j=this.aY+this.yRadius*Math.sin(L);if(this.aRotation!==0){const X=Math.cos(this.aRotation),$=Math.sin(this.aRotation),Z=H-this.aX,te=j-this.aY;H=Z*X-te*$+this.aX,j=Z*$+te*X+this.aY}return h.set(H,j)}copy(r){return super.copy(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}toJSON(){const r=super.toJSON();return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r}fromJSON(r){return super.fromJSON(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}}class pA extends bf{constructor(r,a,h,p,w,R){super(r,a,h,h,p,w,R),this.isArcCurve=!0,this.type="ArcCurve"}}function mA(){let B=0,r=0,a=0,h=0;function p(w,R,L,H){B=w,r=L,a=-3*w+3*R-2*L-H,h=2*w-2*R+L+H}return{initCatmullRom:function(w,R,L,H,j){p(R,L,j*(L-w),j*(H-R))},initNonuniformCatmullRom:function(w,R,L,H,j,X,$){let Z=(R-w)/j-(L-w)/(j+X)+(L-R)/X,te=(L-R)/X-(H-R)/(X+$)+(H-L)/$;Z*=X,te*=X,p(R,L,Z,te)},calc:function(w){const R=w*w,L=R*w;return B+r*w+a*R+h*L}}}const Rm=new je,gA=new mA,AA=new mA,gu=new mA;class hx extends ul{constructor(r=[],a=!1,h="centripetal",p=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=r,this.closed=a,this.curveType=h,this.tension=p}getPoint(r,a=new je){const h=a,p=this.points,w=p.length,R=(w-(this.closed?0:1))*r;let L=Math.floor(R),H=R-L;this.closed?L+=L>0?0:(Math.floor(Math.abs(L)/w)+1)*w:H===0&&L===w-1&&(L=w-2,H=1);let j,X;this.closed||L>0?j=p[(L-1)%w]:(Rm.subVectors(p[0],p[1]).add(p[0]),j=Rm);const $=p[L%w],Z=p[(L+1)%w];if(this.closed||L+2<w?X=p[(L+2)%w]:(Rm.subVectors(p[w-1],p[w-2]).add(p[w-1]),X=Rm),this.curveType==="centripetal"||this.curveType==="chordal"){const te=this.curveType==="chordal"?.5:.25;let le=Math.pow(j.distanceToSquared($),te),oe=Math.pow($.distanceToSquared(Z),te),se=Math.pow(Z.distanceToSquared(X),te);oe<1e-4&&(oe=1),le<1e-4&&(le=oe),se<1e-4&&(se=oe),gA.initNonuniformCatmullRom(j.x,$.x,Z.x,X.x,le,oe,se),AA.initNonuniformCatmullRom(j.y,$.y,Z.y,X.y,le,oe,se),gu.initNonuniformCatmullRom(j.z,$.z,Z.z,X.z,le,oe,se)}else this.curveType==="catmullrom"&&(gA.initCatmullRom(j.x,$.x,Z.x,X.x,this.tension),AA.initCatmullRom(j.y,$.y,Z.y,X.y,this.tension),gu.initCatmullRom(j.z,$.z,Z.z,X.z,this.tension));return h.set(gA.calc(H),AA.calc(H),gu.calc(H)),h}copy(r){super.copy(r),this.points=[];for(let a=0,h=r.points.length;a<h;a++){const p=r.points[a];this.points.push(p.clone())}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}toJSON(){const r=super.toJSON();r.points=[];for(let a=0,h=this.points.length;a<h;a++){const p=this.points[a];r.points.push(p.toArray())}return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r}fromJSON(r){super.fromJSON(r),this.points=[];for(let a=0,h=r.points.length;a<h;a++){const p=r.points[a];this.points.push(new je().fromArray(p))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}}function dx(B,r,a,h,p){const w=(h-r)*.5,R=(p-a)*.5,L=B*B,H=B*L;return(2*a-2*h+w+R)*H+(-3*a+3*h-2*w-R)*L+w*B+a}function Qw(B,r){const a=1-B;return a*a*r}function Ww(B,r){return 2*(1-B)*B*r}function Kw(B,r){return B*B*r}function ud(B,r,a,h){return Qw(B,r)+Ww(B,a)+Kw(B,h)}function fx(B,r){const a=1-B;return a*a*a*r}function Xw(B,r){const a=1-B;return 3*a*a*B*r}function Yw(B,r){return 3*(1-B)*B*B*r}function qw(B,r){return B*B*B*r}function wf(B,r,a,h,p){return fx(B,r)+Xw(B,a)+Yw(B,h)+qw(B,p)}class vA extends ul{constructor(r=new un,a=new un,h=new un,p=new un){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=r,this.v1=a,this.v2=h,this.v3=p}getPoint(r,a=new un){const h=a,p=this.v0,w=this.v1,R=this.v2,L=this.v3;return h.set(wf(r,p.x,w.x,R.x,L.x),wf(r,p.y,w.y,R.y,L.y)),h}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}}class px extends ul{constructor(r=new je,a=new je,h=new je,p=new je){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=r,this.v1=a,this.v2=h,this.v3=p}getPoint(r,a=new je){const h=a,p=this.v0,w=this.v1,R=this.v2,L=this.v3;return h.set(wf(r,p.x,w.x,R.x,L.x),wf(r,p.y,w.y,R.y,L.y),wf(r,p.z,w.z,R.z,L.z)),h}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}}class Lm extends ul{constructor(r=new un,a=new un){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=r,this.v2=a}getPoint(r,a=new un){const h=a;return r===1?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(r).add(this.v1)),h}getPointAt(r,a){return this.getPoint(r,a)}getTangent(r,a){const h=a||new un;return h.copy(this.v2).sub(this.v1).normalize(),h}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}class mx extends ul{constructor(r=new je,a=new je){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=r,this.v2=a}getPoint(r,a=new je){const h=a;return r===1?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(r).add(this.v1)),h}getPointAt(r,a){return this.getPoint(r,a)}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}class yA extends ul{constructor(r=new un,a=new un,h=new un){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=r,this.v1=a,this.v2=h}getPoint(r,a=new un){const h=a,p=this.v0,w=this.v1,R=this.v2;return h.set(ud(r,p.x,w.x,R.x),ud(r,p.y,w.y,R.y)),h}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}class xA extends ul{constructor(r=new je,a=new je,h=new je){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=r,this.v1=a,this.v2=h}getPoint(r,a=new je){const h=a,p=this.v0,w=this.v1,R=this.v2;return h.set(ud(r,p.x,w.x,R.x),ud(r,p.y,w.y,R.y),ud(r,p.z,w.z,R.z)),h}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}class EA extends ul{constructor(r=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=r}getPoint(r,a=new un){const h=a,p=this.points,w=(p.length-1)*r,R=Math.floor(w),L=w-R,H=p[R===0?R:R-1],j=p[R],X=p[R>p.length-2?p.length-1:R+1],$=p[R>p.length-3?p.length-1:R+2];return h.set(dx(L,H.x,j.x,X.x,$.x),dx(L,H.y,j.y,X.y,$.y)),h}copy(r){super.copy(r),this.points=[];for(let a=0,h=r.points.length;a<h;a++){const p=r.points[a];this.points.push(p.clone())}return this}toJSON(){const r=super.toJSON();r.points=[];for(let a=0,h=this.points.length;a<h;a++){const p=this.points[a];r.points.push(p.toArray())}return r}fromJSON(r){super.fromJSON(r),this.points=[];for(let a=0,h=r.points.length;a<h;a++){const p=r.points[a];this.points.push(new un().fromArray(p))}return this}}var _A=Object.freeze({__proto__:null,ArcCurve:pA,CatmullRomCurve3:hx,CubicBezierCurve:vA,CubicBezierCurve3:px,EllipseCurve:bf,LineCurve:Lm,LineCurve3:mx,QuadraticBezierCurve:yA,QuadraticBezierCurve3:xA,SplineCurve:EA});class gx extends ul{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(r){this.curves.push(r)}closePath(){const r=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);r.equals(a)||this.curves.push(new Lm(a,r))}getPoint(r,a){const h=r*this.getLength(),p=this.getCurveLengths();let w=0;for(;w<p.length;){if(p[w]>=h){const R=p[w]-h,L=this.curves[w],H=L.getLength(),j=H===0?0:1-R/H;return L.getPointAt(j,a)}w++}return null}getLength(){const r=this.getCurveLengths();return r[r.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const r=[];let a=0;for(let h=0,p=this.curves.length;h<p;h++)a+=this.curves[h].getLength(),r.push(a);return this.cacheLengths=r,r}getSpacedPoints(r=40){const a=[];for(let h=0;h<=r;h++)a.push(this.getPoint(h/r));return this.autoClose&&a.push(a[0]),a}getPoints(r=12){const a=[];let h;for(let p=0,w=this.curves;p<w.length;p++){const R=w[p],L=R.isEllipseCurve?r*2:R.isLineCurve||R.isLineCurve3?1:R.isSplineCurve?r*R.points.length:r,H=R.getPoints(L);for(let j=0;j<H.length;j++){const X=H[j];h&&h.equals(X)||(a.push(X),h=X)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a}copy(r){super.copy(r),this.curves=[];for(let a=0,h=r.curves.length;a<h;a++){const p=r.curves[a];this.curves.push(p.clone())}return this.autoClose=r.autoClose,this}toJSON(){const r=super.toJSON();r.autoClose=this.autoClose,r.curves=[];for(let a=0,h=this.curves.length;a<h;a++){const p=this.curves[a];r.curves.push(p.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.autoClose=r.autoClose,this.curves=[];for(let a=0,h=r.curves.length;a<h;a++){const p=r.curves[a];this.curves.push(new _A[p.type]().fromJSON(p))}return this}}class Cf extends gx{constructor(r){super(),this.type="Path",this.currentPoint=new un,r&&this.setFromPoints(r)}setFromPoints(r){this.moveTo(r[0].x,r[0].y);for(let a=1,h=r.length;a<h;a++)this.lineTo(r[a].x,r[a].y);return this}moveTo(r,a){return this.currentPoint.set(r,a),this}lineTo(r,a){const h=new Lm(this.currentPoint.clone(),new un(r,a));return this.curves.push(h),this.currentPoint.set(r,a),this}quadraticCurveTo(r,a,h,p){const w=new yA(this.currentPoint.clone(),new un(r,a),new un(h,p));return this.curves.push(w),this.currentPoint.set(h,p),this}bezierCurveTo(r,a,h,p,w,R){const L=new vA(this.currentPoint.clone(),new un(r,a),new un(h,p),new un(w,R));return this.curves.push(L),this.currentPoint.set(w,R),this}splineThru(r){const a=[this.currentPoint.clone()].concat(r),h=new EA(a);return this.curves.push(h),this.currentPoint.copy(r[r.length-1]),this}arc(r,a,h,p,w,R){const L=this.currentPoint.x,H=this.currentPoint.y;return this.absarc(r+L,a+H,h,p,w,R),this}absarc(r,a,h,p,w,R){return this.absellipse(r,a,h,h,p,w,R),this}ellipse(r,a,h,p,w,R,L,H){const j=this.currentPoint.x,X=this.currentPoint.y;return this.absellipse(r+j,a+X,h,p,w,R,L,H),this}absellipse(r,a,h,p,w,R,L,H){const j=new bf(r,a,h,p,w,R,L,H);if(this.curves.length>0){const $=j.getPoint(0);$.equals(this.currentPoint)||this.lineTo($.x,$.y)}this.curves.push(j);const X=j.getPoint(1);return this.currentPoint.copy(X),this}copy(r){return super.copy(r),this.currentPoint.copy(r.currentPoint),this}toJSON(){const r=super.toJSON();return r.currentPoint=this.currentPoint.toArray(),r}fromJSON(r){return super.fromJSON(r),this.currentPoint.fromArray(r.currentPoint),this}}class hd extends pr{constructor(r=[new un(0,-.5),new un(.5,0),new un(0,.5)],a=12,h=0,p=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:r,segments:a,phiStart:h,phiLength:p},a=Math.floor(a),p=Kr(p,0,Math.PI*2);const w=[],R=[],L=[],H=[],j=[],X=1/a,$=new je,Z=new un,te=new je,le=new je,oe=new je;let se=0,ve=0;for(let De=0;De<=r.length-1;De++)switch(De){case 0:se=r[De+1].x-r[De].x,ve=r[De+1].y-r[De].y,te.x=ve*1,te.y=-se,te.z=ve*0,oe.copy(te),te.normalize(),H.push(te.x,te.y,te.z);break;case r.length-1:H.push(oe.x,oe.y,oe.z);break;default:se=r[De+1].x-r[De].x,ve=r[De+1].y-r[De].y,te.x=ve*1,te.y=-se,te.z=ve*0,le.copy(te),te.x+=oe.x,te.y+=oe.y,te.z+=oe.z,te.normalize(),H.push(te.x,te.y,te.z),oe.copy(le)}for(let De=0;De<=a;De++){const Ce=h+De*X*p,Le=Math.sin(Ce),ze=Math.cos(Ce);for(let tt=0;tt<=r.length-1;tt++){$.x=r[tt].x*Le,$.y=r[tt].y,$.z=r[tt].x*ze,R.push($.x,$.y,$.z),Z.x=De/a,Z.y=tt/(r.length-1),L.push(Z.x,Z.y);const ft=H[3*tt+0]*Le,Oe=H[3*tt+1],ot=H[3*tt+0]*ze;j.push(ft,Oe,ot)}}for(let De=0;De<a;De++)for(let Ce=0;Ce<r.length-1;Ce++){const Le=Ce+De*r.length,ze=Le,tt=Le+r.length,ft=Le+r.length+1,Oe=Le+1;w.push(ze,tt,Oe),w.push(ft,Oe,tt)}this.setIndex(w),this.setAttribute("position",new yi(R,3)),this.setAttribute("uv",new yi(L,2)),this.setAttribute("normal",new yi(j,3))}static fromJSON(r){return new hd(r.points,r.segments,r.phiStart,r.phiLength)}}class Mf extends hd{constructor(r=1,a=1,h=4,p=8){const w=new Cf;w.absarc(0,-a/2,r,Math.PI*1.5,0),w.absarc(0,a/2,r,0,Math.PI*.5),super(w.getPoints(h),p),this.type="CapsuleGeometry",this.parameters={radius:r,height:a,capSegments:h,radialSegments:p}}static fromJSON(r){return new Mf(r.radius,r.length,r.capSegments,r.radialSegments)}}class Sf extends pr{constructor(r=1,a=8,h=0,p=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:r,segments:a,thetaStart:h,thetaLength:p},a=Math.max(3,a);const w=[],R=[],L=[],H=[],j=new je,X=new un;R.push(0,0,0),L.push(0,0,1),H.push(.5,.5);for(let $=0,Z=3;$<=a;$++,Z+=3){const te=h+$/a*p;j.x=r*Math.cos(te),j.y=r*Math.sin(te),R.push(j.x,j.y,j.z),L.push(0,0,1),X.x=(R[Z]/r+1)/2,X.y=(R[Z+1]/r+1)/2,H.push(X.x,X.y)}for(let $=1;$<=a;$++)w.push($,$+1,0);this.setIndex(w),this.setAttribute("position",new yi(R,3)),this.setAttribute("normal",new yi(L,3)),this.setAttribute("uv",new yi(H,2))}static fromJSON(r){return new Sf(r.radius,r.segments,r.thetaStart,r.thetaLength)}}class ju extends pr{constructor(r=1,a=1,h=1,p=8,w=1,R=!1,L=0,H=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:r,radiusBottom:a,height:h,radialSegments:p,heightSegments:w,openEnded:R,thetaStart:L,thetaLength:H};const j=this;p=Math.floor(p),w=Math.floor(w);const X=[],$=[],Z=[],te=[];let le=0;const oe=[],se=h/2;let ve=0;De(),R===!1&&(r>0&&Ce(!0),a>0&&Ce(!1)),this.setIndex(X),this.setAttribute("position",new yi($,3)),this.setAttribute("normal",new yi(Z,3)),this.setAttribute("uv",new yi(te,2));function De(){const Le=new je,ze=new je;let tt=0;const ft=(a-r)/h;for(let Oe=0;Oe<=w;Oe++){const ot=[],ut=Oe/w,Tt=ut*(a-r)+r;for(let jt=0;jt<=p;jt++){const Lt=jt/p,bt=Lt*H+L,Ut=Math.sin(bt),fn=Math.cos(bt);ze.x=Tt*Ut,ze.y=-ut*h+se,ze.z=Tt*fn,$.push(ze.x,ze.y,ze.z),Le.set(Ut,ft,fn).normalize(),Z.push(Le.x,Le.y,Le.z),te.push(Lt,1-ut),ot.push(le++)}oe.push(ot)}for(let Oe=0;Oe<p;Oe++)for(let ot=0;ot<w;ot++){const ut=oe[ot][Oe],Tt=oe[ot+1][Oe],jt=oe[ot+1][Oe+1],Lt=oe[ot][Oe+1];X.push(ut,Tt,Lt),X.push(Tt,jt,Lt),tt+=6}j.addGroup(ve,tt,0),ve+=tt}function Ce(Le){const ze=le,tt=new un,ft=new je;let Oe=0;const ot=Le===!0?r:a,ut=Le===!0?1:-1;for(let jt=1;jt<=p;jt++)$.push(0,se*ut,0),Z.push(0,ut,0),te.push(.5,.5),le++;const Tt=le;for(let jt=0;jt<=p;jt++){const bt=jt/p*H+L,Ut=Math.cos(bt),fn=Math.sin(bt);ft.x=ot*fn,ft.y=se*ut,ft.z=ot*Ut,$.push(ft.x,ft.y,ft.z),Z.push(0,ut,0),tt.x=Ut*.5+.5,tt.y=fn*.5*ut+.5,te.push(tt.x,tt.y),le++}for(let jt=0;jt<p;jt++){const Lt=ze+jt,bt=Tt+jt;Le===!0?X.push(bt,bt+1,Lt):X.push(bt+1,bt,Lt),Oe+=3}j.addGroup(ve,Oe,Le===!0?1:2),ve+=Oe}}static fromJSON(r){return new ju(r.radiusTop,r.radiusBottom,r.height,r.radialSegments,r.heightSegments,r.openEnded,r.thetaStart,r.thetaLength)}}class Tf extends ju{constructor(r=1,a=1,h=8,p=1,w=!1,R=0,L=Math.PI*2){super(0,r,a,h,p,w,R,L),this.type="ConeGeometry",this.parameters={radius:r,height:a,radialSegments:h,heightSegments:p,openEnded:w,thetaStart:R,thetaLength:L}}static fromJSON(r){return new Tf(r.radius,r.height,r.radialSegments,r.heightSegments,r.openEnded,r.thetaStart,r.thetaLength)}}class gc extends pr{constructor(r=[],a=[],h=1,p=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:r,indices:a,radius:h,detail:p};const w=[],R=[];L(p),j(h),X(),this.setAttribute("position",new yi(w,3)),this.setAttribute("normal",new yi(w.slice(),3)),this.setAttribute("uv",new yi(R,2)),p===0?this.computeVertexNormals():this.normalizeNormals();function L(De){const Ce=new je,Le=new je,ze=new je;for(let tt=0;tt<a.length;tt+=3)te(a[tt+0],Ce),te(a[tt+1],Le),te(a[tt+2],ze),H(Ce,Le,ze,De)}function H(De,Ce,Le,ze){const tt=ze+1,ft=[];for(let Oe=0;Oe<=tt;Oe++){ft[Oe]=[];const ot=De.clone().lerp(Le,Oe/tt),ut=Ce.clone().lerp(Le,Oe/tt),Tt=tt-Oe;for(let jt=0;jt<=Tt;jt++)jt===0&&Oe===tt?ft[Oe][jt]=ot:ft[Oe][jt]=ot.clone().lerp(ut,jt/Tt)}for(let Oe=0;Oe<tt;Oe++)for(let ot=0;ot<2*(tt-Oe)-1;ot++){const ut=Math.floor(ot/2);ot%2===0?(Z(ft[Oe][ut+1]),Z(ft[Oe+1][ut]),Z(ft[Oe][ut])):(Z(ft[Oe][ut+1]),Z(ft[Oe+1][ut+1]),Z(ft[Oe+1][ut]))}}function j(De){const Ce=new je;for(let Le=0;Le<w.length;Le+=3)Ce.x=w[Le+0],Ce.y=w[Le+1],Ce.z=w[Le+2],Ce.normalize().multiplyScalar(De),w[Le+0]=Ce.x,w[Le+1]=Ce.y,w[Le+2]=Ce.z}function X(){const De=new je;for(let Ce=0;Ce<w.length;Ce+=3){De.x=w[Ce+0],De.y=w[Ce+1],De.z=w[Ce+2];const Le=se(De)/2/Math.PI+.5,ze=ve(De)/Math.PI+.5;R.push(Le,1-ze)}le(),$()}function $(){for(let De=0;De<R.length;De+=6){const Ce=R[De+0],Le=R[De+2],ze=R[De+4],tt=Math.max(Ce,Le,ze),ft=Math.min(Ce,Le,ze);tt>.9&&ft<.1&&(Ce<.2&&(R[De+0]+=1),Le<.2&&(R[De+2]+=1),ze<.2&&(R[De+4]+=1))}}function Z(De){w.push(De.x,De.y,De.z)}function te(De,Ce){const Le=De*3;Ce.x=r[Le+0],Ce.y=r[Le+1],Ce.z=r[Le+2]}function le(){const De=new je,Ce=new je,Le=new je,ze=new je,tt=new un,ft=new un,Oe=new un;for(let ot=0,ut=0;ot<w.length;ot+=9,ut+=6){De.set(w[ot+0],w[ot+1],w[ot+2]),Ce.set(w[ot+3],w[ot+4],w[ot+5]),Le.set(w[ot+6],w[ot+7],w[ot+8]),tt.set(R[ut+0],R[ut+1]),ft.set(R[ut+2],R[ut+3]),Oe.set(R[ut+4],R[ut+5]),ze.copy(De).add(Ce).add(Le).divideScalar(3);const Tt=se(ze);oe(tt,ut+0,De,Tt),oe(ft,ut+2,Ce,Tt),oe(Oe,ut+4,Le,Tt)}}function oe(De,Ce,Le,ze){ze<0&&De.x===1&&(R[Ce]=De.x-1),Le.x===0&&Le.z===0&&(R[Ce]=ze/2/Math.PI+.5)}function se(De){return Math.atan2(De.z,-De.x)}function ve(De){return Math.atan2(-De.y,Math.sqrt(De.x*De.x+De.z*De.z))}}static fromJSON(r){return new gc(r.vertices,r.indices,r.radius,r.details)}}class If extends gc{constructor(r=1,a=0){const h=(1+Math.sqrt(5))/2,p=1/h,w=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-p,-h,0,-p,h,0,p,-h,0,p,h,-p,-h,0,-p,h,0,p,-h,0,p,h,0,-h,0,-p,h,0,-p,-h,0,p,h,0,p],R=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(w,R,r,a),this.type="DodecahedronGeometry",this.parameters={radius:r,detail:a}}static fromJSON(r){return new If(r.radius,r.detail)}}const Bm=new je,Dm=new je,bA=new je,Pm=new ys;class Om extends pr{constructor(r=null,a=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:r,thresholdAngle:a},r!==null){const p=Math.pow(10,4),w=Math.cos(Fa*a),R=r.getIndex(),L=r.getAttribute("position"),H=R?R.count:L.count,j=[0,0,0],X=["a","b","c"],$=new Array(3),Z={},te=[];for(let le=0;le<H;le+=3){R?(j[0]=R.getX(le),j[1]=R.getX(le+1),j[2]=R.getX(le+2)):(j[0]=le,j[1]=le+1,j[2]=le+2);const{a:oe,b:se,c:ve}=Pm;if(oe.fromBufferAttribute(L,j[0]),se.fromBufferAttribute(L,j[1]),ve.fromBufferAttribute(L,j[2]),Pm.getNormal(bA),$[0]=`${Math.round(oe.x*p)},${Math.round(oe.y*p)},${Math.round(oe.z*p)}`,$[1]=`${Math.round(se.x*p)},${Math.round(se.y*p)},${Math.round(se.z*p)}`,$[2]=`${Math.round(ve.x*p)},${Math.round(ve.y*p)},${Math.round(ve.z*p)}`,!($[0]===$[1]||$[1]===$[2]||$[2]===$[0]))for(let De=0;De<3;De++){const Ce=(De+1)%3,Le=$[De],ze=$[Ce],tt=Pm[X[De]],ft=Pm[X[Ce]],Oe=`${Le}_${ze}`,ot=`${ze}_${Le}`;ot in Z&&Z[ot]?(bA.dot(Z[ot].normal)<=w&&(te.push(tt.x,tt.y,tt.z),te.push(ft.x,ft.y,ft.z)),Z[ot]=null):Oe in Z||(Z[Oe]={index0:j[De],index1:j[Ce],normal:bA.clone()})}}for(const le in Z)if(Z[le]){const{index0:oe,index1:se}=Z[le];Bm.fromBufferAttribute(L,oe),Dm.fromBufferAttribute(L,se),te.push(Bm.x,Bm.y,Bm.z),te.push(Dm.x,Dm.y,Dm.z)}this.setAttribute("position",new yi(te,3))}}}class Au extends Cf{constructor(r){super(r),this.uuid=vr(),this.type="Shape",this.holes=[]}getPointsHoles(r){const a=[];for(let h=0,p=this.holes.length;h<p;h++)a[h]=this.holes[h].getPoints(r);return a}extractPoints(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}}copy(r){super.copy(r),this.holes=[];for(let a=0,h=r.holes.length;a<h;a++){const p=r.holes[a];this.holes.push(p.clone())}return this}toJSON(){const r=super.toJSON();r.uuid=this.uuid,r.holes=[];for(let a=0,h=this.holes.length;a<h;a++){const p=this.holes[a];r.holes.push(p.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.uuid=r.uuid,this.holes=[];for(let a=0,h=r.holes.length;a<h;a++){const p=r.holes[a];this.holes.push(new Cf().fromJSON(p))}return this}}const Ax={triangulate:function(B,r,a=2){const h=r&&r.length,p=h?r[0]*a:B.length;let w=vx(B,0,p,a,!0);const R=[];if(!w||w.next===w.prev)return R;let L,H,j,X,$,Z,te;if(h&&(w=Jo(B,r,w,a)),B.length>80*a){L=j=B[0],H=X=B[1];for(let le=a;le<p;le+=a)$=B[le],Z=B[le+1],$<L&&(L=$),Z<H&&(H=Z),$>j&&(j=$),Z>X&&(X=Z);te=Math.max(j-L,X-H),te=te!==0?32767/te:0}return Rf(w,R,a,L,H,te,0),R}};function vx(B,r,a,h,p){let w,R;if(p===oC(B,r,a,h)>0)for(w=r;w<a;w+=h)R=xx(w,B[w],B[w+1],R);else for(w=a-h;w>=r;w-=h)R=xx(w,B[w],B[w+1],R);return R&&Fm(R,R.next)&&(Lf(R),R=R.next),R}function Qu(B,r){if(!B)return B;r||(r=B);let a=B,h;do if(h=!1,!a.steiner&&(Fm(a,a.next)||xs(a.prev,a,a.next)===0)){if(Lf(a),a=r=a.prev,a===a.next)break;h=!0}else a=a.next;while(h||a!==r);return r}function Rf(B,r,a,h,p,w,R){if(!B)return;!R&&w&&iC(B,h,p,w);let L=B,H,j;for(;B.prev!==B.next;){if(H=B.prev,j=B.next,w?$w(B,h,p,w):wA(B)){r.push(H.i/a|0),r.push(B.i/a|0),r.push(j.i/a|0),Lf(B),B=j.next,L=j.next;continue}if(B=j,B===L){R?R===1?(B=Jw(Qu(B),r,a),Rf(B,r,a,h,p,w,2)):R===2&&Zw(B,r,a,h,p,w):Rf(Qu(B),r,a,h,p,w,1);break}}}function wA(B){const r=B.prev,a=B,h=B.next;if(xs(r,a,h)>=0)return!1;const p=r.x,w=a.x,R=h.x,L=r.y,H=a.y,j=h.y,X=p<w?p<R?p:R:w<R?w:R,$=L<H?L<j?L:j:H<j?H:j,Z=p>w?p>R?p:R:w>R?w:R,te=L>H?L>j?L:j:H>j?H:j;let le=h.next;for(;le!==r;){if(le.x>=X&&le.x<=Z&&le.y>=$&&le.y<=te&&dd(p,L,w,H,R,j,le.x,le.y)&&xs(le.prev,le,le.next)>=0)return!1;le=le.next}return!0}function $w(B,r,a,h){const p=B.prev,w=B,R=B.next;if(xs(p,w,R)>=0)return!1;const L=p.x,H=w.x,j=R.x,X=p.y,$=w.y,Z=R.y,te=L<H?L<j?L:j:H<j?H:j,le=X<$?X<Z?X:Z:$<Z?$:Z,oe=L>H?L>j?L:j:H>j?H:j,se=X>$?X>Z?X:Z:$>Z?$:Z,ve=SA(te,le,r,a,h),De=SA(oe,se,r,a,h);let Ce=B.prevZ,Le=B.nextZ;for(;Ce&&Ce.z>=ve&&Le&&Le.z<=De;){if(Ce.x>=te&&Ce.x<=oe&&Ce.y>=le&&Ce.y<=se&&Ce!==p&&Ce!==R&&dd(L,X,H,$,j,Z,Ce.x,Ce.y)&&xs(Ce.prev,Ce,Ce.next)>=0||(Ce=Ce.prevZ,Le.x>=te&&Le.x<=oe&&Le.y>=le&&Le.y<=se&&Le!==p&&Le!==R&&dd(L,X,H,$,j,Z,Le.x,Le.y)&&xs(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Ce&&Ce.z>=ve;){if(Ce.x>=te&&Ce.x<=oe&&Ce.y>=le&&Ce.y<=se&&Ce!==p&&Ce!==R&&dd(L,X,H,$,j,Z,Ce.x,Ce.y)&&xs(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.prevZ}for(;Le&&Le.z<=De;){if(Le.x>=te&&Le.x<=oe&&Le.y>=le&&Le.y<=se&&Le!==p&&Le!==R&&dd(L,X,H,$,j,Z,Le.x,Le.y)&&xs(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Jw(B,r,a){let h=B;do{const p=h.prev,w=h.next.next;!Fm(p,w)&&IA(p,h,h.next,w)&&Wu(p,w)&&Wu(w,p)&&(r.push(p.i/a|0),r.push(h.i/a|0),r.push(w.i/a|0),Lf(h),Lf(h.next),h=B=w),h=h.next}while(h!==B);return Qu(h)}function Zw(B,r,a,h,p,w){let R=B;do{let L=R.next.next;for(;L!==R.prev;){if(R.i!==L.i&&rC(R,L)){let H=yx(R,L);R=Qu(R,R.next),H=Qu(H,H.next),Rf(R,r,a,h,p,w,0),Rf(H,r,a,h,p,w,0);return}L=L.next}R=R.next}while(R!==B)}function Jo(B,r,a,h){const p=[];let w,R,L,H,j;for(w=0,R=r.length;w<R;w++)L=r[w]*h,H=w<R-1?r[w+1]*h:B.length,j=vx(B,L,H,h,!1),j===j.next&&(j.steiner=!0),p.push(TA(j));for(p.sort(CA),w=0;w<p.length;w++)a=eC(p[w],a);return a}function CA(B,r){return B.x-r.x}function eC(B,r){const a=tC(B,r);if(!a)return r;const h=yx(a,B);return Qu(h,h.next),Qu(a,a.next)}function tC(B,r){let a=r,h=-1/0,p;const w=B.x,R=B.y;do{if(R<=a.y&&R>=a.next.y&&a.next.y!==a.y){const Z=a.x+(R-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(Z<=w&&Z>h&&(h=Z,p=a.x<a.next.x?a:a.next,Z===w))return p}a=a.next}while(a!==r);if(!p)return null;const L=p,H=p.x,j=p.y;let X=1/0,$;a=p;do w>=a.x&&a.x>=H&&w!==a.x&&dd(R<j?w:h,R,H,j,R<j?h:w,R,a.x,a.y)&&($=Math.abs(R-a.y)/(w-a.x),Wu(a,B)&&($<X||$===X&&(a.x>p.x||a.x===p.x&&nC(p,a)))&&(p=a,X=$)),a=a.next;while(a!==L);return p}function nC(B,r){return xs(B.prev,B,r.prev)<0&&xs(r.next,B,B.next)<0}function iC(B,r,a,h){let p=B;do p.z===0&&(p.z=SA(p.x,p.y,r,a,h)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next;while(p!==B);p.prevZ.nextZ=null,p.prevZ=null,MA(p)}function MA(B){let r,a,h,p,w,R,L,H,j=1;do{for(a=B,B=null,w=null,R=0;a;){for(R++,h=a,L=0,r=0;r<j&&(L++,h=h.nextZ,!!h);r++);for(H=j;L>0||H>0&&h;)L!==0&&(H===0||!h||a.z<=h.z)?(p=a,a=a.nextZ,L--):(p=h,h=h.nextZ,H--),w?w.nextZ=p:B=p,p.prevZ=w,w=p;a=h}w.nextZ=null,j*=2}while(R>1);return B}function SA(B,r,a,h,p){return B=(B-a)*p|0,r=(r-h)*p|0,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,B|r<<1}function TA(B){let r=B,a=B;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==B);return a}function dd(B,r,a,h,p,w,R,L){return(p-R)*(r-L)>=(B-R)*(w-L)&&(B-R)*(h-L)>=(a-R)*(r-L)&&(a-R)*(w-L)>=(p-R)*(h-L)}function rC(B,r){return B.next.i!==r.i&&B.prev.i!==r.i&&!sC(B,r)&&(Wu(B,r)&&Wu(r,B)&&RA(B,r)&&(xs(B.prev,B,r.prev)||xs(B,r.prev,r))||Fm(B,r)&&xs(B.prev,B,B.next)>0&&xs(r.prev,r,r.next)>0)}function xs(B,r,a){return(r.y-B.y)*(a.x-r.x)-(r.x-B.x)*(a.y-r.y)}function Fm(B,r){return B.x===r.x&&B.y===r.y}function IA(B,r,a,h){const p=Nm(xs(B,r,a)),w=Nm(xs(B,r,h)),R=Nm(xs(a,h,B)),L=Nm(xs(a,h,r));return!!(p!==w&&R!==L||p===0&&km(B,a,r)||w===0&&km(B,h,r)||R===0&&km(a,B,h)||L===0&&km(a,r,h))}function km(B,r,a){return r.x<=Math.max(B.x,a.x)&&r.x>=Math.min(B.x,a.x)&&r.y<=Math.max(B.y,a.y)&&r.y>=Math.min(B.y,a.y)}function Nm(B){return B>0?1:B<0?-1:0}function sC(B,r){let a=B;do{if(a.i!==B.i&&a.next.i!==B.i&&a.i!==r.i&&a.next.i!==r.i&&IA(a,a.next,B,r))return!0;a=a.next}while(a!==B);return!1}function Wu(B,r){return xs(B.prev,B,B.next)<0?xs(B,r,B.next)>=0&&xs(B,B.prev,r)>=0:xs(B,r,B.prev)<0||xs(B,B.next,r)<0}function RA(B,r){let a=B,h=!1;const p=(B.x+r.x)/2,w=(B.y+r.y)/2;do a.y>w!=a.next.y>w&&a.next.y!==a.y&&p<(a.next.x-a.x)*(w-a.y)/(a.next.y-a.y)+a.x&&(h=!h),a=a.next;while(a!==B);return h}function yx(B,r){const a=new LA(B.i,B.x,B.y),h=new LA(r.i,r.x,r.y),p=B.next,w=r.prev;return B.next=r,r.prev=B,a.next=p,p.prev=a,h.next=a,a.prev=h,w.next=h,h.prev=w,h}function xx(B,r,a,h){const p=new LA(B,r,a);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Lf(B){B.next.prev=B.prev,B.prev.next=B.next,B.prevZ&&(B.prevZ.nextZ=B.nextZ),B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function LA(B,r,a){this.i=B,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oC(B,r,a,h){let p=0;for(let w=r,R=a-h;w<a;w+=h)p+=(B[R]-B[w])*(B[w+1]+B[R+1]),R=w;return p}class zl{static area(r){const a=r.length;let h=0;for(let p=a-1,w=0;w<a;p=w++)h+=r[p].x*r[w].y-r[w].x*r[p].y;return h*.5}static isClockWise(r){return zl.area(r)<0}static triangulateShape(r,a){const h=[],p=[],w=[];Ex(r),_x(h,r);let R=r.length;a.forEach(Ex);for(let H=0;H<a.length;H++)p.push(R),R+=a[H].length,_x(h,a[H]);const L=Ax.triangulate(h,p);for(let H=0;H<L.length;H+=3)w.push(L.slice(H,H+3));return w}}function Ex(B){const r=B.length;r>2&&B[r-1].equals(B[0])&&B.pop()}function _x(B,r){for(let a=0;a<r.length;a++)B.push(r[a].x),B.push(r[a].y)}class Bf extends pr{constructor(r=new Au([new un(.5,.5),new un(-.5,.5),new un(-.5,-.5),new un(.5,-.5)]),a={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:a},r=Array.isArray(r)?r:[r];const h=this,p=[],w=[];for(let L=0,H=r.length;L<H;L++){const j=r[L];R(j)}this.setAttribute("position",new yi(p,3)),this.setAttribute("uv",new yi(w,2)),this.computeVertexNormals();function R(L){const H=[],j=a.curveSegments!==void 0?a.curveSegments:12,X=a.steps!==void 0?a.steps:1,$=a.depth!==void 0?a.depth:1;let Z=a.bevelEnabled!==void 0?a.bevelEnabled:!0,te=a.bevelThickness!==void 0?a.bevelThickness:.2,le=a.bevelSize!==void 0?a.bevelSize:te-.1,oe=a.bevelOffset!==void 0?a.bevelOffset:0,se=a.bevelSegments!==void 0?a.bevelSegments:3;const ve=a.extrudePath,De=a.UVGenerator!==void 0?a.UVGenerator:aC;let Ce,Le=!1,ze,tt,ft,Oe;ve&&(Ce=ve.getSpacedPoints(X),Le=!0,Z=!1,ze=ve.computeFrenetFrames(X,!1),tt=new je,ft=new je,Oe=new je),Z||(se=0,te=0,le=0,oe=0);const ot=L.extractPoints(j);let ut=ot.shape;const Tt=ot.holes;if(!zl.isClockWise(ut)){ut=ut.reverse();for(let pn=0,ln=Tt.length;pn<ln;pn++){const Qn=Tt[pn];zl.isClockWise(Qn)&&(Tt[pn]=Qn.reverse())}}const Lt=zl.triangulateShape(ut,Tt),bt=ut;for(let pn=0,ln=Tt.length;pn<ln;pn++){const Qn=Tt[pn];ut=ut.concat(Qn)}function Ut(pn,ln,Qn){return ln||console.error("THREE.ExtrudeGeometry: vec does not exist"),ln.clone().multiplyScalar(Qn).add(pn)}const fn=ut.length,xn=Lt.length;function hn(pn,ln,Qn){let Ii,ii,rr;const Ki=pn.x-ln.x,zi=pn.y-ln.y,us=Qn.x-pn.x,ns=Qn.y-pn.y,at=Ki*Ki+zi*zi,$e=Ki*ns-zi*us;if(Math.abs($e)>Number.EPSILON){const Kt=Math.sqrt(at),Pn=Math.sqrt(us*us+ns*ns),Vn=ln.x-zi/Kt,ai=ln.y+Ki/Kt,tr=Qn.x-ns/Pn,ci=Qn.y+us/Pn,cn=((tr-Vn)*ns-(ci-ai)*us)/(Ki*ns-zi*us);Ii=Vn+Ki*cn-pn.x,ii=ai+zi*cn-pn.y;const Hi=Ii*Ii+ii*ii;if(Hi<=2)return new un(Ii,ii);rr=Math.sqrt(Hi/2)}else{let Kt=!1;Ki>Number.EPSILON?us>Number.EPSILON&&(Kt=!0):Ki<-Number.EPSILON?us<-Number.EPSILON&&(Kt=!0):Math.sign(zi)===Math.sign(ns)&&(Kt=!0),Kt?(Ii=-zi,ii=Ki,rr=Math.sqrt(at)):(Ii=Ki,ii=zi,rr=Math.sqrt(at/2))}return new un(Ii/rr,ii/rr)}const Dn=[];for(let pn=0,ln=bt.length,Qn=ln-1,Ii=pn+1;pn<ln;pn++,Qn++,Ii++)Qn===ln&&(Qn=0),Ii===ln&&(Ii=0),Dn[pn]=hn(bt[pn],bt[Qn],bt[Ii]);const In=[];let fi,ni=Dn.concat();for(let pn=0,ln=Tt.length;pn<ln;pn++){const Qn=Tt[pn];fi=[];for(let Ii=0,ii=Qn.length,rr=ii-1,Ki=Ii+1;Ii<ii;Ii++,rr++,Ki++)rr===ii&&(rr=0),Ki===ii&&(Ki=0),fi[Ii]=hn(Qn[Ii],Qn[rr],Qn[Ki]);In.push(fi),ni=ni.concat(fi)}for(let pn=0;pn<se;pn++){const ln=pn/se,Qn=te*Math.cos(ln*Math.PI/2),Ii=le*Math.sin(ln*Math.PI/2)+oe;for(let ii=0,rr=bt.length;ii<rr;ii++){const Ki=Ut(bt[ii],Dn[ii],Ii);gi(Ki.x,Ki.y,-Qn)}for(let ii=0,rr=Tt.length;ii<rr;ii++){const Ki=Tt[ii];fi=In[ii];for(let zi=0,us=Ki.length;zi<us;zi++){const ns=Ut(Ki[zi],fi[zi],Ii);gi(ns.x,ns.y,-Qn)}}}const qt=le+oe;for(let pn=0;pn<fn;pn++){const ln=Z?Ut(ut[pn],ni[pn],qt):ut[pn];Le?(ft.copy(ze.normals[0]).multiplyScalar(ln.x),tt.copy(ze.binormals[0]).multiplyScalar(ln.y),Oe.copy(Ce[0]).add(ft).add(tt),gi(Oe.x,Oe.y,Oe.z)):gi(ln.x,ln.y,0)}for(let pn=1;pn<=X;pn++)for(let ln=0;ln<fn;ln++){const Qn=Z?Ut(ut[ln],ni[ln],qt):ut[ln];Le?(ft.copy(ze.normals[pn]).multiplyScalar(Qn.x),tt.copy(ze.binormals[pn]).multiplyScalar(Qn.y),Oe.copy(Ce[pn]).add(ft).add(tt),gi(Oe.x,Oe.y,Oe.z)):gi(Qn.x,Qn.y,$/X*pn)}for(let pn=se-1;pn>=0;pn--){const ln=pn/se,Qn=te*Math.cos(ln*Math.PI/2),Ii=le*Math.sin(ln*Math.PI/2)+oe;for(let ii=0,rr=bt.length;ii<rr;ii++){const Ki=Ut(bt[ii],Dn[ii],Ii);gi(Ki.x,Ki.y,$+Qn)}for(let ii=0,rr=Tt.length;ii<rr;ii++){const Ki=Tt[ii];fi=In[ii];for(let zi=0,us=Ki.length;zi<us;zi++){const ns=Ut(Ki[zi],fi[zi],Ii);Le?gi(ns.x,ns.y+Ce[X-1].y,Ce[X-1].x+Qn):gi(ns.x,ns.y,$+Qn)}}}En(),$n();function En(){const pn=p.length/3;if(Z){let ln=0,Qn=fn*ln;for(let Ii=0;Ii<xn;Ii++){const ii=Lt[Ii];Zn(ii[2]+Qn,ii[1]+Qn,ii[0]+Qn)}ln=X+se*2,Qn=fn*ln;for(let Ii=0;Ii<xn;Ii++){const ii=Lt[Ii];Zn(ii[0]+Qn,ii[1]+Qn,ii[2]+Qn)}}else{for(let ln=0;ln<xn;ln++){const Qn=Lt[ln];Zn(Qn[2],Qn[1],Qn[0])}for(let ln=0;ln<xn;ln++){const Qn=Lt[ln];Zn(Qn[0]+fn*X,Qn[1]+fn*X,Qn[2]+fn*X)}}h.addGroup(pn,p.length/3-pn,0)}function $n(){const pn=p.length/3;let ln=0;Ht(bt,ln),ln+=bt.length;for(let Qn=0,Ii=Tt.length;Qn<Ii;Qn++){const ii=Tt[Qn];Ht(ii,ln),ln+=ii.length}h.addGroup(pn,p.length/3-pn,1)}function Ht(pn,ln){let Qn=pn.length;for(;--Qn>=0;){const Ii=Qn;let ii=Qn-1;ii<0&&(ii=pn.length-1);for(let rr=0,Ki=X+se*2;rr<Ki;rr++){const zi=fn*rr,us=fn*(rr+1),ns=ln+Ii+zi,at=ln+ii+zi,$e=ln+ii+us,Kt=ln+Ii+us;Ni(ns,at,$e,Kt)}}}function gi(pn,ln,Qn){H.push(pn),H.push(ln),H.push(Qn)}function Zn(pn,ln,Qn){Gn(pn),Gn(ln),Gn(Qn);const Ii=p.length/3,ii=De.generateTopUV(h,p,Ii-3,Ii-2,Ii-1);yr(ii[0]),yr(ii[1]),yr(ii[2])}function Ni(pn,ln,Qn,Ii){Gn(pn),Gn(ln),Gn(Ii),Gn(ln),Gn(Qn),Gn(Ii);const ii=p.length/3,rr=De.generateSideWallUV(h,p,ii-6,ii-3,ii-2,ii-1);yr(rr[0]),yr(rr[1]),yr(rr[3]),yr(rr[1]),yr(rr[2]),yr(rr[3])}function Gn(pn){p.push(H[pn*3+0]),p.push(H[pn*3+1]),p.push(H[pn*3+2])}function yr(pn){w.push(pn.x),w.push(pn.y)}}}toJSON(){const r=super.toJSON(),a=this.parameters.shapes,h=this.parameters.options;return lC(a,h,r)}static fromJSON(r,a){const h=[];for(let w=0,R=r.shapes.length;w<R;w++){const L=a[r.shapes[w]];h.push(L)}const p=r.options.extrudePath;return p!==void 0&&(r.options.extrudePath=new _A[p.type]().fromJSON(p)),new Bf(h,r.options)}}const aC={generateTopUV:function(B,r,a,h,p){const w=r[a*3],R=r[a*3+1],L=r[h*3],H=r[h*3+1],j=r[p*3],X=r[p*3+1];return[new un(w,R),new un(L,H),new un(j,X)]},generateSideWallUV:function(B,r,a,h,p,w){const R=r[a*3],L=r[a*3+1],H=r[a*3+2],j=r[h*3],X=r[h*3+1],$=r[h*3+2],Z=r[p*3],te=r[p*3+1],le=r[p*3+2],oe=r[w*3],se=r[w*3+1],ve=r[w*3+2];return Math.abs(L-X)<Math.abs(R-j)?[new un(R,1-H),new un(j,1-$),new un(Z,1-le),new un(oe,1-ve)]:[new un(L,1-H),new un(X,1-$),new un(te,1-le),new un(se,1-ve)]}};function lC(B,r,a){if(a.shapes=[],Array.isArray(B))for(let h=0,p=B.length;h<p;h++){const w=B[h];a.shapes.push(w.uuid)}else a.shapes.push(B.uuid);return a.options=Object.assign({},r),r.extrudePath!==void 0&&(a.options.extrudePath=r.extrudePath.toJSON()),a}class Df extends gc{constructor(r=1,a=0){const h=(1+Math.sqrt(5))/2,p=[-1,h,0,1,h,0,-1,-h,0,1,-h,0,0,-1,h,0,1,h,0,-1,-h,0,1,-h,h,0,-1,h,0,1,-h,0,-1,-h,0,1],w=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(p,w,r,a),this.type="IcosahedronGeometry",this.parameters={radius:r,detail:a}}static fromJSON(r){return new Df(r.radius,r.detail)}}class fd extends gc{constructor(r=1,a=0){const h=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],p=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(h,p,r,a),this.type="OctahedronGeometry",this.parameters={radius:r,detail:a}}static fromJSON(r){return new fd(r.radius,r.detail)}}class Pf extends pr{constructor(r=.5,a=1,h=8,p=1,w=0,R=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:r,outerRadius:a,thetaSegments:h,phiSegments:p,thetaStart:w,thetaLength:R},h=Math.max(3,h),p=Math.max(1,p);const L=[],H=[],j=[],X=[];let $=r;const Z=(a-r)/p,te=new je,le=new un;for(let oe=0;oe<=p;oe++){for(let se=0;se<=h;se++){const ve=w+se/h*R;te.x=$*Math.cos(ve),te.y=$*Math.sin(ve),H.push(te.x,te.y,te.z),j.push(0,0,1),le.x=(te.x/a+1)/2,le.y=(te.y/a+1)/2,X.push(le.x,le.y)}$+=Z}for(let oe=0;oe<p;oe++){const se=oe*(h+1);for(let ve=0;ve<h;ve++){const De=ve+se,Ce=De,Le=De+h+1,ze=De+h+2,tt=De+1;L.push(Ce,Le,tt),L.push(Le,ze,tt)}}this.setIndex(L),this.setAttribute("position",new yi(H,3)),this.setAttribute("normal",new yi(j,3)),this.setAttribute("uv",new yi(X,2))}static fromJSON(r){return new Pf(r.innerRadius,r.outerRadius,r.thetaSegments,r.phiSegments,r.thetaStart,r.thetaLength)}}class Of extends pr{constructor(r=new Au([new un(0,.5),new un(-.5,-.5),new un(.5,-.5)]),a=12){super(),this.type="ShapeGeometry",this.parameters={shapes:r,curveSegments:a};const h=[],p=[],w=[],R=[];let L=0,H=0;if(Array.isArray(r)===!1)j(r);else for(let X=0;X<r.length;X++)j(r[X]),this.addGroup(L,H,X),L+=H,H=0;this.setIndex(h),this.setAttribute("position",new yi(p,3)),this.setAttribute("normal",new yi(w,3)),this.setAttribute("uv",new yi(R,2));function j(X){const $=p.length/3,Z=X.extractPoints(a);let te=Z.shape;const le=Z.holes;zl.isClockWise(te)===!1&&(te=te.reverse());for(let se=0,ve=le.length;se<ve;se++){const De=le[se];zl.isClockWise(De)===!0&&(le[se]=De.reverse())}const oe=zl.triangulateShape(te,le);for(let se=0,ve=le.length;se<ve;se++){const De=le[se];te=te.concat(De)}for(let se=0,ve=te.length;se<ve;se++){const De=te[se];p.push(De.x,De.y,0),w.push(0,0,1),R.push(De.x,De.y)}for(let se=0,ve=oe.length;se<ve;se++){const De=oe[se],Ce=De[0]+$,Le=De[1]+$,ze=De[2]+$;h.push(Ce,Le,ze),H+=3}}}toJSON(){const r=super.toJSON(),a=this.parameters.shapes;return cC(a,r)}static fromJSON(r,a){const h=[];for(let p=0,w=r.shapes.length;p<w;p++){const R=a[r.shapes[p]];h.push(R)}return new Of(h,r.curveSegments)}}function cC(B,r){if(r.shapes=[],Array.isArray(B))for(let a=0,h=B.length;a<h;a++){const p=B[a];r.shapes.push(p.uuid)}else r.shapes.push(B.uuid);return r}class pd extends pr{constructor(r=1,a=32,h=16,p=0,w=Math.PI*2,R=0,L=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:r,widthSegments:a,heightSegments:h,phiStart:p,phiLength:w,thetaStart:R,thetaLength:L},a=Math.max(3,Math.floor(a)),h=Math.max(2,Math.floor(h));const H=Math.min(R+L,Math.PI);let j=0;const X=[],$=new je,Z=new je,te=[],le=[],oe=[],se=[];for(let ve=0;ve<=h;ve++){const De=[],Ce=ve/h;let Le=0;ve==0&&R==0?Le=.5/a:ve==h&&H==Math.PI&&(Le=-.5/a);for(let ze=0;ze<=a;ze++){const tt=ze/a;$.x=-r*Math.cos(p+tt*w)*Math.sin(R+Ce*L),$.y=r*Math.cos(R+Ce*L),$.z=r*Math.sin(p+tt*w)*Math.sin(R+Ce*L),le.push($.x,$.y,$.z),Z.copy($).normalize(),oe.push(Z.x,Z.y,Z.z),se.push(tt+Le,1-Ce),De.push(j++)}X.push(De)}for(let ve=0;ve<h;ve++)for(let De=0;De<a;De++){const Ce=X[ve][De+1],Le=X[ve][De],ze=X[ve+1][De],tt=X[ve+1][De+1];(ve!==0||R>0)&&te.push(Ce,Le,tt),(ve!==h-1||H<Math.PI)&&te.push(Le,ze,tt)}this.setIndex(te),this.setAttribute("position",new yi(le,3)),this.setAttribute("normal",new yi(oe,3)),this.setAttribute("uv",new yi(se,2))}static fromJSON(r){return new pd(r.radius,r.widthSegments,r.heightSegments,r.phiStart,r.phiLength,r.thetaStart,r.thetaLength)}}class Ff extends gc{constructor(r=1,a=0){const h=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],p=[2,1,0,0,3,2,1,3,0,2,3,1];super(h,p,r,a),this.type="TetrahedronGeometry",this.parameters={radius:r,detail:a}}static fromJSON(r){return new Ff(r.radius,r.detail)}}class kf extends pr{constructor(r=1,a=.4,h=8,p=6,w=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:r,tube:a,radialSegments:h,tubularSegments:p,arc:w},h=Math.floor(h),p=Math.floor(p);const R=[],L=[],H=[],j=[],X=new je,$=new je,Z=new je;for(let te=0;te<=h;te++)for(let le=0;le<=p;le++){const oe=le/p*w,se=te/h*Math.PI*2;$.x=(r+a*Math.cos(se))*Math.cos(oe),$.y=(r+a*Math.cos(se))*Math.sin(oe),$.z=a*Math.sin(se),L.push($.x,$.y,$.z),X.x=r*Math.cos(oe),X.y=r*Math.sin(oe),Z.subVectors($,X).normalize(),H.push(Z.x,Z.y,Z.z),j.push(le/p),j.push(te/h)}for(let te=1;te<=h;te++)for(let le=1;le<=p;le++){const oe=(p+1)*te+le-1,se=(p+1)*(te-1)+le-1,ve=(p+1)*(te-1)+le,De=(p+1)*te+le;R.push(oe,se,De),R.push(se,ve,De)}this.setIndex(R),this.setAttribute("position",new yi(L,3)),this.setAttribute("normal",new yi(H,3)),this.setAttribute("uv",new yi(j,2))}static fromJSON(r){return new kf(r.radius,r.tube,r.radialSegments,r.tubularSegments,r.arc)}}class Nf extends pr{constructor(r=1,a=.4,h=64,p=8,w=2,R=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:r,tube:a,tubularSegments:h,radialSegments:p,p:w,q:R},h=Math.floor(h),p=Math.floor(p);const L=[],H=[],j=[],X=[],$=new je,Z=new je,te=new je,le=new je,oe=new je,se=new je,ve=new je;for(let Ce=0;Ce<=h;++Ce){const Le=Ce/h*w*Math.PI*2;De(Le,w,R,r,te),De(Le+.01,w,R,r,le),se.subVectors(le,te),ve.addVectors(le,te),oe.crossVectors(se,ve),ve.crossVectors(oe,se),oe.normalize(),ve.normalize();for(let ze=0;ze<=p;++ze){const tt=ze/p*Math.PI*2,ft=-a*Math.cos(tt),Oe=a*Math.sin(tt);$.x=te.x+(ft*ve.x+Oe*oe.x),$.y=te.y+(ft*ve.y+Oe*oe.y),$.z=te.z+(ft*ve.z+Oe*oe.z),H.push($.x,$.y,$.z),Z.subVectors($,te).normalize(),j.push(Z.x,Z.y,Z.z),X.push(Ce/h),X.push(ze/p)}}for(let Ce=1;Ce<=h;Ce++)for(let Le=1;Le<=p;Le++){const ze=(p+1)*(Ce-1)+(Le-1),tt=(p+1)*Ce+(Le-1),ft=(p+1)*Ce+Le,Oe=(p+1)*(Ce-1)+Le;L.push(ze,tt,Oe),L.push(tt,ft,Oe)}this.setIndex(L),this.setAttribute("position",new yi(H,3)),this.setAttribute("normal",new yi(j,3)),this.setAttribute("uv",new yi(X,2));function De(Ce,Le,ze,tt,ft){const Oe=Math.cos(Ce),ot=Math.sin(Ce),ut=ze/Le*Ce,Tt=Math.cos(ut);ft.x=tt*(2+Tt)*.5*Oe,ft.y=tt*(2+Tt)*ot*.5,ft.z=tt*Math.sin(ut)*.5}}static fromJSON(r){return new Nf(r.radius,r.tube,r.tubularSegments,r.radialSegments,r.p,r.q)}}class Uf extends pr{constructor(r=new xA(new je(-1,-1,0),new je(-1,1,0),new je(1,1,0)),a=64,h=1,p=8,w=!1){super(),this.type="TubeGeometry",this.parameters={path:r,tubularSegments:a,radius:h,radialSegments:p,closed:w};const R=r.computeFrenetFrames(a,w);this.tangents=R.tangents,this.normals=R.normals,this.binormals=R.binormals;const L=new je,H=new je,j=new un;let X=new je;const $=[],Z=[],te=[],le=[];oe(),this.setIndex(le),this.setAttribute("position",new yi($,3)),this.setAttribute("normal",new yi(Z,3)),this.setAttribute("uv",new yi(te,2));function oe(){for(let Ce=0;Ce<a;Ce++)se(Ce);se(w===!1?a:0),De(),ve()}function se(Ce){X=r.getPointAt(Ce/a,X);const Le=R.normals[Ce],ze=R.binormals[Ce];for(let tt=0;tt<=p;tt++){const ft=tt/p*Math.PI*2,Oe=Math.sin(ft),ot=-Math.cos(ft);H.x=ot*Le.x+Oe*ze.x,H.y=ot*Le.y+Oe*ze.y,H.z=ot*Le.z+Oe*ze.z,H.normalize(),Z.push(H.x,H.y,H.z),L.x=X.x+h*H.x,L.y=X.y+h*H.y,L.z=X.z+h*H.z,$.push(L.x,L.y,L.z)}}function ve(){for(let Ce=1;Ce<=a;Ce++)for(let Le=1;Le<=p;Le++){const ze=(p+1)*(Ce-1)+(Le-1),tt=(p+1)*Ce+(Le-1),ft=(p+1)*Ce+Le,Oe=(p+1)*(Ce-1)+Le;le.push(ze,tt,Oe),le.push(tt,ft,Oe)}}function De(){for(let Ce=0;Ce<=a;Ce++)for(let Le=0;Le<=p;Le++)j.x=Ce/a,j.y=Le/p,te.push(j.x,j.y)}}toJSON(){const r=super.toJSON();return r.path=this.parameters.path.toJSON(),r}static fromJSON(r){return new Uf(new _A[r.path.type]().fromJSON(r.path),r.tubularSegments,r.radius,r.radialSegments,r.closed)}}class E extends pr{constructor(r=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:r},r!==null){const a=[],h=new Set,p=new je,w=new je;if(r.index!==null){const R=r.attributes.position,L=r.index;let H=r.groups;H.length===0&&(H=[{start:0,count:L.count,materialIndex:0}]);for(let j=0,X=H.length;j<X;++j){const $=H[j],Z=$.start,te=$.count;for(let le=Z,oe=Z+te;le<oe;le+=3)for(let se=0;se<3;se++){const ve=L.getX(le+se),De=L.getX(le+(se+1)%3);p.fromBufferAttribute(R,ve),w.fromBufferAttribute(R,De),I(p,w,h)===!0&&(a.push(p.x,p.y,p.z),a.push(w.x,w.y,w.z))}}}else{const R=r.attributes.position;for(let L=0,H=R.count/3;L<H;L++)for(let j=0;j<3;j++){const X=3*L+j,$=3*L+(j+1)%3;p.fromBufferAttribute(R,X),w.fromBufferAttribute(R,$),I(p,w,h)===!0&&(a.push(p.x,p.y,p.z),a.push(w.x,w.y,w.z))}}this.setAttribute("position",new yi(a,3))}}}function I(B,r,a){const h=`${B.x},${B.y},${B.z}-${r.x},${r.y},${r.z}`,p=`${r.x},${r.y},${r.z}-${B.x},${B.y},${B.z}`;return a.has(h)===!0||a.has(p)===!0?!1:(a.add(h),a.add(p),!0)}var Q=Object.freeze({__proto__:null,BoxGeometry:Js,CapsuleGeometry:Mf,CircleGeometry:Sf,ConeGeometry:Tf,CylinderGeometry:ju,DodecahedronGeometry:If,EdgesGeometry:Om,ExtrudeGeometry:Bf,IcosahedronGeometry:Df,LatheGeometry:hd,OctahedronGeometry:fd,PlaneGeometry:$h,PolyhedronGeometry:gc,RingGeometry:Pf,ShapeGeometry:Of,SphereGeometry:pd,TetrahedronGeometry:Ff,TorusGeometry:kf,TorusKnotGeometry:Nf,TubeGeometry:Uf,WireframeGeometry:E});class ae extends yo{constructor(r){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new si(0),this.transparent=!0,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.fog=r.fog,this}}class Me extends va{constructor(r){super(r),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ve extends yo{constructor(r){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new si(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vi,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this.fog=r.fog,this}}class lt extends Ve{constructor(r){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new un(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(a){this.ior=(1+.4*a)/(1-.4*a)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new si(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new si(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new si(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(r)}get sheen(){return this._sheen}set sheen(r){this._sheen>0!=r>0&&this.version++,this._sheen=r}get clearcoat(){return this._clearcoat}set clearcoat(r){this._clearcoat>0!=r>0&&this.version++,this._clearcoat=r}get iridescence(){return this._iridescence}set iridescence(r){this._iridescence>0!=r>0&&this.version++,this._iridescence=r}get transmission(){return this._transmission}set transmission(r){this._transmission>0!=r>0&&this.version++,this._transmission=r}copy(r){return super.copy(r),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=r.clearcoat,this.clearcoatMap=r.clearcoatMap,this.clearcoatRoughness=r.clearcoatRoughness,this.clearcoatRoughnessMap=r.clearcoatRoughnessMap,this.clearcoatNormalMap=r.clearcoatNormalMap,this.clearcoatNormalScale.copy(r.clearcoatNormalScale),this.ior=r.ior,this.iridescence=r.iridescence,this.iridescenceMap=r.iridescenceMap,this.iridescenceIOR=r.iridescenceIOR,this.iridescenceThicknessRange=[...r.iridescenceThicknessRange],this.iridescenceThicknessMap=r.iridescenceThicknessMap,this.sheen=r.sheen,this.sheenColor.copy(r.sheenColor),this.sheenColorMap=r.sheenColorMap,this.sheenRoughness=r.sheenRoughness,this.sheenRoughnessMap=r.sheenRoughnessMap,this.transmission=r.transmission,this.transmissionMap=r.transmissionMap,this.thickness=r.thickness,this.thicknessMap=r.thicknessMap,this.attenuationDistance=r.attenuationDistance,this.attenuationColor.copy(r.attenuationColor),this.specularIntensity=r.specularIntensity,this.specularIntensityMap=r.specularIntensityMap,this.specularColor.copy(r.specularColor),this.specularColorMap=r.specularColorMap,this}}class pt extends yo{constructor(r){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new si(16777215),this.specular=new si(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vi,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this.fog=r.fog,this}}class wt extends yo{constructor(r){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new si(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vi,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.gradientMap=r.gradientMap,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.fog=r.fog,this}}class rn extends yo{constructor(r){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vi,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.flatShading=r.flatShading,this}}class sn extends yo{constructor(r){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vi,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this.fog=r.fog,this}}class gn extends yo{constructor(r){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new si(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vi,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.defines={MATCAP:""},this.color.copy(r.color),this.matcap=r.matcap,this.map=r.map,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.flatShading=r.flatShading,this.fog=r.fog,this}}class Xn extends ko{constructor(r){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}copy(r){return super.copy(r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this}}function Jn(B,r,a){return ir(B)?new B.constructor(B.subarray(r,a!==void 0?a:B.length)):B.slice(r,a)}function Si(B,r,a){return!B||!a&&B.constructor===r?B:typeof r.BYTES_PER_ELEMENT=="number"?new r(B):Array.prototype.slice.call(B)}function ir(B){return ArrayBuffer.isView(B)&&!(B instanceof DataView)}function ki(B){function r(p,w){return B[p]-B[w]}const a=B.length,h=new Array(a);for(let p=0;p!==a;++p)h[p]=p;return h.sort(r),h}function gr(B,r,a){const h=B.length,p=new B.constructor(h);for(let w=0,R=0;R!==h;++w){const L=a[w]*r;for(let H=0;H!==r;++H)p[R++]=B[L+H]}return p}function wr(B,r,a,h){let p=1,w=B[0];for(;w!==void 0&&w[h]===void 0;)w=B[p++];if(w===void 0)return;let R=w[h];if(R!==void 0)if(Array.isArray(R))do R=w[h],R!==void 0&&(r.push(w.time),a.push.apply(a,R)),w=B[p++];while(w!==void 0);else if(R.toArray!==void 0)do R=w[h],R!==void 0&&(r.push(w.time),R.toArray(a,a.length)),w=B[p++];while(w!==void 0);else do R=w[h],R!==void 0&&(r.push(w.time),a.push(R)),w=B[p++];while(w!==void 0)}function _a(B,r,a,h,p=30){const w=B.clone();w.name=r;const R=[];for(let H=0;H<w.tracks.length;++H){const j=w.tracks[H],X=j.getValueSize(),$=[],Z=[];for(let te=0;te<j.times.length;++te){const le=j.times[te]*p;if(!(le<a||le>=h)){$.push(j.times[te]);for(let oe=0;oe<X;++oe)Z.push(j.values[te*X+oe])}}$.length!==0&&(j.times=Si($,j.times.constructor),j.values=Si(Z,j.values.constructor),R.push(j))}w.tracks=R;let L=1/0;for(let H=0;H<w.tracks.length;++H)L>w.tracks[H].times[0]&&(L=w.tracks[H].times[0]);for(let H=0;H<w.tracks.length;++H)w.tracks[H].shift(-1*L);return w.resetDuration(),w}function Uo(B,r=0,a=B,h=30){h<=0&&(h=30);const p=a.tracks.length,w=r/h;for(let R=0;R<p;++R){const L=a.tracks[R],H=L.ValueTypeName;if(H==="bool"||H==="string")continue;const j=B.tracks.find(function(ve){return ve.name===L.name&&ve.ValueTypeName===H});if(j===void 0)continue;let X=0;const $=L.getValueSize();L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(X=$/3);let Z=0;const te=j.getValueSize();j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=te/3);const le=L.times.length-1;let oe;if(w<=L.times[0]){const ve=X,De=$-X;oe=Jn(L.values,ve,De)}else if(w>=L.times[le]){const ve=le*$+X,De=ve+$-X;oe=Jn(L.values,ve,De)}else{const ve=L.createInterpolant(),De=X,Ce=$-X;ve.evaluate(w),oe=Jn(ve.resultBuffer,De,Ce)}H==="quaternion"&&new Nn().fromArray(oe).normalize().conjugate().toArray(oe);const se=j.times.length;for(let ve=0;ve<se;++ve){const De=ve*te+Z;if(H==="quaternion")Nn.multiplyQuaternionsFlat(j.values,De,oe,0,j.values,De);else{const Ce=te-Z*2;for(let Le=0;Le<Ce;++Le)j.values[De+Le]-=oe[Le]}}}return B.blendMode=en,B}var ba=Object.freeze({__proto__:null,arraySlice:Jn,convertArray:Si,isTypedArray:ir,getKeyframeOrder:ki,sortedArray:gr,flattenJSON:wr,subclip:_a,makeClipAdditive:Uo});class cs{constructor(r,a,h,p){this.parameterPositions=r,this._cachedIndex=0,this.resultBuffer=p!==void 0?p:new a.constructor(h),this.sampleValues=a,this.valueSize=h,this.settings=null,this.DefaultSettings_={}}evaluate(r){const a=this.parameterPositions;let h=this._cachedIndex,p=a[h],w=a[h-1];e:{t:{let R;n:{i:if(!(r<p)){for(let L=h+2;;){if(p===void 0){if(r<w)break i;return h=a.length,this._cachedIndex=h,this.copySampleValue_(h-1)}if(h===L)break;if(w=p,p=a[++h],r<p)break t}R=a.length;break n}if(!(r>=w)){const L=a[1];r<L&&(h=2,w=L);for(let H=h-2;;){if(w===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(h===H)break;if(p=w,w=a[--h-1],r>=w)break t}R=h,h=0;break n}break e}for(;h<R;){const L=h+R>>>1;r<a[L]?R=L:h=L+1}if(p=a[h],w=a[h-1],w===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(p===void 0)return h=a.length,this._cachedIndex=h,this.copySampleValue_(h-1)}this._cachedIndex=h,this.intervalChanged_(h,w,p)}return this.interpolate_(h,w,r,p)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(r){const a=this.resultBuffer,h=this.sampleValues,p=this.valueSize,w=r*p;for(let R=0;R!==p;++R)a[R]=h[w+R];return a}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Wa extends cs{constructor(r,a,h,p){super(r,a,h,p),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ee,endingEnd:Ee}}intervalChanged_(r,a,h){const p=this.parameterPositions;let w=r-2,R=r+1,L=p[w],H=p[R];if(L===void 0)switch(this.getSettings_().endingStart){case ct:w=r,L=2*a-h;break;case St:w=p.length-2,L=a+p[w]-p[w+1];break;default:w=r,L=h}if(H===void 0)switch(this.getSettings_().endingEnd){case ct:R=r,H=2*h-a;break;case St:R=1,H=h+p[1]-p[0];break;default:R=r-1,H=a}const j=(h-a)*.5,X=this.valueSize;this._weightPrev=j/(a-L),this._weightNext=j/(H-h),this._offsetPrev=w*X,this._offsetNext=R*X}interpolate_(r,a,h,p){const w=this.resultBuffer,R=this.sampleValues,L=this.valueSize,H=r*L,j=H-L,X=this._offsetPrev,$=this._offsetNext,Z=this._weightPrev,te=this._weightNext,le=(h-a)/(p-a),oe=le*le,se=oe*le,ve=-Z*se+2*Z*oe-Z*le,De=(1+Z)*se+(-1.5-2*Z)*oe+(-.5+Z)*le+1,Ce=(-1-te)*se+(1.5+te)*oe+.5*le,Le=te*se-te*oe;for(let ze=0;ze!==L;++ze)w[ze]=ve*R[X+ze]+De*R[j+ze]+Ce*R[H+ze]+Le*R[$+ze];return w}}class hl extends cs{constructor(r,a,h,p){super(r,a,h,p)}interpolate_(r,a,h,p){const w=this.resultBuffer,R=this.sampleValues,L=this.valueSize,H=r*L,j=H-L,X=(h-a)/(p-a),$=1-X;for(let Z=0;Z!==L;++Z)w[Z]=R[j+Z]*$+R[H+Z]*X;return w}}class BA extends cs{constructor(r,a,h,p){super(r,a,h,p)}interpolate_(r){return this.copySampleValue_(r-1)}}class Ac{constructor(r,a,h,p){if(r===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(a===void 0||a.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+r);this.name=r,this.times=Si(a,this.TimeBufferType),this.values=Si(h,this.ValueBufferType),this.setInterpolation(p||this.DefaultInterpolation)}static toJSON(r){const a=r.constructor;let h;if(a.toJSON!==this.toJSON)h=a.toJSON(r);else{h={name:r.name,times:Si(r.times,Array),values:Si(r.values,Array)};const p=r.getInterpolation();p!==r.DefaultInterpolation&&(h.interpolation=p)}return h.type=r.ValueTypeName,h}InterpolantFactoryMethodDiscrete(r){return new BA(this.times,this.values,this.getValueSize(),r)}InterpolantFactoryMethodLinear(r){return new hl(this.times,this.values,this.getValueSize(),r)}InterpolantFactoryMethodSmooth(r){return new Wa(this.times,this.values,this.getValueSize(),r)}setInterpolation(r){let a;switch(r){case fe:a=this.InterpolantFactoryMethodDiscrete;break;case pe:a=this.InterpolantFactoryMethodLinear;break;case xe:a=this.InterpolantFactoryMethodSmooth;break}if(a===void 0){const h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(r!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(h);return console.warn("THREE.KeyframeTrack:",h),this}return this.createInterpolant=a,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fe;case this.InterpolantFactoryMethodLinear:return pe;case this.InterpolantFactoryMethodSmooth:return xe}}getValueSize(){return this.values.length/this.times.length}shift(r){if(r!==0){const a=this.times;for(let h=0,p=a.length;h!==p;++h)a[h]+=r}return this}scale(r){if(r!==1){const a=this.times;for(let h=0,p=a.length;h!==p;++h)a[h]*=r}return this}trim(r,a){const h=this.times,p=h.length;let w=0,R=p-1;for(;w!==p&&h[w]<r;)++w;for(;R!==-1&&h[R]>a;)--R;if(++R,w!==0||R!==p){w>=R&&(R=Math.max(R,1),w=R-1);const L=this.getValueSize();this.times=Jn(h,w,R),this.values=Jn(this.values,w*L,R*L)}return this}validate(){let r=!0;const a=this.getValueSize();a-Math.floor(a)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),r=!1);const h=this.times,p=this.values,w=h.length;w===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),r=!1);let R=null;for(let L=0;L!==w;L++){const H=h[L];if(typeof H=="number"&&isNaN(H)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,L,H),r=!1;break}if(R!==null&&R>H){console.error("THREE.KeyframeTrack: Out of order keys.",this,L,H,R),r=!1;break}R=H}if(p!==void 0&&ir(p))for(let L=0,H=p.length;L!==H;++L){const j=p[L];if(isNaN(j)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,L,j),r=!1;break}}return r}optimize(){const r=Jn(this.times),a=Jn(this.values),h=this.getValueSize(),p=this.getInterpolation()===xe,w=r.length-1;let R=1;for(let L=1;L<w;++L){let H=!1;const j=r[L],X=r[L+1];if(j!==X&&(L!==1||j!==r[0]))if(p)H=!0;else{const $=L*h,Z=$-h,te=$+h;for(let le=0;le!==h;++le){const oe=a[$+le];if(oe!==a[Z+le]||oe!==a[te+le]){H=!0;break}}}if(H){if(L!==R){r[R]=r[L];const $=L*h,Z=R*h;for(let te=0;te!==h;++te)a[Z+te]=a[$+te]}++R}}if(w>0){r[R]=r[w];for(let L=w*h,H=R*h,j=0;j!==h;++j)a[H+j]=a[L+j];++R}return R!==r.length?(this.times=Jn(r,0,R),this.values=Jn(a,0,R*h)):(this.times=r,this.values=a),this}clone(){const r=Jn(this.times,0),a=Jn(this.values,0),h=this.constructor,p=new h(this.name,r,a);return p.createInterpolant=this.createInterpolant,p}}Ac.prototype.TimeBufferType=Float32Array,Ac.prototype.ValueBufferType=Float32Array,Ac.prototype.DefaultInterpolation=pe;class Gf extends Ac{}Gf.prototype.ValueTypeName="bool",Gf.prototype.ValueBufferType=Array,Gf.prototype.DefaultInterpolation=fe,Gf.prototype.InterpolantFactoryMethodLinear=void 0,Gf.prototype.InterpolantFactoryMethodSmooth=void 0;class uC extends Ac{}uC.prototype.ValueTypeName="color";class DA extends Ac{}DA.prototype.ValueTypeName="number";class QI extends cs{constructor(r,a,h,p){super(r,a,h,p)}interpolate_(r,a,h,p){const w=this.resultBuffer,R=this.sampleValues,L=this.valueSize,H=(h-a)/(p-a);let j=r*L;for(let X=j+L;j!==X;j+=4)Nn.slerpFlat(w,0,R,j-L,R,j,H);return w}}class Um extends Ac{InterpolantFactoryMethodLinear(r){return new QI(this.times,this.values,this.getValueSize(),r)}}Um.prototype.ValueTypeName="quaternion",Um.prototype.DefaultInterpolation=pe,Um.prototype.InterpolantFactoryMethodSmooth=void 0;class zf extends Ac{}zf.prototype.ValueTypeName="string",zf.prototype.ValueBufferType=Array,zf.prototype.DefaultInterpolation=fe,zf.prototype.InterpolantFactoryMethodLinear=void 0,zf.prototype.InterpolantFactoryMethodSmooth=void 0;class PA extends Ac{}PA.prototype.ValueTypeName="vector";class OA{constructor(r,a=-1,h,p=zt){this.name=r,this.tracks=h,this.duration=a,this.blendMode=p,this.uuid=vr(),this.duration<0&&this.resetDuration()}static parse(r){const a=[],h=r.tracks,p=1/(r.fps||1);for(let R=0,L=h.length;R!==L;++R)a.push(B5(h[R]).scale(p));const w=new this(r.name,r.duration,a,r.blendMode);return w.uuid=r.uuid,w}static toJSON(r){const a=[],h=r.tracks,p={name:r.name,duration:r.duration,tracks:a,uuid:r.uuid,blendMode:r.blendMode};for(let w=0,R=h.length;w!==R;++w)a.push(Ac.toJSON(h[w]));return p}static CreateFromMorphTargetSequence(r,a,h,p){const w=a.length,R=[];for(let L=0;L<w;L++){let H=[],j=[];H.push((L+w-1)%w,L,(L+1)%w),j.push(0,1,0);const X=ki(H);H=gr(H,1,X),j=gr(j,1,X),!p&&H[0]===0&&(H.push(w),j.push(j[0])),R.push(new DA(".morphTargetInfluences["+a[L].name+"]",H,j).scale(1/h))}return new this(r,-1,R)}static findByName(r,a){let h=r;if(!Array.isArray(r)){const p=r;h=p.geometry&&p.geometry.animations||p.animations}for(let p=0;p<h.length;p++)if(h[p].name===a)return h[p];return null}static CreateClipsFromMorphTargetSequences(r,a,h){const p={},w=/^([\w-]*?)([\d]+)$/;for(let L=0,H=r.length;L<H;L++){const j=r[L],X=j.name.match(w);if(X&&X.length>1){const $=X[1];let Z=p[$];Z||(p[$]=Z=[]),Z.push(j)}}const R=[];for(const L in p)R.push(this.CreateFromMorphTargetSequence(L,p[L],a,h));return R}static parseAnimation(r,a){if(!r)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const h=function($,Z,te,le,oe){if(te.length!==0){const se=[],ve=[];wr(te,se,ve,le),se.length!==0&&oe.push(new $(Z,se,ve))}},p=[],w=r.name||"default",R=r.fps||30,L=r.blendMode;let H=r.length||-1;const j=r.hierarchy||[];for(let $=0;$<j.length;$++){const Z=j[$].keys;if(!(!Z||Z.length===0))if(Z[0].morphTargets){const te={};let le;for(le=0;le<Z.length;le++)if(Z[le].morphTargets)for(let oe=0;oe<Z[le].morphTargets.length;oe++)te[Z[le].morphTargets[oe]]=-1;for(const oe in te){const se=[],ve=[];for(let De=0;De!==Z[le].morphTargets.length;++De){const Ce=Z[le];se.push(Ce.time),ve.push(Ce.morphTarget===oe?1:0)}p.push(new DA(".morphTargetInfluence["+oe+"]",se,ve))}H=te.length*R}else{const te=".bones["+a[$].name+"]";h(PA,te+".position",Z,"pos",p),h(Um,te+".quaternion",Z,"rot",p),h(PA,te+".scale",Z,"scl",p)}}return p.length===0?null:new this(w,H,p,L)}resetDuration(){const r=this.tracks;let a=0;for(let h=0,p=r.length;h!==p;++h){const w=this.tracks[h];a=Math.max(a,w.times[w.times.length-1])}return this.duration=a,this}trim(){for(let r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this}validate(){let r=!0;for(let a=0;a<this.tracks.length;a++)r=r&&this.tracks[a].validate();return r}optimize(){for(let r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this}clone(){const r=[];for(let a=0;a<this.tracks.length;a++)r.push(this.tracks[a].clone());return new this.constructor(this.name,this.duration,r,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function L5(B){switch(B.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return DA;case"vector":case"vector2":case"vector3":case"vector4":return PA;case"color":return uC;case"quaternion":return Um;case"bool":case"boolean":return Gf;case"string":return zf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+B)}function B5(B){if(B.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const r=L5(B.type);if(B.times===void 0){const a=[],h=[];wr(B.keys,a,h,"value"),B.times=a,B.values=h}return r.parse!==void 0?r.parse(B):new r(B.name,B.times,B.values,B.interpolation)}const Hf={enabled:!1,files:{},add:function(B,r){this.enabled!==!1&&(this.files[B]=r)},get:function(B){if(this.enabled!==!1)return this.files[B]},remove:function(B){delete this.files[B]},clear:function(){this.files={}}};class hC{constructor(r,a,h){const p=this;let w=!1,R=0,L=0,H;const j=[];this.onStart=void 0,this.onLoad=r,this.onProgress=a,this.onError=h,this.itemStart=function(X){L++,w===!1&&p.onStart!==void 0&&p.onStart(X,R,L),w=!0},this.itemEnd=function(X){R++,p.onProgress!==void 0&&p.onProgress(X,R,L),R===L&&(w=!1,p.onLoad!==void 0&&p.onLoad())},this.itemError=function(X){p.onError!==void 0&&p.onError(X)},this.resolveURL=function(X){return H?H(X):X},this.setURLModifier=function(X){return H=X,this},this.addHandler=function(X,$){return j.push(X,$),this},this.removeHandler=function(X){const $=j.indexOf(X);return $!==-1&&j.splice($,2),this},this.getHandler=function(X){for(let $=0,Z=j.length;$<Z;$+=2){const te=j[$],le=j[$+1];if(te.global&&(te.lastIndex=0),te.test(X))return le}return null}}}const WI=new hC;class dl{constructor(r){this.manager=r!==void 0?r:WI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,a){const h=this;return new Promise(function(p,w){h.load(r,p,a,w)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}const Ku={};class D5 extends Error{constructor(r,a){super(r),this.response=a}}class Xu extends dl{constructor(r){super(r)}load(r,a,h,p){r===void 0&&(r=""),this.path!==void 0&&(r=this.path+r),r=this.manager.resolveURL(r);const w=Hf.get(r);if(w!==void 0)return this.manager.itemStart(r),setTimeout(()=>{a&&a(w),this.manager.itemEnd(r)},0),w;if(Ku[r]!==void 0){Ku[r].push({onLoad:a,onProgress:h,onError:p});return}Ku[r]=[],Ku[r].push({onLoad:a,onProgress:h,onError:p});const R=new Request(r,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),L=this.mimeType,H=this.responseType;fetch(R).then(j=>{if(j.status===200||j.status===0){if(j.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||j.body===void 0||j.body.getReader===void 0)return j;const X=Ku[r],$=j.body.getReader(),Z=j.headers.get("Content-Length")||j.headers.get("X-File-Size"),te=Z?parseInt(Z):0,le=te!==0;let oe=0;const se=new ReadableStream({start(ve){De();function De(){$.read().then(({done:Ce,value:Le})=>{if(Ce)ve.close();else{oe+=Le.byteLength;const ze=new ProgressEvent("progress",{lengthComputable:le,loaded:oe,total:te});for(let tt=0,ft=X.length;tt<ft;tt++){const Oe=X[tt];Oe.onProgress&&Oe.onProgress(ze)}ve.enqueue(Le),De()}})}}});return new Response(se)}else throw new D5(`fetch for "${j.url}" responded with ${j.status}: ${j.statusText}`,j)}).then(j=>{switch(H){case"arraybuffer":return j.arrayBuffer();case"blob":return j.blob();case"document":return j.text().then(X=>new DOMParser().parseFromString(X,L));case"json":return j.json();default:if(L===void 0)return j.text();{const $=/charset="?([^;"\s]*)"?/i.exec(L),Z=$&&$[1]?$[1].toLowerCase():void 0,te=new TextDecoder(Z);return j.arrayBuffer().then(le=>te.decode(le))}}}).then(j=>{Hf.add(r,j);const X=Ku[r];delete Ku[r];for(let $=0,Z=X.length;$<Z;$++){const te=X[$];te.onLoad&&te.onLoad(j)}}).catch(j=>{const X=Ku[r];if(X===void 0)throw this.manager.itemError(r),j;delete Ku[r];for(let $=0,Z=X.length;$<Z;$++){const te=X[$];te.onError&&te.onError(j)}this.manager.itemError(r)}).finally(()=>{this.manager.itemEnd(r)}),this.manager.itemStart(r)}setResponseType(r){return this.responseType=r,this}setMimeType(r){return this.mimeType=r,this}}class P5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=this,R=new Xu(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(r,function(L){try{a(w.parse(JSON.parse(L)))}catch(H){p?p(H):console.error(H),w.manager.itemError(r)}},h,p)}parse(r){const a=[];for(let h=0;h<r.length;h++){const p=OA.parse(r[h]);a.push(p)}return a}}class O5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=this,R=[],L=new Im,H=new Xu(this.manager);H.setPath(this.path),H.setResponseType("arraybuffer"),H.setRequestHeader(this.requestHeader),H.setWithCredentials(w.withCredentials);let j=0;function X($){H.load(r[$],function(Z){const te=w.parse(Z,!0);R[$]={width:te.width,height:te.height,format:te.format,mipmaps:te.mipmaps},j+=1,j===6&&(te.mipmapCount===1&&(L.minFilter=qe),L.image=R,L.format=te.format,L.needsUpdate=!0,a&&a(L))},h,p)}if(Array.isArray(r))for(let $=0,Z=r.length;$<Z;++$)X($);else H.load(r,function($){const Z=w.parse($,!0);if(Z.isCubemap){const te=Z.mipmaps.length/Z.mipmapCount;for(let le=0;le<te;le++){R[le]={mipmaps:[]};for(let oe=0;oe<Z.mipmapCount;oe++)R[le].mipmaps.push(Z.mipmaps[le*Z.mipmapCount+oe]),R[le].format=Z.format,R[le].width=Z.width,R[le].height=Z.height}L.image=R}else L.image.width=Z.width,L.image.height=Z.height,L.mipmaps=Z.mipmaps;Z.mipmapCount===1&&(L.minFilter=qe),L.format=Z.format,L.needsUpdate=!0,a&&a(L)},h,p);return L}}class FA extends dl{constructor(r){super(r)}load(r,a,h,p){this.path!==void 0&&(r=this.path+r),r=this.manager.resolveURL(r);const w=this,R=Hf.get(r);if(R!==void 0)return w.manager.itemStart(r),setTimeout(function(){a&&a(R),w.manager.itemEnd(r)},0),R;const L=Du("img");function H(){X(),Hf.add(r,this),a&&a(this),w.manager.itemEnd(r)}function j($){X(),p&&p($),w.manager.itemError(r),w.manager.itemEnd(r)}function X(){L.removeEventListener("load",H,!1),L.removeEventListener("error",j,!1)}return L.addEventListener("load",H,!1),L.addEventListener("error",j,!1),r.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(L.crossOrigin=this.crossOrigin),w.manager.itemStart(r),L.src=r,L}}class F5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=new Xo,R=new FA(this.manager);R.setCrossOrigin(this.crossOrigin),R.setPath(this.path);let L=0;function H(j){R.load(r[j],function(X){w.images[j]=X,L++,L===6&&(w.needsUpdate=!0,a&&a(w))},void 0,p)}for(let j=0;j<r.length;++j)H(j);return w}}class k5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=this,R=new ad,L=new Xu(this.manager);return L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(w.withCredentials),L.load(r,function(H){const j=w.parse(H);j&&(j.image!==void 0?R.image=j.image:j.data!==void 0&&(R.image.width=j.width,R.image.height=j.height,R.image.data=j.data),R.wrapS=j.wrapS!==void 0?j.wrapS:Xe,R.wrapT=j.wrapT!==void 0?j.wrapT:Xe,R.magFilter=j.magFilter!==void 0?j.magFilter:qe,R.minFilter=j.minFilter!==void 0?j.minFilter:qe,R.anisotropy=j.anisotropy!==void 0?j.anisotropy:1,j.encoding!==void 0&&(R.encoding=j.encoding),j.flipY!==void 0&&(R.flipY=j.flipY),j.format!==void 0&&(R.format=j.format),j.type!==void 0&&(R.type=j.type),j.mipmaps!==void 0&&(R.mipmaps=j.mipmaps,R.minFilter=Ot),j.mipmapCount===1&&(R.minFilter=qe),j.generateMipmaps!==void 0&&(R.generateMipmaps=j.generateMipmaps),R.needsUpdate=!0,a&&a(R,j))},h,p),R}}class N5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=new vs,R=new FA(this.manager);return R.setCrossOrigin(this.crossOrigin),R.setPath(this.path),R.load(r,function(L){w.image=L,w.needsUpdate=!0,a!==void 0&&a(w)},h,p),w}}class md extends Or{constructor(r,a=1){super(),this.isLight=!0,this.type="Light",this.color=new si(r),this.intensity=a}dispose(){}copy(r,a){return super.copy(r,a),this.color.copy(r.color),this.intensity=r.intensity,this}toJSON(r){const a=super.toJSON(r);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,this.groundColor!==void 0&&(a.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(a.object.distance=this.distance),this.angle!==void 0&&(a.object.angle=this.angle),this.decay!==void 0&&(a.object.decay=this.decay),this.penumbra!==void 0&&(a.object.penumbra=this.penumbra),this.shadow!==void 0&&(a.object.shadow=this.shadow.toJSON()),a}}class KI extends md{constructor(r,a,h){super(r,h),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Or.DefaultUp),this.updateMatrix(),this.groundColor=new si(a)}copy(r,a){return super.copy(r,a),this.groundColor.copy(r.groundColor),this}}const dC=new oi,XI=new je,YI=new je;class fC{constructor(r){this.camera=r,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new un(512,512),this.map=null,this.mapPass=null,this.matrix=new oi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tm,this._frameExtents=new un(1,1),this._viewportCount=1,this._viewports=[new kr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(r){const a=this.camera,h=this.matrix;XI.setFromMatrixPosition(r.matrixWorld),a.position.copy(XI),YI.setFromMatrixPosition(r.target.matrixWorld),a.lookAt(YI),a.updateMatrixWorld(),dC.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dC),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(dC)}getViewport(r){return this._viewports[r]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(r){return this.camera=r.camera.clone(),this.bias=r.bias,this.radius=r.radius,this.mapSize.copy(r.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const r={};return this.bias!==0&&(r.bias=this.bias),this.normalBias!==0&&(r.normalBias=this.normalBias),this.radius!==1&&(r.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(r.mapSize=this.mapSize.toArray()),r.camera=this.camera.toJSON(!1).object,delete r.camera.matrix,r}}class U5 extends fC{constructor(){super(new Vs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(r){const a=this.camera,h=oc*2*r.angle*this.focus,p=this.mapSize.width/this.mapSize.height,w=r.distance||a.far;(h!==a.fov||p!==a.aspect||w!==a.far)&&(a.fov=h,a.aspect=p,a.far=w,a.updateProjectionMatrix()),super.updateMatrices(r)}copy(r){return super.copy(r),this.focus=r.focus,this}}class qI extends md{constructor(r,a,h=0,p=Math.PI/3,w=0,R=2){super(r,a),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Or.DefaultUp),this.updateMatrix(),this.target=new Or,this.distance=h,this.angle=p,this.penumbra=w,this.decay=R,this.map=null,this.shadow=new U5}get power(){return this.intensity*Math.PI}set power(r){this.intensity=r/Math.PI}dispose(){this.shadow.dispose()}copy(r,a){return super.copy(r,a),this.distance=r.distance,this.angle=r.angle,this.penumbra=r.penumbra,this.decay=r.decay,this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}const $I=new oi,kA=new je,pC=new je;class G5 extends fC{constructor(){super(new Vs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new un(4,2),this._viewportCount=6,this._viewports=[new kr(2,1,1,1),new kr(0,1,1,1),new kr(3,1,1,1),new kr(1,1,1,1),new kr(3,0,1,1),new kr(1,0,1,1)],this._cubeDirections=[new je(1,0,0),new je(-1,0,0),new je(0,0,1),new je(0,0,-1),new je(0,1,0),new je(0,-1,0)],this._cubeUps=[new je(0,1,0),new je(0,1,0),new je(0,1,0),new je(0,1,0),new je(0,0,1),new je(0,0,-1)]}updateMatrices(r,a=0){const h=this.camera,p=this.matrix,w=r.distance||h.far;w!==h.far&&(h.far=w,h.updateProjectionMatrix()),kA.setFromMatrixPosition(r.matrixWorld),h.position.copy(kA),pC.copy(h.position),pC.add(this._cubeDirections[a]),h.up.copy(this._cubeUps[a]),h.lookAt(pC),h.updateMatrixWorld(),p.makeTranslation(-kA.x,-kA.y,-kA.z),$I.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix($I)}}class JI extends md{constructor(r,a,h=0,p=2){super(r,a),this.isPointLight=!0,this.type="PointLight",this.distance=h,this.decay=p,this.shadow=new G5}get power(){return this.intensity*4*Math.PI}set power(r){this.intensity=r/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(r,a){return super.copy(r,a),this.distance=r.distance,this.decay=r.decay,this.shadow=r.shadow.clone(),this}}class z5 extends fC{constructor(){super(new kl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ZI extends md{constructor(r,a){super(r,a),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Or.DefaultUp),this.updateMatrix(),this.target=new Or,this.shadow=new z5}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}class eR extends md{constructor(r,a){super(r,a),this.isAmbientLight=!0,this.type="AmbientLight"}}class tR extends md{constructor(r,a,h=10,p=10){super(r,a),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=h,this.height=p}get power(){return this.intensity*this.width*this.height*Math.PI}set power(r){this.intensity=r/(this.width*this.height*Math.PI)}copy(r){return super.copy(r),this.width=r.width,this.height=r.height,this}toJSON(r){const a=super.toJSON(r);return a.object.width=this.width,a.object.height=this.height,a}}class nR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let r=0;r<9;r++)this.coefficients.push(new je)}set(r){for(let a=0;a<9;a++)this.coefficients[a].copy(r[a]);return this}zero(){for(let r=0;r<9;r++)this.coefficients[r].set(0,0,0);return this}getAt(r,a){const h=r.x,p=r.y,w=r.z,R=this.coefficients;return a.copy(R[0]).multiplyScalar(.282095),a.addScaledVector(R[1],.488603*p),a.addScaledVector(R[2],.488603*w),a.addScaledVector(R[3],.488603*h),a.addScaledVector(R[4],1.092548*(h*p)),a.addScaledVector(R[5],1.092548*(p*w)),a.addScaledVector(R[6],.315392*(3*w*w-1)),a.addScaledVector(R[7],1.092548*(h*w)),a.addScaledVector(R[8],.546274*(h*h-p*p)),a}getIrradianceAt(r,a){const h=r.x,p=r.y,w=r.z,R=this.coefficients;return a.copy(R[0]).multiplyScalar(.886227),a.addScaledVector(R[1],1.023328*p),a.addScaledVector(R[2],1.023328*w),a.addScaledVector(R[3],1.023328*h),a.addScaledVector(R[4],.858086*h*p),a.addScaledVector(R[5],.858086*p*w),a.addScaledVector(R[6],.743125*w*w-.247708),a.addScaledVector(R[7],.858086*h*w),a.addScaledVector(R[8],.429043*(h*h-p*p)),a}add(r){for(let a=0;a<9;a++)this.coefficients[a].add(r.coefficients[a]);return this}addScaledSH(r,a){for(let h=0;h<9;h++)this.coefficients[h].addScaledVector(r.coefficients[h],a);return this}scale(r){for(let a=0;a<9;a++)this.coefficients[a].multiplyScalar(r);return this}lerp(r,a){for(let h=0;h<9;h++)this.coefficients[h].lerp(r.coefficients[h],a);return this}equals(r){for(let a=0;a<9;a++)if(!this.coefficients[a].equals(r.coefficients[a]))return!1;return!0}copy(r){return this.set(r.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(r,a=0){const h=this.coefficients;for(let p=0;p<9;p++)h[p].fromArray(r,a+p*3);return this}toArray(r=[],a=0){const h=this.coefficients;for(let p=0;p<9;p++)h[p].toArray(r,a+p*3);return r}static getBasisAt(r,a){const h=r.x,p=r.y,w=r.z;a[0]=.282095,a[1]=.488603*p,a[2]=.488603*w,a[3]=.488603*h,a[4]=1.092548*h*p,a[5]=1.092548*p*w,a[6]=.315392*(3*w*w-1),a[7]=1.092548*h*w,a[8]=.546274*(h*h-p*p)}}class bx extends md{constructor(r=new nR,a=1){super(void 0,a),this.isLightProbe=!0,this.sh=r}copy(r){return super.copy(r),this.sh.copy(r.sh),this}fromJSON(r){return this.intensity=r.intensity,this.sh.fromArray(r.sh),this}toJSON(r){const a=super.toJSON(r);return a.object.sh=this.sh.toArray(),a}}class wx extends dl{constructor(r){super(r),this.textures={}}load(r,a,h,p){const w=this,R=new Xu(w.manager);R.setPath(w.path),R.setRequestHeader(w.requestHeader),R.setWithCredentials(w.withCredentials),R.load(r,function(L){try{a(w.parse(JSON.parse(L)))}catch(H){p?p(H):console.error(H),w.manager.itemError(r)}},h,p)}parse(r){const a=this.textures;function h(w){return a[w]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",w),a[w]}const p=wx.createMaterialFromType(r.type);if(r.uuid!==void 0&&(p.uuid=r.uuid),r.name!==void 0&&(p.name=r.name),r.color!==void 0&&p.color!==void 0&&p.color.setHex(r.color),r.roughness!==void 0&&(p.roughness=r.roughness),r.metalness!==void 0&&(p.metalness=r.metalness),r.sheen!==void 0&&(p.sheen=r.sheen),r.sheenColor!==void 0&&(p.sheenColor=new si().setHex(r.sheenColor)),r.sheenRoughness!==void 0&&(p.sheenRoughness=r.sheenRoughness),r.emissive!==void 0&&p.emissive!==void 0&&p.emissive.setHex(r.emissive),r.specular!==void 0&&p.specular!==void 0&&p.specular.setHex(r.specular),r.specularIntensity!==void 0&&(p.specularIntensity=r.specularIntensity),r.specularColor!==void 0&&p.specularColor!==void 0&&p.specularColor.setHex(r.specularColor),r.shininess!==void 0&&(p.shininess=r.shininess),r.clearcoat!==void 0&&(p.clearcoat=r.clearcoat),r.clearcoatRoughness!==void 0&&(p.clearcoatRoughness=r.clearcoatRoughness),r.iridescence!==void 0&&(p.iridescence=r.iridescence),r.iridescenceIOR!==void 0&&(p.iridescenceIOR=r.iridescenceIOR),r.iridescenceThicknessRange!==void 0&&(p.iridescenceThicknessRange=r.iridescenceThicknessRange),r.transmission!==void 0&&(p.transmission=r.transmission),r.thickness!==void 0&&(p.thickness=r.thickness),r.attenuationDistance!==void 0&&(p.attenuationDistance=r.attenuationDistance),r.attenuationColor!==void 0&&p.attenuationColor!==void 0&&p.attenuationColor.setHex(r.attenuationColor),r.fog!==void 0&&(p.fog=r.fog),r.flatShading!==void 0&&(p.flatShading=r.flatShading),r.blending!==void 0&&(p.blending=r.blending),r.combine!==void 0&&(p.combine=r.combine),r.side!==void 0&&(p.side=r.side),r.shadowSide!==void 0&&(p.shadowSide=r.shadowSide),r.opacity!==void 0&&(p.opacity=r.opacity),r.transparent!==void 0&&(p.transparent=r.transparent),r.alphaTest!==void 0&&(p.alphaTest=r.alphaTest),r.depthTest!==void 0&&(p.depthTest=r.depthTest),r.depthWrite!==void 0&&(p.depthWrite=r.depthWrite),r.colorWrite!==void 0&&(p.colorWrite=r.colorWrite),r.stencilWrite!==void 0&&(p.stencilWrite=r.stencilWrite),r.stencilWriteMask!==void 0&&(p.stencilWriteMask=r.stencilWriteMask),r.stencilFunc!==void 0&&(p.stencilFunc=r.stencilFunc),r.stencilRef!==void 0&&(p.stencilRef=r.stencilRef),r.stencilFuncMask!==void 0&&(p.stencilFuncMask=r.stencilFuncMask),r.stencilFail!==void 0&&(p.stencilFail=r.stencilFail),r.stencilZFail!==void 0&&(p.stencilZFail=r.stencilZFail),r.stencilZPass!==void 0&&(p.stencilZPass=r.stencilZPass),r.wireframe!==void 0&&(p.wireframe=r.wireframe),r.wireframeLinewidth!==void 0&&(p.wireframeLinewidth=r.wireframeLinewidth),r.wireframeLinecap!==void 0&&(p.wireframeLinecap=r.wireframeLinecap),r.wireframeLinejoin!==void 0&&(p.wireframeLinejoin=r.wireframeLinejoin),r.rotation!==void 0&&(p.rotation=r.rotation),r.linewidth!==1&&(p.linewidth=r.linewidth),r.dashSize!==void 0&&(p.dashSize=r.dashSize),r.gapSize!==void 0&&(p.gapSize=r.gapSize),r.scale!==void 0&&(p.scale=r.scale),r.polygonOffset!==void 0&&(p.polygonOffset=r.polygonOffset),r.polygonOffsetFactor!==void 0&&(p.polygonOffsetFactor=r.polygonOffsetFactor),r.polygonOffsetUnits!==void 0&&(p.polygonOffsetUnits=r.polygonOffsetUnits),r.dithering!==void 0&&(p.dithering=r.dithering),r.alphaToCoverage!==void 0&&(p.alphaToCoverage=r.alphaToCoverage),r.premultipliedAlpha!==void 0&&(p.premultipliedAlpha=r.premultipliedAlpha),r.visible!==void 0&&(p.visible=r.visible),r.toneMapped!==void 0&&(p.toneMapped=r.toneMapped),r.userData!==void 0&&(p.userData=r.userData),r.vertexColors!==void 0&&(typeof r.vertexColors=="number"?p.vertexColors=r.vertexColors>0:p.vertexColors=r.vertexColors),r.uniforms!==void 0)for(const w in r.uniforms){const R=r.uniforms[w];switch(p.uniforms[w]={},R.type){case"t":p.uniforms[w].value=h(R.value);break;case"c":p.uniforms[w].value=new si().setHex(R.value);break;case"v2":p.uniforms[w].value=new un().fromArray(R.value);break;case"v3":p.uniforms[w].value=new je().fromArray(R.value);break;case"v4":p.uniforms[w].value=new kr().fromArray(R.value);break;case"m3":p.uniforms[w].value=new Fs().fromArray(R.value);break;case"m4":p.uniforms[w].value=new oi().fromArray(R.value);break;default:p.uniforms[w].value=R.value}}if(r.defines!==void 0&&(p.defines=r.defines),r.vertexShader!==void 0&&(p.vertexShader=r.vertexShader),r.fragmentShader!==void 0&&(p.fragmentShader=r.fragmentShader),r.glslVersion!==void 0&&(p.glslVersion=r.glslVersion),r.extensions!==void 0)for(const w in r.extensions)p.extensions[w]=r.extensions[w];if(r.size!==void 0&&(p.size=r.size),r.sizeAttenuation!==void 0&&(p.sizeAttenuation=r.sizeAttenuation),r.map!==void 0&&(p.map=h(r.map)),r.matcap!==void 0&&(p.matcap=h(r.matcap)),r.alphaMap!==void 0&&(p.alphaMap=h(r.alphaMap)),r.bumpMap!==void 0&&(p.bumpMap=h(r.bumpMap)),r.bumpScale!==void 0&&(p.bumpScale=r.bumpScale),r.normalMap!==void 0&&(p.normalMap=h(r.normalMap)),r.normalMapType!==void 0&&(p.normalMapType=r.normalMapType),r.normalScale!==void 0){let w=r.normalScale;Array.isArray(w)===!1&&(w=[w,w]),p.normalScale=new un().fromArray(w)}return r.displacementMap!==void 0&&(p.displacementMap=h(r.displacementMap)),r.displacementScale!==void 0&&(p.displacementScale=r.displacementScale),r.displacementBias!==void 0&&(p.displacementBias=r.displacementBias),r.roughnessMap!==void 0&&(p.roughnessMap=h(r.roughnessMap)),r.metalnessMap!==void 0&&(p.metalnessMap=h(r.metalnessMap)),r.emissiveMap!==void 0&&(p.emissiveMap=h(r.emissiveMap)),r.emissiveIntensity!==void 0&&(p.emissiveIntensity=r.emissiveIntensity),r.specularMap!==void 0&&(p.specularMap=h(r.specularMap)),r.specularIntensityMap!==void 0&&(p.specularIntensityMap=h(r.specularIntensityMap)),r.specularColorMap!==void 0&&(p.specularColorMap=h(r.specularColorMap)),r.envMap!==void 0&&(p.envMap=h(r.envMap)),r.envMapIntensity!==void 0&&(p.envMapIntensity=r.envMapIntensity),r.reflectivity!==void 0&&(p.reflectivity=r.reflectivity),r.refractionRatio!==void 0&&(p.refractionRatio=r.refractionRatio),r.lightMap!==void 0&&(p.lightMap=h(r.lightMap)),r.lightMapIntensity!==void 0&&(p.lightMapIntensity=r.lightMapIntensity),r.aoMap!==void 0&&(p.aoMap=h(r.aoMap)),r.aoMapIntensity!==void 0&&(p.aoMapIntensity=r.aoMapIntensity),r.gradientMap!==void 0&&(p.gradientMap=h(r.gradientMap)),r.clearcoatMap!==void 0&&(p.clearcoatMap=h(r.clearcoatMap)),r.clearcoatRoughnessMap!==void 0&&(p.clearcoatRoughnessMap=h(r.clearcoatRoughnessMap)),r.clearcoatNormalMap!==void 0&&(p.clearcoatNormalMap=h(r.clearcoatNormalMap)),r.clearcoatNormalScale!==void 0&&(p.clearcoatNormalScale=new un().fromArray(r.clearcoatNormalScale)),r.iridescenceMap!==void 0&&(p.iridescenceMap=h(r.iridescenceMap)),r.iridescenceThicknessMap!==void 0&&(p.iridescenceThicknessMap=h(r.iridescenceThicknessMap)),r.transmissionMap!==void 0&&(p.transmissionMap=h(r.transmissionMap)),r.thicknessMap!==void 0&&(p.thicknessMap=h(r.thicknessMap)),r.sheenColorMap!==void 0&&(p.sheenColorMap=h(r.sheenColorMap)),r.sheenRoughnessMap!==void 0&&(p.sheenRoughnessMap=h(r.sheenRoughnessMap)),p}setTextures(r){return this.textures=r,this}static createMaterialFromType(r){const a={ShadowMaterial:ae,SpriteMaterial:oA,RawShaderMaterial:Me,ShaderMaterial:va,PointsMaterial:js,MeshPhysicalMaterial:lt,MeshStandardMaterial:Ve,MeshPhongMaterial:pt,MeshToonMaterial:wt,MeshNormalMaterial:rn,MeshLambertMaterial:sn,MeshDepthMaterial:nA,MeshDistanceMaterial:iA,MeshBasicMaterial:eu,MeshMatcapMaterial:gn,LineDashedMaterial:Xn,LineBasicMaterial:ko,Material:yo};return new a[r]}}class mC{static decodeText(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let a="";for(let h=0,p=r.length;h<p;h++)a+=String.fromCharCode(r[h]);try{return decodeURIComponent(escape(a))}catch{return a}}static extractUrlBase(r){const a=r.lastIndexOf("/");return a===-1?"./":r.slice(0,a+1)}static resolveURL(r,a){return typeof r!="string"||r===""?"":(/^https?:\/\//i.test(a)&&/^\//.test(r)&&(a=a.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(r)||/^data:.*,.*$/i.test(r)||/^blob:.*$/i.test(r)?r:a+r)}}class iR extends pr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(r){return super.copy(r),this.instanceCount=r.instanceCount,this}toJSON(){const r=super.toJSON();return r.instanceCount=this.instanceCount,r.isInstancedBufferGeometry=!0,r}}class rR extends dl{constructor(r){super(r)}load(r,a,h,p){const w=this,R=new Xu(w.manager);R.setPath(w.path),R.setRequestHeader(w.requestHeader),R.setWithCredentials(w.withCredentials),R.load(r,function(L){try{a(w.parse(JSON.parse(L)))}catch(H){p?p(H):console.error(H),w.manager.itemError(r)}},h,p)}parse(r){const a={},h={};function p(te,le){if(a[le]!==void 0)return a[le];const se=te.interleavedBuffers[le],ve=w(te,se.buffer),De=jc(se.type,ve),Ce=new ls(De,se.stride);return Ce.uuid=se.uuid,a[le]=Ce,Ce}function w(te,le){if(h[le]!==void 0)return h[le];const se=te.arrayBuffers[le],ve=new Uint32Array(se).buffer;return h[le]=ve,ve}const R=r.isInstancedBufferGeometry?new iR:new pr,L=r.data.index;if(L!==void 0){const te=jc(L.type,L.array);R.setIndex(new ts(te,1))}const H=r.data.attributes;for(const te in H){const le=H[te];let oe;if(le.isInterleavedBufferAttribute){const se=p(r.data,le.data);oe=new zu(se,le.itemSize,le.offset,le.normalized)}else{const se=jc(le.type,le.array),ve=le.isInstancedBufferAttribute?ld:ts;oe=new ve(se,le.itemSize,le.normalized)}le.name!==void 0&&(oe.name=le.name),le.usage!==void 0&&oe.setUsage(le.usage),le.updateRange!==void 0&&(oe.updateRange.offset=le.updateRange.offset,oe.updateRange.count=le.updateRange.count),R.setAttribute(te,oe)}const j=r.data.morphAttributes;if(j)for(const te in j){const le=j[te],oe=[];for(let se=0,ve=le.length;se<ve;se++){const De=le[se];let Ce;if(De.isInterleavedBufferAttribute){const Le=p(r.data,De.data);Ce=new zu(Le,De.itemSize,De.offset,De.normalized)}else{const Le=jc(De.type,De.array);Ce=new ts(Le,De.itemSize,De.normalized)}De.name!==void 0&&(Ce.name=De.name),oe.push(Ce)}R.morphAttributes[te]=oe}r.data.morphTargetsRelative&&(R.morphTargetsRelative=!0);const $=r.data.groups||r.data.drawcalls||r.data.offsets;if($!==void 0)for(let te=0,le=$.length;te!==le;++te){const oe=$[te];R.addGroup(oe.start,oe.count,oe.materialIndex)}const Z=r.data.boundingSphere;if(Z!==void 0){const te=new je;Z.center!==void 0&&te.fromArray(Z.center),R.boundingSphere=new Wo(te,Z.radius)}return r.name&&(R.name=r.name),r.userData&&(R.userData=r.userData),R}}class H5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=this,R=this.path===""?mC.extractUrlBase(r):this.path;this.resourcePath=this.resourcePath||R;const L=new Xu(this.manager);L.setPath(this.path),L.setRequestHeader(this.requestHeader),L.setWithCredentials(this.withCredentials),L.load(r,function(H){let j=null;try{j=JSON.parse(H)}catch($){p!==void 0&&p($),console.error("THREE:ObjectLoader: Can't parse "+r+".",$.message);return}const X=j.metadata;if(X===void 0||X.type===void 0||X.type.toLowerCase()==="geometry"){p!==void 0&&p(new Error("THREE.ObjectLoader: Can't load "+r)),console.error("THREE.ObjectLoader: Can't load "+r);return}w.parse(j,a)},h,p)}async loadAsync(r,a){const h=this,p=this.path===""?mC.extractUrlBase(r):this.path;this.resourcePath=this.resourcePath||p;const w=new Xu(this.manager);w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials);const R=await w.loadAsync(r,a),L=JSON.parse(R),H=L.metadata;if(H===void 0||H.type===void 0||H.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+r);return await h.parseAsync(L)}parse(r,a){const h=this.parseAnimations(r.animations),p=this.parseShapes(r.shapes),w=this.parseGeometries(r.geometries,p),R=this.parseImages(r.images,function(){a!==void 0&&a(j)}),L=this.parseTextures(r.textures,R),H=this.parseMaterials(r.materials,L),j=this.parseObject(r.object,w,H,L,h),X=this.parseSkeletons(r.skeletons,j);if(this.bindSkeletons(j,X),a!==void 0){let $=!1;for(const Z in R)if(R[Z].data instanceof HTMLImageElement){$=!0;break}$===!1&&a(j)}return j}async parseAsync(r){const a=this.parseAnimations(r.animations),h=this.parseShapes(r.shapes),p=this.parseGeometries(r.geometries,h),w=await this.parseImagesAsync(r.images),R=this.parseTextures(r.textures,w),L=this.parseMaterials(r.materials,R),H=this.parseObject(r.object,p,L,R,a),j=this.parseSkeletons(r.skeletons,H);return this.bindSkeletons(H,j),H}parseShapes(r){const a={};if(r!==void 0)for(let h=0,p=r.length;h<p;h++){const w=new Au().fromJSON(r[h]);a[w.uuid]=w}return a}parseSkeletons(r,a){const h={},p={};if(a.traverse(function(w){w.isBone&&(p[w.uuid]=w)}),r!==void 0)for(let w=0,R=r.length;w<R;w++){const L=new wm().fromJSON(r[w],p);h[L.uuid]=L}return h}parseGeometries(r,a){const h={};if(r!==void 0){const w=new rR;for(let R=0,L=r.length;R<L;R++){let H;const j=r[R];switch(j.type){case"BufferGeometry":case"InstancedBufferGeometry":H=w.parse(j);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var p=new THREE.LegacyJSONLoader;H=p.parse(j,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:j.type in Q?H=Q[j.type].fromJSON(j,a):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${j.type}"`)}H.uuid=j.uuid,j.name!==void 0&&(H.name=j.name),H.isBufferGeometry===!0&&j.userData!==void 0&&(H.userData=j.userData),h[j.uuid]=H}}return h}parseMaterials(r,a){const h={},p={};if(r!==void 0){const w=new wx;w.setTextures(a);for(let R=0,L=r.length;R<L;R++){const H=r[R];h[H.uuid]===void 0&&(h[H.uuid]=w.parse(H)),p[H.uuid]=h[H.uuid]}}return p}parseAnimations(r){const a={};if(r!==void 0)for(let h=0;h<r.length;h++){const p=r[h],w=OA.parse(p);a[w.uuid]=w}return a}parseImages(r,a){const h=this,p={};let w;function R(H){return h.manager.itemStart(H),w.load(H,function(){h.manager.itemEnd(H)},void 0,function(){h.manager.itemError(H),h.manager.itemEnd(H)})}function L(H){if(typeof H=="string"){const j=H,X=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(j)?j:h.resourcePath+j;return R(X)}else return H.data?{data:jc(H.type,H.data),width:H.width,height:H.height}:null}if(r!==void 0&&r.length>0){const H=new hC(a);w=new FA(H),w.setCrossOrigin(this.crossOrigin);for(let j=0,X=r.length;j<X;j++){const $=r[j],Z=$.url;if(Array.isArray(Z)){const te=[];for(let le=0,oe=Z.length;le<oe;le++){const se=Z[le],ve=L(se);ve!==null&&(ve instanceof HTMLImageElement?te.push(ve):te.push(new ad(ve.data,ve.width,ve.height)))}p[$.uuid]=new qs(te)}else{const te=L($.url);p[$.uuid]=new qs(te)}}}return p}async parseImagesAsync(r){const a=this,h={};let p;async function w(R){if(typeof R=="string"){const L=R,H=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(L)?L:a.resourcePath+L;return await p.loadAsync(H)}else return R.data?{data:jc(R.type,R.data),width:R.width,height:R.height}:null}if(r!==void 0&&r.length>0){p=new FA(this.manager),p.setCrossOrigin(this.crossOrigin);for(let R=0,L=r.length;R<L;R++){const H=r[R],j=H.url;if(Array.isArray(j)){const X=[];for(let $=0,Z=j.length;$<Z;$++){const te=j[$],le=await w(te);le!==null&&(le instanceof HTMLImageElement?X.push(le):X.push(new ad(le.data,le.width,le.height)))}h[H.uuid]=new qs(X)}else{const X=await w(H.url);h[H.uuid]=new qs(X)}}}return h}parseTextures(r,a){function h(w,R){return typeof w=="number"?w:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",w),R[w])}const p={};if(r!==void 0)for(let w=0,R=r.length;w<R;w++){const L=r[w];L.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',L.uuid),a[L.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",L.image);const H=a[L.image],j=H.data;let X;Array.isArray(j)?(X=new Xo,j.length===6&&(X.needsUpdate=!0)):(j&&j.data?X=new ad:X=new vs,j&&(X.needsUpdate=!0)),X.source=H,X.uuid=L.uuid,L.name!==void 0&&(X.name=L.name),L.mapping!==void 0&&(X.mapping=h(L.mapping,V5)),L.offset!==void 0&&X.offset.fromArray(L.offset),L.repeat!==void 0&&X.repeat.fromArray(L.repeat),L.center!==void 0&&X.center.fromArray(L.center),L.rotation!==void 0&&(X.rotation=L.rotation),L.wrap!==void 0&&(X.wrapS=h(L.wrap[0],sR),X.wrapT=h(L.wrap[1],sR)),L.format!==void 0&&(X.format=L.format),L.type!==void 0&&(X.type=L.type),L.encoding!==void 0&&(X.encoding=L.encoding),L.minFilter!==void 0&&(X.minFilter=h(L.minFilter,oR)),L.magFilter!==void 0&&(X.magFilter=h(L.magFilter,oR)),L.anisotropy!==void 0&&(X.anisotropy=L.anisotropy),L.flipY!==void 0&&(X.flipY=L.flipY),L.premultiplyAlpha!==void 0&&(X.premultiplyAlpha=L.premultiplyAlpha),L.unpackAlignment!==void 0&&(X.unpackAlignment=L.unpackAlignment),L.userData!==void 0&&(X.userData=L.userData),p[L.uuid]=X}return p}parseObject(r,a,h,p,w){let R;function L(Z){return a[Z]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Z),a[Z]}function H(Z){if(Z!==void 0){if(Array.isArray(Z)){const te=[];for(let le=0,oe=Z.length;le<oe;le++){const se=Z[le];h[se]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",se),te.push(h[se])}return te}return h[Z]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Z),h[Z]}}function j(Z){return p[Z]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Z),p[Z]}let X,$;switch(r.type){case"Scene":R=new ps,r.background!==void 0&&(Number.isInteger(r.background)?R.background=new si(r.background):R.background=j(r.background)),r.environment!==void 0&&(R.environment=j(r.environment)),r.fog!==void 0&&(r.fog.type==="Fog"?R.fog=new Gu(r.fog.color,r.fog.near,r.fog.far):r.fog.type==="FogExp2"&&(R.fog=new xf(r.fog.color,r.fog.density))),r.backgroundBlurriness!==void 0&&(R.backgroundBlurriness=r.backgroundBlurriness);break;case"PerspectiveCamera":R=new Vs(r.fov,r.aspect,r.near,r.far),r.focus!==void 0&&(R.focus=r.focus),r.zoom!==void 0&&(R.zoom=r.zoom),r.filmGauge!==void 0&&(R.filmGauge=r.filmGauge),r.filmOffset!==void 0&&(R.filmOffset=r.filmOffset),r.view!==void 0&&(R.view=Object.assign({},r.view));break;case"OrthographicCamera":R=new kl(r.left,r.right,r.top,r.bottom,r.near,r.far),r.zoom!==void 0&&(R.zoom=r.zoom),r.view!==void 0&&(R.view=Object.assign({},r.view));break;case"AmbientLight":R=new eR(r.color,r.intensity);break;case"DirectionalLight":R=new ZI(r.color,r.intensity);break;case"PointLight":R=new JI(r.color,r.intensity,r.distance,r.decay);break;case"RectAreaLight":R=new tR(r.color,r.intensity,r.width,r.height);break;case"SpotLight":R=new qI(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);break;case"HemisphereLight":R=new KI(r.color,r.groundColor,r.intensity);break;case"LightProbe":R=new bx().fromJSON(r);break;case"SkinnedMesh":X=L(r.geometry),$=H(r.material),R=new tx(X,$),r.bindMode!==void 0&&(R.bindMode=r.bindMode),r.bindMatrix!==void 0&&R.bindMatrix.fromArray(r.bindMatrix),r.skeleton!==void 0&&(R.skeleton=r.skeleton);break;case"Mesh":X=L(r.geometry),$=H(r.material),R=new as(X,$);break;case"InstancedMesh":X=L(r.geometry),$=H(r.material);const Z=r.count,te=r.instanceMatrix,le=r.instanceColor;R=new rx(X,$,Z),R.instanceMatrix=new ld(new Float32Array(te.array),16),le!==void 0&&(R.instanceColor=new ld(new Float32Array(le.array),le.itemSize));break;case"LOD":R=new aA;break;case"Line":R=new mu(L(r.geometry),H(r.material));break;case"LineLoop":R=new cx(L(r.geometry),H(r.material));break;case"LineSegments":R=new Gl(L(r.geometry),H(r.material));break;case"PointCloud":case"Points":R=new fA(L(r.geometry),H(r.material));break;case"Sprite":R=new Z1(H(r.material));break;case"Group":R=new Ea;break;case"Bone":R=new Ur;break;default:R=new Or}if(R.uuid=r.uuid,r.name!==void 0&&(R.name=r.name),r.matrix!==void 0?(R.matrix.fromArray(r.matrix),r.matrixAutoUpdate!==void 0&&(R.matrixAutoUpdate=r.matrixAutoUpdate),R.matrixAutoUpdate&&R.matrix.decompose(R.position,R.quaternion,R.scale)):(r.position!==void 0&&R.position.fromArray(r.position),r.rotation!==void 0&&R.rotation.fromArray(r.rotation),r.quaternion!==void 0&&R.quaternion.fromArray(r.quaternion),r.scale!==void 0&&R.scale.fromArray(r.scale)),r.castShadow!==void 0&&(R.castShadow=r.castShadow),r.receiveShadow!==void 0&&(R.receiveShadow=r.receiveShadow),r.shadow&&(r.shadow.bias!==void 0&&(R.shadow.bias=r.shadow.bias),r.shadow.normalBias!==void 0&&(R.shadow.normalBias=r.shadow.normalBias),r.shadow.radius!==void 0&&(R.shadow.radius=r.shadow.radius),r.shadow.mapSize!==void 0&&R.shadow.mapSize.fromArray(r.shadow.mapSize),r.shadow.camera!==void 0&&(R.shadow.camera=this.parseObject(r.shadow.camera))),r.visible!==void 0&&(R.visible=r.visible),r.frustumCulled!==void 0&&(R.frustumCulled=r.frustumCulled),r.renderOrder!==void 0&&(R.renderOrder=r.renderOrder),r.userData!==void 0&&(R.userData=r.userData),r.layers!==void 0&&(R.layers.mask=r.layers),r.children!==void 0){const Z=r.children;for(let te=0;te<Z.length;te++)R.add(this.parseObject(Z[te],a,h,p,w))}if(r.animations!==void 0){const Z=r.animations;for(let te=0;te<Z.length;te++){const le=Z[te];R.animations.push(w[le])}}if(r.type==="LOD"){r.autoUpdate!==void 0&&(R.autoUpdate=r.autoUpdate);const Z=r.levels;for(let te=0;te<Z.length;te++){const le=Z[te],oe=R.getObjectByProperty("uuid",le.object);oe!==void 0&&R.addLevel(oe,le.distance,le.hysteresis)}}return R}bindSkeletons(r,a){Object.keys(a).length!==0&&r.traverse(function(h){if(h.isSkinnedMesh===!0&&h.skeleton!==void 0){const p=a[h.skeleton];p===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",h.skeleton):h.bind(p,h.bindMatrix)}})}}const V5={UVMapping:_e,CubeReflectionMapping:Pe,CubeRefractionMapping:Te,EquirectangularReflectionMapping:He,EquirectangularRefractionMapping:Fe,CubeUVReflectionMapping:Ue},sR={RepeatWrapping:Ae,ClampToEdgeWrapping:Xe,MirroredRepeatWrapping:dt},oR={NearestFilter:ue,NearestMipmapNearestFilter:q,NearestMipmapLinearFilter:ke,LinearFilter:qe,LinearMipmapNearestFilter:Qe,LinearMipmapLinearFilter:Ot};class j5 extends dl{constructor(r){super(r),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(r){return this.options=r,this}load(r,a,h,p){r===void 0&&(r=""),this.path!==void 0&&(r=this.path+r),r=this.manager.resolveURL(r);const w=this,R=Hf.get(r);if(R!==void 0)return w.manager.itemStart(r),setTimeout(function(){a&&a(R),w.manager.itemEnd(r)},0),R;const L={};L.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",L.headers=this.requestHeader,fetch(r,L).then(function(H){return H.blob()}).then(function(H){return createImageBitmap(H,Object.assign(w.options,{colorSpaceConversion:"none"}))}).then(function(H){Hf.add(r,H),a&&a(H),w.manager.itemEnd(r)}).catch(function(H){p&&p(H),w.manager.itemError(r),w.manager.itemEnd(r)}),w.manager.itemStart(r)}}let Cx;class gC{static getContext(){return Cx===void 0&&(Cx=new(window.AudioContext||window.webkitAudioContext)),Cx}static setContext(r){Cx=r}}class Q5 extends dl{constructor(r){super(r)}load(r,a,h,p){const w=this,R=new Xu(this.manager);R.setResponseType("arraybuffer"),R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(r,function(L){try{const H=L.slice(0);gC.getContext().decodeAudioData(H,function(X){a(X)})}catch(H){p?p(H):console.error(H),w.manager.itemError(r)}},h,p)}}class W5 extends bx{constructor(r,a,h=1){super(void 0,h),this.isHemisphereLightProbe=!0;const p=new si().set(r),w=new si().set(a),R=new je(p.r,p.g,p.b),L=new je(w.r,w.g,w.b),H=Math.sqrt(Math.PI),j=H*Math.sqrt(.75);this.sh.coefficients[0].copy(R).add(L).multiplyScalar(H),this.sh.coefficients[1].copy(R).sub(L).multiplyScalar(j)}}class K5 extends bx{constructor(r,a=1){super(void 0,a),this.isAmbientLightProbe=!0;const h=new si().set(r);this.sh.coefficients[0].set(h.r,h.g,h.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const aR=new oi,lR=new oi,Vf=new oi;class X5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(r){const a=this._cache;if(a.focus!==r.focus||a.fov!==r.fov||a.aspect!==r.aspect*this.aspect||a.near!==r.near||a.far!==r.far||a.zoom!==r.zoom||a.eyeSep!==this.eyeSep){a.focus=r.focus,a.fov=r.fov,a.aspect=r.aspect*this.aspect,a.near=r.near,a.far=r.far,a.zoom=r.zoom,a.eyeSep=this.eyeSep,Vf.copy(r.projectionMatrix);const p=a.eyeSep/2,w=p*a.near/a.focus,R=a.near*Math.tan(Fa*a.fov*.5)/a.zoom;let L,H;lR.elements[12]=-p,aR.elements[12]=p,L=-R*a.aspect+w,H=R*a.aspect+w,Vf.elements[0]=2*a.near/(H-L),Vf.elements[8]=(H+L)/(H-L),this.cameraL.projectionMatrix.copy(Vf),L=-R*a.aspect-w,H=R*a.aspect-w,Vf.elements[0]=2*a.near/(H-L),Vf.elements[8]=(H+L)/(H-L),this.cameraR.projectionMatrix.copy(Vf)}this.cameraL.matrixWorld.copy(r.matrixWorld).multiply(lR),this.cameraR.matrixWorld.copy(r.matrixWorld).multiply(aR)}}class cR{constructor(r=!0){this.autoStart=r,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const a=uR();r=(a-this.oldTime)/1e3,this.oldTime=a,this.elapsedTime+=r}return r}}function uR(){return(typeof performance>"u"?Date:performance).now()}const jf=new je,hR=new Nn,Y5=new je,Qf=new je;class q5 extends Or{constructor(){super(),this.type="AudioListener",this.context=gC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(r){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=r,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(r){return this.gain.gain.setTargetAtTime(r,this.context.currentTime,.01),this}updateMatrixWorld(r){super.updateMatrixWorld(r);const a=this.context.listener,h=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jf,hR,Y5),Qf.set(0,0,-1).applyQuaternion(hR),a.positionX){const p=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(jf.x,p),a.positionY.linearRampToValueAtTime(jf.y,p),a.positionZ.linearRampToValueAtTime(jf.z,p),a.forwardX.linearRampToValueAtTime(Qf.x,p),a.forwardY.linearRampToValueAtTime(Qf.y,p),a.forwardZ.linearRampToValueAtTime(Qf.z,p),a.upX.linearRampToValueAtTime(h.x,p),a.upY.linearRampToValueAtTime(h.y,p),a.upZ.linearRampToValueAtTime(h.z,p)}else a.setPosition(jf.x,jf.y,jf.z),a.setOrientation(Qf.x,Qf.y,Qf.z,h.x,h.y,h.z)}}class dR extends Or{constructor(r){super(),this.type="Audio",this.listener=r,this.context=r.context,this.gain=this.context.createGain(),this.gain.connect(r.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(r){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=r,this.connect(),this}setMediaElementSource(r){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(r),this.connect(),this}setMediaStreamSource(r){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(r),this.connect(),this}setBuffer(r){return this.buffer=r,this.sourceType="buffer",this.autoplay&&this.play(),this}play(r=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+r;const a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let r=1,a=this.filters.length;r<a;r++)this.filters[r-1].connect(this.filters[r]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let r=1,a=this.filters.length;r<a;r++)this.filters[r-1].disconnect(this.filters[r]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(r){return r||(r=[]),this._connected===!0?(this.disconnect(),this.filters=r.slice(),this.connect()):this.filters=r.slice(),this}setDetune(r){if(this.detune=r,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(r){return this.setFilters(r?[r]:[])}setPlaybackRate(r){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=r,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(r){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=r,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(r){return this.loopStart=r,this}setLoopEnd(r){return this.loopEnd=r,this}getVolume(){return this.gain.gain.value}setVolume(r){return this.gain.gain.setTargetAtTime(r,this.context.currentTime,.01),this}}const Wf=new je,fR=new Nn,$5=new je,Kf=new je;class J5 extends dR{constructor(r){super(r),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(r){return this.panner.refDistance=r,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(r){return this.panner.rolloffFactor=r,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(r){return this.panner.distanceModel=r,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(r){return this.panner.maxDistance=r,this}setDirectionalCone(r,a,h){return this.panner.coneInnerAngle=r,this.panner.coneOuterAngle=a,this.panner.coneOuterGain=h,this}updateMatrixWorld(r){if(super.updateMatrixWorld(r),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wf,fR,$5),Kf.set(0,0,1).applyQuaternion(fR);const a=this.panner;if(a.positionX){const h=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(Wf.x,h),a.positionY.linearRampToValueAtTime(Wf.y,h),a.positionZ.linearRampToValueAtTime(Wf.z,h),a.orientationX.linearRampToValueAtTime(Kf.x,h),a.orientationY.linearRampToValueAtTime(Kf.y,h),a.orientationZ.linearRampToValueAtTime(Kf.z,h)}else a.setPosition(Wf.x,Wf.y,Wf.z),a.setOrientation(Kf.x,Kf.y,Kf.z)}}class Z5{constructor(r,a=2048){this.analyser=r.context.createAnalyser(),this.analyser.fftSize=a,this.data=new Uint8Array(this.analyser.frequencyBinCount),r.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let r=0;const a=this.getFrequencyData();for(let h=0;h<a.length;h++)r+=a[h];return r/a.length}}class pR{constructor(r,a,h){this.binding=r,this.valueSize=h;let p,w,R;switch(a){case"quaternion":p=this._slerp,w=this._slerpAdditive,R=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(h*6),this._workIndex=5;break;case"string":case"bool":p=this._select,w=this._select,R=this._setAdditiveIdentityOther,this.buffer=new Array(h*5);break;default:p=this._lerp,w=this._lerpAdditive,R=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(h*5)}this._mixBufferRegion=p,this._mixBufferRegionAdditive=w,this._setIdentity=R,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(r,a){const h=this.buffer,p=this.valueSize,w=r*p+p;let R=this.cumulativeWeight;if(R===0){for(let L=0;L!==p;++L)h[w+L]=h[L];R=a}else{R+=a;const L=a/R;this._mixBufferRegion(h,w,0,L,p)}this.cumulativeWeight=R}accumulateAdditive(r){const a=this.buffer,h=this.valueSize,p=h*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(a,p,0,r,h),this.cumulativeWeightAdditive+=r}apply(r){const a=this.valueSize,h=this.buffer,p=r*a+a,w=this.cumulativeWeight,R=this.cumulativeWeightAdditive,L=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,w<1){const H=a*this._origIndex;this._mixBufferRegion(h,p,H,1-w,a)}R>0&&this._mixBufferRegionAdditive(h,p,this._addIndex*a,1,a);for(let H=a,j=a+a;H!==j;++H)if(h[H]!==h[H+a]){L.setValue(h,p);break}}saveOriginalState(){const r=this.binding,a=this.buffer,h=this.valueSize,p=h*this._origIndex;r.getValue(a,p);for(let w=h,R=p;w!==R;++w)a[w]=a[p+w%h];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const r=this.valueSize*3;this.binding.setValue(this.buffer,r)}_setAdditiveIdentityNumeric(){const r=this._addIndex*this.valueSize,a=r+this.valueSize;for(let h=r;h<a;h++)this.buffer[h]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const r=this._origIndex*this.valueSize,a=this._addIndex*this.valueSize;for(let h=0;h<this.valueSize;h++)this.buffer[a+h]=this.buffer[r+h]}_select(r,a,h,p,w){if(p>=.5)for(let R=0;R!==w;++R)r[a+R]=r[h+R]}_slerp(r,a,h,p){Nn.slerpFlat(r,a,r,a,r,h,p)}_slerpAdditive(r,a,h,p,w){const R=this._workIndex*w;Nn.multiplyQuaternionsFlat(r,R,r,a,r,h),Nn.slerpFlat(r,a,r,a,r,R,p)}_lerp(r,a,h,p,w){const R=1-p;for(let L=0;L!==w;++L){const H=a+L;r[H]=r[H]*R+r[h+L]*p}}_lerpAdditive(r,a,h,p,w){for(let R=0;R!==w;++R){const L=a+R;r[L]=r[L]+r[h+R]*p}}}const AC="\\[\\]\\.:\\/",eN=new RegExp("["+AC+"]","g"),vC="[^"+AC+"]",tN="[^"+AC.replace("\\.","")+"]",nN=/((?:WC+[\/:])*)/.source.replace("WC",vC),iN=/(WCOD+)?/.source.replace("WCOD",tN),rN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",vC),sN=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",vC),oN=new RegExp("^"+nN+iN+rN+sN+"$"),aN=["material","materials","bones","map"];class lN{constructor(r,a,h){const p=h||Vr.parseTrackName(a);this._targetGroup=r,this._bindings=r.subscribe_(a,p)}getValue(r,a){this.bind();const h=this._targetGroup.nCachedObjects_,p=this._bindings[h];p!==void 0&&p.getValue(r,a)}setValue(r,a){const h=this._bindings;for(let p=this._targetGroup.nCachedObjects_,w=h.length;p!==w;++p)h[p].setValue(r,a)}bind(){const r=this._bindings;for(let a=this._targetGroup.nCachedObjects_,h=r.length;a!==h;++a)r[a].bind()}unbind(){const r=this._bindings;for(let a=this._targetGroup.nCachedObjects_,h=r.length;a!==h;++a)r[a].unbind()}}class Vr{constructor(r,a,h){this.path=a,this.parsedPath=h||Vr.parseTrackName(a),this.node=Vr.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,a,h){return r&&r.isAnimationObjectGroup?new Vr.Composite(r,a,h):new Vr(r,a,h)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(eN,"")}static parseTrackName(r){const a=oN.exec(r);if(a===null)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const h={nodeName:a[2],objectName:a[3],objectIndex:a[4],propertyName:a[5],propertyIndex:a[6]},p=h.nodeName&&h.nodeName.lastIndexOf(".");if(p!==void 0&&p!==-1){const w=h.nodeName.substring(p+1);aN.indexOf(w)!==-1&&(h.nodeName=h.nodeName.substring(0,p),h.objectName=w)}if(h.propertyName===null||h.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return h}static findNode(r,a){if(a===void 0||a===""||a==="."||a===-1||a===r.name||a===r.uuid)return r;if(r.skeleton){const h=r.skeleton.getBoneByName(a);if(h!==void 0)return h}if(r.children){const h=function(w){for(let R=0;R<w.length;R++){const L=w[R];if(L.name===a||L.uuid===a)return L;const H=h(L.children);if(H)return H}return null},p=h(r.children);if(p)return p}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,a){r[a]=this.targetObject[this.propertyName]}_getValue_array(r,a){const h=this.resolvedProperty;for(let p=0,w=h.length;p!==w;++p)r[a++]=h[p]}_getValue_arrayElement(r,a){r[a]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,a){this.resolvedProperty.toArray(r,a)}_setValue_direct(r,a){this.targetObject[this.propertyName]=r[a]}_setValue_direct_setNeedsUpdate(r,a){this.targetObject[this.propertyName]=r[a],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,a){this.targetObject[this.propertyName]=r[a],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,a){const h=this.resolvedProperty;for(let p=0,w=h.length;p!==w;++p)h[p]=r[a++]}_setValue_array_setNeedsUpdate(r,a){const h=this.resolvedProperty;for(let p=0,w=h.length;p!==w;++p)h[p]=r[a++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,a){const h=this.resolvedProperty;for(let p=0,w=h.length;p!==w;++p)h[p]=r[a++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,a){this.resolvedProperty[this.propertyIndex]=r[a]}_setValue_arrayElement_setNeedsUpdate(r,a){this.resolvedProperty[this.propertyIndex]=r[a],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,a){this.resolvedProperty[this.propertyIndex]=r[a],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,a){this.resolvedProperty.fromArray(r,a)}_setValue_fromArray_setNeedsUpdate(r,a){this.resolvedProperty.fromArray(r,a),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,a){this.resolvedProperty.fromArray(r,a),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,a){this.bind(),this.getValue(r,a)}_setValue_unbound(r,a){this.bind(),this.setValue(r,a)}bind(){let r=this.node;const a=this.parsedPath,h=a.objectName,p=a.propertyName;let w=a.propertyIndex;if(r||(r=Vr.findNode(this.rootNode,a.nodeName)||this.rootNode,this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(h){let j=a.objectIndex;switch(h){case"materials":if(!r.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!r.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}r=r.material.materials;break;case"bones":if(!r.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}r=r.skeleton.bones;for(let X=0;X<r.length;X++)if(r[X].name===j){j=X;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!r.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}r=r.material.map;break;default:if(r[h]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}r=r[h]}if(j!==void 0){if(r[j]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);return}r=r[j]}}const R=r[p];if(R===void 0){const j=a.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+j+"."+p+" but it wasn't found.",r);return}let L=this.Versioning.None;this.targetObject=r,r.needsUpdate!==void 0?L=this.Versioning.NeedsUpdate:r.matrixWorldNeedsUpdate!==void 0&&(L=this.Versioning.MatrixWorldNeedsUpdate);let H=this.BindingType.Direct;if(w!==void 0){if(p==="morphTargetInfluences"){if(!r.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!r.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}r.morphTargetDictionary[w]!==void 0&&(w=r.morphTargetDictionary[w])}H=this.BindingType.ArrayElement,this.resolvedProperty=R,this.propertyIndex=w}else R.fromArray!==void 0&&R.toArray!==void 0?(H=this.BindingType.HasFromToArray,this.resolvedProperty=R):Array.isArray(R)?(H=this.BindingType.EntireArray,this.resolvedProperty=R):this.propertyName=p;this.getValue=this.GetterByBindingType[H],this.setValue=this.SetterByBindingTypeAndVersioning[H][L]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vr.Composite=lN,Vr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Vr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Vr.prototype.GetterByBindingType=[Vr.prototype._getValue_direct,Vr.prototype._getValue_array,Vr.prototype._getValue_arrayElement,Vr.prototype._getValue_toArray],Vr.prototype.SetterByBindingTypeAndVersioning=[[Vr.prototype._setValue_direct,Vr.prototype._setValue_direct_setNeedsUpdate,Vr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vr.prototype._setValue_array,Vr.prototype._setValue_array_setNeedsUpdate,Vr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vr.prototype._setValue_arrayElement,Vr.prototype._setValue_arrayElement_setNeedsUpdate,Vr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vr.prototype._setValue_fromArray,Vr.prototype._setValue_fromArray_setNeedsUpdate,Vr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class cN{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const r={};this._indicesByUUID=r;for(let h=0,p=arguments.length;h!==p;++h)r[arguments[h].uuid]=h;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}add(){const r=this._objects,a=this._indicesByUUID,h=this._paths,p=this._parsedPaths,w=this._bindings,R=w.length;let L,H=r.length,j=this.nCachedObjects_;for(let X=0,$=arguments.length;X!==$;++X){const Z=arguments[X],te=Z.uuid;let le=a[te];if(le===void 0){le=H++,a[te]=le,r.push(Z);for(let oe=0,se=R;oe!==se;++oe)w[oe].push(new Vr(Z,h[oe],p[oe]))}else if(le<j){L=r[le];const oe=--j,se=r[oe];a[se.uuid]=le,r[le]=se,a[te]=oe,r[oe]=Z;for(let ve=0,De=R;ve!==De;++ve){const Ce=w[ve],Le=Ce[oe];let ze=Ce[le];Ce[le]=Le,ze===void 0&&(ze=new Vr(Z,h[ve],p[ve])),Ce[oe]=ze}}else r[le]!==L&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=j}remove(){const r=this._objects,a=this._indicesByUUID,h=this._bindings,p=h.length;let w=this.nCachedObjects_;for(let R=0,L=arguments.length;R!==L;++R){const H=arguments[R],j=H.uuid,X=a[j];if(X!==void 0&&X>=w){const $=w++,Z=r[$];a[Z.uuid]=X,r[X]=Z,a[j]=$,r[$]=H;for(let te=0,le=p;te!==le;++te){const oe=h[te],se=oe[$],ve=oe[X];oe[X]=se,oe[$]=ve}}}this.nCachedObjects_=w}uncache(){const r=this._objects,a=this._indicesByUUID,h=this._bindings,p=h.length;let w=this.nCachedObjects_,R=r.length;for(let L=0,H=arguments.length;L!==H;++L){const j=arguments[L],X=j.uuid,$=a[X];if($!==void 0)if(delete a[X],$<w){const Z=--w,te=r[Z],le=--R,oe=r[le];a[te.uuid]=$,r[$]=te,a[oe.uuid]=Z,r[Z]=oe,r.pop();for(let se=0,ve=p;se!==ve;++se){const De=h[se],Ce=De[Z],Le=De[le];De[$]=Ce,De[Z]=Le,De.pop()}}else{const Z=--R,te=r[Z];Z>0&&(a[te.uuid]=$),r[$]=te,r.pop();for(let le=0,oe=p;le!==oe;++le){const se=h[le];se[$]=se[Z],se.pop()}}}this.nCachedObjects_=w}subscribe_(r,a){const h=this._bindingsIndicesByPath;let p=h[r];const w=this._bindings;if(p!==void 0)return w[p];const R=this._paths,L=this._parsedPaths,H=this._objects,j=H.length,X=this.nCachedObjects_,$=new Array(j);p=w.length,h[r]=p,R.push(r),L.push(a),w.push($);for(let Z=X,te=H.length;Z!==te;++Z){const le=H[Z];$[Z]=new Vr(le,r,a)}return $}unsubscribe_(r){const a=this._bindingsIndicesByPath,h=a[r];if(h!==void 0){const p=this._paths,w=this._parsedPaths,R=this._bindings,L=R.length-1,H=R[L],j=r[L];a[j]=h,R[h]=H,R.pop(),w[h]=w[L],w.pop(),p[h]=p[L],p.pop()}}}class uN{constructor(r,a,h=null,p=a.blendMode){this._mixer=r,this._clip=a,this._localRoot=h,this.blendMode=p;const w=a.tracks,R=w.length,L=new Array(R),H={endingStart:Ee,endingEnd:Ee};for(let j=0;j!==R;++j){const X=w[j].createInterpolant(null);L[j]=X,X.settings=H}this._interpolantSettings=H,this._interpolants=L,this._propertyBindings=new Array(R),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(r){return this._startTime=r,this}setLoop(r,a){return this.loop=r,this.repetitions=a,this}setEffectiveWeight(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(r){return this._scheduleFading(r,0,1)}fadeOut(r){return this._scheduleFading(r,1,0)}crossFadeFrom(r,a,h){if(r.fadeOut(a),this.fadeIn(a),h){const p=this._clip.duration,w=r._clip.duration,R=w/p,L=p/w;r.warp(1,R,a),this.warp(L,1,a)}return this}crossFadeTo(r,a,h){return r.crossFadeFrom(this,a,h)}stopFading(){const r=this._weightInterpolant;return r!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this}setEffectiveTimeScale(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(r){return this.timeScale=this._clip.duration/r,this.stopWarping()}syncWith(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()}halt(r){return this.warp(this._effectiveTimeScale,0,r)}warp(r,a,h){const p=this._mixer,w=p.time,R=this.timeScale;let L=this._timeScaleInterpolant;L===null&&(L=p._lendControlInterpolant(),this._timeScaleInterpolant=L);const H=L.parameterPositions,j=L.sampleValues;return H[0]=w,H[1]=w+h,j[0]=r/R,j[1]=a/R,this}stopWarping(){const r=this._timeScaleInterpolant;return r!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(r,a,h,p){if(!this.enabled){this._updateWeight(r);return}const w=this._startTime;if(w!==null){const H=(r-w)*h;H<0||h===0?a=0:(this._startTime=null,a=h*H)}a*=this._updateTimeScale(r);const R=this._updateTime(a),L=this._updateWeight(r);if(L>0){const H=this._interpolants,j=this._propertyBindings;switch(this.blendMode){case en:for(let X=0,$=H.length;X!==$;++X)H[X].evaluate(R),j[X].accumulateAdditive(L);break;case zt:default:for(let X=0,$=H.length;X!==$;++X)H[X].evaluate(R),j[X].accumulate(p,L)}}}_updateWeight(r){let a=0;if(this.enabled){a=this.weight;const h=this._weightInterpolant;if(h!==null){const p=h.evaluate(r)[0];a*=p,r>h.parameterPositions[1]&&(this.stopFading(),p===0&&(this.enabled=!1))}}return this._effectiveWeight=a,a}_updateTimeScale(r){let a=0;if(!this.paused){a=this.timeScale;const h=this._timeScaleInterpolant;if(h!==null){const p=h.evaluate(r)[0];a*=p,r>h.parameterPositions[1]&&(this.stopWarping(),a===0?this.paused=!0:this.timeScale=a)}}return this._effectiveTimeScale=a,a}_updateTime(r){const a=this._clip.duration,h=this.loop;let p=this.time+r,w=this._loopCount;const R=h===de;if(r===0)return w===-1?p:R&&(w&1)===1?a-p:p;if(h===et){w===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(p>=a)p=a;else if(p<0)p=0;else{this.time=p;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=p,this._mixer.dispatchEvent({type:"finished",action:this,direction:r<0?-1:1})}}else{if(w===-1&&(r>=0?(w=0,this._setEndings(!0,this.repetitions===0,R)):this._setEndings(this.repetitions===0,!0,R)),p>=a||p<0){const L=Math.floor(p/a);p-=a*L,w+=Math.abs(L);const H=this.repetitions-w;if(H<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,p=r>0?a:0,this.time=p,this._mixer.dispatchEvent({type:"finished",action:this,direction:r>0?1:-1});else{if(H===1){const j=r<0;this._setEndings(j,!j,R)}else this._setEndings(!1,!1,R);this._loopCount=w,this.time=p,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:L})}}else this.time=p;if(R&&(w&1)===1)return a-p}return p}_setEndings(r,a,h){const p=this._interpolantSettings;h?(p.endingStart=ct,p.endingEnd=ct):(r?p.endingStart=this.zeroSlopeAtStart?ct:Ee:p.endingStart=St,a?p.endingEnd=this.zeroSlopeAtEnd?ct:Ee:p.endingEnd=St)}_scheduleFading(r,a,h){const p=this._mixer,w=p.time;let R=this._weightInterpolant;R===null&&(R=p._lendControlInterpolant(),this._weightInterpolant=R);const L=R.parameterPositions,H=R.sampleValues;return L[0]=w,H[0]=a,L[1]=w+r,H[1]=h,this}}const hN=new Float32Array(1);class dN extends Do{constructor(r){super(),this._root=r,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(r,a){const h=r._localRoot||this._root,p=r._clip.tracks,w=p.length,R=r._propertyBindings,L=r._interpolants,H=h.uuid,j=this._bindingsByRootAndName;let X=j[H];X===void 0&&(X={},j[H]=X);for(let $=0;$!==w;++$){const Z=p[$],te=Z.name;let le=X[te];if(le!==void 0)++le.referenceCount,R[$]=le;else{if(le=R[$],le!==void 0){le._cacheIndex===null&&(++le.referenceCount,this._addInactiveBinding(le,H,te));continue}const oe=a&&a._propertyBindings[$].binding.parsedPath;le=new pR(Vr.create(h,te,oe),Z.ValueTypeName,Z.getValueSize()),++le.referenceCount,this._addInactiveBinding(le,H,te),R[$]=le}L[$].resultBuffer=le.buffer}}_activateAction(r){if(!this._isActiveAction(r)){if(r._cacheIndex===null){const h=(r._localRoot||this._root).uuid,p=r._clip.uuid,w=this._actionsByClip[p];this._bindAction(r,w&&w.knownActions[0]),this._addInactiveAction(r,p,h)}const a=r._propertyBindings;for(let h=0,p=a.length;h!==p;++h){const w=a[h];w.useCount++===0&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(r)}}_deactivateAction(r){if(this._isActiveAction(r)){const a=r._propertyBindings;for(let h=0,p=a.length;h!==p;++h){const w=a[h];--w.useCount===0&&(w.restoreOriginalState(),this._takeBackBinding(w))}this._takeBackAction(r)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const r=this;this.stats={actions:{get total(){return r._actions.length},get inUse(){return r._nActiveActions}},bindings:{get total(){return r._bindings.length},get inUse(){return r._nActiveBindings}},controlInterpolants:{get total(){return r._controlInterpolants.length},get inUse(){return r._nActiveControlInterpolants}}}}_isActiveAction(r){const a=r._cacheIndex;return a!==null&&a<this._nActiveActions}_addInactiveAction(r,a,h){const p=this._actions,w=this._actionsByClip;let R=w[a];if(R===void 0)R={knownActions:[r],actionByRoot:{}},r._byClipCacheIndex=0,w[a]=R;else{const L=R.knownActions;r._byClipCacheIndex=L.length,L.push(r)}r._cacheIndex=p.length,p.push(r),R.actionByRoot[h]=r}_removeInactiveAction(r){const a=this._actions,h=a[a.length-1],p=r._cacheIndex;h._cacheIndex=p,a[p]=h,a.pop(),r._cacheIndex=null;const w=r._clip.uuid,R=this._actionsByClip,L=R[w],H=L.knownActions,j=H[H.length-1],X=r._byClipCacheIndex;j._byClipCacheIndex=X,H[X]=j,H.pop(),r._byClipCacheIndex=null;const $=L.actionByRoot,Z=(r._localRoot||this._root).uuid;delete $[Z],H.length===0&&delete R[w],this._removeInactiveBindingsForAction(r)}_removeInactiveBindingsForAction(r){const a=r._propertyBindings;for(let h=0,p=a.length;h!==p;++h){const w=a[h];--w.referenceCount===0&&this._removeInactiveBinding(w)}}_lendAction(r){const a=this._actions,h=r._cacheIndex,p=this._nActiveActions++,w=a[p];r._cacheIndex=p,a[p]=r,w._cacheIndex=h,a[h]=w}_takeBackAction(r){const a=this._actions,h=r._cacheIndex,p=--this._nActiveActions,w=a[p];r._cacheIndex=p,a[p]=r,w._cacheIndex=h,a[h]=w}_addInactiveBinding(r,a,h){const p=this._bindingsByRootAndName,w=this._bindings;let R=p[a];R===void 0&&(R={},p[a]=R),R[h]=r,r._cacheIndex=w.length,w.push(r)}_removeInactiveBinding(r){const a=this._bindings,h=r.binding,p=h.rootNode.uuid,w=h.path,R=this._bindingsByRootAndName,L=R[p],H=a[a.length-1],j=r._cacheIndex;H._cacheIndex=j,a[j]=H,a.pop(),delete L[w],Object.keys(L).length===0&&delete R[p]}_lendBinding(r){const a=this._bindings,h=r._cacheIndex,p=this._nActiveBindings++,w=a[p];r._cacheIndex=p,a[p]=r,w._cacheIndex=h,a[h]=w}_takeBackBinding(r){const a=this._bindings,h=r._cacheIndex,p=--this._nActiveBindings,w=a[p];r._cacheIndex=p,a[p]=r,w._cacheIndex=h,a[h]=w}_lendControlInterpolant(){const r=this._controlInterpolants,a=this._nActiveControlInterpolants++;let h=r[a];return h===void 0&&(h=new hl(new Float32Array(2),new Float32Array(2),1,hN),h.__cacheIndex=a,r[a]=h),h}_takeBackControlInterpolant(r){const a=this._controlInterpolants,h=r.__cacheIndex,p=--this._nActiveControlInterpolants,w=a[p];r.__cacheIndex=p,a[p]=r,w.__cacheIndex=h,a[h]=w}clipAction(r,a,h){const p=a||this._root,w=p.uuid;let R=typeof r=="string"?OA.findByName(p,r):r;const L=R!==null?R.uuid:r,H=this._actionsByClip[L];let j=null;if(h===void 0&&(R!==null?h=R.blendMode:h=zt),H!==void 0){const $=H.actionByRoot[w];if($!==void 0&&$.blendMode===h)return $;j=H.knownActions[0],R===null&&(R=j._clip)}if(R===null)return null;const X=new uN(this,R,a,h);return this._bindAction(X,j),this._addInactiveAction(X,L,w),X}existingAction(r,a){const h=a||this._root,p=h.uuid,w=typeof r=="string"?OA.findByName(h,r):r,R=w?w.uuid:r,L=this._actionsByClip[R];return L!==void 0&&L.actionByRoot[p]||null}stopAllAction(){const r=this._actions,a=this._nActiveActions;for(let h=a-1;h>=0;--h)r[h].stop();return this}update(r){r*=this.timeScale;const a=this._actions,h=this._nActiveActions,p=this.time+=r,w=Math.sign(r),R=this._accuIndex^=1;for(let j=0;j!==h;++j)a[j]._update(p,r,w,R);const L=this._bindings,H=this._nActiveBindings;for(let j=0;j!==H;++j)L[j].apply(R);return this}setTime(r){this.time=0;for(let a=0;a<this._actions.length;a++)this._actions[a].time=0;return this.update(r)}getRoot(){return this._root}uncacheClip(r){const a=this._actions,h=r.uuid,p=this._actionsByClip,w=p[h];if(w!==void 0){const R=w.knownActions;for(let L=0,H=R.length;L!==H;++L){const j=R[L];this._deactivateAction(j);const X=j._cacheIndex,$=a[a.length-1];j._cacheIndex=null,j._byClipCacheIndex=null,$._cacheIndex=X,a[X]=$,a.pop(),this._removeInactiveBindingsForAction(j)}delete p[h]}}uncacheRoot(r){const a=r.uuid,h=this._actionsByClip;for(const R in h){const L=h[R].actionByRoot,H=L[a];H!==void 0&&(this._deactivateAction(H),this._removeInactiveAction(H))}const p=this._bindingsByRootAndName,w=p[a];if(w!==void 0)for(const R in w){const L=w[R];L.restoreOriginalState(),this._removeInactiveBinding(L)}}uncacheAction(r,a){const h=this.existingAction(r,a);h!==null&&(this._deactivateAction(h),this._removeInactiveAction(h))}}class yC{constructor(r){this.value=r}clone(){return new yC(this.value.clone===void 0?this.value:this.value.clone())}}let fN=0;class pN extends Do{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:fN++}),this.name="",this.usage=zc,this.uniforms=[]}add(r){return this.uniforms.push(r),this}remove(r){const a=this.uniforms.indexOf(r);return a!==-1&&this.uniforms.splice(a,1),this}setName(r){return this.name=r,this}setUsage(r){return this.usage=r,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(r){this.name=r.name,this.usage=r.usage;const a=r.uniforms;this.uniforms.length=0;for(let h=0,p=a.length;h<p;h++)this.uniforms.push(a[h].clone());return this}clone(){return new this.constructor().copy(this)}}class mN extends ls{constructor(r,a,h=1){super(r,a),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=h}copy(r){return super.copy(r),this.meshPerAttribute=r.meshPerAttribute,this}clone(r){const a=super.clone(r);return a.meshPerAttribute=this.meshPerAttribute,a}toJSON(r){const a=super.toJSON(r);return a.isInstancedInterleavedBuffer=!0,a.meshPerAttribute=this.meshPerAttribute,a}}class gN{constructor(r,a,h,p,w){this.isGLBufferAttribute=!0,this.buffer=r,this.type=a,this.itemSize=h,this.elementSize=p,this.count=w,this.version=0}set needsUpdate(r){r===!0&&this.version++}setBuffer(r){return this.buffer=r,this}setType(r,a){return this.type=r,this.elementSize=a,this}setItemSize(r){return this.itemSize=r,this}setCount(r){return this.count=r,this}}class AN{constructor(r,a,h=0,p=1/0){this.ray=new ks(r,a),this.near=h,this.far=p,this.camera=null,this.layers=new Fi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(r,a){this.ray.set(r,a)}setFromCamera(r,a){a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),this.ray.direction.set(r.x,r.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):a.isOrthographicCamera?(this.ray.origin.set(r.x,r.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):console.error("THREE.Raycaster: Unsupported camera type: "+a.type)}intersectObject(r,a=!0,h=[]){return xC(r,this,h,a),h.sort(mR),h}intersectObjects(r,a=!0,h=[]){for(let p=0,w=r.length;p<w;p++)xC(r[p],this,h,a);return h.sort(mR),h}}function mR(B,r){return B.distance-r.distance}function xC(B,r,a,h){if(B.layers.test(r.layers)&&B.raycast(r,a),h===!0){const p=B.children;for(let w=0,R=p.length;w<R;w++)xC(p[w],r,a,!0)}}class vN{constructor(r=1,a=0,h=0){return this.radius=r,this.phi=a,this.theta=h,this}set(r,a,h){return this.radius=r,this.phi=a,this.theta=h,this}copy(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(r){return this.setFromCartesianCoords(r.x,r.y,r.z)}setFromCartesianCoords(r,a,h){return this.radius=Math.sqrt(r*r+a*a+h*h),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(r,h),this.phi=Math.acos(Kr(a/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class yN{constructor(r=1,a=0,h=0){return this.radius=r,this.theta=a,this.y=h,this}set(r,a,h){return this.radius=r,this.theta=a,this.y=h,this}copy(r){return this.radius=r.radius,this.theta=r.theta,this.y=r.y,this}setFromVector3(r){return this.setFromCartesianCoords(r.x,r.y,r.z)}setFromCartesianCoords(r,a,h){return this.radius=Math.sqrt(r*r+h*h),this.theta=Math.atan2(r,h),this.y=a,this}clone(){return new this.constructor().copy(this)}}const gR=new un;class xN{constructor(r=new un(1/0,1/0),a=new un(-1/0,-1/0)){this.isBox2=!0,this.min=r,this.max=a}set(r,a){return this.min.copy(r),this.max.copy(a),this}setFromPoints(r){this.makeEmpty();for(let a=0,h=r.length;a<h;a++)this.expandByPoint(r[a]);return this}setFromCenterAndSize(r,a){const h=gR.copy(a).multiplyScalar(.5);return this.min.copy(r).sub(h),this.max.copy(r).add(h),this}clone(){return new this.constructor().copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(r){return this.isEmpty()?r.set(0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y}getParameter(r,a){return a.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)}clampPoint(r,a){return a.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return gR.copy(r).clamp(this.min,this.max).sub(r).length()}intersect(r){return this.min.max(r.min),this.max.min(r.max),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}const AR=new je,Mx=new je;class EN{constructor(r=new je,a=new je){this.start=r,this.end=a}set(r,a){return this.start.copy(r),this.end.copy(a),this}copy(r){return this.start.copy(r.start),this.end.copy(r.end),this}getCenter(r){return r.addVectors(this.start,this.end).multiplyScalar(.5)}delta(r){return r.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(r,a){return this.delta(a).multiplyScalar(r).add(this.start)}closestPointToPointParameter(r,a){AR.subVectors(r,this.start),Mx.subVectors(this.end,this.start);const h=Mx.dot(Mx);let w=Mx.dot(AR)/h;return a&&(w=Kr(w,0,1)),w}closestPointToPoint(r,a,h){const p=this.closestPointToPointParameter(r,a);return this.delta(h).multiplyScalar(p).add(this.start)}applyMatrix4(r){return this.start.applyMatrix4(r),this.end.applyMatrix4(r),this}equals(r){return r.start.equals(this.start)&&r.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const vR=new je;class _N extends Or{constructor(r,a){super(),this.light=r,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=a,this.type="SpotLightHelper";const h=new pr,p=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let R=0,L=1,H=32;R<H;R++,L++){const j=R/H*Math.PI*2,X=L/H*Math.PI*2;p.push(Math.cos(j),Math.sin(j),1,Math.cos(X),Math.sin(X),1)}h.setAttribute("position",new yi(p,3));const w=new ko({fog:!1,toneMapped:!1});this.cone=new Gl(h,w),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const r=this.light.distance?this.light.distance:1e3,a=r*Math.tan(this.light.angle);this.cone.scale.set(a,a,r),vR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gd=new je,Sx=new oi,EC=new oi;class bN extends Gl{constructor(r){const a=yR(r),h=new pr,p=[],w=[],R=new si(0,0,1),L=new si(0,1,0);for(let j=0;j<a.length;j++){const X=a[j];X.parent&&X.parent.isBone&&(p.push(0,0,0),p.push(0,0,0),w.push(R.r,R.g,R.b),w.push(L.r,L.g,L.b))}h.setAttribute("position",new yi(p,3)),h.setAttribute("color",new yi(w,3));const H=new ko({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(h,H),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=r,this.bones=a,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(r){const a=this.bones,h=this.geometry,p=h.getAttribute("position");EC.copy(this.root.matrixWorld).invert();for(let w=0,R=0;w<a.length;w++){const L=a[w];L.parent&&L.parent.isBone&&(Sx.multiplyMatrices(EC,L.matrixWorld),gd.setFromMatrixPosition(Sx),p.setXYZ(R,gd.x,gd.y,gd.z),Sx.multiplyMatrices(EC,L.parent.matrixWorld),gd.setFromMatrixPosition(Sx),p.setXYZ(R+1,gd.x,gd.y,gd.z),R+=2)}h.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(r)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yR(B){const r=[];B.isBone===!0&&r.push(B);for(let a=0;a<B.children.length;a++)r.push.apply(r,yR(B.children[a]));return r}class wN extends as{constructor(r,a,h){const p=new pd(a,4,2),w=new eu({wireframe:!0,fog:!1,toneMapped:!1});super(p,w),this.light=r,this.color=h,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const CN=new je,xR=new si,ER=new si;class MN extends Or{constructor(r,a,h){super(),this.light=r,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=h,this.type="HemisphereLightHelper";const p=new fd(a);p.rotateY(Math.PI*.5),this.material=new eu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const w=p.getAttribute("position"),R=new Float32Array(w.count*3);p.setAttribute("color",new ts(R,3)),this.add(new as(p,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const r=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const a=r.geometry.getAttribute("color");xR.copy(this.light.color),ER.copy(this.light.groundColor);for(let h=0,p=a.count;h<p;h++){const w=h<p/2?xR:ER;a.setXYZ(h,w.r,w.g,w.b)}a.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),r.lookAt(CN.setFromMatrixPosition(this.light.matrixWorld).negate())}}class SN extends Gl{constructor(r=10,a=10,h=4473924,p=8947848){h=new si(h),p=new si(p);const w=a/2,R=r/a,L=r/2,H=[],j=[];for(let Z=0,te=0,le=-L;Z<=a;Z++,le+=R){H.push(-L,0,le,L,0,le),H.push(le,0,-L,le,0,L);const oe=Z===w?h:p;oe.toArray(j,te),te+=3,oe.toArray(j,te),te+=3,oe.toArray(j,te),te+=3,oe.toArray(j,te),te+=3}const X=new pr;X.setAttribute("position",new yi(H,3)),X.setAttribute("color",new yi(j,3));const $=new ko({vertexColors:!0,toneMapped:!1});super(X,$),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class TN extends Gl{constructor(r=10,a=16,h=8,p=64,w=4473924,R=8947848){w=new si(w),R=new si(R);const L=[],H=[];if(a>1)for(let $=0;$<a;$++){const Z=$/a*(Math.PI*2),te=Math.sin(Z)*r,le=Math.cos(Z)*r;L.push(0,0,0),L.push(te,0,le);const oe=$&1?w:R;H.push(oe.r,oe.g,oe.b),H.push(oe.r,oe.g,oe.b)}for(let $=0;$<h;$++){const Z=$&1?w:R,te=r-r/h*$;for(let le=0;le<p;le++){let oe=le/p*(Math.PI*2),se=Math.sin(oe)*te,ve=Math.cos(oe)*te;L.push(se,0,ve),H.push(Z.r,Z.g,Z.b),oe=(le+1)/p*(Math.PI*2),se=Math.sin(oe)*te,ve=Math.cos(oe)*te,L.push(se,0,ve),H.push(Z.r,Z.g,Z.b)}}const j=new pr;j.setAttribute("position",new yi(L,3)),j.setAttribute("color",new yi(H,3));const X=new ko({vertexColors:!0,toneMapped:!1});super(j,X),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _R=new je,Tx=new je,bR=new je;class IN extends Or{constructor(r,a,h){super(),this.light=r,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=h,this.type="DirectionalLightHelper",a===void 0&&(a=1);let p=new pr;p.setAttribute("position",new yi([-a,a,0,a,a,0,a,-a,0,-a,-a,0,-a,a,0],3));const w=new ko({fog:!1,toneMapped:!1});this.lightPlane=new mu(p,w),this.add(this.lightPlane),p=new pr,p.setAttribute("position",new yi([0,0,0,0,0,1],3)),this.targetLine=new mu(p,w),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_R.setFromMatrixPosition(this.light.matrixWorld),Tx.setFromMatrixPosition(this.light.target.matrixWorld),bR.subVectors(Tx,_R),this.lightPlane.lookAt(Tx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Tx),this.targetLine.scale.z=bR.length()}}const Ix=new je,Qs=new Jp;class RN extends Gl{constructor(r){const a=new pr,h=new ko({color:16777215,vertexColors:!0,toneMapped:!1}),p=[],w=[],R={};L("n1","n2"),L("n2","n4"),L("n4","n3"),L("n3","n1"),L("f1","f2"),L("f2","f4"),L("f4","f3"),L("f3","f1"),L("n1","f1"),L("n2","f2"),L("n3","f3"),L("n4","f4"),L("p","n1"),L("p","n2"),L("p","n3"),L("p","n4"),L("u1","u2"),L("u2","u3"),L("u3","u1"),L("c","t"),L("p","c"),L("cn1","cn2"),L("cn3","cn4"),L("cf1","cf2"),L("cf3","cf4");function L(le,oe){H(le),H(oe)}function H(le){p.push(0,0,0),w.push(0,0,0),R[le]===void 0&&(R[le]=[]),R[le].push(p.length/3-1)}a.setAttribute("position",new yi(p,3)),a.setAttribute("color",new yi(w,3)),super(a,h),this.type="CameraHelper",this.camera=r,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=R,this.update();const j=new si(16755200),X=new si(16711680),$=new si(43775),Z=new si(16777215),te=new si(3355443);this.setColors(j,X,$,Z,te)}setColors(r,a,h,p,w){const L=this.geometry.getAttribute("color");L.setXYZ(0,r.r,r.g,r.b),L.setXYZ(1,r.r,r.g,r.b),L.setXYZ(2,r.r,r.g,r.b),L.setXYZ(3,r.r,r.g,r.b),L.setXYZ(4,r.r,r.g,r.b),L.setXYZ(5,r.r,r.g,r.b),L.setXYZ(6,r.r,r.g,r.b),L.setXYZ(7,r.r,r.g,r.b),L.setXYZ(8,r.r,r.g,r.b),L.setXYZ(9,r.r,r.g,r.b),L.setXYZ(10,r.r,r.g,r.b),L.setXYZ(11,r.r,r.g,r.b),L.setXYZ(12,r.r,r.g,r.b),L.setXYZ(13,r.r,r.g,r.b),L.setXYZ(14,r.r,r.g,r.b),L.setXYZ(15,r.r,r.g,r.b),L.setXYZ(16,r.r,r.g,r.b),L.setXYZ(17,r.r,r.g,r.b),L.setXYZ(18,r.r,r.g,r.b),L.setXYZ(19,r.r,r.g,r.b),L.setXYZ(20,r.r,r.g,r.b),L.setXYZ(21,r.r,r.g,r.b),L.setXYZ(22,r.r,r.g,r.b),L.setXYZ(23,r.r,r.g,r.b),L.setXYZ(24,a.r,a.g,a.b),L.setXYZ(25,a.r,a.g,a.b),L.setXYZ(26,a.r,a.g,a.b),L.setXYZ(27,a.r,a.g,a.b),L.setXYZ(28,a.r,a.g,a.b),L.setXYZ(29,a.r,a.g,a.b),L.setXYZ(30,a.r,a.g,a.b),L.setXYZ(31,a.r,a.g,a.b),L.setXYZ(32,h.r,h.g,h.b),L.setXYZ(33,h.r,h.g,h.b),L.setXYZ(34,h.r,h.g,h.b),L.setXYZ(35,h.r,h.g,h.b),L.setXYZ(36,h.r,h.g,h.b),L.setXYZ(37,h.r,h.g,h.b),L.setXYZ(38,p.r,p.g,p.b),L.setXYZ(39,p.r,p.g,p.b),L.setXYZ(40,w.r,w.g,w.b),L.setXYZ(41,w.r,w.g,w.b),L.setXYZ(42,w.r,w.g,w.b),L.setXYZ(43,w.r,w.g,w.b),L.setXYZ(44,w.r,w.g,w.b),L.setXYZ(45,w.r,w.g,w.b),L.setXYZ(46,w.r,w.g,w.b),L.setXYZ(47,w.r,w.g,w.b),L.setXYZ(48,w.r,w.g,w.b),L.setXYZ(49,w.r,w.g,w.b),L.needsUpdate=!0}update(){const r=this.geometry,a=this.pointMap,h=1,p=1;Qs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),to("c",a,r,Qs,0,0,-1),to("t",a,r,Qs,0,0,1),to("n1",a,r,Qs,-h,-p,-1),to("n2",a,r,Qs,h,-p,-1),to("n3",a,r,Qs,-h,p,-1),to("n4",a,r,Qs,h,p,-1),to("f1",a,r,Qs,-h,-p,1),to("f2",a,r,Qs,h,-p,1),to("f3",a,r,Qs,-h,p,1),to("f4",a,r,Qs,h,p,1),to("u1",a,r,Qs,h*.7,p*1.1,-1),to("u2",a,r,Qs,-h*.7,p*1.1,-1),to("u3",a,r,Qs,0,p*2,-1),to("cf1",a,r,Qs,-h,0,1),to("cf2",a,r,Qs,h,0,1),to("cf3",a,r,Qs,0,-p,1),to("cf4",a,r,Qs,0,p,1),to("cn1",a,r,Qs,-h,0,-1),to("cn2",a,r,Qs,h,0,-1),to("cn3",a,r,Qs,0,-p,-1),to("cn4",a,r,Qs,0,p,-1),r.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function to(B,r,a,h,p,w,R){Ix.set(p,w,R).unproject(h);const L=r[B];if(L!==void 0){const H=a.getAttribute("position");for(let j=0,X=L.length;j<X;j++)H.setXYZ(L[j],Ix.x,Ix.y,Ix.z)}}const Rx=new Br;class LN extends Gl{constructor(r,a=16776960){const h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),p=new Float32Array(8*3),w=new pr;w.setIndex(new ts(h,1)),w.setAttribute("position",new ts(p,3)),super(w,new ko({color:a,toneMapped:!1})),this.object=r,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(r){if(r!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Rx.setFromObject(this.object),Rx.isEmpty())return;const a=Rx.min,h=Rx.max,p=this.geometry.attributes.position,w=p.array;w[0]=h.x,w[1]=h.y,w[2]=h.z,w[3]=a.x,w[4]=h.y,w[5]=h.z,w[6]=a.x,w[7]=a.y,w[8]=h.z,w[9]=h.x,w[10]=a.y,w[11]=h.z,w[12]=h.x,w[13]=h.y,w[14]=a.z,w[15]=a.x,w[16]=h.y,w[17]=a.z,w[18]=a.x,w[19]=a.y,w[20]=a.z,w[21]=h.x,w[22]=a.y,w[23]=a.z,p.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(r){return this.object=r,this.update(),this}copy(r,a){return super.copy(r,a),this.object=r.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class BN extends Gl{constructor(r,a=16776960){const h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),p=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],w=new pr;w.setIndex(new ts(h,1)),w.setAttribute("position",new yi(p,3)),super(w,new ko({color:a,toneMapped:!1})),this.box=r,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(r){const a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(r))}dispose(){this.geometry.dispose(),this.material.dispose()}}class DN extends mu{constructor(r,a=1,h=16776960){const p=h,w=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],R=new pr;R.setAttribute("position",new yi(w,3)),R.computeBoundingSphere(),super(R,new ko({color:p,toneMapped:!1})),this.type="PlaneHelper",this.plane=r,this.size=a;const L=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],H=new pr;H.setAttribute("position",new yi(L,3)),H.computeBoundingSphere(),this.add(new as(H,new eu({color:p,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(r){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(r)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wR=new je;let Lx,_C;class PN extends Or{constructor(r=new je(0,0,1),a=new je(0,0,0),h=1,p=16776960,w=h*.2,R=w*.2){super(),this.type="ArrowHelper",Lx===void 0&&(Lx=new pr,Lx.setAttribute("position",new yi([0,0,0,0,1,0],3)),_C=new ju(0,.5,1,5,1),_C.translate(0,-.5,0)),this.position.copy(a),this.line=new mu(Lx,new ko({color:p,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new as(_C,new eu({color:p,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(h,w,R)}setDirection(r){if(r.y>.99999)this.quaternion.set(0,0,0,1);else if(r.y<-.99999)this.quaternion.set(1,0,0,0);else{wR.set(r.z,0,-r.x).normalize();const a=Math.acos(r.y);this.quaternion.setFromAxisAngle(wR,a)}}setLength(r,a=r*.2,h=a*.2){this.line.scale.set(1,Math.max(1e-4,r-a),1),this.line.updateMatrix(),this.cone.scale.set(h,a,h),this.cone.position.y=r,this.cone.updateMatrix()}setColor(r){this.line.material.color.set(r),this.cone.material.color.set(r)}copy(r){return super.copy(r,!1),this.line.copy(r.line),this.cone.copy(r.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ON extends Gl{constructor(r=1){const a=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],h=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],p=new pr;p.setAttribute("position",new yi(a,3)),p.setAttribute("color",new yi(h,3));const w=new ko({vertexColors:!0,toneMapped:!1});super(p,w),this.type="AxesHelper"}setColors(r,a,h){const p=new si,w=this.geometry.attributes.color.array;return p.set(r),p.toArray(w,0),p.toArray(w,3),p.set(a),p.toArray(w,6),p.toArray(w,9),p.set(h),p.toArray(w,12),p.toArray(w,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class FN{constructor(){this.type="ShapePath",this.color=new si,this.subPaths=[],this.currentPath=null}moveTo(r,a){return this.currentPath=new Cf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(r,a),this}lineTo(r,a){return this.currentPath.lineTo(r,a),this}quadraticCurveTo(r,a,h,p){return this.currentPath.quadraticCurveTo(r,a,h,p),this}bezierCurveTo(r,a,h,p,w,R){return this.currentPath.bezierCurveTo(r,a,h,p,w,R),this}splineThru(r){return this.currentPath.splineThru(r),this}toShapes(r){function a(ve){const De=[];for(let Ce=0,Le=ve.length;Ce<Le;Ce++){const ze=ve[Ce],tt=new Au;tt.curves=ze.curves,De.push(tt)}return De}function h(ve,De){const Ce=De.length;let Le=!1;for(let ze=Ce-1,tt=0;tt<Ce;ze=tt++){let ft=De[ze],Oe=De[tt],ot=Oe.x-ft.x,ut=Oe.y-ft.y;if(Math.abs(ut)>Number.EPSILON){if(ut<0&&(ft=De[tt],ot=-ot,Oe=De[ze],ut=-ut),ve.y<ft.y||ve.y>Oe.y)continue;if(ve.y===ft.y){if(ve.x===ft.x)return!0}else{const Tt=ut*(ve.x-ft.x)-ot*(ve.y-ft.y);if(Tt===0)return!0;if(Tt<0)continue;Le=!Le}}else{if(ve.y!==ft.y)continue;if(Oe.x<=ve.x&&ve.x<=ft.x||ft.x<=ve.x&&ve.x<=Oe.x)return!0}}return Le}const p=zl.isClockWise,w=this.subPaths;if(w.length===0)return[];let R,L,H;const j=[];if(w.length===1)return L=w[0],H=new Au,H.curves=L.curves,j.push(H),j;let X=!p(w[0].getPoints());X=r?!X:X;const $=[],Z=[];let te=[],le=0,oe;Z[le]=void 0,te[le]=[];for(let ve=0,De=w.length;ve<De;ve++)L=w[ve],oe=L.getPoints(),R=p(oe),R=r?!R:R,R?(!X&&Z[le]&&le++,Z[le]={s:new Au,p:oe},Z[le].s.curves=L.curves,X&&le++,te[le]=[]):te[le].push({h:L,p:oe[0]});if(!Z[0])return a(w);if(Z.length>1){let ve=!1,De=0;for(let Ce=0,Le=Z.length;Ce<Le;Ce++)$[Ce]=[];for(let Ce=0,Le=Z.length;Ce<Le;Ce++){const ze=te[Ce];for(let tt=0;tt<ze.length;tt++){const ft=ze[tt];let Oe=!0;for(let ot=0;ot<Z.length;ot++)h(ft.p,Z[ot].p)&&(Ce!==ot&&De++,Oe?(Oe=!1,$[ot].push(ft)):ve=!0);Oe&&$[Ce].push(ft)}}De>0&&ve===!1&&(te=$)}let se;for(let ve=0,De=Z.length;ve<De;ve++){H=Z[ve].s,j.push(H),se=te[ve];for(let Ce=0,Le=se.length;Ce<Le;Ce++)H.holes.push(se[Ce].h)}return j}}const Yu=kN();function kN(){const B=new ArrayBuffer(4),r=new Float32Array(B),a=new Uint32Array(B),h=new Uint32Array(512),p=new Uint32Array(512);for(let H=0;H<256;++H){const j=H-127;j<-27?(h[H]=0,h[H|256]=32768,p[H]=24,p[H|256]=24):j<-14?(h[H]=1024>>-j-14,h[H|256]=1024>>-j-14|32768,p[H]=-j-1,p[H|256]=-j-1):j<=15?(h[H]=j+15<<10,h[H|256]=j+15<<10|32768,p[H]=13,p[H|256]=13):j<128?(h[H]=31744,h[H|256]=64512,p[H]=24,p[H|256]=24):(h[H]=31744,h[H|256]=64512,p[H]=13,p[H|256]=13)}const w=new Uint32Array(2048),R=new Uint32Array(64),L=new Uint32Array(64);for(let H=1;H<1024;++H){let j=H<<13,X=0;for(;!(j&8388608);)j<<=1,X-=8388608;j&=-8388609,X+=947912704,w[H]=j|X}for(let H=1024;H<2048;++H)w[H]=939524096+(H-1024<<13);for(let H=1;H<31;++H)R[H]=H<<23;R[31]=1199570944,R[32]=2147483648;for(let H=33;H<63;++H)R[H]=2147483648+(H-32<<23);R[63]=3347054592;for(let H=1;H<64;++H)H!==32&&(L[H]=1024);return{floatView:r,uint32View:a,baseTable:h,shiftTable:p,mantissaTable:w,exponentTable:R,offsetTable:L}}function NN(B){Math.abs(B)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),B=Kr(B,-65504,65504),Yu.floatView[0]=B;const r=Yu.uint32View[0],a=r>>23&511;return Yu.baseTable[a]+((r&8388607)>>Yu.shiftTable[a])}function UN(B){const r=B>>10;return Yu.uint32View[0]=Yu.mantissaTable[Yu.offsetTable[r]+(B&1023)]+Yu.exponentTable[r],Yu.floatView[0]}var GN=Object.freeze({__proto__:null,toHalfFloat:NN,fromHalfFloat:UN});function zN(){console.error("THREE.ImmediateRenderObject has been removed.")}class HN extends Qo{constructor(r,a,h){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(r,a,h),this.samples=4}}class VN extends Pu{constructor(r,a,h,p){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(r,a,h,p)}}class jN extends yt{constructor(r,a,h,p){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(r,a,h,p)}}class QN extends Js{constructor(r,a,h,p,w,R){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(r,a,h,p,w,R)}}class WN extends Mf{constructor(r,a,h,p){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(r,a,h,p)}}class KN extends Sf{constructor(r,a,h,p){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(r,a,h,p)}}class XN extends Tf{constructor(r,a,h,p,w,R,L){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(r,a,h,p,w,R,L)}}class YN extends ju{constructor(r,a,h,p,w,R,L,H){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(r,a,h,p,w,R,L,H)}}class qN extends If{constructor(r,a){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(r,a)}}class $N extends Bf{constructor(r,a){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(r,a)}}class JN extends Df{constructor(r,a){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(r,a)}}class ZN extends hd{constructor(r,a,h,p){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(r,a,h,p)}}class e8 extends fd{constructor(r,a){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(r,a)}}class t8 extends $h{constructor(r,a,h,p){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(r,a,h,p)}}class n8 extends gc{constructor(r,a,h,p){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(r,a,h,p)}}class i8 extends Pf{constructor(r,a,h,p,w,R){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(r,a,h,p,w,R)}}class r8 extends Of{constructor(r,a){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(r,a)}}class s8 extends pd{constructor(r,a,h,p,w,R,L){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(r,a,h,p,w,R,L)}}class o8 extends Ff{constructor(r,a){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(r,a)}}class a8 extends kf{constructor(r,a,h,p,w){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(r,a,h,p,w)}}class l8 extends Nf{constructor(r,a,h,p,w,R){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(r,a,h,p,w,R)}}class c8 extends Uf{constructor(r,a,h,p,w){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(r,a,h,p,w)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:f}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=f)},"./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js":(c,d,u)=>{u.r(d),u.d(d,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>ge,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>Ti,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>we,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>Ai,KHR_DF_CHANNEL_RGBSDA_RED:()=>Wn,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>Je,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>k,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>P,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>_,KHR_DF_MODEL_ASTC:()=>T,KHR_DF_MODEL_ETC1:()=>C,KHR_DF_MODEL_ETC1S:()=>N,KHR_DF_MODEL_ETC2:()=>M,KHR_DF_MODEL_RGBSDA:()=>S,KHR_DF_MODEL_UNSPECIFIED:()=>m,KHR_DF_PRIMARIES_ACES:()=>Xt,KHR_DF_PRIMARIES_ACESCC:()=>on,KHR_DF_PRIMARIES_ADOBERGB:()=>zn,KHR_DF_PRIMARIES_BT2020:()=>nt,KHR_DF_PRIMARIES_BT601_EBU:()=>Ft,KHR_DF_PRIMARIES_BT601_SMPTE:()=>Pt,KHR_DF_PRIMARIES_BT709:()=>mt,KHR_DF_PRIMARIES_CIEXYZ:()=>Fn,KHR_DF_PRIMARIES_DISPLAYP3:()=>Rn,KHR_DF_PRIMARIES_NTSC1953:()=>nn,KHR_DF_PRIMARIES_PAL525:()=>vn,KHR_DF_PRIMARIES_UNSPECIFIED:()=>st,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>Te,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>_e,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>He,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>Pe,KHR_DF_TRANSFER_ACESCC:()=>Se,KHR_DF_TRANSFER_ACESCCT:()=>rt,KHR_DF_TRANSFER_ADOBERGB:()=>Ge,KHR_DF_TRANSFER_BT1886:()=>G,KHR_DF_TRANSFER_DCIP3:()=>ee,KHR_DF_TRANSFER_HLG_EOTF:()=>K,KHR_DF_TRANSFER_HLG_OETF:()=>V,KHR_DF_TRANSFER_ITU:()=>ne,KHR_DF_TRANSFER_LINEAR:()=>z,KHR_DF_TRANSFER_NTSC:()=>O,KHR_DF_TRANSFER_PAL625_EOTF:()=>me,KHR_DF_TRANSFER_PAL_OETF:()=>he,KHR_DF_TRANSFER_PQ_EOTF:()=>W,KHR_DF_TRANSFER_PQ_OETF:()=>J,KHR_DF_TRANSFER_SLOG:()=>F,KHR_DF_TRANSFER_SLOG2:()=>U,KHR_DF_TRANSFER_SRGB:()=>Y,KHR_DF_TRANSFER_ST240:()=>Be,KHR_DF_TRANSFER_UNSPECIFIED:()=>D,KHR_DF_VENDORID_KHRONOS:()=>x,KHR_DF_VERSION:()=>b,KHR_SUPERCOMPRESSION_BASISLZ:()=>g,KHR_SUPERCOMPRESSION_NONE:()=>A,KHR_SUPERCOMPRESSION_ZLIB:()=>v,KHR_SUPERCOMPRESSION_ZSTD:()=>y,KTX2Container:()=>Yc,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>ke,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>qn,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>yn,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>Vt,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>wn,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>Nt,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>At,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>Rt,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>gt,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>br,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>fa,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>Xc,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>Du,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>jc,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>lc,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>un,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>Po,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>vo,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>kh,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>Fs,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>rl,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>h0,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>uf,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>ha,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>Nh,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>ac,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>da,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>io,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>Sl,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>Yt,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>c0,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>l0,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>Gt,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>Oh,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>Up,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>Nn,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>u0,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>Hc,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>je,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>zp,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>Gp,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>Lr,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>lf,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>af,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>ws,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>Hp,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>Fh,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>Br,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>cf,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>Vc,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>ua,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>Xr,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>il,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>ur,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>Qc,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>qs,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>Xe,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>re,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>ue,VK_FORMAT_B8G8R8A8_SINT:()=>We,VK_FORMAT_B8G8R8A8_SNORM:()=>Bt,VK_FORMAT_B8G8R8A8_SRGB:()=>it,VK_FORMAT_B8G8R8A8_UINT:()=>Re,VK_FORMAT_B8G8R8A8_UNORM:()=>Et,VK_FORMAT_B8G8R8_SINT:()=>bi,VK_FORMAT_B8G8R8_SNORM:()=>Cn,VK_FORMAT_B8G8R8_SRGB:()=>Li,VK_FORMAT_B8G8R8_UINT:()=>li,VK_FORMAT_B8G8R8_UNORM:()=>ri,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>zc,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>Ml,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>nf,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>Xs,VK_FORMAT_BC2_SRGB_BLOCK:()=>Vo,VK_FORMAT_BC2_UNORM_BLOCK:()=>rf,VK_FORMAT_BC3_SRGB_BLOCK:()=>Pp,VK_FORMAT_BC3_UNORM_BLOCK:()=>Dp,VK_FORMAT_BC4_SNORM_BLOCK:()=>Fp,VK_FORMAT_BC4_UNORM_BLOCK:()=>Op,VK_FORMAT_BC5_SNORM_BLOCK:()=>Np,VK_FORMAT_BC5_UNORM_BLOCK:()=>kp,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>sf,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>Bo,VK_FORMAT_BC7_SRGB_BLOCK:()=>Do,VK_FORMAT_BC7_UNORM_BLOCK:()=>co,VK_FORMAT_D16_UNORM:()=>tc,VK_FORMAT_D16_UNORM_S8_UINT:()=>sc,VK_FORMAT_D24_UNORM_S8_UINT:()=>ds,VK_FORMAT_D32_SFLOAT:()=>ic,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>o0,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>tl,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>Bu,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>of,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>a0,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>Lu,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>oc,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>Fa,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>Kr,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>vr,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>nl,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>Ys,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>ca,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>Tl,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>Qo,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>Gh,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>Pu,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>d0,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>Kc,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>vs,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>yt,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>kr,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>jo,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>As,VK_FORMAT_R10X6_UNORM_PACK16:()=>Vp,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>Wc,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>si,VK_FORMAT_R12X4_UNORM_PACK16:()=>Uh,VK_FORMAT_R16G16B16A16_SFLOAT:()=>de,VK_FORMAT_R16G16B16A16_SINT:()=>vt,VK_FORMAT_R16G16B16A16_SNORM:()=>Ke,VK_FORMAT_R16G16B16A16_UINT:()=>et,VK_FORMAT_R16G16B16A16_UNORM:()=>Ie,VK_FORMAT_R16G16B16_SFLOAT:()=>ye,VK_FORMAT_R16G16B16_SINT:()=>ce,VK_FORMAT_R16G16B16_SNORM:()=>Mi,VK_FORMAT_R16G16B16_UINT:()=>ie,VK_FORMAT_R16G16B16_UNORM:()=>Wr,VK_FORMAT_R16G16_SFLOAT:()=>ei,VK_FORMAT_R16G16_SINT:()=>bn,VK_FORMAT_R16G16_SNORM:()=>Cr,VK_FORMAT_R16G16_UINT:()=>Jr,VK_FORMAT_R16G16_UNORM:()=>qi,VK_FORMAT_R16_SFLOAT:()=>Ci,VK_FORMAT_R16_SINT:()=>hi,VK_FORMAT_R16_SNORM:()=>_n,VK_FORMAT_R16_UINT:()=>Rr,VK_FORMAT_R16_UNORM:()=>Un,VK_FORMAT_R32G32B32A32_SFLOAT:()=>ui,VK_FORMAT_R32G32B32A32_SINT:()=>kn,VK_FORMAT_R32G32B32A32_UINT:()=>Wt,VK_FORMAT_R32G32B32_SFLOAT:()=>An,VK_FORMAT_R32G32B32_SINT:()=>en,VK_FORMAT_R32G32B32_UINT:()=>zt,VK_FORMAT_R32G32_SFLOAT:()=>St,VK_FORMAT_R32G32_SINT:()=>ct,VK_FORMAT_R32G32_UINT:()=>Ee,VK_FORMAT_R32_SFLOAT:()=>xe,VK_FORMAT_R32_SINT:()=>pe,VK_FORMAT_R32_UINT:()=>fe,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>Ae,VK_FORMAT_R4G4_UNORM_PACK8:()=>Ue,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>q,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>dt,VK_FORMAT_R64G64B64A64_SFLOAT:()=>_r,VK_FORMAT_R64G64B64A64_SINT:()=>Ui,VK_FORMAT_R64G64B64A64_UINT:()=>es,VK_FORMAT_R64G64B64_SFLOAT:()=>$i,VK_FORMAT_R64G64B64_SINT:()=>Er,VK_FORMAT_R64G64B64_UINT:()=>Di,VK_FORMAT_R64G64_SFLOAT:()=>ji,VK_FORMAT_R64G64_SINT:()=>Ri,VK_FORMAT_R64G64_UINT:()=>vi,VK_FORMAT_R64_SFLOAT:()=>Kn,VK_FORMAT_R64_SINT:()=>di,VK_FORMAT_R64_UINT:()=>Ln,VK_FORMAT_R8G8B8A8_SINT:()=>xt,VK_FORMAT_R8G8B8A8_SNORM:()=>ar,VK_FORMAT_R8G8B8A8_SRGB:()=>Mt,VK_FORMAT_R8G8B8A8_UINT:()=>Ye,VK_FORMAT_R8G8B8A8_UNORM:()=>Ar,VK_FORMAT_R8G8B8_SINT:()=>Qt,VK_FORMAT_R8G8B8_SNORM:()=>_i,VK_FORMAT_R8G8B8_SRGB:()=>mn,VK_FORMAT_R8G8B8_UINT:()=>Tn,VK_FORMAT_R8G8B8_UNORM:()=>Ir,VK_FORMAT_R8G8_SINT:()=>er,VK_FORMAT_R8G8_SNORM:()=>dn,VK_FORMAT_R8G8_SRGB:()=>Pi,VK_FORMAT_R8G8_UINT:()=>Sn,VK_FORMAT_R8G8_UNORM:()=>Jt,VK_FORMAT_R8_SINT:()=>It,VK_FORMAT_R8_SNORM:()=>qe,VK_FORMAT_R8_SRGB:()=>Ot,VK_FORMAT_R8_UINT:()=>Qe,VK_FORMAT_R8_UNORM:()=>be,VK_FORMAT_S8_UINT:()=>rc,VK_FORMAT_UNDEFINED:()=>Fe,VK_FORMAT_X8_D24_UNORM_PACK32:()=>nc,read:()=>ka,write:()=>qc});var f=u("./node_modules/buffer/index.js").Buffer;const A=0,g=1,y=2,v=3,_=0,x=0,b=2,m=0,S=1,C=160,M=161,T=162,N=163,P=0,k=1,D=0,z=1,Y=2,ne=3,O=4,F=5,U=6,G=7,V=8,K=9,W=10,J=11,ee=12,he=13,me=14,Be=15,Se=16,rt=17,Ge=18,st=0,mt=1,Ft=2,Pt=3,nt=4,Fn=5,Xt=6,on=7,nn=8,vn=9,Rn=10,zn=11,Wn=0,Ai=1,Ti=2,Je=13,we=14,ge=15,_e=128,Pe=64,Te=32,He=16,Fe=0,Ue=1,Ae=2,Xe=3,dt=4,ue=5,q=6,re=7,ke=8,be=9,qe=10,Qe=13,It=14,Ot=15,Jt=16,dn=17,Sn=20,er=21,Pi=22,Ir=23,_i=24,Tn=27,Qt=28,mn=29,ri=30,Cn=31,li=34,bi=35,Li=36,Ar=37,ar=38,Ye=41,xt=42,Mt=43,Et=44,Bt=45,Re=48,We=49,it=50,gt=58,At=59,Rt=62,Nt=63,wn=64,yn=65,Vt=68,qn=69,Un=70,_n=71,Rr=74,hi=75,Ci=76,qi=77,Cr=78,Jr=81,bn=82,ei=83,Wr=84,Mi=85,ie=88,ce=89,ye=90,Ie=91,Ke=92,et=95,vt=96,de=97,fe=98,pe=99,xe=100,Ee=101,ct=102,St=103,zt=104,en=105,An=106,Wt=107,kn=108,ui=109,Ln=110,di=111,Kn=112,vi=113,Ri=114,ji=115,Di=116,Er=117,$i=118,es=119,Ui=120,_r=121,ur=122,tl=123,tc=124,nc=125,ic=126,rc=127,sc=128,ds=129,o0=130,Xs=131,nf=132,Ml=133,zc=134,rf=135,Vo=136,Dp=137,Pp=138,Op=139,Fp=140,kp=141,Np=142,Bo=143,sf=144,co=145,Do=146,Ys=147,nl=148,Fa=149,oc=150,vr=151,Kr=152,Lu=153,a0=154,of=155,Bu=156,l0=157,c0=158,Up=159,Oh=160,Hc=161,u0=162,Gp=163,zp=164,af=165,lf=166,Fh=167,Hp=168,Vc=169,cf=170,il=171,Xr=172,Po=173,un=174,Fs=175,kh=176,uf=177,h0=178,jc=179,Du=180,ac=181,Nh=182,Sl=183,io=184,Vp=1000156007,As=1000156008,jo=1000156009,ca=1000156010,Qc=1000156011,Uh=1000156017,si=1000156018,Wc=1000156019,Tl=1000156020,qs=1000156021,Gh=1000054e3,d0=1000054001,vs=1000054002,kr=1000054003,Qo=1000054004,Pu=1000054005,Kc=1000054006,yt=1000054007,Yt=1000066e3,Gt=1000066001,Nn=1000066002,je=1000066003,Lr=1000066004,ws=1000066005,Br=1000066006,ua=1000066007,lc=1000066008,vo=1000066009,rl=1000066010,Xc=1000066011,ha=1000066012,da=1000066013,fa=100034e4,br=1000340001;class Yc{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class sl{constructor(Oi,lr,Cs,hr){this._dataView=new DataView(Oi.buffer,Oi.byteOffset+lr,Cs),this._littleEndian=hr,this._offset=0}_nextUint8(){const Oi=this._dataView.getUint8(this._offset);return this._offset+=1,Oi}_nextUint16(){const Oi=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,Oi}_nextUint32(){const Oi=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,Oi}_nextUint64(){const Oi=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,Oi}_nextInt32(){const Oi=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,Oi}_skip(Oi){return this._offset+=Oi,this}_scan(Oi,lr=0){const Cs=this._offset;let hr=0;for(;this._dataView.getUint8(this._offset)!==lr&&hr<Oi;)hr++,this._offset++;return hr<Oi&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+Cs,hr)}}const Il=new Uint8Array([0]),os=[171,75,84,88,32,50,48,187,13,10,26,10];function zh(ti){return typeof TextEncoder<"u"?new TextEncoder().encode(ti):f.from(ti)}function jp(ti){return typeof TextDecoder<"u"?new TextDecoder().decode(ti):f.from(ti).toString("utf8")}function pa(ti){let Oi=0;for(const hr of ti)Oi+=hr.byteLength;const lr=new Uint8Array(Oi);let Cs=0;for(const hr of ti)lr.set(new Uint8Array(hr),Cs),Cs+=hr.byteLength;return lr}function ka(ti){const Oi=new Uint8Array(ti.buffer,ti.byteOffset,os.length);if(Oi[0]!==os[0]||Oi[1]!==os[1]||Oi[2]!==os[2]||Oi[3]!==os[3]||Oi[4]!==os[4]||Oi[5]!==os[5]||Oi[6]!==os[6]||Oi[7]!==os[7]||Oi[8]!==os[8]||Oi[9]!==os[9]||Oi[10]!==os[10]||Oi[11]!==os[11])throw new Error("Missing KTX 2.0 identifier.");const lr=new Yc,Cs=17*Uint32Array.BYTES_PER_ELEMENT,hr=new sl(ti,os.length,Cs,!0);lr.vkFormat=hr._nextUint32(),lr.typeSize=hr._nextUint32(),lr.pixelWidth=hr._nextUint32(),lr.pixelHeight=hr._nextUint32(),lr.pixelDepth=hr._nextUint32(),lr.layerCount=hr._nextUint32(),lr.faceCount=hr._nextUint32();const ks=hr._nextUint32();lr.supercompressionScheme=hr._nextUint32();const oi=hr._nextUint32(),Ko=hr._nextUint32(),dr=hr._nextUint32(),Hh=hr._nextUint32(),Rl=hr._nextUint64(),$s=hr._nextUint64(),ro=new sl(ti,os.length+Cs,3*ks*8,!0);for(let Ss=0;Ss<ks;Ss++)lr.levels.push({levelData:new Uint8Array(ti.buffer,ti.byteOffset+ro._nextUint64(),ro._nextUint64()),uncompressedByteLength:ro._nextUint64()});const Wi=new sl(ti,oi,Ko,!0),Ua={vendorId:Wi._skip(4)._nextUint16(),descriptorType:Wi._nextUint16(),versionNumber:Wi._nextUint16(),descriptorBlockSize:Wi._nextUint16(),colorModel:Wi._nextUint8(),colorPrimaries:Wi._nextUint8(),transferFunction:Wi._nextUint8(),flags:Wi._nextUint8(),texelBlockDimension:[Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8()],bytesPlane:[Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8()],samples:[]},Ou=(Ua.descriptorBlockSize/4-6)/4;for(let Ss=0;Ss<Ou;Ss++){const ga={bitOffset:Wi._nextUint16(),bitLength:Wi._nextUint8(),channelType:Wi._nextUint8(),samplePosition:[Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&ga.channelType?(ga.sampleLower=Wi._nextInt32(),ga.sampleUpper=Wi._nextInt32()):(ga.sampleLower=Wi._nextUint32(),ga.sampleUpper=Wi._nextUint32()),Ua.samples[Ss]=ga}lr.dataFormatDescriptor.length=0,lr.dataFormatDescriptor.push(Ua);const uo=new sl(ti,dr,Hh,!0);for(;uo._offset<Hh;){const Ss=uo._nextUint32(),ga=uo._scan(Ss),Ga=jp(ga),za=uo._scan(Ss-ga.byteLength);lr.keyValue[Ga]=Ga.match(/^ktx/i)?jp(za):za,uo._offset%4&&uo._skip(4-uo._offset%4)}if($s<=0)return lr;const Fi=new sl(ti,Rl,$s,!0),sr=Fi._nextUint16(),fr=Fi._nextUint16(),Nr=Fi._nextUint32(),Ms=Fi._nextUint32(),ol=Fi._nextUint32(),al=Fi._nextUint32(),$c=[];for(let Ss=0;Ss<ks;Ss++)$c.push({imageFlags:Fi._nextUint32(),rgbSliceByteOffset:Fi._nextUint32(),rgbSliceByteLength:Fi._nextUint32(),alphaSliceByteOffset:Fi._nextUint32(),alphaSliceByteLength:Fi._nextUint32()});const Vh=Rl+Fi._offset,Ll=Vh+Nr,cc=Ll+Ms,Jc=cc+ol,jh=new Uint8Array(ti.buffer,ti.byteOffset+Vh,Nr),uc=new Uint8Array(ti.buffer,ti.byteOffset+Ll,Ms),Or=new Uint8Array(ti.buffer,ti.byteOffset+cc,ol),ma=new Uint8Array(ti.buffer,ti.byteOffset+Jc,al);return lr.globalData={endpointCount:sr,selectorCount:fr,imageDescs:$c,endpointsData:jh,selectorsData:uc,tablesData:Or,extendedData:ma},lr}function Wo(){return(Wo=Object.assign||function(ti){for(var Oi=1;Oi<arguments.length;Oi++){var lr=arguments[Oi];for(var Cs in lr)Object.prototype.hasOwnProperty.call(lr,Cs)&&(ti[Cs]=lr[Cs])}return ti}).apply(this,arguments)}const Na={keepWriter:!1};function qc(ti,Oi={}){Oi=Wo({},Na,Oi);let lr=new ArrayBuffer(0);if(ti.globalData){const sr=new ArrayBuffer(20+5*ti.globalData.imageDescs.length*4),fr=new DataView(sr);fr.setUint16(0,ti.globalData.endpointCount,!0),fr.setUint16(2,ti.globalData.selectorCount,!0),fr.setUint32(4,ti.globalData.endpointsData.byteLength,!0),fr.setUint32(8,ti.globalData.selectorsData.byteLength,!0),fr.setUint32(12,ti.globalData.tablesData.byteLength,!0),fr.setUint32(16,ti.globalData.extendedData.byteLength,!0);for(let Nr=0;Nr<ti.globalData.imageDescs.length;Nr++){const Ms=ti.globalData.imageDescs[Nr];fr.setUint32(20+5*Nr*4+0,Ms.imageFlags,!0),fr.setUint32(20+5*Nr*4+4,Ms.rgbSliceByteOffset,!0),fr.setUint32(20+5*Nr*4+8,Ms.rgbSliceByteLength,!0),fr.setUint32(20+5*Nr*4+12,Ms.alphaSliceByteOffset,!0),fr.setUint32(20+5*Nr*4+16,Ms.alphaSliceByteLength,!0)}lr=pa([sr,ti.globalData.endpointsData,ti.globalData.selectorsData,ti.globalData.tablesData,ti.globalData.extendedData])}const Cs=[];let hr=ti.keyValue;Oi.keepWriter||(hr=Wo({},ti.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const sr in hr){const fr=hr[sr],Nr=zh(sr),Ms=typeof fr=="string"?zh(fr):fr,ol=Nr.byteLength+1+Ms.byteLength+1,al=ol%4?4-ol%4:0;Cs.push(pa([new Uint32Array([ol]),Nr,Il,Ms,Il,new Uint8Array(al).fill(0)]))}const ks=pa(Cs);if(ti.dataFormatDescriptor.length!==1||ti.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const oi=ti.dataFormatDescriptor[0],Ko=new ArrayBuffer(28+16*oi.samples.length),dr=new DataView(Ko),Hh=24+16*oi.samples.length;if(dr.setUint32(0,Ko.byteLength,!0),dr.setUint16(4,oi.vendorId,!0),dr.setUint16(6,oi.descriptorType,!0),dr.setUint16(8,oi.versionNumber,!0),dr.setUint16(10,Hh,!0),dr.setUint8(12,oi.colorModel),dr.setUint8(13,oi.colorPrimaries),dr.setUint8(14,oi.transferFunction),dr.setUint8(15,oi.flags),!Array.isArray(oi.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");dr.setUint8(16,oi.texelBlockDimension[0]),dr.setUint8(17,oi.texelBlockDimension[1]),dr.setUint8(18,oi.texelBlockDimension[2]),dr.setUint8(19,oi.texelBlockDimension[3]);for(let sr=0;sr<8;sr++)dr.setUint8(20+sr,oi.bytesPlane[sr]);for(let sr=0;sr<oi.samples.length;sr++){const fr=oi.samples[sr],Nr=28+16*sr;if(fr.channelID)throw new Error("channelID has been renamed to channelType.");dr.setUint16(Nr+0,fr.bitOffset,!0),dr.setUint8(Nr+2,fr.bitLength),dr.setUint8(Nr+3,fr.channelType),dr.setUint8(Nr+4,fr.samplePosition[0]),dr.setUint8(Nr+5,fr.samplePosition[1]),dr.setUint8(Nr+6,fr.samplePosition[2]),dr.setUint8(Nr+7,fr.samplePosition[3]),64&fr.channelType?(dr.setInt32(Nr+8,fr.sampleLower,!0),dr.setInt32(Nr+12,fr.sampleUpper,!0)):(dr.setUint32(Nr+8,fr.sampleLower,!0),dr.setUint32(Nr+12,fr.sampleUpper,!0))}const Rl=os.length+68+3*ti.levels.length*8,$s=Rl+Ko.byteLength;let ro=lr.byteLength>0?$s+ks.byteLength:0;ro%8&&(ro+=8-ro%8);const Wi=[],Ua=new DataView(new ArrayBuffer(3*ti.levels.length*8));let Ou=(ro||$s+ks.byteLength)+lr.byteLength;for(let sr=0;sr<ti.levels.length;sr++){const fr=ti.levels[sr];Wi.push(fr.levelData),Ua.setBigUint64(24*sr+0,BigInt(Ou),!0),Ua.setBigUint64(24*sr+8,BigInt(fr.levelData.byteLength),!0),Ua.setBigUint64(24*sr+16,BigInt(fr.uncompressedByteLength),!0),Ou+=fr.levelData.byteLength}const uo=new ArrayBuffer(68),Fi=new DataView(uo);return Fi.setUint32(0,ti.vkFormat,!0),Fi.setUint32(4,ti.typeSize,!0),Fi.setUint32(8,ti.pixelWidth,!0),Fi.setUint32(12,ti.pixelHeight,!0),Fi.setUint32(16,ti.pixelDepth,!0),Fi.setUint32(20,ti.layerCount,!0),Fi.setUint32(24,ti.faceCount,!0),Fi.setUint32(28,ti.levels.length,!0),Fi.setUint32(32,ti.supercompressionScheme,!0),Fi.setUint32(36,Rl,!0),Fi.setUint32(40,Ko.byteLength,!0),Fi.setUint32(44,$s,!0),Fi.setUint32(48,ks.byteLength,!0),Fi.setBigUint64(52,BigInt(lr.byteLength>0?ro:0),!0),Fi.setBigUint64(60,BigInt(lr.byteLength),!0),new Uint8Array(pa([new Uint8Array(os).buffer,uo,Ua.buffer,Ko,ks,ro>0?new ArrayBuffer(ro-($s+ks.byteLength)):new ArrayBuffer(0),lr,...Wi]))}},"./node_modules/super-three/examples/jsm/libs/zstddec.module.js":(c,d,u)=>{u.r(d),u.d(d,{ZSTDDecoder:()=>_});var f=u("./node_modules/buffer/index.js").Buffer;let A,g,y;const v={env:{emscripten_notify_memory_growth:function(b){y=new Uint8Array(g.exports.memory.buffer)}}};class _{init(){return A||(A=typeof fetch<"u"?fetch("data:application/wasm;base64,"+x).then(m=>m.arrayBuffer()).then(m=>WebAssembly.instantiate(m,v)).then(this._init):WebAssembly.instantiate(f.from(x,"base64"),v).then(this._init),A)}_init(m){g=m.instance,v.env.emscripten_notify_memory_growth(0)}decode(m,S=0){if(!g)throw new Error("ZSTDDecoder: Await .init() before decoding.");const C=m.byteLength,M=g.exports.malloc(C);y.set(m,M),S=S||Number(g.exports.ZSTD_findDecompressedSize(M,C));const T=g.exports.malloc(S),N=g.exports.ZSTD_decompress(T,S,M,C),P=y.slice(T,T+N);return g.exports.free(M),g.exports.free(T),P}}const x="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js":(c,d,u)=>{u.r(d),u.d(d,{LightProbeGenerator:()=>A});var f=u("./node_modules/super-three/build/three.module.js");class A{static fromCubeTexture(v){let _=0;const x=new f.Vector3,b=new f.Vector3,m=new f.Color,S=[0,0,0,0,0,0,0,0,0],C=new f.SphericalHarmonics3,M=C.coefficients;for(let N=0;N<6;N++){const P=v.image[N],k=P.width,D=P.height,z=document.createElement("canvas");z.width=k,z.height=D;const Y=z.getContext("2d");Y.drawImage(P,0,0,k,D);const ne=Y.getImageData(0,0,k,D),O=ne.data,F=ne.width,U=2/F;for(let G=0,V=O.length;G<V;G+=4){m.setRGB(O[G]/255,O[G+1]/255,O[G+2]/255),g(m,v.encoding);const K=G/4,W=-1+(K%F+.5)*U,J=1-(Math.floor(K/F)+.5)*U;switch(N){case 0:x.set(-1,J,-W);break;case 1:x.set(1,J,W);break;case 2:x.set(-W,1,-J);break;case 3:x.set(-W,-1,J);break;case 4:x.set(-W,J,1);break;case 5:x.set(W,J,-1);break}const ee=x.lengthSq(),he=4/(Math.sqrt(ee)*ee);_+=he,b.copy(x).normalize(),f.SphericalHarmonics3.getBasisAt(b,S);for(let me=0;me<9;me++)M[me].x+=S[me]*m.r*he,M[me].y+=S[me]*m.g*he,M[me].z+=S[me]*m.b*he}}const T=4*Math.PI/_;for(let N=0;N<9;N++)M[N].x*=T,M[N].y*=T,M[N].z*=T;return new f.LightProbe(C)}static fromCubeRenderTarget(v,_){let x=0;const b=new f.Vector3,m=new f.Vector3,S=new f.Color,C=[0,0,0,0,0,0,0,0,0],M=new f.SphericalHarmonics3,T=M.coefficients;for(let P=0;P<6;P++){const k=_.width,D=new Uint8Array(k*k*4);v.readRenderTargetPixels(_,0,0,k,k,D,P);const z=2/k;for(let Y=0,ne=D.length;Y<ne;Y+=4){S.setRGB(D[Y]/255,D[Y+1]/255,D[Y+2]/255),g(S,_.texture.encoding);const O=Y/4,F=-1+(O%k+.5)*z,U=1-(Math.floor(O/k)+.5)*z;switch(P){case 0:b.set(1,U,-F);break;case 1:b.set(-1,U,F);break;case 2:b.set(F,1,-U);break;case 3:b.set(F,-1,U);break;case 4:b.set(F,U,1);break;case 5:b.set(-F,U,-1);break}const G=b.lengthSq(),V=4/(Math.sqrt(G)*G);x+=V,m.copy(b).normalize(),f.SphericalHarmonics3.getBasisAt(m,C);for(let K=0;K<9;K++)T[K].x+=C[K]*S.r*V,T[K].y+=C[K]*S.g*V,T[K].z+=C[K]*S.b*V}}const N=4*Math.PI/x;for(let P=0;P<9;P++)T[P].x*=N,T[P].y*=N,T[P].z*=N;return new f.LightProbe(M)}}function g(y,v){switch(v){case f.sRGBEncoding:y.convertSRGBToLinear();break;case f.LinearEncoding:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.");break}return y}},"./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js":(c,d,u)=>{u.r(d),u.d(d,{DRACOLoader:()=>g});var f=u("./node_modules/super-three/build/three.module.js");const A=new WeakMap;class g extends f.Loader{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,x,b,m){const S=new f.FileLoader(this.manager);S.setPath(this.path),S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setWithCredentials(this.withCredentials),S.load(_,C=>{this.decodeDracoFile(C,x).catch(m)},b,m)}decodeDracoFile(_,x,b,m){const S={attributeIDs:b||this.defaultAttributeIDs,attributeTypes:m||this.defaultAttributeTypes,useUniqueIDs:!!b};return this.decodeGeometry(_,S).then(x)}decodeGeometry(_,x){const b=JSON.stringify(x);if(A.has(_)){const T=A.get(_);if(T.key===b)return T.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let m;const S=this.workerNextTaskID++,C=_.byteLength,M=this._getWorker(S,C).then(T=>(m=T,new Promise((N,P)=>{m._callbacks[S]={resolve:N,reject:P},m.postMessage({type:"decode",id:S,taskConfig:x,buffer:_},[_])}))).then(T=>this._createGeometry(T.geometry));return M.catch(()=>!0).then(()=>{m&&S&&this._releaseTask(m,S)}),A.set(_,{key:b,promise:M}),M}_createGeometry(_){const x=new f.BufferGeometry;_.index&&x.setIndex(new f.BufferAttribute(_.index.array,1));for(let b=0;b<_.attributes.length;b++){const m=_.attributes[b],S=m.name,C=m.array,M=m.itemSize;x.setAttribute(S,new f.BufferAttribute(C,M))}return x}_loadLibrary(_,x){const b=new f.FileLoader(this.manager);return b.setPath(this.decoderPath),b.setResponseType(x),b.setWithCredentials(this.withCredentials),new Promise((m,S)=>{b.load(_,m,void 0,S)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",x=[];return _?x.push(this._loadLibrary("draco_decoder.js","text")):(x.push(this._loadLibrary("draco_wasm_wrapper.js","text")),x.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(x).then(b=>{const m=b[0];_||(this.decoderConfig.wasmBinary=b[1]);const S=y.toString(),C=["/* draco decoder */",m,"","/* worker */",S.substring(S.indexOf("{")+1,S.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([C]))}),this.decoderPending}_getWorker(_,x){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const m=new Worker(this.workerSourceURL);m._callbacks={},m._taskCosts={},m._taskLoad=0,m.postMessage({type:"init",decoderConfig:this.decoderConfig}),m.onmessage=function(S){const C=S.data;switch(C.type){case"decode":m._callbacks[C.id].resolve(C);break;case"error":m._callbacks[C.id].reject(C);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+C.type+'"')}},this.workerPool.push(m)}else this.workerPool.sort(function(m,S){return m._taskLoad>S._taskLoad?-1:1});const b=this.workerPool[this.workerPool.length-1];return b._taskCosts[_]=x,b._taskLoad+=x,b})}_releaseTask(_,x){_._taskLoad-=_._taskCosts[x],delete _._callbacks[x],delete _._taskCosts[x]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}}function y(){let v,_;onmessage=function(C){const M=C.data;switch(M.type){case"init":v=M.decoderConfig,_=new Promise(function(P){v.onModuleLoaded=function(k){P({draco:k})},DracoDecoderModule(v)});break;case"decode":const T=M.buffer,N=M.taskConfig;_.then(P=>{const k=P.draco,D=new k.Decoder,z=new k.DecoderBuffer;z.Init(new Int8Array(T),T.byteLength);try{const Y=x(k,D,z,N),ne=Y.attributes.map(O=>O.array.buffer);Y.index&&ne.push(Y.index.array.buffer),self.postMessage({type:"decode",id:M.id,geometry:Y},ne)}catch(Y){console.error(Y),self.postMessage({type:"error",id:M.id,error:Y.message})}finally{k.destroy(z),k.destroy(D)}});break}};function x(C,M,T,N){const P=N.attributeIDs,k=N.attributeTypes;let D,z;const Y=M.GetEncodedGeometryType(T);if(Y===C.TRIANGULAR_MESH)D=new C.Mesh,z=M.DecodeBufferToMesh(T,D);else if(Y===C.POINT_CLOUD)D=new C.PointCloud,z=M.DecodeBufferToPointCloud(T,D);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!z.ok()||D.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+z.error_msg());const ne={index:null,attributes:[]};for(const O in P){const F=self[k[O]];let U,G;if(N.useUniqueIDs)G=P[O],U=M.GetAttributeByUniqueId(D,G);else{if(G=M.GetAttributeId(D,C[P[O]]),G===-1)continue;U=M.GetAttribute(D,G)}ne.attributes.push(m(C,M,D,O,F,U))}return Y===C.TRIANGULAR_MESH&&(ne.index=b(C,M,D)),C.destroy(D),ne}function b(C,M,T){const P=T.num_faces()*3,k=P*4,D=C._malloc(k);M.GetTrianglesUInt32Array(T,k,D);const z=new Uint32Array(C.HEAPF32.buffer,D,P).slice();return C._free(D),{array:z,itemSize:1}}function m(C,M,T,N,P,k){const D=k.num_components(),Y=T.num_points()*D,ne=Y*P.BYTES_PER_ELEMENT,O=S(C,P),F=C._malloc(ne);M.GetAttributeDataArrayForAllPoints(T,k,O,ne,F);const U=new P(C.HEAPF32.buffer,F,Y).slice();return C._free(F),{name:N,array:U,itemSize:D}}function S(C,M){switch(M){case Float32Array:return C.DT_FLOAT32;case Int8Array:return C.DT_INT8;case Int16Array:return C.DT_INT16;case Int32Array:return C.DT_INT32;case Uint8Array:return C.DT_UINT8;case Uint16Array:return C.DT_UINT16;case Uint32Array:return C.DT_UINT32}}}},"./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js":(c,d,u)=>{u.r(d),u.d(d,{GLTFLoader:()=>A});var f=u("./node_modules/super-three/build/three.module.js");class A extends f.Loader{constructor(ge){super(ge),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(_e){return new b(_e)}),this.register(function(_e){return new P(_e)}),this.register(function(_e){return new k(_e)}),this.register(function(_e){return new S(_e)}),this.register(function(_e){return new C(_e)}),this.register(function(_e){return new M(_e)}),this.register(function(_e){return new T(_e)}),this.register(function(_e){return new x(_e)}),this.register(function(_e){return new N(_e)}),this.register(function(_e){return new m(_e)}),this.register(function(_e){return new v(_e)}),this.register(function(_e){return new D(_e)}),this.register(function(_e){return new z(_e)})}load(ge,_e,Pe,Te){const He=this;let Fe;this.resourcePath!==""?Fe=this.resourcePath:this.path!==""?Fe=this.path:Fe=f.LoaderUtils.extractUrlBase(ge),this.manager.itemStart(ge);const Ue=function(Xe){Te?Te(Xe):console.error(Xe),He.manager.itemError(ge),He.manager.itemEnd(ge)},Ae=new f.FileLoader(this.manager);Ae.setPath(this.path),Ae.setResponseType("arraybuffer"),Ae.setRequestHeader(this.requestHeader),Ae.setWithCredentials(this.withCredentials),Ae.load(ge,function(Xe){try{He.parse(Xe,Fe,function(dt){_e(dt),He.manager.itemEnd(ge)},Ue)}catch(dt){Ue(dt)}},Pe,Ue)}setDRACOLoader(ge){return this.dracoLoader=ge,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(ge){return this.ktx2Loader=ge,this}setMeshoptDecoder(ge){return this.meshoptDecoder=ge,this}register(ge){return this.pluginCallbacks.indexOf(ge)===-1&&this.pluginCallbacks.push(ge),this}unregister(ge){return this.pluginCallbacks.indexOf(ge)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(ge),1),this}parse(ge,_e,Pe,Te){let He;const Fe={},Ue={};if(typeof ge=="string")He=JSON.parse(ge);else if(ge instanceof ArrayBuffer)if(f.LoaderUtils.decodeText(new Uint8Array(ge,0,4))===Y){try{Fe[y.KHR_BINARY_GLTF]=new F(ge)}catch(dt){Te&&Te(dt);return}He=JSON.parse(Fe[y.KHR_BINARY_GLTF].content)}else He=JSON.parse(f.LoaderUtils.decodeText(new Uint8Array(ge)));else He=ge;if(He.asset===void 0||He.asset.version[0]<2){Te&&Te(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Ae=new zn(He,{path:_e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Ae.fileLoader.setRequestHeader(this.requestHeader);for(let Xe=0;Xe<this.pluginCallbacks.length;Xe++){const dt=this.pluginCallbacks[Xe](Ae);Ue[dt.name]=dt,Fe[dt.name]=!0}if(He.extensionsUsed)for(let Xe=0;Xe<He.extensionsUsed.length;++Xe){const dt=He.extensionsUsed[Xe],ue=He.extensionsRequired||[];switch(dt){case y.KHR_MATERIALS_UNLIT:Fe[dt]=new _;break;case y.KHR_DRACO_MESH_COMPRESSION:Fe[dt]=new U(He,this.dracoLoader);break;case y.KHR_TEXTURE_TRANSFORM:Fe[dt]=new G;break;case y.KHR_MESH_QUANTIZATION:Fe[dt]=new V;break;default:ue.indexOf(dt)>=0&&Ue[dt]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+dt+'".')}}Ae.setExtensions(Fe),Ae.setPlugins(Ue),Ae.parse(Pe,Te)}parseAsync(ge,_e){const Pe=this;return new Promise(function(Te,He){Pe.parse(ge,_e,Te,He)})}}function g(){let we={};return{get:function(ge){return we[ge]},add:function(ge,_e){we[ge]=_e},remove:function(ge){delete we[ge]},removeAll:function(){we={}}}}const y={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class v{constructor(ge){this.parser=ge,this.name=y.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const ge=this.parser,_e=this.parser.json.nodes||[];for(let Pe=0,Te=_e.length;Pe<Te;Pe++){const He=_e[Pe];He.extensions&&He.extensions[this.name]&&He.extensions[this.name].light!==void 0&&ge._addNodeRef(this.cache,He.extensions[this.name].light)}}_loadLight(ge){const _e=this.parser,Pe="light:"+ge;let Te=_e.cache.get(Pe);if(Te)return Te;const He=_e.json,Ae=((He.extensions&&He.extensions[this.name]||{}).lights||[])[ge];let Xe;const dt=new f.Color(16777215);Ae.color!==void 0&&dt.fromArray(Ae.color);const ue=Ae.range!==void 0?Ae.range:0;switch(Ae.type){case"directional":Xe=new f.DirectionalLight(dt),Xe.target.position.set(0,0,-1),Xe.add(Xe.target);break;case"point":Xe=new f.PointLight(dt),Xe.distance=ue;break;case"spot":Xe=new f.SpotLight(dt),Xe.distance=ue,Ae.spot=Ae.spot||{},Ae.spot.innerConeAngle=Ae.spot.innerConeAngle!==void 0?Ae.spot.innerConeAngle:0,Ae.spot.outerConeAngle=Ae.spot.outerConeAngle!==void 0?Ae.spot.outerConeAngle:Math.PI/4,Xe.angle=Ae.spot.outerConeAngle,Xe.penumbra=1-Ae.spot.innerConeAngle/Ae.spot.outerConeAngle,Xe.target.position.set(0,0,-1),Xe.add(Xe.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Ae.type)}return Xe.position.set(0,0,0),Xe.decay=2,nt(Xe,Ae),Ae.intensity!==void 0&&(Xe.intensity=Ae.intensity),Xe.name=_e.createUniqueName(Ae.name||"light_"+ge),Te=Promise.resolve(Xe),_e.cache.add(Pe,Te),Te}getDependency(ge,_e){if(ge==="light")return this._loadLight(_e)}createNodeAttachment(ge){const _e=this,Pe=this.parser,He=Pe.json.nodes[ge],Ue=(He.extensions&&He.extensions[this.name]||{}).light;return Ue===void 0?null:this._loadLight(Ue).then(function(Ae){return Pe._getNodeRef(_e.cache,Ue,Ae)})}}class _{constructor(){this.name=y.KHR_MATERIALS_UNLIT}getMaterialType(){return f.MeshBasicMaterial}extendParams(ge,_e,Pe){const Te=[];ge.color=new f.Color(1,1,1),ge.opacity=1;const He=_e.pbrMetallicRoughness;if(He){if(Array.isArray(He.baseColorFactor)){const Fe=He.baseColorFactor;ge.color.fromArray(Fe),ge.opacity=Fe[3]}He.baseColorTexture!==void 0&&Te.push(Pe.assignTexture(ge,"map",He.baseColorTexture,f.sRGBEncoding))}return Promise.all(Te)}}class x{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(ge,_e){const Te=this.parser.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=Te.extensions[this.name].emissiveStrength;return He!==void 0&&(_e.emissiveIntensity=He),Promise.resolve()}}class b{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_CLEARCOAT}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Pe=this.parser,Te=Pe.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=[],Fe=Te.extensions[this.name];if(Fe.clearcoatFactor!==void 0&&(_e.clearcoat=Fe.clearcoatFactor),Fe.clearcoatTexture!==void 0&&He.push(Pe.assignTexture(_e,"clearcoatMap",Fe.clearcoatTexture)),Fe.clearcoatRoughnessFactor!==void 0&&(_e.clearcoatRoughness=Fe.clearcoatRoughnessFactor),Fe.clearcoatRoughnessTexture!==void 0&&He.push(Pe.assignTexture(_e,"clearcoatRoughnessMap",Fe.clearcoatRoughnessTexture)),Fe.clearcoatNormalTexture!==void 0&&(He.push(Pe.assignTexture(_e,"clearcoatNormalMap",Fe.clearcoatNormalTexture)),Fe.clearcoatNormalTexture.scale!==void 0)){const Ue=Fe.clearcoatNormalTexture.scale;_e.clearcoatNormalScale=new f.Vector2(Ue,Ue)}return Promise.all(He)}}class m{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_IRIDESCENCE}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Pe=this.parser,Te=Pe.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=[],Fe=Te.extensions[this.name];return Fe.iridescenceFactor!==void 0&&(_e.iridescence=Fe.iridescenceFactor),Fe.iridescenceTexture!==void 0&&He.push(Pe.assignTexture(_e,"iridescenceMap",Fe.iridescenceTexture)),Fe.iridescenceIor!==void 0&&(_e.iridescenceIOR=Fe.iridescenceIor),_e.iridescenceThicknessRange===void 0&&(_e.iridescenceThicknessRange=[100,400]),Fe.iridescenceThicknessMinimum!==void 0&&(_e.iridescenceThicknessRange[0]=Fe.iridescenceThicknessMinimum),Fe.iridescenceThicknessMaximum!==void 0&&(_e.iridescenceThicknessRange[1]=Fe.iridescenceThicknessMaximum),Fe.iridescenceThicknessTexture!==void 0&&He.push(Pe.assignTexture(_e,"iridescenceThicknessMap",Fe.iridescenceThicknessTexture)),Promise.all(He)}}class S{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_SHEEN}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Pe=this.parser,Te=Pe.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=[];_e.sheenColor=new f.Color(0,0,0),_e.sheenRoughness=0,_e.sheen=1;const Fe=Te.extensions[this.name];return Fe.sheenColorFactor!==void 0&&_e.sheenColor.fromArray(Fe.sheenColorFactor),Fe.sheenRoughnessFactor!==void 0&&(_e.sheenRoughness=Fe.sheenRoughnessFactor),Fe.sheenColorTexture!==void 0&&He.push(Pe.assignTexture(_e,"sheenColorMap",Fe.sheenColorTexture,f.sRGBEncoding)),Fe.sheenRoughnessTexture!==void 0&&He.push(Pe.assignTexture(_e,"sheenRoughnessMap",Fe.sheenRoughnessTexture)),Promise.all(He)}}class C{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_TRANSMISSION}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Pe=this.parser,Te=Pe.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=[],Fe=Te.extensions[this.name];return Fe.transmissionFactor!==void 0&&(_e.transmission=Fe.transmissionFactor),Fe.transmissionTexture!==void 0&&He.push(Pe.assignTexture(_e,"transmissionMap",Fe.transmissionTexture)),Promise.all(He)}}class M{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_VOLUME}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Pe=this.parser,Te=Pe.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=[],Fe=Te.extensions[this.name];_e.thickness=Fe.thicknessFactor!==void 0?Fe.thicknessFactor:0,Fe.thicknessTexture!==void 0&&He.push(Pe.assignTexture(_e,"thicknessMap",Fe.thicknessTexture)),_e.attenuationDistance=Fe.attenuationDistance||1/0;const Ue=Fe.attenuationColor||[1,1,1];return _e.attenuationColor=new f.Color(Ue[0],Ue[1],Ue[2]),Promise.all(He)}}class T{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_IOR}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Te=this.parser.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=Te.extensions[this.name];return _e.ior=He.ior!==void 0?He.ior:1.5,Promise.resolve()}}class N{constructor(ge){this.parser=ge,this.name=y.KHR_MATERIALS_SPECULAR}getMaterialType(ge){const Pe=this.parser.json.materials[ge];return!Pe.extensions||!Pe.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(ge,_e){const Pe=this.parser,Te=Pe.json.materials[ge];if(!Te.extensions||!Te.extensions[this.name])return Promise.resolve();const He=[],Fe=Te.extensions[this.name];_e.specularIntensity=Fe.specularFactor!==void 0?Fe.specularFactor:1,Fe.specularTexture!==void 0&&He.push(Pe.assignTexture(_e,"specularIntensityMap",Fe.specularTexture));const Ue=Fe.specularColorFactor||[1,1,1];return _e.specularColor=new f.Color(Ue[0],Ue[1],Ue[2]),Fe.specularColorTexture!==void 0&&He.push(Pe.assignTexture(_e,"specularColorMap",Fe.specularColorTexture,f.sRGBEncoding)),Promise.all(He)}}class P{constructor(ge){this.parser=ge,this.name=y.KHR_TEXTURE_BASISU}loadTexture(ge){const _e=this.parser,Pe=_e.json,Te=Pe.textures[ge];if(!Te.extensions||!Te.extensions[this.name])return null;const He=Te.extensions[this.name],Fe=_e.options.ktx2Loader;if(!Fe){if(Pe.extensionsRequired&&Pe.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return _e.loadTextureImage(ge,He.source,Fe)}}class k{constructor(ge){this.parser=ge,this.name=y.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(ge){const _e=this.name,Pe=this.parser,Te=Pe.json,He=Te.textures[ge];if(!He.extensions||!He.extensions[_e])return null;const Fe=He.extensions[_e],Ue=Te.images[Fe.source];let Ae=Pe.textureLoader;if(Ue.uri){const Xe=Pe.options.manager.getHandler(Ue.uri);Xe!==null&&(Ae=Xe)}return this.detectSupport().then(function(Xe){if(Xe)return Pe.loadTextureImage(ge,Fe.source,Ae);if(Te.extensionsRequired&&Te.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Pe.loadTexture(ge)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(ge){const _e=new Image;_e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",_e.onload=_e.onerror=function(){ge(_e.height===1)}})),this.isSupported}}class D{constructor(ge){this.name=y.EXT_MESHOPT_COMPRESSION,this.parser=ge}loadBufferView(ge){const _e=this.parser.json,Pe=_e.bufferViews[ge];if(Pe.extensions&&Pe.extensions[this.name]){const Te=Pe.extensions[this.name],He=this.parser.getDependency("buffer",Te.buffer),Fe=this.parser.options.meshoptDecoder;if(!Fe||!Fe.supported){if(_e.extensionsRequired&&_e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return He.then(function(Ue){const Ae=Te.byteOffset||0,Xe=Te.byteLength||0,dt=Te.count,ue=Te.byteStride,q=new Uint8Array(Ue,Ae,Xe);return Fe.decodeGltfBufferAsync?Fe.decodeGltfBufferAsync(dt,ue,q,Te.mode,Te.filter).then(function(re){return re.buffer}):Fe.ready.then(function(){const re=new ArrayBuffer(dt*ue);return Fe.decodeGltfBuffer(new Uint8Array(re),dt,ue,q,Te.mode,Te.filter),re})})}else return null}}class z{constructor(ge){this.name=y.EXT_MESH_GPU_INSTANCING,this.parser=ge}createNodeMesh(ge){const _e=this.parser.json,Pe=_e.nodes[ge];if(!Pe.extensions||!Pe.extensions[this.name]||Pe.mesh===void 0)return null;const Te=_e.meshes[Pe.mesh];for(const Xe of Te.primitives)if(Xe.mode!==ee.TRIANGLES&&Xe.mode!==ee.TRIANGLE_STRIP&&Xe.mode!==ee.TRIANGLE_FAN&&Xe.mode!==void 0)return null;const Fe=Pe.extensions[this.name].attributes,Ue=[],Ae={};for(const Xe in Fe)Ue.push(this.parser.getDependency("accessor",Fe[Xe]).then(dt=>(Ae[Xe]=dt,Ae[Xe])));return Ue.length<1?null:(Ue.push(this.parser.createNodeMesh(ge)),Promise.all(Ue).then(Xe=>{const dt=Xe.pop(),ue=dt.isGroup?dt.children:[dt],q=Xe[0].count,re=[];for(const ke of ue){const be=new f.Matrix4,qe=new f.Vector3,Qe=new f.Quaternion,It=new f.Vector3(1,1,1),Ot=new f.InstancedMesh(ke.geometry,ke.material,q);for(let Jt=0;Jt<q;Jt++)Ae.TRANSLATION&&qe.fromBufferAttribute(Ae.TRANSLATION,Jt),Ae.ROTATION&&Qe.fromBufferAttribute(Ae.ROTATION,Jt),Ae.SCALE&&It.fromBufferAttribute(Ae.SCALE,Jt),Ot.setMatrixAt(Jt,be.compose(qe,Qe,It));for(const Jt in Ae)Jt!=="TRANSLATION"&&Jt!=="ROTATION"&&Jt!=="SCALE"&&ke.geometry.setAttribute(Jt,Ae[Jt]);f.Object3D.prototype.copy.call(Ot,ke),Ot.frustumCulled=!1,this.parser.assignFinalMaterial(Ot),re.push(Ot)}return dt.isGroup?(dt.clear(),dt.add(...re),dt):re[0]}))}}const Y="glTF",ne=12,O={JSON:1313821514,BIN:5130562};class F{constructor(ge){this.name=y.KHR_BINARY_GLTF,this.content=null,this.body=null;const _e=new DataView(ge,0,ne);if(this.header={magic:f.LoaderUtils.decodeText(new Uint8Array(ge.slice(0,4))),version:_e.getUint32(4,!0),length:_e.getUint32(8,!0)},this.header.magic!==Y)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Pe=this.header.length-ne,Te=new DataView(ge,ne);let He=0;for(;He<Pe;){const Fe=Te.getUint32(He,!0);He+=4;const Ue=Te.getUint32(He,!0);if(He+=4,Ue===O.JSON){const Ae=new Uint8Array(ge,ne+He,Fe);this.content=f.LoaderUtils.decodeText(Ae)}else if(Ue===O.BIN){const Ae=ne+He;this.body=ge.slice(Ae,Ae+Fe)}He+=Fe}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class U{constructor(ge,_e){if(!_e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=y.KHR_DRACO_MESH_COMPRESSION,this.json=ge,this.dracoLoader=_e,this.dracoLoader.preload()}decodePrimitive(ge,_e){const Pe=this.json,Te=this.dracoLoader,He=ge.extensions[this.name].bufferView,Fe=ge.extensions[this.name].attributes,Ue={},Ae={},Xe={};for(const dt in Fe){const ue=rt[dt]||dt.toLowerCase();Ue[ue]=Fe[dt]}for(const dt in ge.attributes){const ue=rt[dt]||dt.toLowerCase();if(Fe[dt]!==void 0){const q=Pe.accessors[ge.attributes[dt]],re=he[q.componentType];Xe[ue]=re.name,Ae[ue]=q.normalized===!0}}return _e.getDependency("bufferView",He).then(function(dt){return new Promise(function(ue){Te.decodeDracoFile(dt,function(q){for(const re in q.attributes){const ke=q.attributes[re],be=Ae[re];be!==void 0&&(ke.normalized=be)}ue(q)},Ue,Xe)})})}}class G{constructor(){this.name=y.KHR_TEXTURE_TRANSFORM}extendTexture(ge,_e){return _e.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),_e.offset===void 0&&_e.rotation===void 0&&_e.scale===void 0||(ge=ge.clone(),_e.offset!==void 0&&ge.offset.fromArray(_e.offset),_e.rotation!==void 0&&(ge.rotation=_e.rotation),_e.scale!==void 0&&ge.repeat.fromArray(_e.scale),ge.needsUpdate=!0),ge}}class V{constructor(){this.name=y.KHR_MESH_QUANTIZATION}}class K extends f.Interpolant{constructor(ge,_e,Pe,Te){super(ge,_e,Pe,Te)}copySampleValue_(ge){const _e=this.resultBuffer,Pe=this.sampleValues,Te=this.valueSize,He=ge*Te*3+Te;for(let Fe=0;Fe!==Te;Fe++)_e[Fe]=Pe[He+Fe];return _e}interpolate_(ge,_e,Pe,Te){const He=this.resultBuffer,Fe=this.sampleValues,Ue=this.valueSize,Ae=Ue*2,Xe=Ue*3,dt=Te-_e,ue=(Pe-_e)/dt,q=ue*ue,re=q*ue,ke=ge*Xe,be=ke-Xe,qe=-2*re+3*q,Qe=re-q,It=1-qe,Ot=Qe-q+ue;for(let Jt=0;Jt!==Ue;Jt++){const dn=Fe[be+Jt+Ue],Sn=Fe[be+Jt+Ae]*dt,er=Fe[ke+Jt+Ue],Pi=Fe[ke+Jt]*dt;He[Jt]=It*dn+Ot*Sn+qe*er+Qe*Pi}return He}}const W=new f.Quaternion;class J extends K{interpolate_(ge,_e,Pe,Te){const He=super.interpolate_(ge,_e,Pe,Te);return W.fromArray(He).normalize().toArray(He),He}}const ee={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},he={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},me={9728:f.NearestFilter,9729:f.LinearFilter,9984:f.NearestMipmapNearestFilter,9985:f.LinearMipmapNearestFilter,9986:f.NearestMipmapLinearFilter,9987:f.LinearMipmapLinearFilter},Be={33071:f.ClampToEdgeWrapping,33648:f.MirroredRepeatWrapping,10497:f.RepeatWrapping},Se={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ge={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},st={CUBICSPLINE:void 0,LINEAR:f.InterpolateLinear,STEP:f.InterpolateDiscrete},mt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ft(we){return we.DefaultMaterial===void 0&&(we.DefaultMaterial=new f.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:f.FrontSide})),we.DefaultMaterial}function Pt(we,ge,_e){for(const Pe in _e.extensions)we[Pe]===void 0&&(ge.userData.gltfExtensions=ge.userData.gltfExtensions||{},ge.userData.gltfExtensions[Pe]=_e.extensions[Pe])}function nt(we,ge){ge.extras!==void 0&&(typeof ge.extras=="object"?Object.assign(we.userData,ge.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+ge.extras))}function Fn(we,ge,_e){let Pe=!1,Te=!1,He=!1;for(let Xe=0,dt=ge.length;Xe<dt;Xe++){const ue=ge[Xe];if(ue.POSITION!==void 0&&(Pe=!0),ue.NORMAL!==void 0&&(Te=!0),ue.COLOR_0!==void 0&&(He=!0),Pe&&Te&&He)break}if(!Pe&&!Te&&!He)return Promise.resolve(we);const Fe=[],Ue=[],Ae=[];for(let Xe=0,dt=ge.length;Xe<dt;Xe++){const ue=ge[Xe];if(Pe){const q=ue.POSITION!==void 0?_e.getDependency("accessor",ue.POSITION):we.attributes.position;Fe.push(q)}if(Te){const q=ue.NORMAL!==void 0?_e.getDependency("accessor",ue.NORMAL):we.attributes.normal;Ue.push(q)}if(He){const q=ue.COLOR_0!==void 0?_e.getDependency("accessor",ue.COLOR_0):we.attributes.color;Ae.push(q)}}return Promise.all([Promise.all(Fe),Promise.all(Ue),Promise.all(Ae)]).then(function(Xe){const dt=Xe[0],ue=Xe[1],q=Xe[2];return Pe&&(we.morphAttributes.position=dt),Te&&(we.morphAttributes.normal=ue),He&&(we.morphAttributes.color=q),we.morphTargetsRelative=!0,we})}function Xt(we,ge){if(we.updateMorphTargets(),ge.weights!==void 0)for(let _e=0,Pe=ge.weights.length;_e<Pe;_e++)we.morphTargetInfluences[_e]=ge.weights[_e];if(ge.extras&&Array.isArray(ge.extras.targetNames)){const _e=ge.extras.targetNames;if(we.morphTargetInfluences.length===_e.length){we.morphTargetDictionary={};for(let Pe=0,Te=_e.length;Pe<Te;Pe++)we.morphTargetDictionary[_e[Pe]]=Pe}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function on(we){const ge=we.extensions&&we.extensions[y.KHR_DRACO_MESH_COMPRESSION];let _e;return ge?_e="draco:"+ge.bufferView+":"+ge.indices+":"+nn(ge.attributes):_e=we.indices+":"+nn(we.attributes)+":"+we.mode,_e}function nn(we){let ge="";const _e=Object.keys(we).sort();for(let Pe=0,Te=_e.length;Pe<Te;Pe++)ge+=_e[Pe]+":"+we[_e[Pe]]+";";return ge}function vn(we){switch(we){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Rn(we){return we.search(/\.jpe?g($|\?)/i)>0||we.search(/^data\:image\/jpeg/)===0?"image/jpeg":we.search(/\.webp($|\?)/i)>0||we.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class zn{constructor(ge={},_e={}){this.json=ge,this.extensions={},this.plugins={},this.options=_e,this.cache=new g,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Pe=!1,Te=!1,He=-1;typeof navigator<"u"&&(Pe=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Te=navigator.userAgent.indexOf("Firefox")>-1,He=Te?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Pe||Te&&He<98?this.textureLoader=new f.TextureLoader(this.options.manager):this.textureLoader=new f.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(ge){this.extensions=ge}setPlugins(ge){this.plugins=ge}parse(ge,_e){const Pe=this,Te=this.json,He=this.extensions;this.cache.removeAll(),this._invokeAll(function(Fe){return Fe._markDefs&&Fe._markDefs()}),Promise.all(this._invokeAll(function(Fe){return Fe.beforeRoot&&Fe.beforeRoot()})).then(function(){return Promise.all([Pe.getDependencies("scene"),Pe.getDependencies("animation"),Pe.getDependencies("camera")])}).then(function(Fe){const Ue={scene:Fe[0][Te.scene||0],scenes:Fe[0],animations:Fe[1],cameras:Fe[2],asset:Te.asset,parser:Pe,userData:{}};Pt(He,Ue,Te),nt(Ue,Te),Promise.all(Pe._invokeAll(function(Ae){return Ae.afterRoot&&Ae.afterRoot(Ue)})).then(function(){ge(Ue)})}).catch(_e)}_markDefs(){const ge=this.json.nodes||[],_e=this.json.skins||[],Pe=this.json.meshes||[];for(let Te=0,He=_e.length;Te<He;Te++){const Fe=_e[Te].joints;for(let Ue=0,Ae=Fe.length;Ue<Ae;Ue++)ge[Fe[Ue]].isBone=!0}for(let Te=0,He=ge.length;Te<He;Te++){const Fe=ge[Te];Fe.mesh!==void 0&&(this._addNodeRef(this.meshCache,Fe.mesh),Fe.skin!==void 0&&(Pe[Fe.mesh].isSkinnedMesh=!0)),Fe.camera!==void 0&&this._addNodeRef(this.cameraCache,Fe.camera)}}_addNodeRef(ge,_e){_e!==void 0&&(ge.refs[_e]===void 0&&(ge.refs[_e]=ge.uses[_e]=0),ge.refs[_e]++)}_getNodeRef(ge,_e,Pe){if(ge.refs[_e]<=1)return Pe;const Te=Pe.clone(),He=(Fe,Ue)=>{const Ae=this.associations.get(Fe);Ae!=null&&this.associations.set(Ue,Ae);for(const[Xe,dt]of Fe.children.entries())He(dt,Ue.children[Xe])};return He(Pe,Te),Te.name+="_instance_"+ge.uses[_e]++,Te}_invokeOne(ge){const _e=Object.values(this.plugins);_e.push(this);for(let Pe=0;Pe<_e.length;Pe++){const Te=ge(_e[Pe]);if(Te)return Te}return null}_invokeAll(ge){const _e=Object.values(this.plugins);_e.unshift(this);const Pe=[];for(let Te=0;Te<_e.length;Te++){const He=ge(_e[Te]);He&&Pe.push(He)}return Pe}getDependency(ge,_e){const Pe=ge+":"+_e;let Te=this.cache.get(Pe);if(!Te){switch(ge){case"scene":Te=this.loadScene(_e);break;case"node":Te=this.loadNode(_e);break;case"mesh":Te=this._invokeOne(function(He){return He.loadMesh&&He.loadMesh(_e)});break;case"accessor":Te=this.loadAccessor(_e);break;case"bufferView":Te=this._invokeOne(function(He){return He.loadBufferView&&He.loadBufferView(_e)});break;case"buffer":Te=this.loadBuffer(_e);break;case"material":Te=this._invokeOne(function(He){return He.loadMaterial&&He.loadMaterial(_e)});break;case"texture":Te=this._invokeOne(function(He){return He.loadTexture&&He.loadTexture(_e)});break;case"skin":Te=this.loadSkin(_e);break;case"animation":Te=this._invokeOne(function(He){return He.loadAnimation&&He.loadAnimation(_e)});break;case"camera":Te=this.loadCamera(_e);break;default:if(Te=this._invokeOne(function(He){return He!=this&&He.getDependency&&He.getDependency(ge,_e)}),!Te)throw new Error("Unknown type: "+ge);break}this.cache.add(Pe,Te)}return Te}getDependencies(ge){let _e=this.cache.get(ge);if(!_e){const Pe=this,Te=this.json[ge+(ge==="mesh"?"es":"s")]||[];_e=Promise.all(Te.map(function(He,Fe){return Pe.getDependency(ge,Fe)})),this.cache.add(ge,_e)}return _e}loadBuffer(ge){const _e=this.json.buffers[ge],Pe=this.fileLoader;if(_e.type&&_e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_e.type+" buffer type is not supported.");if(_e.uri===void 0&&ge===0)return Promise.resolve(this.extensions[y.KHR_BINARY_GLTF].body);const Te=this.options;return new Promise(function(He,Fe){Pe.load(f.LoaderUtils.resolveURL(_e.uri,Te.path),He,void 0,function(){Fe(new Error('THREE.GLTFLoader: Failed to load buffer "'+_e.uri+'".'))})})}loadBufferView(ge){const _e=this.json.bufferViews[ge];return this.getDependency("buffer",_e.buffer).then(function(Pe){const Te=_e.byteLength||0,He=_e.byteOffset||0;return Pe.slice(He,He+Te)})}loadAccessor(ge){const _e=this,Pe=this.json,Te=this.json.accessors[ge];if(Te.bufferView===void 0&&Te.sparse===void 0){const Fe=Se[Te.type],Ue=he[Te.componentType],Ae=Te.normalized===!0,Xe=new Ue(Te.count*Fe);return Promise.resolve(new f.BufferAttribute(Xe,Fe,Ae))}const He=[];return Te.bufferView!==void 0?He.push(this.getDependency("bufferView",Te.bufferView)):He.push(null),Te.sparse!==void 0&&(He.push(this.getDependency("bufferView",Te.sparse.indices.bufferView)),He.push(this.getDependency("bufferView",Te.sparse.values.bufferView))),Promise.all(He).then(function(Fe){const Ue=Fe[0],Ae=Se[Te.type],Xe=he[Te.componentType],dt=Xe.BYTES_PER_ELEMENT,ue=dt*Ae,q=Te.byteOffset||0,re=Te.bufferView!==void 0?Pe.bufferViews[Te.bufferView].byteStride:void 0,ke=Te.normalized===!0;let be,qe;if(re&&re!==ue){const Qe=Math.floor(q/re),It="InterleavedBuffer:"+Te.bufferView+":"+Te.componentType+":"+Qe+":"+Te.count;let Ot=_e.cache.get(It);Ot||(be=new Xe(Ue,Qe*re,Te.count*re/dt),Ot=new f.InterleavedBuffer(be,re/dt),_e.cache.add(It,Ot)),qe=new f.InterleavedBufferAttribute(Ot,Ae,q%re/dt,ke)}else Ue===null?be=new Xe(Te.count*Ae):be=new Xe(Ue,q,Te.count*Ae),qe=new f.BufferAttribute(be,Ae,ke);if(Te.sparse!==void 0){const Qe=Se.SCALAR,It=he[Te.sparse.indices.componentType],Ot=Te.sparse.indices.byteOffset||0,Jt=Te.sparse.values.byteOffset||0,dn=new It(Fe[1],Ot,Te.sparse.count*Qe),Sn=new Xe(Fe[2],Jt,Te.sparse.count*Ae);Ue!==null&&(qe=new f.BufferAttribute(qe.array.slice(),qe.itemSize,qe.normalized));for(let er=0,Pi=dn.length;er<Pi;er++){const Ir=dn[er];if(qe.setX(Ir,Sn[er*Ae]),Ae>=2&&qe.setY(Ir,Sn[er*Ae+1]),Ae>=3&&qe.setZ(Ir,Sn[er*Ae+2]),Ae>=4&&qe.setW(Ir,Sn[er*Ae+3]),Ae>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return qe})}loadTexture(ge){const _e=this.json,Pe=this.options,He=_e.textures[ge].source,Fe=_e.images[He];let Ue=this.textureLoader;if(Fe.uri){const Ae=Pe.manager.getHandler(Fe.uri);Ae!==null&&(Ue=Ae)}return this.loadTextureImage(ge,He,Ue)}loadTextureImage(ge,_e,Pe){const Te=this,He=this.json,Fe=He.textures[ge],Ue=He.images[_e],Ae=(Ue.uri||Ue.bufferView)+":"+Fe.sampler;if(this.textureCache[Ae])return this.textureCache[Ae];const Xe=this.loadImageSource(_e,Pe).then(function(dt){dt.flipY=!1,dt.name=Fe.name||Ue.name||"";const q=(He.samplers||{})[Fe.sampler]||{};return dt.magFilter=me[q.magFilter]||f.LinearFilter,dt.minFilter=me[q.minFilter]||f.LinearMipmapLinearFilter,dt.wrapS=Be[q.wrapS]||f.RepeatWrapping,dt.wrapT=Be[q.wrapT]||f.RepeatWrapping,Te.associations.set(dt,{textures:ge}),dt}).catch(function(){return null});return this.textureCache[Ae]=Xe,Xe}loadImageSource(ge,_e){const Pe=this,Te=this.json,He=this.options;if(this.sourceCache[ge]!==void 0)return this.sourceCache[ge].then(ue=>ue.clone());const Fe=Te.images[ge],Ue=self.URL||self.webkitURL;let Ae=Fe.uri||"",Xe=!1;if(Fe.bufferView!==void 0)Ae=Pe.getDependency("bufferView",Fe.bufferView).then(function(ue){Xe=!0;const q=new Blob([ue],{type:Fe.mimeType});return Ae=Ue.createObjectURL(q),Ae});else if(Fe.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+ge+" is missing URI and bufferView");const dt=Promise.resolve(Ae).then(function(ue){return new Promise(function(q,re){let ke=q;_e.isImageBitmapLoader===!0&&(ke=function(be){const qe=new f.Texture(be);qe.needsUpdate=!0,q(qe)}),_e.load(f.LoaderUtils.resolveURL(ue,He.path),ke,void 0,re)})}).then(function(ue){return Xe===!0&&Ue.revokeObjectURL(Ae),ue.userData.mimeType=Fe.mimeType||Rn(Fe.uri),ue}).catch(function(ue){throw console.error("THREE.GLTFLoader: Couldn't load texture",Ae),ue});return this.sourceCache[ge]=dt,dt}assignTexture(ge,_e,Pe,Te){const He=this;return this.getDependency("texture",Pe.index).then(function(Fe){if(!Fe)return null;if(Pe.texCoord!==void 0&&Pe.texCoord!=0&&!(_e==="aoMap"&&Pe.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Pe.texCoord+" for texture "+_e+" not yet supported."),He.extensions[y.KHR_TEXTURE_TRANSFORM]){const Ue=Pe.extensions!==void 0?Pe.extensions[y.KHR_TEXTURE_TRANSFORM]:void 0;if(Ue){const Ae=He.associations.get(Fe);Fe=He.extensions[y.KHR_TEXTURE_TRANSFORM].extendTexture(Fe,Ue),He.associations.set(Fe,Ae)}}return Te!==void 0&&(Fe.encoding=Te),ge[_e]=Fe,Fe})}assignFinalMaterial(ge){const _e=ge.geometry;let Pe=ge.material;const Te=_e.attributes.tangent===void 0,He=_e.attributes.color!==void 0,Fe=_e.attributes.normal===void 0;if(ge.isPoints){const Ue="PointsMaterial:"+Pe.uuid;let Ae=this.cache.get(Ue);Ae||(Ae=new f.PointsMaterial,f.Material.prototype.copy.call(Ae,Pe),Ae.color.copy(Pe.color),Ae.map=Pe.map,Ae.sizeAttenuation=!1,this.cache.add(Ue,Ae)),Pe=Ae}else if(ge.isLine){const Ue="LineBasicMaterial:"+Pe.uuid;let Ae=this.cache.get(Ue);Ae||(Ae=new f.LineBasicMaterial,f.Material.prototype.copy.call(Ae,Pe),Ae.color.copy(Pe.color),this.cache.add(Ue,Ae)),Pe=Ae}if(Te||He||Fe){let Ue="ClonedMaterial:"+Pe.uuid+":";Te&&(Ue+="derivative-tangents:"),He&&(Ue+="vertex-colors:"),Fe&&(Ue+="flat-shading:");let Ae=this.cache.get(Ue);Ae||(Ae=Pe.clone(),He&&(Ae.vertexColors=!0),Fe&&(Ae.flatShading=!0),Te&&(Ae.normalScale&&(Ae.normalScale.y*=-1),Ae.clearcoatNormalScale&&(Ae.clearcoatNormalScale.y*=-1)),this.cache.add(Ue,Ae),this.associations.set(Ae,this.associations.get(Pe))),Pe=Ae}Pe.aoMap&&_e.attributes.uv2===void 0&&_e.attributes.uv!==void 0&&_e.setAttribute("uv2",_e.attributes.uv),ge.material=Pe}getMaterialType(){return f.MeshStandardMaterial}loadMaterial(ge){const _e=this,Pe=this.json,Te=this.extensions,He=Pe.materials[ge];let Fe;const Ue={},Ae=He.extensions||{},Xe=[];if(Ae[y.KHR_MATERIALS_UNLIT]){const ue=Te[y.KHR_MATERIALS_UNLIT];Fe=ue.getMaterialType(),Xe.push(ue.extendParams(Ue,He,_e))}else{const ue=He.pbrMetallicRoughness||{};if(Ue.color=new f.Color(1,1,1),Ue.opacity=1,Array.isArray(ue.baseColorFactor)){const q=ue.baseColorFactor;Ue.color.fromArray(q),Ue.opacity=q[3]}ue.baseColorTexture!==void 0&&Xe.push(_e.assignTexture(Ue,"map",ue.baseColorTexture,f.sRGBEncoding)),Ue.metalness=ue.metallicFactor!==void 0?ue.metallicFactor:1,Ue.roughness=ue.roughnessFactor!==void 0?ue.roughnessFactor:1,ue.metallicRoughnessTexture!==void 0&&(Xe.push(_e.assignTexture(Ue,"metalnessMap",ue.metallicRoughnessTexture)),Xe.push(_e.assignTexture(Ue,"roughnessMap",ue.metallicRoughnessTexture))),Fe=this._invokeOne(function(q){return q.getMaterialType&&q.getMaterialType(ge)}),Xe.push(Promise.all(this._invokeAll(function(q){return q.extendMaterialParams&&q.extendMaterialParams(ge,Ue)})))}He.doubleSided===!0&&(Ue.side=f.DoubleSide);const dt=He.alphaMode||mt.OPAQUE;if(dt===mt.BLEND?(Ue.transparent=!0,Ue.depthWrite=!1):(Ue.transparent=!1,dt===mt.MASK&&(Ue.alphaTest=He.alphaCutoff!==void 0?He.alphaCutoff:.5)),He.normalTexture!==void 0&&Fe!==f.MeshBasicMaterial&&(Xe.push(_e.assignTexture(Ue,"normalMap",He.normalTexture)),Ue.normalScale=new f.Vector2(1,1),He.normalTexture.scale!==void 0)){const ue=He.normalTexture.scale;Ue.normalScale.set(ue,ue)}return He.occlusionTexture!==void 0&&Fe!==f.MeshBasicMaterial&&(Xe.push(_e.assignTexture(Ue,"aoMap",He.occlusionTexture)),He.occlusionTexture.strength!==void 0&&(Ue.aoMapIntensity=He.occlusionTexture.strength)),He.emissiveFactor!==void 0&&Fe!==f.MeshBasicMaterial&&(Ue.emissive=new f.Color().fromArray(He.emissiveFactor)),He.emissiveTexture!==void 0&&Fe!==f.MeshBasicMaterial&&Xe.push(_e.assignTexture(Ue,"emissiveMap",He.emissiveTexture,f.sRGBEncoding)),Promise.all(Xe).then(function(){const ue=new Fe(Ue);return He.name&&(ue.name=He.name),nt(ue,He),_e.associations.set(ue,{materials:ge}),He.extensions&&Pt(Te,ue,He),ue})}createUniqueName(ge){const _e=f.PropertyBinding.sanitizeNodeName(ge||"");let Pe=_e;for(let Te=1;this.nodeNamesUsed[Pe];++Te)Pe=_e+"_"+Te;return this.nodeNamesUsed[Pe]=!0,Pe}loadGeometries(ge){const _e=this,Pe=this.extensions,Te=this.primitiveCache;function He(Ue){return Pe[y.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Ue,_e).then(function(Ae){return Ti(Ae,Ue,_e)})}const Fe=[];for(let Ue=0,Ae=ge.length;Ue<Ae;Ue++){const Xe=ge[Ue],dt=on(Xe),ue=Te[dt];if(ue)Fe.push(ue.promise);else{let q;Xe.extensions&&Xe.extensions[y.KHR_DRACO_MESH_COMPRESSION]?q=He(Xe):q=Ti(new f.BufferGeometry,Xe,_e),Te[dt]={primitive:Xe,promise:q},Fe.push(q)}}return Promise.all(Fe)}loadMesh(ge){const _e=this,Pe=this.json,Te=this.extensions,He=Pe.meshes[ge],Fe=He.primitives,Ue=[];for(let Ae=0,Xe=Fe.length;Ae<Xe;Ae++){const dt=Fe[Ae].material===void 0?Ft(this.cache):this.getDependency("material",Fe[Ae].material);Ue.push(dt)}return Ue.push(_e.loadGeometries(Fe)),Promise.all(Ue).then(function(Ae){const Xe=Ae.slice(0,Ae.length-1),dt=Ae[Ae.length-1],ue=[];for(let re=0,ke=dt.length;re<ke;re++){const be=dt[re],qe=Fe[re];let Qe;const It=Xe[re];if(qe.mode===ee.TRIANGLES||qe.mode===ee.TRIANGLE_STRIP||qe.mode===ee.TRIANGLE_FAN||qe.mode===void 0)Qe=He.isSkinnedMesh===!0?new f.SkinnedMesh(be,It):new f.Mesh(be,It),Qe.isSkinnedMesh===!0&&!Qe.geometry.attributes.skinWeight.normalized&&Qe.normalizeSkinWeights(),qe.mode===ee.TRIANGLE_STRIP?Qe.geometry=Je(Qe.geometry,f.TriangleStripDrawMode):qe.mode===ee.TRIANGLE_FAN&&(Qe.geometry=Je(Qe.geometry,f.TriangleFanDrawMode));else if(qe.mode===ee.LINES)Qe=new f.LineSegments(be,It);else if(qe.mode===ee.LINE_STRIP)Qe=new f.Line(be,It);else if(qe.mode===ee.LINE_LOOP)Qe=new f.LineLoop(be,It);else if(qe.mode===ee.POINTS)Qe=new f.Points(be,It);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+qe.mode);Object.keys(Qe.geometry.morphAttributes).length>0&&Xt(Qe,He),Qe.name=_e.createUniqueName(He.name||"mesh_"+ge),nt(Qe,He),qe.extensions&&Pt(Te,Qe,qe),_e.assignFinalMaterial(Qe),ue.push(Qe)}for(let re=0,ke=ue.length;re<ke;re++)_e.associations.set(ue[re],{meshes:ge,primitives:re});if(ue.length===1)return ue[0];const q=new f.Group;_e.associations.set(q,{meshes:ge});for(let re=0,ke=ue.length;re<ke;re++)q.add(ue[re]);return q})}loadCamera(ge){let _e;const Pe=this.json.cameras[ge],Te=Pe[Pe.type];if(!Te){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Pe.type==="perspective"?_e=new f.PerspectiveCamera(f.MathUtils.radToDeg(Te.yfov),Te.aspectRatio||1,Te.znear||1,Te.zfar||2e6):Pe.type==="orthographic"&&(_e=new f.OrthographicCamera(-Te.xmag,Te.xmag,Te.ymag,-Te.ymag,Te.znear,Te.zfar)),Pe.name&&(_e.name=this.createUniqueName(Pe.name)),nt(_e,Pe),Promise.resolve(_e)}loadSkin(ge){const _e=this.json.skins[ge],Pe=[];for(let Te=0,He=_e.joints.length;Te<He;Te++)Pe.push(this.getDependency("node",_e.joints[Te]));return _e.inverseBindMatrices!==void 0?Pe.push(this.getDependency("accessor",_e.inverseBindMatrices)):Pe.push(null),Promise.all(Pe).then(function(Te){const He=Te.pop(),Fe=Te,Ue=[],Ae=[];for(let Xe=0,dt=Fe.length;Xe<dt;Xe++){const ue=Fe[Xe];if(ue){Ue.push(ue);const q=new f.Matrix4;He!==null&&q.fromArray(He.array,Xe*16),Ae.push(q)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_e.joints[Xe])}return new f.Skeleton(Ue,Ae)})}loadAnimation(ge){const Pe=this.json.animations[ge],Te=[],He=[],Fe=[],Ue=[],Ae=[];for(let Xe=0,dt=Pe.channels.length;Xe<dt;Xe++){const ue=Pe.channels[Xe],q=Pe.samplers[ue.sampler],re=ue.target,ke=re.node,be=Pe.parameters!==void 0?Pe.parameters[q.input]:q.input,qe=Pe.parameters!==void 0?Pe.parameters[q.output]:q.output;Te.push(this.getDependency("node",ke)),He.push(this.getDependency("accessor",be)),Fe.push(this.getDependency("accessor",qe)),Ue.push(q),Ae.push(re)}return Promise.all([Promise.all(Te),Promise.all(He),Promise.all(Fe),Promise.all(Ue),Promise.all(Ae)]).then(function(Xe){const dt=Xe[0],ue=Xe[1],q=Xe[2],re=Xe[3],ke=Xe[4],be=[];for(let Qe=0,It=dt.length;Qe<It;Qe++){const Ot=dt[Qe],Jt=ue[Qe],dn=q[Qe],Sn=re[Qe],er=ke[Qe];if(Ot===void 0)continue;Ot.updateMatrix();let Pi;switch(Ge[er.path]){case Ge.weights:Pi=f.NumberKeyframeTrack;break;case Ge.rotation:Pi=f.QuaternionKeyframeTrack;break;case Ge.position:case Ge.scale:default:Pi=f.VectorKeyframeTrack;break}const Ir=Ot.name?Ot.name:Ot.uuid,_i=Sn.interpolation!==void 0?st[Sn.interpolation]:f.InterpolateLinear,Tn=[];Ge[er.path]===Ge.weights?Ot.traverse(function(mn){mn.morphTargetInfluences&&Tn.push(mn.name?mn.name:mn.uuid)}):Tn.push(Ir);let Qt=dn.array;if(dn.normalized){const mn=vn(Qt.constructor),ri=new Float32Array(Qt.length);for(let Cn=0,li=Qt.length;Cn<li;Cn++)ri[Cn]=Qt[Cn]*mn;Qt=ri}for(let mn=0,ri=Tn.length;mn<ri;mn++){const Cn=new Pi(Tn[mn]+"."+Ge[er.path],Jt.array,Qt,_i);Sn.interpolation==="CUBICSPLINE"&&(Cn.createInterpolant=function(bi){const Li=this instanceof f.QuaternionKeyframeTrack?J:K;return new Li(this.times,this.values,this.getValueSize()/3,bi)},Cn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),be.push(Cn)}}const qe=Pe.name?Pe.name:"animation_"+ge;return new f.AnimationClip(qe,void 0,be)})}createNodeMesh(ge){const _e=this.json,Pe=this,Te=_e.nodes[ge];return Te.mesh===void 0?null:Pe.getDependency("mesh",Te.mesh).then(function(He){const Fe=Pe._getNodeRef(Pe.meshCache,Te.mesh,He);return Te.weights!==void 0&&Fe.traverse(function(Ue){if(Ue.isMesh)for(let Ae=0,Xe=Te.weights.length;Ae<Xe;Ae++)Ue.morphTargetInfluences[Ae]=Te.weights[Ae]}),Fe})}loadNode(ge){const _e=this.json,Pe=this.extensions,Te=this,He=_e.nodes[ge],Fe=He.name?Te.createUniqueName(He.name):"";return function(){const Ue=[],Ae=Te._invokeOne(function(Xe){return Xe.createNodeMesh&&Xe.createNodeMesh(ge)});return Ae&&Ue.push(Ae),He.camera!==void 0&&Ue.push(Te.getDependency("camera",He.camera).then(function(Xe){return Te._getNodeRef(Te.cameraCache,He.camera,Xe)})),Te._invokeAll(function(Xe){return Xe.createNodeAttachment&&Xe.createNodeAttachment(ge)}).forEach(function(Xe){Ue.push(Xe)}),Promise.all(Ue)}().then(function(Ue){let Ae;if(He.isBone===!0?Ae=new f.Bone:Ue.length>1?Ae=new f.Group:Ue.length===1?Ae=Ue[0]:Ae=new f.Object3D,Ae!==Ue[0])for(let Xe=0,dt=Ue.length;Xe<dt;Xe++)Ae.add(Ue[Xe]);if(He.name&&(Ae.userData.name=He.name,Ae.name=Fe),nt(Ae,He),He.extensions&&Pt(Pe,Ae,He),He.matrix!==void 0){const Xe=new f.Matrix4;Xe.fromArray(He.matrix),Ae.applyMatrix4(Xe)}else He.translation!==void 0&&Ae.position.fromArray(He.translation),He.rotation!==void 0&&Ae.quaternion.fromArray(He.rotation),He.scale!==void 0&&Ae.scale.fromArray(He.scale);return Te.associations.has(Ae)||Te.associations.set(Ae,{}),Te.associations.get(Ae).nodes=ge,Ae})}loadScene(ge){const _e=this.json,Pe=this.extensions,Te=this.json.scenes[ge],He=this,Fe=new f.Group;Te.name&&(Fe.name=He.createUniqueName(Te.name)),nt(Fe,Te),Te.extensions&&Pt(Pe,Fe,Te);const Ue=Te.nodes||[],Ae=[];for(let Xe=0,dt=Ue.length;Xe<dt;Xe++)Ae.push(Wn(Ue[Xe],Fe,_e,He));return Promise.all(Ae).then(function(){const Xe=dt=>{const ue=new Map;for(const[q,re]of He.associations)(q instanceof f.Material||q instanceof f.Texture)&&ue.set(q,re);return dt.traverse(q=>{const re=He.associations.get(q);re!=null&&ue.set(q,re)}),ue};return He.associations=Xe(Fe),Fe})}}function Wn(we,ge,_e,Pe){const Te=_e.nodes[we];return Pe.getDependency("node",we).then(function(He){return Te.skin===void 0?He:Pe.getDependency("skin",Te.skin).then(function(Fe){return He.traverse(function(Ue){Ue.isSkinnedMesh&&Ue.bind(Fe,Ue.matrixWorld)}),He})}).then(function(He){ge.add(He);const Fe=[];if(Te.children){const Ue=Te.children;for(let Ae=0,Xe=Ue.length;Ae<Xe;Ae++){const dt=Ue[Ae];Fe.push(Wn(dt,He,_e,Pe))}}return Promise.all(Fe)})}function Ai(we,ge,_e){const Pe=ge.attributes,Te=new f.Box3;if(Pe.POSITION!==void 0){const Ue=_e.json.accessors[Pe.POSITION],Ae=Ue.min,Xe=Ue.max;if(Ae!==void 0&&Xe!==void 0){if(Te.set(new f.Vector3(Ae[0],Ae[1],Ae[2]),new f.Vector3(Xe[0],Xe[1],Xe[2])),Ue.normalized){const dt=vn(he[Ue.componentType]);Te.min.multiplyScalar(dt),Te.max.multiplyScalar(dt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const He=ge.targets;if(He!==void 0){const Ue=new f.Vector3,Ae=new f.Vector3;for(let Xe=0,dt=He.length;Xe<dt;Xe++){const ue=He[Xe];if(ue.POSITION!==void 0){const q=_e.json.accessors[ue.POSITION],re=q.min,ke=q.max;if(re!==void 0&&ke!==void 0){if(Ae.setX(Math.max(Math.abs(re[0]),Math.abs(ke[0]))),Ae.setY(Math.max(Math.abs(re[1]),Math.abs(ke[1]))),Ae.setZ(Math.max(Math.abs(re[2]),Math.abs(ke[2]))),q.normalized){const be=vn(he[q.componentType]);Ae.multiplyScalar(be)}Ue.max(Ae)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}Te.expandByVector(Ue)}we.boundingBox=Te;const Fe=new f.Sphere;Te.getCenter(Fe.center),Fe.radius=Te.min.distanceTo(Te.max)/2,we.boundingSphere=Fe}function Ti(we,ge,_e){const Pe=ge.attributes,Te=[];function He(Fe,Ue){return _e.getDependency("accessor",Fe).then(function(Ae){we.setAttribute(Ue,Ae)})}for(const Fe in Pe){const Ue=rt[Fe]||Fe.toLowerCase();Ue in we.attributes||Te.push(He(Pe[Fe],Ue))}if(ge.indices!==void 0&&!we.index){const Fe=_e.getDependency("accessor",ge.indices).then(function(Ue){we.setIndex(Ue)});Te.push(Fe)}return nt(we,ge),Ai(we,ge,_e),Promise.all(Te).then(function(){return ge.targets!==void 0?Fn(we,ge.targets,_e):we})}function Je(we,ge){let _e=we.getIndex();if(_e===null){const Fe=[],Ue=we.getAttribute("position");if(Ue!==void 0){for(let Ae=0;Ae<Ue.count;Ae++)Fe.push(Ae);we.setIndex(Fe),_e=we.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),we}const Pe=_e.count-2,Te=[];if(ge===f.TriangleFanDrawMode)for(let Fe=1;Fe<=Pe;Fe++)Te.push(_e.getX(0)),Te.push(_e.getX(Fe)),Te.push(_e.getX(Fe+1));else for(let Fe=0;Fe<Pe;Fe++)Fe%2===0?(Te.push(_e.getX(Fe)),Te.push(_e.getX(Fe+1)),Te.push(_e.getX(Fe+2))):(Te.push(_e.getX(Fe+2)),Te.push(_e.getX(Fe+1)),Te.push(_e.getX(Fe)));Te.length/3!==Pe&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const He=we.clone();return He.setIndex(Te),He}},"./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js":(c,d,u)=>{u.r(d),u.d(d,{KTX2Loader:()=>b});var f=u("./node_modules/super-three/build/three.module.js"),A=u("./node_modules/super-three/examples/jsm/utils/WorkerPool.js"),g=u("./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js"),y=u("./node_modules/super-three/examples/jsm/libs/zstddec.module.js");const v=new WeakMap;let _=0,x;class b extends f.Loader{constructor(N){super(N),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new A.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(N){return this.transcoderPath=N,this}setWorkerLimit(N){return this.workerPool.setWorkerLimit(N),this}detectSupport(N){return this.workerConfig={astcSupported:N.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:N.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:N.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:N.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:N.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:N.extensions.has("WEBGL_compressed_texture_pvrtc")||N.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},N.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const N=new f.FileLoader(this.manager);N.setPath(this.transcoderPath),N.setWithCredentials(this.withCredentials);const P=N.loadAsync("basis_transcoder.js"),k=new f.FileLoader(this.manager);k.setPath(this.transcoderPath),k.setResponseType("arraybuffer"),k.setWithCredentials(this.withCredentials);const D=k.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([P,D]).then(([z,Y])=>{const ne=b.BasisWorker.toString(),O=["/* constants */","let _EngineFormat = "+JSON.stringify(b.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(b.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(b.BasisFormat),"/* basis_transcoder.js */",z,"/* worker */",ne.substring(ne.indexOf("{")+1,ne.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([O])),this.transcoderBinary=Y,this.workerPool.setWorkerCreator(()=>{const F=new Worker(this.workerSourceURL),U=this.transcoderBinary.slice(0);return F.postMessage({type:"init",config:this.workerConfig,transcoderBinary:U},[U]),F})}),_>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_++}return this.transcoderPending}load(N,P,k,D){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const z=new f.FileLoader(this.manager);z.setResponseType("arraybuffer"),z.setWithCredentials(this.withCredentials),z.load(N,Y=>{if(v.has(Y))return v.get(Y).promise.then(P).catch(D);this._createTexture(Y).then(ne=>P?P(ne):null).catch(D)},k,D)}_createTextureFrom(N,P){const{mipmaps:k,width:D,height:z,format:Y,type:ne,error:O,dfdTransferFn:F,dfdFlags:U}=N;if(ne==="error")return Promise.reject(O);const G=P.layerCount>1?new f.CompressedArrayTexture(k,D,z,P.layerCount,Y,f.UnsignedByteType):new f.CompressedTexture(k,D,z,Y,f.UnsignedByteType);return G.minFilter=k.length===1?f.LinearFilter:f.LinearMipmapLinearFilter,G.magFilter=f.LinearFilter,G.generateMipmaps=!1,G.needsUpdate=!0,G.encoding=F===g.KHR_DF_TRANSFER_SRGB?f.sRGBEncoding:f.LinearEncoding,G.premultiplyAlpha=!!(U&g.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),G}async _createTexture(N,P={}){const k=(0,g.read)(new Uint8Array(N));if(k.vkFormat!==g.VK_FORMAT_UNDEFINED)return M(k);const D=P,z=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:N,taskConfig:D},[N])).then(Y=>this._createTextureFrom(Y.data,k));return v.set(N,{promise:z}),z}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_--,this}}b.BasisFormat={ETC1S:0,UASTC_4x4:1},b.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},b.EngineFormat={RGBAFormat:f.RGBAFormat,RGBA_ASTC_4x4_Format:f.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:f.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:f.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:f.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:f.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:f.RGB_ETC1_Format,RGB_ETC2_Format:f.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:f.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:f.RGB_S3TC_DXT1_Format},b.BasisWorker=function(){let T,N,P;const k=_EngineFormat,D=_TranscoderFormat,z=_BasisFormat;self.addEventListener("message",function(W){const J=W.data;switch(J.type){case"init":T=J.config,Y(J.transcoderBinary);break;case"transcode":N.then(()=>{try{const{width:ee,height:he,hasAlpha:me,mipmaps:Be,format:Se,dfdTransferFn:rt,dfdFlags:Ge}=ne(J.buffer),st=[];for(let mt=0;mt<Be.length;++mt)st.push(Be[mt].data.buffer);self.postMessage({type:"transcode",id:J.id,width:ee,height:he,hasAlpha:me,mipmaps:Be,format:Se,dfdTransferFn:rt,dfdFlags:Ge},st)}catch(ee){console.error(ee),self.postMessage({type:"error",id:J.id,error:ee.message})}});break}});function Y(W){N=new Promise(J=>{P={wasmBinary:W,onRuntimeInitialized:J},BASIS(P)}).then(()=>{P.initializeBasis(),P.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function ne(W){const J=new P.KTX2File(new Uint8Array(W));function ee(){J.close(),J.delete()}if(!J.isValid())throw ee(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const he=J.isUASTC()?z.UASTC_4x4:z.ETC1S,me=J.getWidth(),Be=J.getHeight(),Se=J.getLayers()||1,rt=J.getLevels(),Ge=J.getHasAlpha(),st=J.getDFDTransferFunc(),mt=J.getDFDFlags(),{transcoderFormat:Ft,engineFormat:Pt}=G(he,me,Be,Ge);if(!me||!Be||!rt)throw ee(),new Error("THREE.KTX2Loader:	Invalid texture");if(!J.startTranscoding())throw ee(),new Error("THREE.KTX2Loader: .startTranscoding failed");const nt=[];for(let Fn=0;Fn<rt;Fn++){const Xt=[];let on,nn;for(let vn=0;vn<Se;vn++){const Rn=J.getImageLevelInfo(Fn,vn,0);on=Rn.origWidth,nn=Rn.origHeight;const zn=new Uint8Array(J.getImageTranscodedSizeInBytes(Fn,vn,0,Ft));if(!J.transcodeImage(zn,Fn,vn,0,Ft,0,-1,-1))throw ee(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Xt.push(zn)}nt.push({data:K(Xt),width:on,height:nn})}return ee(),{width:me,height:Be,hasAlpha:Ge,mipmaps:nt,format:Pt,dfdTransferFn:st,dfdFlags:mt}}const O=[{if:"astcSupported",basisFormat:[z.UASTC_4x4],transcoderFormat:[D.ASTC_4x4,D.ASTC_4x4],engineFormat:[k.RGBA_ASTC_4x4_Format,k.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[z.ETC1S,z.UASTC_4x4],transcoderFormat:[D.BC7_M5,D.BC7_M5],engineFormat:[k.RGBA_BPTC_Format,k.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[z.ETC1S,z.UASTC_4x4],transcoderFormat:[D.BC1,D.BC3],engineFormat:[k.RGB_S3TC_DXT1_Format,k.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[z.ETC1S,z.UASTC_4x4],transcoderFormat:[D.ETC1,D.ETC2],engineFormat:[k.RGB_ETC2_Format,k.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[z.ETC1S,z.UASTC_4x4],transcoderFormat:[D.ETC1],engineFormat:[k.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[z.ETC1S,z.UASTC_4x4],transcoderFormat:[D.PVRTC1_4_RGB,D.PVRTC1_4_RGBA],engineFormat:[k.RGB_PVRTC_4BPPV1_Format,k.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],F=O.sort(function(W,J){return W.priorityETC1S-J.priorityETC1S}),U=O.sort(function(W,J){return W.priorityUASTC-J.priorityUASTC});function G(W,J,ee,he){let me,Be;const Se=W===z.ETC1S?F:U;for(let rt=0;rt<Se.length;rt++){const Ge=Se[rt];if(T[Ge.if]&&Ge.basisFormat.includes(W)&&!(he&&Ge.transcoderFormat.length<2)&&!(Ge.needsPowerOfTwo&&!(V(J)&&V(ee))))return me=Ge.transcoderFormat[he?1:0],Be=Ge.engineFormat[he?1:0],{transcoderFormat:me,engineFormat:Be}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),me=D.RGBA32,Be=k.RGBAFormat,{transcoderFormat:me,engineFormat:Be}}function V(W){return W<=2?!0:(W&W-1)===0&&W!==0}function K(W){let J=0;for(const me of W)J+=me.byteLength;const ee=new Uint8Array(J);let he=0;for(const me of W)ee.set(me,he),he+=me.byteLength;return ee}};const m={[g.VK_FORMAT_R32G32B32A32_SFLOAT]:f.RGBAFormat,[g.VK_FORMAT_R16G16B16A16_SFLOAT]:f.RGBAFormat,[g.VK_FORMAT_R8G8B8A8_UNORM]:f.RGBAFormat,[g.VK_FORMAT_R8G8B8A8_SRGB]:f.RGBAFormat,[g.VK_FORMAT_R32G32_SFLOAT]:f.RGFormat,[g.VK_FORMAT_R16G16_SFLOAT]:f.RGFormat,[g.VK_FORMAT_R8G8_UNORM]:f.RGFormat,[g.VK_FORMAT_R8G8_SRGB]:f.RGFormat,[g.VK_FORMAT_R32_SFLOAT]:f.RedFormat,[g.VK_FORMAT_R16_SFLOAT]:f.RedFormat,[g.VK_FORMAT_R8_SRGB]:f.RedFormat,[g.VK_FORMAT_R8_UNORM]:f.RedFormat},S={[g.VK_FORMAT_R32G32B32A32_SFLOAT]:f.FloatType,[g.VK_FORMAT_R16G16B16A16_SFLOAT]:f.HalfFloatType,[g.VK_FORMAT_R8G8B8A8_UNORM]:f.UnsignedByteType,[g.VK_FORMAT_R8G8B8A8_SRGB]:f.UnsignedByteType,[g.VK_FORMAT_R32G32_SFLOAT]:f.FloatType,[g.VK_FORMAT_R16G16_SFLOAT]:f.HalfFloatType,[g.VK_FORMAT_R8G8_UNORM]:f.UnsignedByteType,[g.VK_FORMAT_R8G8_SRGB]:f.UnsignedByteType,[g.VK_FORMAT_R32_SFLOAT]:f.FloatType,[g.VK_FORMAT_R16_SFLOAT]:f.HalfFloatType,[g.VK_FORMAT_R8_SRGB]:f.UnsignedByteType,[g.VK_FORMAT_R8_UNORM]:f.UnsignedByteType},C={[g.VK_FORMAT_R8G8B8A8_SRGB]:f.sRGBEncoding,[g.VK_FORMAT_R8G8_SRGB]:f.sRGBEncoding,[g.VK_FORMAT_R8_SRGB]:f.sRGBEncoding};async function M(T){const{vkFormat:N,pixelWidth:P,pixelHeight:k,pixelDepth:D}=T;if(m[N]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const z=T.levels[0];let Y,ne;if(T.supercompressionScheme===g.KHR_SUPERCOMPRESSION_NONE)Y=z.levelData;else if(T.supercompressionScheme===g.KHR_SUPERCOMPRESSION_ZSTD)x||(x=new Promise(async F=>{const U=new y.ZSTDDecoder;await U.init(),F(U)})),Y=(await x).decode(z.levelData,z.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");S[N]===f.FloatType?ne=new Float32Array(Y.buffer,Y.byteOffset,Y.byteLength/Float32Array.BYTES_PER_ELEMENT):S[N]===f.HalfFloatType?ne=new Uint16Array(Y.buffer,Y.byteOffset,Y.byteLength/Uint16Array.BYTES_PER_ELEMENT):ne=Y;const O=D===0?new f.DataTexture(ne,P,k):new f.Data3DTexture(ne,P,k,D);return O.type=S[N],O.format=m[N],O.encoding=C[N]||f.LinearEncoding,O.needsUpdate=!0,Promise.resolve(O)}},"./node_modules/super-three/examples/jsm/loaders/MTLLoader.js":(c,d,u)=>{u.r(d),u.d(d,{MTLLoader:()=>A});var f=u("./node_modules/super-three/build/three.module.js");class A extends f.Loader{constructor(v){super(v)}load(v,_,x,b){const m=this,S=this.path===""?f.LoaderUtils.extractUrlBase(v):this.path,C=new f.FileLoader(this.manager);C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(v,function(M){try{_(m.parse(M,S))}catch(T){b?b(T):console.error(T),m.manager.itemError(v)}},x,b)}setMaterialOptions(v){return this.materialOptions=v,this}parse(v,_){const x=v.split(`
`);let b={};const m=/\s+/,S={};for(let M=0;M<x.length;M++){let T=x[M];if(T=T.trim(),T.length===0||T.charAt(0)==="#")continue;const N=T.indexOf(" ");let P=N>=0?T.substring(0,N):T;P=P.toLowerCase();let k=N>=0?T.substring(N+1):"";if(k=k.trim(),P==="newmtl")b={name:k},S[k]=b;else if(P==="ka"||P==="kd"||P==="ks"||P==="ke"){const D=k.split(m,3);b[P]=[parseFloat(D[0]),parseFloat(D[1]),parseFloat(D[2])]}else b[P]=k}const C=new g(this.resourcePath||_,this.materialOptions);return C.setCrossOrigin(this.crossOrigin),C.setManager(this.manager),C.setMaterials(S),C}}class g{constructor(v="",_={}){this.baseUrl=v,this.options=_,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:f.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:f.RepeatWrapping}setCrossOrigin(v){return this.crossOrigin=v,this}setManager(v){this.manager=v}setMaterials(v){this.materialsInfo=this.convert(v),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(v){if(!this.options)return v;const _={};for(const x in v){const b=v[x],m={};_[x]=m;for(const S in b){let C=!0,M=b[S];const T=S.toLowerCase();switch(T){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(M=[M[0]/255,M[1]/255,M[2]/255]),this.options&&this.options.ignoreZeroRGBs&&M[0]===0&&M[1]===0&&M[2]===0&&(C=!1);break}C&&(m[T]=M)}}return _}preload(){for(const v in this.materialsInfo)this.create(v)}getIndex(v){return this.nameLookup[v]}getAsArray(){let v=0;for(const _ in this.materialsInfo)this.materialsArray[v]=this.create(_),this.nameLookup[_]=v,v++;return this.materialsArray}create(v){return this.materials[v]===void 0&&this.createMaterial_(v),this.materials[v]}createMaterial_(v){const _=this,x=this.materialsInfo[v],b={name:v,side:this.side};function m(C,M){return typeof M!="string"||M===""?"":/^https?:\/\//i.test(M)?M:C+M}function S(C,M){if(b[C])return;const T=_.getTextureParams(M,b),N=_.loadTexture(m(_.baseUrl,T.url));N.repeat.copy(T.scale),N.offset.copy(T.offset),N.wrapS=_.wrap,N.wrapT=_.wrap,(C==="map"||C==="emissiveMap")&&(N.encoding=f.sRGBEncoding),b[C]=N}for(const C in x){const M=x[C];let T;if(M!=="")switch(C.toLowerCase()){case"kd":b.color=new f.Color().fromArray(M).convertSRGBToLinear();break;case"ks":b.specular=new f.Color().fromArray(M).convertSRGBToLinear();break;case"ke":b.emissive=new f.Color().fromArray(M).convertSRGBToLinear();break;case"map_kd":S("map",M);break;case"map_ks":S("specularMap",M);break;case"map_ke":S("emissiveMap",M);break;case"norm":S("normalMap",M);break;case"map_bump":case"bump":S("bumpMap",M);break;case"map_d":S("alphaMap",M),b.transparent=!0;break;case"ns":b.shininess=parseFloat(M);break;case"d":T=parseFloat(M),T<1&&(b.opacity=T,b.transparent=!0);break;case"tr":T=parseFloat(M),this.options&&this.options.invertTrProperty&&(T=1-T),T>0&&(b.opacity=1-T,b.transparent=!0);break}}return this.materials[v]=new f.MeshPhongMaterial(b),this.materials[v]}getTextureParams(v,_){const x={scale:new f.Vector2(1,1),offset:new f.Vector2(0,0)},b=v.split(/\s+/);let m;return m=b.indexOf("-bm"),m>=0&&(_.bumpScale=parseFloat(b[m+1]),b.splice(m,2)),m=b.indexOf("-s"),m>=0&&(x.scale.set(parseFloat(b[m+1]),parseFloat(b[m+2])),b.splice(m,4)),m=b.indexOf("-o"),m>=0&&(x.offset.set(parseFloat(b[m+1]),parseFloat(b[m+2])),b.splice(m,4)),x.url=b.join(" ").trim(),x}loadTexture(v,_,x,b,m){const S=this.manager!==void 0?this.manager:f.DefaultLoadingManager;let C=S.getHandler(v);C===null&&(C=new f.TextureLoader(S)),C.setCrossOrigin&&C.setCrossOrigin(this.crossOrigin);const M=C.load(v,x,b,m);return _!==void 0&&(M.mapping=_),M}}},"./node_modules/super-three/examples/jsm/loaders/OBJLoader.js":(c,d,u)=>{u.r(d),u.d(d,{OBJLoader:()=>N});var f=u("./node_modules/super-three/build/three.module.js");const A=/^[og]\s*(.+)?/,g=/^mtllib /,y=/^usemtl /,v=/^usemap /,_=/\s+/,x=new f.Vector3,b=new f.Vector3,m=new f.Vector3,S=new f.Vector3,C=new f.Vector3,M=new f.Color;function T(){const P={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(k,D){if(this.object&&this.object.fromDeclaration===!1){this.object.name=k,this.object.fromDeclaration=D!==!1;return}const z=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:k||"",fromDeclaration:D!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(Y,ne){const O=this._finalize(!1);O&&(O.inherited||O.groupCount<=0)&&this.materials.splice(O.index,1);const F={index:this.materials.length,name:Y||"",mtllib:Array.isArray(ne)&&ne.length>0?ne[ne.length-1]:"",smooth:O!==void 0?O.smooth:this.smooth,groupStart:O!==void 0?O.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(U){const G={index:typeof U=="number"?U:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return G.clone=this.clone.bind(G),G}};return this.materials.push(F),F},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(Y){const ne=this.currentMaterial();if(ne&&ne.groupEnd===-1&&(ne.groupEnd=this.geometry.vertices.length/3,ne.groupCount=ne.groupEnd-ne.groupStart,ne.inherited=!1),Y&&this.materials.length>1)for(let O=this.materials.length-1;O>=0;O--)this.materials[O].groupCount<=0&&this.materials.splice(O,1);return Y&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),ne}},z&&z.name&&typeof z.clone=="function"){const Y=z.clone(0);Y.inherited=!0,this.object.materials.push(Y)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(k,D){const z=parseInt(k,10);return(z>=0?z-1:z+D/3)*3},parseNormalIndex:function(k,D){const z=parseInt(k,10);return(z>=0?z-1:z+D/3)*3},parseUVIndex:function(k,D){const z=parseInt(k,10);return(z>=0?z-1:z+D/2)*2},addVertex:function(k,D,z){const Y=this.vertices,ne=this.object.geometry.vertices;ne.push(Y[k+0],Y[k+1],Y[k+2]),ne.push(Y[D+0],Y[D+1],Y[D+2]),ne.push(Y[z+0],Y[z+1],Y[z+2])},addVertexPoint:function(k){const D=this.vertices;this.object.geometry.vertices.push(D[k+0],D[k+1],D[k+2])},addVertexLine:function(k){const D=this.vertices;this.object.geometry.vertices.push(D[k+0],D[k+1],D[k+2])},addNormal:function(k,D,z){const Y=this.normals,ne=this.object.geometry.normals;ne.push(Y[k+0],Y[k+1],Y[k+2]),ne.push(Y[D+0],Y[D+1],Y[D+2]),ne.push(Y[z+0],Y[z+1],Y[z+2])},addFaceNormal:function(k,D,z){const Y=this.vertices,ne=this.object.geometry.normals;x.fromArray(Y,k),b.fromArray(Y,D),m.fromArray(Y,z),C.subVectors(m,b),S.subVectors(x,b),C.cross(S),C.normalize(),ne.push(C.x,C.y,C.z),ne.push(C.x,C.y,C.z),ne.push(C.x,C.y,C.z)},addColor:function(k,D,z){const Y=this.colors,ne=this.object.geometry.colors;Y[k]!==void 0&&ne.push(Y[k+0],Y[k+1],Y[k+2]),Y[D]!==void 0&&ne.push(Y[D+0],Y[D+1],Y[D+2]),Y[z]!==void 0&&ne.push(Y[z+0],Y[z+1],Y[z+2])},addUV:function(k,D,z){const Y=this.uvs,ne=this.object.geometry.uvs;ne.push(Y[k+0],Y[k+1]),ne.push(Y[D+0],Y[D+1]),ne.push(Y[z+0],Y[z+1])},addDefaultUV:function(){const k=this.object.geometry.uvs;k.push(0,0),k.push(0,0),k.push(0,0)},addUVLine:function(k){const D=this.uvs;this.object.geometry.uvs.push(D[k+0],D[k+1])},addFace:function(k,D,z,Y,ne,O,F,U,G){const V=this.vertices.length;let K=this.parseVertexIndex(k,V),W=this.parseVertexIndex(D,V),J=this.parseVertexIndex(z,V);if(this.addVertex(K,W,J),this.addColor(K,W,J),F!==void 0&&F!==""){const ee=this.normals.length;K=this.parseNormalIndex(F,ee),W=this.parseNormalIndex(U,ee),J=this.parseNormalIndex(G,ee),this.addNormal(K,W,J)}else this.addFaceNormal(K,W,J);if(Y!==void 0&&Y!==""){const ee=this.uvs.length;K=this.parseUVIndex(Y,ee),W=this.parseUVIndex(ne,ee),J=this.parseUVIndex(O,ee),this.addUV(K,W,J),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(k){this.object.geometry.type="Points";const D=this.vertices.length;for(let z=0,Y=k.length;z<Y;z++){const ne=this.parseVertexIndex(k[z],D);this.addVertexPoint(ne),this.addColor(ne)}},addLineGeometry:function(k,D){this.object.geometry.type="Line";const z=this.vertices.length,Y=this.uvs.length;for(let ne=0,O=k.length;ne<O;ne++)this.addVertexLine(this.parseVertexIndex(k[ne],z));for(let ne=0,O=D.length;ne<O;ne++)this.addUVLine(this.parseUVIndex(D[ne],Y))}};return P.startObject("",!1),P}class N extends f.Loader{constructor(k){super(k),this.materials=null}load(k,D,z,Y){const ne=this,O=new f.FileLoader(this.manager);O.setPath(this.path),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(k,function(F){try{D(ne.parse(F))}catch(U){Y?Y(U):console.error(U),ne.manager.itemError(k)}},z,Y)}setMaterials(k){return this.materials=k,this}parse(k){const D=new T;k.indexOf(`\r
`)!==-1&&(k=k.replace(/\r\n/g,`
`)),k.indexOf(`\\
`)!==-1&&(k=k.replace(/\\\n/g,""));const z=k.split(`
`);let Y=[];for(let F=0,U=z.length;F<U;F++){const G=z[F].trimStart();if(G.length===0)continue;const V=G.charAt(0);if(V!=="#")if(V==="v"){const K=G.split(_);switch(K[0]){case"v":D.vertices.push(parseFloat(K[1]),parseFloat(K[2]),parseFloat(K[3])),K.length>=7?(M.setRGB(parseFloat(K[4]),parseFloat(K[5]),parseFloat(K[6])).convertSRGBToLinear(),D.colors.push(M.r,M.g,M.b)):D.colors.push(void 0,void 0,void 0);break;case"vn":D.normals.push(parseFloat(K[1]),parseFloat(K[2]),parseFloat(K[3]));break;case"vt":D.uvs.push(parseFloat(K[1]),parseFloat(K[2]));break}}else if(V==="f"){const W=G.slice(1).trim().split(_),J=[];for(let he=0,me=W.length;he<me;he++){const Be=W[he];if(Be.length>0){const Se=Be.split("/");J.push(Se)}}const ee=J[0];for(let he=1,me=J.length-1;he<me;he++){const Be=J[he],Se=J[he+1];D.addFace(ee[0],Be[0],Se[0],ee[1],Be[1],Se[1],ee[2],Be[2],Se[2])}}else if(V==="l"){const K=G.substring(1).trim().split(" ");let W=[];const J=[];if(G.indexOf("/")===-1)W=K;else for(let ee=0,he=K.length;ee<he;ee++){const me=K[ee].split("/");me[0]!==""&&W.push(me[0]),me[1]!==""&&J.push(me[1])}D.addLineGeometry(W,J)}else if(V==="p"){const W=G.slice(1).trim().split(" ");D.addPointGeometry(W)}else if((Y=A.exec(G))!==null){const K=(" "+Y[0].slice(1).trim()).slice(1);D.startObject(K)}else if(y.test(G))D.object.startMaterial(G.substring(7).trim(),D.materialLibraries);else if(g.test(G))D.materialLibraries.push(G.substring(7).trim());else if(v.test(G))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(V==="s"){if(Y=G.split(" "),Y.length>1){const W=Y[1].trim().toLowerCase();D.object.smooth=W!=="0"&&W!=="off"}else D.object.smooth=!0;const K=D.object.currentMaterial();K&&(K.smooth=D.object.smooth)}else{if(G==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+G+'"')}}D.finalize();const ne=new f.Group;if(ne.materialLibraries=[].concat(D.materialLibraries),!(D.objects.length===1&&D.objects[0].geometry.vertices.length===0)===!0)for(let F=0,U=D.objects.length;F<U;F++){const G=D.objects[F],V=G.geometry,K=G.materials,W=V.type==="Line",J=V.type==="Points";let ee=!1;if(V.vertices.length===0)continue;const he=new f.BufferGeometry;he.setAttribute("position",new f.Float32BufferAttribute(V.vertices,3)),V.normals.length>0&&he.setAttribute("normal",new f.Float32BufferAttribute(V.normals,3)),V.colors.length>0&&(ee=!0,he.setAttribute("color",new f.Float32BufferAttribute(V.colors,3))),V.hasUVIndices===!0&&he.setAttribute("uv",new f.Float32BufferAttribute(V.uvs,2));const me=[];for(let Se=0,rt=K.length;Se<rt;Se++){const Ge=K[Se],st=Ge.name+"_"+Ge.smooth+"_"+ee;let mt=D.materials[st];if(this.materials!==null){if(mt=this.materials.create(Ge.name),W&&mt&&!(mt instanceof f.LineBasicMaterial)){const Ft=new f.LineBasicMaterial;f.Material.prototype.copy.call(Ft,mt),Ft.color.copy(mt.color),mt=Ft}else if(J&&mt&&!(mt instanceof f.PointsMaterial)){const Ft=new f.PointsMaterial({size:10,sizeAttenuation:!1});f.Material.prototype.copy.call(Ft,mt),Ft.color.copy(mt.color),Ft.map=mt.map,mt=Ft}}mt===void 0&&(W?mt=new f.LineBasicMaterial:J?mt=new f.PointsMaterial({size:1,sizeAttenuation:!1}):mt=new f.MeshPhongMaterial,mt.name=Ge.name,mt.flatShading=!Ge.smooth,mt.vertexColors=ee,D.materials[st]=mt),me.push(mt)}let Be;if(me.length>1){for(let Se=0,rt=K.length;Se<rt;Se++){const Ge=K[Se];he.addGroup(Ge.groupStart,Ge.groupCount,Se)}W?Be=new f.LineSegments(he,me):J?Be=new f.Points(he,me):Be=new f.Mesh(he,me)}else W?Be=new f.LineSegments(he,me[0]):J?Be=new f.Points(he,me[0]):Be=new f.Mesh(he,me[0]);Be.name=G.name,ne.add(Be)}else if(D.vertices.length>0){const F=new f.PointsMaterial({size:1,sizeAttenuation:!1}),U=new f.BufferGeometry;U.setAttribute("position",new f.Float32BufferAttribute(D.vertices,3)),D.colors.length>0&&D.colors[0]!==void 0&&(U.setAttribute("color",new f.Float32BufferAttribute(D.colors,3)),F.vertexColors=!0);const G=new f.Points(U,F);ne.add(G)}return ne}}},"./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js":(c,d,u)=>{u.r(d),u.d(d,{computeMikkTSpaceTangents:()=>g,computeMorphedAttributes:()=>T,computeTangents:()=>A,deepCloneAttribute:()=>_,deinterleaveAttribute:()=>b,deinterleaveGeometry:()=>m,estimateBytesUsed:()=>S,interleaveAttributes:()=>x,mergeBufferAttributes:()=>v,mergeBufferGeometries:()=>y,mergeGroups:()=>N,mergeVertices:()=>C,toCreasedNormals:()=>P,toTrianglesDrawMode:()=>M});var f=u("./node_modules/super-three/build/three.module.js");function A(){throw new Error("BufferGeometryUtils: computeTangents renamed to computeMikkTSpaceTangents.")}function g(k,D,z=!0){if(!D||!D.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!k.hasAttribute("position")||!k.hasAttribute("normal")||!k.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function Y(F){if(F.normalized||F.isInterleavedBufferAttribute){const U=new Float32Array(F.getCount()*F.itemSize);for(let G=0,V=0;G<F.getCount();G++)U[V++]=F.getX(G),U[V++]=F.getY(G),F.itemSize>2&&(U[V++]=F.getZ(G));return U}return F.array instanceof Float32Array?F.array:new Float32Array(F.array)}const ne=k.index?k.toNonIndexed():k,O=D.generateTangents(Y(ne.attributes.position),Y(ne.attributes.normal),Y(ne.attributes.uv));if(z)for(let F=3;F<O.length;F+=4)O[F]*=-1;return ne.setAttribute("tangent",new f.BufferAttribute(O,4)),k!==ne&&k.copy(ne),k}function y(k,D=!1){const z=k[0].index!==null,Y=new Set(Object.keys(k[0].attributes)),ne=new Set(Object.keys(k[0].morphAttributes)),O={},F={},U=k[0].morphTargetsRelative,G=new f.BufferGeometry;let V=0;for(let K=0;K<k.length;++K){const W=k[K];let J=0;if(z!==(W.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+K+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const ee in W.attributes){if(!Y.has(ee))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+K+'. All geometries must have compatible attributes; make sure "'+ee+'" attribute exists among all geometries, or in none of them.'),null;O[ee]===void 0&&(O[ee]=[]),O[ee].push(W.attributes[ee]),J++}if(J!==Y.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+K+". Make sure all geometries have the same number of attributes."),null;if(U!==W.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+K+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const ee in W.morphAttributes){if(!ne.has(ee))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+K+".  .morphAttributes must be consistent throughout all geometries."),null;F[ee]===void 0&&(F[ee]=[]),F[ee].push(W.morphAttributes[ee])}if(D){let ee;if(z)ee=W.index.count;else if(W.attributes.position!==void 0)ee=W.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+K+". The geometry must have either an index or a position attribute"),null;G.addGroup(V,ee,K),V+=ee}}if(z){let K=0;const W=[];for(let J=0;J<k.length;++J){const ee=k[J].index;for(let he=0;he<ee.count;++he)W.push(ee.getX(he)+K);K+=k[J].attributes.position.count}G.setIndex(W)}for(const K in O){const W=v(O[K]);if(!W)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+K+" attribute."),null;G.setAttribute(K,W)}for(const K in F){const W=F[K][0].length;if(W===0)break;G.morphAttributes=G.morphAttributes||{},G.morphAttributes[K]=[];for(let J=0;J<W;++J){const ee=[];for(let me=0;me<F[K].length;++me)ee.push(F[K][me][J]);const he=v(ee);if(!he)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+K+" morphAttribute."),null;G.morphAttributes[K].push(he)}}return G}function v(k){let D,z,Y,ne=0;for(let U=0;U<k.length;++U){const G=k[U];if(G.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(D===void 0&&(D=G.array.constructor),D!==G.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(z===void 0&&(z=G.itemSize),z!==G.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(Y===void 0&&(Y=G.normalized),Y!==G.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;ne+=G.array.length}const O=new D(ne);let F=0;for(let U=0;U<k.length;++U)O.set(k[U].array,F),F+=k[U].array.length;return new f.BufferAttribute(O,z,Y)}function _(k){return k.isInstancedInterleavedBufferAttribute||k.isInterleavedBufferAttribute?b(k):k.isInstancedBufferAttribute?new f.InstancedBufferAttribute().copy(k):new f.BufferAttribute().copy(k)}function x(k){let D,z=0,Y=0;for(let V=0,K=k.length;V<K;++V){const W=k[V];if(D===void 0&&(D=W.array.constructor),D!==W.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;z+=W.array.length,Y+=W.itemSize}const ne=new f.InterleavedBuffer(new D(z),Y);let O=0;const F=[],U=["getX","getY","getZ","getW"],G=["setX","setY","setZ","setW"];for(let V=0,K=k.length;V<K;V++){const W=k[V],J=W.itemSize,ee=W.count,he=new f.InterleavedBufferAttribute(ne,J,O,W.normalized);F.push(he),O+=J;for(let me=0;me<ee;me++)for(let Be=0;Be<J;Be++)he[G[Be]](me,W[U[Be]](me))}return F}function b(k){const D=k.data.array.constructor,z=k.count,Y=k.itemSize,ne=k.normalized,O=new D(z*Y);let F;k.isInstancedInterleavedBufferAttribute?F=new f.InstancedBufferAttribute(O,Y,ne,k.meshPerAttribute):F=new f.BufferAttribute(O,Y,ne);for(let U=0;U<z;U++)F.setX(U,k.getX(U)),Y>=2&&F.setY(U,k.getY(U)),Y>=3&&F.setZ(U,k.getZ(U)),Y>=4&&F.setW(U,k.getW(U));return F}function m(k){const D=k.attributes,z=k.morphTargets,Y=new Map;for(const ne in D){const O=D[ne];O.isInterleavedBufferAttribute&&(Y.has(O)||Y.set(O,b(O)),D[ne]=Y.get(O))}for(const ne in z){const O=z[ne];O.isInterleavedBufferAttribute&&(Y.has(O)||Y.set(O,b(O)),z[ne]=Y.get(O))}}function S(k){let D=0;for(const Y in k.attributes){const ne=k.getAttribute(Y);D+=ne.count*ne.itemSize*ne.array.BYTES_PER_ELEMENT}const z=k.getIndex();return D+=z?z.count*z.itemSize*z.array.BYTES_PER_ELEMENT:0,D}function C(k,D=1e-4){D=Math.max(D,Number.EPSILON);const z={},Y=k.getIndex(),ne=k.getAttribute("position"),O=Y?Y.count:ne.count;let F=0;const U=Object.keys(k.attributes),G={},V={},K=[],W=["getX","getY","getZ","getW"],J=["setX","setY","setZ","setW"];for(let Be=0,Se=U.length;Be<Se;Be++){const rt=U[Be],Ge=k.attributes[rt];G[rt]=new f.BufferAttribute(new Ge.array.constructor(Ge.count*Ge.itemSize),Ge.itemSize,Ge.normalized);const st=k.morphAttributes[rt];st&&(V[rt]=new f.BufferAttribute(new st.array.constructor(st.count*st.itemSize),st.itemSize,st.normalized))}const ee=Math.log10(1/D),he=Math.pow(10,ee);for(let Be=0;Be<O;Be++){const Se=Y?Y.getX(Be):Be;let rt="";for(let Ge=0,st=U.length;Ge<st;Ge++){const mt=U[Ge],Ft=k.getAttribute(mt),Pt=Ft.itemSize;for(let nt=0;nt<Pt;nt++)rt+=`${~~(Ft[W[nt]](Se)*he)},`}if(rt in z)K.push(z[rt]);else{for(let Ge=0,st=U.length;Ge<st;Ge++){const mt=U[Ge],Ft=k.getAttribute(mt),Pt=k.morphAttributes[mt],nt=Ft.itemSize,Fn=G[mt],Xt=V[mt];for(let on=0;on<nt;on++){const nn=W[on],vn=J[on];if(Fn[vn](F,Ft[nn](Se)),Pt)for(let Rn=0,zn=Pt.length;Rn<zn;Rn++)Xt[Rn][vn](F,Pt[Rn][nn](Se))}}z[rt]=F,K.push(F),F++}}const me=k.clone();for(const Be in k.attributes){const Se=G[Be];if(me.setAttribute(Be,new f.BufferAttribute(Se.array.slice(0,F*Se.itemSize),Se.itemSize,Se.normalized)),Be in V)for(let rt=0;rt<V[Be].length;rt++){const Ge=V[Be][rt];me.morphAttributes[Be][rt]=new f.BufferAttribute(Ge.array.slice(0,F*Ge.itemSize),Ge.itemSize,Ge.normalized)}}return me.setIndex(K),me}function M(k,D){if(D===f.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),k;if(D===f.TriangleFanDrawMode||D===f.TriangleStripDrawMode){let z=k.getIndex();if(z===null){const F=[],U=k.getAttribute("position");if(U!==void 0){for(let G=0;G<U.count;G++)F.push(G);k.setIndex(F),z=k.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),k}const Y=z.count-2,ne=[];if(D===f.TriangleFanDrawMode)for(let F=1;F<=Y;F++)ne.push(z.getX(0)),ne.push(z.getX(F)),ne.push(z.getX(F+1));else for(let F=0;F<Y;F++)F%2===0?(ne.push(z.getX(F)),ne.push(z.getX(F+1)),ne.push(z.getX(F+2))):(ne.push(z.getX(F+2)),ne.push(z.getX(F+1)),ne.push(z.getX(F)));ne.length/3!==Y&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const O=k.clone();return O.setIndex(ne),O.clearGroups(),O}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",D),k}function T(k){if(k.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const D=new f.Vector3,z=new f.Vector3,Y=new f.Vector3,ne=new f.Vector3,O=new f.Vector3,F=new f.Vector3,U=new f.Vector3,G=new f.Vector3,V=new f.Vector3;function K(Je,we,ge,_e,Pe,Te,He,Fe){D.fromBufferAttribute(we,Pe),z.fromBufferAttribute(we,Te),Y.fromBufferAttribute(we,He);const Ue=Je.morphTargetInfluences;if(ge&&Ue){U.set(0,0,0),G.set(0,0,0),V.set(0,0,0);for(let Ae=0,Xe=ge.length;Ae<Xe;Ae++){const dt=Ue[Ae],ue=ge[Ae];dt!==0&&(ne.fromBufferAttribute(ue,Pe),O.fromBufferAttribute(ue,Te),F.fromBufferAttribute(ue,He),_e?(U.addScaledVector(ne,dt),G.addScaledVector(O,dt),V.addScaledVector(F,dt)):(U.addScaledVector(ne.sub(D),dt),G.addScaledVector(O.sub(z),dt),V.addScaledVector(F.sub(Y),dt)))}D.add(U),z.add(G),Y.add(V)}Je.isSkinnedMesh&&(Je.boneTransform(Pe,D),Je.boneTransform(Te,z),Je.boneTransform(He,Y)),Fe[Pe*3+0]=D.x,Fe[Pe*3+1]=D.y,Fe[Pe*3+2]=D.z,Fe[Te*3+0]=z.x,Fe[Te*3+1]=z.y,Fe[Te*3+2]=z.z,Fe[He*3+0]=Y.x,Fe[He*3+1]=Y.y,Fe[He*3+2]=Y.z}const W=k.geometry,J=k.material;let ee,he,me;const Be=W.index,Se=W.attributes.position,rt=W.morphAttributes.position,Ge=W.morphTargetsRelative,st=W.attributes.normal,mt=W.morphAttributes.position,Ft=W.groups,Pt=W.drawRange;let nt,Fn,Xt,on,nn,vn,Rn;const zn=new Float32Array(Se.count*Se.itemSize),Wn=new Float32Array(st.count*st.itemSize);if(Be!==null)if(Array.isArray(J))for(nt=0,Xt=Ft.length;nt<Xt;nt++)for(nn=Ft[nt],vn=Math.max(nn.start,Pt.start),Rn=Math.min(nn.start+nn.count,Pt.start+Pt.count),Fn=vn,on=Rn;Fn<on;Fn+=3)ee=Be.getX(Fn),he=Be.getX(Fn+1),me=Be.getX(Fn+2),K(k,Se,rt,Ge,ee,he,me,zn),K(k,st,mt,Ge,ee,he,me,Wn);else for(vn=Math.max(0,Pt.start),Rn=Math.min(Be.count,Pt.start+Pt.count),nt=vn,Xt=Rn;nt<Xt;nt+=3)ee=Be.getX(nt),he=Be.getX(nt+1),me=Be.getX(nt+2),K(k,Se,rt,Ge,ee,he,me,zn),K(k,st,mt,Ge,ee,he,me,Wn);else if(Array.isArray(J))for(nt=0,Xt=Ft.length;nt<Xt;nt++)for(nn=Ft[nt],vn=Math.max(nn.start,Pt.start),Rn=Math.min(nn.start+nn.count,Pt.start+Pt.count),Fn=vn,on=Rn;Fn<on;Fn+=3)ee=Fn,he=Fn+1,me=Fn+2,K(k,Se,rt,Ge,ee,he,me,zn),K(k,st,mt,Ge,ee,he,me,Wn);else for(vn=Math.max(0,Pt.start),Rn=Math.min(Se.count,Pt.start+Pt.count),nt=vn,Xt=Rn;nt<Xt;nt+=3)ee=nt,he=nt+1,me=nt+2,K(k,Se,rt,Ge,ee,he,me,zn),K(k,st,mt,Ge,ee,he,me,Wn);const Ai=new f.Float32BufferAttribute(zn,3),Ti=new f.Float32BufferAttribute(Wn,3);return{positionAttribute:Se,normalAttribute:st,morphedPositionAttribute:Ai,morphedNormalAttribute:Ti}}function N(k){if(k.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),k;let D=k.groups;if(D=D.sort((F,U)=>F.materialIndex!==U.materialIndex?F.materialIndex-U.materialIndex:F.start-U.start),k.getIndex()===null){const F=k.getAttribute("position"),U=[];for(let G=0;G<F.count;G+=3)U.push(G,G+1,G+2);k.setIndex(U)}const z=k.getIndex(),Y=[];for(let F=0;F<D.length;F++){const U=D[F],G=U.start,V=G+U.count;for(let K=G;K<V;K++)Y.push(z.getX(K))}k.dispose(),k.setIndex(Y);let ne=0;for(let F=0;F<D.length;F++){const U=D[F];U.start=ne,ne+=U.count}let O=D[0];k.groups=[O];for(let F=1;F<D.length;F++){const U=D[F];O.materialIndex===U.materialIndex?O.count+=U.count:(O=U,k.groups.push(O))}return k}function P(k,D=Math.PI/3){const z=Math.cos(D),Y=(1+1e-10)*100,ne=[new f.Vector3,new f.Vector3,new f.Vector3],O=new f.Vector3,F=new f.Vector3,U=new f.Vector3,G=new f.Vector3;function V(me){const Be=~~(me.x*Y),Se=~~(me.y*Y),rt=~~(me.z*Y);return`${Be},${Se},${rt}`}const K=k.toNonIndexed(),W=K.attributes.position,J={};for(let me=0,Be=W.count/3;me<Be;me++){const Se=3*me,rt=ne[0].fromBufferAttribute(W,Se+0),Ge=ne[1].fromBufferAttribute(W,Se+1),st=ne[2].fromBufferAttribute(W,Se+2);O.subVectors(st,Ge),F.subVectors(rt,Ge);const mt=new f.Vector3().crossVectors(O,F).normalize();for(let Ft=0;Ft<3;Ft++){const Pt=ne[Ft],nt=V(Pt);nt in J||(J[nt]=[]),J[nt].push(mt)}}const ee=new Float32Array(W.count*3),he=new f.BufferAttribute(ee,3,!1);for(let me=0,Be=W.count/3;me<Be;me++){const Se=3*me,rt=ne[0].fromBufferAttribute(W,Se+0),Ge=ne[1].fromBufferAttribute(W,Se+1),st=ne[2].fromBufferAttribute(W,Se+2);O.subVectors(st,Ge),F.subVectors(rt,Ge),U.crossVectors(O,F).normalize();for(let mt=0;mt<3;mt++){const Ft=ne[mt],Pt=V(Ft),nt=J[Pt];G.set(0,0,0);for(let Fn=0,Xt=nt.length;Fn<Xt;Fn++){const on=nt[Fn];U.dot(on)>z&&G.add(on)}G.normalize(),he.setXYZ(Se+mt,G.x,G.y,G.z)}}return K.setAttribute("normal",he),K}},"./node_modules/super-three/examples/jsm/utils/WorkerPool.js":(c,d,u)=>{u.r(d),u.d(d,{WorkerPool:()=>f});class f{constructor(g=4){this.pool=g,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(g){if(!this.workers[g]){const y=this.workerCreator();y.addEventListener("message",this._onMessage.bind(this,g)),this.workers[g]=y}}_getIdleWorker(){for(let g=0;g<this.pool;g++)if(!(this.workerStatus&1<<g))return g;return-1}_onMessage(g,y){const v=this.workersResolve[g];if(v&&v(y),this.queue.length){const{resolve:_,msg:x,transfer:b}=this.queue.shift();this.workersResolve[g]=_,this.workers[g].postMessage(x,b)}else this.workerStatus^=1<<g}setWorkerCreator(g){this.workerCreator=g}setWorkerLimit(g){this.pool=g}postMessage(g,y){return new Promise(v=>{const _=this._getIdleWorker();_!==-1?(this._initWorker(_),this.workerStatus|=1<<_,this.workersResolve[_]=v,this.workers[_].postMessage(g,y)):this.queue.push({resolve:v,msg:g,transfer:y})})}dispose(){this.workers.forEach(g=>g.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./package.json":c=>{c.exports=JSON.parse('{"name":"aframe","version":"1.4.2","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"semistandard -v | snazzy","lint:fix":"semistandard --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.4.1 1.4.2","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","custom-event-polyfill":"^1.0.6","debug":"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","@ungap/custom-elements":"^1.1.0","load-bmfont":"^1.2.3","object-assign":"^4.0.1","present":"0.0.6","promise-polyfill":"^3.1.0","super-animejs":"^3.1.0","super-three":"^0.147.1","three-bmfont-text":"dmarcos/three-bmfont-text#21d017046216e318362c48abd1a48bddfb6e0733","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^20.0.0","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","semistandard":"^9.0.0","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"semistandard":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},s={};function o(c){var d=s[c];if(d!==void 0)return d.exports;var u=s[c]={id:c,exports:{}};return i[c].call(u.exports,u,u.exports,o),u.exports}o.m=i,o.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return o.d(d,{a:d}),d},o.d=(c,d)=>{for(var u in d)o.o(d,u)&&!o.o(c,u)&&Object.defineProperty(c,u,{enumerable:!0,get:d[u]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),o.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},o.b=document.baseURI||self.location.href,o.nc=void 0;var l=o("./src/index.js");return l})())})(i7);const zL=.1;AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(n){const e=this.el;if(this.active&&this.checkpoint!==n){if(this.checkpoint&&e.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=n,this.sync(),this.position.distanceTo(this.targetPosition)<zL){this.checkpoint=null;return}e.emit("navigation-start",{checkpoint:n}),this.data.mode==="teleport"&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,e.emit("navigation-end",{checkpoint:n}),e.components["movement-controls"].updateNavLocation())}},isVelocityActive:function(){return!!(this.active&&this.checkpoint)},getVelocity:function(){if(!this.active)return;const n=this.data,e=this.offset,i=this.position,s=this.targetPosition,o=this.checkpoint;return this.sync(),i.distanceTo(s)<zL?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:o}),e.set(0,0,0)):(e.setLength(n.animateSpeed),e)},sync:function(){const n=this.offset,e=this.position,i=this.targetPosition;e.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(i),i.add(this.checkpoint.components.checkpoint.getOffset()),n.copy(i).sub(e)}});var r7=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16});function s7(n,e,i){this.type=n,this.index=e,this.pressed=i.pressed,this.value=i.value}var o7=s7;const zm=r7,ZC=o7,vd=.2,Ju={LEFT:"left",RIGHT:"right"},Zu={MOVEMENT:1,ROTATION:2};AFRAME.registerComponent("gamepad-controls",{GamepadButton:zm,schema:{enabled:{default:!0},camera:{default:"[camera]",type:"selector"},rotationSensitivity:{default:2}},init:function(){const n=this.el.sceneEl;this.system=n.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};const e=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=THREE.Math.degToRad(e.x),this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=THREE.Math.degToRad(e.y),this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,n.addBehavior(this)},update:function(){this.tick()},tick:function(n,e){this.updateButtonState(),this.updateRotation(e)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const n=this._dpadVector,e=this._moveVector;this.getDpad(n),this.getJoystick(Zu.MOVEMENT,e);const i=n.x||e.x,s=n.y||e.y;return Math.abs(i)>vd||Math.abs(s)>vd},getVelocityDelta:function(){const n=this._dpadVector,e=this._moveVector;this.getDpad(n),this.getJoystick(Zu.MOVEMENT,e);const i=n.x||e.x,s=n.y||e.y,o=new THREE.Vector3;return Math.abs(i)>vd&&(o.x+=i),Math.abs(s)>vd&&(o.z+=s),o},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const n=this._lookVector;return this.getJoystick(Zu.ROTATION,n),Math.abs(n.x)>vd||Math.abs(n.y)>vd},updateRotation:function(n){if(!this.isRotationActive())return;const e=this.data,i=this.yaw,s=this.pitch,o=e.camera.components["look-controls"],l=o&&o.pitchObject&&o.yawObject;l&&(s.rotation.copy(o.pitchObject.rotation),i.rotation.copy(o.yawObject.rotation));const c=this._lookVector;this.getJoystick(Zu.ROTATION,c),Math.abs(c.x)<=vd&&(c.x=0),Math.abs(c.y)<=vd&&(c.y=0),c.multiplyScalar(e.rotationSensitivity*n/1e3),i.rotation.y-=c.x,s.rotation.x-=c.y,s.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,s.rotation.x)),e.camera.object3D.rotation.set(s.rotation.x,i.rotation.y,0),l&&(o.pitchObject.rotation.copy(s.rotation),o.yawObject.rotation.copy(i.rotation))},updateButtonState:function(){const n=this.getGamepad(Ju.RIGHT);if(this.data.enabled&&n)for(var e=0;e<n.buttons.length;e++)n.buttons[e].pressed&&!this.buttons[e]?this.emit(new ZC("gamepadbuttondown",e,n.buttons[e])):!n.buttons[e].pressed&&this.buttons[e]&&this.emit(new ZC("gamepadbuttonup",e,n.buttons[e])),this.buttons[e]=n.buttons[e].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(n){this.el.emit(n.type,n),this.el.emit(n.type+":"+n.index,new ZC(n.type,n.index,n))},getGamepad:function(){const n=[],e=[];return function(i){const s=this.el.sceneEl.components["proxy-controls"],o=s&&s.isConnected()&&s.getGamepad(0);if(o)return o;n.length=0;for(let c=0;c<this.system.controllers.length;c++){const d=this.system.controllers[c],u=d?d.gamepad:null;if(n.push(u),u&&u.handedness===i)return u}const l=navigator.getGamepads?navigator.getGamepads():e;for(let c=0;c<l.length;c++){const d=l[c];if(d&&d.hand===i)return d}return n[0]||l[0]}}(),getButton:function(n){return this.getGamepad(Ju.RIGHT).buttons[n]},getAxis:function(n){return this.getGamepad(n>1?Ju.RIGHT:Ju.LEFT).axes[n]},getJoystick:function(n,e){const i=this.getGamepad(n===Zu.MOVEMENT?Ju.LEFT:Ju.RIGHT);if(i.mapping==="xr-standard")switch(n){case Zu.MOVEMENT:return e.set(i.axes[2],i.axes[3]);case Zu.ROTATION:return e.set(i.axes[0],i.axes[1])}else switch(n){case Zu.MOVEMENT:return e.set(i.axes[0],i.axes[1]);case Zu.ROTATION:return e.set(i.axes[2],i.axes[3])}throw new Error('Unexpected joystick index "%d".',n)},getDpad:function(n){const e=this.getGamepad(Ju.LEFT);return e.buttons[zm.DPAD_RIGHT]?n.set((e.buttons[zm.DPAD_RIGHT].pressed?1:0)+(e.buttons[zm.DPAD_LEFT].pressed?-1:0),(e.buttons[zm.DPAD_UP].pressed?-1:0)+(e.buttons[zm.DPAD_DOWN].pressed?1:0)):n.set(0,0)},isConnected:function(){const n=this.getGamepad(Ju.LEFT);return!!(n&&n.connected)},getID:function(){return this.getGamepad(Ju.LEFT).id}});(function(n){var e="KeyboardEvent"in n;e||(n.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in n.KeyboardEvent||(n.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in n.KeyboardEvent||(n.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in n.KeyboardEvent||(n.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in n.KeyboardEvent||(n.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var i=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,s=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,o=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,l=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;function c(T,N){return String(T).indexOf(N)!==-1}var d=function(){return c(navigator.platform,"Win")?"win":c(navigator.platform,"Mac")?"mac":c(navigator.platform,"CrOS")?"cros":c(navigator.platform,"Linux")?"linux":c(navigator.userAgent,"iPad")||c(navigator.platform,"iPod")||c(navigator.platform,"iPhone")?"ios":""}(),u=function(){return c(navigator.userAgent,"Chrome/")?"chrome":c(navigator.vendor,"Apple")?"safari":c(navigator.userAgent,"MSIE")?"ie":c(navigator.userAgent,"Gecko/")?"moz":c(navigator.userAgent,"Opera/")?"opera":""}(),f=u+"-"+d;function A(T,N,P){(f===N||u===N||d===N)&&Object.keys(P).forEach(function(k){T[k]=P[k]})}function g(T,N){var P={};return Object.keys(T).forEach(function(k){var D=T[k];N in D&&(P[D[N]]=D)}),P}var y={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:s},92:{code:"OSRight",location:o},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:l},97:{code:"Numpad1",keyCap:"1",location:l},98:{code:"Numpad2",keyCap:"2",location:l},99:{code:"Numpad3",keyCap:"3",location:l},100:{code:"Numpad4",keyCap:"4",location:l},101:{code:"Numpad5",keyCap:"5",location:l},102:{code:"Numpad6",keyCap:"6",location:l},103:{code:"Numpad7",keyCap:"7",location:l},104:{code:"Numpad8",keyCap:"8",location:l},105:{code:"Numpad9",keyCap:"9",location:l},106:{code:"NumpadMultiply",keyCap:"*",location:l},107:{code:"NumpadAdd",keyCap:"+",location:l},108:{code:"NumpadComma",keyCap:",",location:l},109:{code:"NumpadSubtract",keyCap:"-",location:l},110:{code:"NumpadDecimal",keyCap:".",location:l},111:{code:"NumpadDivide",keyCap:"/",location:l},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:l},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:s},161:{code:"ShiftRight",location:o},162:{code:"ControlLeft",location:s},163:{code:"ControlRight",location:o},164:{code:"AltLeft",location:s},165:{code:"AltRight",location:o},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};A(y,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:l},189:{code:"NumpadSubtract",keyCap:"-",location:l}}),A(y,"moz-mac",{12:{code:"NumLock",location:l},173:{code:"Minus",keyCap:"-"}}),A(y,"moz-win",{173:{code:"Minus",keyCap:"-"}}),A(y,"chrome-mac",{93:{code:"OSRight",location:o}}),A(y,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),A(y,"ios",{10:{code:"Enter",location:i}}),A(y,"safari-mac",{91:{code:"OSLeft",location:s},93:{code:"OSRight",location:o},229:{code:"KeyQ",keyCap:"Q"}});var v={};d==="cros"&&(v["U+00A0"]={code:"ShiftLeft",location:s},v["U+00A1"]={code:"ShiftRight",location:o},v["U+00A2"]={code:"ControlLeft",location:s},v["U+00A3"]={code:"ControlRight",location:o},v["U+00A4"]={code:"AltLeft",location:s},v["U+00A5"]={code:"AltRight",location:o}),f==="chrome-mac"&&(v["U+0010"]={code:"ContextMenu"}),f==="safari-mac"&&(v["U+0010"]={code:"ContextMenu"}),d==="ios"&&(v["U+0010"]={code:"Function"},v["U+001C"]={code:"ArrowLeft"},v["U+001D"]={code:"ArrowRight"},v["U+001E"]={code:"ArrowUp"},v["U+001F"]={code:"ArrowDown"},v["U+0001"]={code:"Home"},v["U+0004"]={code:"End"},v["U+000B"]={code:"PageUp"},v["U+000C"]={code:"PageDown"});var _=[];_[s]={16:{code:"ShiftLeft",location:s},17:{code:"ControlLeft",location:s},18:{code:"AltLeft",location:s}},_[o]={16:{code:"ShiftRight",location:o},17:{code:"ControlRight",location:o},18:{code:"AltRight",location:o}},_[l]={13:{code:"NumpadEnter",location:l}},A(_[l],"moz",{109:{code:"NumpadSubtract",location:l},107:{code:"NumpadAdd",location:l}}),A(_[s],"moz-mac",{224:{code:"OSLeft",location:s}}),A(_[o],"moz-mac",{224:{code:"OSRight",location:o}}),A(_[o],"moz-win",{91:{code:"OSRight",location:o}}),A(_[o],"mac",{93:{code:"OSRight",location:o}}),A(_[l],"chrome-mac",{12:{code:"NumLock",location:l}}),A(_[l],"safari-mac",{12:{code:"NumLock",location:l},187:{code:"NumpadAdd",location:l},189:{code:"NumpadSubtract",location:l},190:{code:"NumpadDecimal",location:l},191:{code:"NumpadDivide",location:l}});var x={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};A(x,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var b={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},m=g(y,"code");try{var S=e&&"location"in new KeyboardEvent("")}catch{}function C(T){var N="keyCode"in T?T.keyCode:"which"in T?T.which:0,P=function(){if(S||"keyLocation"in T){var D=S?T.location:T.keyLocation;if(D&&N in _[D])return _[D][N]}return"keyIdentifier"in T&&T.keyIdentifier in v?v[T.keyIdentifier]:N in y?y[N]:null}();if(!P)return null;var k=function(){var D=x[P.code];return D?T.shiftKey&&"shiftKey"in D?D.shiftKey:D.key:P.code}();return{code:P.code,key:k,location:P.location,keyCap:P.keyCap}}function M(T,N){if(T=String(T),!m.hasOwnProperty(T))return"Undefined";if(N&&String(N).toLowerCase()!=="en-us")throw Error("Unsupported locale");var P=m[T];return P.keyCap||P.code||"Undefined"}"KeyboardEvent"in n&&"defineProperty"in Object&&function(){function T(P,k,D){k in P||Object.defineProperty(P,k,D)}if(T(KeyboardEvent.prototype,"code",{get:function(){var P=C(this);return P?P.code:""}}),"key"in KeyboardEvent.prototype){var N=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var P=N.get.call(this);return b.hasOwnProperty(P)?b[P]:P}})}T(KeyboardEvent.prototype,"key",{get:function(){var P=C(this);return P&&"key"in P?P.key:"Unidentified"}}),T(KeyboardEvent.prototype,"location",{get:function(){var P=C(this);return P&&"location"in P?P.location:i}}),T(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in n.KeyboardEvent||(n.KeyboardEvent.queryKeyCap=M),n.identifyKey=function(T){if(!("code"in T)){var N=C(T);T.code=N?N.code:"",T.key=N&&"key"in N?N.key:"Unidentified",T.location="location"in T?T.location:"keyLocation"in T?T.keyLocation:N&&"location"in N?N.location:i,T.locale=""}}})(window);const a7="__keyboard-controls-proxy",l7=window.KeyboardEvent;AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this)},this.attachEventListeners()},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){const n=this.data,e=this.getKeys();return this.dVelocity.set(0,0,0),n.enabled&&((e.KeyW||e.ArrowUp)&&(this.dVelocity.z-=1),(e.KeyA||e.ArrowLeft)&&(this.dVelocity.x-=1),(e.KeyS||e.ArrowDown)&&(this.dVelocity.z+=1),(e.KeyD||e.ArrowRight)&&(this.dVelocity.x+=1)),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.pause()},attachEventListeners:function(){window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(n){AFRAME.utils.shouldCaptureKeyEvent(n)&&(this.localKeys[n.code]=!0,this.emit(n))},onKeyUp:function(n){AFRAME.utils.shouldCaptureKeyEvent(n)&&(delete this.localKeys[n.code],this.emit(n))},onBlur:function(){for(let n in this.localKeys)this.localKeys.hasOwnProperty(n)&&delete this.localKeys[n]},emit:function(n){a7 in n&&this.el.emit(n.type,n),this.el.emit(n.type+":"+n.code,new l7(n.type,n)),this.data.debug&&console.log(n.type+":"+n.code)},isPressed:function(n){return n in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){const n=this.el.sceneEl.components["proxy-controls"];return n&&n.isConnected()}});AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){const n=this.el.sceneEl,e=n.canvas;if(!e){n.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}e.addEventListener("touchstart",this.onTouchStart),e.addEventListener("touchend",this.onTouchEnd)},removeEventListeners:function(){const n=this.el.sceneEl&&this.el.sceneEl.canvas;n&&(n.removeEventListener("touchstart",this.onTouchStart),n.removeEventListener("touchend",this.onTouchEnd))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},onTouchStart:function(n){this.direction=-1,this.data.reverseEnabled&&n.touches.length===2&&(this.direction=1),n.preventDefault()},onTouchEnd:function(n){this.direction=0,n.preventDefault()}});const HL="-controls",c7=.2,u7=1e-5;AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){const n=this.el;this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.navGroup=null,this.navNode=null,n.sceneEl.hasLoaded?this.injectControls():n.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(n){const e=this.el,i=this.data,s=e.sceneEl.systems.nav;e.sceneEl.hasLoaded&&this.injectControls(),s&&i.constrainToNavMesh!==n.constrainToNavMesh&&(i.constrainToNavMesh?s.addAgent(this):s.removeAgent(this))},injectControls:function(){const n=this.data;var e;for(let i=0;i<n.controls.length;i++)e=n.controls[i]+HL,this.el.components[e]||this.el.setAttribute(e,"")},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){const n=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(s,o){if(!o)return;const l=this.el,c=this.data;if(!c.enabled)return;this.updateVelocityCtrl();const d=this.velocityCtrl,u=this.velocity;if(d)if(o/1e3>c7?u.set(0,0,0):this.updateVelocity(o),c.constrainToNavMesh&&d.isNavMeshConstrained!==!1){if(u.lengthSq()<u7)return;n.copy(l.object3D.position),e.copy(u).multiplyScalar(o/1e3).add(n);const f=l.sceneEl.systems.nav;this.navGroup=this.navGroup===null?f.getGroup(n):this.navGroup,this.navNode=this.navNode||f.getNode(n,this.navGroup),this.navNode=f.clampStep(n,e,this.navGroup,this.navNode,i),l.object3D.position.copy(i)}else l.hasAttribute("velocity")?l.setAttribute("velocity",u):(l.object3D.position.x+=u.x*o/1e3,l.object3D.position.y+=u.y*o/1e3,l.object3D.position.z+=u.z*o/1e3)}}(),updateVelocityCtrl:function(){const n=this.data;if(n.enabled){for(let e=0,i=n.controls.length;e<i;e++){const s=this.el.components[n.controls[e]+HL];if(s&&s.isVelocityActive()){this.velocityCtrl=s;return}}this.velocityCtrl=null}},updateVelocity:function(){const n=new THREE.Vector2,e=new THREE.Quaternion;return function(i){let s;const o=this.el,l=this.velocityCtrl,c=this.velocity,d=this.data;if(l)if(l.getVelocityDelta)s=l.getVelocityDelta(i);else if(l.getVelocity){c.copy(l.getVelocity());return}else if(l.getPositionDelta){c.copy(l.getPositionDelta(i).multiplyScalar(1e3/i));return}else throw new Error("Incompatible movement controls: ",l);if(o.hasAttribute("velocity")&&!d.constrainToNavMesh&&c.copy(this.el.getAttribute("velocity")),s&&d.enabled){const u=d.camera;e.copy(u.object3D.quaternion),e.premultiply(o.object3D.quaternion),s.applyQuaternion(e);const f=s.length();d.fly?(c.copy(s),c.multiplyScalar(this.data.speed*16.66667)):(n.set(s.x,s.z),n.setLength(f*this.data.speed*16.66667),c.x=n.x,c.z=n.y)}}}()});AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){const n=this.data,e=this.el.sceneEl;switch(e.addEventListener("axismove",this.onAxisMove),n.mode){case"swipe":case"touch":e.addEventListener("trackpadtouchstart",this.onTouchStart),e.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":e.addEventListener("trackpaddown",this.onTouchStart),e.addEventListener("trackpadup",this.onTouchEnd);break}},removeEventListeners:function(){const n=this.el.sceneEl;n.removeEventListener("axismove",this.onAxisMove),n.removeEventListener("trackpadtouchstart",this.onTouchStart),n.removeEventListener("trackpadtouchend",this.onTouchEnd),n.removeEventListener("trackpaddown",this.onTouchStart),n.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(n){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":this.isMoving=!0;break;case"press":this.isMoving=!0;break}n.preventDefault()},onTouchEnd:function(n){this.data.mode=="swipe"&&(this.startingAxisData=[]),this.isMoving=!1,n.preventDefault()},onAxisMove:function(n){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(n);case"touch":case"press":return this.handleTouchAxis(n)}},handleSwipeAxis:function(n){const e=this.data,i=n.detail.axis;if(this.startingAxisData.length===0&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=i[0],this.startingAxisData[1]=i[1]),this.startingAxisData.length>0){let s=0,o=0;e.enableNegX&&i[0]<this.startingAxisData[0]&&(s=-1),e.enablePosX&&i[0]>this.startingAxisData[0]&&(s=1),e.enablePosZ&&i[1]>this.startingAxisData[1]&&(o=-1),e.enableNegZ&&i[1]<this.startingAxisData[1]&&(o=1);const l=Math.abs(this.startingAxisData[1]-i[1]);Math.abs(this.startingAxisData[0]-i[0])>l?(this.zVel=0,this.xVel=s,this.isMoving=!0):(this.xVel=0,this.zVel=o,this.isMoving=!0)}},handleTouchAxis:function(n){const e=this.data,i=n.detail.axis;let s=0,o=0;e.enableNegX&&i[0]<0&&(s=-1),e.enablePosX&&i[0]>0&&(s=1),e.enablePosZ&&i[1]>0&&(o=-1),e.enableNegZ&&i[1]<0&&(o=1),Math.abs(i[0])>Math.abs(i[1])?(this.zVel=0,this.xVel=s):(this.xVel=0,this.zVel=o)}});const eM={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(eM)},repetitions:{default:1/0,min:0},timeScale:{default:1}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];const n=this.el.getObject3D("mesh");n?this.load(n):this.el.addEventListener("model-loaded",e=>{this.load(e.detail.model)})},load:function(n){const e=this.el;this.model=n,this.mixer=new THREE.AnimationMixer(n),this.mixer.addEventListener("loop",i=>{e.emit("animation-loop",{action:i.action,loopDelta:i.loopDelta})}),this.mixer.addEventListener("finished",i=>{e.emit("animation-finished",{action:i.action,direction:i.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(n){if(!n)return;const e=this.data,i=AFRAME.utils.diff(e,n);if("clip"in i){this.stopAction(),e.clip&&this.playAction();return}this.activeActions.forEach(s=>{"duration"in i&&e.duration&&s.setDuration(e.duration),"clampWhenFinished"in i&&(s.clampWhenFinished=e.clampWhenFinished),("loop"in i||"repetitions"in i)&&s.setLoop(eM[e.loop],e.repetitions),"timeScale"in i&&s.setEffectiveTimeScale(e.timeScale)})},stopAction:function(){const n=this.data;for(let e=0;e<this.activeActions.length;e++)n.crossFadeDuration?this.activeActions[e].fadeOut(n.crossFadeDuration):this.activeActions[e].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;const n=this.model,e=this.data,i=n.animations||(n.geometry||{}).animations||[];if(!i.length)return;const s=h7(e.clip);for(let o,l=0;o=i[l];l++)if(o.name.match(s)){const c=this.mixer.clipAction(o,n);c.enabled=!0,c.clampWhenFinished=e.clampWhenFinished,e.duration&&c.setDuration(e.duration),e.timeScale!==1&&c.setEffectiveTimeScale(e.timeScale),c.setLoop(eM[e.loop],e.repetitions).fadeIn(e.crossFadeDuration).play(),this.activeActions.push(c)}},tick:function(n,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}});function h7(n){return new RegExp("^"+n.split(/\*+/).map(d7).join(".*")+"$")}function d7(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}var f7=THREE.ColladaLoader=function(n){this.manager=n!==void 0?n:THREE.DefaultLoadingManager};THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"anonymous",load:function(n,e,i,s){var o=this,l=o.path===void 0?THREE.LoaderUtils.extractUrlBase(n):o.path,c=new THREE.FileLoader(o.manager);c.setPath(o.path),c.load(n,function(d){e(o.parse(d,l))},i,s)},setPath:function(n){return this.path=n,this},setResourcePath:function(n){return this.resourcePath=n,this},options:{set convertUpAxis(n){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(n){return this.crossOrigin=n,this},parse:function(n,e){function i(de,fe){for(var pe=[],xe=de.childNodes,Ee=0,ct=xe.length;Ee<ct;Ee++){var St=xe[Ee];St.nodeName===fe&&pe.push(St)}return pe}function s(de){if(de.length===0)return[];for(var fe=de.trim().split(/\s+/),pe=new Array(fe.length),xe=0,Ee=fe.length;xe<Ee;xe++)pe[xe]=fe[xe];return pe}function o(de){if(de.length===0)return[];for(var fe=de.trim().split(/\s+/),pe=new Array(fe.length),xe=0,Ee=fe.length;xe<Ee;xe++)pe[xe]=parseFloat(fe[xe]);return pe}function l(de){if(de.length===0)return[];for(var fe=de.trim().split(/\s+/),pe=new Array(fe.length),xe=0,Ee=fe.length;xe<Ee;xe++)pe[xe]=parseInt(fe[xe]);return pe}function c(de){return de.substring(1)}function d(){return"three_default_"+Ke++}function u(de){return Object.keys(de).length===0}function f(de){return{unit:A(i(de,"unit")[0]),upAxis:g(i(de,"up_axis")[0])}}function A(de){return de!==void 0&&de.hasAttribute("meter")===!0?parseFloat(de.getAttribute("meter")):1}function g(de){return de!==void 0?de.textContent:"Y_UP"}function y(de,fe,pe,xe){var Ee=i(de,fe)[0];if(Ee!==void 0)for(var ct=i(Ee,pe),St=0;St<ct.length;St++)xe(ct[St])}function v(de,fe){for(var pe in de){var xe=de[pe];xe.build=fe(de[pe])}}function _(de,fe){return de.build!==void 0||(de.build=fe(de)),de.build}function x(de){for(var fe={sources:{},samplers:{},channels:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1){var ct;switch(Ee.nodeName){case"source":ct=Ee.getAttribute("id"),fe.sources[ct]=be(Ee);break;case"sampler":ct=Ee.getAttribute("id"),fe.samplers[ct]=b(Ee);break;case"channel":ct=Ee.getAttribute("target"),fe.channels[ct]=m(Ee);break;default:console.log(Ee)}}}et.animations[de.getAttribute("id")]=fe}function b(de){for(var fe={inputs:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"input":var ct=c(Ee.getAttribute("source")),St=Ee.getAttribute("semantic");fe.inputs[St]=ct;break}}return fe}function m(de){var fe={},pe=de.getAttribute("target"),xe=pe.split("/"),Ee=xe.shift(),ct=xe.shift(),St=ct.indexOf("(")!==-1,zt=ct.indexOf(".")!==-1;if(zt)xe=ct.split("."),ct=xe.shift(),fe.member=xe.shift();else if(St){var en=ct.split("(");ct=en.shift();for(var An=0;An<en.length;An++)en[An]=parseInt(en[An].replace(/\)/,""));fe.indices=en}return fe.id=Ee,fe.sid=ct,fe.arraySyntax=St,fe.memberSyntax=zt,fe.sampler=c(de.getAttribute("source")),fe}function S(de){var fe=[],pe=de.channels,xe=de.samplers,Ee=de.sources;for(var ct in pe)if(pe.hasOwnProperty(ct)){var St=pe[ct],zt=xe[St.sampler],en=zt.inputs.INPUT,An=zt.inputs.OUTPUT,Wt=Ee[en],kn=Ee[An],ui=M(St,Wt,kn);D(ui,fe)}return fe}function C(de){return _(et.animations[de],S)}function M(de,fe,pe){var xe=et.nodes[de.id],Ee=_n(xe.id),ct=xe.transforms[de.sid],St=xe.matrix.clone().transpose(),zt,en,An,Wt,kn,ui,Ln={};switch(ct){case"matrix":for(An=0,Wt=fe.array.length;An<Wt;An++)if(zt=fe.array[An],en=An*pe.stride,Ln[zt]===void 0&&(Ln[zt]={}),de.arraySyntax===!0){var di=pe.array[en],Kn=de.indices[0]+4*de.indices[1];Ln[zt][Kn]=di}else for(kn=0,ui=pe.stride;kn<ui;kn++)Ln[zt][kn]=pe.array[en+kn];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',ct);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',ct);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',ct);break}var vi=T(Ln,St),Ri={name:Ee.uuid,keyframes:vi};return Ri}function T(de,fe){var pe=[];for(var xe in de)pe.push({time:parseFloat(xe),value:de[xe]});pe.sort(ct);for(var Ee=0;Ee<16;Ee++)z(pe,Ee,fe.elements[Ee]);return pe;function ct(St,zt){return St.time-zt.time}}var N=new THREE.Vector3,P=new THREE.Vector3,k=new THREE.Quaternion;function D(de,fe){for(var pe=de.keyframes,xe=de.name,Ee=[],ct=[],St=[],zt=[],en=0,An=pe.length;en<An;en++){var Wt=pe[en],kn=Wt.time,ui=Wt.value;We.fromArray(ui).transpose(),We.decompose(N,k,P),Ee.push(kn),ct.push(N.x,N.y,N.z),St.push(k.x,k.y,k.z,k.w),zt.push(P.x,P.y,P.z)}return ct.length>0&&fe.push(new THREE.VectorKeyframeTrack(xe+".position",Ee,ct)),St.length>0&&fe.push(new THREE.QuaternionKeyframeTrack(xe+".quaternion",Ee,St)),zt.length>0&&fe.push(new THREE.VectorKeyframeTrack(xe+".scale",Ee,zt)),fe}function z(de,fe,pe){var xe,Ee=!0,ct,St;for(ct=0,St=de.length;ct<St;ct++)xe=de[ct],xe.value[fe]===void 0?xe.value[fe]=null:Ee=!1;if(Ee===!0)for(ct=0,St=de.length;ct<St;ct++)xe=de[ct],xe.value[fe]=pe;else Y(de,fe)}function Y(de,fe){for(var pe,xe,Ee=0,ct=de.length;Ee<ct;Ee++){var St=de[Ee];if(St.value[fe]===null){if(pe=ne(de,Ee,fe),xe=O(de,Ee,fe),pe===null){St.value[fe]=xe.value[fe];continue}if(xe===null){St.value[fe]=pe.value[fe];continue}F(St,pe,xe,fe)}}}function ne(de,fe,pe){for(;fe>=0;){var xe=de[fe];if(xe.value[pe]!==null)return xe;fe--}return null}function O(de,fe,pe){for(;fe<de.length;){var xe=de[fe];if(xe.value[pe]!==null)return xe;fe++}return null}function F(de,fe,pe,xe){if(pe.time-fe.time===0){de.value[xe]=fe.value[xe];return}de.value[xe]=(de.time-fe.time)*(pe.value[xe]-fe.value[xe])/(pe.time-fe.time)+fe.value[xe]}function U(de){for(var fe={name:de.getAttribute("id")||"default",start:parseFloat(de.getAttribute("start")||0),end:parseFloat(de.getAttribute("end")||0),animations:[]},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"instance_animation":fe.animations.push(c(Ee.getAttribute("url")));break}}et.clips[de.getAttribute("id")]=fe}function G(de){for(var fe=[],pe=de.name,xe=de.end-de.start||-1,Ee=de.animations,ct=0,St=Ee.length;ct<St;ct++)for(var zt=C(Ee[ct]),en=0,An=zt.length;en<An;en++)fe.push(zt[en]);return new THREE.AnimationClip(pe,xe,fe)}function V(de){return _(et.clips[de],G)}function K(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"skin":fe.id=c(Ee.getAttribute("source")),fe.skin=W(Ee);break;case"morph":fe.id=c(Ee.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}et.controllers[de.getAttribute("id")]=fe}function W(de){for(var fe={sources:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"bind_shape_matrix":fe.bindShapeMatrix=o(Ee.textContent);break;case"source":var ct=Ee.getAttribute("id");fe.sources[ct]=be(Ee);break;case"joints":fe.joints=J(Ee);break;case"vertex_weights":fe.vertexWeights=ee(Ee);break}}return fe}function J(de){for(var fe={inputs:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"input":var ct=Ee.getAttribute("semantic"),St=c(Ee.getAttribute("source"));fe.inputs[ct]=St;break}}return fe}function ee(de){for(var fe={inputs:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"input":var ct=Ee.getAttribute("semantic"),St=c(Ee.getAttribute("source")),zt=parseInt(Ee.getAttribute("offset"));fe.inputs[ct]={id:St,offset:zt};break;case"vcount":fe.vcount=l(Ee.textContent);break;case"v":fe.v=l(Ee.textContent);break}}return fe}function he(de){var fe={id:de.id},pe=et.geometries[fe.id];return de.skin!==void 0&&(fe.skin=me(de.skin),pe.sources.skinIndices=fe.skin.indices,pe.sources.skinWeights=fe.skin.weights),fe}function me(de){var fe=4,pe={joints:[],indices:{array:[],stride:fe},weights:{array:[],stride:fe}},xe=de.sources,Ee=de.vertexWeights,ct=Ee.vcount,St=Ee.v,zt=Ee.inputs.JOINT.offset,en=Ee.inputs.WEIGHT.offset,An=de.sources[de.joints.inputs.JOINT],Wt=de.sources[de.joints.inputs.INV_BIND_MATRIX],kn=xe[Ee.inputs.WEIGHT.id].array,ui=0,Ln,di,Kn;for(Ln=0,Kn=ct.length;Ln<Kn;Ln++){var vi=ct[Ln],Ri=[];for(di=0;di<vi;di++){var ji=St[ui+zt],Di=St[ui+en],Er=kn[Di];Ri.push({index:ji,weight:Er}),ui+=2}for(Ri.sort(_r),di=0;di<fe;di++){var $i=Ri[di];$i!==void 0?(pe.indices.array.push($i.index),pe.weights.array.push($i.weight)):(pe.indices.array.push(0),pe.weights.array.push(0))}}for(de.bindShapeMatrix?pe.bindMatrix=new THREE.Matrix4().fromArray(de.bindShapeMatrix).transpose():pe.bindMatrix=new THREE.Matrix4().identity(),Ln=0,Kn=An.array.length;Ln<Kn;Ln++){var es=An.array[Ln],Ui=new THREE.Matrix4().fromArray(Wt.array,Ln*Wt.stride).transpose();pe.joints.push({name:es,boneInverse:Ui})}return pe;function _r(ur,tl){return tl.weight-ur.weight}}function Be(de){return _(et.controllers[de],he)}function Se(de){var fe={init_from:i(de,"init_from")[0].textContent};et.images[de.getAttribute("id")]=fe}function rt(de){return de.build!==void 0?de.build:de.init_from}function Ge(de){var fe=et.images[de];return fe!==void 0?_(fe,rt):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",de),null)}function st(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"profile_COMMON":fe.profile=mt(Ee);break}}et.effects[de.getAttribute("id")]=fe}function mt(de){for(var fe={surfaces:{},samplers:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"newparam":Ft(Ee,fe);break;case"technique":fe.technique=Fn(Ee);break;case"extra":fe.extra=zn(Ee);break}}return fe}function Ft(de,fe){for(var pe=de.getAttribute("sid"),xe=0,Ee=de.childNodes.length;xe<Ee;xe++){var ct=de.childNodes[xe];if(ct.nodeType===1)switch(ct.nodeName){case"surface":fe.surfaces[pe]=Pt(ct);break;case"sampler2D":fe.samplers[pe]=nt(ct);break}}}function Pt(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"init_from":fe.init_from=Ee.textContent;break}}return fe}function nt(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"source":fe.source=Ee.textContent;break}}return fe}function Fn(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"constant":case"lambert":case"blinn":case"phong":fe.type=Ee.nodeName,fe.parameters=Xt(Ee);break}}return fe}function Xt(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":fe[Ee.nodeName]=on(Ee);break;case"transparent":fe[Ee.nodeName]={opaque:Ee.getAttribute("opaque"),data:on(Ee)};break}}return fe}function on(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"color":fe[Ee.nodeName]=o(Ee.textContent);break;case"float":fe[Ee.nodeName]=parseFloat(Ee.textContent);break;case"texture":fe[Ee.nodeName]={id:Ee.getAttribute("texture"),extra:nn(Ee)};break}}return fe}function nn(de){for(var fe={technique:{}},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"extra":vn(Ee,fe);break}}return fe}function vn(de,fe){for(var pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"technique":Rn(Ee,fe);break}}}function Rn(de,fe){for(var pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":fe.technique[Ee.nodeName]=parseFloat(Ee.textContent);break;case"wrapU":case"wrapV":Ee.textContent.toUpperCase()==="TRUE"?fe.technique[Ee.nodeName]=1:Ee.textContent.toUpperCase()==="FALSE"?fe.technique[Ee.nodeName]=0:fe.technique[Ee.nodeName]=parseInt(Ee.textContent);break}}}function zn(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"technique":fe.technique=Wn(Ee);break}}return fe}function Wn(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"double_sided":fe[Ee.nodeName]=parseInt(Ee.textContent);break}}return fe}function Ai(de){return de}function Ti(de){return _(et.effects[de],Ai)}function Je(de){for(var fe={name:de.getAttribute("name")},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"instance_effect":fe.url=c(Ee.getAttribute("url"));break}}et.materials[de.getAttribute("id")]=fe}function we(de){var fe,pe=de.slice((de.lastIndexOf(".")-1>>>0)+2);switch(pe=pe.toLowerCase(),pe){case"tga":fe=ce;break;default:fe=ie}return fe}function ge(de){var fe=Ti(de.url),pe=fe.profile.technique,xe=fe.profile.extra,Ee;switch(pe.type){case"phong":case"blinn":Ee=new THREE.MeshPhongMaterial;break;case"lambert":Ee=new THREE.MeshLambertMaterial;break;default:Ee=new THREE.MeshBasicMaterial;break}Ee.name=de.name;function ct(ui){var Ln=fe.profile.samplers[ui.id],di=null;if(Ln!==void 0){var Kn=fe.profile.surfaces[Ln.source];di=Ge(Kn.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),di=Ge(ui.id);if(di!==null){var vi=we(di);if(vi!==void 0){var Ri=vi.load(di),ji=ui.extra;if(ji!==void 0&&ji.technique!==void 0&&u(ji.technique)===!1){var Di=ji.technique;Ri.wrapS=Di.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,Ri.wrapT=Di.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,Ri.offset.set(Di.offsetU||0,Di.offsetV||0),Ri.repeat.set(Di.repeatU||1,Di.repeatV||1)}else Ri.wrapS=THREE.RepeatWrapping,Ri.wrapT=THREE.RepeatWrapping;return Ri}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",di),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",ui.id),null}var St=pe.parameters;for(var zt in St){var en=St[zt];switch(zt){case"diffuse":en.color&&Ee.color.fromArray(en.color),en.texture&&(Ee.map=ct(en.texture));break;case"specular":en.color&&Ee.specular&&Ee.specular.fromArray(en.color),en.texture&&(Ee.specularMap=ct(en.texture));break;case"bump":en.texture&&(Ee.normalMap=ct(en.texture));break;case"ambient":en.texture&&(Ee.lightMap=ct(en.texture));break;case"shininess":en.float&&Ee.shininess&&(Ee.shininess=en.float);break;case"emission":en.color&&Ee.emissive&&Ee.emissive.fromArray(en.color),en.texture&&(Ee.emissiveMap=ct(en.texture));break}}var An=St.transparent,Wt=St.transparency;if(Wt===void 0&&An&&(Wt={float:1}),An===void 0&&Wt&&(An={opaque:"A_ONE",data:{color:[1,1,1,1]}}),An&&Wt)if(An.data.texture)Ee.transparent=!0;else{var kn=An.data.color;switch(An.opaque){case"A_ONE":Ee.opacity=kn[3]*Wt.float;break;case"RGB_ZERO":Ee.opacity=1-kn[0]*Wt.float;break;case"A_ZERO":Ee.opacity=1-kn[3]*Wt.float;break;case"RGB_ONE":Ee.opacity=kn[0]*Wt.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',An.opaque)}Ee.opacity<1&&(Ee.transparent=!0)}return xe!==void 0&&xe.technique!==void 0&&xe.technique.double_sided===1&&(Ee.side=THREE.DoubleSide),Ee}function _e(de){return _(et.materials[de],ge)}function Pe(de){for(var fe={name:de.getAttribute("name")},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"optics":fe.optics=Te(Ee);break}}et.cameras[de.getAttribute("id")]=fe}function Te(de){for(var fe=0;fe<de.childNodes.length;fe++){var pe=de.childNodes[fe];switch(pe.nodeName){case"technique_common":return He(pe)}}return{}}function He(de){for(var fe={},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];switch(xe.nodeName){case"perspective":case"orthographic":fe.technique=xe.nodeName,fe.parameters=Fe(xe);break}}return fe}function Fe(de){for(var fe={},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];switch(xe.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":fe[xe.nodeName]=parseFloat(xe.textContent);break}}return fe}function Ue(de){var fe;switch(de.optics.technique){case"perspective":fe=new THREE.PerspectiveCamera(de.optics.parameters.yfov,de.optics.parameters.aspect_ratio,de.optics.parameters.znear,de.optics.parameters.zfar);break;case"orthographic":var pe=de.optics.parameters.ymag,xe=de.optics.parameters.xmag,Ee=de.optics.parameters.aspect_ratio;xe=xe===void 0?pe*Ee:xe,pe=pe===void 0?xe/Ee:pe,xe*=.5,pe*=.5,fe=new THREE.OrthographicCamera(-xe,xe,pe,-pe,de.optics.parameters.znear,de.optics.parameters.zfar);break;default:fe=new THREE.PerspectiveCamera;break}return fe.name=de.name,fe}function Ae(de){var fe=et.cameras[de];return fe!==void 0?_(fe,Ue):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",de),null)}function Xe(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"technique_common":fe=dt(Ee);break}}et.lights[de.getAttribute("id")]=fe}function dt(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"directional":case"point":case"spot":case"ambient":fe.technique=Ee.nodeName,fe.parameters=ue(Ee)}}return fe}function ue(de){for(var fe={},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"color":var ct=o(Ee.textContent);fe.color=new THREE.Color().fromArray(ct);break;case"falloff_angle":fe.falloffAngle=parseFloat(Ee.textContent);break;case"quadratic_attenuation":var St=parseFloat(Ee.textContent);fe.distance=St?Math.sqrt(1/St):0;break}}return fe}function q(de){var fe;switch(de.technique){case"directional":fe=new THREE.DirectionalLight;break;case"point":fe=new THREE.PointLight;break;case"spot":fe=new THREE.SpotLight;break;case"ambient":fe=new THREE.AmbientLight;break}return de.parameters.color&&fe.color.copy(de.parameters.color),de.parameters.distance&&(fe.distance=de.parameters.distance),fe}function re(de){var fe=et.lights[de];return fe!==void 0?_(fe,q):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",de),null)}function ke(de){var fe={name:de.getAttribute("name"),sources:{},vertices:{},primitives:[]},pe=i(de,"mesh")[0];if(pe!==void 0){for(var xe=0;xe<pe.childNodes.length;xe++){var Ee=pe.childNodes[xe];if(Ee.nodeType===1){var ct=Ee.getAttribute("id");switch(Ee.nodeName){case"source":fe.sources[ct]=be(Ee);break;case"vertices":fe.vertices=qe(Ee);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",Ee.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":fe.primitives.push(Qe(Ee));break;default:console.log(Ee)}}}et.geometries[de.getAttribute("id")]=fe}}function be(de){for(var fe={array:[],stride:3},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"float_array":fe.array=o(xe.textContent);break;case"Name_array":fe.array=s(xe.textContent);break;case"technique_common":var Ee=i(xe,"accessor")[0];Ee!==void 0&&(fe.stride=parseInt(Ee.getAttribute("stride")));break}}return fe}function qe(de){for(var fe={},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];xe.nodeType===1&&(fe[xe.getAttribute("semantic")]=c(xe.getAttribute("source")))}return fe}function Qe(de){for(var fe={type:de.nodeName,material:de.getAttribute("material"),count:parseInt(de.getAttribute("count")),inputs:{},stride:0,hasUV:!1},pe=0,xe=de.childNodes.length;pe<xe;pe++){var Ee=de.childNodes[pe];if(Ee.nodeType===1)switch(Ee.nodeName){case"input":var ct=c(Ee.getAttribute("source")),St=Ee.getAttribute("semantic"),zt=parseInt(Ee.getAttribute("offset")),en=parseInt(Ee.getAttribute("set")),An=en>0?St+en:St;fe.inputs[An]={id:ct,offset:zt},fe.stride=Math.max(fe.stride,zt+1),St==="TEXCOORD"&&(fe.hasUV=!0);break;case"vcount":fe.vcount=l(Ee.textContent);break;case"p":fe.p=l(Ee.textContent);break}}return fe}function It(de){for(var fe={},pe=0;pe<de.length;pe++){var xe=de[pe];fe[xe.type]===void 0&&(fe[xe.type]=[]),fe[xe.type].push(xe)}return fe}function Ot(de){for(var fe=0,pe=0,xe=de.length;pe<xe;pe++){var Ee=de[pe];Ee.hasUV===!0&&fe++}fe>0&&fe<de.length&&(de.uvsNeedsFix=!0)}function Jt(de){var fe={},pe=de.sources,xe=de.vertices,Ee=de.primitives;if(Ee.length===0)return{};var ct=It(Ee);for(var St in ct){var zt=ct[St];Ot(zt),fe[St]=dn(zt,pe,xe)}return fe}function dn(de,fe,pe){for(var xe={},Ee={array:[],stride:0},ct={array:[],stride:0},St={array:[],stride:0},zt={array:[],stride:0},en={array:[],stride:0},An={array:[],stride:4},Wt={array:[],stride:4},kn=new THREE.BufferGeometry,ui=[],Ln=0,di=0;di<de.length;di++){var Kn=de[di],vi=Kn.inputs,Ri=0;switch(Kn.type){case"lines":case"linestrips":Ri=Kn.count*2;break;case"triangles":Ri=Kn.count*3;break;case"polylist":for(var ji=0;ji<Kn.count;ji++){var Di=Kn.vcount[ji];switch(Di){case 3:Ri+=3;break;case 4:Ri+=6;break;default:Ri+=(Di-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",Kn.type)}kn.addGroup(Ln,Ri,di),Ln+=Ri,Kn.material&&ui.push(Kn.material);for(var Er in vi){var $i=vi[Er];switch(Er){case"VERTEX":for(var es in pe){var Ui=pe[es];switch(es){case"POSITION":var _r=Ee.array.length;if(Sn(Kn,fe[Ui],$i.offset,Ee.array),Ee.stride=fe[Ui].stride,fe.skinWeights&&fe.skinIndices&&(Sn(Kn,fe.skinIndices,$i.offset,An.array),Sn(Kn,fe.skinWeights,$i.offset,Wt.array)),Kn.hasUV===!1&&de.uvsNeedsFix===!0)for(var Ri=(Ee.array.length-_r)/Ee.stride,ur=0;ur<Ri;ur++)St.array.push(0,0);break;case"NORMAL":Sn(Kn,fe[Ui],$i.offset,ct.array),ct.stride=fe[Ui].stride;break;case"COLOR":Sn(Kn,fe[Ui],$i.offset,en.array),en.stride=fe[Ui].stride;break;case"TEXCOORD":Sn(Kn,fe[Ui],$i.offset,St.array),St.stride=fe[Ui].stride;break;case"TEXCOORD1":Sn(Kn,fe[Ui],$i.offset,zt.array),St.stride=fe[Ui].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',es)}}break;case"NORMAL":Sn(Kn,fe[$i.id],$i.offset,ct.array),ct.stride=fe[$i.id].stride;break;case"COLOR":Sn(Kn,fe[$i.id],$i.offset,en.array),en.stride=fe[$i.id].stride;break;case"TEXCOORD":Sn(Kn,fe[$i.id],$i.offset,St.array),St.stride=fe[$i.id].stride;break;case"TEXCOORD1":Sn(Kn,fe[$i.id],$i.offset,zt.array),zt.stride=fe[$i.id].stride;break}}}return Ee.array.length>0&&kn.addAttribute("position",new THREE.Float32BufferAttribute(Ee.array,Ee.stride)),ct.array.length>0&&kn.addAttribute("normal",new THREE.Float32BufferAttribute(ct.array,ct.stride)),en.array.length>0&&kn.addAttribute("color",new THREE.Float32BufferAttribute(en.array,en.stride)),St.array.length>0&&kn.addAttribute("uv",new THREE.Float32BufferAttribute(St.array,St.stride)),zt.array.length>0&&kn.addAttribute("uv2",new THREE.Float32BufferAttribute(zt.array,zt.stride)),An.array.length>0&&kn.addAttribute("skinIndex",new THREE.Float32BufferAttribute(An.array,An.stride)),Wt.array.length>0&&kn.addAttribute("skinWeight",new THREE.Float32BufferAttribute(Wt.array,Wt.stride)),xe.data=kn,xe.type=de[0].type,xe.materialKeys=ui,xe}function Sn(de,fe,pe,xe){var Ee=de.p,ct=de.stride,St=de.vcount;function zt(Er){for(var $i=Ee[Er+pe]*An,es=$i+An;$i<es;$i++)xe.push(en[$i])}var en=fe.array,An=fe.stride;if(de.vcount!==void 0)for(var Wt=0,kn=0,ui=St.length;kn<ui;kn++){var Ln=St[kn];if(Ln===4){var di=Wt+ct*0,Kn=Wt+ct*1,vi=Wt+ct*2,Ri=Wt+ct*3;zt(di),zt(Kn),zt(Ri),zt(Kn),zt(vi),zt(Ri)}else if(Ln===3){var di=Wt+ct*0,Kn=Wt+ct*1,vi=Wt+ct*2;zt(di),zt(Kn),zt(vi)}else if(Ln>4)for(var ji=1,Di=Ln-2;ji<=Di;ji++){var di=Wt+ct*0,Kn=Wt+ct*ji,vi=Wt+ct*(ji+1);zt(di),zt(Kn),zt(vi)}Wt+=ct*Ln}else for(var kn=0,ui=Ee.length;kn<ui;kn+=ct)zt(kn)}function er(de){return _(et.geometries[de],Jt)}function Pi(de){for(var fe={name:de.getAttribute("name")||"",joints:{},links:[]},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"technique_common":Tn(xe,fe);break}}et.kinematicsModels[de.getAttribute("id")]=fe}function Ir(de){return de.build!==void 0?de.build:de}function _i(de){return _(et.kinematicsModels[de],Ir)}function Tn(de,fe){for(var pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"joint":fe.joints[xe.getAttribute("sid")]=Qt(xe);break;case"link":fe.links.push(ri(xe));break}}}function Qt(de){for(var fe,pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"prismatic":case"revolute":fe=mn(xe);break}}return fe}function mn(de,pe){for(var pe={sid:de.getAttribute("sid"),name:de.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:de.nodeName,static:!1,zeroPosition:0,middlePosition:0},xe=0;xe<de.childNodes.length;xe++){var Ee=de.childNodes[xe];if(Ee.nodeType===1)switch(Ee.nodeName){case"axis":var ct=o(Ee.textContent);pe.axis.fromArray(ct);break;case"limits":var St=Ee.getElementsByTagName("max")[0],zt=Ee.getElementsByTagName("min")[0];pe.limits.max=parseFloat(St.textContent),pe.limits.min=parseFloat(zt.textContent);break}}return pe.limits.min>=pe.limits.max&&(pe.static=!0),pe.middlePosition=(pe.limits.min+pe.limits.max)/2,pe}function ri(de){for(var fe={sid:de.getAttribute("sid"),name:de.getAttribute("name")||"",attachments:[],transforms:[]},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"attachment_full":fe.attachments.push(Cn(xe));break;case"matrix":case"translate":case"rotate":fe.transforms.push(li(xe));break}}return fe}function Cn(de){for(var fe={joint:de.getAttribute("joint").split("/").pop(),transforms:[],links:[]},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"link":fe.links.push(ri(xe));break;case"matrix":case"translate":case"rotate":fe.transforms.push(li(xe));break}}return fe}function li(de){var fe={type:de.nodeName},pe=o(de.textContent);switch(fe.type){case"matrix":fe.obj=new THREE.Matrix4,fe.obj.fromArray(pe).transpose();break;case"translate":fe.obj=new THREE.Vector3,fe.obj.fromArray(pe);break;case"rotate":fe.obj=new THREE.Vector3,fe.obj.fromArray(pe),fe.angle=THREE.Math.degToRad(pe[3]);break}return fe}function bi(de){for(var fe={name:de.getAttribute("name")||"",rigidBodies:{}},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"rigid_body":fe.rigidBodies[xe.getAttribute("name")]={},Li(xe,fe.rigidBodies[xe.getAttribute("name")]);break}}et.physicsModels[de.getAttribute("id")]=fe}function Li(de,fe){for(var pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"technique_common":Ar(xe,fe);break}}}function Ar(de,fe){for(var pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"inertia":fe.inertia=o(xe.textContent);break;case"mass":fe.mass=o(xe.textContent)[0];break}}}function ar(de){for(var fe={bindJointAxis:[]},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"bind_joint_axis":fe.bindJointAxis.push(Ye(xe));break}}et.kinematicsScenes[c(de.getAttribute("url"))]=fe}function Ye(de){for(var fe={target:de.getAttribute("target").split("/").pop()},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"axis":var Ee=xe.getElementsByTagName("param")[0];fe.axis=Ee.textContent;var ct=fe.axis.split("inst_").pop().split("axis")[0];fe.jointIndex=ct.substr(0,ct.length-1);break}}return fe}function xt(de){return de.build!==void 0?de.build:de}function Mt(de){return _(et.kinematicsScenes[de],xt)}function Et(){var de=Object.keys(et.kinematicsModels)[0],fe=Object.keys(et.kinematicsScenes)[0],pe=Object.keys(et.visualScenes)[0];if(de===void 0||fe===void 0)return;for(var xe=_i(de),Ee=Mt(fe),ct=qi(pe),St=Ee.bindJointAxis,zt={},en=0,An=St.length;en<An;en++){var Wt=St[en],kn=ei.querySelector('[sid="'+Wt.target+'"]');if(kn){var ui=kn.parentElement;Ln(Wt.jointIndex,ui)}}function Ln(Kn,vi){var Ri=vi.getAttribute("name"),ji=xe.joints[Kn];ct.traverse(function(Di){Di.name===Ri&&(zt[Kn]={object:Di,transforms:Bt(vi),joint:ji,position:ji.zeroPosition})})}var di=new THREE.Matrix4;Ie={joints:xe&&xe.joints,getJointValue:function(Kn){var vi=zt[Kn];if(vi)return vi.position;console.warn("THREE.ColladaLoader: Joint "+Kn+" doesn't exist.")},setJointValue:function(Kn,vi){var Ri=zt[Kn];if(Ri){var ji=Ri.joint;if(vi>ji.limits.max||vi<ji.limits.min)console.warn("THREE.ColladaLoader: Joint "+Kn+" value "+vi+" outside of limits (min: "+ji.limits.min+", max: "+ji.limits.max+").");else if(ji.static)console.warn("THREE.ColladaLoader: Joint "+Kn+" is static.");else{var Di=Ri.object,Er=ji.axis,$i=Ri.transforms;We.identity();for(var es=0;es<$i.length;es++){var Ui=$i[es];if(Ui.sid&&Ui.sid.indexOf(Kn)!==-1)switch(ji.type){case"revolute":We.multiply(di.makeRotationAxis(Er,THREE.Math.degToRad(vi)));break;case"prismatic":We.multiply(di.makeTranslation(Er.x*vi,Er.y*vi,Er.z*vi));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+ji.type);break}else switch(Ui.type){case"matrix":We.multiply(Ui.obj);break;case"translate":We.multiply(di.makeTranslation(Ui.obj.x,Ui.obj.y,Ui.obj.z));break;case"scale":We.scale(Ui.obj);break;case"rotate":We.multiply(di.makeRotationAxis(Ui.obj,Ui.angle));break}}Di.matrix.copy(We),Di.matrix.decompose(Di.position,Di.quaternion,Di.scale),zt[Kn].position=vi}}else console.log("THREE.ColladaLoader: "+Kn+" does not exist.")}}}function Bt(de){for(var fe=[],pe=ei.querySelector('[id="'+de.id+'"]'),xe=0;xe<pe.childNodes.length;xe++){var Ee=pe.childNodes[xe];if(Ee.nodeType===1)switch(Ee.nodeName){case"matrix":var St=o(Ee.textContent),ct=new THREE.Matrix4().fromArray(St).transpose();fe.push({sid:Ee.getAttribute("sid"),type:Ee.nodeName,obj:ct});break;case"translate":case"scale":var St=o(Ee.textContent),zt=new THREE.Vector3().fromArray(St);fe.push({sid:Ee.getAttribute("sid"),type:Ee.nodeName,obj:zt});break;case"rotate":var St=o(Ee.textContent),zt=new THREE.Vector3().fromArray(St),en=THREE.Math.degToRad(St[3]);fe.push({sid:Ee.getAttribute("sid"),type:Ee.nodeName,obj:zt,angle:en});break}}return fe}function Re(de){for(var fe=de.getElementsByTagName("node"),pe=0;pe<fe.length;pe++){var xe=fe[pe];xe.hasAttribute("id")===!1&&xe.setAttribute("id",d())}}var We=new THREE.Matrix4,it=new THREE.Vector3;function gt(de){for(var fe={name:de.getAttribute("name")||"",type:de.getAttribute("type"),id:de.getAttribute("id"),sid:de.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];if(xe.nodeType===1)switch(xe.nodeName){case"node":fe.nodes.push(xe.getAttribute("id")),gt(xe);break;case"instance_camera":fe.instanceCameras.push(c(xe.getAttribute("url")));break;case"instance_controller":fe.instanceControllers.push(At(xe));break;case"instance_light":fe.instanceLights.push(c(xe.getAttribute("url")));break;case"instance_geometry":fe.instanceGeometries.push(At(xe));break;case"instance_node":fe.instanceNodes.push(c(xe.getAttribute("url")));break;case"matrix":var ct=o(xe.textContent);fe.matrix.multiply(We.fromArray(ct).transpose()),fe.transforms[xe.getAttribute("sid")]=xe.nodeName;break;case"translate":var ct=o(xe.textContent);it.fromArray(ct),fe.matrix.multiply(We.makeTranslation(it.x,it.y,it.z)),fe.transforms[xe.getAttribute("sid")]=xe.nodeName;break;case"rotate":var ct=o(xe.textContent),Ee=THREE.Math.degToRad(ct[3]);fe.matrix.multiply(We.makeRotationAxis(it.fromArray(ct),Ee)),fe.transforms[xe.getAttribute("sid")]=xe.nodeName;break;case"scale":var ct=o(xe.textContent);fe.matrix.scale(it.fromArray(ct)),fe.transforms[xe.getAttribute("sid")]=xe.nodeName;break;case"extra":break;default:console.log(xe)}}return Un(fe.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",fe.id):et.nodes[fe.id]=fe,fe}function At(de){for(var fe={id:c(de.getAttribute("url")),materials:{},skeletons:[]},pe=0;pe<de.childNodes.length;pe++){var xe=de.childNodes[pe];switch(xe.nodeName){case"bind_material":for(var Ee=xe.getElementsByTagName("instance_material"),ct=0;ct<Ee.length;ct++){var St=Ee[ct],zt=St.getAttribute("symbol"),en=St.getAttribute("target");fe.materials[zt]=c(en)}break;case"skeleton":fe.skeletons.push(c(xe.textContent));break}}return fe}function Rt(de,fe){var pe=[],xe=[],Ee,ct,St;for(Ee=0;Ee<de.length;Ee++){var zt=de[Ee],en;if(Un(zt))en=_n(zt),Nt(en,fe,pe);else if(Ci(zt))for(var An=et.visualScenes[zt],Wt=An.children,ct=0;ct<Wt.length;ct++){var kn=Wt[ct];if(kn.type==="JOINT"){var en=_n(kn.id);Nt(en,fe,pe)}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",zt)}for(Ee=0;Ee<fe.length;Ee++)for(ct=0;ct<pe.length;ct++)if(St=pe[ct],St.bone.name===fe[Ee].name){xe[Ee]=St,St.processed=!0;break}for(Ee=0;Ee<pe.length;Ee++)St=pe[Ee],St.processed===!1&&(xe.push(St),St.processed=!0);var ui=[],Ln=[];for(Ee=0;Ee<xe.length;Ee++)St=xe[Ee],ui.push(St.bone),Ln.push(St.boneInverse);return new THREE.Skeleton(ui,Ln)}function Nt(de,fe,pe){de.traverse(function(xe){if(xe.isBone===!0){for(var Ee,ct=0;ct<fe.length;ct++){var St=fe[ct];if(St.name===xe.name){Ee=St.boneInverse;break}}Ee===void 0&&(Ee=new THREE.Matrix4),pe.push({bone:xe,boneInverse:Ee,processed:!1})}})}function wn(de){for(var fe=[],pe=de.matrix,xe=de.nodes,Ee=de.type,ct=de.instanceCameras,St=de.instanceControllers,zt=de.instanceLights,en=de.instanceGeometries,An=de.instanceNodes,Wt=0,kn=xe.length;Wt<kn;Wt++)fe.push(_n(xe[Wt]));for(var Wt=0,kn=ct.length;Wt<kn;Wt++){var ui=Ae(ct[Wt]);ui!==null&&fe.push(ui.clone())}for(var Wt=0,kn=St.length;Wt<kn;Wt++)for(var Ln=St[Wt],di=Be(Ln.id),Kn=er(di.id),vi=qn(Kn,Ln.materials),Ri=Ln.skeletons,ji=di.skin.joints,Di=Rt(Ri,ji),Er=0,$i=vi.length;Er<$i;Er++){var Ui=vi[Er];Ui.isSkinnedMesh&&(Ui.bind(Di,di.skin.bindMatrix),Ui.normalizeSkinWeights()),fe.push(Ui)}for(var Wt=0,kn=zt.length;Wt<kn;Wt++){var es=re(zt[Wt]);es!==null&&fe.push(es.clone())}for(var Wt=0,kn=en.length;Wt<kn;Wt++)for(var Ln=en[Wt],Kn=er(Ln.id),vi=qn(Kn,Ln.materials),Er=0,$i=vi.length;Er<$i;Er++)fe.push(vi[Er]);for(var Wt=0,kn=An.length;Wt<kn;Wt++)fe.push(_n(An[Wt]).clone());var Ui;if(xe.length===0&&fe.length===1)Ui=fe[0];else{Ui=Ee==="JOINT"?new THREE.Bone:new THREE.Group;for(var Wt=0;Wt<fe.length;Wt++)Ui.add(fe[Wt])}return Ui.name===""&&(Ui.name=Ee==="JOINT"?de.sid:de.name),Ui.matrix.copy(pe),Ui.matrix.decompose(Ui.position,Ui.quaternion,Ui.scale),Ui}var yn=new THREE.MeshBasicMaterial({color:16711935});function Vt(de,fe){for(var pe=[],xe=0,Ee=de.length;xe<Ee;xe++){var ct=fe[de[xe]];ct===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",de[xe]),pe.push(yn)):pe.push(_e(ct))}return pe}function qn(de,fe){var pe=[];for(var xe in de){var Ee=de[xe],ct=Vt(Ee.materialKeys,fe);ct.length===0&&(xe==="lines"||xe==="linestrips"?ct.push(new THREE.LineBasicMaterial):ct.push(new THREE.MeshPhongMaterial));var St=Ee.data.attributes.skinIndex!==void 0;if(St)for(var zt=0,en=ct.length;zt<en;zt++)ct[zt].skinning=!0;var An=ct.length===1?ct[0]:ct,Wt;switch(xe){case"lines":Wt=new THREE.LineSegments(Ee.data,An);break;case"linestrips":Wt=new THREE.Line(Ee.data,An);break;case"triangles":case"polylist":St?Wt=new THREE.SkinnedMesh(Ee.data,An):Wt=new THREE.Mesh(Ee.data,An);break}pe.push(Wt)}return pe}function Un(de){return et.nodes[de]!==void 0}function _n(de){return _(et.nodes[de],wn)}function Rr(de){var fe={name:de.getAttribute("name"),children:[]};Re(de);for(var pe=i(de,"node"),xe=0;xe<pe.length;xe++)fe.children.push(gt(pe[xe]));et.visualScenes[de.getAttribute("id")]=fe}function hi(de){var fe=new THREE.Group;fe.name=de.name;for(var pe=de.children,xe=0;xe<pe.length;xe++){var Ee=pe[xe];fe.add(_n(Ee.id))}return fe}function Ci(de){return et.visualScenes[de]!==void 0}function qi(de){return _(et.visualScenes[de],hi)}function Cr(de){var fe=i(de,"instance_visual_scene")[0];return qi(c(fe.getAttribute("url")))}function Jr(){var de=et.clips;if(u(de)===!0){if(u(et.animations)===!1){var fe=[];for(var pe in et.animations)for(var xe=C(pe),Ee=0,ct=xe.length;Ee<ct;Ee++)fe.push(xe[Ee]);ye.push(new THREE.AnimationClip("default",-1,fe))}}else for(var pe in de)ye.push(V(pe))}if(n.length===0)return{scene:new THREE.Scene};var bn=new DOMParser().parseFromString(n,"application/xml"),ei=i(bn,"COLLADA")[0],Wr=ei.getAttribute("version");console.log("THREE.ColladaLoader: File version",Wr);var Mi=f(i(ei,"asset")[0]),ie=new THREE.TextureLoader(this.manager);ie.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);var ce;THREE.TGALoader&&(ce=new THREE.TGALoader(this.manager),ce.setPath(this.resourcePath||e));var ye=[],Ie={},Ke=0,et={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};y(ei,"library_animations","animation",x),y(ei,"library_animation_clips","animation_clip",U),y(ei,"library_controllers","controller",K),y(ei,"library_images","image",Se),y(ei,"library_effects","effect",st),y(ei,"library_materials","material",Je),y(ei,"library_cameras","camera",Pe),y(ei,"library_lights","light",Xe),y(ei,"library_geometries","geometry",ke),y(ei,"library_nodes","node",gt),y(ei,"library_visual_scenes","visual_scene",Rr),y(ei,"library_kinematics_models","kinematics_model",Pi),y(ei,"library_physics_models","physics_model",bi),y(ei,"scene","instance_kinematics_scene",ar),v(et.animations,S),v(et.clips,G),v(et.controllers,he),v(et.images,rt),v(et.effects,Ai),v(et.materials,ge),v(et.cameras,Ue),v(et.lights,q),v(et.geometries,Jt),v(et.visualScenes,hi),Jr(),Et();var vt=Cr(i(ei,"scene")[0]);return Mi.upAxis==="Z_UP"&&vt.quaternion.setFromEuler(new THREE.Euler(-Math.PI/2,0,0)),vt.scale.multiplyScalar(Mi.unit),{animations:ye,kinematics:Ie,library:et,scene:vt}}};THREE.ColladaLoader=f7;AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var n=this,e=this.el,i=this.data,s=this.el.sceneEl.systems.renderer;i&&(this.remove(),this.loader.load(i,function(o){n.model=o.scene,n.model.traverse(function(l){if(l.isMesh){var c=l.material;c.color&&s.applyColorCorrection(c.color),c.map&&s.applyColorCorrection(c.map),c.emissive&&s.applyColorCorrection(c.emissive),c.emissiveMap&&s.applyColorCorrection(c.emissiveMap)}}),e.setObject3D("mesh",n.model),e.emit("model-loaded",{format:"collada",model:n.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}});var p7=THREE.FBXLoader=function(){var n,e,i;function s(O){this.manager=O!==void 0?O:THREE.DefaultLoadingManager}s.prototype={constructor:s,crossOrigin:"anonymous",load:function(O,F,U,G){var V=this,K=THREE.LoaderUtils.extractUrlBase(O),W=new THREE.FileLoader(this.manager);W.setResponseType("arraybuffer"),W.load(O,function(J){try{var ee=V.parse(J,K);F(ee)}catch(he){setTimeout(function(){G&&G(he),V.manager.itemError(O)},0)}},U,G)},setCrossOrigin:function(O){return this.crossOrigin=O,this},parse:function(O,F){if(g(O))n=new u().parse(O);else{var U=D(O);if(!y(U))throw new Error("THREE.FBXLoader: Unknown format.");if(v(U)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+v(U));n=new d().parse(U)}var G=new THREE.TextureLoader(this.manager).setPath(F).setCrossOrigin(this.crossOrigin);return new o(G).parse(n)}};function o(O){this.textureLoader=O}o.prototype={constructor:o,parse:function(){e=this.parseConnections();var O=this.parseImages(),F=this.parseTextures(O),U=this.parseMaterials(F),G=this.parseDeformers(),V=new l().parse(G);return this.parseScene(G,V,U),i},parseConnections:function(){var O=new Map;if("Connections"in n){var F=n.Connections.connections;F.forEach(function(U){var G=U[0],V=U[1],K=U[2];O.has(G)||O.set(G,{parents:[],children:[]});var W={ID:V,relationship:K};O.get(G).parents.push(W),O.has(V)||O.set(V,{parents:[],children:[]});var J={ID:G,relationship:K};O.get(V).children.push(J)})}return O},parseImages:function(){var O={},F={};if("Video"in n.Objects){var U=n.Objects.Video;for(var G in U){var V=U[G],K=parseInt(G);if(O[K]=V.RelativeFilename||V.Filename,"Content"in V){var W=V.Content instanceof ArrayBuffer&&V.Content.byteLength>0,J=typeof V.Content=="string"&&V.Content!=="";if(W||J){var ee=this.parseImage(U[G]);F[V.RelativeFilename||V.Filename]=ee}}}}for(var K in O){var he=O[K];F[he]!==void 0?O[K]=F[he]:O[K]=O[K].split("\\").pop()}return O},parseImage:function(O){var F=O.Content,U=O.RelativeFilename||O.Filename,G=U.slice(U.lastIndexOf(".")+1).toLowerCase(),V;switch(G){case"bmp":V="image/bmp";break;case"jpg":case"jpeg":V="image/jpeg";break;case"png":V="image/png";break;case"tif":V="image/tiff";break;case"tga":if(typeof THREE.TGALoader!="function"){console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");return}else{THREE.Loader.Handlers.get(".tga")===null&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),V="image/tga";break}default:console.warn('FBXLoader: Image type "'+G+'" is not supported.');return}if(typeof F=="string")return"data:"+V+";base64,"+F;var K=new Uint8Array(F);return window.URL.createObjectURL(new Blob([K],{type:V}))},parseTextures:function(O){var F=new Map;if("Texture"in n.Objects){var U=n.Objects.Texture;for(var G in U){var V=this.parseTexture(U[G],O);F.set(parseInt(G),V)}}return F},parseTexture:function(O,F){var U=this.loadTexture(O,F);U.ID=O.id,U.name=O.attrName;var G=O.WrapModeU,V=O.WrapModeV,K=G!==void 0?G.value:0,W=V!==void 0?V.value:0;if(U.wrapS=K===0?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,U.wrapT=W===0?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in O){var J=O.Scaling.value;U.repeat.x=J[0],U.repeat.y=J[1]}return U},loadTexture:function(O,F){var U,G=this.textureLoader.path,V=e.get(O.id).children;V!==void 0&&V.length>0&&F[V[0].ID]!==void 0&&(U=F[V[0].ID],(U.indexOf("blob:")===0||U.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var K,W=O.FileName.slice(-3).toLowerCase();if(W==="tga"){var J=THREE.Loader.Handlers.get(".tga");J===null?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",U),K=new THREE.Texture):K=J.load(U)}else W==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",U),K=new THREE.Texture):K=this.textureLoader.load(U);return this.textureLoader.setPath(G),K},parseMaterials:function(O){var F=new Map;if("Material"in n.Objects){var U=n.Objects.Material;for(var G in U){var V=this.parseMaterial(U[G],O);V!==null&&F.set(parseInt(G),V)}}return F},parseMaterial:function(O,F){var U=O.id,G=O.attrName,V=O.ShadingModel;if(typeof V=="object"&&(V=V.value),!e.has(U))return null;var K=this.parseParameters(O,F,U),W;switch(V.toLowerCase()){case"phong":W=new THREE.MeshPhongMaterial;break;case"lambert":W=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',V),W=new THREE.MeshPhongMaterial({color:3342591});break}return W.setValues(K),W.name=G,W},parseParameters:function(O,F,U){var G={};O.BumpFactor&&(G.bumpScale=O.BumpFactor.value),O.Diffuse?G.color=new THREE.Color().fromArray(O.Diffuse.value):O.DiffuseColor&&O.DiffuseColor.type==="Color"&&(G.color=new THREE.Color().fromArray(O.DiffuseColor.value)),O.DisplacementFactor&&(G.displacementScale=O.DisplacementFactor.value),O.Emissive?G.emissive=new THREE.Color().fromArray(O.Emissive.value):O.EmissiveColor&&O.EmissiveColor.type==="Color"&&(G.emissive=new THREE.Color().fromArray(O.EmissiveColor.value)),O.EmissiveFactor&&(G.emissiveIntensity=parseFloat(O.EmissiveFactor.value)),O.Opacity&&(G.opacity=parseFloat(O.Opacity.value)),G.opacity<1&&(G.transparent=!0),O.ReflectionFactor&&(G.reflectivity=O.ReflectionFactor.value),O.Shininess&&(G.shininess=O.Shininess.value),O.Specular?G.specular=new THREE.Color().fromArray(O.Specular.value):O.SpecularColor&&O.SpecularColor.type==="Color"&&(G.specular=new THREE.Color().fromArray(O.SpecularColor.value));var V=this;return e.get(U).children.forEach(function(K){var W=K.relationship;switch(W){case"Bump":G.bumpMap=V.getTexture(F,K.ID);break;case"DiffuseColor":G.map=V.getTexture(F,K.ID);break;case"DisplacementColor":G.displacementMap=V.getTexture(F,K.ID);break;case"EmissiveColor":G.emissiveMap=V.getTexture(F,K.ID);break;case"NormalMap":G.normalMap=V.getTexture(F,K.ID);break;case"ReflectionColor":G.envMap=V.getTexture(F,K.ID),G.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":G.specularMap=V.getTexture(F,K.ID);break;case"TransparentColor":G.alphaMap=V.getTexture(F,K.ID),G.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",W);break}}),G},getTexture:function(O,F){return"LayeredTexture"in n.Objects&&F in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),F=e.get(F).children[0].ID),O.get(F)},parseDeformers:function(){var O={},F={};if("Deformer"in n.Objects){var U=n.Objects.Deformer;for(var G in U){var V=U[G],K=e.get(parseInt(G));if(V.attrType==="Skin"){var W=this.parseSkeleton(K,U);W.ID=G,K.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),W.geometryID=K.parents[0].ID,O[G]=W}else if(V.attrType==="BlendShape"){var J={id:G};J.rawTargets=this.parseMorphTargets(K,U),J.id=G,K.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),F[G]=J}}}return{skeletons:O,morphTargets:F}},parseSkeleton:function(O,F){var U=[];return O.children.forEach(function(G){var V=F[G.ID];if(V.attrType==="Cluster"){var K={ID:G.ID,indices:[],weights:[],transform:new THREE.Matrix4().fromArray(V.Transform.a),transformLink:new THREE.Matrix4().fromArray(V.TransformLink.a),linkMode:V.Mode};"Indexes"in V&&(K.indices=V.Indexes.a,K.weights=V.Weights.a),U.push(K)}}),{rawBones:U,bones:[]}},parseMorphTargets:function(O,F){for(var U=[],G=0;G<O.children.length;G++){if(G===8){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var V=O.children[G],K=F[V.ID],W={name:K.attrName,initialWeight:K.DeformPercent,id:K.id,fullWeights:K.FullWeights.a};if(K.attrType!=="BlendShapeChannel")return;var J=e.get(parseInt(V.ID));J.children.forEach(function(ee){ee.relationship===void 0&&(W.geoID=ee.ID)}),U.push(W)}return U},parseScene:function(O,F,U){i=new THREE.Group;var G=this.parseModels(O.skeletons,F,U),V=n.Objects.Model,K=this;G.forEach(function(J){var ee=V[J.ID];K.setLookAtProperties(J,ee);var he=e.get(J.ID).parents;he.forEach(function(me){var Be=G.get(me.ID);Be!==void 0&&Be.add(J)}),J.parent===null&&i.add(J)}),this.bindSkeleton(O.skeletons,F,G),this.createAmbientLight(),this.setupMorphMaterials();var W=new c().parse();i.children.length===1&&i.children[0].isGroup&&(i.children[0].animations=W,i=i.children[0]),i.animations=W},parseModels:function(O,F,U){var G=new Map,V=n.Objects.Model;for(var K in V){var W=parseInt(K),J=V[K],ee=e.get(W),he=this.buildSkeleton(ee,O,W,J.attrName);if(!he){switch(J.attrType){case"Camera":he=this.createCamera(ee);break;case"Light":he=this.createLight(ee);break;case"Mesh":he=this.createMesh(ee,F,U);break;case"NurbsCurve":he=this.createCurve(ee,F);break;case"LimbNode":case"Null":default:he=new THREE.Group;break}he.name=THREE.PropertyBinding.sanitizeNodeName(J.attrName),he.ID=W}this.setModelTransforms(he,J),G.set(W,he)}return G},buildSkeleton:function(O,F,U,G){var V=null;return O.parents.forEach(function(K){for(var W in F){var J=F[W];J.rawBones.forEach(function(ee,he){if(ee.ID===K.ID){var me=V;V=new THREE.Bone,V.matrixWorld.copy(ee.transformLink),V.name=THREE.PropertyBinding.sanitizeNodeName(G),V.ID=U,J.bones[he]=V,me!==null&&V.add(me)}})}}),V},createCamera:function(O){var F,U;if(O.children.forEach(function(Be){var Se=n.Objects.NodeAttribute[Be.ID];Se!==void 0&&(U=Se)}),U===void 0)F=new THREE.Object3D;else{var G=0;U.CameraProjectionType!==void 0&&U.CameraProjectionType.value===1&&(G=1);var V=1;U.NearPlane!==void 0&&(V=U.NearPlane.value/1e3);var K=1e3;U.FarPlane!==void 0&&(K=U.FarPlane.value/1e3);var W=window.innerWidth,J=window.innerHeight;U.AspectWidth!==void 0&&U.AspectHeight!==void 0&&(W=U.AspectWidth.value,J=U.AspectHeight.value);var ee=W/J,he=45;U.FieldOfView!==void 0&&(he=U.FieldOfView.value);var me=U.FocalLength?U.FocalLength.value:null;switch(G){case 0:F=new THREE.PerspectiveCamera(he,ee,V,K),me!==null&&F.setFocalLength(me);break;case 1:F=new THREE.OrthographicCamera(-W/2,W/2,J/2,-J/2,V,K);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+G+"."),F=new THREE.Object3D;break}}return F},createLight:function(O){var F,U;if(O.children.forEach(function(me){var Be=n.Objects.NodeAttribute[me.ID];Be!==void 0&&(U=Be)}),U===void 0)F=new THREE.Object3D;else{var G;U.LightType===void 0?G=0:G=U.LightType.value;var V=16777215;U.Color!==void 0&&(V=new THREE.Color().fromArray(U.Color.value));var K=U.Intensity===void 0?1:U.Intensity.value/100;U.CastLightOnObject!==void 0&&U.CastLightOnObject.value===0&&(K=0);var W=0;U.FarAttenuationEnd!==void 0&&(U.EnableFarAttenuation!==void 0&&U.EnableFarAttenuation.value===0?W=0:W=U.FarAttenuationEnd.value);var J=1;switch(G){case 0:F=new THREE.PointLight(V,K,W,J);break;case 1:F=new THREE.DirectionalLight(V,K);break;case 2:var ee=Math.PI/3;U.InnerAngle!==void 0&&(ee=THREE.Math.degToRad(U.InnerAngle.value));var he=0;U.OuterAngle!==void 0&&(he=THREE.Math.degToRad(U.OuterAngle.value),he=Math.max(he,1)),F=new THREE.SpotLight(V,K,W,ee,he,J);break;default:console.warn("THREE.FBXLoader: Unknown light type "+U.LightType.value+", defaulting to a THREE.PointLight."),F=new THREE.PointLight(V,K);break}U.CastShadows!==void 0&&U.CastShadows.value===1&&(F.castShadow=!0)}return F},createMesh:function(O,F,U){var G,V=null,K=null,W=[];return O.children.forEach(function(J){F.has(J.ID)&&(V=F.get(J.ID)),U.has(J.ID)&&W.push(U.get(J.ID))}),W.length>1?K=W:W.length>0?K=W[0]:(K=new THREE.MeshPhongMaterial({color:13421772}),W.push(K)),"color"in V.attributes&&W.forEach(function(J){J.vertexColors=THREE.VertexColors}),V.FBX_Deformer?(W.forEach(function(J){J.skinning=!0}),G=new THREE.SkinnedMesh(V,K)):G=new THREE.Mesh(V,K),G},createCurve:function(O,F){var U=O.children.reduce(function(V,K){return F.has(K.ID)&&(V=F.get(K.ID)),V},null),G=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(U,G)},setModelTransforms:function(O,F){var U={};"RotationOrder"in F&&(U.eulerOrder=parseInt(F.RotationOrder.value)),"Lcl_Translation"in F&&(U.translation=F.Lcl_Translation.value),"RotationOffset"in F&&(U.rotationOffset=F.RotationOffset.value),"Lcl_Rotation"in F&&(U.rotation=F.Lcl_Rotation.value),"PreRotation"in F&&(U.preRotation=F.PreRotation.value),"PostRotation"in F&&(U.postRotation=F.PostRotation.value),"Lcl_Scaling"in F&&(U.scale=F.Lcl_Scaling.value);var G=N(U);O.applyMatrix(G)},setLookAtProperties:function(O,F){if("LookAtProperty"in F){var U=e.get(O.ID).children;U.forEach(function(G){if(G.relationship==="LookAtProperty"){var V=n.Objects.Model[G.ID];if("Lcl_Translation"in V){var K=V.Lcl_Translation.value;O.target!==void 0?(O.target.position.fromArray(K),i.add(O.target)):O.lookAt(new THREE.Vector3().fromArray(K))}}})}},bindSkeleton:function(O,F,U){var G=this.parsePoseNodes();for(var V in O){var K=O[V],W=e.get(parseInt(K.ID)).parents;W.forEach(function(J){if(F.has(J.ID)){var ee=J.ID,he=e.get(ee);he.parents.forEach(function(me){if(U.has(me.ID)){var Be=U.get(me.ID);Be.bind(new THREE.Skeleton(K.bones),G[me.ID])}})}})}},parsePoseNodes:function(){var O={};if("Pose"in n.Objects){var F=n.Objects.Pose;for(var U in F)if(F[U].attrType==="BindPose"){var G=F[U].PoseNode;Array.isArray(G)?G.forEach(function(V){O[V.Node]=new THREE.Matrix4().fromArray(V.Matrix.a)}):O[G.Node]=new THREE.Matrix4().fromArray(G.Matrix.a)}}return O},createAmbientLight:function(){if("GlobalSettings"in n&&"AmbientColor"in n.GlobalSettings){var O=n.GlobalSettings.AmbientColor.value,F=O[0],U=O[1],G=O[2];if(F!==0||U!==0||G!==0){var V=new THREE.Color(F,U,G);i.add(new THREE.AmbientLight(V,1))}}},setupMorphMaterials:function(){i.traverse(function(O){if(O.isMesh&&(O.geometry.morphAttributes.position||O.geometry.morphAttributes.normal)){var F=O.uuid,U=O.material.uuid,G=!1;i.traverse(function(V){V.isMesh&&V.material.uuid===U&&V.uuid!==F&&(G=!0)}),G===!0&&(O.material=O.material.clone()),O.material.morphTargets=!0}})}};function l(){}l.prototype={constructor:l,parse:function(O){var F=new Map;if("Geometry"in n.Objects){var U=n.Objects.Geometry;for(var G in U){var V=e.get(parseInt(G)),K=this.parseGeometry(V,U[G],O);F.set(parseInt(G),K)}}return F},parseGeometry:function(O,F,U){switch(F.attrType){case"Mesh":return this.parseMeshGeometry(O,F,U);case"NurbsCurve":return this.parseNurbsGeometry(F)}},parseMeshGeometry:function(O,F,U){var G=U.skeletons,V=U.morphTargets,K=O.parents.map(function(Be){return n.Objects.Model[Be.ID]});if(K.length!==0){var W=O.children.reduce(function(Be,Se){return G[Se.ID]!==void 0&&(Be=G[Se.ID]),Be},null),J=O.children.reduce(function(Be,Se){return V[Se.ID]!==void 0&&(Be=V[Se.ID]),Be},null),ee=K[0],he={};"RotationOrder"in ee&&(he.eulerOrder=ee.RotationOrder.value),"GeometricTranslation"in ee&&(he.translation=ee.GeometricTranslation.value),"GeometricRotation"in ee&&(he.rotation=ee.GeometricRotation.value),"GeometricScaling"in ee&&(he.scale=ee.GeometricScaling.value);var me=N(he);return this.genGeometry(F,W,J,me)}},genGeometry:function(O,F,U,G){var V=new THREE.BufferGeometry;O.attrName&&(V.name=O.attrName);var K=this.parseGeoNode(O,F),W=this.genBuffers(K),J=new THREE.Float32BufferAttribute(W.vertex,3);if(G.applyToBufferAttribute(J),V.addAttribute("position",J),W.colors.length>0&&V.addAttribute("color",new THREE.Float32BufferAttribute(W.colors,3)),F&&(V.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(W.weightsIndices,4)),V.addAttribute("skinWeight",new THREE.Float32BufferAttribute(W.vertexWeights,4)),V.FBX_Deformer=F),W.normal.length>0){var ee=new THREE.Float32BufferAttribute(W.normal,3),he=new THREE.Matrix3().getNormalMatrix(G);he.applyToBufferAttribute(ee),V.addAttribute("normal",ee)}if(W.uvs.forEach(function(Ge,st){var mt="uv"+(st+1).toString();st===0&&(mt="uv"),V.addAttribute(mt,new THREE.Float32BufferAttribute(W.uvs[st],2))}),K.material&&K.material.mappingType!=="AllSame"){var me=W.materialIndex[0],Be=0;if(W.materialIndex.forEach(function(Ge,st){Ge!==me&&(V.addGroup(Be,st-Be,me),me=Ge,Be=st)}),V.groups.length>0){var Se=V.groups[V.groups.length-1],rt=Se.start+Se.count;rt!==W.materialIndex.length&&V.addGroup(rt,W.materialIndex.length-rt,me)}V.groups.length===0&&V.addGroup(0,W.materialIndex.length,W.materialIndex[0])}return this.addMorphTargets(V,O,U,G),V},parseGeoNode:function(O,F){var U={};if(U.vertexPositions=O.Vertices!==void 0?O.Vertices.a:[],U.vertexIndices=O.PolygonVertexIndex!==void 0?O.PolygonVertexIndex.a:[],O.LayerElementColor&&(U.color=this.parseVertexColors(O.LayerElementColor[0])),O.LayerElementMaterial&&(U.material=this.parseMaterialIndices(O.LayerElementMaterial[0])),O.LayerElementNormal&&(U.normal=this.parseNormals(O.LayerElementNormal[0])),O.LayerElementUV){U.uv=[];for(var G=0;O.LayerElementUV[G];)U.uv.push(this.parseUVs(O.LayerElementUV[G])),G++}return U.weightTable={},F!==null&&(U.skeleton=F,F.rawBones.forEach(function(V,K){V.indices.forEach(function(W,J){U.weightTable[W]===void 0&&(U.weightTable[W]=[]),U.weightTable[W].push({id:K,weight:V.weights[J]})})})),U},genBuffers:function(O){var F={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},U=0,G=0,V=!1,K=[],W=[],J=[],ee=[],he=[],me=[],Be=this;return O.vertexIndices.forEach(function(Se,rt){var Ge=!1;Se<0&&(Se=Se^-1,Ge=!0);var st=[],mt=[];if(K.push(Se*3,Se*3+1,Se*3+2),O.color){var Ft=b(rt,U,Se,O.color);J.push(Ft[0],Ft[1],Ft[2])}if(O.skeleton){if(O.weightTable[Se]!==void 0&&O.weightTable[Se].forEach(function(on){mt.push(on.weight),st.push(on.id)}),mt.length>4){V||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),V=!0);var Pt=[0,0,0,0],nt=[0,0,0,0];mt.forEach(function(on,nn){var vn=on,Rn=st[nn];nt.forEach(function(zn,Wn,Ai){if(vn>zn){Ai[Wn]=vn,vn=zn;var Ti=Pt[Wn];Pt[Wn]=Rn,Rn=Ti}})}),st=Pt,mt=nt}for(;mt.length<4;)mt.push(0),st.push(0);for(var Fn=0;Fn<4;++Fn)he.push(mt[Fn]),me.push(st[Fn])}if(O.normal){var Ft=b(rt,U,Se,O.normal);W.push(Ft[0],Ft[1],Ft[2])}if(O.material&&O.material.mappingType!=="AllSame")var Xt=b(rt,U,Se,O.material)[0];O.uv&&O.uv.forEach(function(on,nn){var vn=b(rt,U,Se,on);ee[nn]===void 0&&(ee[nn]=[]),ee[nn].push(vn[0]),ee[nn].push(vn[1])}),G++,Ge&&(Be.genFace(F,O,K,Xt,W,J,ee,he,me,G),U++,G=0,K=[],W=[],J=[],ee=[],he=[],me=[])}),F},genFace:function(O,F,U,G,V,K,W,J,ee,he){for(var me=2;me<he;me++)O.vertex.push(F.vertexPositions[U[0]]),O.vertex.push(F.vertexPositions[U[1]]),O.vertex.push(F.vertexPositions[U[2]]),O.vertex.push(F.vertexPositions[U[(me-1)*3]]),O.vertex.push(F.vertexPositions[U[(me-1)*3+1]]),O.vertex.push(F.vertexPositions[U[(me-1)*3+2]]),O.vertex.push(F.vertexPositions[U[me*3]]),O.vertex.push(F.vertexPositions[U[me*3+1]]),O.vertex.push(F.vertexPositions[U[me*3+2]]),F.skeleton&&(O.vertexWeights.push(J[0]),O.vertexWeights.push(J[1]),O.vertexWeights.push(J[2]),O.vertexWeights.push(J[3]),O.vertexWeights.push(J[(me-1)*4]),O.vertexWeights.push(J[(me-1)*4+1]),O.vertexWeights.push(J[(me-1)*4+2]),O.vertexWeights.push(J[(me-1)*4+3]),O.vertexWeights.push(J[me*4]),O.vertexWeights.push(J[me*4+1]),O.vertexWeights.push(J[me*4+2]),O.vertexWeights.push(J[me*4+3]),O.weightsIndices.push(ee[0]),O.weightsIndices.push(ee[1]),O.weightsIndices.push(ee[2]),O.weightsIndices.push(ee[3]),O.weightsIndices.push(ee[(me-1)*4]),O.weightsIndices.push(ee[(me-1)*4+1]),O.weightsIndices.push(ee[(me-1)*4+2]),O.weightsIndices.push(ee[(me-1)*4+3]),O.weightsIndices.push(ee[me*4]),O.weightsIndices.push(ee[me*4+1]),O.weightsIndices.push(ee[me*4+2]),O.weightsIndices.push(ee[me*4+3])),F.color&&(O.colors.push(K[0]),O.colors.push(K[1]),O.colors.push(K[2]),O.colors.push(K[(me-1)*3]),O.colors.push(K[(me-1)*3+1]),O.colors.push(K[(me-1)*3+2]),O.colors.push(K[me*3]),O.colors.push(K[me*3+1]),O.colors.push(K[me*3+2])),F.material&&F.material.mappingType!=="AllSame"&&(O.materialIndex.push(G),O.materialIndex.push(G),O.materialIndex.push(G)),F.normal&&(O.normal.push(V[0]),O.normal.push(V[1]),O.normal.push(V[2]),O.normal.push(V[(me-1)*3]),O.normal.push(V[(me-1)*3+1]),O.normal.push(V[(me-1)*3+2]),O.normal.push(V[me*3]),O.normal.push(V[me*3+1]),O.normal.push(V[me*3+2])),F.uv&&F.uv.forEach(function(Be,Se){O.uvs[Se]===void 0&&(O.uvs[Se]=[]),O.uvs[Se].push(W[Se][0]),O.uvs[Se].push(W[Se][1]),O.uvs[Se].push(W[Se][(me-1)*2]),O.uvs[Se].push(W[Se][(me-1)*2+1]),O.uvs[Se].push(W[Se][me*2]),O.uvs[Se].push(W[Se][me*2+1])})},addMorphTargets:function(O,F,U,G){if(U!==null){O.morphAttributes.position=[],O.morphAttributes.normal=[];var V=this;U.rawTargets.forEach(function(K){var W=n.Objects.Geometry[K.geoID];W!==void 0&&V.genMorphGeometry(O,F,W,G)})}},genMorphGeometry:function(O,F,U,G){var V=new THREE.BufferGeometry;U.attrName&&(V.name=U.attrName);for(var K=F.PolygonVertexIndex!==void 0?F.PolygonVertexIndex.a:[],W=F.Vertices!==void 0?F.Vertices.a.slice():[],J=U.Vertices!==void 0?U.Vertices.a:[],ee=U.Indexes!==void 0?U.Indexes.a:[],he=0;he<ee.length;he++){var me=ee[he]*3;W[me]+=J[he*3],W[me+1]+=J[he*3+1],W[me+2]+=J[he*3+2]}var Be={vertexIndices:K,vertexPositions:W},Se=this.genBuffers(Be),rt=new THREE.Float32BufferAttribute(Se.vertex,3);rt.name=U.attrName,G.applyToBufferAttribute(rt),O.morphAttributes.position.push(rt)},parseNormals:function(O){var F=O.MappingInformationType,U=O.ReferenceInformationType,G=O.Normals.a,V=[];return U==="IndexToDirect"&&("NormalIndex"in O?V=O.NormalIndex.a:"NormalsIndex"in O&&(V=O.NormalsIndex.a)),{dataSize:3,buffer:G,indices:V,mappingType:F,referenceType:U}},parseUVs:function(O){var F=O.MappingInformationType,U=O.ReferenceInformationType,G=O.UV.a,V=[];return U==="IndexToDirect"&&(V=O.UVIndex.a),{dataSize:2,buffer:G,indices:V,mappingType:F,referenceType:U}},parseVertexColors:function(O){var F=O.MappingInformationType,U=O.ReferenceInformationType,G=O.Colors.a,V=[];return U==="IndexToDirect"&&(V=O.ColorIndex.a),{dataSize:4,buffer:G,indices:V,mappingType:F,referenceType:U}},parseMaterialIndices:function(O){var F=O.MappingInformationType,U=O.ReferenceInformationType;if(F==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:U};for(var G=O.Materials.a,V=[],K=0;K<G.length;++K)V.push(K);return{dataSize:1,buffer:G,indices:V,mappingType:F,referenceType:U}},parseNurbsGeometry:function(O){if(THREE.NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var F=parseInt(O.Order);if(isNaN(F))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",O.Order,O.id),new THREE.BufferGeometry;for(var U=F-1,G=O.KnotVector.a,V=[],K=O.Points.a,W=0,J=K.length;W<J;W+=4)V.push(new THREE.Vector4().fromArray(K,W));var ee,he;if(O.Form==="Closed")V.push(V[0]);else if(O.Form==="Periodic"){ee=U,he=G.length-1-ee;for(var W=0;W<U;++W)V.push(V[W])}var me=new THREE.NURBSCurve(U,G,V,ee,he),Be=me.getPoints(V.length*7),Se=new Float32Array(Be.length*3);Be.forEach(function(Ge,st){Ge.toArray(Se,st*3)});var rt=new THREE.BufferGeometry;return rt.addAttribute("position",new THREE.BufferAttribute(Se,3)),rt}};function c(){}c.prototype={constructor:c,parse:function(){var O=[],F=this.parseClips();if(F===void 0)return O;for(var U in F){var G=F[U],V=this.addClip(G);O.push(V)}return O},parseClips:function(){if(n.Objects.AnimationCurve!==void 0){var O=this.parseAnimationCurveNodes();this.parseAnimationCurves(O);var F=this.parseAnimationLayers(O),U=this.parseAnimStacks(F);return U}},parseAnimationCurveNodes:function(){var O=n.Objects.AnimationCurveNode,F=new Map;for(var U in O){var G=O[U];if(G.attrName.match(/S|R|T|DeformPercent/)!==null){var V={id:G.id,attr:G.attrName,curves:{}};F.set(V.id,V)}}return F},parseAnimationCurves:function(O){var F=n.Objects.AnimationCurve;for(var U in F){var G={id:F[U].id,times:F[U].KeyTime.a.map(_),values:F[U].KeyValueFloat.a},V=e.get(G.id);if(V!==void 0){var K=V.parents[0].ID,W=V.parents[0].relationship;W.match(/X/)?O.get(K).curves.x=G:W.match(/Y/)?O.get(K).curves.y=G:W.match(/Z/)?O.get(K).curves.z=G:W.match(/d|DeformPercent/)&&O.has(K)&&(O.get(K).curves.morph=G)}}},parseAnimationLayers:function(O){var F=n.Objects.AnimationLayer,U=new Map;for(var G in F){var V=[],K=e.get(parseInt(G));if(K!==void 0){var W=K.children,J=this;W.forEach(function(ee,he){if(O.has(ee.ID)){var me=O.get(ee.ID);if(me.curves.x!==void 0||me.curves.y!==void 0||me.curves.z!==void 0){if(V[he]===void 0){var Be;e.get(ee.ID).parents.forEach(function(Ft){Ft.relationship!==void 0&&(Be=Ft.ID)});var Se=n.Objects.Model[Be.toString()],rt={modelName:THREE.PropertyBinding.sanitizeNodeName(Se.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:J.getModelAnimTransform(Se)};"PreRotation"in Se&&(rt.preRotations=Se.PreRotation.value),"PostRotation"in Se&&(rt.postRotations=Se.PostRotation.value),V[he]=rt}V[he][me.attr]=me}else if(me.curves.morph!==void 0){if(V[he]===void 0){var Ge;e.get(ee.ID).parents.forEach(function(Fn){Fn.relationship!==void 0&&(Ge=Fn.ID)});var st=e.get(Ge).parents[0].ID,mt=e.get(st).parents[0].ID,Be=e.get(mt).parents[0].ID,Se=n.Objects.Model[Be],rt={modelName:THREE.PropertyBinding.sanitizeNodeName(Se.attrName),morphName:n.Objects.Deformer[Ge].attrName};V[he]=rt}V[he][me.attr]=me}}}),U.set(parseInt(G),V)}}return U},getModelAnimTransform:function(O){var F={};return"RotationOrder"in O&&(F.eulerOrder=parseInt(O.RotationOrder.value)),"Lcl_Translation"in O&&(F.translation=O.Lcl_Translation.value),"RotationOffset"in O&&(F.rotationOffset=O.RotationOffset.value),"Lcl_Rotation"in O&&(F.rotation=O.Lcl_Rotation.value),"PreRotation"in O&&(F.preRotation=O.PreRotation.value),"PostRotation"in O&&(F.postRotation=O.PostRotation.value),"Lcl_Scaling"in O&&(F.scale=O.Lcl_Scaling.value),N(F)},parseAnimStacks:function(O){var F=n.Objects.AnimationStack,U={};for(var G in F){var V=e.get(parseInt(G)).children;V.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var K=O.get(V[0].ID);U[G]={name:F[G].attrName,layer:K}}return U},addClip:function(O){var F=[],U=this;return O.layer.forEach(function(G){F=F.concat(U.generateTracks(G))}),new THREE.AnimationClip(O.name,-1,F)},generateTracks:function(O){var F=[],U=new THREE.Vector3,G=new THREE.Quaternion,V=new THREE.Vector3;if(O.transform&&O.transform.decompose(U,G,V),U=U.toArray(),G=new THREE.Euler().setFromQuaternion(G).toArray(),V=V.toArray(),O.T!==void 0&&Object.keys(O.T.curves).length>0){var K=this.generateVectorTrack(O.modelName,O.T.curves,U,"position");K!==void 0&&F.push(K)}if(O.R!==void 0&&Object.keys(O.R.curves).length>0){var W=this.generateRotationTrack(O.modelName,O.R.curves,G,O.preRotations,O.postRotations);W!==void 0&&F.push(W)}if(O.S!==void 0&&Object.keys(O.S.curves).length>0){var J=this.generateVectorTrack(O.modelName,O.S.curves,V,"scale");J!==void 0&&F.push(J)}if(O.DeformPercent!==void 0){var ee=this.generateMorphTrack(O);ee!==void 0&&F.push(ee)}return F},generateVectorTrack:function(O,F,U,G){var V=this.getTimesForAllAxes(F),K=this.getKeyframeTrackValues(V,F,U);return new THREE.VectorKeyframeTrack(O+"."+G,V,K)},generateRotationTrack:function(O,F,U,G,V){F.x!==void 0&&(this.interpolateRotations(F.x),F.x.values=F.x.values.map(THREE.Math.degToRad)),F.y!==void 0&&(this.interpolateRotations(F.y),F.y.values=F.y.values.map(THREE.Math.degToRad)),F.z!==void 0&&(this.interpolateRotations(F.z),F.z.values=F.z.values.map(THREE.Math.degToRad));var K=this.getTimesForAllAxes(F),W=this.getKeyframeTrackValues(K,F,U);G!==void 0&&(G=G.map(THREE.Math.degToRad),G.push("ZYX"),G=new THREE.Euler().fromArray(G),G=new THREE.Quaternion().setFromEuler(G)),V!==void 0&&(V=V.map(THREE.Math.degToRad),V.push("ZYX"),V=new THREE.Euler().fromArray(V),V=new THREE.Quaternion().setFromEuler(V).inverse());for(var J=new THREE.Quaternion,ee=new THREE.Euler,he=[],me=0;me<W.length;me+=3)ee.set(W[me],W[me+1],W[me+2],"ZYX"),J.setFromEuler(ee),G!==void 0&&J.premultiply(G),V!==void 0&&J.multiply(V),J.toArray(he,me/3*4);return new THREE.QuaternionKeyframeTrack(O+".quaternion",K,he)},generateMorphTrack:function(O){var F=O.DeformPercent.curves.morph,U=F.values.map(function(V){return V/100}),G=i.getObjectByName(O.modelName).morphTargetDictionary[O.morphName];return new THREE.NumberKeyframeTrack(O.modelName+".morphTargetInfluences["+G+"]",F.times,U)},getTimesForAllAxes:function(O){var F=[];return O.x!==void 0&&(F=F.concat(O.x.times)),O.y!==void 0&&(F=F.concat(O.y.times)),O.z!==void 0&&(F=F.concat(O.z.times)),F=F.sort(function(U,G){return U-G}).filter(function(U,G,V){return V.indexOf(U)==G}),F},getKeyframeTrackValues:function(O,F,U){var G=U,V=[],K=-1,W=-1,J=-1;return O.forEach(function(ee){if(F.x&&(K=F.x.times.indexOf(ee)),F.y&&(W=F.y.times.indexOf(ee)),F.z&&(J=F.z.times.indexOf(ee)),K!==-1){var he=F.x.values[K];V.push(he),G[0]=he}else V.push(G[0]);if(W!==-1){var me=F.y.values[W];V.push(me),G[1]=me}else V.push(G[1]);if(J!==-1){var Be=F.z.values[J];V.push(Be),G[2]=Be}else V.push(G[2])}),V},interpolateRotations:function(O){for(var F=1;F<O.values.length;F++){var U=O.values[F-1],G=O.values[F]-U,V=Math.abs(G);if(V>=180){for(var K=V/180,W=G/K,J=U+W,ee=O.times[F-1],he=O.times[F]-ee,me=he/K,Be=ee+me,Se=[],rt=[];Be<O.times[F];)Se.push(Be),Be+=me,rt.push(J),J+=W;O.times=ne(O.times,F,Se),O.values=ne(O.values,F,rt)}}}};function d(){}d.prototype={constructor:d,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(O){this.nodeStack.push(O),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(O,F){this.currentProp=O,this.currentPropName=F},parse:function(O){this.currentIndent=0,console.log("FBXTree: ",A),this.allNodes=new A,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var F=this,U=O.split(/[\r\n]+/);return U.forEach(function(G,V){var K=G.match(/^[\s\t]*;/),W=G.match(/^[\s\t]*$/);if(!(K||W)){var J=G.match("^\\t{"+F.currentIndent+"}(\\w+):(.*){",""),ee=G.match("^\\t{"+F.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),he=G.match("^\\t{"+(F.currentIndent-1)+"}}");J?F.parseNodeBegin(G,J):ee?F.parseNodeProperty(G,ee,U[++V]):he?F.popStack():G.match(/^[^\s\t}]/)&&F.parseNodePropertyContinued(G)}}),this.allNodes},parseNodeBegin:function(O,F){var U=F[1].trim().replace(/^"/,"").replace(/"$/,""),G=F[2].split(",").map(function(J){return J.trim().replace(/^"/,"").replace(/"$/,"")}),V={name:U},K=this.parseNodeAttr(G),W=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(U,V):U in W?(U==="PoseNode"?W.PoseNode.push(V):W[U].id!==void 0&&(W[U]={},W[U][W[U].id]=W[U]),K.id!==""&&(W[U][K.id]=V)):typeof K.id=="number"?(W[U]={},W[U][K.id]=V):U!=="Properties70"&&(U==="PoseNode"?W[U]=[V]:W[U]=V),typeof K.id=="number"&&(V.id=K.id),K.name!==""&&(V.attrName=K.name),K.type!==""&&(V.attrType=K.type),this.pushStack(V)},parseNodeAttr:function(O){var F=O[0];O[0]!==""&&(F=parseInt(O[0]),isNaN(F)&&(F=O[0]));var U="",G="";return O.length>1&&(U=O[1].replace(/^(\w+)::/,""),G=O[2]),{id:F,name:U,type:G}},parseNodeProperty:function(O,F,U){var G=F[1].replace(/^"/,"").replace(/"$/,"").trim(),V=F[2].replace(/^"/,"").replace(/"$/,"").trim();G==="Content"&&V===","&&(V=U.replace(/"/g,"").replace(/,$/,"").trim());var K=this.getCurrentNode(),W=K.name;if(W==="Properties70"){this.parseNodeSpecialProperty(O,G,V);return}if(G==="C"){var J=V.split(",").slice(1),ee=parseInt(J[0]),he=parseInt(J[1]),me=V.split(",").slice(3);me=me.map(function(Be){return Be.trim().replace(/^"/,"")}),G="connections",V=[ee,he],z(V,me),K[G]===void 0&&(K[G]=[])}G==="Node"&&(K.id=V),G in K&&Array.isArray(K[G])?K[G].push(V):G!=="a"?K[G]=V:K.a=V,this.setCurrentProp(K,G),G==="a"&&V.slice(-1)!==","&&(K.a=k(V))},parseNodePropertyContinued:function(O){var F=this.getCurrentNode();F.a+=O,O.slice(-1)!==","&&(F.a=k(F.a))},parseNodeSpecialProperty:function(O,F,U){var G=U.split('",').map(function(he){return he.trim().replace(/^\"/,"").replace(/\s/,"_")}),V=G[0],K=G[1],W=G[2],J=G[3],ee=G[4];switch(K){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":ee=parseFloat(ee);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":ee=k(ee);break}this.getPrevNode()[V]={type:K,type2:W,flag:J,value:ee},this.setCurrentProp(this.getPrevNode(),V)}};function u(){}u.prototype={constructor:u,parse:function(O){var F=new f(O);F.skip(23);var U=F.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+U);for(var G=new A;!this.endOfContent(F);){var V=this.parseNode(F,U);V!==null&&G.add(V.name,V)}return G},endOfContent:function(O){return O.size()%16===0?(O.getOffset()+160+16&-16)>=O.size():O.getOffset()+160+16>=O.size()},parseNode:function(O,F){var U={},G=F>=7500?O.getUint64():O.getUint32(),V=F>=7500?O.getUint64():O.getUint32();F>=7500?O.getUint64():O.getUint32();var K=O.getUint8(),W=O.getString(K);if(G===0)return null;for(var J=[],ee=0;ee<V;ee++)J.push(this.parseProperty(O));var he=J.length>0?J[0]:"",me=J.length>1?J[1]:"",Be=J.length>2?J[2]:"";for(U.singleProperty=V===1&&O.getOffset()===G;G>O.getOffset();){var Se=this.parseNode(O,F);Se!==null&&this.parseSubNode(W,U,Se)}return U.propertyList=J,typeof he=="number"&&(U.id=he),me!==""&&(U.attrName=me),Be!==""&&(U.attrType=Be),W!==""&&(U.name=W),U},parseSubNode:function(O,F,U){if(U.singleProperty===!0){var G=U.propertyList[0];Array.isArray(G)?(F[U.name]=U,U.a=G):F[U.name]=G}else if(O==="Connections"&&U.name==="C"){var V=[];U.propertyList.forEach(function(Be,Se){Se!==0&&V.push(Be)}),F.connections===void 0&&(F.connections=[]),F.connections.push(V)}else if(U.name==="Properties70"){var K=Object.keys(U);K.forEach(function(Be){F[Be]=U[Be]})}else if(O==="Properties70"&&U.name==="P"){var W=U.propertyList[0],J=U.propertyList[1],ee=U.propertyList[2],he=U.propertyList[3],me;W.indexOf("Lcl ")===0&&(W=W.replace("Lcl ","Lcl_")),J.indexOf("Lcl ")===0&&(J=J.replace("Lcl ","Lcl_")),J==="Color"||J==="ColorRGB"||J==="Vector"||J==="Vector3D"||J.indexOf("Lcl_")===0?me=[U.propertyList[4],U.propertyList[5],U.propertyList[6]]:me=U.propertyList[4],F[W]={type:J,type2:ee,flag:he,value:me}}else F[U.name]===void 0?typeof U.id=="number"?(F[U.name]={},F[U.name][U.id]=U):F[U.name]=U:U.name==="PoseNode"?(Array.isArray(F[U.name])||(F[U.name]=[F[U.name]]),F[U.name].push(U)):F[U.name][U.id]===void 0&&(F[U.name][U.id]=U)},parseProperty:function(O){var F=O.getString(1);switch(F){case"C":return O.getBoolean();case"D":return O.getFloat64();case"F":return O.getFloat32();case"I":return O.getInt32();case"L":return O.getInt64();case"R":var U=O.getUint32();return O.getArrayBuffer(U);case"S":var U=O.getUint32();return O.getString(U);case"Y":return O.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var G=O.getUint32(),V=O.getUint32(),K=O.getUint32();if(V===0)switch(F){case"b":case"c":return O.getBooleanArray(G);case"d":return O.getFloat64Array(G);case"f":return O.getFloat32Array(G);case"i":return O.getInt32Array(G);case"l":return O.getInt64Array(G)}typeof Zlib>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var W=new Zlib.Inflate(new Uint8Array(O.getArrayBuffer(K))),J=new f(W.decompress().buffer);switch(F){case"b":case"c":return J.getBooleanArray(G);case"d":return J.getFloat64Array(G);case"f":return J.getFloat32Array(G);case"i":return J.getInt32Array(G);case"l":return J.getInt64Array(G)}default:throw new Error("THREE.FBXLoader: Unknown property type "+F)}}};function f(O,F){this.dv=new DataView(O),this.offset=0,this.littleEndian=F!==void 0?F:!0}f.prototype={constructor:f,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(O){this.offset+=O},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(O){for(var F=[],U=0;U<O;U++)F.push(this.getBoolean());return F},getUint8:function(){var O=this.dv.getUint8(this.offset);return this.offset+=1,O},getInt16:function(){var O=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,O},getInt32:function(){var O=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,O},getInt32Array:function(O){for(var F=[],U=0;U<O;U++)F.push(this.getInt32());return F},getUint32:function(){var O=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,O},getInt64:function(){var O,F;return this.littleEndian?(O=this.getUint32(),F=this.getUint32()):(F=this.getUint32(),O=this.getUint32()),F&2147483648?(F=~F&4294967295,O=~O&4294967295,O===4294967295&&(F=F+1&4294967295),O=O+1&4294967295,-(F*4294967296+O)):F*4294967296+O},getInt64Array:function(O){for(var F=[],U=0;U<O;U++)F.push(this.getInt64());return F},getUint64:function(){var O,F;return this.littleEndian?(O=this.getUint32(),F=this.getUint32()):(F=this.getUint32(),O=this.getUint32()),F*4294967296+O},getFloat32:function(){var O=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,O},getFloat32Array:function(O){for(var F=[],U=0;U<O;U++)F.push(this.getFloat32());return F},getFloat64:function(){var O=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,O},getFloat64Array:function(O){for(var F=[],U=0;U<O;U++)F.push(this.getFloat64());return F},getArrayBuffer:function(O){var F=this.dv.buffer.slice(this.offset,this.offset+O);return this.offset+=O,F},getString:function(O){for(var F=[],U=0;U<O;U++)F[U]=this.getUint8();var G=F.indexOf(0);return G>=0&&(F=F.slice(0,G)),THREE.LoaderUtils.decodeText(new Uint8Array(F))}};function A(){}A.prototype={constructor:A,add:function(O,F){this[O]=F}};function g(O){var F="Kaydara FBX Binary  \0";return O.byteLength>=F.length&&F===D(O,0,F.length)}function y(O){var F=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],U=0;function G(W){var J=O[W-1];return O=O.slice(U+W),U++,J}for(var V=0;V<F.length;++V){var K=G(1);if(K===F[V])return!1}return!0}function v(O){var F=/FBXVersion: (\d+)/,U=O.match(F);if(U){var G=parseInt(U[1]);return G}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function _(O){return O/46186158e3}var x=[];function b(O,F,U,G){var V;switch(G.mappingType){case"ByPolygonVertex":V=O;break;case"ByPolygon":V=F;break;case"ByVertice":V=U;break;case"AllSame":V=G.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+G.mappingType)}G.referenceType==="IndexToDirect"&&(V=G.indices[V]);var K=V*G.dataSize,W=K+G.dataSize;return Y(x,G.buffer,K,W)}var m=new THREE.Matrix4,S=new THREE.Euler,C=new THREE.Vector3,M=new THREE.Vector3,T=new THREE.Matrix4;function N(O){var F=new THREE.Matrix4;M.set(0,0,0),T.identity();var U=O.eulerOrder?P(O.eulerOrder):P(0);if(O.translation&&M.fromArray(O.translation),O.rotationOffset&&M.add(C.fromArray(O.rotationOffset)),O.rotation){var G=O.rotation.map(THREE.Math.degToRad);G.push(U),T.makeRotationFromEuler(S.fromArray(G))}if(O.preRotation){var G=O.preRotation.map(THREE.Math.degToRad);G.push(U),m.makeRotationFromEuler(S.fromArray(G)),T.premultiply(m)}if(O.postRotation){var G=O.postRotation.map(THREE.Math.degToRad);G.push(U),m.makeRotationFromEuler(S.fromArray(G)),m.getInverse(m),T.multiply(m)}return O.scale&&F.scale(C.fromArray(O.scale)),F.setPosition(M),F.multiply(T),F}function P(O){var F=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return O===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),F[0]):F[O]}function k(O){var F=O.split(",").map(function(U){return parseFloat(U)});return F}function D(O,F,U){return F===void 0&&(F=0),U===void 0&&(U=O.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(O,F,U))}function z(O,F){for(var U=0,G=O.length,V=F.length;U<V;U++,G++)O[G]=F[U]}function Y(O,F,U,G){for(var V=U,K=0;V<G;V++,K++)O[K]=F[V];return O}function ne(O,F,U){return O.slice(0,F).concat(U).concat(O.slice(F))}return s}();THREE.FBXLoader=p7;AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){const n=this.data;if(!n.src)return;this.remove();const e=new THREE.FBXLoader;n.crossorigin&&e.setCrossOrigin(n.crossorigin),e.load(n.src,this.load.bind(this))},load:function(n){this.model=n,this.el.setObject3D("mesh",n),this.el.emit("model-loaded",{format:"fbx",model:n})},remove:function(){this.model&&this.el.removeObject3D("mesh")}});function m7(){return"script_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function g7(n,e){var i=document.createElement("script");return i.type="text/javascript",i.async=!0,i.id=e,i.src=n,i}function tM(n){const e=document.getElementById(n),i=e.parentNode;try{i&&i.removeChild(e)}catch{}}function A7(n){const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}function v7(n,e,i){return new i(function(s,o){const l=e.timeout||5e3,c=m7(),d=g7(n,c),u=setTimeout(function(){o(new Error("Script request to "+n+" timed out")),tM(c)},l),f=function(A){clearTimeout(A)};d.addEventListener("load",function(A){s({ok:!0}),f(u),tM(c)}),d.addEventListener("error",function(A){o(new Error("Script request to "+n+" failed "+A)),f(u),tM(c)}),A7(d)})}function y7(n){return n=n||{},function(e,i){return i=i||{},v7(e,i,n.Promise||Promise)}}var x7=y7;const E7=x7(),_7="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js",b7=function(){let n;return function(){return n=n||E7(_7),n}}();AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){this.model=null,this.loader=null,this.loaderPromise=b7().then(()=>{this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("Anonymous")})},update:function(){const n=this,e=this.el,i=this.data;i&&(this.remove(),this.loaderPromise.then(()=>{this.loader.load(i,function(o){n.model=o.scene,n.model.animations=o.animations,e.setObject3D("mesh",n.model),e.emit("model-loaded",{format:"gltf",model:n.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}});AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let n;const e=this.data;e.src&&(this.remove(),n=new THREE.ObjectLoader,e.crossorigin&&n.setCrossOrigin(e.crossorigin),n.load(e.src,i=>{i.traverse(s=>{s instanceof THREE.SkinnedMesh&&s.material&&(s.material.skinning=!!(s.geometry&&s.geometry.bones||[]).length)}),this.load(i)}))},load:function(n){this.model=n,this.el.setObject3D("mesh",n),this.el.emit("model-loaded",{format:"json",model:n})},remove:function(){this.model&&this.el.removeObject3D("mesh")}});AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){const n=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!n)throw new Error("No `checkpoint-controls` component found.");n.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}});function w7(n){return n?Array.isArray(n)?n:n.materials?n.materials:[n]:[]}function XA(n,e,i,s){n&&(e=e||[],n.traverse(o=>{if(!o.isMesh)return;w7(o.material).forEach(c=>{c&&!("envMap"in c)||e.length&&e.indexOf(c.name)===-1||(c.envMap=i,c.reflectivity=s,c.needsUpdate=!0)})}))}AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},format:{default:"RGBFormat",oneOf:["RGBFormat","RGBAFormat"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){const n=this.data;this.texture=new THREE.CubeTextureLoader().load([n.path+"posx."+n.extension,n.path+"negx."+n.extension,n.path+"posy."+n.extension,n.path+"negy."+n.extension,n.path+"posz."+n.extension,n.path+"negz."+n.extension]),this.texture.format=THREE[n.format],this.object3dsetHandler=()=>{const e=this.el.getObject3D("mesh"),i=this.data;XA(e,i.materials,this.texture,i.reflectivity)},this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(n){const e=this.data,i=this.el.getObject3D("mesh");let s=[],o=[];if(e.materials.length&&(n.materials?(s=e.materials.filter(l=>!n.materials.includes(l)),o=n.materials.filter(l=>!e.materials.includes(l))):s=e.materials),s.length&&XA(i,s,this.texture,e.reflectivity),o.length&&XA(i,o,null,1),n.materials&&e.reflectivity!==n.reflectivity){const l=e.materials.filter(c=>n.materials.includes(c));l.length&&XA(i,l,this.texture,e.reflectivity)}this.data.enableBackground&&!n.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&n.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);const n=this.el.getObject3D("mesh"),e=this.data;XA(n,e.materials,null,1),e.enableBackground&&this.setBackground(null)},setBackground:function(n){this.el.sceneEl.object3D.background=n}});AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){const n=this.el;n.addEventListener("hit",this.onHit),n.addEventListener("gripdown",this.onGripClose),n.addEventListener("gripup",this.onGripOpen),n.addEventListener("trackpaddown",this.onGripClose),n.addEventListener("trackpadup",this.onGripOpen),n.addEventListener("triggerdown",this.onGripClose),n.addEventListener("triggerup",this.onGripOpen)},pause:function(){const n=this.el;n.removeEventListener("hit",this.onHit),n.removeEventListener("gripdown",this.onGripClose),n.removeEventListener("gripup",this.onGripOpen),n.removeEventListener("trackpaddown",this.onGripClose),n.removeEventListener("trackpadup",this.onGripOpen),n.removeEventListener("triggerdown",this.onGripClose),n.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){const n=this.hitEl;this.grabbing=!1,n&&(n.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(n){const e=n.detail.el;!e||e.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(e.addState(this.GRABBED_STATE),this.hitEl=e,this.constraint=new CANNON.LockConstraint(this.el.body,e.body),this.system.addConstraint(this.constraint))}});const C7=-9.8,M7=-15;AFRAME.registerComponent("jump-ability",{dependencies:["velocity"],schema:{on:{default:"keydown:Space gamepadbuttondown:0"},playerHeight:{default:1.764},maxJumps:{default:1},distance:{default:5},debug:{default:!1}},init:function(){this.velocity=0,this.numJumps=0;const n=this.beginJump.bind(this),e=this.data.on.split(" ");this.bindings={};for(let i=0;i<e.length;i++)this.bindings[e[i]]=n,this.el.addEventListener(e[i],n);this.bindings.collide=this.onCollide.bind(this),this.el.addEventListener("collide",this.bindings.collide)},remove:function(){for(var n in this.bindings)this.bindings.hasOwnProperty(n)&&(this.el.removeEventListener(n,this.bindings[n]),delete this.bindings[n]);this.el.removeEventListener("collide",this.bindings.collide),delete this.bindings.collide},beginJump:function(){if(this.numJumps<this.data.maxJumps){const n=this.data,e=Math.sqrt(-2*n.distance*(C7+M7)),i=this.el.getAttribute("velocity");this.el.setAttribute("velocity",{x:i.x,y:e,z:i.z}),this.numJumps++,this.el.emit("jumpstart")}},onCollide:function(){this.numJumps>0&&this.el.emit("jumpend"),this.numJumps=0}});const VL=1e-6;AFRAME.registerComponent("kinematic-body",{dependencies:["velocity"],schema:{mass:{default:5},radius:{default:1.3},linearDamping:{default:.05},enableSlopes:{default:!0},enableJumps:{default:!1}},init:function(){this.system=this.el.sceneEl.systems.physics,this.system.addComponent(this);const n=this.el,e=this.data,i=new CANNON.Vec3().copy(n.object3D.getWorldPosition(new THREE.Vector3));this.body=new CANNON.Body({material:this.system.getMaterial("staticMaterial"),position:i,mass:e.mass,linearDamping:e.linearDamping,fixedRotation:!0}),this.body.addShape(new CANNON.Sphere(e.radius),new CANNON.Vec3(0,e.radius,0)),this.body.el=this.el,this.el.body=this.body,this.system.addBody(this.body),n.hasAttribute("wasd-controls")&&console.warn("[kinematic-body] Not compatible with wasd-controls, use movement-controls.")},remove:function(){this.system.removeBody(this.body),this.system.removeComponent(this),delete this.el.body},beforeStep:function(n,e){if(!e)return;const i=this.el,s=this.data,o=this.body;s.enableJumps||o.velocity.set(0,0,0),o.position.copy(i.getAttribute("position"))},step:function(){const n=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3;return function(o,l){if(!l)return;let c=this.body,d=this.data,u=!1,f,A=-1/0,g,y=this.system.getContacts();l=Math.min(l,this.system.data.maxInterval*1e3),s.set(0,0,0),n.copy(this.el.getAttribute("velocity")),c.velocity.copy(n);for(var v=0,_;_=y[v];v++)if(_.enabled){if(c.id===_.bi.id)_.ni.negate(i);else if(c.id===_.bj.id)i.copy(_.ni);else continue;u=c.velocity.dot(i)<-VL,u&&i.y<=.5?n.projectOnPlane(i):i.y>.5&&(f=c.id===_.bi.id?Math.abs(_.rj.y+_.bj.position.y):Math.abs(_.ri.y+_.bi.position.y),f>A&&(A=f,s.copy(i),g=c.id===_.bi.id?_.bj:_.bi))}e.copy(n).normalize(),g&&(!d.enableJumps||e.y<.5)?(d.enableSlopes?s.y<1-VL&&s.copy(this.raycastToGround(g,s)):s.set(0,1,0),n.projectOnPlane(s)):this.system.driver.world&&n.add(this.system.driver.world.gravity.scale(l*4/1e3)),c.velocity.copy(n),this.el.setAttribute("velocity",c.velocity),this.el.setAttribute("position",c.position)}}(),raycastToGround:function(n,e){let i,s,o=this.body.position,l=this.body.position.clone();return i=new CANNON.Ray(o,l),i._updateDirection(),i.intersectBody(n),i.hasHit?(s=i.result.hitNormalWorld,Math.abs(s.y)>Math.abs(e.y)?s:e):e}});AFRAME.registerComponent("mesh-smooth",{init:function(){this.el.addEventListener("model-loaded",n=>{n.detail.model.traverse(e=>{e.isMesh&&e.geometry.computeVertexNormals()})})}});AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial)},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){this.el.object3D.traverse(n=>{n.isMesh&&(n.material=this.material)})}});AFRAME.registerComponent("sphere-collider",{schema:{objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},remove:function(){this.pause()},play:function(){const n=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(n,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){const n=this.data;let e;n.objects?e=this.el.sceneEl.querySelectorAll(n.objects):e=this.el.sceneEl.children,this.els=Array.prototype.slice.call(e)},tick:function(){const n=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3,o=new THREE.Box3,l=new Map;return function(){const c=this.el,d=this.data,u=c.getObject3D("mesh"),f=[];let A;if(!u)return;l.clear(),c.object3D.getWorldPosition(n),c.object3D.getWorldScale(i),A=d.radius*y(i),this.els.forEach(g),f.sort((v,_)=>l.get(v)>l.get(_)?1:-1).forEach(this.handleHit),f.length===0&&c.emit("hit",{el:null}),this.collisions.filter(v=>!l.has(v)).forEach(this.handleHitEnd),this.collisions=f;function g(v){let _,x,b,m;v.isEntity&&(x=v.getObject3D("mesh"),x&&(o.setFromObject(x).getSize(s),m=Math.max(s.x,s.y,s.z)/2,_=Math.sqrt(2*m*m),o.getCenter(e),_&&(b=n.distanceTo(e),b<_+A&&(f.push(v),l.set(v,b)))))}function y(v){return Math.max.apply(null,v.toArray())}}}(),handleHit:function(n){n.emit("hit"),n.addState(this.data.state),this.el.emit("hit",{el:n})},handleHitEnd:function(n){n.emit("hitend"),n.removeState(this.data.state),this.el.emit("hitend",{el:n})}});AFRAME.registerComponent("nav-mesh",{init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){const n=this.el.getObject3D("mesh"),e=this.el.sceneEl.object3D;if(!n)return;let i;if(n.traverse(o=>{o.isMesh&&(i=o)}),!i)return;const s=i.geometry.isBufferGeometry?new THREE.Geometry().fromBufferGeometry(i.geometry):i.geometry.clone();e.updateMatrixWorld(),s.applyMatrix(i.matrixWorld),this.system.setNavMeshGeometry(s),this.hasLoadedNavMesh=!0}});AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){const n=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(s,o){const l=this.el,c=this.data,d=this.raycaster,u=c.speed*o/1e3;if(!c.active)return;if(!this.path.length){const _=this.el.object3D.position;this.group=this.group||this.system.getGroup(_),this.path=this.system.getPath(_,n.copy(c.destination),this.group)||[],l.emit("navigation-start")}if(!this.path.length){console.warn("[nav] Unable to find path to %o.",c.destination),this.el.setAttribute("nav-agent",{active:!1}),l.emit("navigation-end");return}const f=l.object3D.position,A=this.path[0];e.subVectors(A,f);const g=e.length();let y;if(g<u){if(this.path.shift(),!this.path.length){this.el.setAttribute("nav-agent",{active:!1}),l.emit("navigation-end");return}i.copy(f),y=this.path[0]}else i.copy(e.setLength(u)).add(f),y=A;y.y=f.y,l.object3D.lookAt(y),d.ray.origin.copy(i),d.ray.origin.y+=1.5,d.ray.direction.y=-1;const v=d.intersectObject(this.system.getNavMesh());v.length?(e.subVectors(v[0].point,f),f.add(e.setLength(u))):f.copy(i)}}()});var $r=function(){};$r.computeCentroids=function(n){var e,i,s;for(e=0,i=n.faces.length;e<i;e++)(s=n.faces[e]).centroid=new THREE.Vector3(0,0,0),s.centroid.add(n.vertices[s.a]),s.centroid.add(n.vertices[s.b]),s.centroid.add(n.vertices[s.c]),s.centroid.divideScalar(3)},$r.roundNumber=function(n,e){return Number(n.toFixed(e))},$r.sample=function(n){return n[Math.floor(Math.random()*n.length)]},$r.mergeVertexIds=function(n,e){var i=[];if(n.forEach(function(u){e.indexOf(u)>=0&&i.push(u)}),i.length<2)return[];i.includes(n[0])&&i.includes(n[n.length-1])&&n.push(n.shift()),i.includes(e[0])&&i.includes(e[e.length-1])&&e.push(e.shift()),i=[],n.forEach(function(u){e.includes(u)&&i.push(u)});for(var s=i[1],o=i[0],l=n.slice();l[0]!==s;)l.push(l.shift());for(var c=0,d=e.slice();d[0]!==o;)if(d.push(d.shift()),c++>10)throw new Error("Unexpected state");return d.shift(),d.pop(),l=l.concat(d)},$r.setPolygonCentroid=function(n,e){var i=new THREE.Vector3,s=e.vertices;n.vertexIds.forEach(function(o){i.add(s[o])}),i.divideScalar(n.vertexIds.length),n.centroid.copy(i)},$r.cleanPolygon=function(n,e){for(var i=[],s=e.vertices,o=0;o<n.vertexIds.length;o++){var l,c,d,u=s[n.vertexIds[o]];o===0?(l=n.vertexIds[1],c=n.vertexIds[n.vertexIds.length-1]):o===n.vertexIds.length-1?(l=n.vertexIds[0],c=n.vertexIds[n.vertexIds.length-2]):(l=n.vertexIds[o+1],c=n.vertexIds[o-1]),d=s[c];var f=s[l].clone().sub(u),A=d.clone().sub(u),g=f.angleTo(A);if(g>Math.PI-.01&&g<Math.PI+.01){var y=[];n.neighbours.forEach(function(v){v.vertexIds.includes(n.vertexIds[o])||y.push(v)}),n.neighbours=y}else i.push(n.vertexIds[o])}n.vertexIds=i,this.setPolygonCentroid(n,e)},$r.isConvex=function(n,e){var i=e.vertices;if(n.vertexIds.length<3)return!1;for(var s=!0,o=[],l=0;l<n.vertexIds.length;l++){var c,d,u=i[n.vertexIds[l]];l===0?(c=i[n.vertexIds[1]],d=i[n.vertexIds[n.vertexIds.length-1]]):l===n.vertexIds.length-1?(c=i[n.vertexIds[0]],d=i[n.vertexIds[n.vertexIds.length-2]]):(c=i[n.vertexIds[l+1]],d=i[n.vertexIds[l-1]]);var f=c.clone().sub(u),A=d.clone().sub(u),g=f.angleTo(A);if(g===Math.PI||g===0)return!1;var y=f.cross(A).y;o.push(y)}return o.forEach(function(v){v===0&&(s=!1)}),o.forEach(o[0]>0?function(v){v<0&&(s=!1)}:function(v){v>0&&(s=!1)}),s},$r.distanceToSquared=function(n,e){var i=n.x-e.x,s=n.y-e.y,o=n.z-e.z;return i*i+s*s+o*o},$r.isPointInPoly=function(n,e){for(var i=!1,s=-1,o=n.length,l=o-1;++s<o;l=s)(n[s].z<=e.z&&e.z<n[l].z||n[l].z<=e.z&&e.z<n[s].z)&&e.x<(n[l].x-n[s].x)*(e.z-n[s].z)/(n[l].z-n[s].z)+n[s].x&&(i=!i);return i},$r.isVectorInPolygon=function(n,e,i){var s=1e5,o=-1e5,l=[];return e.vertexIds.forEach(function(c){s=Math.min(i[c].y,s),o=Math.max(i[c].y,o),l.push(i[c])}),!!(n.y<o+.5&&n.y>s-.5&&this.isPointInPoly(l,n))},$r.triarea2=function(n,e,i){return(i.x-n.x)*(e.z-n.z)-(e.x-n.x)*(i.z-n.z)},$r.vequal=function(n,e){return this.distanceToSquared(n,e)<1e-5};var Sd=function(n){this.content=[],this.scoreFunction=n};Sd.prototype.push=function(n){this.content.push(n),this.sinkDown(this.content.length-1)},Sd.prototype.pop=function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},Sd.prototype.remove=function(n){var e=this.content.indexOf(n),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},Sd.prototype.size=function(){return this.content.length},Sd.prototype.rescoreElement=function(n){this.sinkDown(this.content.indexOf(n))},Sd.prototype.sinkDown=function(n){for(var e=this.content[n];n>0;){var i=(n+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[i]=e,this.content[n]=s,n=i}},Sd.prototype.bubbleUp=function(n){for(var e=this.content.length,i=this.content[n],s=this.scoreFunction(i);;){var o=n+1<<1,l=o-1,c=null,d=void 0;if(l<e&&(d=this.scoreFunction(this.content[l]))<s&&(c=l),o<e&&this.scoreFunction(this.content[o])<(c===null?s:d)&&(c=o),c===null)break;this.content[n]=this.content[c],this.content[c]=i,n=c}};var sp=function(){};sp.init=function(n){for(var e=0;e<n.length;e++){var i=n[e];i.f=0,i.g=0,i.h=0,i.cost=1,i.visited=!1,i.closed=!1,i.parent=null}},sp.cleanUp=function(n){for(var e=0;e<n.length;e++){var i=n[e];delete i.f,delete i.g,delete i.h,delete i.cost,delete i.visited,delete i.closed,delete i.parent}},sp.heap=function(){return new Sd(function(n){return n.f})},sp.search=function(n,e,i){this.init(n);var s=this.heap();for(s.push(e);s.size()>0;){var o=s.pop();if(o===i){for(var l=o,c=[];l.parent;)c.push(l),l=l.parent;return this.cleanUp(c),c.reverse()}o.closed=!0;for(var d=this.neighbours(n,o),u=0,f=d.length;u<f;u++){var A=d[u];if(!A.closed){var g=o.g+A.cost,y=A.visited;if(!y||g<A.g){if(A.visited=!0,A.parent=o,!A.centroid||!i.centroid)throw new Error("Unexpected state");A.h=A.h||this.heuristic(A.centroid,i.centroid),A.g=g,A.f=A.g+A.h,y?s.rescoreElement(A):s.push(A)}}}}return[]},sp.heuristic=function(n,e){return $r.distanceToSquared(n,e)},sp.neighbours=function(n,e){for(var i=[],s=0;s<e.neighbours.length;s++)i.push(n[e.neighbours[s]]);return i};var S7=1,op=function(){};op.buildZone=function(n){var e=this,i=this._buildNavigationMesh(n),s={};i.vertices.forEach(function(c){c.x=$r.roundNumber(c.x,2),c.y=$r.roundNumber(c.y,2),c.z=$r.roundNumber(c.z,2)}),s.vertices=i.vertices;var o=this._buildPolygonGroups(i);s.groups=[];var l=function(c,d){for(var u=0;u<c.length;u++)if(d===c[u])return u};return o.forEach(function(c){var d=[];c.forEach(function(u){var f=u.neighbours.map(function(g){return l(c,g)}),A=u.neighbours.map(function(g){return e._getSharedVerticesInOrder(u,g)});u.centroid.x=$r.roundNumber(u.centroid.x,2),u.centroid.y=$r.roundNumber(u.centroid.y,2),u.centroid.z=$r.roundNumber(u.centroid.z,2),d.push({id:l(c,u),neighbours:f,vertexIds:u.vertexIds,centroid:u.centroid,portals:A})}),s.groups.push(d)}),s},op._buildNavigationMesh=function(n){return $r.computeCentroids(n),n.mergeVertices(),this._buildPolygonsFromGeometry(n)},op._buildPolygonGroups=function(n){var e=[],i=0,s=function(o){o.neighbours.forEach(function(l){l.group===void 0&&(l.group=o.group,s(l))})};return n.polygons.forEach(function(o){o.group===void 0&&(o.group=i++,s(o)),e[o.group]||(e[o.group]=[]),e[o.group].push(o)}),e},op._buildPolygonNeighbours=function(n,e,i){var s=new Set,o=i.get(n.vertexIds[0]),l=i.get(n.vertexIds[1]),c=i.get(n.vertexIds[2]);o.forEach(function(d){(l.has(d)||c.has(d))&&s.add(e.polygons[d])}),l.forEach(function(d){c.has(d)&&s.add(e.polygons[d])}),n.neighbours=Array.from(s)},op._buildPolygonsFromGeometry=function(n){for(var e=this,i=[],s=n.vertices,o=n.faceVertexUvs,l=new Map,c=0;c<s.length;c++)l.set(c,new Set);n.faces.forEach(function(u){i.push({id:S7++,vertexIds:[u.a,u.b,u.c],centroid:u.centroid,normal:u.normal,neighbours:[]}),l.get(u.a).add(i.length-1),l.get(u.b).add(i.length-1),l.get(u.c).add(i.length-1)});var d={polygons:i,vertices:s,faceVertexUvs:o};return i.forEach(function(u){e._buildPolygonNeighbours(u,d,l)}),d},op._getSharedVerticesInOrder=function(n,e){var i=n.vertexIds,s=e.vertexIds,o=new Set;if(i.forEach(function(c){s.includes(c)&&o.add(c)}),o.size<2)return[];o.has(i[0])&&o.has(i[i.length-1])&&i.push(i.shift()),o.has(s[0])&&o.has(s[s.length-1])&&s.push(s.shift());var l=[];return i.forEach(function(c){s.includes(c)&&l.push(c)}),l};var sT=function(){this.portals=[]};sT.prototype.push=function(n,e){e===void 0&&(e=n),this.portals.push({left:n,right:e})},sT.prototype.stringPull=function(){var n,e,i,s=this.portals,o=[],l=0,c=0,d=0;e=s[0].left,i=s[0].right,o.push(n=s[0].left);for(var u=1;u<s.length;u++){var f=s[u].left,A=s[u].right;if($r.triarea2(n,i,A)<=0){if(!($r.vequal(n,i)||$r.triarea2(n,e,A)>0)){o.push(e),e=n=e,i=n,c=l=c,d=l,u=l;continue}i=A,d=u}if($r.triarea2(n,e,f)>=0){if(!($r.vequal(n,e)||$r.triarea2(n,i,f)<0)){o.push(i),e=n=i,i=n,c=l=d,d=l,u=l;continue}e=f,c=u}}return o.length!==0&&$r.vequal(o[o.length-1],s[s.length-1].left)||o.push(s[s.length-1].left),this.path=o,o};var nM,iM,Jf,rM,sM,Yx,Td=function(){this.zones={}};Td.createZone=function(n){return op.buildZone(n)},Td.prototype.setZoneData=function(n,e){this.zones[n]=e},Td.prototype.getGroup=function(n,e){if(!this.zones[n])return null;var i=null,s=Math.pow(50,2);return this.zones[n].groups.forEach(function(o,l){o.forEach(function(c){var d=$r.distanceToSquared(c.centroid,e);d<s&&(i=l,s=d)})}),i},Td.prototype.getRandomNode=function(n,e,i,s){if(!this.zones[n])return new THREE.Vector3;i=i||null,s=s||0;var o=[];return this.zones[n].groups[e].forEach(function(l){i&&s?$r.distanceToSquared(i,l.centroid)<s*s&&o.push(l.centroid):o.push(l.centroid)}),$r.sample(o)||new THREE.Vector3},Td.prototype.getClosestNode=function(n,e,i,s){s===void 0&&(s=!1);var o=this.zones[e].vertices,l=null,c=1/0;return this.zones[e].groups[i].forEach(function(d){var u=$r.distanceToSquared(d.centroid,n);u<c&&(!s||$r.isVectorInPolygon(n,d,o))&&(l=d,c=u)}),l},Td.prototype.findPath=function(n,e,i,s){var o=this.zones[i].groups[s],l=this.zones[i].vertices,c=this.getClosestNode(n,i,s),d=this.getClosestNode(e,i,s,!0);if(!c||!d)return null;var u=sp.search(o,c,d),f=function(x,b){for(var m=0;m<x.neighbours.length;m++)if(x.neighbours[m]===b.id)return x.portals[m]},A=new sT;A.push(n);for(var g=0;g<u.length;g++){var y=u[g+1];if(y){var v=f(u[g],y);A.push(l[v[0]],l[v[1]])}}A.push(e),A.stringPull();var _=A.path.map(function(x){return new THREE.Vector3(x.x,x.y,x.z)});return _.shift(),_},Td.prototype.clampStep=(Jf=new THREE.Vector3,rM=new THREE.Plane,sM=new THREE.Triangle,Yx=new THREE.Vector3,function(n,e,i,s,o,l){var c=this.zones[s].vertices,d=this.zones[s].groups[o],u=[i],f={};f[i.id]=0,nM=void 0,Yx.set(0,0,0),iM=1/0,rM.setFromCoplanarPoints(c[i.vertexIds[0]],c[i.vertexIds[1]],c[i.vertexIds[2]]),rM.projectPoint(e,Jf),e.copy(Jf);for(var A=u.pop();A;A=u.pop()){sM.set(c[A.vertexIds[0]],c[A.vertexIds[1]],c[A.vertexIds[2]]),sM.closestPointToPoint(e,Jf),Jf.distanceToSquared(e)<iM&&(nM=A,Yx.copy(Jf),iM=Jf.distanceToSquared(e));var g=f[A];if(!(g>2))for(var y=0;y<A.neighbours.length;y++){var v=d[A.neighbours[y]];v.id in f||(u.push(v),f[v.id]=g+1)}}return l.copy(Yx),nM});const T7=Object.freeze(Object.defineProperty({__proto__:null,Pathfinding:Td},Symbol.toStringTag,{value:"Module"})),I7=YT(T7),{Pathfinding:oF}=I7,YA=new oF,qA="level";AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(n){this.navMesh=new THREE.Mesh(n),YA.setZoneData(qA,oF.createZone(n)),Array.from(this.agents).forEach(e=>e.updateNavLocation())},getNavMesh:function(){return this.navMesh},addAgent:function(n){this.agents.add(n)},removeAgent:function(n){this.agents.delete(n)},getPath:function(n,e,i){return this.navMesh?YA.findPath(n,e,qA,i):null},getGroup:function(n){return this.navMesh?YA.getGroup(qA,n):null},getNode:function(n,e){return this.navMesh?YA.getClosestNode(n,qA,e,!0):null},clampStep:function(n,e,i,s,o){if(this.navMesh){if(!s)return o.copy(e),this.getNode(e,i)}else return o.copy(e),null;return YA.clampStep(n,e,s,qA,i,o)}});AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}});var aF={exports:{}},Zt=aF.exports={VERSION:"0.1.1",PI:Math.PI,TAU:2*Math.PI,DEG_TO_RAD:.0174532925,RAD_TO_DEG:57.2957795,SQRT3:Math.sqrt(3),TILE:"tile",ENT:"entity",STR:"structure",HEX:"hex",SQR:"square",ABS:"abstract"};Zt.Board=function(n,e){if(!n)throw new Error("You must pass in a grid system for the board to use.");this.tiles=[],this.tileGroup=null,this.group=new THREE.Object3D,this.grid=null,this.overlay=null,this.finder=new Zt.AStarFinder(e),Zt.Loader.init(),this.setGrid(n)},Zt.Board.prototype={setEntityOnTile:function(n,e){var i=this.grid.cellToPixel(e.cell);n.position.copy(i),n.position.y+=n.heightOffset||0,n.tile&&(n.tile.entity=null),n.tile=e,e.entity=n},addTile:function(n){var e=this.tiles.indexOf(n);e===-1&&(this.tiles.push(n),this.snapTileToGrid(n),n.position.y=0,this.tileGroup.add(n.mesh),this.grid.add(n.cell),n.cell.tile=n)},removeTile:function(n){if(n){var e=this.tiles.indexOf(n);this.grid.remove(n.cell),e!==-1&&this.tiles.splice(e,1),n.dispose()}},removeAllTiles:function(){if(this.tileGroup)for(var n=this.tileGroup.children,e=0;e<n.length;e++)this.tileGroup.remove(n[e])},getTileAtCell:function(n){var e=this.grid.cellToHash(n);return n.tile||(typeof this.grid.cells[e]<"u"?this.grid.cells[e].tile:null)},snapToGrid:function(n){var e=this.grid.pixelToCell(n);n.copy(this.grid.cellToPixel(e))},snapTileToGrid:function(n){if(n.cell)n.position.copy(this.grid.cellToPixel(n.cell));else{var e=this.grid.pixelToCell(n.position);n.position.copy(this.grid.cellToPixel(e))}return n},getRandomTile:function(){var n=Zt.Tools.randomInt(0,this.tiles.length-1);return this.tiles[n]},findPath:function(n,e,i){return this.finder.findPath(n.cell,e.cell,i,this.grid)},setGrid:function(n){this.group.remove(this.tileGroup),this.grid&&n!==this.grid&&(this.removeAllTiles(),this.tiles.forEach(function(e){this.grid.remove(e.cell),e.dispose()}),this.grid.dispose()),this.grid=n,this.tiles=[],this.tileGroup=new THREE.Object3D,this.group.add(this.tileGroup)},generateOverlay:function(n){var e=new THREE.LineBasicMaterial({color:0,opacity:.3});this.overlay&&this.group.remove(this.overlay),this.overlay=new THREE.Object3D,this.grid.generateOverlay(n,this.overlay,e),this.group.add(this.overlay)},generateTilemap:function(n){this.reset();var e=this.grid.generateTiles(n);this.tiles=e,this.tileGroup=new THREE.Object3D;for(var i=0;i<e.length;i++)this.tileGroup.add(e[i].mesh);this.group.add(this.tileGroup)},reset:function(){this.removeAllTiles(),this.tileGroup&&this.group.remove(this.tileGroup)}},Zt.Board.prototype.constructor=Zt.Board,Zt.Cell=function(n,e,i,s){this.q=n||0,this.r=e||0,this.s=i||0,this.h=s||1,this.tile=null,this.userData={},this.walkable=!0,this._calcCost=0,this._priority=0,this._visited=!1,this._parent=null,this.uniqueID=Zt.LinkedList.generateID()},Zt.Cell.prototype={set:function(n,e,i){return this.q=n,this.r=e,this.s=i,this},copy:function(n){return this.q=n.q,this.r=n.r,this.s=n.s,this.h=n.h,this.tile=n.tile||null,this.userData=n.userData||{},this.walkable=n.walkable,this},add:function(n){return this.q+=n.q,this.r+=n.r,this.s+=n.s,this},equals:function(n){return this.q===n.q&&this.r===n.r&&this.s===n.s}},Zt.Cell.prototype.constructor=Zt.Cell,Zt.HexGrid=function(n){n=n||{},this.type=Zt.HEX,this.size=5,this.cellSize=typeof n.cellSize>"u"?10:n.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var e,i=[];for(e=0;6>e;e++)i.push(this._createVertex(e));for(this.cellShape=new THREE.Shape,this.cellShape.moveTo(i[0].x,i[0].y),e=1;6>e;e++)this.cellShape.lineTo(i[e].x,i[e].y);this.cellShape.lineTo(i[0].x,i[0].y),this.cellShape.autoClose=!0,this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=i,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._cellWidth=2*this.cellSize,this._cellLength=.5*Zt.SQRT3*this._cellWidth,this._hashDelimeter=".",this._directions=[new Zt.Cell(1,-1,0),new Zt.Cell(1,0,-1),new Zt.Cell(0,1,-1),new Zt.Cell(-1,1,0),new Zt.Cell(-1,0,1),new Zt.Cell(0,-1,1)],this._diagonals=[new Zt.Cell(2,-1,-1),new Zt.Cell(1,1,-2),new Zt.Cell(-1,2,-1),new Zt.Cell(-2,1,1),new Zt.Cell(-1,-1,2),new Zt.Cell(1,-2,1)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new Zt.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},Zt.HexGrid.TWO_THIRDS=2/3,Zt.HexGrid.prototype={cellToPixel:function(n){return this._vec3.x=n.q*this._cellWidth*.75,this._vec3.y=n.h,this._vec3.z=-((n.s-n.r)*this._cellLength*.5),this._vec3},pixelToCell:function(n){var e=n.x*(Zt.HexGrid.TWO_THIRDS/this.cellSize),i=(-n.x/3+Zt.SQRT3/3*n.z)/this.cellSize;return this._cel.set(e,i,-e-i),this._cubeRound(this._cel)},getCellAt:function(n){var e=n.x*(Zt.HexGrid.TWO_THIRDS/this.cellSize),i=(-n.x/3+Zt.SQRT3/3*n.z)/this.cellSize;return this._cel.set(e,i,-e-i),this._cubeRound(this._cel),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(n,e,i){var s,o,l=this._directions.length;for(this._list.length=0,s=0;l>s;s++)this._cel.copy(n),this._cel.add(this._directions[s]),o=this.cells[this.cellToHash(this._cel)],!o||i&&!i(n,o)||this._list.push(o);if(e)for(s=0;l>s;s++)this._cel.copy(n),this._cel.add(this._diagonals[s]),o=this.cells[this.cellToHash(this._cel)],!o||i&&!i(n,o)||this._list.push(o);return this._list},getRandomCell:function(){var n,e=0,i=Zt.Tools.randomInt(0,this.numCells);for(n in this.cells){if(e===i)return this.cells[n];e++}return this.cells[n]},cellToHash:function(n){return n.q+this._hashDelimeter+n.r+this._hashDelimeter+n.s},distance:function(n,e){var i=Math.max(Math.abs(n.q-e.q),Math.abs(n.r-e.r),Math.abs(n.s-e.s));return i+=e.h-n.h},clearPath:function(){var n,e;for(n in this.cells)e=this.cells[n],e._calcCost=0,e._priority=0,e._parent=null,e._visited=!1},traverse:function(n){var e;for(e in this.cells)n(this.cells[e])},generateTile:function(n,e,i){var s=Math.abs(n.h);1>s&&(s=1);var o=this._geoCache[s];o||(this.extrudeSettings.amount=s,o=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[s]=o);var l=new Zt.Tile({size:this.cellSize,scale:e,cell:n,geometry:o,material:i});return n.tile=l,l},generateTiles:function(n){n=n||{};var e=[],i={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};i=Zt.Tools.merge(i,n),this.cellSize=i.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*Zt.SQRT3*this._cellWidth,this.autogenerated=!0,this.extrudeSettings=i.extrudeSettings;var s,o,l;for(s in this.cells)l=this.cells[s],o=this.generateTile(l,i.tileScale,i.material),o.position.copy(this.cellToPixel(l)),o.position.y=0,e.push(o);return e},generateTilePoly:function(n){n||(n=new THREE.MeshBasicMaterial({color:2405631}));var e=new THREE.Mesh(this.cellShapeGeo,n);return this._vec3.set(1,0,0),e.rotateOnAxis(this._vec3,Zt.PI/2),e},generate:function(n){n=n||{},this.size=typeof n.size>"u"?this.size:n.size;var e,i,s,o;for(e=-this.size;e<this.size+1;e++)for(i=-this.size;i<this.size+1;i++)s=-e-i,Math.abs(e)<=this.size&&Math.abs(i)<=this.size&&Math.abs(s)<=this.size&&(o=new Zt.Cell(e,i,s),this.add(o))},generateOverlay:function(n,e,i){var s,o,l,c=this.cellShape.createPointsGeometry();for(s=-n;n+1>s;s++)for(o=-n;n+1>o;o++)if(l=-s-o,Math.abs(s)<=n&&Math.abs(o)<=n&&Math.abs(l)<=n){this._cel.set(s,o,l);var d=new THREE.Line(c,i);d.position.copy(this.cellToPixel(this._cel)),d.rotation.x=90*Zt.DEG_TO_RAD,e.add(d)}},add:function(n){var e=this.cellToHash(n);if(!this.cells[e])return this.cells[e]=n,this.numCells++,n},remove:function(n){var e=this.cellToHash(n);this.cells[e]&&(delete this.cells[e],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(n,e,i){var s=this;Zt.Tools.getJSON({url:n,callback:function(o){s.fromJSON(o),e.call(i||null,o)},cache:!1,scope:s})},fromJSON:function(n){var e,i,s=n.cells;for(this.cells={},this.numCells=0,this.size=n.size,this.cellSize=n.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*Zt.SQRT3*this._cellWidth,this.extrudeSettings=n.extrudeSettings,this.autogenerated=n.autogenerated,e=0;e<s.length;e++)i=new Zt.Cell,i.copy(s[e]),this.add(i)},toJSON:function(){var n,e,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(e in this.cells)n=this.cells[e],s.push({q:n.q,r:n.r,s:n.s,h:n.h,walkable:n.walkable,userData:n.userData});return i.cells=s,i},_createVertex:function(n){var e=Zt.TAU/6*n;return new THREE.Vector3(this.cellSize*Math.cos(e),this.cellSize*Math.sin(e),0)},_cubeRound:function(n){var e=Math.round(n.q),i=Math.round(n.r),s=Math.round(n.s),o=Math.abs(e-n.q),l=Math.abs(i-n.r),c=Math.abs(s-n.s);return o>l&&o>c?e=-i-s:l>c?i=-e-s:s=-e-i,this._cel.set(e,i,s)}},Zt.HexGrid.prototype.constructor=Zt.HexGrid,Zt.SqrGrid=function(n){n=n||{},this.type=Zt.SQR,this.size=5,this.cellSize=typeof n.cellSize>"u"?10:n.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var e=[];e.push(new THREE.Vector3),e.push(new THREE.Vector3(-this.cellSize,this.cellSize)),e.push(new THREE.Vector3(this.cellSize,this.cellSize)),e.push(new THREE.Vector3(this.cellSize,-this.cellSize)),this.cellShape=new THREE.Shape,this.cellShape.moveTo(-this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,-this.cellSize),this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=e,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._fullCellSize=2*this.cellSize,this._hashDelimeter=".",this._directions=[new Zt.Cell(1,0,0),new Zt.Cell(0,-1,0),new Zt.Cell(-1,0,0),new Zt.Cell(0,1,0)],this._diagonals=[new Zt.Cell(-1,-1,0),new Zt.Cell(-1,1,0),new Zt.Cell(1,1,0),new Zt.Cell(1,-1,0)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new Zt.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},Zt.SqrGrid.prototype={cellToPixel:function(n){return this._vec3.x=n.q*this._fullCellSize,this._vec3.y=n.h,this._vec3.z=n.r*this._fullCellSize,this._vec3},pixelToCell:function(n){var e=Math.round(n.x/this._fullCellSize),i=Math.round(n.z/this._fullCellSize);return this._cel.set(e,i,0)},getCellAt:function(n){var e=Math.round(n.x/this._fullCellSize),i=Math.round(n.z/this._fullCellSize);return this._cel.set(e,i),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(n,e,i){var s,o,l=this._directions.length;for(this._list.length=0,s=0;l>s;s++)this._cel.copy(n),this._cel.add(this._directions[s]),o=this.cells[this.cellToHash(this._cel)],!o||i&&!i(n,o)||this._list.push(o);if(e)for(s=0;l>s;s++)this._cel.copy(n),this._cel.add(this._diagonals[s]),o=this.cells[this.cellToHash(this._cel)],!o||i&&!i(n,o)||this._list.push(o);return this._list},getRandomCell:function(){var n,e=0,i=Zt.Tools.randomInt(0,this.numCells);for(n in this.cells){if(e===i)return this.cells[n];e++}return this.cells[n]},cellToHash:function(n){return n.q+this._hashDelimeter+n.r},distance:function(n,e){var i=Math.max(Math.abs(n.q-e.q),Math.abs(n.r-e.r));return i+=e.h-n.h},clearPath:function(){var n,e;for(n in this.cells)e=this.cells[n],e._calcCost=0,e._priority=0,e._parent=null,e._visited=!1},traverse:function(n){var e;for(e in this.cells)n(this.cells[e])},generateTile:function(n,e,i){var s=Math.abs(n.h);1>s&&(s=1);var o=this._geoCache[s];o||(this.extrudeSettings.amount=s,o=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[s]=o);var l=new Zt.Tile({size:this.cellSize,scale:e,cell:n,geometry:o,material:i});return n.tile=l,l},generateTiles:function(n){n=n||{};var e=[],i={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};i=Zt.Tools.merge(i,n),this.cellSize=i.cellSize,this._fullCellSize=2*this.cellSize,this.autogenerated=!0,this.extrudeSettings=i.extrudeSettings;var s,o,l;for(s in this.cells)l=this.cells[s],o=this.generateTile(l,i.tileScale,i.material),o.position.copy(this.cellToPixel(l)),o.position.y=0,e.push(o);return e},generateTilePoly:function(n){n||(n=new THREE.MeshBasicMaterial({color:2405631}));var e=new THREE.Mesh(this.cellShapeGeo,n);return this._vec3.set(1,0,0),e.rotateOnAxis(this._vec3,Zt.PI/2),e},generate:function(n){n=n||{},this.size=typeof n.size>"u"?this.size:n.size;var e,i,s,o=Math.ceil(this.size/2);for(e=-o;o>e;e++)for(i=-o;o>i;i++)s=new Zt.Cell(e,i+1),this.add(s)},generateOverlay:function(n,e,i){var s,o,l=Math.ceil(n/2);for(s=-l;l>s;s++)for(o=-l;l>o;o++){this._cel.set(s,o);var c=new THREE.Line(this.cellGeo,i);c.position.copy(this.cellToPixel(this._cel)),c.rotation.x=90*Zt.DEG_TO_RAD,e.add(c)}},add:function(n){var e=this.cellToHash(n);if(!this.cells[e])return this.cells[e]=n,this.numCells++,n},remove:function(n){var e=this.cellToHash(n);this.cells[e]&&(delete this.cells[e],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(n,e,i){Zt.Tools.getJSON({url:n,callback:function(s){this.fromJSON(s),e.call(i||null,s)},cache:!1,scope:this})},fromJSON:function(n){var e,i,s=n.cells;for(this.cells={},this.numCells=0,this.size=n.size,this.cellSize=n.cellSize,this._fullCellSize=2*this.cellSize,this.extrudeSettings=n.extrudeSettings,this.autogenerated=n.autogenerated,e=0;e<s.length;e++)i=new Zt.Cell,i.copy(s[e]),this.add(i)},toJSON:function(){var n,e,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(e in this.cells)n=this.cells[e],s.push({q:n.q,r:n.r,s:n.s,h:n.h,walkable:n.walkable,userData:n.userData});return i.cells=s,i}},Zt.SqrGrid.prototype.constructor=Zt.SqrGrid,Zt.Tile=function(n){n=n||{};var e={cell:null,geometry:null,material:null};if(e=Zt.Tools.merge(e,n),!e.cell||!e.geometry)throw new Error("Missing vg.Tile configuration");this.cell=e.cell,this.cell.tile&&this.cell.tile!==this&&this.cell.tile.dispose(),this.cell.tile=this,this.uniqueID=Zt.Tools.generateID(),this.geometry=e.geometry,this.material=e.material,this.material||(this.material=new THREE.MeshPhongMaterial({color:Zt.Tools.randomizeRGB("30, 30, 30",13)})),this.objectType=Zt.TILE,this.entity=null,this.userData={},this.selected=!1,this.highlight="0x0084cc",this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.userData.structure=this,this.position=this.mesh.position,this.rotation=this.mesh.rotation,this.rotation.x=-90*Zt.DEG_TO_RAD,this.mesh.scale.set(e.scale,e.scale,1),this.material.emissive?this._emissive=this.material.emissive.getHex():this._emissive=null},Zt.Tile.prototype={select:function(){return this.material.emissive&&this.material.emissive.setHex(this.highlight),this.selected=!0,this},deselect:function(){return this._emissive!==null&&this.material.emissive&&this.material.emissive.setHex(this._emissive),this.selected=!1,this},toggle:function(){return this.selected?this.deselect():this.select(),this},dispose:function(){this.cell&&this.cell.tile&&(this.cell.tile=null),this.cell=null,this.position=null,this.rotation=null,this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.mesh.userData.structure=null,this.mesh=null,this.material=null,this.userData=null,this.entity=null,this.geometry=null,this._emissive=null}},Zt.Tile.prototype.constructor=Zt.Tile,function(){var n=function(){this.obj=null,this.next=null,this.prev=null,this.free=!0},e=function(){this.first=null,this.last=null,this.length=0,this.objToNodeMap={},this.uniqueID=Date.now()+""+Math.floor(1e3*Math.random()),this.sortArray=[]};e.generateID=function(){return Math.random().toString(36).slice(2)+Date.now()},e.prototype={getNode:function(i){return this.objToNodeMap[i.uniqueID]},addNode:function(i){var s=new n;if(!i.uniqueID)try{i.uniqueID=e.generateID()}catch{return console.error("[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier"),null}return s.obj=i,s.free=!1,this.objToNodeMap[i.uniqueID]=s,s},swapObjects:function(i,s){this.objToNodeMap[i.obj.uniqueID]=null,this.objToNodeMap[s.uniqueID]=i,i.obj=s},add:function(i){var s=this.objToNodeMap[i.uniqueID];if(s){if(s.free===!1)return;s.obj=i,s.free=!1,s.next=null,s.prev=null}else s=this.addNode(i);if(this.first){if(!this.last)throw new Error("[LinkedList.add] No last in the list -- that shouldn't happen here");this.last.next=s,s.prev=this.last,this.last=s,s.next=null}else this.first=s,this.last=s,s.next=null,s.prev=null;this.length++,this.showDebug&&this.dump("after add")},has:function(i){return!!this.objToNodeMap[i.uniqueID]},moveUp:function(i){this.dump("before move up");var s=this.getNode(i);if(!s)throw"Oops, trying to move an object that isn't in the list";if(s.prev){var o=s.prev,l=o.prev;s==this.last&&(this.last=o);var c=s.next;l&&(l.next=s),s.next=o,s.prev=o.prev,o.next=c,o.prev=s,this.first==o&&(this.first=s)}},moveDown:function(i){var s=this.getNode(i);if(!s)throw"Oops, trying to move an object that isn't in the list";if(s.next){var o=s.next;this.moveUp(o.obj),this.last==o&&(this.last=s)}},sort:function(i){var s,o,l=this.sortArray,c=this.first;for(l.length=0;c;)l.push(c.obj),c=c.next;for(this.clear(),l.sort(i),o=l.length,s=0;o>s;s++)this.add(l[s])},remove:function(i){var s=this.getNode(i);return!s||s.free?!1:(s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.prev||(this.first=s.next),s.next||(this.last=s.prev),s.free=!0,s.prev=null,s.next=null,this.length--,!0)},shift:function(){var i=this.first;return this.length===0?null:(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),this.first=i.next,i.next||(this.last=null),i.free=!0,i.prev=null,i.next=null,this.length--,i.obj)},pop:function(){var i=this.last;return this.length===0?null:(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),this.last=i.prev,i.prev||(this.first=null),i.free=!0,i.prev=null,i.next=null,this.length--,i.obj)},concat:function(i){for(var s=i.first;s;)this.add(s.obj),s=s.next},clear:function(){for(var i=this.first;i;)i.free=!0,i=i.next;this.first=null,this.length=0},dispose:function(){for(var i=this.first;i;)i.obj=null,i=i.next;this.first=null,this.objToNodeMap=null},dump:function(i){console.log("===================="+i+"=====================");for(var s=this.first;s;)console.log("{"+s.obj.toString()+"} previous="+(s.prev?s.prev.obj:"NULL")),s=s.next();console.log("==================================="),console.log("Last: {"+(this.last?this.last.obj:"NULL")+"} First: {"+(this.first?this.first.obj:"NULL")+"}")}},e.prototype.constructor=e,Zt.LinkedList=e}(),function(){var n=function(i,s,o,l,c){this._listener=s,this.isOnce=o,this.context=l,this.signal=i,this._priority=c||0};n.prototype={active:!0,params:null,execute:function(i){var s,o;return this.active&&this._listener&&(o=this.params?this.params.concat(i):i,s=this._listener.apply(this.context,o),this.isOnce&&this.detach()),s},detach:function(){return this.isBound()?this.signal.remove(this._listener,this.context):null},isBound:function(){return!!this.signal&&!!this._listener},_destroy:function(){delete this.signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this.isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype.constructor=n;var e=function(){this._bindings=[],this._prevParams=null;var i=this;this.dispatch=function(){e.prototype.dispatch.apply(i,arguments)}};e.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(i,s){if(typeof i!="function")throw new Error("Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",s))},_registerListener:function(i,s,o,l){var c,d=this._indexOfListener(i,o);if(d!==-1){if(c=this._bindings[d],c.isOnce!==s)throw new Error("You cannot add"+(s?"":"Once")+"() then add"+(s?"Once":"")+"() the same listener without removing the relationship first.")}else c=new n(this,i,s,o,l),this._addBinding(c);return this.memorize&&this._prevParams&&c.execute(this._prevParams),c},_addBinding:function(i){var s=this._bindings.length;do s--;while(this._bindings[s]&&i._priority<=this._bindings[s]._priority);this._bindings.splice(s+1,0,i)},_indexOfListener:function(i,s){for(var o,l=this._bindings.length;l--;)if(o=this._bindings[l],o._listener===i&&o.context===s)return l;return-1},has:function(i,s){return this._indexOfListener(i,s)!==-1},add:function(i,s,o){return this.validateListener(i,"add"),this._registerListener(i,!1,s,o)},addOnce:function(i,s,o){return this.validateListener(i,"addOnce"),this._registerListener(i,!0,s,o)},remove:function(i,s){this.validateListener(i,"remove");var o=this._indexOfListener(i,s);return o!==-1&&(this._bindings[o]._destroy(),this._bindings.splice(o,1)),i},removeAll:function(i){typeof i>"u"&&(i=null);for(var s=this._bindings.length;s--;)i?this._bindings[s].context===i&&(this._bindings[s]._destroy(),this._bindings.splice(s,1)):this._bindings[s]._destroy();i||(this._bindings.length=0)},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var i,s=Array.prototype.slice.call(arguments),o=this._bindings.length;if(this.memorize&&(this._prevParams=s),o){i=this._bindings.slice(),this._shouldPropagate=!0;do o--;while(i[o]&&this._shouldPropagate&&i[o].execute(s)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},e.prototype.constructor=e,Zt.Signal=e}(),Zt.AStarFinder=function(n){n=n||{};var e={allowDiagonal:!1,heuristicFilter:null};e=Zt.Tools.merge(e,n),this.allowDiagonal=e.allowDiagonal,this.heuristicFilter=e.heuristicFilter,this.list=new Zt.LinkedList},Zt.AStarFinder.prototype={findPath:function(n,e,i,s){var o,l,c,d,u,f;for(i=i||this.heuristicFilter,s.clearPath(),this.list.clear(),this.list.add(n);this.list.length>0;){if(this.list.sort(this.compare),o=this.list.shift(),o._visited=!0,o===e)return Zt.PathUtil.backtrace(e);for(c=s.getNeighbors(o,this.allowDiagonal,i),u=0,f=c.length;f>u;u++)if(d=c[u],d.walkable&&(l=o._calcCost+s.distance(o,d),!d._visited||l<d._calcCost)){if(d._visited=!0,d._parent=o,d._calcCost=l,d._priority=l+s.distance(e,d),d===e)return Zt.PathUtil.backtrace(e);this.list.add(d)}}return null},compare:function(n,e){return n._priority-e._priority}},Zt.AStarFinder.prototype.constructor=Zt.AStarFinder,Zt.PathUtil={backtrace:function(n){for(var e=[n];n._parent;)n=n._parent,e.push(n);return e.reverse()},biBacktrace:function(n,e){var i=this.backtrace(n),s=this.backtrace(e);return i.concat(s.reverse())},pathLength:function(n){var e,i,s,o,l,c=0;for(e=1;e<n.length;++e)i=n[e-1],s=n[e],o=i[0]-s[0],l=i[1]-s[1],c+=Math.sqrt(o*o+l*l);return c},interpolate:function(n,e,i,s){var o,l,c,d,u,f,A=Math.abs,g=[];for(c=A(i-n),d=A(s-e),o=i>n?1:-1,l=s>e?1:-1,u=c-d;n!==i||e!==s;)g.push([n,e]),f=2*u,f>-d&&(u-=d,n+=o),c>f&&(u+=c,e+=l);return g},expandPath:function(n){var e,i,s,o,l,c,d=[],u=n.length;if(2>u)return d;for(l=0;u-1>l;++l)for(e=n[l],i=n[l+1],s=this.interpolate(e[0],e[1],i[0],i[1]),o=s.length,c=0;o-1>c;++c)d.push(s[c]);return d.push(n[u-1]),d},smoothenPath:function(n,e){var i,s,o,l,c,d,u,f,A,g,y,v,_=e.length,x=e[0][0],b=e[0][1],m=e[_-1][0],S=e[_-1][1];for(i=x,s=b,c=[[i,s]],u=2;_>u;++u){for(A=e[u],o=A[0],l=A[1],g=this.interpolate(i,s,o,l),v=!1,f=1;f<g.length;++f)if(y=g[f],!n.isWalkableAt(y[0],y[1])){v=!0;break}v&&(d=e[u-1],c.push(d),i=d[0],s=d[1])}return c.push([m,S]),c},compressPath:function(n){if(n.length<3)return n;var e,i,s,o,l,c,d=[],u=n[0][0],f=n[0][1],A=n[1][0],g=n[1][1],y=A-u,v=g-f;for(l=Math.sqrt(y*y+v*v),y/=l,v/=l,d.push([u,f]),c=2;c<n.length;c++)e=A,i=g,s=y,o=v,A=n[c][0],g=n[c][1],y=A-e,v=g-i,l=Math.sqrt(y*y+v*v),y/=l,v/=l,(y!==s||v!==o)&&d.push([e,i]);return d.push([A,g]),d}},Zt.Loader={manager:null,imageLoader:null,crossOrigin:!1,init:function(n){this.crossOrigin=n||!1,this.manager=new THREE.LoadingManager(function(){},function(){},function(){console.warn("Error loading images")}),this.imageLoader=new THREE.ImageLoader(this.manager),this.imageLoader.crossOrigin=n},loadTexture:function(n,e,i,s){var o=new THREE.Texture(null,e);return this.imageLoader.load(n,function(l){o.image=l,o.needsUpdate=!0,i&&i(o)},null,function(l){s&&s(l)}),o.sourceFile=n,o}},Zt.MouseCaster=function(n,e,i){this.down=!1,this.rightDown=!1,this.pickedObject=null,this.selectedObject=null,this.allHits=null,this.active=!0,this.shift=!1,this.ctrl=!1,this.wheel=0,this.position=new THREE.Vector3,this.screenPosition=new THREE.Vector2,this.signal=new Zt.Signal,this.group=n,this._camera=e,this._raycaster=new THREE.Raycaster,this._preventDefault=!1,i=i||document,i.addEventListener("mousemove",this._onDocumentMouseMove.bind(this),!1),i.addEventListener("mousedown",this._onDocumentMouseDown.bind(this),!1),i.addEventListener("mouseup",this._onDocumentMouseUp.bind(this),!1),i.addEventListener("mousewheel",this._onMouseWheel.bind(this),!1),i.addEventListener("DOMMouseScroll",this._onMouseWheel.bind(this),!1)},Zt.MouseCaster.OVER="over",Zt.MouseCaster.OUT="out",Zt.MouseCaster.DOWN="down",Zt.MouseCaster.UP="up",Zt.MouseCaster.CLICK="click",Zt.MouseCaster.WHEEL="wheel",Zt.MouseCaster.prototype={update:function(){if(this.active){this._raycaster.setFromCamera(this.screenPosition,this._camera);var n,e,i=this._raycaster.intersectObject(this.group,!0);i.length>0?(n=i[0],e=n.object.userData.structure,this.pickedObject!=e&&(this.pickedObject&&this.signal.dispatch(Zt.MouseCaster.OUT,this.pickedObject),this.pickedObject=e,this.selectedObject=null,this.signal.dispatch(Zt.MouseCaster.OVER,this.pickedObject)),this.position.copy(n.point),this.screenPosition.z=n.distance):(this.pickedObject&&this.signal.dispatch(Zt.MouseCaster.OUT,this.pickedObject),this.pickedObject=null,this.selectedObject=null),this.allHits=i}},preventDefault:function(){this._preventDefault=!0},_onDocumentMouseDown:function(n){return n=n||window.event,n.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.pickedObject&&(this.selectedObject=this.pickedObject),this.shift=n.shiftKey,this.ctrl=n.ctrlKey,this.down=n.which===1,this.rightDown=n.which===3,void this.signal.dispatch(Zt.MouseCaster.DOWN,this.pickedObject))},_onDocumentMouseUp:function(n){return n.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.shift=n.shiftKey,this.ctrl=n.ctrlKey,this.signal.dispatch(Zt.MouseCaster.UP,this.pickedObject),this.selectedObject&&this.pickedObject&&this.selectedObject.uniqueID===this.pickedObject.uniqueID&&this.signal.dispatch(Zt.MouseCaster.CLICK,this.pickedObject),this.down=n.which===1?!1:this.down,void(this.rightDown=n.which===3?!1:this.rightDown))},_onDocumentMouseMove:function(n){n.preventDefault(),this.screenPosition.x=n.clientX/window.innerWidth*2-1,this.screenPosition.y=2*-(n.clientY/window.innerHeight)+1},_onMouseWheel:function(n){if(this.active){n.preventDefault(),n.stopPropagation();var e=0;n.wheelDelta!==void 0?e=n.wheelDelta:n.detail!==void 0&&(e=-n.detail),e>0?this.wheel++:this.wheel--,this.signal.dispatch(Zt.MouseCaster.WHEEL,this.wheel)}}},Zt.MouseCaster.prototype.constructor=Zt.MouseCaster,Zt.Scene=function(n,e){var i={element:document.body,alpha:!0,antialias:!0,clearColor:"#fff",sortObjects:!1,fog:null,light:new THREE.DirectionalLight(16777215),lightPosition:null,cameraType:"PerspectiveCamera",cameraPosition:null,orthoZoom:4},s={minDistance:100,maxDistance:1e3,zoomSpeed:2,noZoom:!1};if(i=Zt.Tools.merge(i,n),typeof e!="boolean"&&(s=Zt.Tools.merge(s,e)),this.renderer=new THREE.WebGLRenderer({alpha:i.alpha,antialias:i.antialias}),this.renderer.setClearColor(i.clearColor,0),this.renderer.sortObjects=i.sortObjects,this.width=window.innerWidth,this.height=window.innerHeight,this.orthoZoom=i.orthoZoom,this.container=new THREE.Scene,this.container.fog=i.fog,this.container.add(new THREE.AmbientLight(14540253)),i.lightPosition||i.light.position.set(-1,1,-1).normalize(),this.container.add(i.light),i.cameraType==="OrthographicCamera"){var o=window.innerWidth/this.orthoZoom,l=window.innerHeight/this.orthoZoom;this.camera=new THREE.OrthographicCamera(o/-2,o/2,l/2,l/-2,1,5e3)}else this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,1,5e3);this.contolled=!!e,this.contolled&&(this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.minDistance=s.minDistance,this.controls.maxDistance=s.maxDistance,this.controls.zoomSpeed=s.zoomSpeed,this.controls.noZoom=s.noZoom),i.cameraPosition&&this.camera.position.copy(i.cameraPosition),window.addEventListener("resize",(function(){if(this.width=window.innerWidth,this.height=window.innerHeight,this.camera.type==="OrthographicCamera"){var c=this.width/this.orthoZoom,d=this.height/this.orthoZoom;this.camera.left=c/-2,this.camera.right=c/2,this.camera.top=d/2,this.camera.bottom=d/-2}else this.camera.aspect=this.width/this.height;this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}).bind(this),!1),this.attachTo(i.element)},Zt.Scene.prototype={attachTo:function(n){n.style.width=this.width+"px",n.style.height=this.height+"px",this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),n.appendChild(this.renderer.domElement)},add:function(n){this.container.add(n)},remove:function(n){this.container.remove(n)},render:function(){this.contolled&&this.controls.update(),this.renderer.render(this.container,this.camera)},updateOrthoZoom:function(){if(this.orthoZoom<=0)return void(this.orthoZoom=0);var n=this.width/this.orthoZoom,e=this.height/this.orthoZoom;this.camera.left=n/-2,this.camera.right=n/2,this.camera.top=e/2,this.camera.bottom=e/-2,this.camera.updateProjectionMatrix()},focusOn:function(n){this.camera.lookAt(n.position)}},Zt.Scene.prototype.constructor=Zt.Scene,Zt.SelectionManager=function(n){this.mouse=n,this.onSelect=new Zt.Signal,this.onDeselect=new Zt.Signal,this.selected=null,this.toggleSelection=!1,this.mouse.signal.add(this.onMouse,this)},Zt.SelectionManager.prototype={select:function(n,e){n&&(e=e||!0,this.selected!==n&&this.clearSelection(e),n.selected?this.toggleSelection&&(e&&this.onDeselect.dispatch(n),n.deselect()):n.select(),this.selected=n,e&&this.onSelect.dispatch(n))},clearSelection:function(n){n=n||!0,this.selected&&(n&&this.onDeselect.dispatch(this.selected),this.selected.deselect()),this.selected=null},onMouse:function(n,e){switch(n){case Zt.MouseCaster.DOWN:e||this.clearSelection();break;case Zt.MouseCaster.CLICK:this.select(e)}}},Zt.SelectionManager.prototype.constructor=Zt.SelectionManager,Zt.Tools={clamp:function(n,e,i){return Math.max(e,Math.min(i,n))},sign:function(n){return n&&n/Math.abs(n)},random:function(n,e){return arguments.length===1?Math.random()*n-.5*n:Math.random()*(e-n)+n},randomInt:function(n,e){return arguments.length===1?Math.random()*n-.5*n|0:Math.random()*(e-n+1)+n|0},normalize:function(n,e,i){return(n-e)/(i-e)},getShortRotation:function(n){return n%=this.TAU,n>this.PI?n-=this.TAU:n<-this.PI&&(n+=this.TAU),n},generateID:function(){return Math.random().toString(36).slice(2)+Date.now()},isPlainObject:function(n){if(typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!Object.prototype.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0},merge:function(n,e){var i=this,s=Array.isArray(e),o=s&&[]||{};return s?(n=n||[],o=o.concat(n),e.forEach(function(l,c){typeof o[c]>"u"?o[c]=l:i.isPlainObject(l)?o[c]=i.merge(n[c],l):n.indexOf(l)===-1&&o.push(l)}),o):(n&&i.isPlainObject(n)&&Object.keys(n).forEach(function(l){o[l]=n[l]}),Object.keys(e).forEach(function(l){e[l]&&i.isPlainObject(e[l])&&n[l]?o[l]=i.merge(n[l],e[l]):o[l]=e[l]}),o)},now:function(){return window.nwf?window.nwf.system.Performance.elapsedTime:window.performance.now()},empty:function(n){for(;n.lastChild;)n.removeChild(n.lastChild)},radixSort:function(n,e,i,s){if(e=e||0,i=i||n.length,s=s||31,!(e>=i-1||0>s)){for(var o=e,l=i,c=1<<s;l>o;)if(n[o]&c){--l;var d=n[o];n[o]=n[l],n[l]=d}else++o;this.radixSort(n,e,l,s-1),this.radixSort(n,l,i,s-1)}},randomizeRGB:function(n,e){var i,s,o=n.split(","),l="rgb(";for(e=this.randomInt(e),i=0;3>i;i++)s=parseInt(o[i])+e,0>s?s=0:s>255&&(s=255),l+=s+",";return l=l.substring(0,l.length-1),l+=")"},getJSON:function(n){var e=new XMLHttpRequest,i=typeof n.cache>"u"?!1:n.cache,s=i?n.url:n.url+"?t="+Math.floor(1e4*Math.random())+Date.now();e.onreadystatechange=function(){if(this.status===200){var o=null;try{o=JSON.parse(this.responseText)}catch{return}return void n.callback.call(n.scope||null,o)}this.status!==0&&console.warn("[Tools.getJSON] Error: "+this.status+" ("+this.statusText+") :: "+n.url)},e.open("GET",s,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.send("")}};var R7=aF.exports,L7={size:5,cellSize:10,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5},autogenerated:!0,cells:[{q:-1,r:0,s:1,h:1,walkable:!0,userData:{}},{q:0,r:-1,s:1,h:1,walkable:!0,userData:{}},{q:0,r:0,s:0,h:1,walkable:!0,userData:{}},{q:1,r:-1,s:0,h:1,walkable:!0,userData:{}},{q:-1,r:1,s:0,h:0,walkable:!0,userData:{}},{q:0,r:1,s:-1,h:0,walkable:!0,userData:{}},{q:1,r:0,s:-1,h:0,walkable:!0,userData:{}}]};const jL=R7,B7=L7;AFRAME.registerPrimitive("a-hexgrid",{defaultComponents:{hexgrid:{}},mappings:{src:"hexgrid.src"}});AFRAME.registerComponent("hexgrid",{dependencies:["material"],schema:{src:{type:"asset"}},init:function(){const n=this.data;n.src?fetch(n.src).then(e=>e.json()).then(e=>this.addMesh(e)):this.addMesh(B7)},addMesh:function(n){const e=new jL.HexGrid;e.fromJSON(n);const i=new jL.Board(e);i.generateTilemap(),this.el.setObject3D("mesh",i.group),this.addMaterial()},addMaterial:function(){const e=(this.el.components.material||{}).material;e&&this.el.object3D.traverse(i=>{i.isMesh&&(i.material=e)})},remove:function(){this.el.removeObject3D("mesh")}});AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}});AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){const n=this.el,e=this.data;let i=n.components.material;const s=new THREE.PlaneGeometry(e.width,e.depth,e.density,e.density);s.mergeVertices(),this.waves=[];for(let o,l=0,c=s.vertices.length;l<c;l++)o=s.vertices[l],this.waves.push({z:o.z,ang:Math.random()*Math.PI*2,amp:e.amplitude+Math.random()*e.amplitudeVariance,speed:(e.speed+Math.random()*e.speedVariance)/1e3});i||(i={},i.material=new THREE.MeshPhongMaterial({color:e.color,transparent:e.opacity<1,opacity:e.opacity,shading:THREE.FlatShading})),this.mesh=new THREE.Mesh(s,i.material),n.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(n,e){if(!e)return;const i=this.mesh.geometry.vertices;for(let s,o,l=0;s=i[l];l++)o=this.waves[l],s.z=o.z+Math.sin(o.ang)*o.amp,o.ang+=o.speed*e;this.mesh.geometry.verticesNeedUpdate=!0}});AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}});AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){const n=this.el,e=this.data;let i=n.components.material;if(!e.path.length){console.error("[a-tube] `path` property expected but not found.");return}const s=new THREE.CatmullRomCurve3(e.path.map(function(l){return l=l.split(" "),new THREE.Vector3(Number(l[0]),Number(l[1]),Number(l[2]))})),o=new THREE.TubeGeometry(s,e.segments,e.radius,e.radialSegments,e.closed);i||(i={},i.material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(o,i.material),this.el.setObject3D("mesh",this.mesh)},update:function(n){Object.keys(n).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}});var xi=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};const D7=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"})),P7=YT(D7);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const j3="156",Eu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},O7=0,QL=1,F7=2,lF=1,k7=2,uh=3,qd=0,La=1,gh=2,bh=0,kg=1,WL=2,KL=3,XL=4,N7=5,pg=100,U7=101,G7=102,YL=103,qL=104,z7=200,H7=201,V7=202,j7=203,cF=204,uF=205,Q7=206,W7=207,K7=208,X7=209,Y7=210,q7=0,$7=1,J7=2,oT=3,Z7=4,e9=5,t9=6,n9=7,Q3=0,i9=1,r9=2,Wd=0,s9=1,o9=2,a9=3,l9=4,c9=5,hF=300,Xg=301,Yg=302,aT=303,lT=304,cb=306,cT=1e3,Ic=1001,uT=1002,Ta=1003,$L=1004,oM=1005,yl=1006,u9=1007,ly=1008,Kd=1009,h9=1010,d9=1011,W3=1012,dF=1013,Fd=1014,kd=1015,qg=1016,fF=1017,pF=1018,gp=1020,f9=1021,Rc=1023,p9=1024,m9=1025,Ap=1026,$g=1027,g9=1028,mF=1029,A9=1030,gF=1031,AF=1033,aM=33776,lM=33777,cM=33778,uM=33779,JL=35840,ZL=35841,eB=35842,tB=35843,v9=36196,nB=37492,iB=37496,rB=37808,sB=37809,oB=37810,aB=37811,lB=37812,cB=37813,uB=37814,hB=37815,dB=37816,fB=37817,pB=37818,mB=37819,gB=37820,AB=37821,hM=36492,vB=36494,yB=36495,y9=36283,xB=36284,EB=36285,_B=36286,vF=3e3,vp=3001,x9=3200,E9=3201,yF=0,_9=1,yp="",ms="srgb",Tu="srgb-linear",ub="display-p3",dM=7680,b9=519,w9=512,C9=513,M9=514,S9=515,T9=516,I9=517,R9=518,L9=519,hT=35044,bB="300 es",dT=1035,yh=2e3,S_=2001;class Uc{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(i)===-1&&s[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const l=o.indexOf(i);l!==-1&&o.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const s=this._listeners[e.type];if(s!==void 0){e.target=this;const o=s.slice(0);for(let l=0,c=o.length;l<c;l++)o[l].call(this,e);e.target=null}}}const na=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wB=1234567;const Fv=Math.PI/180,cy=180/Math.PI;function wh(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(na[n&255]+na[n>>8&255]+na[n>>16&255]+na[n>>24&255]+"-"+na[e&255]+na[e>>8&255]+"-"+na[e>>16&15|64]+na[e>>24&255]+"-"+na[i&63|128]+na[i>>8&255]+"-"+na[i>>16&255]+na[i>>24&255]+na[s&255]+na[s>>8&255]+na[s>>16&255]+na[s>>24&255]).toLowerCase()}function To(n,e,i){return Math.max(e,Math.min(i,n))}function K3(n,e){return(n%e+e)%e}function B9(n,e,i,s,o){return s+(n-e)*(o-s)/(i-e)}function D9(n,e,i){return n!==e?(i-n)/(e-n):0}function kv(n,e,i){return(1-i)*n+i*e}function P9(n,e,i,s){return kv(n,e,1-Math.exp(-i*s))}function O9(n,e=1){return e-Math.abs(K3(n,e*2)-e)}function F9(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*(3-2*n))}function k9(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*n*(n*(n*6-15)+10))}function N9(n,e){return n+Math.floor(Math.random()*(e-n+1))}function U9(n,e){return n+Math.random()*(e-n)}function G9(n){return n*(.5-Math.random())}function z9(n){n!==void 0&&(wB=n);let e=wB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function H9(n){return n*Fv}function V9(n){return n*cy}function fT(n){return(n&n-1)===0&&n!==0}function j9(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function T_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Q9(n,e,i,s,o){const l=Math.cos,c=Math.sin,d=l(i/2),u=c(i/2),f=l((e+s)/2),A=c((e+s)/2),g=l((e-s)/2),y=c((e-s)/2),v=l((s-e)/2),_=c((s-e)/2);switch(o){case"XYX":n.set(d*A,u*g,u*y,d*f);break;case"YZY":n.set(u*y,d*A,u*g,d*f);break;case"ZXZ":n.set(u*g,u*y,d*A,d*f);break;case"XZX":n.set(d*A,u*_,u*v,d*f);break;case"YXY":n.set(u*v,d*A,u*_,d*f);break;case"ZYZ":n.set(u*_,u*v,d*A,d*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function wu(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function rs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const pT={DEG2RAD:Fv,RAD2DEG:cy,generateUUID:wh,clamp:To,euclideanModulo:K3,mapLinear:B9,inverseLerp:D9,lerp:kv,damp:P9,pingpong:O9,smoothstep:F9,smootherstep:k9,randInt:N9,randFloat:U9,randFloatSpread:G9,seededRandom:z9,degToRad:H9,radToDeg:V9,isPowerOfTwo:fT,ceilPowerOfTwo:j9,floorPowerOfTwo:T_,setQuaternionFromProperEuler:Q9,normalize:rs,denormalize:wu};class jn{constructor(e=0,i=0){jn.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,i){return this.x=e,this.y=i,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const i=this.x,s=this.y,o=e.elements;return this.x=o[0]*i+o[3]*s+o[6],this.y=o[1]*i+o[4]*s+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this}clampLength(e,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(i,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const s=this.dot(e)/i;return Math.acos(To(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,s=this.y-e.y;return i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this}lerpVectors(e,i,s){return this.x=e.x+(i.x-e.x)*s,this.y=e.y+(i.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this}rotateAround(e,i){const s=Math.cos(i),o=Math.sin(i),l=this.x-e.x,c=this.y-e.y;return this.x=l*s-c*o+e.x,this.y=l*o+c*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tr{constructor(e,i,s,o,l,c,d,u,f){Tr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,i,s,o,l,c,d,u,f)}set(e,i,s,o,l,c,d,u,f){const A=this.elements;return A[0]=e,A[1]=o,A[2]=d,A[3]=i,A[4]=l,A[5]=u,A[6]=s,A[7]=c,A[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const i=this.elements,s=e.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],this}extractBasis(e,i,s){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const s=e.elements,o=i.elements,l=this.elements,c=s[0],d=s[3],u=s[6],f=s[1],A=s[4],g=s[7],y=s[2],v=s[5],_=s[8],x=o[0],b=o[3],m=o[6],S=o[1],C=o[4],M=o[7],T=o[2],N=o[5],P=o[8];return l[0]=c*x+d*S+u*T,l[3]=c*b+d*C+u*N,l[6]=c*m+d*M+u*P,l[1]=f*x+A*S+g*T,l[4]=f*b+A*C+g*N,l[7]=f*m+A*M+g*P,l[2]=y*x+v*S+_*T,l[5]=y*b+v*C+_*N,l[8]=y*m+v*M+_*P,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){const e=this.elements,i=e[0],s=e[1],o=e[2],l=e[3],c=e[4],d=e[5],u=e[6],f=e[7],A=e[8];return i*c*A-i*d*f-s*l*A+s*d*u+o*l*f-o*c*u}invert(){const e=this.elements,i=e[0],s=e[1],o=e[2],l=e[3],c=e[4],d=e[5],u=e[6],f=e[7],A=e[8],g=A*c-d*f,y=d*u-A*l,v=f*l-c*u,_=i*g+s*y+o*v;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/_;return e[0]=g*x,e[1]=(o*f-A*s)*x,e[2]=(d*s-o*c)*x,e[3]=y*x,e[4]=(A*i-o*u)*x,e[5]=(o*l-d*i)*x,e[6]=v*x,e[7]=(s*u-f*i)*x,e[8]=(c*i-s*l)*x,this}transpose(){let e;const i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,s,o,l,c,d){const u=Math.cos(l),f=Math.sin(l);return this.set(s*u,s*f,-s*(u*c+f*d)+c+e,-o*f,o*u,-o*(-f*c+u*d)+d+i,0,0,1),this}scale(e,i){return this.premultiply(fM.makeScale(e,i)),this}rotate(e){return this.premultiply(fM.makeRotation(-e)),this}translate(e,i){return this.premultiply(fM.makeTranslation(e,i)),this}makeTranslation(e,i){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){const i=Math.cos(e),s=Math.sin(e);return this.set(i,-s,0,s,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){const i=this.elements,s=e.elements;for(let o=0;o<9;o++)if(i[o]!==s[o])return!1;return!0}fromArray(e,i=0){for(let s=0;s<9;s++)this.elements[s]=e[s+i];return this}toArray(e=[],i=0){const s=this.elements;return e[i]=s[0],e[i+1]=s[1],e[i+2]=s[2],e[i+3]=s[3],e[i+4]=s[4],e[i+5]=s[5],e[i+6]=s[6],e[i+7]=s[7],e[i+8]=s[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fM=new Tr;function xF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function uy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function W9(){const n=uy("canvas");return n.style.display="block",n}const CB={};function Nv(n){n in CB||(CB[n]=!0,console.warn(n))}function Ng(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function pM(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const K9=new Tr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),X9=new Tr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Y9(n){return n.convertSRGBToLinear().applyMatrix3(X9)}function q9(n){return n.applyMatrix3(K9).convertLinearToSRGB()}const $9={[Tu]:n=>n,[ms]:n=>n.convertSRGBToLinear(),[ub]:Y9},J9={[Tu]:n=>n,[ms]:n=>n.convertLinearToSRGB(),[ub]:q9},yc={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Tu},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,i){if(this.enabled===!1||e===i||!e||!i)return n;const s=$9[e],o=J9[i];if(s===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${i}".`);return o(s(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Vm;class EF{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Vm===void 0&&(Vm=uy("canvas")),Vm.width=e.width,Vm.height=e.height;const s=Vm.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),i=Vm}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const i=uy("canvas");i.width=e.width,i.height=e.height;const s=i.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const o=s.getImageData(0,0,e.width,e.height),l=o.data;for(let c=0;c<l.length;c++)l[c]=Ng(l[c]/255)*255;return s.putImageData(o,0,0),i}else if(e.data){const i=e.data.slice(0);for(let s=0;s<i.length;s++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[s]=Math.floor(Ng(i[s]/255)*255):i[s]=Ng(i[s]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Z9=0;class _F{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Z9++}),this.uuid=wh(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const s={uuid:this.uuid,url:""},o=this.data;if(o!==null){let l;if(Array.isArray(o)){l=[];for(let c=0,d=o.length;c<d;c++)o[c].isDataTexture?l.push(mM(o[c].image)):l.push(mM(o[c]))}else l=mM(o);s.url=l}return i||(e.images[this.uuid]=s),s}}function mM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?EF.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let eG=0;class Ba extends Uc{constructor(e=Ba.DEFAULT_IMAGE,i=Ba.DEFAULT_MAPPING,s=Ic,o=Ic,l=yl,c=ly,d=Rc,u=Kd,f=Ba.DEFAULT_ANISOTROPY,A=yp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:eG++}),this.uuid=wh(),this.name="",this.source=new _F(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=s,this.wrapT=o,this.magFilter=l,this.minFilter=c,this.anisotropy=f,this.format=d,this.internalFormat=null,this.type=u,this.offset=new jn(0,0),this.repeat=new jn(1,1),this.center=new jn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof A=="string"?this.colorSpace=A:(Nv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=A===vp?ms:yp),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const s={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),i||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hF)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cT:e.x=e.x-Math.floor(e.x);break;case Ic:e.x=e.x<0?0:1;break;case uT:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case cT:e.y=e.y-Math.floor(e.y);break;case Ic:e.y=e.y<0?0:1;break;case uT:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Nv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ms?vp:vF}set encoding(e){Nv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===vp?ms:yp}}Ba.DEFAULT_IMAGE=null;Ba.DEFAULT_MAPPING=hF;Ba.DEFAULT_ANISOTROPY=1;class Io{constructor(e=0,i=0,s=0,o=1){Io.prototype.isVector4=!0,this.x=e,this.y=i,this.z=s,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,s,o){return this.x=e,this.y=i,this.z=s,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const i=this.x,s=this.y,o=this.z,l=this.w,c=e.elements;return this.x=c[0]*i+c[4]*s+c[8]*o+c[12]*l,this.y=c[1]*i+c[5]*s+c[9]*o+c[13]*l,this.z=c[2]*i+c[6]*s+c[10]*o+c[14]*l,this.w=c[3]*i+c[7]*s+c[11]*o+c[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,s,o,l;const u=e.elements,f=u[0],A=u[4],g=u[8],y=u[1],v=u[5],_=u[9],x=u[2],b=u[6],m=u[10];if(Math.abs(A-y)<.01&&Math.abs(g-x)<.01&&Math.abs(_-b)<.01){if(Math.abs(A+y)<.1&&Math.abs(g+x)<.1&&Math.abs(_+b)<.1&&Math.abs(f+v+m-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const C=(f+1)/2,M=(v+1)/2,T=(m+1)/2,N=(A+y)/4,P=(g+x)/4,k=(_+b)/4;return C>M&&C>T?C<.01?(s=0,o=.707106781,l=.707106781):(s=Math.sqrt(C),o=N/s,l=P/s):M>T?M<.01?(s=.707106781,o=0,l=.707106781):(o=Math.sqrt(M),s=N/o,l=k/o):T<.01?(s=.707106781,o=.707106781,l=0):(l=Math.sqrt(T),s=P/l,o=k/l),this.set(s,o,l,i),this}let S=Math.sqrt((b-_)*(b-_)+(g-x)*(g-x)+(y-A)*(y-A));return Math.abs(S)<.001&&(S=1),this.x=(b-_)/S,this.y=(g-x)/S,this.z=(y-A)/S,this.w=Math.acos((f+v+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this.w=Math.max(e.w,Math.min(i.w,this.w)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this.w=Math.max(e,Math.min(i,this.w)),this}clampLength(e,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(i,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,s){return this.x=e.x+(i.x-e.x)*s,this.y=e.y+(i.y-e.y)*s,this.z=e.z+(i.z-e.z)*s,this.w=e.w+(i.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tG extends Uc{constructor(e=1,i=1,s={}){super(),this.isRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new Io(0,0,e,i),this.scissorTest=!1,this.viewport=new Io(0,0,e,i);const o={width:e,height:i,depth:1};s.encoding!==void 0&&(Nv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),s.colorSpace=s.encoding===vp?ms:yp),this.texture=new Ba(o,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.internalFormat=s.internalFormat!==void 0?s.internalFormat:null,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:yl,this.depthBuffer=s.depthBuffer!==void 0?s.depthBuffer:!0,this.stencilBuffer=s.stencilBuffer!==void 0?s.stencilBuffer:!1,this.depthTexture=s.depthTexture!==void 0?s.depthTexture:null,this.samples=s.samples!==void 0?s.samples:0}setSize(e,i,s=1){(this.width!==e||this.height!==i||this.depth!==s)&&(this.width=e,this.height=i,this.depth=s,this.texture.image.width=e,this.texture.image.height=i,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const i=Object.assign({},e.texture.image);return this.texture.source=new _F(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $d extends tG{constructor(e=1,i=1,s={}){super(e,i,s),this.isWebGLRenderTarget=!0}}class bF extends Ba{constructor(e=null,i=1,s=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:s,depth:o},this.magFilter=Ta,this.minFilter=Ta,this.wrapR=Ic,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nG extends Ba{constructor(e=null,i=1,s=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:s,depth:o},this.magFilter=Ta,this.minFilter=Ta,this.wrapR=Ic,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nc{constructor(e=0,i=0,s=0,o=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=s,this._w=o}static slerpFlat(e,i,s,o,l,c,d){let u=s[o+0],f=s[o+1],A=s[o+2],g=s[o+3];const y=l[c+0],v=l[c+1],_=l[c+2],x=l[c+3];if(d===0){e[i+0]=u,e[i+1]=f,e[i+2]=A,e[i+3]=g;return}if(d===1){e[i+0]=y,e[i+1]=v,e[i+2]=_,e[i+3]=x;return}if(g!==x||u!==y||f!==v||A!==_){let b=1-d;const m=u*y+f*v+A*_+g*x,S=m>=0?1:-1,C=1-m*m;if(C>Number.EPSILON){const T=Math.sqrt(C),N=Math.atan2(T,m*S);b=Math.sin(b*N)/T,d=Math.sin(d*N)/T}const M=d*S;if(u=u*b+y*M,f=f*b+v*M,A=A*b+_*M,g=g*b+x*M,b===1-d){const T=1/Math.sqrt(u*u+f*f+A*A+g*g);u*=T,f*=T,A*=T,g*=T}}e[i]=u,e[i+1]=f,e[i+2]=A,e[i+3]=g}static multiplyQuaternionsFlat(e,i,s,o,l,c){const d=s[o],u=s[o+1],f=s[o+2],A=s[o+3],g=l[c],y=l[c+1],v=l[c+2],_=l[c+3];return e[i]=d*_+A*g+u*v-f*y,e[i+1]=u*_+A*y+f*g-d*v,e[i+2]=f*_+A*v+d*y-u*g,e[i+3]=A*_-d*g-u*y-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,s,o){return this._x=e,this._y=i,this._z=s,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i){const s=e._x,o=e._y,l=e._z,c=e._order,d=Math.cos,u=Math.sin,f=d(s/2),A=d(o/2),g=d(l/2),y=u(s/2),v=u(o/2),_=u(l/2);switch(c){case"XYZ":this._x=y*A*g+f*v*_,this._y=f*v*g-y*A*_,this._z=f*A*_+y*v*g,this._w=f*A*g-y*v*_;break;case"YXZ":this._x=y*A*g+f*v*_,this._y=f*v*g-y*A*_,this._z=f*A*_-y*v*g,this._w=f*A*g+y*v*_;break;case"ZXY":this._x=y*A*g-f*v*_,this._y=f*v*g+y*A*_,this._z=f*A*_+y*v*g,this._w=f*A*g-y*v*_;break;case"ZYX":this._x=y*A*g-f*v*_,this._y=f*v*g+y*A*_,this._z=f*A*_-y*v*g,this._w=f*A*g+y*v*_;break;case"YZX":this._x=y*A*g+f*v*_,this._y=f*v*g+y*A*_,this._z=f*A*_-y*v*g,this._w=f*A*g-y*v*_;break;case"XZY":this._x=y*A*g-f*v*_,this._y=f*v*g-y*A*_,this._z=f*A*_+y*v*g,this._w=f*A*g+y*v*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,i){const s=i/2,o=Math.sin(s);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const i=e.elements,s=i[0],o=i[4],l=i[8],c=i[1],d=i[5],u=i[9],f=i[2],A=i[6],g=i[10],y=s+d+g;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(A-u)*v,this._y=(l-f)*v,this._z=(c-o)*v}else if(s>d&&s>g){const v=2*Math.sqrt(1+s-d-g);this._w=(A-u)/v,this._x=.25*v,this._y=(o+c)/v,this._z=(l+f)/v}else if(d>g){const v=2*Math.sqrt(1+d-s-g);this._w=(l-f)/v,this._x=(o+c)/v,this._y=.25*v,this._z=(u+A)/v}else{const v=2*Math.sqrt(1+g-s-d);this._w=(c-o)/v,this._x=(l+f)/v,this._y=(u+A)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let s=e.dot(i)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(To(this.dot(e),-1,1)))}rotateTowards(e,i){const s=this.angleTo(e);if(s===0)return this;const o=Math.min(1,i/s);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){const s=e._x,o=e._y,l=e._z,c=e._w,d=i._x,u=i._y,f=i._z,A=i._w;return this._x=s*A+c*d+o*f-l*u,this._y=o*A+c*u+l*d-s*f,this._z=l*A+c*f+s*u-o*d,this._w=c*A-s*d-o*u-l*f,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);const s=this._x,o=this._y,l=this._z,c=this._w;let d=c*e._w+s*e._x+o*e._y+l*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=c,this._x=s,this._y=o,this._z=l,this;const u=1-d*d;if(u<=Number.EPSILON){const v=1-i;return this._w=v*c+i*this._w,this._x=v*s+i*this._x,this._y=v*o+i*this._y,this._z=v*l+i*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),A=Math.atan2(f,d),g=Math.sin((1-i)*A)/f,y=Math.sin(i*A)/f;return this._w=c*g+this._w*y,this._x=s*g+this._x*y,this._y=o*g+this._y*y,this._z=l*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,i,s){return this.copy(e).slerp(i,s)}random(){const e=Math.random(),i=Math.sqrt(1-e),s=Math.sqrt(e),o=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(i*Math.cos(o),s*Math.sin(l),s*Math.cos(l),i*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ht{constructor(e=0,i=0,s=0){ht.prototype.isVector3=!0,this.x=e,this.y=i,this.z=s}set(e,i,s){return s===void 0&&(s=this.z),this.x=e,this.y=i,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(MB.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(MB.setFromAxisAngle(e,i))}applyMatrix3(e){const i=this.x,s=this.y,o=this.z,l=e.elements;return this.x=l[0]*i+l[3]*s+l[6]*o,this.y=l[1]*i+l[4]*s+l[7]*o,this.z=l[2]*i+l[5]*s+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const i=this.x,s=this.y,o=this.z,l=e.elements,c=1/(l[3]*i+l[7]*s+l[11]*o+l[15]);return this.x=(l[0]*i+l[4]*s+l[8]*o+l[12])*c,this.y=(l[1]*i+l[5]*s+l[9]*o+l[13])*c,this.z=(l[2]*i+l[6]*s+l[10]*o+l[14])*c,this}applyQuaternion(e){const i=this.x,s=this.y,o=this.z,l=e.x,c=e.y,d=e.z,u=e.w,f=u*i+c*o-d*s,A=u*s+d*i-l*o,g=u*o+l*s-c*i,y=-l*i-c*s-d*o;return this.x=f*u+y*-l+A*-d-g*-c,this.y=A*u+y*-c+g*-l-f*-d,this.z=g*u+y*-d+f*-c-A*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const i=this.x,s=this.y,o=this.z,l=e.elements;return this.x=l[0]*i+l[4]*s+l[8]*o,this.y=l[1]*i+l[5]*s+l[9]*o,this.z=l[2]*i+l[6]*s+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this}clampLength(e,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(i,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,s){return this.x=e.x+(i.x-e.x)*s,this.y=e.y+(i.y-e.y)*s,this.z=e.z+(i.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){const s=e.x,o=e.y,l=e.z,c=i.x,d=i.y,u=i.z;return this.x=o*u-l*d,this.y=l*c-s*u,this.z=s*d-o*c,this}projectOnVector(e){const i=e.lengthSq();if(i===0)return this.set(0,0,0);const s=e.dot(this)/i;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return gM.copy(this).projectOnVector(e),this.sub(gM)}reflect(e){return this.sub(gM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const s=this.dot(e)/i;return Math.acos(To(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,s=this.y-e.y,o=this.z-e.z;return i*i+s*s+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,s){const o=Math.sin(i)*e;return this.x=o*Math.sin(s),this.y=Math.cos(i)*e,this.z=o*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,s){return this.x=e*Math.sin(i),this.y=s,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){const i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){const i=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=s,this.z=o,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(i),this.y=s*Math.sin(i),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gM=new ht,MB=new Nc;class Ip{constructor(e=new ht(1/0,1/0,1/0),i=new ht(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){this.makeEmpty();for(let i=0,s=e.length;i<s;i+=3)this.expandByPoint(th.fromArray(e,i));return this}setFromBufferAttribute(e){this.makeEmpty();for(let i=0,s=e.count;i<s;i++)this.expandByPoint(th.fromBufferAttribute(e,i));return this}setFromPoints(e){this.makeEmpty();for(let i=0,s=e.length;i<s;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const s=th.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),jm.copy(e.boundingBox),jm.applyMatrix4(e.matrixWorld),this.union(jm);else{const o=e.geometry;if(o!==void 0)if(i&&o.attributes!==void 0&&o.attributes.position!==void 0){const l=o.attributes.position;for(let c=0,d=l.count;c<d;c++)th.fromBufferAttribute(l,c).applyMatrix4(e.matrixWorld),this.expandByPoint(th)}else o.boundingBox===null&&o.computeBoundingBox(),jm.copy(o.boundingBox),jm.applyMatrix4(e.matrixWorld),this.union(jm)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],i);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,th),th.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,s;return e.normal.x>0?(i=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),i<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($A),qx.subVectors(this.max,$A),Qm.subVectors(e.a,$A),Wm.subVectors(e.b,$A),Km.subVectors(e.c,$A),yd.subVectors(Wm,Qm),xd.subVectors(Km,Wm),Zf.subVectors(Qm,Km);let i=[0,-yd.z,yd.y,0,-xd.z,xd.y,0,-Zf.z,Zf.y,yd.z,0,-yd.x,xd.z,0,-xd.x,Zf.z,0,-Zf.x,-yd.y,yd.x,0,-xd.y,xd.x,0,-Zf.y,Zf.x,0];return!AM(i,Qm,Wm,Km,qx)||(i=[1,0,0,0,1,0,0,0,1],!AM(i,Qm,Wm,Km,qx))?!1:($x.crossVectors(yd,xd),i=[$x.x,$x.y,$x.z],AM(i,Qm,Wm,Km,qx))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,th).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(th).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(eh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),eh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),eh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),eh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),eh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),eh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),eh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),eh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(eh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eh=[new ht,new ht,new ht,new ht,new ht,new ht,new ht,new ht],th=new ht,jm=new Ip,Qm=new ht,Wm=new ht,Km=new ht,yd=new ht,xd=new ht,Zf=new ht,$A=new ht,qx=new ht,$x=new ht,ep=new ht;function AM(n,e,i,s,o){for(let l=0,c=n.length-3;l<=c;l+=3){ep.fromArray(n,l);const d=o.x*Math.abs(ep.x)+o.y*Math.abs(ep.y)+o.z*Math.abs(ep.z),u=e.dot(ep),f=i.dot(ep),A=s.dot(ep);if(Math.max(-Math.max(u,f,A),Math.min(u,f,A))>d)return!1}return!0}const iG=new Ip,JA=new ht,vM=new ht;class hb{constructor(e=new ht,i=-1){this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){const s=this.center;i!==void 0?s.copy(i):iG.setFromPoints(e).getCenter(s);let o=0;for(let l=0,c=e.length;l<c;l++)o=Math.max(o,s.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){const s=this.center.distanceToSquared(e);return i.copy(e),s>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;JA.subVectors(e,this.center);const i=JA.lengthSq();if(i>this.radius*this.radius){const s=Math.sqrt(i),o=(s-this.radius)*.5;this.center.addScaledVector(JA,o/s),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(JA.copy(e.center).add(vM)),this.expandByPoint(JA.copy(e.center).sub(vM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const nh=new ht,yM=new ht,Jx=new ht,Ed=new ht,xM=new ht,Zx=new ht,EM=new ht;class db{constructor(e=new ht,i=new ht(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,nh)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);const s=i.dot(this.direction);return s<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const i=nh.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(nh.copy(this.origin).addScaledVector(this.direction,i),nh.distanceToSquared(e))}distanceSqToSegment(e,i,s,o){yM.copy(e).add(i).multiplyScalar(.5),Jx.copy(i).sub(e).normalize(),Ed.copy(this.origin).sub(yM);const l=e.distanceTo(i)*.5,c=-this.direction.dot(Jx),d=Ed.dot(this.direction),u=-Ed.dot(Jx),f=Ed.lengthSq(),A=Math.abs(1-c*c);let g,y,v,_;if(A>0)if(g=c*u-d,y=c*d-u,_=l*A,g>=0)if(y>=-_)if(y<=_){const x=1/A;g*=x,y*=x,v=g*(g+c*y+2*d)+y*(c*g+y+2*u)+f}else y=l,g=Math.max(0,-(c*y+d)),v=-g*g+y*(y+2*u)+f;else y=-l,g=Math.max(0,-(c*y+d)),v=-g*g+y*(y+2*u)+f;else y<=-_?(g=Math.max(0,-(-c*l+d)),y=g>0?-l:Math.min(Math.max(-l,-u),l),v=-g*g+y*(y+2*u)+f):y<=_?(g=0,y=Math.min(Math.max(-l,-u),l),v=y*(y+2*u)+f):(g=Math.max(0,-(c*l+d)),y=g>0?l:Math.min(Math.max(-l,-u),l),v=-g*g+y*(y+2*u)+f);else y=c>0?-l:l,g=Math.max(0,-(c*y+d)),v=-g*g+y*(y+2*u)+f;return s&&s.copy(this.origin).addScaledVector(this.direction,g),o&&o.copy(yM).addScaledVector(Jx,y),v}intersectSphere(e,i){nh.subVectors(e.center,this.origin);const s=nh.dot(this.direction),o=nh.dot(nh)-s*s,l=e.radius*e.radius;if(o>l)return null;const c=Math.sqrt(l-o),d=s-c,u=s+c;return u<0?null:d<0?this.at(u,i):this.at(d,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/i;return s>=0?s:null}intersectPlane(e,i){const s=this.distanceToPlane(e);return s===null?null:this.at(s,i)}intersectsPlane(e){const i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let s,o,l,c,d,u;const f=1/this.direction.x,A=1/this.direction.y,g=1/this.direction.z,y=this.origin;return f>=0?(s=(e.min.x-y.x)*f,o=(e.max.x-y.x)*f):(s=(e.max.x-y.x)*f,o=(e.min.x-y.x)*f),A>=0?(l=(e.min.y-y.y)*A,c=(e.max.y-y.y)*A):(l=(e.max.y-y.y)*A,c=(e.min.y-y.y)*A),s>c||l>o||((l>s||isNaN(s))&&(s=l),(c<o||isNaN(o))&&(o=c),g>=0?(d=(e.min.z-y.z)*g,u=(e.max.z-y.z)*g):(d=(e.max.z-y.z)*g,u=(e.min.z-y.z)*g),s>u||d>o)||((d>s||s!==s)&&(s=d),(u<o||o!==o)&&(o=u),o<0)?null:this.at(s>=0?s:o,i)}intersectsBox(e){return this.intersectBox(e,nh)!==null}intersectTriangle(e,i,s,o,l){xM.subVectors(i,e),Zx.subVectors(s,e),EM.crossVectors(xM,Zx);let c=this.direction.dot(EM),d;if(c>0){if(o)return null;d=1}else if(c<0)d=-1,c=-c;else return null;Ed.subVectors(this.origin,e);const u=d*this.direction.dot(Zx.crossVectors(Ed,Zx));if(u<0)return null;const f=d*this.direction.dot(xM.cross(Ed));if(f<0||u+f>c)return null;const A=-d*Ed.dot(EM);return A<0?null:this.at(A/c,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Os{constructor(e,i,s,o,l,c,d,u,f,A,g,y,v,_,x,b){Os.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,i,s,o,l,c,d,u,f,A,g,y,v,_,x,b)}set(e,i,s,o,l,c,d,u,f,A,g,y,v,_,x,b){const m=this.elements;return m[0]=e,m[4]=i,m[8]=s,m[12]=o,m[1]=l,m[5]=c,m[9]=d,m[13]=u,m[2]=f,m[6]=A,m[10]=g,m[14]=y,m[3]=v,m[7]=_,m[11]=x,m[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Os().fromArray(this.elements)}copy(e){const i=this.elements,s=e.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],this}copyPosition(e){const i=this.elements,s=e.elements;return i[12]=s[12],i[13]=s[13],i[14]=s[14],this}setFromMatrix3(e){const i=e.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(e,i,s){return e.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,i,s){return this.set(e.x,i.x,s.x,0,e.y,i.y,s.y,0,e.z,i.z,s.z,0,0,0,0,1),this}extractRotation(e){const i=this.elements,s=e.elements,o=1/Xm.setFromMatrixColumn(e,0).length(),l=1/Xm.setFromMatrixColumn(e,1).length(),c=1/Xm.setFromMatrixColumn(e,2).length();return i[0]=s[0]*o,i[1]=s[1]*o,i[2]=s[2]*o,i[3]=0,i[4]=s[4]*l,i[5]=s[5]*l,i[6]=s[6]*l,i[7]=0,i[8]=s[8]*c,i[9]=s[9]*c,i[10]=s[10]*c,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(e){const i=this.elements,s=e.x,o=e.y,l=e.z,c=Math.cos(s),d=Math.sin(s),u=Math.cos(o),f=Math.sin(o),A=Math.cos(l),g=Math.sin(l);if(e.order==="XYZ"){const y=c*A,v=c*g,_=d*A,x=d*g;i[0]=u*A,i[4]=-u*g,i[8]=f,i[1]=v+_*f,i[5]=y-x*f,i[9]=-d*u,i[2]=x-y*f,i[6]=_+v*f,i[10]=c*u}else if(e.order==="YXZ"){const y=u*A,v=u*g,_=f*A,x=f*g;i[0]=y+x*d,i[4]=_*d-v,i[8]=c*f,i[1]=c*g,i[5]=c*A,i[9]=-d,i[2]=v*d-_,i[6]=x+y*d,i[10]=c*u}else if(e.order==="ZXY"){const y=u*A,v=u*g,_=f*A,x=f*g;i[0]=y-x*d,i[4]=-c*g,i[8]=_+v*d,i[1]=v+_*d,i[5]=c*A,i[9]=x-y*d,i[2]=-c*f,i[6]=d,i[10]=c*u}else if(e.order==="ZYX"){const y=c*A,v=c*g,_=d*A,x=d*g;i[0]=u*A,i[4]=_*f-v,i[8]=y*f+x,i[1]=u*g,i[5]=x*f+y,i[9]=v*f-_,i[2]=-f,i[6]=d*u,i[10]=c*u}else if(e.order==="YZX"){const y=c*u,v=c*f,_=d*u,x=d*f;i[0]=u*A,i[4]=x-y*g,i[8]=_*g+v,i[1]=g,i[5]=c*A,i[9]=-d*A,i[2]=-f*A,i[6]=v*g+_,i[10]=y-x*g}else if(e.order==="XZY"){const y=c*u,v=c*f,_=d*u,x=d*f;i[0]=u*A,i[4]=-g,i[8]=f*A,i[1]=y*g+x,i[5]=c*A,i[9]=v*g-_,i[2]=_*g-v,i[6]=d*A,i[10]=x*g+y}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rG,e,sG)}lookAt(e,i,s){const o=this.elements;return ml.subVectors(e,i),ml.lengthSq()===0&&(ml.z=1),ml.normalize(),_d.crossVectors(s,ml),_d.lengthSq()===0&&(Math.abs(s.z)===1?ml.x+=1e-4:ml.z+=1e-4,ml.normalize(),_d.crossVectors(s,ml)),_d.normalize(),eE.crossVectors(ml,_d),o[0]=_d.x,o[4]=eE.x,o[8]=ml.x,o[1]=_d.y,o[5]=eE.y,o[9]=ml.y,o[2]=_d.z,o[6]=eE.z,o[10]=ml.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const s=e.elements,o=i.elements,l=this.elements,c=s[0],d=s[4],u=s[8],f=s[12],A=s[1],g=s[5],y=s[9],v=s[13],_=s[2],x=s[6],b=s[10],m=s[14],S=s[3],C=s[7],M=s[11],T=s[15],N=o[0],P=o[4],k=o[8],D=o[12],z=o[1],Y=o[5],ne=o[9],O=o[13],F=o[2],U=o[6],G=o[10],V=o[14],K=o[3],W=o[7],J=o[11],ee=o[15];return l[0]=c*N+d*z+u*F+f*K,l[4]=c*P+d*Y+u*U+f*W,l[8]=c*k+d*ne+u*G+f*J,l[12]=c*D+d*O+u*V+f*ee,l[1]=A*N+g*z+y*F+v*K,l[5]=A*P+g*Y+y*U+v*W,l[9]=A*k+g*ne+y*G+v*J,l[13]=A*D+g*O+y*V+v*ee,l[2]=_*N+x*z+b*F+m*K,l[6]=_*P+x*Y+b*U+m*W,l[10]=_*k+x*ne+b*G+m*J,l[14]=_*D+x*O+b*V+m*ee,l[3]=S*N+C*z+M*F+T*K,l[7]=S*P+C*Y+M*U+T*W,l[11]=S*k+C*ne+M*G+T*J,l[15]=S*D+C*O+M*V+T*ee,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[4]*=e,i[8]*=e,i[12]*=e,i[1]*=e,i[5]*=e,i[9]*=e,i[13]*=e,i[2]*=e,i[6]*=e,i[10]*=e,i[14]*=e,i[3]*=e,i[7]*=e,i[11]*=e,i[15]*=e,this}determinant(){const e=this.elements,i=e[0],s=e[4],o=e[8],l=e[12],c=e[1],d=e[5],u=e[9],f=e[13],A=e[2],g=e[6],y=e[10],v=e[14],_=e[3],x=e[7],b=e[11],m=e[15];return _*(+l*u*g-o*f*g-l*d*y+s*f*y+o*d*v-s*u*v)+x*(+i*u*v-i*f*y+l*c*y-o*c*v+o*f*A-l*u*A)+b*(+i*f*g-i*d*v-l*c*g+s*c*v+l*d*A-s*f*A)+m*(-o*d*A-i*u*g+i*d*y+o*c*g-s*c*y+s*u*A)}transpose(){const e=this.elements;let i;return i=e[1],e[1]=e[4],e[4]=i,i=e[2],e[2]=e[8],e[8]=i,i=e[6],e[6]=e[9],e[9]=i,i=e[3],e[3]=e[12],e[12]=i,i=e[7],e[7]=e[13],e[13]=i,i=e[11],e[11]=e[14],e[14]=i,this}setPosition(e,i,s){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=i,o[14]=s),this}invert(){const e=this.elements,i=e[0],s=e[1],o=e[2],l=e[3],c=e[4],d=e[5],u=e[6],f=e[7],A=e[8],g=e[9],y=e[10],v=e[11],_=e[12],x=e[13],b=e[14],m=e[15],S=g*b*f-x*y*f+x*u*v-d*b*v-g*u*m+d*y*m,C=_*y*f-A*b*f-_*u*v+c*b*v+A*u*m-c*y*m,M=A*x*f-_*g*f+_*d*v-c*x*v-A*d*m+c*g*m,T=_*g*u-A*x*u-_*d*y+c*x*y+A*d*b-c*g*b,N=i*S+s*C+o*M+l*T;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/N;return e[0]=S*P,e[1]=(x*y*l-g*b*l-x*o*v+s*b*v+g*o*m-s*y*m)*P,e[2]=(d*b*l-x*u*l+x*o*f-s*b*f-d*o*m+s*u*m)*P,e[3]=(g*u*l-d*y*l-g*o*f+s*y*f+d*o*v-s*u*v)*P,e[4]=C*P,e[5]=(A*b*l-_*y*l+_*o*v-i*b*v-A*o*m+i*y*m)*P,e[6]=(_*u*l-c*b*l-_*o*f+i*b*f+c*o*m-i*u*m)*P,e[7]=(c*y*l-A*u*l+A*o*f-i*y*f-c*o*v+i*u*v)*P,e[8]=M*P,e[9]=(_*g*l-A*x*l-_*s*v+i*x*v+A*s*m-i*g*m)*P,e[10]=(c*x*l-_*d*l+_*s*f-i*x*f-c*s*m+i*d*m)*P,e[11]=(A*d*l-c*g*l-A*s*f+i*g*f+c*s*v-i*d*v)*P,e[12]=T*P,e[13]=(A*x*o-_*g*o+_*s*y-i*x*y-A*s*b+i*g*b)*P,e[14]=(_*d*o-c*x*o-_*s*u+i*x*u+c*s*b-i*d*b)*P,e[15]=(c*g*o-A*d*o+A*s*u-i*g*u-c*s*y+i*d*y)*P,this}scale(e){const i=this.elements,s=e.x,o=e.y,l=e.z;return i[0]*=s,i[4]*=o,i[8]*=l,i[1]*=s,i[5]*=o,i[9]*=l,i[2]*=s,i[6]*=o,i[10]*=l,i[3]*=s,i[7]*=o,i[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(i,s,o))}makeTranslation(e,i,s){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,i,0,0,1,s,0,0,0,1),this}makeRotationX(e){const i=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,i,-s,0,0,s,i,0,0,0,0,1),this}makeRotationY(e){const i=Math.cos(e),s=Math.sin(e);return this.set(i,0,s,0,0,1,0,0,-s,0,i,0,0,0,0,1),this}makeRotationZ(e){const i=Math.cos(e),s=Math.sin(e);return this.set(i,-s,0,0,s,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,i){const s=Math.cos(i),o=Math.sin(i),l=1-s,c=e.x,d=e.y,u=e.z,f=l*c,A=l*d;return this.set(f*c+s,f*d-o*u,f*u+o*d,0,f*d+o*u,A*d+s,A*u-o*c,0,f*u-o*d,A*u+o*c,l*u*u+s,0,0,0,0,1),this}makeScale(e,i,s){return this.set(e,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,i,s,o,l,c){return this.set(1,s,l,0,e,1,c,0,i,o,1,0,0,0,0,1),this}compose(e,i,s){const o=this.elements,l=i._x,c=i._y,d=i._z,u=i._w,f=l+l,A=c+c,g=d+d,y=l*f,v=l*A,_=l*g,x=c*A,b=c*g,m=d*g,S=u*f,C=u*A,M=u*g,T=s.x,N=s.y,P=s.z;return o[0]=(1-(x+m))*T,o[1]=(v+M)*T,o[2]=(_-C)*T,o[3]=0,o[4]=(v-M)*N,o[5]=(1-(y+m))*N,o[6]=(b+S)*N,o[7]=0,o[8]=(_+C)*P,o[9]=(b-S)*P,o[10]=(1-(y+x))*P,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,i,s){const o=this.elements;let l=Xm.set(o[0],o[1],o[2]).length();const c=Xm.set(o[4],o[5],o[6]).length(),d=Xm.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],xc.copy(this);const f=1/l,A=1/c,g=1/d;return xc.elements[0]*=f,xc.elements[1]*=f,xc.elements[2]*=f,xc.elements[4]*=A,xc.elements[5]*=A,xc.elements[6]*=A,xc.elements[8]*=g,xc.elements[9]*=g,xc.elements[10]*=g,i.setFromRotationMatrix(xc),s.x=l,s.y=c,s.z=d,this}makePerspective(e,i,s,o,l,c,d=yh){const u=this.elements,f=2*l/(i-e),A=2*l/(s-o),g=(i+e)/(i-e),y=(s+o)/(s-o);let v,_;if(d===yh)v=-(c+l)/(c-l),_=-2*c*l/(c-l);else if(d===S_)v=-c/(c-l),_=-c*l/(c-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);return u[0]=f,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=A,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,i,s,o,l,c,d=yh){const u=this.elements,f=1/(i-e),A=1/(s-o),g=1/(c-l),y=(i+e)*f,v=(s+o)*A;let _,x;if(d===yh)_=(c+l)*g,x=-2*g;else if(d===S_)_=l*g,x=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*A,u[9]=0,u[13]=-v,u[2]=0,u[6]=0,u[10]=x,u[14]=-_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const i=this.elements,s=e.elements;for(let o=0;o<16;o++)if(i[o]!==s[o])return!1;return!0}fromArray(e,i=0){for(let s=0;s<16;s++)this.elements[s]=e[s+i];return this}toArray(e=[],i=0){const s=this.elements;return e[i]=s[0],e[i+1]=s[1],e[i+2]=s[2],e[i+3]=s[3],e[i+4]=s[4],e[i+5]=s[5],e[i+6]=s[6],e[i+7]=s[7],e[i+8]=s[8],e[i+9]=s[9],e[i+10]=s[10],e[i+11]=s[11],e[i+12]=s[12],e[i+13]=s[13],e[i+14]=s[14],e[i+15]=s[15],e}}const Xm=new ht,xc=new Os,rG=new ht(0,0,0),sG=new ht(1,1,1),_d=new ht,eE=new ht,ml=new ht,SB=new Os,TB=new Nc;class fb{constructor(e=0,i=0,s=0,o=fb.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=s,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,s,o=this._order){return this._x=e,this._y=i,this._z=s,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,s=!0){const o=e.elements,l=o[0],c=o[4],d=o[8],u=o[1],f=o[5],A=o[9],g=o[2],y=o[6],v=o[10];switch(i){case"XYZ":this._y=Math.asin(To(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-A,v),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-To(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(d,v),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-g,l),this._z=0);break;case"ZXY":this._x=Math.asin(To(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,v),this._z=Math.atan2(-c,f)):(this._y=0,this._z=Math.atan2(u,l));break;case"ZYX":this._y=Math.asin(-To(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,v),this._z=Math.atan2(u,l)):(this._x=0,this._z=Math.atan2(-c,f));break;case"YZX":this._z=Math.asin(To(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-A,f),this._y=Math.atan2(-g,l)):(this._x=0,this._y=Math.atan2(d,v));break;case"XZY":this._z=Math.asin(-To(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(d,l)):(this._x=Math.atan2(-A,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,s===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,s){return SB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(SB,i,s)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return TB.setFromEuler(this),this.setFromQuaternion(TB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}fb.DEFAULT_ORDER="XYZ";class X3{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let oG=0;const IB=new ht,Ym=new Nc,ih=new Os,tE=new ht,ZA=new ht,aG=new ht,lG=new Nc,RB=new ht(1,0,0),LB=new ht(0,1,0),BB=new ht(0,0,1),cG={type:"added"},uG={type:"removed"};class Lo extends Uc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oG++}),this.uuid=wh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lo.DEFAULT_UP.clone();const e=new ht,i=new fb,s=new Nc,o=new ht(1,1,1);function l(){s.setFromEuler(i,!1)}function c(){i.setFromQuaternion(s,void 0,!1)}i._onChange(l),s._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Os},normalMatrix:{value:new Tr}}),this.matrix=new Os,this.matrixWorld=new Os,this.matrixAutoUpdate=Lo.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Lo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new X3,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Ym.setFromAxisAngle(e,i),this.quaternion.multiply(Ym),this}rotateOnWorldAxis(e,i){return Ym.setFromAxisAngle(e,i),this.quaternion.premultiply(Ym),this}rotateX(e){return this.rotateOnAxis(RB,e)}rotateY(e){return this.rotateOnAxis(LB,e)}rotateZ(e){return this.rotateOnAxis(BB,e)}translateOnAxis(e,i){return IB.copy(e).applyQuaternion(this.quaternion),this.position.add(IB.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(RB,e)}translateY(e){return this.translateOnAxis(LB,e)}translateZ(e){return this.translateOnAxis(BB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ih.copy(this.matrixWorld).invert())}lookAt(e,i,s){e.isVector3?tE.copy(e):tE.set(e,i,s);const o=this.parent;this.updateWorldMatrix(!0,!1),ZA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ih.lookAt(ZA,tE,this.up):ih.lookAt(tE,ZA,this.up),this.quaternion.setFromRotationMatrix(ih),o&&(ih.extractRotation(o.matrixWorld),Ym.setFromRotationMatrix(ih),this.quaternion.premultiply(Ym.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(uG)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ih.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ih.multiply(e.parent.matrixWorld)),e.applyMatrix4(ih),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let s=0,o=this.children.length;s<o;s++){const c=this.children[s].getObjectByProperty(e,i);if(c!==void 0)return c}}getObjectsByProperty(e,i){let s=[];this[e]===i&&s.push(this);for(let o=0,l=this.children.length;o<l;o++){const c=this.children[o].getObjectsByProperty(e,i);c.length>0&&(s=s.concat(c))}return s}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ZA,e,aG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ZA,lG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].traverseVisible(e)}traverseAncestors(e){const i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const i=this.children;for(let s=0,o=i.length;s<o;s++){const l=i[s];(l.matrixWorldAutoUpdate===!0||e===!0)&&l.updateMatrixWorld(e)}}updateWorldMatrix(e,i){const s=this.parent;if(e===!0&&s!==null&&s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){const o=this.children;for(let l=0,c=o.length;l<c;l++){const d=o[l];d.matrixWorldAutoUpdate===!0&&d.updateWorldMatrix(!1,!0)}}}toJSON(e){const i=e===void 0||typeof e=="string",s={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function l(d,u){return d[u.uuid]===void 0&&(d[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const u=d.shapes;if(Array.isArray(u))for(let f=0,A=u.length;f<A;f++){const g=u[f];l(e.shapes,g)}else l(e.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let u=0,f=this.material.length;u<f;u++)d.push(l(e.materials,this.material[u]));o.material=d}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let d=0;d<this.children.length;d++)o.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let d=0;d<this.animations.length;d++){const u=this.animations[d];o.animations.push(l(e.animations,u))}}if(i){const d=c(e.geometries),u=c(e.materials),f=c(e.textures),A=c(e.images),g=c(e.shapes),y=c(e.skeletons),v=c(e.animations),_=c(e.nodes);d.length>0&&(s.geometries=d),u.length>0&&(s.materials=u),f.length>0&&(s.textures=f),A.length>0&&(s.images=A),g.length>0&&(s.shapes=g),y.length>0&&(s.skeletons=y),v.length>0&&(s.animations=v),_.length>0&&(s.nodes=_)}return s.object=o,s;function c(d){const u=[];for(const f in d){const A=d[f];delete A.metadata,u.push(A)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let s=0;s<e.children.length;s++){const o=e.children[s];this.add(o.clone())}return this}}Lo.DEFAULT_UP=new ht(0,1,0);Lo.DEFAULT_MATRIX_AUTO_UPDATE=!0;Lo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ec=new ht,rh=new ht,_M=new ht,sh=new ht,qm=new ht,$m=new ht,DB=new ht,bM=new ht,wM=new ht,CM=new ht;let nE=!1;class Kl{constructor(e=new ht,i=new ht,s=new ht){this.a=e,this.b=i,this.c=s}static getNormal(e,i,s,o){o.subVectors(s,i),Ec.subVectors(e,i),o.cross(Ec);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,i,s,o,l){Ec.subVectors(o,i),rh.subVectors(s,i),_M.subVectors(e,i);const c=Ec.dot(Ec),d=Ec.dot(rh),u=Ec.dot(_M),f=rh.dot(rh),A=rh.dot(_M),g=c*f-d*d;if(g===0)return l.set(-2,-1,-1);const y=1/g,v=(f*u-d*A)*y,_=(c*A-d*u)*y;return l.set(1-v-_,_,v)}static containsPoint(e,i,s,o){return this.getBarycoord(e,i,s,o,sh),sh.x>=0&&sh.y>=0&&sh.x+sh.y<=1}static getUV(e,i,s,o,l,c,d,u){return nE===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),nE=!0),this.getInterpolation(e,i,s,o,l,c,d,u)}static getInterpolation(e,i,s,o,l,c,d,u){return this.getBarycoord(e,i,s,o,sh),u.setScalar(0),u.addScaledVector(l,sh.x),u.addScaledVector(c,sh.y),u.addScaledVector(d,sh.z),u}static isFrontFacing(e,i,s,o){return Ec.subVectors(s,i),rh.subVectors(e,i),Ec.cross(rh).dot(o)<0}set(e,i,s){return this.a.copy(e),this.b.copy(i),this.c.copy(s),this}setFromPointsAndIndices(e,i,s,o){return this.a.copy(e[i]),this.b.copy(e[s]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,i,s,o){return this.a.fromBufferAttribute(e,i),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ec.subVectors(this.c,this.b),rh.subVectors(this.a,this.b),Ec.cross(rh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Kl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return Kl.getBarycoord(e,this.a,this.b,this.c,i)}getUV(e,i,s,o,l){return nE===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),nE=!0),Kl.getInterpolation(e,this.a,this.b,this.c,i,s,o,l)}getInterpolation(e,i,s,o,l){return Kl.getInterpolation(e,this.a,this.b,this.c,i,s,o,l)}containsPoint(e){return Kl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Kl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,i){const s=this.a,o=this.b,l=this.c;let c,d;qm.subVectors(o,s),$m.subVectors(l,s),bM.subVectors(e,s);const u=qm.dot(bM),f=$m.dot(bM);if(u<=0&&f<=0)return i.copy(s);wM.subVectors(e,o);const A=qm.dot(wM),g=$m.dot(wM);if(A>=0&&g<=A)return i.copy(o);const y=u*g-A*f;if(y<=0&&u>=0&&A<=0)return c=u/(u-A),i.copy(s).addScaledVector(qm,c);CM.subVectors(e,l);const v=qm.dot(CM),_=$m.dot(CM);if(_>=0&&v<=_)return i.copy(l);const x=v*f-u*_;if(x<=0&&f>=0&&_<=0)return d=f/(f-_),i.copy(s).addScaledVector($m,d);const b=A*_-v*g;if(b<=0&&g-A>=0&&v-_>=0)return DB.subVectors(l,o),d=(g-A)/(g-A+(v-_)),i.copy(o).addScaledVector(DB,d);const m=1/(b+x+y);return c=x*m,d=y*m,i.copy(s).addScaledVector(qm,c).addScaledVector($m,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let hG=0;class Rp extends Uc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hG++}),this.uuid=wh(),this.name="",this.type="Material",this.blending=kg,this.side=qd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=cF,this.blendDst=uF,this.blendEquation=pg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oT,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=b9,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=dM,this.stencilZFail=dM,this.stencilZPass=dM,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const i in e){const s=e[i];if(s===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const o=this[i];if(o===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(s):o&&o.isVector3&&s&&s.isVector3?o.copy(s):this[i]=s}}toJSON(e){const i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(s.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==kg&&(s.blending=this.blending),this.side!==qd&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaHash===!0&&(s.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(s.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(s.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=this.flatShading),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function o(l){const c=[];for(const d in l){const u=l[d];delete u.metadata,c.push(u)}return c}if(i){const l=o(e.textures),c=o(e.images);l.length>0&&(s.textures=l),c.length>0&&(s.images=c)}return s}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const i=e.clippingPlanes;let s=null;if(i!==null){const o=i.length;s=new Array(o);for(let l=0;l!==o;++l)s[l]=i[l].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const wF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_c={h:0,s:0,l:0},iE={h:0,s:0,l:0};function MM(n,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(e-n)*6*i:i<1/2?e:i<2/3?n+(e-n)*6*(2/3-i):n}let jr=class{constructor(e,i,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,i,s)}set(e,i,s){if(i===void 0&&s===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,i,s);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=ms){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yc.toWorkingColorSpace(this,i),this}setRGB(e,i,s,o=yc.workingColorSpace){return this.r=e,this.g=i,this.b=s,yc.toWorkingColorSpace(this,o),this}setHSL(e,i,s,o=yc.workingColorSpace){if(e=K3(e,1),i=To(i,0,1),s=To(s,0,1),i===0)this.r=this.g=this.b=s;else{const l=s<=.5?s*(1+i):s+i-s*i,c=2*s-l;this.r=MM(c,l,e+1/3),this.g=MM(c,l,e),this.b=MM(c,l,e-1/3)}return yc.toWorkingColorSpace(this,o),this}setStyle(e,i=ms){function s(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let l;const c=o[1],d=o[2];switch(c){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return s(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,i);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return s(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,i);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return s(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=o[1],c=l.length;if(c===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,i);if(c===6)return this.setHex(parseInt(l,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e,i=ms){const s=wF[e.toLowerCase()];return s!==void 0?this.setHex(s,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ng(e.r),this.g=Ng(e.g),this.b=Ng(e.b),this}copyLinearToSRGB(e){return this.r=pM(e.r),this.g=pM(e.g),this.b=pM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ms){return yc.fromWorkingColorSpace(ia.copy(this),e),Math.round(To(ia.r*255,0,255))*65536+Math.round(To(ia.g*255,0,255))*256+Math.round(To(ia.b*255,0,255))}getHexString(e=ms){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=yc.workingColorSpace){yc.fromWorkingColorSpace(ia.copy(this),i);const s=ia.r,o=ia.g,l=ia.b,c=Math.max(s,o,l),d=Math.min(s,o,l);let u,f;const A=(d+c)/2;if(d===c)u=0,f=0;else{const g=c-d;switch(f=A<=.5?g/(c+d):g/(2-c-d),c){case s:u=(o-l)/g+(o<l?6:0);break;case o:u=(l-s)/g+2;break;case l:u=(s-o)/g+4;break}u/=6}return e.h=u,e.s=f,e.l=A,e}getRGB(e,i=yc.workingColorSpace){return yc.fromWorkingColorSpace(ia.copy(this),i),e.r=ia.r,e.g=ia.g,e.b=ia.b,e}getStyle(e=ms){yc.fromWorkingColorSpace(ia.copy(this),e);const i=ia.r,s=ia.g,o=ia.b;return e!==ms?`color(${e} ${i.toFixed(3)} ${s.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(s*255)},${Math.round(o*255)})`}offsetHSL(e,i,s){return this.getHSL(_c),_c.h+=e,_c.s+=i,_c.l+=s,this.setHSL(_c.h,_c.s,_c.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,s){return this.r=e.r+(i.r-e.r)*s,this.g=e.g+(i.g-e.g)*s,this.b=e.b+(i.b-e.b)*s,this}lerpHSL(e,i){this.getHSL(_c),e.getHSL(iE);const s=kv(_c.h,iE.h,i),o=kv(_c.s,iE.s,i),l=kv(_c.l,iE.l,i);return this.setHSL(s,o,l),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const i=this.r,s=this.g,o=this.b,l=e.elements;return this.r=l[0]*i+l[3]*s+l[6]*o,this.g=l[1]*i+l[4]*s+l[7]*o,this.b=l[2]*i+l[5]*s+l[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ia=new jr;jr.NAMES=wF;class Y3 extends Rp{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Q3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ao=new ht,rE=new jn;class Jl{constructor(e,i,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=s,this.usage=hT,this.updateRange={offset:0,count:-1},this.gpuType=kd,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,i,s){e*=this.itemSize,s*=i.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=i.array[s+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,s=this.count;i<s;i++)rE.fromBufferAttribute(this,i),rE.applyMatrix3(e),this.setXY(i,rE.x,rE.y);else if(this.itemSize===3)for(let i=0,s=this.count;i<s;i++)ao.fromBufferAttribute(this,i),ao.applyMatrix3(e),this.setXYZ(i,ao.x,ao.y,ao.z);return this}applyMatrix4(e){for(let i=0,s=this.count;i<s;i++)ao.fromBufferAttribute(this,i),ao.applyMatrix4(e),this.setXYZ(i,ao.x,ao.y,ao.z);return this}applyNormalMatrix(e){for(let i=0,s=this.count;i<s;i++)ao.fromBufferAttribute(this,i),ao.applyNormalMatrix(e),this.setXYZ(i,ao.x,ao.y,ao.z);return this}transformDirection(e){for(let i=0,s=this.count;i<s;i++)ao.fromBufferAttribute(this,i),ao.transformDirection(e),this.setXYZ(i,ao.x,ao.y,ao.z);return this}set(e,i=0){return this.array.set(e,i),this}getComponent(e,i){let s=this.array[e*this.itemSize+i];return this.normalized&&(s=wu(s,this.array)),s}setComponent(e,i,s){return this.normalized&&(s=rs(s,this.array)),this.array[e*this.itemSize+i]=s,this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=wu(i,this.array)),i}setX(e,i){return this.normalized&&(i=rs(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=wu(i,this.array)),i}setY(e,i){return this.normalized&&(i=rs(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=wu(i,this.array)),i}setZ(e,i){return this.normalized&&(i=rs(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=wu(i,this.array)),i}setW(e,i){return this.normalized&&(i=rs(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,s){return e*=this.itemSize,this.normalized&&(i=rs(i,this.array),s=rs(s,this.array)),this.array[e+0]=i,this.array[e+1]=s,this}setXYZ(e,i,s,o){return e*=this.itemSize,this.normalized&&(i=rs(i,this.array),s=rs(s,this.array),o=rs(o,this.array)),this.array[e+0]=i,this.array[e+1]=s,this.array[e+2]=o,this}setXYZW(e,i,s,o,l){return e*=this.itemSize,this.normalized&&(i=rs(i,this.array),s=rs(s,this.array),o=rs(o,this.array),l=rs(l,this.array)),this.array[e+0]=i,this.array[e+1]=s,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==hT&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class CF extends Jl{constructor(e,i,s){super(new Uint16Array(e),i,s)}}class MF extends Jl{constructor(e,i,s){super(new Uint32Array(e),i,s)}}class mo extends Jl{constructor(e,i,s){super(new Float32Array(e),i,s)}}let dG=0;const Vl=new Os,SM=new Lo,Jm=new ht,gl=new Ip,ev=new Ip,Mo=new ht;class Za extends Uc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dG++}),this.uuid=wh(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xF(e)?MF:CF)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,s=0){this.groups.push({start:e,count:i,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const l=new Tr().getNormalMatrix(e);s.applyNormalMatrix(l),s.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Vl.makeRotationFromQuaternion(e),this.applyMatrix4(Vl),this}rotateX(e){return Vl.makeRotationX(e),this.applyMatrix4(Vl),this}rotateY(e){return Vl.makeRotationY(e),this.applyMatrix4(Vl),this}rotateZ(e){return Vl.makeRotationZ(e),this.applyMatrix4(Vl),this}translate(e,i,s){return Vl.makeTranslation(e,i,s),this.applyMatrix4(Vl),this}scale(e,i,s){return Vl.makeScale(e,i,s),this.applyMatrix4(Vl),this}lookAt(e){return SM.lookAt(e),SM.updateMatrix(),this.applyMatrix4(SM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jm).negate(),this.translate(Jm.x,Jm.y,Jm.z),this}setFromPoints(e){const i=[];for(let s=0,o=e.length;s<o;s++){const l=e[s];i.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new mo(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ip);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ht(-1/0,-1/0,-1/0),new ht(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let s=0,o=i.length;s<o;s++){const l=i[s];gl.setFromBufferAttribute(l),this.morphTargetsRelative?(Mo.addVectors(this.boundingBox.min,gl.min),this.boundingBox.expandByPoint(Mo),Mo.addVectors(this.boundingBox.max,gl.max),this.boundingBox.expandByPoint(Mo)):(this.boundingBox.expandByPoint(gl.min),this.boundingBox.expandByPoint(gl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hb);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ht,1/0);return}if(e){const s=this.boundingSphere.center;if(gl.setFromBufferAttribute(e),i)for(let l=0,c=i.length;l<c;l++){const d=i[l];ev.setFromBufferAttribute(d),this.morphTargetsRelative?(Mo.addVectors(gl.min,ev.min),gl.expandByPoint(Mo),Mo.addVectors(gl.max,ev.max),gl.expandByPoint(Mo)):(gl.expandByPoint(ev.min),gl.expandByPoint(ev.max))}gl.getCenter(s);let o=0;for(let l=0,c=e.count;l<c;l++)Mo.fromBufferAttribute(e,l),o=Math.max(o,s.distanceToSquared(Mo));if(i)for(let l=0,c=i.length;l<c;l++){const d=i[l],u=this.morphTargetsRelative;for(let f=0,A=d.count;f<A;f++)Mo.fromBufferAttribute(d,f),u&&(Jm.fromBufferAttribute(e,f),Mo.add(Jm)),o=Math.max(o,s.distanceToSquared(Mo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=e.array,o=i.position.array,l=i.normal.array,c=i.uv.array,d=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jl(new Float32Array(4*d),4));const u=this.getAttribute("tangent").array,f=[],A=[];for(let z=0;z<d;z++)f[z]=new ht,A[z]=new ht;const g=new ht,y=new ht,v=new ht,_=new jn,x=new jn,b=new jn,m=new ht,S=new ht;function C(z,Y,ne){g.fromArray(o,z*3),y.fromArray(o,Y*3),v.fromArray(o,ne*3),_.fromArray(c,z*2),x.fromArray(c,Y*2),b.fromArray(c,ne*2),y.sub(g),v.sub(g),x.sub(_),b.sub(_);const O=1/(x.x*b.y-b.x*x.y);isFinite(O)&&(m.copy(y).multiplyScalar(b.y).addScaledVector(v,-x.y).multiplyScalar(O),S.copy(v).multiplyScalar(x.x).addScaledVector(y,-b.x).multiplyScalar(O),f[z].add(m),f[Y].add(m),f[ne].add(m),A[z].add(S),A[Y].add(S),A[ne].add(S))}let M=this.groups;M.length===0&&(M=[{start:0,count:s.length}]);for(let z=0,Y=M.length;z<Y;++z){const ne=M[z],O=ne.start,F=ne.count;for(let U=O,G=O+F;U<G;U+=3)C(s[U+0],s[U+1],s[U+2])}const T=new ht,N=new ht,P=new ht,k=new ht;function D(z){P.fromArray(l,z*3),k.copy(P);const Y=f[z];T.copy(Y),T.sub(P.multiplyScalar(P.dot(Y))).normalize(),N.crossVectors(k,Y);const O=N.dot(A[z])<0?-1:1;u[z*4]=T.x,u[z*4+1]=T.y,u[z*4+2]=T.z,u[z*4+3]=O}for(let z=0,Y=M.length;z<Y;++z){const ne=M[z],O=ne.start,F=ne.count;for(let U=O,G=O+F;U<G;U+=3)D(s[U+0]),D(s[U+1]),D(s[U+2])}}computeVertexNormals(){const e=this.index,i=this.getAttribute("position");if(i!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new Jl(new Float32Array(i.count*3),3),this.setAttribute("normal",s);else for(let y=0,v=s.count;y<v;y++)s.setXYZ(y,0,0,0);const o=new ht,l=new ht,c=new ht,d=new ht,u=new ht,f=new ht,A=new ht,g=new ht;if(e)for(let y=0,v=e.count;y<v;y+=3){const _=e.getX(y+0),x=e.getX(y+1),b=e.getX(y+2);o.fromBufferAttribute(i,_),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,b),A.subVectors(c,l),g.subVectors(o,l),A.cross(g),d.fromBufferAttribute(s,_),u.fromBufferAttribute(s,x),f.fromBufferAttribute(s,b),d.add(A),u.add(A),f.add(A),s.setXYZ(_,d.x,d.y,d.z),s.setXYZ(x,u.x,u.y,u.z),s.setXYZ(b,f.x,f.y,f.z)}else for(let y=0,v=i.count;y<v;y+=3)o.fromBufferAttribute(i,y+0),l.fromBufferAttribute(i,y+1),c.fromBufferAttribute(i,y+2),A.subVectors(c,l),g.subVectors(o,l),A.cross(g),s.setXYZ(y+0,A.x,A.y,A.z),s.setXYZ(y+1,A.x,A.y,A.z),s.setXYZ(y+2,A.x,A.y,A.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let i=0,s=e.count;i<s;i++)Mo.fromBufferAttribute(e,i),Mo.normalize(),e.setXYZ(i,Mo.x,Mo.y,Mo.z)}toNonIndexed(){function e(d,u){const f=d.array,A=d.itemSize,g=d.normalized,y=new f.constructor(u.length*A);let v=0,_=0;for(let x=0,b=u.length;x<b;x++){d.isInterleavedBufferAttribute?v=u[x]*d.data.stride+d.offset:v=u[x]*A;for(let m=0;m<A;m++)y[_++]=f[v++]}return new Jl(y,A,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new Za,s=this.index.array,o=this.attributes;for(const d in o){const u=o[d],f=e(u,s);i.setAttribute(d,f)}const l=this.morphAttributes;for(const d in l){const u=[],f=l[d];for(let A=0,g=f.length;A<g;A++){const y=f[A],v=e(y,s);u.push(v)}i.morphAttributes[d]=u}i.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let d=0,u=c.length;d<u;d++){const f=c[d];i.addGroup(f.start,f.count,f.materialIndex)}return i}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const s=this.attributes;for(const u in s){const f=s[u];e.data.attributes[u]=f.toJSON(e.data)}const o={};let l=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],A=[];for(let g=0,y=f.length;g<y;g++){const v=f[g];A.push(v.toJSON(e.data))}A.length>0&&(o[u]=A,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const d=this.boundingSphere;return d!==null&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=e.name;const s=e.index;s!==null&&this.setIndex(s.clone(i));const o=e.attributes;for(const f in o){const A=o[f];this.setAttribute(f,A.clone(i))}const l=e.morphAttributes;for(const f in l){const A=[],g=l[f];for(let y=0,v=g.length;y<v;y++)A.push(g[y].clone(i));this.morphAttributes[f]=A}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let f=0,A=c.length;f<A;f++){const g=c[f];this.addGroup(g.start,g.count,g.materialIndex)}const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const PB=new Os,tp=new db,sE=new hb,OB=new ht,Zm=new ht,eg=new ht,tg=new ht,TM=new ht,oE=new ht,aE=new jn,lE=new jn,cE=new jn,FB=new ht,kB=new ht,NB=new ht,uE=new ht,hE=new ht;class Dc extends Lo{constructor(e=new Za,i=new Y3){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,s=Object.keys(i);if(s.length>0){const o=i[s[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const d=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=l}}}}getVertexPosition(e,i){const s=this.geometry,o=s.attributes.position,l=s.morphAttributes.position,c=s.morphTargetsRelative;i.fromBufferAttribute(o,e);const d=this.morphTargetInfluences;if(l&&d){oE.set(0,0,0);for(let u=0,f=l.length;u<f;u++){const A=d[u],g=l[u];A!==0&&(TM.fromBufferAttribute(g,e),c?oE.addScaledVector(TM,A):oE.addScaledVector(TM.sub(i),A))}i.add(oE)}return i}raycast(e,i){const s=this.geometry,o=this.material,l=this.matrixWorld;o!==void 0&&(s.boundingSphere===null&&s.computeBoundingSphere(),sE.copy(s.boundingSphere),sE.applyMatrix4(l),tp.copy(e.ray).recast(e.near),!(sE.containsPoint(tp.origin)===!1&&(tp.intersectSphere(sE,OB)===null||tp.origin.distanceToSquared(OB)>(e.far-e.near)**2))&&(PB.copy(l).invert(),tp.copy(e.ray).applyMatrix4(PB),!(s.boundingBox!==null&&tp.intersectsBox(s.boundingBox)===!1)&&this._computeIntersections(e,i,tp)))}_computeIntersections(e,i,s){let o;const l=this.geometry,c=this.material,d=l.index,u=l.attributes.position,f=l.attributes.uv,A=l.attributes.uv1,g=l.attributes.normal,y=l.groups,v=l.drawRange;if(d!==null)if(Array.isArray(c))for(let _=0,x=y.length;_<x;_++){const b=y[_],m=c[b.materialIndex],S=Math.max(b.start,v.start),C=Math.min(d.count,Math.min(b.start+b.count,v.start+v.count));for(let M=S,T=C;M<T;M+=3){const N=d.getX(M),P=d.getX(M+1),k=d.getX(M+2);o=dE(this,m,e,s,f,A,g,N,P,k),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=b.materialIndex,i.push(o))}}else{const _=Math.max(0,v.start),x=Math.min(d.count,v.start+v.count);for(let b=_,m=x;b<m;b+=3){const S=d.getX(b),C=d.getX(b+1),M=d.getX(b+2);o=dE(this,c,e,s,f,A,g,S,C,M),o&&(o.faceIndex=Math.floor(b/3),i.push(o))}}else if(u!==void 0)if(Array.isArray(c))for(let _=0,x=y.length;_<x;_++){const b=y[_],m=c[b.materialIndex],S=Math.max(b.start,v.start),C=Math.min(u.count,Math.min(b.start+b.count,v.start+v.count));for(let M=S,T=C;M<T;M+=3){const N=M,P=M+1,k=M+2;o=dE(this,m,e,s,f,A,g,N,P,k),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=b.materialIndex,i.push(o))}}else{const _=Math.max(0,v.start),x=Math.min(u.count,v.start+v.count);for(let b=_,m=x;b<m;b+=3){const S=b,C=b+1,M=b+2;o=dE(this,c,e,s,f,A,g,S,C,M),o&&(o.faceIndex=Math.floor(b/3),i.push(o))}}}}function fG(n,e,i,s,o,l,c,d){let u;if(e.side===La?u=s.intersectTriangle(c,l,o,!0,d):u=s.intersectTriangle(o,l,c,e.side===qd,d),u===null)return null;hE.copy(d),hE.applyMatrix4(n.matrixWorld);const f=i.ray.origin.distanceTo(hE);return f<i.near||f>i.far?null:{distance:f,point:hE.clone(),object:n}}function dE(n,e,i,s,o,l,c,d,u,f){n.getVertexPosition(d,Zm),n.getVertexPosition(u,eg),n.getVertexPosition(f,tg);const A=fG(n,e,i,s,Zm,eg,tg,uE);if(A){o&&(aE.fromBufferAttribute(o,d),lE.fromBufferAttribute(o,u),cE.fromBufferAttribute(o,f),A.uv=Kl.getInterpolation(uE,Zm,eg,tg,aE,lE,cE,new jn)),l&&(aE.fromBufferAttribute(l,d),lE.fromBufferAttribute(l,u),cE.fromBufferAttribute(l,f),A.uv1=Kl.getInterpolation(uE,Zm,eg,tg,aE,lE,cE,new jn),A.uv2=A.uv1),c&&(FB.fromBufferAttribute(c,d),kB.fromBufferAttribute(c,u),NB.fromBufferAttribute(c,f),A.normal=Kl.getInterpolation(uE,Zm,eg,tg,FB,kB,NB,new ht),A.normal.dot(s.direction)>0&&A.normal.multiplyScalar(-1));const g={a:d,b:u,c:f,normal:new ht,materialIndex:0};Kl.getNormal(Zm,eg,tg,g.normal),A.face=g}return A}class wy extends Za{constructor(e=1,i=1,s=1,o=1,l=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:s,widthSegments:o,heightSegments:l,depthSegments:c};const d=this;o=Math.floor(o),l=Math.floor(l),c=Math.floor(c);const u=[],f=[],A=[],g=[];let y=0,v=0;_("z","y","x",-1,-1,s,i,e,c,l,0),_("z","y","x",1,-1,s,i,-e,c,l,1),_("x","z","y",1,1,e,s,i,o,c,2),_("x","z","y",1,-1,e,s,-i,o,c,3),_("x","y","z",1,-1,e,i,s,o,l,4),_("x","y","z",-1,-1,e,i,-s,o,l,5),this.setIndex(u),this.setAttribute("position",new mo(f,3)),this.setAttribute("normal",new mo(A,3)),this.setAttribute("uv",new mo(g,2));function _(x,b,m,S,C,M,T,N,P,k,D){const z=M/P,Y=T/k,ne=M/2,O=T/2,F=N/2,U=P+1,G=k+1;let V=0,K=0;const W=new ht;for(let J=0;J<G;J++){const ee=J*Y-O;for(let he=0;he<U;he++){const me=he*z-ne;W[x]=me*S,W[b]=ee*C,W[m]=F,f.push(W.x,W.y,W.z),W[x]=0,W[b]=0,W[m]=N>0?1:-1,A.push(W.x,W.y,W.z),g.push(he/P),g.push(1-J/k),V+=1}}for(let J=0;J<k;J++)for(let ee=0;ee<P;ee++){const he=y+ee+U*J,me=y+ee+U*(J+1),Be=y+(ee+1)+U*(J+1),Se=y+(ee+1)+U*J;u.push(he,me,Se),u.push(me,Be,Se),K+=6}d.addGroup(v,K,D),v+=K,y+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jg(n){const e={};for(const i in n){e[i]={};for(const s in n[i]){const o=n[i][s];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][s]=null):e[i][s]=o.clone():Array.isArray(o)?e[i][s]=o.slice():e[i][s]=o}}return e}function Ma(n){const e={};for(let i=0;i<n.length;i++){const s=Jg(n[i]);for(const o in s)e[o]=s[o]}return e}function pG(n){const e=[];for(let i=0;i<n.length;i++)e.push(n[i].clone());return e}function SF(n){return n.getRenderTarget()===null?n.outputColorSpace:Tu}const TF={clone:Jg,merge:Ma};var mG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Lh extends Rp{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mG,this.fragmentShader=gG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jg(e.uniforms),this.uniformsGroups=pG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(const o in this.uniforms){const c=this.uniforms[o].value;c&&c.isTexture?i.uniforms[o]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?i.uniforms[o]={type:"c",value:c.getHex()}:c&&c.isVector2?i.uniforms[o]={type:"v2",value:c.toArray()}:c&&c.isVector3?i.uniforms[o]={type:"v3",value:c.toArray()}:c&&c.isVector4?i.uniforms[o]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?i.uniforms[o]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?i.uniforms[o]={type:"m4",value:c.toArray()}:i.uniforms[o]={value:c}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const s={};for(const o in this.extensions)this.extensions[o]===!0&&(s[o]=!0);return Object.keys(s).length>0&&(i.extensions=s),i}}class IF extends Lo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Os,this.projectionMatrix=new Os,this.projectionMatrixInverse=new Os,this.coordinateSystem=yh}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return e.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Xl extends IF{constructor(e=50,i=1,s=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=o,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const i=.5*this.getFilmHeight()/e;this.fov=cy*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Fv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return cy*2*Math.atan(Math.tan(Fv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,i,s,o,l,c){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=s,this.view.offsetY=o,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let i=e*Math.tan(Fv*.5*this.fov)/this.zoom,s=2*i,o=this.aspect*s,l=-.5*o;const c=this.view;if(this.view!==null&&this.view.enabled){const u=c.fullWidth,f=c.fullHeight;l+=c.offsetX*o/u,i-=c.offsetY*s/f,o*=c.width/u,s*=c.height/f}const d=this.filmOffset;d!==0&&(l+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,i,i-s,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const ng=-90,ig=1;class AG extends Lo{constructor(e,i,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null;const o=new Xl(ng,ig,e,i);o.layers=this.layers,this.add(o);const l=new Xl(ng,ig,e,i);l.layers=this.layers,this.add(l);const c=new Xl(ng,ig,e,i);c.layers=this.layers,this.add(c);const d=new Xl(ng,ig,e,i);d.layers=this.layers,this.add(d);const u=new Xl(ng,ig,e,i);u.layers=this.layers,this.add(u);const f=new Xl(ng,ig,e,i);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,i=this.children.concat(),[s,o,l,c,d,u]=i;for(const f of i)this.remove(f);if(e===yh)s.up.set(0,1,0),s.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),d.up.set(0,1,0),d.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===S_)s.up.set(0,-1,0),s.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),d.up.set(0,-1,0),d.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of i)this.add(f),f.updateMatrixWorld()}update(e,i){this.parent===null&&this.updateMatrixWorld();const s=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,l,c,d,u,f]=this.children,A=e.getRenderTarget(),g=e.xr.enabled;e.xr.enabled=!1;const y=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(i,o),e.setRenderTarget(s,1),e.render(i,l),e.setRenderTarget(s,2),e.render(i,c),e.setRenderTarget(s,3),e.render(i,d),e.setRenderTarget(s,4),e.render(i,u),s.texture.generateMipmaps=y,e.setRenderTarget(s,5),e.render(i,f),e.setRenderTarget(A),e.xr.enabled=g,s.texture.needsPMREMUpdate=!0}}class RF extends Ba{constructor(e,i,s,o,l,c,d,u,f,A){e=e!==void 0?e:[],i=i!==void 0?i:Xg,super(e,i,s,o,l,c,d,u,f,A),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vG extends $d{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1},o=[s,s,s,s,s,s];i.encoding!==void 0&&(Nv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===vp?ms:yp),this.texture=new RF(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:yl}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new wy(5,5,5),l=new Lh({name:"CubemapFromEquirect",uniforms:Jg(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:La,blending:bh});l.uniforms.tEquirect.value=i;const c=new Dc(o,l),d=i.minFilter;return i.minFilter===ly&&(i.minFilter=yl),new AG(1,10,this).update(e,c),i.minFilter=d,c.geometry.dispose(),c.material.dispose(),this}clear(e,i,s,o){const l=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(i,s,o);e.setRenderTarget(l)}}const IM=new ht,yG=new ht,xG=new Tr;class ph{constructor(e=new ht(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,s,o){return this.normal.set(e,i,s),this.constant=o,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,s){const o=IM.subVectors(s,i).cross(yG.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,i){const s=e.delta(IM),o=this.normal.dot(s);if(o===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:i.copy(e.start).addScaledVector(s,l)}intersectsLine(e){const i=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return i<0&&s>0||s<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){const s=i||xG.getNormalMatrix(e),o=this.coplanarPoint(IM).applyMatrix4(e),l=this.normal.applyMatrix3(s).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const np=new hb,fE=new ht;class q3{constructor(e=new ph,i=new ph,s=new ph,o=new ph,l=new ph,c=new ph){this.planes=[e,i,s,o,l,c]}set(e,i,s,o,l,c){const d=this.planes;return d[0].copy(e),d[1].copy(i),d[2].copy(s),d[3].copy(o),d[4].copy(l),d[5].copy(c),this}copy(e){const i=this.planes;for(let s=0;s<6;s++)i[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e,i=yh){const s=this.planes,o=e.elements,l=o[0],c=o[1],d=o[2],u=o[3],f=o[4],A=o[5],g=o[6],y=o[7],v=o[8],_=o[9],x=o[10],b=o[11],m=o[12],S=o[13],C=o[14],M=o[15];if(s[0].setComponents(u-l,y-f,b-v,M-m).normalize(),s[1].setComponents(u+l,y+f,b+v,M+m).normalize(),s[2].setComponents(u+c,y+A,b+_,M+S).normalize(),s[3].setComponents(u-c,y-A,b-_,M-S).normalize(),s[4].setComponents(u-d,y-g,b-x,M-C).normalize(),i===yh)s[5].setComponents(u+d,y+g,b+x,M+C).normalize();else if(i===S_)s[5].setComponents(d,g,x,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),np.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const i=e.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),np.copy(i.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(np)}intersectsSprite(e){return np.center.set(0,0,0),np.radius=.7071067811865476,np.applyMatrix4(e.matrixWorld),this.intersectsSphere(np)}intersectsSphere(e){const i=this.planes,s=e.center,o=-e.radius;for(let l=0;l<6;l++)if(i[l].distanceToPoint(s)<o)return!1;return!0}intersectsBox(e){const i=this.planes;for(let s=0;s<6;s++){const o=i[s];if(fE.x=o.normal.x>0?e.max.x:e.min.x,fE.y=o.normal.y>0?e.max.y:e.min.y,fE.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(fE)<0)return!1}return!0}containsPoint(e){const i=this.planes;for(let s=0;s<6;s++)if(i[s].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function LF(){let n=null,e=!1,i=null,s=null;function o(l,c){i(l,c),s=n.requestAnimationFrame(o)}return{start:function(){e!==!0&&i!==null&&(s=n.requestAnimationFrame(o),e=!0)},stop:function(){n.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(l){i=l},setContext:function(l){n=l}}}function EG(n,e){const i=e.isWebGL2,s=new WeakMap;function o(f,A){const g=f.array,y=f.usage,v=n.createBuffer();n.bindBuffer(A,v),n.bufferData(A,g,y),f.onUploadCallback();let _;if(g instanceof Float32Array)_=n.FLOAT;else if(g instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(i)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(g instanceof Int16Array)_=n.SHORT;else if(g instanceof Uint32Array)_=n.UNSIGNED_INT;else if(g instanceof Int32Array)_=n.INT;else if(g instanceof Int8Array)_=n.BYTE;else if(g instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(g instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+g);return{buffer:v,type:_,bytesPerElement:g.BYTES_PER_ELEMENT,version:f.version}}function l(f,A,g){const y=A.array,v=A.updateRange;n.bindBuffer(g,f),v.count===-1?n.bufferSubData(g,0,y):(i?n.bufferSubData(g,v.offset*y.BYTES_PER_ELEMENT,y,v.offset,v.count):n.bufferSubData(g,v.offset*y.BYTES_PER_ELEMENT,y.subarray(v.offset,v.offset+v.count)),v.count=-1),A.onUploadCallback()}function c(f){return f.isInterleavedBufferAttribute&&(f=f.data),s.get(f)}function d(f){f.isInterleavedBufferAttribute&&(f=f.data);const A=s.get(f);A&&(n.deleteBuffer(A.buffer),s.delete(f))}function u(f,A){if(f.isGLBufferAttribute){const y=s.get(f);(!y||y.version<f.version)&&s.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const g=s.get(f);g===void 0?s.set(f,o(f,A)):g.version<f.version&&(l(g.buffer,f,A),g.version=f.version)}return{get:c,remove:d,update:u}}class $3 extends Za{constructor(e=1,i=1,s=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:s,heightSegments:o};const l=e/2,c=i/2,d=Math.floor(s),u=Math.floor(o),f=d+1,A=u+1,g=e/d,y=i/u,v=[],_=[],x=[],b=[];for(let m=0;m<A;m++){const S=m*y-c;for(let C=0;C<f;C++){const M=C*g-l;_.push(M,-S,0),x.push(0,0,1),b.push(C/d),b.push(1-m/u)}}for(let m=0;m<u;m++)for(let S=0;S<d;S++){const C=S+f*m,M=S+f*(m+1),T=S+1+f*(m+1),N=S+1+f*m;v.push(C,M,N),v.push(M,T,N)}this.setIndex(v),this.setAttribute("position",new mo(_,3)),this.setAttribute("normal",new mo(x,3)),this.setAttribute("uv",new mo(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $3(e.width,e.height,e.widthSegments,e.heightSegments)}}var _G=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bG=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,wG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,MG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,SG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,TG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,IG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,RG=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,LG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,BG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,DG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,PG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,OG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,FG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,NG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,UG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,HG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,VG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,QG=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,WG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,KG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,XG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,YG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qG="gl_FragColor = linearToOutputTexel( gl_FragColor );",$G=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,JG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ZG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ez=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,az=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lz=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,cz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,uz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dz=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,gz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Az=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,yz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xz=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Ez=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_z=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,bz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Cz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Mz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Sz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Tz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Iz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Rz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Lz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Bz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Dz=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Oz=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Fz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,kz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Nz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Uz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Gz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Hz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Vz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,jz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Qz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Wz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Kz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Xz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Yz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$z=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Zz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,nH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,rH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,aH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,AH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,vH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_H=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CH=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,SH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,DH=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,PH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,NH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,GH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,XH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,YH=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$H=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,JH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xr={alphahash_fragment:_G,alphahash_pars_fragment:bG,alphamap_fragment:wG,alphamap_pars_fragment:CG,alphatest_fragment:MG,alphatest_pars_fragment:SG,aomap_fragment:TG,aomap_pars_fragment:IG,begin_vertex:RG,beginnormal_vertex:LG,bsdfs:BG,iridescence_fragment:DG,bumpmap_pars_fragment:PG,clipping_planes_fragment:OG,clipping_planes_pars_fragment:FG,clipping_planes_pars_vertex:kG,clipping_planes_vertex:NG,color_fragment:UG,color_pars_fragment:GG,color_pars_vertex:zG,color_vertex:HG,common:VG,cube_uv_reflection_fragment:jG,defaultnormal_vertex:QG,displacementmap_pars_vertex:WG,displacementmap_vertex:KG,emissivemap_fragment:XG,emissivemap_pars_fragment:YG,colorspace_fragment:qG,colorspace_pars_fragment:$G,envmap_fragment:JG,envmap_common_pars_fragment:ZG,envmap_pars_fragment:ez,envmap_pars_vertex:tz,envmap_physical_pars_fragment:fz,envmap_vertex:nz,fog_vertex:iz,fog_pars_vertex:rz,fog_fragment:sz,fog_pars_fragment:oz,gradientmap_pars_fragment:az,lightmap_fragment:lz,lightmap_pars_fragment:cz,lights_lambert_fragment:uz,lights_lambert_pars_fragment:hz,lights_pars_begin:dz,lights_toon_fragment:pz,lights_toon_pars_fragment:mz,lights_phong_fragment:gz,lights_phong_pars_fragment:Az,lights_physical_fragment:vz,lights_physical_pars_fragment:yz,lights_fragment_begin:xz,lights_fragment_maps:Ez,lights_fragment_end:_z,logdepthbuf_fragment:bz,logdepthbuf_pars_fragment:wz,logdepthbuf_pars_vertex:Cz,logdepthbuf_vertex:Mz,map_fragment:Sz,map_pars_fragment:Tz,map_particle_fragment:Iz,map_particle_pars_fragment:Rz,metalnessmap_fragment:Lz,metalnessmap_pars_fragment:Bz,morphcolor_vertex:Dz,morphnormal_vertex:Pz,morphtarget_pars_vertex:Oz,morphtarget_vertex:Fz,normal_fragment_begin:kz,normal_fragment_maps:Nz,normal_pars_fragment:Uz,normal_pars_vertex:Gz,normal_vertex:zz,normalmap_pars_fragment:Hz,clearcoat_normal_fragment_begin:Vz,clearcoat_normal_fragment_maps:jz,clearcoat_pars_fragment:Qz,iridescence_pars_fragment:Wz,opaque_fragment:Kz,packing:Xz,premultiplied_alpha_fragment:Yz,project_vertex:qz,dithering_fragment:$z,dithering_pars_fragment:Jz,roughnessmap_fragment:Zz,roughnessmap_pars_fragment:eH,shadowmap_pars_fragment:tH,shadowmap_pars_vertex:nH,shadowmap_vertex:iH,shadowmask_pars_fragment:rH,skinbase_vertex:sH,skinning_pars_vertex:oH,skinning_vertex:aH,skinnormal_vertex:lH,specularmap_fragment:cH,specularmap_pars_fragment:uH,tonemapping_fragment:hH,tonemapping_pars_fragment:dH,transmission_fragment:fH,transmission_pars_fragment:pH,uv_pars_fragment:mH,uv_pars_vertex:gH,uv_vertex:AH,worldpos_vertex:vH,background_vert:yH,background_frag:xH,backgroundCube_vert:EH,backgroundCube_frag:_H,cube_vert:bH,cube_frag:wH,depth_vert:CH,depth_frag:MH,distanceRGBA_vert:SH,distanceRGBA_frag:TH,equirect_vert:IH,equirect_frag:RH,linedashed_vert:LH,linedashed_frag:BH,meshbasic_vert:DH,meshbasic_frag:PH,meshlambert_vert:OH,meshlambert_frag:FH,meshmatcap_vert:kH,meshmatcap_frag:NH,meshnormal_vert:UH,meshnormal_frag:GH,meshphong_vert:zH,meshphong_frag:HH,meshphysical_vert:VH,meshphysical_frag:jH,meshtoon_vert:QH,meshtoon_frag:WH,points_vert:KH,points_frag:XH,shadow_vert:YH,shadow_frag:qH,sprite_vert:$H,sprite_frag:JH},Yn={common:{diffuse:{value:new jr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tr},alphaMap:{value:null},alphaMapTransform:{value:new Tr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tr},normalScale:{value:new jn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tr},alphaTest:{value:0},uvTransform:{value:new Tr}},sprite:{diffuse:{value:new jr(16777215)},opacity:{value:1},center:{value:new jn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tr},alphaMap:{value:null},alphaMapTransform:{value:new Tr},alphaTest:{value:0}}},_u={basic:{uniforms:Ma([Yn.common,Yn.specularmap,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.fog]),vertexShader:xr.meshbasic_vert,fragmentShader:xr.meshbasic_frag},lambert:{uniforms:Ma([Yn.common,Yn.specularmap,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.fog,Yn.lights,{emissive:{value:new jr(0)}}]),vertexShader:xr.meshlambert_vert,fragmentShader:xr.meshlambert_frag},phong:{uniforms:Ma([Yn.common,Yn.specularmap,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.fog,Yn.lights,{emissive:{value:new jr(0)},specular:{value:new jr(1118481)},shininess:{value:30}}]),vertexShader:xr.meshphong_vert,fragmentShader:xr.meshphong_frag},standard:{uniforms:Ma([Yn.common,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.roughnessmap,Yn.metalnessmap,Yn.fog,Yn.lights,{emissive:{value:new jr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xr.meshphysical_vert,fragmentShader:xr.meshphysical_frag},toon:{uniforms:Ma([Yn.common,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.gradientmap,Yn.fog,Yn.lights,{emissive:{value:new jr(0)}}]),vertexShader:xr.meshtoon_vert,fragmentShader:xr.meshtoon_frag},matcap:{uniforms:Ma([Yn.common,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.fog,{matcap:{value:null}}]),vertexShader:xr.meshmatcap_vert,fragmentShader:xr.meshmatcap_frag},points:{uniforms:Ma([Yn.points,Yn.fog]),vertexShader:xr.points_vert,fragmentShader:xr.points_frag},dashed:{uniforms:Ma([Yn.common,Yn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xr.linedashed_vert,fragmentShader:xr.linedashed_frag},depth:{uniforms:Ma([Yn.common,Yn.displacementmap]),vertexShader:xr.depth_vert,fragmentShader:xr.depth_frag},normal:{uniforms:Ma([Yn.common,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,{opacity:{value:1}}]),vertexShader:xr.meshnormal_vert,fragmentShader:xr.meshnormal_frag},sprite:{uniforms:Ma([Yn.sprite,Yn.fog]),vertexShader:xr.sprite_vert,fragmentShader:xr.sprite_frag},background:{uniforms:{uvTransform:{value:new Tr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xr.background_vert,fragmentShader:xr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xr.backgroundCube_vert,fragmentShader:xr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xr.cube_vert,fragmentShader:xr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xr.equirect_vert,fragmentShader:xr.equirect_frag},distanceRGBA:{uniforms:Ma([Yn.common,Yn.displacementmap,{referencePosition:{value:new ht},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xr.distanceRGBA_vert,fragmentShader:xr.distanceRGBA_frag},shadow:{uniforms:Ma([Yn.lights,Yn.fog,{color:{value:new jr(0)},opacity:{value:1}}]),vertexShader:xr.shadow_vert,fragmentShader:xr.shadow_frag}};_u.physical={uniforms:Ma([_u.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tr},clearcoatNormalScale:{value:new jn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tr},sheen:{value:0},sheenColor:{value:new jr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tr},transmissionSamplerSize:{value:new jn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tr},attenuationDistance:{value:0},attenuationColor:{value:new jr(0)},specularColor:{value:new jr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tr},anisotropyVector:{value:new jn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tr}}]),vertexShader:xr.meshphysical_vert,fragmentShader:xr.meshphysical_frag};const pE={r:0,b:0,g:0};function ZH(n,e,i,s,o,l,c){const d=new jr(0);let u=l===!0?0:1,f,A,g=null,y=0,v=null;function _(b,m){let S=!1,C=m.isScene===!0?m.background:null;C&&C.isTexture&&(C=(m.backgroundBlurriness>0?i:e).get(C)),C===null?x(d,u):C&&C.isColor&&(x(C,1),S=!0);const M=n.xr.getEnvironmentBlendMode();M==="additive"?s.buffers.color.setClear(0,0,0,1,c):M==="alpha-blend"&&s.buffers.color.setClear(0,0,0,0,c),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),C&&(C.isCubeTexture||C.mapping===cb)?(A===void 0&&(A=new Dc(new wy(1,1,1),new Lh({name:"BackgroundCubeMaterial",uniforms:Jg(_u.backgroundCube.uniforms),vertexShader:_u.backgroundCube.vertexShader,fragmentShader:_u.backgroundCube.fragmentShader,side:La,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function(T,N,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(A)),A.material.uniforms.envMap.value=C,A.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,A.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,A.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,A.material.toneMapped=C.colorSpace!==ms,(g!==C||y!==C.version||v!==n.toneMapping)&&(A.material.needsUpdate=!0,g=C,y=C.version,v=n.toneMapping),A.layers.enableAll(),b.unshift(A,A.geometry,A.material,0,0,null)):C&&C.isTexture&&(f===void 0&&(f=new Dc(new $3(2,2),new Lh({name:"BackgroundMaterial",uniforms:Jg(_u.background.uniforms),vertexShader:_u.background.vertexShader,fragmentShader:_u.background.fragmentShader,side:qd,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(f)),f.material.uniforms.t2D.value=C,f.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,f.material.toneMapped=C.colorSpace!==ms,C.matrixAutoUpdate===!0&&C.updateMatrix(),f.material.uniforms.uvTransform.value.copy(C.matrix),(g!==C||y!==C.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,g=C,y=C.version,v=n.toneMapping),f.layers.enableAll(),b.unshift(f,f.geometry,f.material,0,0,null))}function x(b,m){b.getRGB(pE,SF(n)),s.buffers.color.setClear(pE.r,pE.g,pE.b,m,c)}return{getClearColor:function(){return d},setClearColor:function(b,m=1){d.set(b),u=m,x(d,u)},getClearAlpha:function(){return u},setClearAlpha:function(b){u=b,x(d,u)},render:_}}function eV(n,e,i,s){const o=n.getParameter(n.MAX_VERTEX_ATTRIBS),l=s.isWebGL2?null:e.get("OES_vertex_array_object"),c=s.isWebGL2||l!==null,d={},u=b(null);let f=u,A=!1;function g(F,U,G,V,K){let W=!1;if(c){const J=x(V,G,U);f!==J&&(f=J,v(f.object)),W=m(F,V,G,K),W&&S(F,V,G,K)}else{const J=U.wireframe===!0;(f.geometry!==V.id||f.program!==G.id||f.wireframe!==J)&&(f.geometry=V.id,f.program=G.id,f.wireframe=J,W=!0)}K!==null&&i.update(K,n.ELEMENT_ARRAY_BUFFER),(W||A)&&(A=!1,k(F,U,G,V),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.get(K).buffer))}function y(){return s.isWebGL2?n.createVertexArray():l.createVertexArrayOES()}function v(F){return s.isWebGL2?n.bindVertexArray(F):l.bindVertexArrayOES(F)}function _(F){return s.isWebGL2?n.deleteVertexArray(F):l.deleteVertexArrayOES(F)}function x(F,U,G){const V=G.wireframe===!0;let K=d[F.id];K===void 0&&(K={},d[F.id]=K);let W=K[U.id];W===void 0&&(W={},K[U.id]=W);let J=W[V];return J===void 0&&(J=b(y()),W[V]=J),J}function b(F){const U=[],G=[],V=[];for(let K=0;K<o;K++)U[K]=0,G[K]=0,V[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:G,attributeDivisors:V,object:F,attributes:{},index:null}}function m(F,U,G,V){const K=f.attributes,W=U.attributes;let J=0;const ee=G.getAttributes();for(const he in ee)if(ee[he].location>=0){const Be=K[he];let Se=W[he];if(Se===void 0&&(he==="instanceMatrix"&&F.instanceMatrix&&(Se=F.instanceMatrix),he==="instanceColor"&&F.instanceColor&&(Se=F.instanceColor)),Be===void 0||Be.attribute!==Se||Se&&Be.data!==Se.data)return!0;J++}return f.attributesNum!==J||f.index!==V}function S(F,U,G,V){const K={},W=U.attributes;let J=0;const ee=G.getAttributes();for(const he in ee)if(ee[he].location>=0){let Be=W[he];Be===void 0&&(he==="instanceMatrix"&&F.instanceMatrix&&(Be=F.instanceMatrix),he==="instanceColor"&&F.instanceColor&&(Be=F.instanceColor));const Se={};Se.attribute=Be,Be&&Be.data&&(Se.data=Be.data),K[he]=Se,J++}f.attributes=K,f.attributesNum=J,f.index=V}function C(){const F=f.newAttributes;for(let U=0,G=F.length;U<G;U++)F[U]=0}function M(F){T(F,0)}function T(F,U){const G=f.newAttributes,V=f.enabledAttributes,K=f.attributeDivisors;G[F]=1,V[F]===0&&(n.enableVertexAttribArray(F),V[F]=1),K[F]!==U&&((s.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,U),K[F]=U)}function N(){const F=f.newAttributes,U=f.enabledAttributes;for(let G=0,V=U.length;G<V;G++)U[G]!==F[G]&&(n.disableVertexAttribArray(G),U[G]=0)}function P(F,U,G,V,K,W,J){J===!0?n.vertexAttribIPointer(F,U,G,K,W):n.vertexAttribPointer(F,U,G,V,K,W)}function k(F,U,G,V){if(s.isWebGL2===!1&&(F.isInstancedMesh||V.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const K=V.attributes,W=G.getAttributes(),J=U.defaultAttributeValues;for(const ee in W){const he=W[ee];if(he.location>=0){let me=K[ee];if(me===void 0&&(ee==="instanceMatrix"&&F.instanceMatrix&&(me=F.instanceMatrix),ee==="instanceColor"&&F.instanceColor&&(me=F.instanceColor)),me!==void 0){const Be=me.normalized,Se=me.itemSize,rt=i.get(me);if(rt===void 0)continue;const Ge=rt.buffer,st=rt.type,mt=rt.bytesPerElement,Ft=s.isWebGL2===!0&&(st===n.INT||st===n.UNSIGNED_INT||me.gpuType===dF);if(me.isInterleavedBufferAttribute){const Pt=me.data,nt=Pt.stride,Fn=me.offset;if(Pt.isInstancedInterleavedBuffer){for(let Xt=0;Xt<he.locationSize;Xt++)T(he.location+Xt,Pt.meshPerAttribute);F.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=Pt.meshPerAttribute*Pt.count)}else for(let Xt=0;Xt<he.locationSize;Xt++)M(he.location+Xt);n.bindBuffer(n.ARRAY_BUFFER,Ge);for(let Xt=0;Xt<he.locationSize;Xt++)P(he.location+Xt,Se/he.locationSize,st,Be,nt*mt,(Fn+Se/he.locationSize*Xt)*mt,Ft)}else{if(me.isInstancedBufferAttribute){for(let Pt=0;Pt<he.locationSize;Pt++)T(he.location+Pt,me.meshPerAttribute);F.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Pt=0;Pt<he.locationSize;Pt++)M(he.location+Pt);n.bindBuffer(n.ARRAY_BUFFER,Ge);for(let Pt=0;Pt<he.locationSize;Pt++)P(he.location+Pt,Se/he.locationSize,st,Be,Se*mt,Se/he.locationSize*Pt*mt,Ft)}}else if(J!==void 0){const Be=J[ee];if(Be!==void 0)switch(Be.length){case 2:n.vertexAttrib2fv(he.location,Be);break;case 3:n.vertexAttrib3fv(he.location,Be);break;case 4:n.vertexAttrib4fv(he.location,Be);break;default:n.vertexAttrib1fv(he.location,Be)}}}}N()}function D(){ne();for(const F in d){const U=d[F];for(const G in U){const V=U[G];for(const K in V)_(V[K].object),delete V[K];delete U[G]}delete d[F]}}function z(F){if(d[F.id]===void 0)return;const U=d[F.id];for(const G in U){const V=U[G];for(const K in V)_(V[K].object),delete V[K];delete U[G]}delete d[F.id]}function Y(F){for(const U in d){const G=d[U];if(G[F.id]===void 0)continue;const V=G[F.id];for(const K in V)_(V[K].object),delete V[K];delete G[F.id]}}function ne(){O(),A=!0,f!==u&&(f=u,v(f.object))}function O(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:g,reset:ne,resetDefaultState:O,dispose:D,releaseStatesOfGeometry:z,releaseStatesOfProgram:Y,initAttributes:C,enableAttribute:M,disableUnusedAttributes:N}}function tV(n,e,i,s){const o=s.isWebGL2;let l;function c(f){l=f}function d(f,A){n.drawArrays(l,f,A),i.update(A,l,1)}function u(f,A,g){if(g===0)return;let y,v;if(o)y=n,v="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[v](l,f,A,g),i.update(A,l,g)}this.setMode=c,this.render=d,this.renderInstances=u}function nV(n,e,i){let s;function o(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const c=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let d=i.precision!==void 0?i.precision:"highp";const u=l(d);u!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",u,"instead."),d=u);const f=c||e.has("WEBGL_draw_buffers"),A=i.logarithmicDepthBuffer===!0,g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),m=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=y>0,M=c||e.has("OES_texture_float"),T=C&&M,N=c?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:c,drawBuffers:f,getMaxAnisotropy:o,getMaxPrecision:l,precision:d,logarithmicDepthBuffer:A,maxTextures:g,maxVertexTextures:y,maxTextureSize:v,maxCubemapSize:_,maxAttributes:x,maxVertexUniforms:b,maxVaryings:m,maxFragmentUniforms:S,vertexTextures:C,floatFragmentTextures:M,floatVertexTextures:T,maxSamples:N}}function iV(n){const e=this;let i=null,s=0,o=!1,l=!1;const c=new ph,d=new Tr,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const v=g.length!==0||y||s!==0||o;return o=y,s=g.length,v},this.beginShadows=function(){l=!0,A(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(g,y){i=A(g,y,0)},this.setState=function(g,y,v){const _=g.clippingPlanes,x=g.clipIntersection,b=g.clipShadows,m=n.get(g);if(!o||_===null||_.length===0||l&&!b)l?A(null):f();else{const S=l?0:s,C=S*4;let M=m.clippingState||null;u.value=M,M=A(_,y,C,v);for(let T=0;T!==C;++T)M[T]=i[T];m.clippingState=M,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=S}};function f(){u.value!==i&&(u.value=i,u.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function A(g,y,v,_){const x=g!==null?g.length:0;let b=null;if(x!==0){if(b=u.value,_!==!0||b===null){const m=v+x*4,S=y.matrixWorldInverse;d.getNormalMatrix(S),(b===null||b.length<m)&&(b=new Float32Array(m));for(let C=0,M=v;C!==x;++C,M+=4)c.copy(g[C]).applyMatrix4(S,d),c.normal.toArray(b,M),b[M+3]=c.constant}u.value=b,u.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function rV(n){let e=new WeakMap;function i(c,d){return d===aT?c.mapping=Xg:d===lT&&(c.mapping=Yg),c}function s(c){if(c&&c.isTexture&&c.isRenderTargetTexture===!1){const d=c.mapping;if(d===aT||d===lT)if(e.has(c)){const u=e.get(c).texture;return i(u,c.mapping)}else{const u=c.image;if(u&&u.height>0){const f=new vG(u.height/2);return f.fromEquirectangularTexture(n,c),e.set(c,f),c.addEventListener("dispose",o),i(f.texture,c.mapping)}else return null}}return c}function o(c){const d=c.target;d.removeEventListener("dispose",o);const u=e.get(d);u!==void 0&&(e.delete(d),u.dispose())}function l(){e=new WeakMap}return{get:s,dispose:l}}class J3 extends IF{constructor(e=-1,i=1,s=1,o=-1,l=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=s,this.bottom=o,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,s,o,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=s,this.view.offsetY=o,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=s-e,c=s+e,d=o+i,u=o-i;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,A=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=f*this.view.offsetX,c=l+f*this.view.width,d-=A*this.view.offsetY,u=d-A*this.view.height}this.projectionMatrix.makeOrthographic(l,c,d,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}const Sg=4,UB=[.125,.215,.35,.446,.526,.582],lp=20,RM=new J3,GB=new jr;let LM=null;const ap=(1+Math.sqrt(5))/2,rg=1/ap,zB=[new ht(1,1,1),new ht(-1,1,1),new ht(1,1,-1),new ht(-1,1,-1),new ht(0,ap,rg),new ht(0,ap,-rg),new ht(rg,0,ap),new ht(-rg,0,ap),new ht(ap,rg,0),new ht(-ap,rg,0)];class HB{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,s=.1,o=100){LM=this._renderer.getRenderTarget(),this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,s,o,l),i>0&&this._blur(l,0,0,i),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(LM),e.scissorTest=!1,mE(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===Xg||e.mapping===Yg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),LM=this._renderer.getRenderTarget();const s=i||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,s={magFilter:yl,minFilter:yl,generateMipmaps:!1,type:qg,format:Rc,colorSpace:Tu,depthBuffer:!1},o=VB(e,i,s);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=VB(e,i,s);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=sV(l)),this._blurMaterial=oV(l,e,i)}return o}_compileMaterial(e){const i=new Dc(this._lodPlanes[0],e);this._renderer.compile(i,RM)}_sceneToCubeUV(e,i,s,o){const d=new Xl(90,1,i,s),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],A=this._renderer,g=A.autoClear,y=A.toneMapping;A.getClearColor(GB),A.toneMapping=Wd,A.autoClear=!1;const v=new Y3({name:"PMREM.Background",side:La,depthWrite:!1,depthTest:!1}),_=new Dc(new wy,v);let x=!1;const b=e.background;b?b.isColor&&(v.color.copy(b),e.background=null,x=!0):(v.color.copy(GB),x=!0);for(let m=0;m<6;m++){const S=m%3;S===0?(d.up.set(0,u[m],0),d.lookAt(f[m],0,0)):S===1?(d.up.set(0,0,u[m]),d.lookAt(0,f[m],0)):(d.up.set(0,u[m],0),d.lookAt(0,0,f[m]));const C=this._cubeSize;mE(o,S*C,m>2?C:0,C,C),A.setRenderTarget(o),x&&A.render(_,d),A.render(e,d)}_.geometry.dispose(),_.material.dispose(),A.toneMapping=y,A.autoClear=g,e.background=b}_textureToCubeUV(e,i){const s=this._renderer,o=e.mapping===Xg||e.mapping===Yg;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=QB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jB());const l=o?this._cubemapMaterial:this._equirectMaterial,c=new Dc(this._lodPlanes[0],l),d=l.uniforms;d.envMap.value=e;const u=this._cubeSize;mE(i,0,0,3*u,2*u),s.setRenderTarget(i),s.render(c,RM)}_applyPMREM(e){const i=this._renderer,s=i.autoClear;i.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const l=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),c=zB[(o-1)%zB.length];this._blur(e,o-1,o,l,c)}i.autoClear=s}_blur(e,i,s,o,l){const c=this._pingPongRenderTarget;this._halfBlur(e,c,i,s,o,"latitudinal",l),this._halfBlur(c,e,s,s,o,"longitudinal",l)}_halfBlur(e,i,s,o,l,c,d){const u=this._renderer,f=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const A=3,g=new Dc(this._lodPlanes[o],f),y=f.uniforms,v=this._sizeLods[s]-1,_=isFinite(l)?Math.PI/(2*v):2*Math.PI/(2*lp-1),x=l/_,b=isFinite(l)?1+Math.floor(A*x):lp;b>lp&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${lp}`);const m=[];let S=0;for(let P=0;P<lp;++P){const k=P/x,D=Math.exp(-k*k/2);m.push(D),P===0?S+=D:P<b&&(S+=2*D)}for(let P=0;P<m.length;P++)m[P]=m[P]/S;y.envMap.value=e.texture,y.samples.value=b,y.weights.value=m,y.latitudinal.value=c==="latitudinal",d&&(y.poleAxis.value=d);const{_lodMax:C}=this;y.dTheta.value=_,y.mipInt.value=C-s;const M=this._sizeLods[o],T=3*M*(o>C-Sg?o-C+Sg:0),N=4*(this._cubeSize-M);mE(i,T,N,3*M,2*M),u.setRenderTarget(i),u.render(g,RM)}}function sV(n){const e=[],i=[],s=[];let o=n;const l=n-Sg+1+UB.length;for(let c=0;c<l;c++){const d=Math.pow(2,o);i.push(d);let u=1/d;c>n-Sg?u=UB[c-n+Sg-1]:c===0&&(u=0),s.push(u);const f=1/(d-2),A=-f,g=1+f,y=[A,A,g,A,g,g,A,A,g,g,A,g],v=6,_=6,x=3,b=2,m=1,S=new Float32Array(x*_*v),C=new Float32Array(b*_*v),M=new Float32Array(m*_*v);for(let N=0;N<v;N++){const P=N%3*2/3-1,k=N>2?0:-1,D=[P,k,0,P+2/3,k,0,P+2/3,k+1,0,P,k,0,P+2/3,k+1,0,P,k+1,0];S.set(D,x*_*N),C.set(y,b*_*N);const z=[N,N,N,N,N,N];M.set(z,m*_*N)}const T=new Za;T.setAttribute("position",new Jl(S,x)),T.setAttribute("uv",new Jl(C,b)),T.setAttribute("faceIndex",new Jl(M,m)),e.push(T),o>Sg&&o--}return{lodPlanes:e,sizeLods:i,sigmas:s}}function VB(n,e,i){const s=new $d(n,e,i);return s.texture.mapping=cb,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function mE(n,e,i,s,o){n.viewport.set(e,i,s,o),n.scissor.set(e,i,s,o)}function oV(n,e,i){const s=new Float32Array(lp),o=new ht(0,1,0);return new Lh({name:"SphericalGaussianBlur",defines:{n:lp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:Z3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bh,depthTest:!1,depthWrite:!1})}function jB(){return new Lh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Z3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bh,depthTest:!1,depthWrite:!1})}function QB(){return new Lh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Z3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bh,depthTest:!1,depthWrite:!1})}function Z3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aV(n){let e=new WeakMap,i=null;function s(d){if(d&&d.isTexture){const u=d.mapping,f=u===aT||u===lT,A=u===Xg||u===Yg;if(f||A)if(d.isRenderTargetTexture&&d.needsPMREMUpdate===!0){d.needsPMREMUpdate=!1;let g=e.get(d);return i===null&&(i=new HB(n)),g=f?i.fromEquirectangular(d,g):i.fromCubemap(d,g),e.set(d,g),g.texture}else{if(e.has(d))return e.get(d).texture;{const g=d.image;if(f&&g&&g.height>0||A&&g&&o(g)){i===null&&(i=new HB(n));const y=f?i.fromEquirectangular(d):i.fromCubemap(d);return e.set(d,y),d.addEventListener("dispose",l),y.texture}else return null}}}return d}function o(d){let u=0;const f=6;for(let A=0;A<f;A++)d[A]!==void 0&&u++;return u===f}function l(d){const u=d.target;u.removeEventListener("dispose",l);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function c(){e=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:s,dispose:c}}function lV(n){const e={};function i(s){if(e[s]!==void 0)return e[s];let o;switch(s){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(s)}return e[s]=o,o}return{has:function(s){return i(s)!==null},init:function(s){s.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(s){const o=i(s);return o===null&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),o}}}function cV(n,e,i,s){const o={},l=new WeakMap;function c(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const _ in y.attributes)e.remove(y.attributes[_]);for(const _ in y.morphAttributes){const x=y.morphAttributes[_];for(let b=0,m=x.length;b<m;b++)e.remove(x[b])}y.removeEventListener("dispose",c),delete o[y.id];const v=l.get(y);v&&(e.remove(v),l.delete(y)),s.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,i.memory.geometries--}function d(g,y){return o[y.id]===!0||(y.addEventListener("dispose",c),o[y.id]=!0,i.memory.geometries++),y}function u(g){const y=g.attributes;for(const _ in y)e.update(y[_],n.ARRAY_BUFFER);const v=g.morphAttributes;for(const _ in v){const x=v[_];for(let b=0,m=x.length;b<m;b++)e.update(x[b],n.ARRAY_BUFFER)}}function f(g){const y=[],v=g.index,_=g.attributes.position;let x=0;if(v!==null){const S=v.array;x=v.version;for(let C=0,M=S.length;C<M;C+=3){const T=S[C+0],N=S[C+1],P=S[C+2];y.push(T,N,N,P,P,T)}}else if(_!==void 0){const S=_.array;x=_.version;for(let C=0,M=S.length/3-1;C<M;C+=3){const T=C+0,N=C+1,P=C+2;y.push(T,N,N,P,P,T)}}else return;const b=new(xF(y)?MF:CF)(y,1);b.version=x;const m=l.get(g);m&&e.remove(m),l.set(g,b)}function A(g){const y=l.get(g);if(y){const v=g.index;v!==null&&y.version<v.version&&f(g)}else f(g);return l.get(g)}return{get:d,update:u,getWireframeAttribute:A}}function uV(n,e,i,s){const o=s.isWebGL2;let l;function c(y){l=y}let d,u;function f(y){d=y.type,u=y.bytesPerElement}function A(y,v){n.drawElements(l,v,d,y*u),i.update(v,l,1)}function g(y,v,_){if(_===0)return;let x,b;if(o)x=n,b="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),b="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[b](l,v,d,y*u,_),i.update(v,l,_)}this.setMode=c,this.setIndex=f,this.render=A,this.renderInstances=g}function hV(n){const e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function s(l,c,d){switch(i.calls++,c){case n.TRIANGLES:i.triangles+=d*(l/3);break;case n.LINES:i.lines+=d*(l/2);break;case n.LINE_STRIP:i.lines+=d*(l-1);break;case n.LINE_LOOP:i.lines+=d*l;break;case n.POINTS:i.points+=d*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function o(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:o,update:s}}function dV(n,e){return n[0]-e[0]}function fV(n,e){return Math.abs(e[1])-Math.abs(n[1])}function pV(n,e,i){const s={},o=new Float32Array(8),l=new WeakMap,c=new Io,d=[];for(let f=0;f<8;f++)d[f]=[f,0];function u(f,A,g){const y=f.morphTargetInfluences;if(e.isWebGL2===!0){const _=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,x=_!==void 0?_.length:0;let b=l.get(A);if(b===void 0||b.count!==x){let U=function(){O.dispose(),l.delete(A),A.removeEventListener("dispose",U)};var v=U;b!==void 0&&b.texture.dispose();const C=A.morphAttributes.position!==void 0,M=A.morphAttributes.normal!==void 0,T=A.morphAttributes.color!==void 0,N=A.morphAttributes.position||[],P=A.morphAttributes.normal||[],k=A.morphAttributes.color||[];let D=0;C===!0&&(D=1),M===!0&&(D=2),T===!0&&(D=3);let z=A.attributes.position.count*D,Y=1;z>e.maxTextureSize&&(Y=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const ne=new Float32Array(z*Y*4*x),O=new bF(ne,z,Y,x);O.type=kd,O.needsUpdate=!0;const F=D*4;for(let G=0;G<x;G++){const V=N[G],K=P[G],W=k[G],J=z*Y*4*G;for(let ee=0;ee<V.count;ee++){const he=ee*F;C===!0&&(c.fromBufferAttribute(V,ee),ne[J+he+0]=c.x,ne[J+he+1]=c.y,ne[J+he+2]=c.z,ne[J+he+3]=0),M===!0&&(c.fromBufferAttribute(K,ee),ne[J+he+4]=c.x,ne[J+he+5]=c.y,ne[J+he+6]=c.z,ne[J+he+7]=0),T===!0&&(c.fromBufferAttribute(W,ee),ne[J+he+8]=c.x,ne[J+he+9]=c.y,ne[J+he+10]=c.z,ne[J+he+11]=W.itemSize===4?c.w:1)}}b={count:x,texture:O,size:new jn(z,Y)},l.set(A,b),A.addEventListener("dispose",U)}let m=0;for(let C=0;C<y.length;C++)m+=y[C];const S=A.morphTargetsRelative?1:1-m;g.getUniforms().setValue(n,"morphTargetBaseInfluence",S),g.getUniforms().setValue(n,"morphTargetInfluences",y),g.getUniforms().setValue(n,"morphTargetsTexture",b.texture,i),g.getUniforms().setValue(n,"morphTargetsTextureSize",b.size)}else{const _=y===void 0?0:y.length;let x=s[A.id];if(x===void 0||x.length!==_){x=[];for(let M=0;M<_;M++)x[M]=[M,0];s[A.id]=x}for(let M=0;M<_;M++){const T=x[M];T[0]=M,T[1]=y[M]}x.sort(fV);for(let M=0;M<8;M++)M<_&&x[M][1]?(d[M][0]=x[M][0],d[M][1]=x[M][1]):(d[M][0]=Number.MAX_SAFE_INTEGER,d[M][1]=0);d.sort(dV);const b=A.morphAttributes.position,m=A.morphAttributes.normal;let S=0;for(let M=0;M<8;M++){const T=d[M],N=T[0],P=T[1];N!==Number.MAX_SAFE_INTEGER&&P?(b&&A.getAttribute("morphTarget"+M)!==b[N]&&A.setAttribute("morphTarget"+M,b[N]),m&&A.getAttribute("morphNormal"+M)!==m[N]&&A.setAttribute("morphNormal"+M,m[N]),o[M]=P,S+=P):(b&&A.hasAttribute("morphTarget"+M)===!0&&A.deleteAttribute("morphTarget"+M),m&&A.hasAttribute("morphNormal"+M)===!0&&A.deleteAttribute("morphNormal"+M),o[M]=0)}const C=A.morphTargetsRelative?1:1-S;g.getUniforms().setValue(n,"morphTargetBaseInfluence",C),g.getUniforms().setValue(n,"morphTargetInfluences",o)}}return{update:u}}function mV(n,e,i,s){let o=new WeakMap;function l(u){const f=s.render.frame,A=u.geometry,g=e.get(u,A);if(o.get(g)!==f&&(e.update(g),o.set(g,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",d)===!1&&u.addEventListener("dispose",d),o.get(u)!==f&&(i.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&i.update(u.instanceColor,n.ARRAY_BUFFER),o.set(u,f))),u.isSkinnedMesh){const y=u.skeleton;o.get(y)!==f&&(y.update(),o.set(y,f))}return g}function c(){o=new WeakMap}function d(u){const f=u.target;f.removeEventListener("dispose",d),i.remove(f.instanceMatrix),f.instanceColor!==null&&i.remove(f.instanceColor)}return{update:l,dispose:c}}const BF=new Ba,DF=new bF,PF=new nG,OF=new RF,WB=[],KB=[],XB=new Float32Array(16),YB=new Float32Array(9),qB=new Float32Array(4);function r0(n,e,i){const s=n[0];if(s<=0||s>0)return n;const o=e*i;let l=WB[o];if(l===void 0&&(l=new Float32Array(o),WB[o]=l),e!==0){s.toArray(l,0);for(let c=1,d=0;c!==e;++c)d+=i,n[c].toArray(l,d)}return l}function go(n,e){if(n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(n[i]!==e[i])return!1;return!0}function Ao(n,e){for(let i=0,s=e.length;i<s;i++)n[i]=e[i]}function pb(n,e){let i=KB[e];i===void 0&&(i=new Int32Array(e),KB[e]=i);for(let s=0;s!==e;++s)i[s]=n.allocateTextureUnit();return i}function gV(n,e){const i=this.cache;i[0]!==e&&(n.uniform1f(this.addr,e),i[0]=e)}function AV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(go(i,e))return;n.uniform2fv(this.addr,e),Ao(i,e)}}function vV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(e.r!==void 0)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(go(i,e))return;n.uniform3fv(this.addr,e),Ao(i,e)}}function yV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(go(i,e))return;n.uniform4fv(this.addr,e),Ao(i,e)}}function xV(n,e){const i=this.cache,s=e.elements;if(s===void 0){if(go(i,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ao(i,e)}else{if(go(i,s))return;qB.set(s),n.uniformMatrix2fv(this.addr,!1,qB),Ao(i,s)}}function EV(n,e){const i=this.cache,s=e.elements;if(s===void 0){if(go(i,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ao(i,e)}else{if(go(i,s))return;YB.set(s),n.uniformMatrix3fv(this.addr,!1,YB),Ao(i,s)}}function _V(n,e){const i=this.cache,s=e.elements;if(s===void 0){if(go(i,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ao(i,e)}else{if(go(i,s))return;XB.set(s),n.uniformMatrix4fv(this.addr,!1,XB),Ao(i,s)}}function bV(n,e){const i=this.cache;i[0]!==e&&(n.uniform1i(this.addr,e),i[0]=e)}function wV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(go(i,e))return;n.uniform2iv(this.addr,e),Ao(i,e)}}function CV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(go(i,e))return;n.uniform3iv(this.addr,e),Ao(i,e)}}function MV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(go(i,e))return;n.uniform4iv(this.addr,e),Ao(i,e)}}function SV(n,e){const i=this.cache;i[0]!==e&&(n.uniform1ui(this.addr,e),i[0]=e)}function TV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(go(i,e))return;n.uniform2uiv(this.addr,e),Ao(i,e)}}function IV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(go(i,e))return;n.uniform3uiv(this.addr,e),Ao(i,e)}}function RV(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(go(i,e))return;n.uniform4uiv(this.addr,e),Ao(i,e)}}function LV(n,e,i){const s=this.cache,o=i.allocateTextureUnit();s[0]!==o&&(n.uniform1i(this.addr,o),s[0]=o),i.setTexture2D(e||BF,o)}function BV(n,e,i){const s=this.cache,o=i.allocateTextureUnit();s[0]!==o&&(n.uniform1i(this.addr,o),s[0]=o),i.setTexture3D(e||PF,o)}function DV(n,e,i){const s=this.cache,o=i.allocateTextureUnit();s[0]!==o&&(n.uniform1i(this.addr,o),s[0]=o),i.setTextureCube(e||OF,o)}function PV(n,e,i){const s=this.cache,o=i.allocateTextureUnit();s[0]!==o&&(n.uniform1i(this.addr,o),s[0]=o),i.setTexture2DArray(e||DF,o)}function OV(n){switch(n){case 5126:return gV;case 35664:return AV;case 35665:return vV;case 35666:return yV;case 35674:return xV;case 35675:return EV;case 35676:return _V;case 5124:case 35670:return bV;case 35667:case 35671:return wV;case 35668:case 35672:return CV;case 35669:case 35673:return MV;case 5125:return SV;case 36294:return TV;case 36295:return IV;case 36296:return RV;case 35678:case 36198:case 36298:case 36306:case 35682:return LV;case 35679:case 36299:case 36307:return BV;case 35680:case 36300:case 36308:case 36293:return DV;case 36289:case 36303:case 36311:case 36292:return PV}}function FV(n,e){n.uniform1fv(this.addr,e)}function kV(n,e){const i=r0(e,this.size,2);n.uniform2fv(this.addr,i)}function NV(n,e){const i=r0(e,this.size,3);n.uniform3fv(this.addr,i)}function UV(n,e){const i=r0(e,this.size,4);n.uniform4fv(this.addr,i)}function GV(n,e){const i=r0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,i)}function zV(n,e){const i=r0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,i)}function HV(n,e){const i=r0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,i)}function VV(n,e){n.uniform1iv(this.addr,e)}function jV(n,e){n.uniform2iv(this.addr,e)}function QV(n,e){n.uniform3iv(this.addr,e)}function WV(n,e){n.uniform4iv(this.addr,e)}function KV(n,e){n.uniform1uiv(this.addr,e)}function XV(n,e){n.uniform2uiv(this.addr,e)}function YV(n,e){n.uniform3uiv(this.addr,e)}function qV(n,e){n.uniform4uiv(this.addr,e)}function $V(n,e,i){const s=this.cache,o=e.length,l=pb(i,o);go(s,l)||(n.uniform1iv(this.addr,l),Ao(s,l));for(let c=0;c!==o;++c)i.setTexture2D(e[c]||BF,l[c])}function JV(n,e,i){const s=this.cache,o=e.length,l=pb(i,o);go(s,l)||(n.uniform1iv(this.addr,l),Ao(s,l));for(let c=0;c!==o;++c)i.setTexture3D(e[c]||PF,l[c])}function ZV(n,e,i){const s=this.cache,o=e.length,l=pb(i,o);go(s,l)||(n.uniform1iv(this.addr,l),Ao(s,l));for(let c=0;c!==o;++c)i.setTextureCube(e[c]||OF,l[c])}function ej(n,e,i){const s=this.cache,o=e.length,l=pb(i,o);go(s,l)||(n.uniform1iv(this.addr,l),Ao(s,l));for(let c=0;c!==o;++c)i.setTexture2DArray(e[c]||DF,l[c])}function tj(n){switch(n){case 5126:return FV;case 35664:return kV;case 35665:return NV;case 35666:return UV;case 35674:return GV;case 35675:return zV;case 35676:return HV;case 5124:case 35670:return VV;case 35667:case 35671:return jV;case 35668:case 35672:return QV;case 35669:case 35673:return WV;case 5125:return KV;case 36294:return XV;case 36295:return YV;case 36296:return qV;case 35678:case 36198:case 36298:case 36306:case 35682:return $V;case 35679:case 36299:case 36307:return JV;case 35680:case 36300:case 36308:case 36293:return ZV;case 36289:case 36303:case 36311:case 36292:return ej}}class nj{constructor(e,i,s){this.id=e,this.addr=s,this.cache=[],this.setValue=OV(i.type)}}class ij{constructor(e,i,s){this.id=e,this.addr=s,this.cache=[],this.size=i.size,this.setValue=tj(i.type)}}class rj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,s){const o=this.seq;for(let l=0,c=o.length;l!==c;++l){const d=o[l];d.setValue(e,i[d.id],s)}}}const BM=/(\w+)(\])?(\[|\.)?/g;function $B(n,e){n.seq.push(e),n.map[e.id]=e}function sj(n,e,i){const s=n.name,o=s.length;for(BM.lastIndex=0;;){const l=BM.exec(s),c=BM.lastIndex;let d=l[1];const u=l[2]==="]",f=l[3];if(u&&(d=d|0),f===void 0||f==="["&&c+2===o){$B(i,f===void 0?new nj(d,n,e):new ij(d,n,e));break}else{let g=i.map[d];g===void 0&&(g=new rj(d),$B(i,g)),i=g}}}class XE{constructor(e,i){this.seq=[],this.map={};const s=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let o=0;o<s;++o){const l=e.getActiveUniform(i,o),c=e.getUniformLocation(i,l.name);sj(l,c,this)}}setValue(e,i,s,o){const l=this.map[i];l!==void 0&&l.setValue(e,s,o)}setOptional(e,i,s){const o=i[s];o!==void 0&&this.setValue(e,s,o)}static upload(e,i,s,o){for(let l=0,c=i.length;l!==c;++l){const d=i[l],u=s[d.id];u.needsUpdate!==!1&&d.setValue(e,u.value,o)}}static seqWithValue(e,i){const s=[];for(let o=0,l=e.length;o!==l;++o){const c=e[o];c.id in i&&s.push(c)}return s}}function JB(n,e,i){const s=n.createShader(e);return n.shaderSource(s,i),n.compileShader(s),s}let oj=0;function aj(n,e){const i=n.split(`
`),s=[],o=Math.max(e-6,0),l=Math.min(e+6,i.length);for(let c=o;c<l;c++){const d=c+1;s.push(`${d===e?">":" "} ${d}: ${i[c]}`)}return s.join(`
`)}function lj(n){switch(n){case Tu:return["Linear","( value )"];case ms:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function ZB(n,e,i){const s=n.getShaderParameter(e,n.COMPILE_STATUS),o=n.getShaderInfoLog(e).trim();if(s&&o==="")return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const c=parseInt(l[1]);return i.toUpperCase()+`

`+o+`

`+aj(n.getShaderSource(e),c)}else return o}function cj(n,e){const i=lj(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function uj(n,e){let i;switch(e){case s9:i="Linear";break;case o9:i="Reinhard";break;case a9:i="OptimizedCineon";break;case l9:i="ACESFilmic";break;case c9:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+n+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function hj(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ev).join(`
`)}function dj(n){const e=[];for(const i in n){const s=n[i];s!==!1&&e.push("#define "+i+" "+s)}return e.join(`
`)}function fj(n,e){const i={},s=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const l=n.getActiveAttrib(e,o),c=l.name;let d=1;l.type===n.FLOAT_MAT2&&(d=2),l.type===n.FLOAT_MAT3&&(d=3),l.type===n.FLOAT_MAT4&&(d=4),i[c]={type:l.type,location:n.getAttribLocation(e,c),locationSize:d}}return i}function Ev(n){return n!==""}function eD(n,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const pj=/^[ \t]*#include +<([\w\d./]+)>/gm;function mT(n){return n.replace(pj,gj)}const mj=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function gj(n,e){let i=xr[e];if(i===void 0){const s=mj.get(e);if(s!==void 0)i=xr[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,s);else throw new Error("Can not resolve #include <"+e+">")}return mT(i)}const Aj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nD(n){return n.replace(Aj,vj)}function vj(n,e,i,s){let o="";for(let l=parseInt(e);l<parseInt(i);l++)o+=s.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function iD(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function yj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===lF?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===k7?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===uh&&(e="SHADOWMAP_TYPE_VSM"),e}function xj(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Xg:case Yg:e="ENVMAP_TYPE_CUBE";break;case cb:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ej(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Yg:e="ENVMAP_MODE_REFRACTION";break}return e}function _j(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Q3:e="ENVMAP_BLENDING_MULTIPLY";break;case i9:e="ENVMAP_BLENDING_MIX";break;case r9:e="ENVMAP_BLENDING_ADD";break}return e}function bj(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const i=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:s,maxMip:i}}function wj(n,e,i,s){const o=n.getContext(),l=i.defines;let c=i.vertexShader,d=i.fragmentShader;const u=yj(i),f=xj(i),A=Ej(i),g=_j(i),y=bj(i),v=i.isWebGL2?"":hj(i),_=dj(l),x=o.createProgram();let b,m,S=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(b=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_].filter(Ev).join(`
`),b.length>0&&(b+=`
`),m=[v,"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_].filter(Ev).join(`
`),m.length>0&&(m+=`
`)):(b=[iD(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+A:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ev).join(`
`),m=[v,iD(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+f:"",i.envMap?"#define "+A:"",i.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Wd?"#define TONE_MAPPING":"",i.toneMapping!==Wd?xr.tonemapping_pars_fragment:"",i.toneMapping!==Wd?uj("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",xr.colorspace_pars_fragment,cj("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Ev).join(`
`)),c=mT(c),c=eD(c,i),c=tD(c,i),d=mT(d),d=eD(d,i),d=tD(d,i),c=nD(c),d=nD(d),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,m=["#define varying in",i.glslVersion===bB?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===bB?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const C=S+b+c,M=S+m+d,T=JB(o,o.VERTEX_SHADER,C),N=JB(o,o.FRAGMENT_SHADER,M);if(o.attachShader(x,T),o.attachShader(x,N),i.index0AttributeName!==void 0?o.bindAttribLocation(x,0,i.index0AttributeName):i.morphTargets===!0&&o.bindAttribLocation(x,0,"position"),o.linkProgram(x),n.debug.checkShaderErrors){const D=o.getProgramInfoLog(x).trim(),z=o.getShaderInfoLog(T).trim(),Y=o.getShaderInfoLog(N).trim();let ne=!0,O=!0;if(o.getProgramParameter(x,o.LINK_STATUS)===!1)if(ne=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(o,x,T,N);else{const F=ZB(o,T,"vertex"),U=ZB(o,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(x,o.VALIDATE_STATUS)+`

Program Info Log: `+D+`
`+F+`
`+U)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(z===""||Y==="")&&(O=!1);O&&(this.diagnostics={runnable:ne,programLog:D,vertexShader:{log:z,prefix:b},fragmentShader:{log:Y,prefix:m}})}o.deleteShader(T),o.deleteShader(N);let P;this.getUniforms=function(){return P===void 0&&(P=new XE(o,x)),P};let k;return this.getAttributes=function(){return k===void 0&&(k=fj(o,x)),k},this.destroy=function(){s.releaseStatesOfProgram(this),o.deleteProgram(x),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=oj++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=N,this}let Cj=0;class Mj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.vertexShader,s=e.fragmentShader,o=this._getShaderStage(i),l=this._getShaderStage(s),c=this._getShaderCacheForMaterial(e);return c.has(o)===!1&&(c.add(o),o.usedTimes++),c.has(l)===!1&&(c.add(l),l.usedTimes++),this}remove(e){const i=this.materialCache.get(e);for(const s of i)s.usedTimes--,s.usedTimes===0&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const i=this.materialCache;let s=i.get(e);return s===void 0&&(s=new Set,i.set(e,s)),s}_getShaderStage(e){const i=this.shaderCache;let s=i.get(e);return s===void 0&&(s=new Sj(e),i.set(e,s)),s}}class Sj{constructor(e){this.id=Cj++,this.code=e,this.usedTimes=0}}function Tj(n,e,i,s,o,l,c){const d=new X3,u=new Mj,f=[],A=o.isWebGL2,g=o.logarithmicDepthBuffer,y=o.vertexTextures;let v=o.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(D){return D===0?"uv":`uv${D}`}function b(D,z,Y,ne,O){const F=ne.fog,U=O.geometry,G=D.isMeshStandardMaterial?ne.environment:null,V=(D.isMeshStandardMaterial?i:e).get(D.envMap||G),K=V&&V.mapping===cb?V.image.height:null,W=_[D.type];D.precision!==null&&(v=o.getMaxPrecision(D.precision),v!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",v,"instead."));const J=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,ee=J!==void 0?J.length:0;let he=0;U.morphAttributes.position!==void 0&&(he=1),U.morphAttributes.normal!==void 0&&(he=2),U.morphAttributes.color!==void 0&&(he=3);let me,Be,Se,rt;if(W){const Pi=_u[W];me=Pi.vertexShader,Be=Pi.fragmentShader}else me=D.vertexShader,Be=D.fragmentShader,u.update(D),Se=u.getVertexShaderID(D),rt=u.getFragmentShaderID(D);const Ge=n.getRenderTarget(),st=O.isInstancedMesh===!0,mt=!!D.map,Ft=!!D.matcap,Pt=!!V,nt=!!D.aoMap,Fn=!!D.lightMap,Xt=!!D.bumpMap,on=!!D.normalMap,nn=!!D.displacementMap,vn=!!D.emissiveMap,Rn=!!D.metalnessMap,zn=!!D.roughnessMap,Wn=D.anisotropy>0,Ai=D.clearcoat>0,Ti=D.iridescence>0,Je=D.sheen>0,we=D.transmission>0,ge=Wn&&!!D.anisotropyMap,_e=Ai&&!!D.clearcoatMap,Pe=Ai&&!!D.clearcoatNormalMap,Te=Ai&&!!D.clearcoatRoughnessMap,He=Ti&&!!D.iridescenceMap,Fe=Ti&&!!D.iridescenceThicknessMap,Ue=Je&&!!D.sheenColorMap,Ae=Je&&!!D.sheenRoughnessMap,Xe=!!D.specularMap,dt=!!D.specularColorMap,ue=!!D.specularIntensityMap,q=we&&!!D.transmissionMap,re=we&&!!D.thicknessMap,ke=!!D.gradientMap,be=!!D.alphaMap,qe=D.alphaTest>0,Qe=!!D.alphaHash,It=!!D.extensions,Ot=!!U.attributes.uv1,Jt=!!U.attributes.uv2,dn=!!U.attributes.uv3;let Sn=Wd;return D.toneMapped&&(Ge===null||Ge.isXRRenderTarget===!0)&&(Sn=n.toneMapping),{isWebGL2:A,shaderID:W,shaderType:D.type,shaderName:D.name,vertexShader:me,fragmentShader:Be,defines:D.defines,customVertexShaderID:Se,customFragmentShaderID:rt,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:v,instancing:st,instancingColor:st&&O.instanceColor!==null,supportsVertexTextures:y,outputColorSpace:Ge===null?n.outputColorSpace:Ge.isXRRenderTarget===!0?Ge.texture.colorSpace:Tu,map:mt,matcap:Ft,envMap:Pt,envMapMode:Pt&&V.mapping,envMapCubeUVHeight:K,aoMap:nt,lightMap:Fn,bumpMap:Xt,normalMap:on,displacementMap:y&&nn,emissiveMap:vn,normalMapObjectSpace:on&&D.normalMapType===_9,normalMapTangentSpace:on&&D.normalMapType===yF,metalnessMap:Rn,roughnessMap:zn,anisotropy:Wn,anisotropyMap:ge,clearcoat:Ai,clearcoatMap:_e,clearcoatNormalMap:Pe,clearcoatRoughnessMap:Te,iridescence:Ti,iridescenceMap:He,iridescenceThicknessMap:Fe,sheen:Je,sheenColorMap:Ue,sheenRoughnessMap:Ae,specularMap:Xe,specularColorMap:dt,specularIntensityMap:ue,transmission:we,transmissionMap:q,thicknessMap:re,gradientMap:ke,opaque:D.transparent===!1&&D.blending===kg,alphaMap:be,alphaTest:qe,alphaHash:Qe,combine:D.combine,mapUv:mt&&x(D.map.channel),aoMapUv:nt&&x(D.aoMap.channel),lightMapUv:Fn&&x(D.lightMap.channel),bumpMapUv:Xt&&x(D.bumpMap.channel),normalMapUv:on&&x(D.normalMap.channel),displacementMapUv:nn&&x(D.displacementMap.channel),emissiveMapUv:vn&&x(D.emissiveMap.channel),metalnessMapUv:Rn&&x(D.metalnessMap.channel),roughnessMapUv:zn&&x(D.roughnessMap.channel),anisotropyMapUv:ge&&x(D.anisotropyMap.channel),clearcoatMapUv:_e&&x(D.clearcoatMap.channel),clearcoatNormalMapUv:Pe&&x(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Te&&x(D.clearcoatRoughnessMap.channel),iridescenceMapUv:He&&x(D.iridescenceMap.channel),iridescenceThicknessMapUv:Fe&&x(D.iridescenceThicknessMap.channel),sheenColorMapUv:Ue&&x(D.sheenColorMap.channel),sheenRoughnessMapUv:Ae&&x(D.sheenRoughnessMap.channel),specularMapUv:Xe&&x(D.specularMap.channel),specularColorMapUv:dt&&x(D.specularColorMap.channel),specularIntensityMapUv:ue&&x(D.specularIntensityMap.channel),transmissionMapUv:q&&x(D.transmissionMap.channel),thicknessMapUv:re&&x(D.thicknessMap.channel),alphaMapUv:be&&x(D.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(on||Wn),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUv1s:Ot,vertexUv2s:Jt,vertexUv3s:dn,pointsUvs:O.isPoints===!0&&!!U.attributes.uv&&(mt||be),fog:!!F,useFog:D.fog===!0,fogExp2:F&&F.isFogExp2,flatShading:D.flatShading===!0,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:g,skinning:O.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:he,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:Sn,useLegacyLights:n._useLegacyLights,decodeVideoTexture:mt&&D.map.isVideoTexture===!0&&D.map.colorSpace===ms,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===gh,flipSided:D.side===La,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionDerivatives:It&&D.extensions.derivatives===!0,extensionFragDepth:It&&D.extensions.fragDepth===!0,extensionDrawBuffers:It&&D.extensions.drawBuffers===!0,extensionShaderTextureLOD:It&&D.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:A||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:A||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:A||s.has("EXT_shader_texture_lod"),customProgramCacheKey:D.customProgramCacheKey()}}function m(D){const z=[];if(D.shaderID?z.push(D.shaderID):(z.push(D.customVertexShaderID),z.push(D.customFragmentShaderID)),D.defines!==void 0)for(const Y in D.defines)z.push(Y),z.push(D.defines[Y]);return D.isRawShaderMaterial===!1&&(S(z,D),C(z,D),z.push(n.outputColorSpace)),z.push(D.customProgramCacheKey),z.join()}function S(D,z){D.push(z.precision),D.push(z.outputColorSpace),D.push(z.envMapMode),D.push(z.envMapCubeUVHeight),D.push(z.mapUv),D.push(z.alphaMapUv),D.push(z.lightMapUv),D.push(z.aoMapUv),D.push(z.bumpMapUv),D.push(z.normalMapUv),D.push(z.displacementMapUv),D.push(z.emissiveMapUv),D.push(z.metalnessMapUv),D.push(z.roughnessMapUv),D.push(z.anisotropyMapUv),D.push(z.clearcoatMapUv),D.push(z.clearcoatNormalMapUv),D.push(z.clearcoatRoughnessMapUv),D.push(z.iridescenceMapUv),D.push(z.iridescenceThicknessMapUv),D.push(z.sheenColorMapUv),D.push(z.sheenRoughnessMapUv),D.push(z.specularMapUv),D.push(z.specularColorMapUv),D.push(z.specularIntensityMapUv),D.push(z.transmissionMapUv),D.push(z.thicknessMapUv),D.push(z.combine),D.push(z.fogExp2),D.push(z.sizeAttenuation),D.push(z.morphTargetsCount),D.push(z.morphAttributeCount),D.push(z.numDirLights),D.push(z.numPointLights),D.push(z.numSpotLights),D.push(z.numSpotLightMaps),D.push(z.numHemiLights),D.push(z.numRectAreaLights),D.push(z.numDirLightShadows),D.push(z.numPointLightShadows),D.push(z.numSpotLightShadows),D.push(z.numSpotLightShadowsWithMaps),D.push(z.shadowMapType),D.push(z.toneMapping),D.push(z.numClippingPlanes),D.push(z.numClipIntersection),D.push(z.depthPacking)}function C(D,z){d.disableAll(),z.isWebGL2&&d.enable(0),z.supportsVertexTextures&&d.enable(1),z.instancing&&d.enable(2),z.instancingColor&&d.enable(3),z.matcap&&d.enable(4),z.envMap&&d.enable(5),z.normalMapObjectSpace&&d.enable(6),z.normalMapTangentSpace&&d.enable(7),z.clearcoat&&d.enable(8),z.iridescence&&d.enable(9),z.alphaTest&&d.enable(10),z.vertexColors&&d.enable(11),z.vertexAlphas&&d.enable(12),z.vertexUv1s&&d.enable(13),z.vertexUv2s&&d.enable(14),z.vertexUv3s&&d.enable(15),z.vertexTangents&&d.enable(16),z.anisotropy&&d.enable(17),D.push(d.mask),d.disableAll(),z.fog&&d.enable(0),z.useFog&&d.enable(1),z.flatShading&&d.enable(2),z.logarithmicDepthBuffer&&d.enable(3),z.skinning&&d.enable(4),z.morphTargets&&d.enable(5),z.morphNormals&&d.enable(6),z.morphColors&&d.enable(7),z.premultipliedAlpha&&d.enable(8),z.shadowMapEnabled&&d.enable(9),z.useLegacyLights&&d.enable(10),z.doubleSided&&d.enable(11),z.flipSided&&d.enable(12),z.useDepthPacking&&d.enable(13),z.dithering&&d.enable(14),z.transmission&&d.enable(15),z.sheen&&d.enable(16),z.opaque&&d.enable(17),z.pointsUvs&&d.enable(18),z.decodeVideoTexture&&d.enable(19),D.push(d.mask)}function M(D){const z=_[D.type];let Y;if(z){const ne=_u[z];Y=TF.clone(ne.uniforms)}else Y=D.uniforms;return Y}function T(D,z){let Y;for(let ne=0,O=f.length;ne<O;ne++){const F=f[ne];if(F.cacheKey===z){Y=F,++Y.usedTimes;break}}return Y===void 0&&(Y=new wj(n,z,D,l),f.push(Y)),Y}function N(D){if(--D.usedTimes===0){const z=f.indexOf(D);f[z]=f[f.length-1],f.pop(),D.destroy()}}function P(D){u.remove(D)}function k(){u.dispose()}return{getParameters:b,getProgramCacheKey:m,getUniforms:M,acquireProgram:T,releaseProgram:N,releaseShaderCache:P,programs:f,dispose:k}}function Ij(){let n=new WeakMap;function e(l){let c=n.get(l);return c===void 0&&(c={},n.set(l,c)),c}function i(l){n.delete(l)}function s(l,c,d){n.get(l)[c]=d}function o(){n=new WeakMap}return{get:e,remove:i,update:s,dispose:o}}function Rj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function rD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function sD(){const n=[];let e=0;const i=[],s=[],o=[];function l(){e=0,i.length=0,s.length=0,o.length=0}function c(g,y,v,_,x,b){let m=n[e];return m===void 0?(m={id:g.id,object:g,geometry:y,material:v,groupOrder:_,renderOrder:g.renderOrder,z:x,group:b},n[e]=m):(m.id=g.id,m.object=g,m.geometry=y,m.material=v,m.groupOrder=_,m.renderOrder=g.renderOrder,m.z=x,m.group=b),e++,m}function d(g,y,v,_,x,b){const m=c(g,y,v,_,x,b);v.transmission>0?s.push(m):v.transparent===!0?o.push(m):i.push(m)}function u(g,y,v,_,x,b){const m=c(g,y,v,_,x,b);v.transmission>0?s.unshift(m):v.transparent===!0?o.unshift(m):i.unshift(m)}function f(g,y){i.length>1&&i.sort(g||Rj),s.length>1&&s.sort(y||rD),o.length>1&&o.sort(y||rD)}function A(){for(let g=e,y=n.length;g<y;g++){const v=n[g];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:i,transmissive:s,transparent:o,init:l,push:d,unshift:u,finish:A,sort:f}}function Lj(){let n=new WeakMap;function e(s,o){const l=n.get(s);let c;return l===void 0?(c=new sD,n.set(s,[c])):o>=l.length?(c=new sD,l.push(c)):c=l[o],c}function i(){n=new WeakMap}return{get:e,dispose:i}}function Bj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new ht,color:new jr};break;case"SpotLight":i={position:new ht,direction:new ht,color:new jr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new ht,color:new jr,distance:0,decay:0};break;case"HemisphereLight":i={direction:new ht,skyColor:new jr,groundColor:new jr};break;case"RectAreaLight":i={color:new jr,position:new ht,halfWidth:new ht,halfHeight:new ht};break}return n[e.id]=i,i}}}function Dj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=i,i}}}let Pj=0;function Oj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Fj(n,e){const i=new Bj,s=Dj(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let A=0;A<9;A++)o.probe.push(new ht);const l=new ht,c=new Os,d=new Os;function u(A,g){let y=0,v=0,_=0;for(let Y=0;Y<9;Y++)o.probe[Y].set(0,0,0);let x=0,b=0,m=0,S=0,C=0,M=0,T=0,N=0,P=0,k=0;A.sort(Oj);const D=g===!0?Math.PI:1;for(let Y=0,ne=A.length;Y<ne;Y++){const O=A[Y],F=O.color,U=O.intensity,G=O.distance,V=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)y+=F.r*U*D,v+=F.g*U*D,_+=F.b*U*D;else if(O.isLightProbe)for(let K=0;K<9;K++)o.probe[K].addScaledVector(O.sh.coefficients[K],U);else if(O.isDirectionalLight){const K=i.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity*D),O.castShadow){const W=O.shadow,J=s.get(O);J.shadowBias=W.bias,J.shadowNormalBias=W.normalBias,J.shadowRadius=W.radius,J.shadowMapSize=W.mapSize,o.directionalShadow[x]=J,o.directionalShadowMap[x]=V,o.directionalShadowMatrix[x]=O.shadow.matrix,M++}o.directional[x]=K,x++}else if(O.isSpotLight){const K=i.get(O);K.position.setFromMatrixPosition(O.matrixWorld),K.color.copy(F).multiplyScalar(U*D),K.distance=G,K.coneCos=Math.cos(O.angle),K.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),K.decay=O.decay,o.spot[m]=K;const W=O.shadow;if(O.map&&(o.spotLightMap[P]=O.map,P++,W.updateMatrices(O),O.castShadow&&k++),o.spotLightMatrix[m]=W.matrix,O.castShadow){const J=s.get(O);J.shadowBias=W.bias,J.shadowNormalBias=W.normalBias,J.shadowRadius=W.radius,J.shadowMapSize=W.mapSize,o.spotShadow[m]=J,o.spotShadowMap[m]=V,N++}m++}else if(O.isRectAreaLight){const K=i.get(O);K.color.copy(F).multiplyScalar(U),K.halfWidth.set(O.width*.5,0,0),K.halfHeight.set(0,O.height*.5,0),o.rectArea[S]=K,S++}else if(O.isPointLight){const K=i.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity*D),K.distance=O.distance,K.decay=O.decay,O.castShadow){const W=O.shadow,J=s.get(O);J.shadowBias=W.bias,J.shadowNormalBias=W.normalBias,J.shadowRadius=W.radius,J.shadowMapSize=W.mapSize,J.shadowCameraNear=W.camera.near,J.shadowCameraFar=W.camera.far,o.pointShadow[b]=J,o.pointShadowMap[b]=V,o.pointShadowMatrix[b]=O.shadow.matrix,T++}o.point[b]=K,b++}else if(O.isHemisphereLight){const K=i.get(O);K.skyColor.copy(O.color).multiplyScalar(U*D),K.groundColor.copy(O.groundColor).multiplyScalar(U*D),o.hemi[C]=K,C++}}S>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Yn.LTC_FLOAT_1,o.rectAreaLTC2=Yn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Yn.LTC_HALF_1,o.rectAreaLTC2=Yn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=y,o.ambient[1]=v,o.ambient[2]=_;const z=o.hash;(z.directionalLength!==x||z.pointLength!==b||z.spotLength!==m||z.rectAreaLength!==S||z.hemiLength!==C||z.numDirectionalShadows!==M||z.numPointShadows!==T||z.numSpotShadows!==N||z.numSpotMaps!==P)&&(o.directional.length=x,o.spot.length=m,o.rectArea.length=S,o.point.length=b,o.hemi.length=C,o.directionalShadow.length=M,o.directionalShadowMap.length=M,o.pointShadow.length=T,o.pointShadowMap.length=T,o.spotShadow.length=N,o.spotShadowMap.length=N,o.directionalShadowMatrix.length=M,o.pointShadowMatrix.length=T,o.spotLightMatrix.length=N+P-k,o.spotLightMap.length=P,o.numSpotLightShadowsWithMaps=k,z.directionalLength=x,z.pointLength=b,z.spotLength=m,z.rectAreaLength=S,z.hemiLength=C,z.numDirectionalShadows=M,z.numPointShadows=T,z.numSpotShadows=N,z.numSpotMaps=P,o.version=Pj++)}function f(A,g){let y=0,v=0,_=0,x=0,b=0;const m=g.matrixWorldInverse;for(let S=0,C=A.length;S<C;S++){const M=A[S];if(M.isDirectionalLight){const T=o.directional[y];T.direction.setFromMatrixPosition(M.matrixWorld),l.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(l),T.direction.transformDirection(m),y++}else if(M.isSpotLight){const T=o.spot[_];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(m),T.direction.setFromMatrixPosition(M.matrixWorld),l.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(l),T.direction.transformDirection(m),_++}else if(M.isRectAreaLight){const T=o.rectArea[x];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(m),d.identity(),c.copy(M.matrixWorld),c.premultiply(m),d.extractRotation(c),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),T.halfWidth.applyMatrix4(d),T.halfHeight.applyMatrix4(d),x++}else if(M.isPointLight){const T=o.point[v];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(m),v++}else if(M.isHemisphereLight){const T=o.hemi[b];T.direction.setFromMatrixPosition(M.matrixWorld),T.direction.transformDirection(m),b++}}}return{setup:u,setupView:f,state:o}}function oD(n,e){const i=new Fj(n,e),s=[],o=[];function l(){s.length=0,o.length=0}function c(g){s.push(g)}function d(g){o.push(g)}function u(g){i.setup(s,g)}function f(g){i.setupView(s,g)}return{init:l,state:{lightsArray:s,shadowsArray:o,lights:i},setupLights:u,setupLightsView:f,pushLight:c,pushShadow:d}}function kj(n,e){let i=new WeakMap;function s(l,c=0){const d=i.get(l);let u;return d===void 0?(u=new oD(n,e),i.set(l,[u])):c>=d.length?(u=new oD(n,e),d.push(u)):u=d[c],u}function o(){i=new WeakMap}return{get:s,dispose:o}}class Nj extends Rp{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=x9,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Uj extends Rp{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Gj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Hj(n,e,i){let s=new q3;const o=new jn,l=new jn,c=new Io,d=new Nj({depthPacking:E9}),u=new Uj,f={},A=i.maxTextureSize,g={[qd]:La,[La]:qd,[gh]:gh},y=new Lh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jn},radius:{value:4}},vertexShader:Gj,fragmentShader:zj}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const _=new Za;_.setAttribute("position",new Jl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Dc(_,y),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lF;let m=this.type;this.render=function(T,N,P){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||T.length===0)return;const k=n.getRenderTarget(),D=n.getActiveCubeFace(),z=n.getActiveMipmapLevel(),Y=n.state;Y.setBlending(bh),Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const ne=m!==uh&&this.type===uh,O=m===uh&&this.type!==uh;for(let F=0,U=T.length;F<U;F++){const G=T[F],V=G.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;o.copy(V.mapSize);const K=V.getFrameExtents();if(o.multiply(K),l.copy(V.mapSize),(o.x>A||o.y>A)&&(o.x>A&&(l.x=Math.floor(A/K.x),o.x=l.x*K.x,V.mapSize.x=l.x),o.y>A&&(l.y=Math.floor(A/K.y),o.y=l.y*K.y,V.mapSize.y=l.y)),V.map===null||ne===!0||O===!0){const J=this.type!==uh?{minFilter:Ta,magFilter:Ta}:{};V.map!==null&&V.map.dispose(),V.map=new $d(o.x,o.y,J),V.map.texture.name=G.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();const W=V.getViewportCount();for(let J=0;J<W;J++){const ee=V.getViewport(J);c.set(l.x*ee.x,l.y*ee.y,l.x*ee.z,l.y*ee.w),Y.viewport(c),V.updateMatrices(G,J),s=V.getFrustum(),M(N,P,V.camera,G,this.type)}V.isPointLightShadow!==!0&&this.type===uh&&S(V,P),V.needsUpdate=!1}m=this.type,b.needsUpdate=!1,n.setRenderTarget(k,D,z)};function S(T,N){const P=e.update(x);y.defines.VSM_SAMPLES!==T.blurSamples&&(y.defines.VSM_SAMPLES=T.blurSamples,v.defines.VSM_SAMPLES=T.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new $d(o.x,o.y)),y.uniforms.shadow_pass.value=T.map.texture,y.uniforms.resolution.value=T.mapSize,y.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(N,null,P,y,x,null),v.uniforms.shadow_pass.value=T.mapPass.texture,v.uniforms.resolution.value=T.mapSize,v.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(N,null,P,v,x,null)}function C(T,N,P,k){let D=null;const z=P.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(z!==void 0)D=z;else if(D=P.isPointLight===!0?u:d,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const Y=D.uuid,ne=N.uuid;let O=f[Y];O===void 0&&(O={},f[Y]=O);let F=O[ne];F===void 0&&(F=D.clone(),O[ne]=F),D=F}if(D.visible=N.visible,D.wireframe=N.wireframe,k===uh?D.side=N.shadowSide!==null?N.shadowSide:N.side:D.side=N.shadowSide!==null?N.shadowSide:g[N.side],D.alphaMap=N.alphaMap,D.alphaTest=N.alphaTest,D.map=N.map,D.clipShadows=N.clipShadows,D.clippingPlanes=N.clippingPlanes,D.clipIntersection=N.clipIntersection,D.displacementMap=N.displacementMap,D.displacementScale=N.displacementScale,D.displacementBias=N.displacementBias,D.wireframeLinewidth=N.wireframeLinewidth,D.linewidth=N.linewidth,P.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const Y=n.properties.get(D);Y.light=P}return D}function M(T,N,P,k,D){if(T.visible===!1)return;if(T.layers.test(N.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&D===uh)&&(!T.frustumCulled||s.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,T.matrixWorld);const ne=e.update(T),O=T.material;if(Array.isArray(O)){const F=ne.groups;for(let U=0,G=F.length;U<G;U++){const V=F[U],K=O[V.materialIndex];if(K&&K.visible){const W=C(T,K,k,D);n.renderBufferDirect(P,null,ne,W,T,V)}}}else if(O.visible){const F=C(T,O,k,D);n.renderBufferDirect(P,null,ne,F,T,null)}}const Y=T.children;for(let ne=0,O=Y.length;ne<O;ne++)M(Y[ne],N,P,k,D)}}function Vj(n,e,i){const s=i.isWebGL2;function o(){let be=!1;const qe=new Io;let Qe=null;const It=new Io(0,0,0,0);return{setMask:function(Ot){Qe!==Ot&&!be&&(n.colorMask(Ot,Ot,Ot,Ot),Qe=Ot)},setLocked:function(Ot){be=Ot},setClear:function(Ot,Jt,dn,Sn,er){er===!0&&(Ot*=Sn,Jt*=Sn,dn*=Sn),qe.set(Ot,Jt,dn,Sn),It.equals(qe)===!1&&(n.clearColor(Ot,Jt,dn,Sn),It.copy(qe))},reset:function(){be=!1,Qe=null,It.set(-1,0,0,0)}}}function l(){let be=!1,qe=null,Qe=null,It=null;return{setTest:function(Ot){Ot?Ge(n.DEPTH_TEST):st(n.DEPTH_TEST)},setMask:function(Ot){qe!==Ot&&!be&&(n.depthMask(Ot),qe=Ot)},setFunc:function(Ot){if(Qe!==Ot){switch(Ot){case q7:n.depthFunc(n.NEVER);break;case $7:n.depthFunc(n.ALWAYS);break;case J7:n.depthFunc(n.LESS);break;case oT:n.depthFunc(n.LEQUAL);break;case Z7:n.depthFunc(n.EQUAL);break;case e9:n.depthFunc(n.GEQUAL);break;case t9:n.depthFunc(n.GREATER);break;case n9:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Qe=Ot}},setLocked:function(Ot){be=Ot},setClear:function(Ot){It!==Ot&&(n.clearDepth(Ot),It=Ot)},reset:function(){be=!1,qe=null,Qe=null,It=null}}}function c(){let be=!1,qe=null,Qe=null,It=null,Ot=null,Jt=null,dn=null,Sn=null,er=null;return{setTest:function(Pi){be||(Pi?Ge(n.STENCIL_TEST):st(n.STENCIL_TEST))},setMask:function(Pi){qe!==Pi&&!be&&(n.stencilMask(Pi),qe=Pi)},setFunc:function(Pi,Ir,_i){(Qe!==Pi||It!==Ir||Ot!==_i)&&(n.stencilFunc(Pi,Ir,_i),Qe=Pi,It=Ir,Ot=_i)},setOp:function(Pi,Ir,_i){(Jt!==Pi||dn!==Ir||Sn!==_i)&&(n.stencilOp(Pi,Ir,_i),Jt=Pi,dn=Ir,Sn=_i)},setLocked:function(Pi){be=Pi},setClear:function(Pi){er!==Pi&&(n.clearStencil(Pi),er=Pi)},reset:function(){be=!1,qe=null,Qe=null,It=null,Ot=null,Jt=null,dn=null,Sn=null,er=null}}}const d=new o,u=new l,f=new c,A=new WeakMap,g=new WeakMap;let y={},v={},_=new WeakMap,x=[],b=null,m=!1,S=null,C=null,M=null,T=null,N=null,P=null,k=null,D=!1,z=null,Y=null,ne=null,O=null,F=null;const U=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,V=0;const K=n.getParameter(n.VERSION);K.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(K)[1]),G=V>=1):K.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),G=V>=2);let W=null,J={};const ee=n.getParameter(n.SCISSOR_BOX),he=n.getParameter(n.VIEWPORT),me=new Io().fromArray(ee),Be=new Io().fromArray(he);function Se(be,qe,Qe,It){const Ot=new Uint8Array(4),Jt=n.createTexture();n.bindTexture(be,Jt),n.texParameteri(be,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(be,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let dn=0;dn<Qe;dn++)s&&(be===n.TEXTURE_3D||be===n.TEXTURE_2D_ARRAY)?n.texImage3D(qe,0,n.RGBA,1,1,It,0,n.RGBA,n.UNSIGNED_BYTE,Ot):n.texImage2D(qe+dn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ot);return Jt}const rt={};rt[n.TEXTURE_2D]=Se(n.TEXTURE_2D,n.TEXTURE_2D,1),rt[n.TEXTURE_CUBE_MAP]=Se(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),s&&(rt[n.TEXTURE_2D_ARRAY]=Se(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),rt[n.TEXTURE_3D]=Se(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),d.setClear(0,0,0,1),u.setClear(1),f.setClear(0),Ge(n.DEPTH_TEST),u.setFunc(oT),nn(!1),vn(QL),Ge(n.CULL_FACE),Xt(bh);function Ge(be){y[be]!==!0&&(n.enable(be),y[be]=!0)}function st(be){y[be]!==!1&&(n.disable(be),y[be]=!1)}function mt(be,qe){return v[be]!==qe?(n.bindFramebuffer(be,qe),v[be]=qe,s&&(be===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=qe),be===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=qe)),!0):!1}function Ft(be,qe){let Qe=x,It=!1;if(be)if(Qe=_.get(qe),Qe===void 0&&(Qe=[],_.set(qe,Qe)),be.isWebGLMultipleRenderTargets){const Ot=be.texture;if(Qe.length!==Ot.length||Qe[0]!==n.COLOR_ATTACHMENT0){for(let Jt=0,dn=Ot.length;Jt<dn;Jt++)Qe[Jt]=n.COLOR_ATTACHMENT0+Jt;Qe.length=Ot.length,It=!0}}else Qe[0]!==n.COLOR_ATTACHMENT0&&(Qe[0]=n.COLOR_ATTACHMENT0,It=!0);else Qe[0]!==n.BACK&&(Qe[0]=n.BACK,It=!0);It&&(i.isWebGL2?n.drawBuffers(Qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Qe))}function Pt(be){return b!==be?(n.useProgram(be),b=be,!0):!1}const nt={[pg]:n.FUNC_ADD,[U7]:n.FUNC_SUBTRACT,[G7]:n.FUNC_REVERSE_SUBTRACT};if(s)nt[YL]=n.MIN,nt[qL]=n.MAX;else{const be=e.get("EXT_blend_minmax");be!==null&&(nt[YL]=be.MIN_EXT,nt[qL]=be.MAX_EXT)}const Fn={[z7]:n.ZERO,[H7]:n.ONE,[V7]:n.SRC_COLOR,[cF]:n.SRC_ALPHA,[Y7]:n.SRC_ALPHA_SATURATE,[K7]:n.DST_COLOR,[Q7]:n.DST_ALPHA,[j7]:n.ONE_MINUS_SRC_COLOR,[uF]:n.ONE_MINUS_SRC_ALPHA,[X7]:n.ONE_MINUS_DST_COLOR,[W7]:n.ONE_MINUS_DST_ALPHA};function Xt(be,qe,Qe,It,Ot,Jt,dn,Sn){if(be===bh){m===!0&&(st(n.BLEND),m=!1);return}if(m===!1&&(Ge(n.BLEND),m=!0),be!==N7){if(be!==S||Sn!==D){if((C!==pg||N!==pg)&&(n.blendEquation(n.FUNC_ADD),C=pg,N=pg),Sn)switch(be){case kg:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case WL:n.blendFunc(n.ONE,n.ONE);break;case KL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XL:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}else switch(be){case kg:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case WL:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case KL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XL:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}M=null,T=null,P=null,k=null,S=be,D=Sn}return}Ot=Ot||qe,Jt=Jt||Qe,dn=dn||It,(qe!==C||Ot!==N)&&(n.blendEquationSeparate(nt[qe],nt[Ot]),C=qe,N=Ot),(Qe!==M||It!==T||Jt!==P||dn!==k)&&(n.blendFuncSeparate(Fn[Qe],Fn[It],Fn[Jt],Fn[dn]),M=Qe,T=It,P=Jt,k=dn),S=be,D=!1}function on(be,qe){be.side===gh?st(n.CULL_FACE):Ge(n.CULL_FACE);let Qe=be.side===La;qe&&(Qe=!Qe),nn(Qe),be.blending===kg&&be.transparent===!1?Xt(bh):Xt(be.blending,be.blendEquation,be.blendSrc,be.blendDst,be.blendEquationAlpha,be.blendSrcAlpha,be.blendDstAlpha,be.premultipliedAlpha),u.setFunc(be.depthFunc),u.setTest(be.depthTest),u.setMask(be.depthWrite),d.setMask(be.colorWrite);const It=be.stencilWrite;f.setTest(It),It&&(f.setMask(be.stencilWriteMask),f.setFunc(be.stencilFunc,be.stencilRef,be.stencilFuncMask),f.setOp(be.stencilFail,be.stencilZFail,be.stencilZPass)),zn(be.polygonOffset,be.polygonOffsetFactor,be.polygonOffsetUnits),be.alphaToCoverage===!0?Ge(n.SAMPLE_ALPHA_TO_COVERAGE):st(n.SAMPLE_ALPHA_TO_COVERAGE)}function nn(be){z!==be&&(be?n.frontFace(n.CW):n.frontFace(n.CCW),z=be)}function vn(be){be!==O7?(Ge(n.CULL_FACE),be!==Y&&(be===QL?n.cullFace(n.BACK):be===F7?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):st(n.CULL_FACE),Y=be}function Rn(be){be!==ne&&(G&&n.lineWidth(be),ne=be)}function zn(be,qe,Qe){be?(Ge(n.POLYGON_OFFSET_FILL),(O!==qe||F!==Qe)&&(n.polygonOffset(qe,Qe),O=qe,F=Qe)):st(n.POLYGON_OFFSET_FILL)}function Wn(be){be?Ge(n.SCISSOR_TEST):st(n.SCISSOR_TEST)}function Ai(be){be===void 0&&(be=n.TEXTURE0+U-1),W!==be&&(n.activeTexture(be),W=be)}function Ti(be,qe,Qe){Qe===void 0&&(W===null?Qe=n.TEXTURE0+U-1:Qe=W);let It=J[Qe];It===void 0&&(It={type:void 0,texture:void 0},J[Qe]=It),(It.type!==be||It.texture!==qe)&&(W!==Qe&&(n.activeTexture(Qe),W=Qe),n.bindTexture(be,qe||rt[be]),It.type=be,It.texture=qe)}function Je(){const be=J[W];be!==void 0&&be.type!==void 0&&(n.bindTexture(be.type,null),be.type=void 0,be.texture=void 0)}function we(){try{n.compressedTexImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function ge(){try{n.compressedTexImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Pe(){try{n.texSubImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Te(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function He(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Fe(){try{n.texStorage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ae(){try{n.texImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Xe(){try{n.texImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function dt(be){me.equals(be)===!1&&(n.scissor(be.x,be.y,be.z,be.w),me.copy(be))}function ue(be){Be.equals(be)===!1&&(n.viewport(be.x,be.y,be.z,be.w),Be.copy(be))}function q(be,qe){let Qe=g.get(qe);Qe===void 0&&(Qe=new WeakMap,g.set(qe,Qe));let It=Qe.get(be);It===void 0&&(It=n.getUniformBlockIndex(qe,be.name),Qe.set(be,It))}function re(be,qe){const It=g.get(qe).get(be);A.get(qe)!==It&&(n.uniformBlockBinding(qe,It,be.__bindingPointIndex),A.set(qe,It))}function ke(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),s===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),y={},W=null,J={},v={},_=new WeakMap,x=[],b=null,m=!1,S=null,C=null,M=null,T=null,N=null,P=null,k=null,D=!1,z=null,Y=null,ne=null,O=null,F=null,me.set(0,0,n.canvas.width,n.canvas.height),Be.set(0,0,n.canvas.width,n.canvas.height),d.reset(),u.reset(),f.reset()}return{buffers:{color:d,depth:u,stencil:f},enable:Ge,disable:st,bindFramebuffer:mt,drawBuffers:Ft,useProgram:Pt,setBlending:Xt,setMaterial:on,setFlipSided:nn,setCullFace:vn,setLineWidth:Rn,setPolygonOffset:zn,setScissorTest:Wn,activeTexture:Ai,bindTexture:Ti,unbindTexture:Je,compressedTexImage2D:we,compressedTexImage3D:ge,texImage2D:Ae,texImage3D:Xe,updateUBOMapping:q,uniformBlockBinding:re,texStorage2D:Fe,texStorage3D:Ue,texSubImage2D:_e,texSubImage3D:Pe,compressedTexSubImage2D:Te,compressedTexSubImage3D:He,scissor:dt,viewport:ue,reset:ke}}function jj(n,e,i,s,o,l,c){const d=o.isWebGL2,u=o.maxTextures,f=o.maxCubemapSize,A=o.maxTextureSize,g=o.maxSamples,y=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let x;const b=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(Je,we){return m?new OffscreenCanvas(Je,we):uy("canvas")}function C(Je,we,ge,_e){let Pe=1;if((Je.width>_e||Je.height>_e)&&(Pe=_e/Math.max(Je.width,Je.height)),Pe<1||we===!0)if(typeof HTMLImageElement<"u"&&Je instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Je instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Je instanceof ImageBitmap){const Te=we?T_:Math.floor,He=Te(Pe*Je.width),Fe=Te(Pe*Je.height);x===void 0&&(x=S(He,Fe));const Ue=ge?S(He,Fe):x;return Ue.width=He,Ue.height=Fe,Ue.getContext("2d").drawImage(Je,0,0,He,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Je.width+"x"+Je.height+") to ("+He+"x"+Fe+")."),Ue}else return"data"in Je&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Je.width+"x"+Je.height+")."),Je;return Je}function M(Je){return fT(Je.width)&&fT(Je.height)}function T(Je){return d?!1:Je.wrapS!==Ic||Je.wrapT!==Ic||Je.minFilter!==Ta&&Je.minFilter!==yl}function N(Je,we){return Je.generateMipmaps&&we&&Je.minFilter!==Ta&&Je.minFilter!==yl}function P(Je){n.generateMipmap(Je)}function k(Je,we,ge,_e,Pe=!1){if(d===!1)return we;if(Je!==null){if(n[Je]!==void 0)return n[Je];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Je+"'")}let Te=we;return we===n.RED&&(ge===n.FLOAT&&(Te=n.R32F),ge===n.HALF_FLOAT&&(Te=n.R16F),ge===n.UNSIGNED_BYTE&&(Te=n.R8)),we===n.RED_INTEGER&&(ge===n.UNSIGNED_BYTE&&(Te=n.R8UI),ge===n.UNSIGNED_SHORT&&(Te=n.R16UI),ge===n.UNSIGNED_INT&&(Te=n.R32UI),ge===n.BYTE&&(Te=n.R8I),ge===n.SHORT&&(Te=n.R16I),ge===n.INT&&(Te=n.R32I)),we===n.RG&&(ge===n.FLOAT&&(Te=n.RG32F),ge===n.HALF_FLOAT&&(Te=n.RG16F),ge===n.UNSIGNED_BYTE&&(Te=n.RG8)),we===n.RGBA&&(ge===n.FLOAT&&(Te=n.RGBA32F),ge===n.HALF_FLOAT&&(Te=n.RGBA16F),ge===n.UNSIGNED_BYTE&&(Te=_e===ms&&Pe===!1?n.SRGB8_ALPHA8:n.RGBA8),ge===n.UNSIGNED_SHORT_4_4_4_4&&(Te=n.RGBA4),ge===n.UNSIGNED_SHORT_5_5_5_1&&(Te=n.RGB5_A1)),(Te===n.R16F||Te===n.R32F||Te===n.RG16F||Te===n.RG32F||Te===n.RGBA16F||Te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function D(Je,we,ge){return N(Je,ge)===!0||Je.isFramebufferTexture&&Je.minFilter!==Ta&&Je.minFilter!==yl?Math.log2(Math.max(we.width,we.height))+1:Je.mipmaps!==void 0&&Je.mipmaps.length>0?Je.mipmaps.length:Je.isCompressedTexture&&Array.isArray(Je.image)?we.mipmaps.length:1}function z(Je){return Je===Ta||Je===$L||Je===oM?n.NEAREST:n.LINEAR}function Y(Je){const we=Je.target;we.removeEventListener("dispose",Y),O(we),we.isVideoTexture&&_.delete(we)}function ne(Je){const we=Je.target;we.removeEventListener("dispose",ne),U(we)}function O(Je){const we=s.get(Je);if(we.__webglInit===void 0)return;const ge=Je.source,_e=b.get(ge);if(_e){const Pe=_e[we.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&F(Je),Object.keys(_e).length===0&&b.delete(ge)}s.remove(Je)}function F(Je){const we=s.get(Je);n.deleteTexture(we.__webglTexture);const ge=Je.source,_e=b.get(ge);delete _e[we.__cacheKey],c.memory.textures--}function U(Je){const we=Je.texture,ge=s.get(Je),_e=s.get(we);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),c.memory.textures--),Je.depthTexture&&Je.depthTexture.dispose(),Je.isWebGLCubeRenderTarget)for(let Pe=0;Pe<6;Pe++){if(Array.isArray(ge.__webglFramebuffer[Pe]))for(let Te=0;Te<ge.__webglFramebuffer[Pe].length;Te++)n.deleteFramebuffer(ge.__webglFramebuffer[Pe][Te]);else n.deleteFramebuffer(ge.__webglFramebuffer[Pe]);ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer[Pe])}else{if(Array.isArray(ge.__webglFramebuffer))for(let Pe=0;Pe<ge.__webglFramebuffer.length;Pe++)n.deleteFramebuffer(ge.__webglFramebuffer[Pe]);else n.deleteFramebuffer(ge.__webglFramebuffer);if(ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let Pe=0;Pe<ge.__webglColorRenderbuffer.length;Pe++)ge.__webglColorRenderbuffer[Pe]&&n.deleteRenderbuffer(ge.__webglColorRenderbuffer[Pe]);ge.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(Je.isWebGLMultipleRenderTargets)for(let Pe=0,Te=we.length;Pe<Te;Pe++){const He=s.get(we[Pe]);He.__webglTexture&&(n.deleteTexture(He.__webglTexture),c.memory.textures--),s.remove(we[Pe])}s.remove(we),s.remove(Je)}let G=0;function V(){G=0}function K(){const Je=G;return Je>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Je+" texture units while this GPU supports only "+u),G+=1,Je}function W(Je){const we=[];return we.push(Je.wrapS),we.push(Je.wrapT),we.push(Je.wrapR||0),we.push(Je.magFilter),we.push(Je.minFilter),we.push(Je.anisotropy),we.push(Je.internalFormat),we.push(Je.format),we.push(Je.type),we.push(Je.generateMipmaps),we.push(Je.premultiplyAlpha),we.push(Je.flipY),we.push(Je.unpackAlignment),we.push(Je.colorSpace),we.join()}function J(Je,we){const ge=s.get(Je);if(Je.isVideoTexture&&Ai(Je),Je.isRenderTargetTexture===!1&&Je.version>0&&ge.__version!==Je.version){const _e=Je.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{mt(ge,Je,we);return}}i.bindTexture(n.TEXTURE_2D,ge.__webglTexture,n.TEXTURE0+we)}function ee(Je,we){const ge=s.get(Je);if(Je.version>0&&ge.__version!==Je.version){mt(ge,Je,we);return}i.bindTexture(n.TEXTURE_2D_ARRAY,ge.__webglTexture,n.TEXTURE0+we)}function he(Je,we){const ge=s.get(Je);if(Je.version>0&&ge.__version!==Je.version){mt(ge,Je,we);return}i.bindTexture(n.TEXTURE_3D,ge.__webglTexture,n.TEXTURE0+we)}function me(Je,we){const ge=s.get(Je);if(Je.version>0&&ge.__version!==Je.version){Ft(ge,Je,we);return}i.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture,n.TEXTURE0+we)}const Be={[cT]:n.REPEAT,[Ic]:n.CLAMP_TO_EDGE,[uT]:n.MIRRORED_REPEAT},Se={[Ta]:n.NEAREST,[$L]:n.NEAREST_MIPMAP_NEAREST,[oM]:n.NEAREST_MIPMAP_LINEAR,[yl]:n.LINEAR,[u9]:n.LINEAR_MIPMAP_NEAREST,[ly]:n.LINEAR_MIPMAP_LINEAR},rt={[w9]:n.NEVER,[L9]:n.ALWAYS,[C9]:n.LESS,[S9]:n.LEQUAL,[M9]:n.EQUAL,[R9]:n.GEQUAL,[T9]:n.GREATER,[I9]:n.NOTEQUAL};function Ge(Je,we,ge){if(ge?(n.texParameteri(Je,n.TEXTURE_WRAP_S,Be[we.wrapS]),n.texParameteri(Je,n.TEXTURE_WRAP_T,Be[we.wrapT]),(Je===n.TEXTURE_3D||Je===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Je,n.TEXTURE_WRAP_R,Be[we.wrapR]),n.texParameteri(Je,n.TEXTURE_MAG_FILTER,Se[we.magFilter]),n.texParameteri(Je,n.TEXTURE_MIN_FILTER,Se[we.minFilter])):(n.texParameteri(Je,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(Je,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(Je===n.TEXTURE_3D||Je===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Je,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(we.wrapS!==Ic||we.wrapT!==Ic)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Je,n.TEXTURE_MAG_FILTER,z(we.magFilter)),n.texParameteri(Je,n.TEXTURE_MIN_FILTER,z(we.minFilter)),we.minFilter!==Ta&&we.minFilter!==yl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),we.compareFunction&&(n.texParameteri(Je,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Je,n.TEXTURE_COMPARE_FUNC,rt[we.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(we.magFilter===Ta||we.minFilter!==oM&&we.minFilter!==ly||we.type===kd&&e.has("OES_texture_float_linear")===!1||d===!1&&we.type===qg&&e.has("OES_texture_half_float_linear")===!1)return;(we.anisotropy>1||s.get(we).__currentAnisotropy)&&(n.texParameterf(Je,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(we.anisotropy,o.getMaxAnisotropy())),s.get(we).__currentAnisotropy=we.anisotropy)}}function st(Je,we){let ge=!1;Je.__webglInit===void 0&&(Je.__webglInit=!0,we.addEventListener("dispose",Y));const _e=we.source;let Pe=b.get(_e);Pe===void 0&&(Pe={},b.set(_e,Pe));const Te=W(we);if(Te!==Je.__cacheKey){Pe[Te]===void 0&&(Pe[Te]={texture:n.createTexture(),usedTimes:0},c.memory.textures++,ge=!0),Pe[Te].usedTimes++;const He=Pe[Je.__cacheKey];He!==void 0&&(Pe[Je.__cacheKey].usedTimes--,He.usedTimes===0&&F(we)),Je.__cacheKey=Te,Je.__webglTexture=Pe[Te].texture}return ge}function mt(Je,we,ge){let _e=n.TEXTURE_2D;(we.isDataArrayTexture||we.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),we.isData3DTexture&&(_e=n.TEXTURE_3D);const Pe=st(Je,we),Te=we.source;i.bindTexture(_e,Je.__webglTexture,n.TEXTURE0+ge);const He=s.get(Te);if(Te.version!==He.__version||Pe===!0){i.activeTexture(n.TEXTURE0+ge),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,we.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,we.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Fe=T(we)&&M(we.image)===!1;let Ue=C(we.image,Fe,!1,A);Ue=Ti(we,Ue);const Ae=M(Ue)||d,Xe=l.convert(we.format,we.colorSpace);let dt=l.convert(we.type),ue=k(we.internalFormat,Xe,dt,we.colorSpace,we.isVideoTexture);Ge(_e,we,Ae);let q;const re=we.mipmaps,ke=d&&we.isVideoTexture!==!0,be=He.__version===void 0||Pe===!0,qe=D(we,Ue,Ae);if(we.isDepthTexture)ue=n.DEPTH_COMPONENT,d?we.type===kd?ue=n.DEPTH_COMPONENT32F:we.type===Fd?ue=n.DEPTH_COMPONENT24:we.type===gp?ue=n.DEPTH24_STENCIL8:ue=n.DEPTH_COMPONENT16:we.type===kd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),we.format===Ap&&ue===n.DEPTH_COMPONENT&&we.type!==W3&&we.type!==Fd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),we.type=Fd,dt=l.convert(we.type)),we.format===$g&&ue===n.DEPTH_COMPONENT&&(ue=n.DEPTH_STENCIL,we.type!==gp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),we.type=gp,dt=l.convert(we.type))),be&&(ke?i.texStorage2D(n.TEXTURE_2D,1,ue,Ue.width,Ue.height):i.texImage2D(n.TEXTURE_2D,0,ue,Ue.width,Ue.height,0,Xe,dt,null));else if(we.isDataTexture)if(re.length>0&&Ae){ke&&be&&i.texStorage2D(n.TEXTURE_2D,qe,ue,re[0].width,re[0].height);for(let Qe=0,It=re.length;Qe<It;Qe++)q=re[Qe],ke?i.texSubImage2D(n.TEXTURE_2D,Qe,0,0,q.width,q.height,Xe,dt,q.data):i.texImage2D(n.TEXTURE_2D,Qe,ue,q.width,q.height,0,Xe,dt,q.data);we.generateMipmaps=!1}else ke?(be&&i.texStorage2D(n.TEXTURE_2D,qe,ue,Ue.width,Ue.height),i.texSubImage2D(n.TEXTURE_2D,0,0,0,Ue.width,Ue.height,Xe,dt,Ue.data)):i.texImage2D(n.TEXTURE_2D,0,ue,Ue.width,Ue.height,0,Xe,dt,Ue.data);else if(we.isCompressedTexture)if(we.isCompressedArrayTexture){ke&&be&&i.texStorage3D(n.TEXTURE_2D_ARRAY,qe,ue,re[0].width,re[0].height,Ue.depth);for(let Qe=0,It=re.length;Qe<It;Qe++)q=re[Qe],we.format!==Rc?Xe!==null?ke?i.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,q.width,q.height,Ue.depth,Xe,q.data,0,0):i.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Qe,ue,q.width,q.height,Ue.depth,0,q.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ke?i.texSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,q.width,q.height,Ue.depth,Xe,dt,q.data):i.texImage3D(n.TEXTURE_2D_ARRAY,Qe,ue,q.width,q.height,Ue.depth,0,Xe,dt,q.data)}else{ke&&be&&i.texStorage2D(n.TEXTURE_2D,qe,ue,re[0].width,re[0].height);for(let Qe=0,It=re.length;Qe<It;Qe++)q=re[Qe],we.format!==Rc?Xe!==null?ke?i.compressedTexSubImage2D(n.TEXTURE_2D,Qe,0,0,q.width,q.height,Xe,q.data):i.compressedTexImage2D(n.TEXTURE_2D,Qe,ue,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ke?i.texSubImage2D(n.TEXTURE_2D,Qe,0,0,q.width,q.height,Xe,dt,q.data):i.texImage2D(n.TEXTURE_2D,Qe,ue,q.width,q.height,0,Xe,dt,q.data)}else if(we.isDataArrayTexture)ke?(be&&i.texStorage3D(n.TEXTURE_2D_ARRAY,qe,ue,Ue.width,Ue.height,Ue.depth),i.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ue.width,Ue.height,Ue.depth,Xe,dt,Ue.data)):i.texImage3D(n.TEXTURE_2D_ARRAY,0,ue,Ue.width,Ue.height,Ue.depth,0,Xe,dt,Ue.data);else if(we.isData3DTexture)ke?(be&&i.texStorage3D(n.TEXTURE_3D,qe,ue,Ue.width,Ue.height,Ue.depth),i.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ue.width,Ue.height,Ue.depth,Xe,dt,Ue.data)):i.texImage3D(n.TEXTURE_3D,0,ue,Ue.width,Ue.height,Ue.depth,0,Xe,dt,Ue.data);else if(we.isFramebufferTexture){if(be)if(ke)i.texStorage2D(n.TEXTURE_2D,qe,ue,Ue.width,Ue.height);else{let Qe=Ue.width,It=Ue.height;for(let Ot=0;Ot<qe;Ot++)i.texImage2D(n.TEXTURE_2D,Ot,ue,Qe,It,0,Xe,dt,null),Qe>>=1,It>>=1}}else if(re.length>0&&Ae){ke&&be&&i.texStorage2D(n.TEXTURE_2D,qe,ue,re[0].width,re[0].height);for(let Qe=0,It=re.length;Qe<It;Qe++)q=re[Qe],ke?i.texSubImage2D(n.TEXTURE_2D,Qe,0,0,Xe,dt,q):i.texImage2D(n.TEXTURE_2D,Qe,ue,Xe,dt,q);we.generateMipmaps=!1}else ke?(be&&i.texStorage2D(n.TEXTURE_2D,qe,ue,Ue.width,Ue.height),i.texSubImage2D(n.TEXTURE_2D,0,0,0,Xe,dt,Ue)):i.texImage2D(n.TEXTURE_2D,0,ue,Xe,dt,Ue);N(we,Ae)&&P(_e),He.__version=Te.version,we.onUpdate&&we.onUpdate(we)}Je.__version=we.version}function Ft(Je,we,ge){if(we.image.length!==6)return;const _e=st(Je,we),Pe=we.source;i.bindTexture(n.TEXTURE_CUBE_MAP,Je.__webglTexture,n.TEXTURE0+ge);const Te=s.get(Pe);if(Pe.version!==Te.__version||_e===!0){i.activeTexture(n.TEXTURE0+ge),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,we.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,we.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const He=we.isCompressedTexture||we.image[0].isCompressedTexture,Fe=we.image[0]&&we.image[0].isDataTexture,Ue=[];for(let Qe=0;Qe<6;Qe++)!He&&!Fe?Ue[Qe]=C(we.image[Qe],!1,!0,f):Ue[Qe]=Fe?we.image[Qe].image:we.image[Qe],Ue[Qe]=Ti(we,Ue[Qe]);const Ae=Ue[0],Xe=M(Ae)||d,dt=l.convert(we.format,we.colorSpace),ue=l.convert(we.type),q=k(we.internalFormat,dt,ue,we.colorSpace),re=d&&we.isVideoTexture!==!0,ke=Te.__version===void 0||_e===!0;let be=D(we,Ae,Xe);Ge(n.TEXTURE_CUBE_MAP,we,Xe);let qe;if(He){re&&ke&&i.texStorage2D(n.TEXTURE_CUBE_MAP,be,q,Ae.width,Ae.height);for(let Qe=0;Qe<6;Qe++){qe=Ue[Qe].mipmaps;for(let It=0;It<qe.length;It++){const Ot=qe[It];we.format!==Rc?dt!==null?re?i.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It,0,0,Ot.width,Ot.height,dt,Ot.data):i.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It,q,Ot.width,Ot.height,0,Ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):re?i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It,0,0,Ot.width,Ot.height,dt,ue,Ot.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It,q,Ot.width,Ot.height,0,dt,ue,Ot.data)}}}else{qe=we.mipmaps,re&&ke&&(qe.length>0&&be++,i.texStorage2D(n.TEXTURE_CUBE_MAP,be,q,Ue[0].width,Ue[0].height));for(let Qe=0;Qe<6;Qe++)if(Fe){re?i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,Ue[Qe].width,Ue[Qe].height,dt,ue,Ue[Qe].data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,q,Ue[Qe].width,Ue[Qe].height,0,dt,ue,Ue[Qe].data);for(let It=0;It<qe.length;It++){const Jt=qe[It].image[Qe].image;re?i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It+1,0,0,Jt.width,Jt.height,dt,ue,Jt.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It+1,q,Jt.width,Jt.height,0,dt,ue,Jt.data)}}else{re?i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,dt,ue,Ue[Qe]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,q,dt,ue,Ue[Qe]);for(let It=0;It<qe.length;It++){const Ot=qe[It];re?i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It+1,0,0,dt,ue,Ot.image[Qe]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,It+1,q,dt,ue,Ot.image[Qe])}}}N(we,Xe)&&P(n.TEXTURE_CUBE_MAP),Te.__version=Pe.version,we.onUpdate&&we.onUpdate(we)}Je.__version=we.version}function Pt(Je,we,ge,_e,Pe,Te){const He=l.convert(ge.format,ge.colorSpace),Fe=l.convert(ge.type),Ue=k(ge.internalFormat,He,Fe,ge.colorSpace);if(!s.get(we).__hasExternalTextures){const Xe=Math.max(1,we.width>>Te),dt=Math.max(1,we.height>>Te);Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?i.texImage3D(Pe,Te,Ue,Xe,dt,we.depth,0,He,Fe,null):i.texImage2D(Pe,Te,Ue,Xe,dt,0,He,Fe,null)}i.bindFramebuffer(n.FRAMEBUFFER,Je),Wn(we)?y.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Pe,s.get(ge).__webglTexture,0,zn(we)):(Pe===n.TEXTURE_2D||Pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Pe,s.get(ge).__webglTexture,Te),i.bindFramebuffer(n.FRAMEBUFFER,null)}function nt(Je,we,ge){if(n.bindRenderbuffer(n.RENDERBUFFER,Je),we.depthBuffer&&!we.stencilBuffer){let _e=n.DEPTH_COMPONENT16;if(ge||Wn(we)){const Pe=we.depthTexture;Pe&&Pe.isDepthTexture&&(Pe.type===kd?_e=n.DEPTH_COMPONENT32F:Pe.type===Fd&&(_e=n.DEPTH_COMPONENT24));const Te=zn(we);Wn(we)?y.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,_e,we.width,we.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,_e,we.width,we.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,we.width,we.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,Je)}else if(we.depthBuffer&&we.stencilBuffer){const _e=zn(we);ge&&Wn(we)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,we.width,we.height):Wn(we)?y.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,we.width,we.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,we.width,we.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,Je)}else{const _e=we.isWebGLMultipleRenderTargets===!0?we.texture:[we.texture];for(let Pe=0;Pe<_e.length;Pe++){const Te=_e[Pe],He=l.convert(Te.format,Te.colorSpace),Fe=l.convert(Te.type),Ue=k(Te.internalFormat,He,Fe,Te.colorSpace),Ae=zn(we);ge&&Wn(we)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ae,Ue,we.width,we.height):Wn(we)?y.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ae,Ue,we.width,we.height):n.renderbufferStorage(n.RENDERBUFFER,Ue,we.width,we.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Fn(Je,we){if(we&&we.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(n.FRAMEBUFFER,Je),!(we.depthTexture&&we.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(we.depthTexture).__webglTexture||we.depthTexture.image.width!==we.width||we.depthTexture.image.height!==we.height)&&(we.depthTexture.image.width=we.width,we.depthTexture.image.height=we.height,we.depthTexture.needsUpdate=!0),J(we.depthTexture,0);const _e=s.get(we.depthTexture).__webglTexture,Pe=zn(we);if(we.depthTexture.format===Ap)Wn(we)?y.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,Pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else if(we.depthTexture.format===$g)Wn(we)?y.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,Pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function Xt(Je){const we=s.get(Je),ge=Je.isWebGLCubeRenderTarget===!0;if(Je.depthTexture&&!we.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");Fn(we.__webglFramebuffer,Je)}else if(ge){we.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)i.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer[_e]),we.__webglDepthbuffer[_e]=n.createRenderbuffer(),nt(we.__webglDepthbuffer[_e],Je,!1)}else i.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),we.__webglDepthbuffer=n.createRenderbuffer(),nt(we.__webglDepthbuffer,Je,!1);i.bindFramebuffer(n.FRAMEBUFFER,null)}function on(Je,we,ge){const _e=s.get(Je);we!==void 0&&Pt(_e.__webglFramebuffer,Je,Je.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ge!==void 0&&Xt(Je)}function nn(Je){const we=Je.texture,ge=s.get(Je),_e=s.get(we);Je.addEventListener("dispose",ne),Je.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=we.version,c.memory.textures++);const Pe=Je.isWebGLCubeRenderTarget===!0,Te=Je.isWebGLMultipleRenderTargets===!0,He=M(Je)||d;if(Pe){ge.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(d&&we.mipmaps&&we.mipmaps.length>0){ge.__webglFramebuffer[Fe]=[];for(let Ue=0;Ue<we.mipmaps.length;Ue++)ge.__webglFramebuffer[Fe][Ue]=n.createFramebuffer()}else ge.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(d&&we.mipmaps&&we.mipmaps.length>0){ge.__webglFramebuffer=[];for(let Fe=0;Fe<we.mipmaps.length;Fe++)ge.__webglFramebuffer[Fe]=n.createFramebuffer()}else ge.__webglFramebuffer=n.createFramebuffer();if(Te)if(o.drawBuffers){const Fe=Je.texture;for(let Ue=0,Ae=Fe.length;Ue<Ae;Ue++){const Xe=s.get(Fe[Ue]);Xe.__webglTexture===void 0&&(Xe.__webglTexture=n.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(d&&Je.samples>0&&Wn(Je)===!1){const Fe=Te?we:[we];ge.__webglMultisampledFramebuffer=n.createFramebuffer(),ge.__webglColorRenderbuffer=[],i.bindFramebuffer(n.FRAMEBUFFER,ge.__webglMultisampledFramebuffer);for(let Ue=0;Ue<Fe.length;Ue++){const Ae=Fe[Ue];ge.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ge.__webglColorRenderbuffer[Ue]);const Xe=l.convert(Ae.format,Ae.colorSpace),dt=l.convert(Ae.type),ue=k(Ae.internalFormat,Xe,dt,Ae.colorSpace,Je.isXRRenderTarget===!0),q=zn(Je);n.renderbufferStorageMultisample(n.RENDERBUFFER,q,ue,Je.width,Je.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,ge.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),Je.depthBuffer&&(ge.__webglDepthRenderbuffer=n.createRenderbuffer(),nt(ge.__webglDepthRenderbuffer,Je,!0)),i.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Pe){i.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Ge(n.TEXTURE_CUBE_MAP,we,He);for(let Fe=0;Fe<6;Fe++)if(d&&we.mipmaps&&we.mipmaps.length>0)for(let Ue=0;Ue<we.mipmaps.length;Ue++)Pt(ge.__webglFramebuffer[Fe][Ue],Je,we,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Ue);else Pt(ge.__webglFramebuffer[Fe],Je,we,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);N(we,He)&&P(n.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(Te){const Fe=Je.texture;for(let Ue=0,Ae=Fe.length;Ue<Ae;Ue++){const Xe=Fe[Ue],dt=s.get(Xe);i.bindTexture(n.TEXTURE_2D,dt.__webglTexture),Ge(n.TEXTURE_2D,Xe,He),Pt(ge.__webglFramebuffer,Je,Xe,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,0),N(Xe,He)&&P(n.TEXTURE_2D)}i.unbindTexture()}else{let Fe=n.TEXTURE_2D;if((Je.isWebGL3DRenderTarget||Je.isWebGLArrayRenderTarget)&&(d?Fe=Je.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(Fe,_e.__webglTexture),Ge(Fe,we,He),d&&we.mipmaps&&we.mipmaps.length>0)for(let Ue=0;Ue<we.mipmaps.length;Ue++)Pt(ge.__webglFramebuffer[Ue],Je,we,n.COLOR_ATTACHMENT0,Fe,Ue);else Pt(ge.__webglFramebuffer,Je,we,n.COLOR_ATTACHMENT0,Fe,0);N(we,He)&&P(Fe),i.unbindTexture()}Je.depthBuffer&&Xt(Je)}function vn(Je){const we=M(Je)||d,ge=Je.isWebGLMultipleRenderTargets===!0?Je.texture:[Je.texture];for(let _e=0,Pe=ge.length;_e<Pe;_e++){const Te=ge[_e];if(N(Te,we)){const He=Je.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Fe=s.get(Te).__webglTexture;i.bindTexture(He,Fe),P(He),i.unbindTexture()}}}function Rn(Je){if(d&&Je.samples>0&&Wn(Je)===!1){const we=Je.isWebGLMultipleRenderTargets?Je.texture:[Je.texture],ge=Je.width,_e=Je.height;let Pe=n.COLOR_BUFFER_BIT;const Te=[],He=Je.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=s.get(Je),Ue=Je.isWebGLMultipleRenderTargets===!0;if(Ue)for(let Ae=0;Ae<we.length;Ae++)i.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ae,n.RENDERBUFFER,null),i.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ae,n.TEXTURE_2D,null,0);i.bindFramebuffer(n.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let Ae=0;Ae<we.length;Ae++){Te.push(n.COLOR_ATTACHMENT0+Ae),Je.depthBuffer&&Te.push(He);const Xe=Fe.__ignoreDepthValues!==void 0?Fe.__ignoreDepthValues:!1;if(Xe===!1&&(Je.depthBuffer&&(Pe|=n.DEPTH_BUFFER_BIT),Je.stencilBuffer&&(Pe|=n.STENCIL_BUFFER_BIT)),Ue&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Ae]),Xe===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[He]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[He])),Ue){const dt=s.get(we[Ae]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,dt,0)}n.blitFramebuffer(0,0,ge,_e,0,0,ge,_e,Pe,n.NEAREST),v&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Te)}if(i.bindFramebuffer(n.READ_FRAMEBUFFER,null),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let Ae=0;Ae<we.length;Ae++){i.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ae,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Ae]);const Xe=s.get(we[Ae]).__webglTexture;i.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ae,n.TEXTURE_2D,Xe,0)}i.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}}function zn(Je){return Math.min(g,Je.samples)}function Wn(Je){const we=s.get(Je);return d&&Je.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&we.__useRenderToTexture!==!1}function Ai(Je){const we=c.render.frame;_.get(Je)!==we&&(_.set(Je,we),Je.update())}function Ti(Je,we){const ge=Je.colorSpace,_e=Je.format,Pe=Je.type;return Je.isCompressedTexture===!0||Je.isVideoTexture===!0||Je.format===dT||ge!==Tu&&ge!==yp&&(ge===ms||ge===ub?d===!1?e.has("EXT_sRGB")===!0&&_e===Rc?(Je.format=dT,Je.minFilter=yl,Je.generateMipmaps=!1):we=EF.sRGBToLinear(we):(_e!==Rc||Pe!==Kd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ge)),we}this.allocateTextureUnit=K,this.resetTextureUnits=V,this.setTexture2D=J,this.setTexture2DArray=ee,this.setTexture3D=he,this.setTextureCube=me,this.rebindTextures=on,this.setupRenderTarget=nn,this.updateRenderTargetMipmap=vn,this.updateMultisampleRenderTarget=Rn,this.setupDepthRenderbuffer=Xt,this.setupFrameBufferTexture=Pt,this.useMultisampledRTT=Wn}const Qj=0,ho=1;function Wj(n,e,i){const s=i.isWebGL2;function o(l,c=yp){let d;const u=c===ms||c===ub?ho:Qj;if(l===Kd)return n.UNSIGNED_BYTE;if(l===fF)return n.UNSIGNED_SHORT_4_4_4_4;if(l===pF)return n.UNSIGNED_SHORT_5_5_5_1;if(l===h9)return n.BYTE;if(l===d9)return n.SHORT;if(l===W3)return n.UNSIGNED_SHORT;if(l===dF)return n.INT;if(l===Fd)return n.UNSIGNED_INT;if(l===kd)return n.FLOAT;if(l===qg)return s?n.HALF_FLOAT:(d=e.get("OES_texture_half_float"),d!==null?d.HALF_FLOAT_OES:null);if(l===f9)return n.ALPHA;if(l===Rc)return n.RGBA;if(l===p9)return n.LUMINANCE;if(l===m9)return n.LUMINANCE_ALPHA;if(l===Ap)return n.DEPTH_COMPONENT;if(l===$g)return n.DEPTH_STENCIL;if(l===dT)return d=e.get("EXT_sRGB"),d!==null?d.SRGB_ALPHA_EXT:null;if(l===g9)return n.RED;if(l===mF)return n.RED_INTEGER;if(l===A9)return n.RG;if(l===gF)return n.RG_INTEGER;if(l===AF)return n.RGBA_INTEGER;if(l===aM||l===lM||l===cM||l===uM)if(u===ho)if(d=e.get("WEBGL_compressed_texture_s3tc_srgb"),d!==null){if(l===aM)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===lM)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===cM)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===uM)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(d=e.get("WEBGL_compressed_texture_s3tc"),d!==null){if(l===aM)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===lM)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===cM)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===uM)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===JL||l===ZL||l===eB||l===tB)if(d=e.get("WEBGL_compressed_texture_pvrtc"),d!==null){if(l===JL)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===ZL)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===eB)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===tB)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===v9)return d=e.get("WEBGL_compressed_texture_etc1"),d!==null?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===nB||l===iB)if(d=e.get("WEBGL_compressed_texture_etc"),d!==null){if(l===nB)return u===ho?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(l===iB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===rB||l===sB||l===oB||l===aB||l===lB||l===cB||l===uB||l===hB||l===dB||l===fB||l===pB||l===mB||l===gB||l===AB)if(d=e.get("WEBGL_compressed_texture_astc"),d!==null){if(l===rB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===sB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===oB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===aB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===lB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===cB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===uB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===hB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===dB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===fB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===pB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===mB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===gB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===AB)return u===ho?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===hM||l===vB||l===yB)if(d=e.get("EXT_texture_compression_bptc"),d!==null){if(l===hM)return u===ho?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(l===vB)return d.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(l===yB)return d.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(l===y9||l===xB||l===EB||l===_B)if(d=e.get("EXT_texture_compression_rgtc"),d!==null){if(l===hM)return d.COMPRESSED_RED_RGTC1_EXT;if(l===xB)return d.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(l===EB)return d.COMPRESSED_RED_GREEN_RGTC2_EXT;if(l===_B)return d.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return l===gp?s?n.UNSIGNED_INT_24_8:(d=e.get("WEBGL_depth_texture"),d!==null?d.UNSIGNED_INT_24_8_WEBGL:null):n[l]!==void 0?n[l]:null}return{convert:o}}class Kj extends Xl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Tg=class extends Lo{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Xj={type:"move"};class DM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ht,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ht),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ht,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ht),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const i=this._hand;if(i)for(const s of e.hand.values())this._getHandJoint(i,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,s){let o=null,l=null,c=null;const d=this._targetRay,u=this._grip,f=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(f&&e.hand){c=!0;for(const x of e.hand.values()){const b=i.getJointPose(x,s),m=this._getHandJoint(f,x);b!==null&&(m.matrix.fromArray(b.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=b.radius),m.visible=b!==null}const A=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],y=A.position.distanceTo(g.position),v=.02,_=.005;f.inputState.pinching&&y>v+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&y<=v-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(l=i.getPose(e.gripSpace,s),l!==null&&(u.matrix.fromArray(l.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,l.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(l.linearVelocity)):u.hasLinearVelocity=!1,l.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(l.angularVelocity)):u.hasAngularVelocity=!1));d!==null&&(o=i.getPose(e.targetRaySpace,s),o===null&&l!==null&&(o=l),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(Xj)))}return d!==null&&(d.visible=o!==null),u!==null&&(u.visible=l!==null),f!==null&&(f.visible=c!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){const s=new Tg;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[i.jointName]=s,e.add(s)}return e.joints[i.jointName]}}class Yj extends Ba{constructor(e,i,s,o,l,c,d,u,f,A){if(A=A!==void 0?A:Ap,A!==Ap&&A!==$g)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");s===void 0&&A===Ap&&(s=Fd),s===void 0&&A===$g&&(s=gp),super(null,o,l,c,d,u,A,s,f),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=d!==void 0?d:Ta,this.minFilter=u!==void 0?u:Ta,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const i=super.toJSON(e);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}class qj extends Uc{constructor(e,i){super();const s=this;let o=null,l=1,c=null,d="local-floor",u=1,f=null,A=null,g=null,y=null,v=null,_=null;const x=i.getContextAttributes();let b=null,m=null;const S=[],C=[],M=new Xl;M.layers.enable(1),M.viewport=new Io;const T=new Xl;T.layers.enable(2),T.viewport=new Io;const N=[M,T],P=new Kj;P.layers.enable(1),P.layers.enable(2);let k=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let he=S[ee];return he===void 0&&(he=new DM,S[ee]=he),he.getTargetRaySpace()},this.getControllerGrip=function(ee){let he=S[ee];return he===void 0&&(he=new DM,S[ee]=he),he.getGripSpace()},this.getHand=function(ee){let he=S[ee];return he===void 0&&(he=new DM,S[ee]=he),he.getHandSpace()};function z(ee){const he=C.indexOf(ee.inputSource);if(he===-1)return;const me=S[he];me!==void 0&&(me.update(ee.inputSource,ee.frame,f||c),me.dispatchEvent({type:ee.type,data:ee.inputSource}))}function Y(){o.removeEventListener("select",z),o.removeEventListener("selectstart",z),o.removeEventListener("selectend",z),o.removeEventListener("squeeze",z),o.removeEventListener("squeezestart",z),o.removeEventListener("squeezeend",z),o.removeEventListener("end",Y),o.removeEventListener("inputsourceschange",ne);for(let ee=0;ee<S.length;ee++){const he=C[ee];he!==null&&(C[ee]=null,S[ee].disconnect(he))}k=null,D=null,e.setRenderTarget(b),v=null,y=null,g=null,o=null,m=null,J.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){l=ee,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){d=ee,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||c},this.setReferenceSpace=function(ee){f=ee},this.getBaseLayer=function(){return y!==null?y:v},this.getBinding=function(){return g},this.getFrame=function(){return _},this.getSession=function(){return o},this.setSession=async function(ee){if(o=ee,o!==null){if(b=e.getRenderTarget(),o.addEventListener("select",z),o.addEventListener("selectstart",z),o.addEventListener("selectend",z),o.addEventListener("squeeze",z),o.addEventListener("squeezestart",z),o.addEventListener("squeezeend",z),o.addEventListener("end",Y),o.addEventListener("inputsourceschange",ne),x.xrCompatible!==!0&&await i.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:o.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:l};v=new XRWebGLLayer(o,i,he),o.updateRenderState({baseLayer:v}),m=new $d(v.framebufferWidth,v.framebufferHeight,{format:Rc,type:Kd,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let he=null,me=null,Be=null;x.depth&&(Be=x.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,he=x.stencil?$g:Ap,me=x.stencil?gp:Fd);const Se={colorFormat:i.RGBA8,depthFormat:Be,scaleFactor:l};g=new XRWebGLBinding(o,i),y=g.createProjectionLayer(Se),o.updateRenderState({layers:[y]}),m=new $d(y.textureWidth,y.textureHeight,{format:Rc,type:Kd,depthTexture:new Yj(y.textureWidth,y.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const rt=e.properties.get(m);rt.__ignoreDepthValues=y.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(u),f=null,c=await o.requestReferenceSpace(d),J.setContext(o),J.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function ne(ee){for(let he=0;he<ee.removed.length;he++){const me=ee.removed[he],Be=C.indexOf(me);Be>=0&&(C[Be]=null,S[Be].disconnect(me))}for(let he=0;he<ee.added.length;he++){const me=ee.added[he];let Be=C.indexOf(me);if(Be===-1){for(let rt=0;rt<S.length;rt++)if(rt>=C.length){C.push(me),Be=rt;break}else if(C[rt]===null){C[rt]=me,Be=rt;break}if(Be===-1)break}const Se=S[Be];Se&&Se.connect(me)}}const O=new ht,F=new ht;function U(ee,he,me){O.setFromMatrixPosition(he.matrixWorld),F.setFromMatrixPosition(me.matrixWorld);const Be=O.distanceTo(F),Se=he.projectionMatrix.elements,rt=me.projectionMatrix.elements,Ge=Se[14]/(Se[10]-1),st=Se[14]/(Se[10]+1),mt=(Se[9]+1)/Se[5],Ft=(Se[9]-1)/Se[5],Pt=(Se[8]-1)/Se[0],nt=(rt[8]+1)/rt[0],Fn=Ge*Pt,Xt=Ge*nt,on=Be/(-Pt+nt),nn=on*-Pt;he.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(nn),ee.translateZ(on),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const vn=Ge+on,Rn=st+on,zn=Fn-nn,Wn=Xt+(Be-nn),Ai=mt*st/Rn*vn,Ti=Ft*st/Rn*vn;ee.projectionMatrix.makePerspective(zn,Wn,Ai,Ti,vn,Rn),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function G(ee,he){he===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(he.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(o===null)return;P.near=T.near=M.near=ee.near,P.far=T.far=M.far=ee.far,(k!==P.near||D!==P.far)&&(o.updateRenderState({depthNear:P.near,depthFar:P.far}),k=P.near,D=P.far);const he=ee.parent,me=P.cameras;G(P,he);for(let Be=0;Be<me.length;Be++)G(me[Be],he);me.length===2?U(P,M,T):P.projectionMatrix.copy(M.projectionMatrix),V(ee,P,he)};function V(ee,he,me){me===null?ee.matrix.copy(he.matrixWorld):(ee.matrix.copy(me.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(he.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(he.projectionMatrix),ee.projectionMatrixInverse.copy(he.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=cy*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(y===null&&v===null))return u},this.setFoveation=function(ee){u=ee,y!==null&&(y.fixedFoveation=ee),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ee)};let K=null;function W(ee,he){if(A=he.getViewerPose(f||c),_=he,A!==null){const me=A.views;v!==null&&(e.setRenderTargetFramebuffer(m,v.framebuffer),e.setRenderTarget(m));let Be=!1;me.length!==P.cameras.length&&(P.cameras.length=0,Be=!0);for(let Se=0;Se<me.length;Se++){const rt=me[Se];let Ge=null;if(v!==null)Ge=v.getViewport(rt);else{const mt=g.getViewSubImage(y,rt);Ge=mt.viewport,Se===0&&(e.setRenderTargetTextures(m,mt.colorTexture,y.ignoreDepthValues?void 0:mt.depthStencilTexture),e.setRenderTarget(m))}let st=N[Se];st===void 0&&(st=new Xl,st.layers.enable(Se),st.viewport=new Io,N[Se]=st),st.matrix.fromArray(rt.transform.matrix),st.matrix.decompose(st.position,st.quaternion,st.scale),st.projectionMatrix.fromArray(rt.projectionMatrix),st.projectionMatrixInverse.copy(st.projectionMatrix).invert(),st.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),Se===0&&(P.matrix.copy(st.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Be===!0&&P.cameras.push(st)}}for(let me=0;me<S.length;me++){const Be=C[me],Se=S[me];Be!==null&&Se!==void 0&&Se.update(Be,he,f||c)}K&&K(ee,he),he.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:he}),_=null}const J=new LF;J.setAnimationLoop(W),this.setAnimationLoop=function(ee){K=ee},this.dispose=function(){}}}function $j(n,e){function i(b,m){b.matrixAutoUpdate===!0&&b.updateMatrix(),m.value.copy(b.matrix)}function s(b,m){m.color.getRGB(b.fogColor.value,SF(n)),m.isFog?(b.fogNear.value=m.near,b.fogFar.value=m.far):m.isFogExp2&&(b.fogDensity.value=m.density)}function o(b,m,S,C,M){m.isMeshBasicMaterial||m.isMeshLambertMaterial?l(b,m):m.isMeshToonMaterial?(l(b,m),g(b,m)):m.isMeshPhongMaterial?(l(b,m),A(b,m)):m.isMeshStandardMaterial?(l(b,m),y(b,m),m.isMeshPhysicalMaterial&&v(b,m,M)):m.isMeshMatcapMaterial?(l(b,m),_(b,m)):m.isMeshDepthMaterial?l(b,m):m.isMeshDistanceMaterial?(l(b,m),x(b,m)):m.isMeshNormalMaterial?l(b,m):m.isLineBasicMaterial?(c(b,m),m.isLineDashedMaterial&&d(b,m)):m.isPointsMaterial?u(b,m,S,C):m.isSpriteMaterial?f(b,m):m.isShadowMaterial?(b.color.value.copy(m.color),b.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function l(b,m){b.opacity.value=m.opacity,m.color&&b.diffuse.value.copy(m.color),m.emissive&&b.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(b.map.value=m.map,i(m.map,b.mapTransform)),m.alphaMap&&(b.alphaMap.value=m.alphaMap,i(m.alphaMap,b.alphaMapTransform)),m.bumpMap&&(b.bumpMap.value=m.bumpMap,i(m.bumpMap,b.bumpMapTransform),b.bumpScale.value=m.bumpScale,m.side===La&&(b.bumpScale.value*=-1)),m.normalMap&&(b.normalMap.value=m.normalMap,i(m.normalMap,b.normalMapTransform),b.normalScale.value.copy(m.normalScale),m.side===La&&b.normalScale.value.negate()),m.displacementMap&&(b.displacementMap.value=m.displacementMap,i(m.displacementMap,b.displacementMapTransform),b.displacementScale.value=m.displacementScale,b.displacementBias.value=m.displacementBias),m.emissiveMap&&(b.emissiveMap.value=m.emissiveMap,i(m.emissiveMap,b.emissiveMapTransform)),m.specularMap&&(b.specularMap.value=m.specularMap,i(m.specularMap,b.specularMapTransform)),m.alphaTest>0&&(b.alphaTest.value=m.alphaTest);const S=e.get(m).envMap;if(S&&(b.envMap.value=S,b.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=m.reflectivity,b.ior.value=m.ior,b.refractionRatio.value=m.refractionRatio),m.lightMap){b.lightMap.value=m.lightMap;const C=n._useLegacyLights===!0?Math.PI:1;b.lightMapIntensity.value=m.lightMapIntensity*C,i(m.lightMap,b.lightMapTransform)}m.aoMap&&(b.aoMap.value=m.aoMap,b.aoMapIntensity.value=m.aoMapIntensity,i(m.aoMap,b.aoMapTransform))}function c(b,m){b.diffuse.value.copy(m.color),b.opacity.value=m.opacity,m.map&&(b.map.value=m.map,i(m.map,b.mapTransform))}function d(b,m){b.dashSize.value=m.dashSize,b.totalSize.value=m.dashSize+m.gapSize,b.scale.value=m.scale}function u(b,m,S,C){b.diffuse.value.copy(m.color),b.opacity.value=m.opacity,b.size.value=m.size*S,b.scale.value=C*.5,m.map&&(b.map.value=m.map,i(m.map,b.uvTransform)),m.alphaMap&&(b.alphaMap.value=m.alphaMap,i(m.alphaMap,b.alphaMapTransform)),m.alphaTest>0&&(b.alphaTest.value=m.alphaTest)}function f(b,m){b.diffuse.value.copy(m.color),b.opacity.value=m.opacity,b.rotation.value=m.rotation,m.map&&(b.map.value=m.map,i(m.map,b.mapTransform)),m.alphaMap&&(b.alphaMap.value=m.alphaMap,i(m.alphaMap,b.alphaMapTransform)),m.alphaTest>0&&(b.alphaTest.value=m.alphaTest)}function A(b,m){b.specular.value.copy(m.specular),b.shininess.value=Math.max(m.shininess,1e-4)}function g(b,m){m.gradientMap&&(b.gradientMap.value=m.gradientMap)}function y(b,m){b.metalness.value=m.metalness,m.metalnessMap&&(b.metalnessMap.value=m.metalnessMap,i(m.metalnessMap,b.metalnessMapTransform)),b.roughness.value=m.roughness,m.roughnessMap&&(b.roughnessMap.value=m.roughnessMap,i(m.roughnessMap,b.roughnessMapTransform)),e.get(m).envMap&&(b.envMapIntensity.value=m.envMapIntensity)}function v(b,m,S){b.ior.value=m.ior,m.sheen>0&&(b.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),b.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(b.sheenColorMap.value=m.sheenColorMap,i(m.sheenColorMap,b.sheenColorMapTransform)),m.sheenRoughnessMap&&(b.sheenRoughnessMap.value=m.sheenRoughnessMap,i(m.sheenRoughnessMap,b.sheenRoughnessMapTransform))),m.clearcoat>0&&(b.clearcoat.value=m.clearcoat,b.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(b.clearcoatMap.value=m.clearcoatMap,i(m.clearcoatMap,b.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,i(m.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(b.clearcoatNormalMap.value=m.clearcoatNormalMap,i(m.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===La&&b.clearcoatNormalScale.value.negate())),m.iridescence>0&&(b.iridescence.value=m.iridescence,b.iridescenceIOR.value=m.iridescenceIOR,b.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(b.iridescenceMap.value=m.iridescenceMap,i(m.iridescenceMap,b.iridescenceMapTransform)),m.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=m.iridescenceThicknessMap,i(m.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),m.transmission>0&&(b.transmission.value=m.transmission,b.transmissionSamplerMap.value=S.texture,b.transmissionSamplerSize.value.set(S.width,S.height),m.transmissionMap&&(b.transmissionMap.value=m.transmissionMap,i(m.transmissionMap,b.transmissionMapTransform)),b.thickness.value=m.thickness,m.thicknessMap&&(b.thicknessMap.value=m.thicknessMap,i(m.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=m.attenuationDistance,b.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(b.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(b.anisotropyMap.value=m.anisotropyMap,i(m.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=m.specularIntensity,b.specularColor.value.copy(m.specularColor),m.specularColorMap&&(b.specularColorMap.value=m.specularColorMap,i(m.specularColorMap,b.specularColorMapTransform)),m.specularIntensityMap&&(b.specularIntensityMap.value=m.specularIntensityMap,i(m.specularIntensityMap,b.specularIntensityMapTransform))}function _(b,m){m.matcap&&(b.matcap.value=m.matcap)}function x(b,m){const S=e.get(m).light;b.referencePosition.value.setFromMatrixPosition(S.matrixWorld),b.nearDistance.value=S.shadow.camera.near,b.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:s,refreshMaterialUniforms:o}}function Jj(n,e,i,s){let o={},l={},c=[];const d=i.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(S,C){const M=C.program;s.uniformBlockBinding(S,M)}function f(S,C){let M=o[S.id];M===void 0&&(_(S),M=A(S),o[S.id]=M,S.addEventListener("dispose",b));const T=C.program;s.updateUBOMapping(S,T);const N=e.render.frame;l[S.id]!==N&&(y(S),l[S.id]=N)}function A(S){const C=g();S.__bindingPointIndex=C;const M=n.createBuffer(),T=S.__size,N=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,T,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,M),M}function g(){for(let S=0;S<d;S++)if(c.indexOf(S)===-1)return c.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(S){const C=o[S.id],M=S.uniforms,T=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let N=0,P=M.length;N<P;N++){const k=M[N];if(v(k,N,T)===!0){const D=k.__offset,z=Array.isArray(k.value)?k.value:[k.value];let Y=0;for(let ne=0;ne<z.length;ne++){const O=z[ne],F=x(O);typeof O=="number"?(k.__data[0]=O,n.bufferSubData(n.UNIFORM_BUFFER,D+Y,k.__data)):O.isMatrix3?(k.__data[0]=O.elements[0],k.__data[1]=O.elements[1],k.__data[2]=O.elements[2],k.__data[3]=O.elements[0],k.__data[4]=O.elements[3],k.__data[5]=O.elements[4],k.__data[6]=O.elements[5],k.__data[7]=O.elements[0],k.__data[8]=O.elements[6],k.__data[9]=O.elements[7],k.__data[10]=O.elements[8],k.__data[11]=O.elements[0]):(O.toArray(k.__data,Y),Y+=F.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,k.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(S,C,M){const T=S.value;if(M[C]===void 0){if(typeof T=="number")M[C]=T;else{const N=Array.isArray(T)?T:[T],P=[];for(let k=0;k<N.length;k++)P.push(N[k].clone());M[C]=P}return!0}else if(typeof T=="number"){if(M[C]!==T)return M[C]=T,!0}else{const N=Array.isArray(M[C])?M[C]:[M[C]],P=Array.isArray(T)?T:[T];for(let k=0;k<N.length;k++){const D=N[k];if(D.equals(P[k])===!1)return D.copy(P[k]),!0}}return!1}function _(S){const C=S.uniforms;let M=0;const T=16;let N=0;for(let P=0,k=C.length;P<k;P++){const D=C[P],z={boundary:0,storage:0},Y=Array.isArray(D.value)?D.value:[D.value];for(let ne=0,O=Y.length;ne<O;ne++){const F=Y[ne],U=x(F);z.boundary+=U.boundary,z.storage+=U.storage}if(D.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=M,P>0){N=M%T;const ne=T-N;N!==0&&ne-z.boundary<0&&(M+=T-N,D.__offset=M)}M+=z.storage}return N=M%T,N>0&&(M+=T-N),S.__size=M,S.__cache={},this}function x(S){const C={boundary:0,storage:0};return typeof S=="number"?(C.boundary=4,C.storage=4):S.isVector2?(C.boundary=8,C.storage=8):S.isVector3||S.isColor?(C.boundary=16,C.storage=12):S.isVector4?(C.boundary=16,C.storage=16):S.isMatrix3?(C.boundary=48,C.storage=48):S.isMatrix4?(C.boundary=64,C.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),C}function b(S){const C=S.target;C.removeEventListener("dispose",b);const M=c.indexOf(C.__bindingPointIndex);c.splice(M,1),n.deleteBuffer(o[C.id]),delete o[C.id],delete l[C.id]}function m(){for(const S in o)n.deleteBuffer(o[S]);c=[],o={},l={}}return{bind:u,update:f,dispose:m}}class FF{constructor(e={}){const{canvas:i=W9(),context:s=null,depth:o=!0,stencil:l=!0,alpha:c=!1,antialias:d=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:A="default",failIfMajorPerformanceCaveat:g=!1}=e;this.isWebGLRenderer=!0;let y;s!==null?y=s.getContextAttributes().alpha:y=c;const v=new Uint32Array(4),_=new Int32Array(4);let x=null,b=null;const m=[],S=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ms,this._useLegacyLights=!1,this.toneMapping=Wd,this.toneMappingExposure=1;const C=this;let M=!1,T=0,N=0,P=null,k=-1,D=null;const z=new Io,Y=new Io;let ne=null;const O=new jr(0);let F=0,U=i.width,G=i.height,V=1,K=null,W=null;const J=new Io(0,0,U,G),ee=new Io(0,0,U,G);let he=!1;const me=new q3;let Be=!1,Se=!1,rt=null;const Ge=new Os,st=new jn,mt=new ht,Ft={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Pt(){return P===null?V:1}let nt=s;function Fn(Ye,xt){for(let Mt=0;Mt<Ye.length;Mt++){const Et=Ye[Mt],Bt=i.getContext(Et,xt);if(Bt!==null)return Bt}return null}try{const Ye={alpha:!0,depth:o,stencil:l,antialias:d,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:A,failIfMajorPerformanceCaveat:g};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${j3}`),i.addEventListener("webglcontextlost",qe,!1),i.addEventListener("webglcontextrestored",Qe,!1),i.addEventListener("webglcontextcreationerror",It,!1),nt===null){const xt=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&xt.shift(),nt=Fn(xt,Ye),nt===null)throw Fn(xt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&nt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),nt.getShaderPrecisionFormat===void 0&&(nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ye){throw console.error("THREE.WebGLRenderer: "+Ye.message),Ye}let Xt,on,nn,vn,Rn,zn,Wn,Ai,Ti,Je,we,ge,_e,Pe,Te,He,Fe,Ue,Ae,Xe,dt,ue,q,re;function ke(){Xt=new lV(nt),on=new nV(nt,Xt,e),Xt.init(on),ue=new Wj(nt,Xt,on),nn=new Vj(nt,Xt,on),vn=new hV(nt),Rn=new Ij,zn=new jj(nt,Xt,nn,Rn,on,ue,vn),Wn=new rV(C),Ai=new aV(C),Ti=new EG(nt,on),q=new eV(nt,Xt,Ti,on),Je=new cV(nt,Ti,vn,q),we=new mV(nt,Je,Ti,vn),Ae=new pV(nt,on,zn),He=new iV(Rn),ge=new Tj(C,Wn,Ai,Xt,on,q,He),_e=new $j(C,Rn),Pe=new Lj,Te=new kj(Xt,on),Ue=new ZH(C,Wn,Ai,nn,we,y,u),Fe=new Hj(C,we,on),re=new Jj(nt,vn,on,nn),Xe=new tV(nt,Xt,vn,on),dt=new uV(nt,Xt,vn,on),vn.programs=ge.programs,C.capabilities=on,C.extensions=Xt,C.properties=Rn,C.renderLists=Pe,C.shadowMap=Fe,C.state=nn,C.info=vn}ke();const be=new qj(C,nt);this.xr=be,this.getContext=function(){return nt},this.getContextAttributes=function(){return nt.getContextAttributes()},this.forceContextLoss=function(){const Ye=Xt.get("WEBGL_lose_context");Ye&&Ye.loseContext()},this.forceContextRestore=function(){const Ye=Xt.get("WEBGL_lose_context");Ye&&Ye.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(Ye){Ye!==void 0&&(V=Ye,this.setSize(U,G,!1))},this.getSize=function(Ye){return Ye.set(U,G)},this.setSize=function(Ye,xt,Mt=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=Ye,G=xt,i.width=Math.floor(Ye*V),i.height=Math.floor(xt*V),Mt===!0&&(i.style.width=Ye+"px",i.style.height=xt+"px"),this.setViewport(0,0,Ye,xt)},this.getDrawingBufferSize=function(Ye){return Ye.set(U*V,G*V).floor()},this.setDrawingBufferSize=function(Ye,xt,Mt){U=Ye,G=xt,V=Mt,i.width=Math.floor(Ye*Mt),i.height=Math.floor(xt*Mt),this.setViewport(0,0,Ye,xt)},this.getCurrentViewport=function(Ye){return Ye.copy(z)},this.getViewport=function(Ye){return Ye.copy(J)},this.setViewport=function(Ye,xt,Mt,Et){Ye.isVector4?J.set(Ye.x,Ye.y,Ye.z,Ye.w):J.set(Ye,xt,Mt,Et),nn.viewport(z.copy(J).multiplyScalar(V).floor())},this.getScissor=function(Ye){return Ye.copy(ee)},this.setScissor=function(Ye,xt,Mt,Et){Ye.isVector4?ee.set(Ye.x,Ye.y,Ye.z,Ye.w):ee.set(Ye,xt,Mt,Et),nn.scissor(Y.copy(ee).multiplyScalar(V).floor())},this.getScissorTest=function(){return he},this.setScissorTest=function(Ye){nn.setScissorTest(he=Ye)},this.setOpaqueSort=function(Ye){K=Ye},this.setTransparentSort=function(Ye){W=Ye},this.getClearColor=function(Ye){return Ye.copy(Ue.getClearColor())},this.setClearColor=function(){Ue.setClearColor.apply(Ue,arguments)},this.getClearAlpha=function(){return Ue.getClearAlpha()},this.setClearAlpha=function(){Ue.setClearAlpha.apply(Ue,arguments)},this.clear=function(Ye=!0,xt=!0,Mt=!0){let Et=0;if(Ye){let Bt=!1;if(P!==null){const Re=P.texture.format;Bt=Re===AF||Re===gF||Re===mF}if(Bt){const Re=P.texture.type,We=Re===Kd||Re===Fd||Re===W3||Re===gp||Re===fF||Re===pF,it=Ue.getClearColor(),gt=Ue.getClearAlpha(),At=it.r,Rt=it.g,Nt=it.b;We?(v[0]=At,v[1]=Rt,v[2]=Nt,v[3]=gt,nt.clearBufferuiv(nt.COLOR,0,v)):(_[0]=At,_[1]=Rt,_[2]=Nt,_[3]=gt,nt.clearBufferiv(nt.COLOR,0,_))}else Et|=nt.COLOR_BUFFER_BIT}xt&&(Et|=nt.DEPTH_BUFFER_BIT),Mt&&(Et|=nt.STENCIL_BUFFER_BIT),nt.clear(Et)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",qe,!1),i.removeEventListener("webglcontextrestored",Qe,!1),i.removeEventListener("webglcontextcreationerror",It,!1),Pe.dispose(),Te.dispose(),Rn.dispose(),Wn.dispose(),Ai.dispose(),we.dispose(),q.dispose(),re.dispose(),ge.dispose(),be.dispose(),be.removeEventListener("sessionstart",Pi),be.removeEventListener("sessionend",Ir),rt&&(rt.dispose(),rt=null),_i.stop()};function qe(Ye){Ye.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const Ye=vn.autoReset,xt=Fe.enabled,Mt=Fe.autoUpdate,Et=Fe.needsUpdate,Bt=Fe.type;ke(),vn.autoReset=Ye,Fe.enabled=xt,Fe.autoUpdate=Mt,Fe.needsUpdate=Et,Fe.type=Bt}function It(Ye){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ye.statusMessage)}function Ot(Ye){const xt=Ye.target;xt.removeEventListener("dispose",Ot),Jt(xt)}function Jt(Ye){dn(Ye),Rn.remove(Ye)}function dn(Ye){const xt=Rn.get(Ye).programs;xt!==void 0&&(xt.forEach(function(Mt){ge.releaseProgram(Mt)}),Ye.isShaderMaterial&&ge.releaseShaderCache(Ye))}this.renderBufferDirect=function(Ye,xt,Mt,Et,Bt,Re){xt===null&&(xt=Ft);const We=Bt.isMesh&&Bt.matrixWorld.determinant()<0,it=Li(Ye,xt,Mt,Et,Bt);nn.setMaterial(Et,We);let gt=Mt.index,At=1;if(Et.wireframe===!0){if(gt=Je.getWireframeAttribute(Mt),gt===void 0)return;At=2}const Rt=Mt.drawRange,Nt=Mt.attributes.position;let wn=Rt.start*At,yn=(Rt.start+Rt.count)*At;Re!==null&&(wn=Math.max(wn,Re.start*At),yn=Math.min(yn,(Re.start+Re.count)*At)),gt!==null?(wn=Math.max(wn,0),yn=Math.min(yn,gt.count)):Nt!=null&&(wn=Math.max(wn,0),yn=Math.min(yn,Nt.count));const Vt=yn-wn;if(Vt<0||Vt===1/0)return;q.setup(Bt,Et,it,Mt,gt);let qn,Un=Xe;if(gt!==null&&(qn=Ti.get(gt),Un=dt,Un.setIndex(qn)),Bt.isMesh)Et.wireframe===!0?(nn.setLineWidth(Et.wireframeLinewidth*Pt()),Un.setMode(nt.LINES)):Un.setMode(nt.TRIANGLES);else if(Bt.isLine){let _n=Et.linewidth;_n===void 0&&(_n=1),nn.setLineWidth(_n*Pt()),Bt.isLineSegments?Un.setMode(nt.LINES):Bt.isLineLoop?Un.setMode(nt.LINE_LOOP):Un.setMode(nt.LINE_STRIP)}else Bt.isPoints?Un.setMode(nt.POINTS):Bt.isSprite&&Un.setMode(nt.TRIANGLES);if(Bt.isInstancedMesh)Un.renderInstances(wn,Vt,Bt.count);else if(Mt.isInstancedBufferGeometry){const _n=Mt._maxInstanceCount!==void 0?Mt._maxInstanceCount:1/0,Rr=Math.min(Mt.instanceCount,_n);Un.renderInstances(wn,Vt,Rr)}else Un.render(wn,Vt)},this.compile=function(Ye,xt){function Mt(Et,Bt,Re){Et.transparent===!0&&Et.side===gh&&Et.forceSinglePass===!1?(Et.side=La,Et.needsUpdate=!0,li(Et,Bt,Re),Et.side=qd,Et.needsUpdate=!0,li(Et,Bt,Re),Et.side=gh):li(Et,Bt,Re)}b=Te.get(Ye),b.init(),S.push(b),Ye.traverseVisible(function(Et){Et.isLight&&Et.layers.test(xt.layers)&&(b.pushLight(Et),Et.castShadow&&b.pushShadow(Et))}),b.setupLights(C._useLegacyLights),Ye.traverse(function(Et){const Bt=Et.material;if(Bt)if(Array.isArray(Bt))for(let Re=0;Re<Bt.length;Re++){const We=Bt[Re];Mt(We,Ye,Et)}else Mt(Bt,Ye,Et)}),S.pop(),b=null};let Sn=null;function er(Ye){Sn&&Sn(Ye)}function Pi(){_i.stop()}function Ir(){_i.start()}const _i=new LF;_i.setAnimationLoop(er),typeof self<"u"&&_i.setContext(self),this.setAnimationLoop=function(Ye){Sn=Ye,be.setAnimationLoop(Ye),Ye===null?_i.stop():_i.start()},be.addEventListener("sessionstart",Pi),be.addEventListener("sessionend",Ir),this.render=function(Ye,xt){if(xt!==void 0&&xt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;Ye.matrixWorldAutoUpdate===!0&&Ye.updateMatrixWorld(),xt.parent===null&&xt.matrixWorldAutoUpdate===!0&&xt.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(xt),xt=be.getCamera()),Ye.isScene===!0&&Ye.onBeforeRender(C,Ye,xt,P),b=Te.get(Ye,S.length),b.init(),S.push(b),Ge.multiplyMatrices(xt.projectionMatrix,xt.matrixWorldInverse),me.setFromProjectionMatrix(Ge),Se=this.localClippingEnabled,Be=He.init(this.clippingPlanes,Se),x=Pe.get(Ye,m.length),x.init(),m.push(x),Tn(Ye,xt,0,C.sortObjects),x.finish(),C.sortObjects===!0&&x.sort(K,W),this.info.render.frame++,Be===!0&&He.beginShadows();const Mt=b.state.shadowsArray;if(Fe.render(Mt,Ye,xt),Be===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ue.render(x,Ye),b.setupLights(C._useLegacyLights),xt.isArrayCamera){const Et=xt.cameras;for(let Bt=0,Re=Et.length;Bt<Re;Bt++){const We=Et[Bt];Qt(x,Ye,We,We.viewport)}}else Qt(x,Ye,xt);P!==null&&(zn.updateMultisampleRenderTarget(P),zn.updateRenderTargetMipmap(P)),Ye.isScene===!0&&Ye.onAfterRender(C,Ye,xt),q.resetDefaultState(),k=-1,D=null,S.pop(),S.length>0?b=S[S.length-1]:b=null,m.pop(),m.length>0?x=m[m.length-1]:x=null};function Tn(Ye,xt,Mt,Et){if(Ye.visible===!1)return;if(Ye.layers.test(xt.layers)){if(Ye.isGroup)Mt=Ye.renderOrder;else if(Ye.isLOD)Ye.autoUpdate===!0&&Ye.update(xt);else if(Ye.isLight)b.pushLight(Ye),Ye.castShadow&&b.pushShadow(Ye);else if(Ye.isSprite){if(!Ye.frustumCulled||me.intersectsSprite(Ye)){Et&&mt.setFromMatrixPosition(Ye.matrixWorld).applyMatrix4(Ge);const We=we.update(Ye),it=Ye.material;it.visible&&x.push(Ye,We,it,Mt,mt.z,null)}}else if((Ye.isMesh||Ye.isLine||Ye.isPoints)&&(!Ye.frustumCulled||me.intersectsObject(Ye))){const We=we.update(Ye),it=Ye.material;if(Et&&(Ye.boundingSphere!==void 0?(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),mt.copy(Ye.boundingSphere.center)):(We.boundingSphere===null&&We.computeBoundingSphere(),mt.copy(We.boundingSphere.center)),mt.applyMatrix4(Ye.matrixWorld).applyMatrix4(Ge)),Array.isArray(it)){const gt=We.groups;for(let At=0,Rt=gt.length;At<Rt;At++){const Nt=gt[At],wn=it[Nt.materialIndex];wn&&wn.visible&&x.push(Ye,We,wn,Mt,mt.z,Nt)}}else it.visible&&x.push(Ye,We,it,Mt,mt.z,null)}}const Re=Ye.children;for(let We=0,it=Re.length;We<it;We++)Tn(Re[We],xt,Mt,Et)}function Qt(Ye,xt,Mt,Et){const Bt=Ye.opaque,Re=Ye.transmissive,We=Ye.transparent;b.setupLightsView(Mt),Be===!0&&He.setGlobalState(C.clippingPlanes,Mt),Re.length>0&&mn(Bt,Re,xt,Mt),Et&&nn.viewport(z.copy(Et)),Bt.length>0&&ri(Bt,xt,Mt),Re.length>0&&ri(Re,xt,Mt),We.length>0&&ri(We,xt,Mt),nn.buffers.depth.setTest(!0),nn.buffers.depth.setMask(!0),nn.buffers.color.setMask(!0),nn.setPolygonOffset(!1)}function mn(Ye,xt,Mt,Et){const Bt=on.isWebGL2;rt===null&&(rt=new $d(1,1,{generateMipmaps:!0,type:Xt.has("EXT_color_buffer_half_float")?qg:Kd,minFilter:ly,samples:Bt?4:0})),C.getDrawingBufferSize(st),Bt?rt.setSize(st.x,st.y):rt.setSize(T_(st.x),T_(st.y));const Re=C.getRenderTarget();C.setRenderTarget(rt),C.getClearColor(O),F=C.getClearAlpha(),F<1&&C.setClearColor(16777215,.5),C.clear();const We=C.toneMapping;C.toneMapping=Wd,ri(Ye,Mt,Et),zn.updateMultisampleRenderTarget(rt),zn.updateRenderTargetMipmap(rt);let it=!1;for(let gt=0,At=xt.length;gt<At;gt++){const Rt=xt[gt],Nt=Rt.object,wn=Rt.geometry,yn=Rt.material,Vt=Rt.group;if(yn.side===gh&&Nt.layers.test(Et.layers)){const qn=yn.side;yn.side=La,yn.needsUpdate=!0,Cn(Nt,Mt,Et,wn,yn,Vt),yn.side=qn,yn.needsUpdate=!0,it=!0}}it===!0&&(zn.updateMultisampleRenderTarget(rt),zn.updateRenderTargetMipmap(rt)),C.setRenderTarget(Re),C.setClearColor(O,F),C.toneMapping=We}function ri(Ye,xt,Mt){const Et=xt.isScene===!0?xt.overrideMaterial:null;for(let Bt=0,Re=Ye.length;Bt<Re;Bt++){const We=Ye[Bt],it=We.object,gt=We.geometry,At=Et===null?We.material:Et,Rt=We.group;it.layers.test(Mt.layers)&&Cn(it,xt,Mt,gt,At,Rt)}}function Cn(Ye,xt,Mt,Et,Bt,Re){Ye.onBeforeRender(C,xt,Mt,Et,Bt,Re),Ye.modelViewMatrix.multiplyMatrices(Mt.matrixWorldInverse,Ye.matrixWorld),Ye.normalMatrix.getNormalMatrix(Ye.modelViewMatrix),Bt.onBeforeRender(C,xt,Mt,Et,Ye,Re),Bt.transparent===!0&&Bt.side===gh&&Bt.forceSinglePass===!1?(Bt.side=La,Bt.needsUpdate=!0,C.renderBufferDirect(Mt,xt,Et,Bt,Ye,Re),Bt.side=qd,Bt.needsUpdate=!0,C.renderBufferDirect(Mt,xt,Et,Bt,Ye,Re),Bt.side=gh):C.renderBufferDirect(Mt,xt,Et,Bt,Ye,Re),Ye.onAfterRender(C,xt,Mt,Et,Bt,Re)}function li(Ye,xt,Mt){xt.isScene!==!0&&(xt=Ft);const Et=Rn.get(Ye),Bt=b.state.lights,Re=b.state.shadowsArray,We=Bt.state.version,it=ge.getParameters(Ye,Bt.state,Re,xt,Mt),gt=ge.getProgramCacheKey(it);let At=Et.programs;Et.environment=Ye.isMeshStandardMaterial?xt.environment:null,Et.fog=xt.fog,Et.envMap=(Ye.isMeshStandardMaterial?Ai:Wn).get(Ye.envMap||Et.environment),At===void 0&&(Ye.addEventListener("dispose",Ot),At=new Map,Et.programs=At);let Rt=At.get(gt);if(Rt!==void 0){if(Et.currentProgram===Rt&&Et.lightsStateVersion===We)return bi(Ye,it),Rt}else it.uniforms=ge.getUniforms(Ye),Ye.onBuild(Mt,it,C),Ye.onBeforeCompile(it,C),Rt=ge.acquireProgram(it,gt),At.set(gt,Rt),Et.uniforms=it.uniforms;const Nt=Et.uniforms;(!Ye.isShaderMaterial&&!Ye.isRawShaderMaterial||Ye.clipping===!0)&&(Nt.clippingPlanes=He.uniform),bi(Ye,it),Et.needsLights=ar(Ye),Et.lightsStateVersion=We,Et.needsLights&&(Nt.ambientLightColor.value=Bt.state.ambient,Nt.lightProbe.value=Bt.state.probe,Nt.directionalLights.value=Bt.state.directional,Nt.directionalLightShadows.value=Bt.state.directionalShadow,Nt.spotLights.value=Bt.state.spot,Nt.spotLightShadows.value=Bt.state.spotShadow,Nt.rectAreaLights.value=Bt.state.rectArea,Nt.ltc_1.value=Bt.state.rectAreaLTC1,Nt.ltc_2.value=Bt.state.rectAreaLTC2,Nt.pointLights.value=Bt.state.point,Nt.pointLightShadows.value=Bt.state.pointShadow,Nt.hemisphereLights.value=Bt.state.hemi,Nt.directionalShadowMap.value=Bt.state.directionalShadowMap,Nt.directionalShadowMatrix.value=Bt.state.directionalShadowMatrix,Nt.spotShadowMap.value=Bt.state.spotShadowMap,Nt.spotLightMatrix.value=Bt.state.spotLightMatrix,Nt.spotLightMap.value=Bt.state.spotLightMap,Nt.pointShadowMap.value=Bt.state.pointShadowMap,Nt.pointShadowMatrix.value=Bt.state.pointShadowMatrix);const wn=Rt.getUniforms(),yn=XE.seqWithValue(wn.seq,Nt);return Et.currentProgram=Rt,Et.uniformsList=yn,Rt}function bi(Ye,xt){const Mt=Rn.get(Ye);Mt.outputColorSpace=xt.outputColorSpace,Mt.instancing=xt.instancing,Mt.instancingColor=xt.instancingColor,Mt.skinning=xt.skinning,Mt.morphTargets=xt.morphTargets,Mt.morphNormals=xt.morphNormals,Mt.morphColors=xt.morphColors,Mt.morphTargetsCount=xt.morphTargetsCount,Mt.numClippingPlanes=xt.numClippingPlanes,Mt.numIntersection=xt.numClipIntersection,Mt.vertexAlphas=xt.vertexAlphas,Mt.vertexTangents=xt.vertexTangents,Mt.toneMapping=xt.toneMapping}function Li(Ye,xt,Mt,Et,Bt){xt.isScene!==!0&&(xt=Ft),zn.resetTextureUnits();const Re=xt.fog,We=Et.isMeshStandardMaterial?xt.environment:null,it=P===null?C.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Tu,gt=(Et.isMeshStandardMaterial?Ai:Wn).get(Et.envMap||We),At=Et.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,Rt=!!Mt.attributes.tangent&&(!!Et.normalMap||Et.anisotropy>0),Nt=!!Mt.morphAttributes.position,wn=!!Mt.morphAttributes.normal,yn=!!Mt.morphAttributes.color;let Vt=Wd;Et.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Vt=C.toneMapping);const qn=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,Un=qn!==void 0?qn.length:0,_n=Rn.get(Et),Rr=b.state.lights;if(Be===!0&&(Se===!0||Ye!==D)){const Mi=Ye===D&&Et.id===k;He.setState(Et,Ye,Mi)}let hi=!1;Et.version===_n.__version?(_n.needsLights&&_n.lightsStateVersion!==Rr.state.version||_n.outputColorSpace!==it||Bt.isInstancedMesh&&_n.instancing===!1||!Bt.isInstancedMesh&&_n.instancing===!0||Bt.isSkinnedMesh&&_n.skinning===!1||!Bt.isSkinnedMesh&&_n.skinning===!0||Bt.isInstancedMesh&&_n.instancingColor===!0&&Bt.instanceColor===null||Bt.isInstancedMesh&&_n.instancingColor===!1&&Bt.instanceColor!==null||_n.envMap!==gt||Et.fog===!0&&_n.fog!==Re||_n.numClippingPlanes!==void 0&&(_n.numClippingPlanes!==He.numPlanes||_n.numIntersection!==He.numIntersection)||_n.vertexAlphas!==At||_n.vertexTangents!==Rt||_n.morphTargets!==Nt||_n.morphNormals!==wn||_n.morphColors!==yn||_n.toneMapping!==Vt||on.isWebGL2===!0&&_n.morphTargetsCount!==Un)&&(hi=!0):(hi=!0,_n.__version=Et.version);let Ci=_n.currentProgram;hi===!0&&(Ci=li(Et,xt,Bt));let qi=!1,Cr=!1,Jr=!1;const bn=Ci.getUniforms(),ei=_n.uniforms;if(nn.useProgram(Ci.program)&&(qi=!0,Cr=!0,Jr=!0),Et.id!==k&&(k=Et.id,Cr=!0),qi||D!==Ye){bn.setValue(nt,"projectionMatrix",Ye.projectionMatrix),bn.setValue(nt,"viewMatrix",Ye.matrixWorldInverse);const Mi=bn.map.cameraPosition;Mi!==void 0&&Mi.setValue(nt,mt.setFromMatrixPosition(Ye.matrixWorld)),on.logarithmicDepthBuffer&&bn.setValue(nt,"logDepthBufFC",2/(Math.log(Ye.far+1)/Math.LN2)),(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial)&&bn.setValue(nt,"isOrthographic",Ye.isOrthographicCamera===!0),D!==Ye&&(D=Ye,Cr=!0,Jr=!0)}if(Bt.isSkinnedMesh){bn.setOptional(nt,Bt,"bindMatrix"),bn.setOptional(nt,Bt,"bindMatrixInverse");const Mi=Bt.skeleton;Mi&&(on.floatVertexTextures?(Mi.boneTexture===null&&Mi.computeBoneTexture(),bn.setValue(nt,"boneTexture",Mi.boneTexture,zn),bn.setValue(nt,"boneTextureSize",Mi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Wr=Mt.morphAttributes;if((Wr.position!==void 0||Wr.normal!==void 0||Wr.color!==void 0&&on.isWebGL2===!0)&&Ae.update(Bt,Mt,Ci),(Cr||_n.receiveShadow!==Bt.receiveShadow)&&(_n.receiveShadow=Bt.receiveShadow,bn.setValue(nt,"receiveShadow",Bt.receiveShadow)),Et.isMeshGouraudMaterial&&Et.envMap!==null&&(ei.envMap.value=gt,ei.flipEnvMap.value=gt.isCubeTexture&&gt.isRenderTargetTexture===!1?-1:1),Cr&&(bn.setValue(nt,"toneMappingExposure",C.toneMappingExposure),_n.needsLights&&Ar(ei,Jr),Re&&Et.fog===!0&&_e.refreshFogUniforms(ei,Re),_e.refreshMaterialUniforms(ei,Et,V,G,rt),XE.upload(nt,_n.uniformsList,ei,zn)),Et.isShaderMaterial&&Et.uniformsNeedUpdate===!0&&(XE.upload(nt,_n.uniformsList,ei,zn),Et.uniformsNeedUpdate=!1),Et.isSpriteMaterial&&bn.setValue(nt,"center",Bt.center),bn.setValue(nt,"modelViewMatrix",Bt.modelViewMatrix),bn.setValue(nt,"normalMatrix",Bt.normalMatrix),bn.setValue(nt,"modelMatrix",Bt.matrixWorld),Et.isShaderMaterial||Et.isRawShaderMaterial){const Mi=Et.uniformsGroups;for(let ie=0,ce=Mi.length;ie<ce;ie++)if(on.isWebGL2){const ye=Mi[ie];re.update(ye,Ci),re.bind(ye,Ci)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ci}function Ar(Ye,xt){Ye.ambientLightColor.needsUpdate=xt,Ye.lightProbe.needsUpdate=xt,Ye.directionalLights.needsUpdate=xt,Ye.directionalLightShadows.needsUpdate=xt,Ye.pointLights.needsUpdate=xt,Ye.pointLightShadows.needsUpdate=xt,Ye.spotLights.needsUpdate=xt,Ye.spotLightShadows.needsUpdate=xt,Ye.rectAreaLights.needsUpdate=xt,Ye.hemisphereLights.needsUpdate=xt}function ar(Ye){return Ye.isMeshLambertMaterial||Ye.isMeshToonMaterial||Ye.isMeshPhongMaterial||Ye.isMeshStandardMaterial||Ye.isShadowMaterial||Ye.isShaderMaterial&&Ye.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(Ye,xt,Mt){Rn.get(Ye.texture).__webglTexture=xt,Rn.get(Ye.depthTexture).__webglTexture=Mt;const Et=Rn.get(Ye);Et.__hasExternalTextures=!0,Et.__hasExternalTextures&&(Et.__autoAllocateDepthBuffer=Mt===void 0,Et.__autoAllocateDepthBuffer||Xt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Et.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ye,xt){const Mt=Rn.get(Ye);Mt.__webglFramebuffer=xt,Mt.__useDefaultFramebuffer=xt===void 0},this.setRenderTarget=function(Ye,xt=0,Mt=0){P=Ye,T=xt,N=Mt;let Et=!0,Bt=null,Re=!1,We=!1;if(Ye){const gt=Rn.get(Ye);gt.__useDefaultFramebuffer!==void 0?(nn.bindFramebuffer(nt.FRAMEBUFFER,null),Et=!1):gt.__webglFramebuffer===void 0?zn.setupRenderTarget(Ye):gt.__hasExternalTextures&&zn.rebindTextures(Ye,Rn.get(Ye.texture).__webglTexture,Rn.get(Ye.depthTexture).__webglTexture);const At=Ye.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(We=!0);const Rt=Rn.get(Ye).__webglFramebuffer;Ye.isWebGLCubeRenderTarget?(Array.isArray(Rt[xt])?Bt=Rt[xt][Mt]:Bt=Rt[xt],Re=!0):on.isWebGL2&&Ye.samples>0&&zn.useMultisampledRTT(Ye)===!1?Bt=Rn.get(Ye).__webglMultisampledFramebuffer:Array.isArray(Rt)?Bt=Rt[Mt]:Bt=Rt,z.copy(Ye.viewport),Y.copy(Ye.scissor),ne=Ye.scissorTest}else z.copy(J).multiplyScalar(V).floor(),Y.copy(ee).multiplyScalar(V).floor(),ne=he;if(nn.bindFramebuffer(nt.FRAMEBUFFER,Bt)&&on.drawBuffers&&Et&&nn.drawBuffers(Ye,Bt),nn.viewport(z),nn.scissor(Y),nn.setScissorTest(ne),Re){const gt=Rn.get(Ye.texture);nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+xt,gt.__webglTexture,Mt)}else if(We){const gt=Rn.get(Ye.texture),At=xt||0;nt.framebufferTextureLayer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,gt.__webglTexture,Mt||0,At)}k=-1},this.readRenderTargetPixels=function(Ye,xt,Mt,Et,Bt,Re,We){if(!(Ye&&Ye.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let it=Rn.get(Ye).__webglFramebuffer;if(Ye.isWebGLCubeRenderTarget&&We!==void 0&&(it=it[We]),it){nn.bindFramebuffer(nt.FRAMEBUFFER,it);try{const gt=Ye.texture,At=gt.format,Rt=gt.type;if(At!==Rc&&ue.convert(At)!==nt.getParameter(nt.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Nt=Rt===qg&&(Xt.has("EXT_color_buffer_half_float")||on.isWebGL2&&Xt.has("EXT_color_buffer_float"));if(Rt!==Kd&&ue.convert(Rt)!==nt.getParameter(nt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Rt===kd&&(on.isWebGL2||Xt.has("OES_texture_float")||Xt.has("WEBGL_color_buffer_float")))&&!Nt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}xt>=0&&xt<=Ye.width-Et&&Mt>=0&&Mt<=Ye.height-Bt&&nt.readPixels(xt,Mt,Et,Bt,ue.convert(At),ue.convert(Rt),Re)}finally{const gt=P!==null?Rn.get(P).__webglFramebuffer:null;nn.bindFramebuffer(nt.FRAMEBUFFER,gt)}}},this.copyFramebufferToTexture=function(Ye,xt,Mt=0){const Et=Math.pow(2,-Mt),Bt=Math.floor(xt.image.width*Et),Re=Math.floor(xt.image.height*Et);zn.setTexture2D(xt,0),nt.copyTexSubImage2D(nt.TEXTURE_2D,Mt,0,0,Ye.x,Ye.y,Bt,Re),nn.unbindTexture()},this.copyTextureToTexture=function(Ye,xt,Mt,Et=0){const Bt=xt.image.width,Re=xt.image.height,We=ue.convert(Mt.format),it=ue.convert(Mt.type);zn.setTexture2D(Mt,0),nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,Mt.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mt.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,Mt.unpackAlignment),xt.isDataTexture?nt.texSubImage2D(nt.TEXTURE_2D,Et,Ye.x,Ye.y,Bt,Re,We,it,xt.image.data):xt.isCompressedTexture?nt.compressedTexSubImage2D(nt.TEXTURE_2D,Et,Ye.x,Ye.y,xt.mipmaps[0].width,xt.mipmaps[0].height,We,xt.mipmaps[0].data):nt.texSubImage2D(nt.TEXTURE_2D,Et,Ye.x,Ye.y,We,it,xt.image),Et===0&&Mt.generateMipmaps&&nt.generateMipmap(nt.TEXTURE_2D),nn.unbindTexture()},this.copyTextureToTexture3D=function(Ye,xt,Mt,Et,Bt=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Re=Ye.max.x-Ye.min.x+1,We=Ye.max.y-Ye.min.y+1,it=Ye.max.z-Ye.min.z+1,gt=ue.convert(Et.format),At=ue.convert(Et.type);let Rt;if(Et.isData3DTexture)zn.setTexture3D(Et,0),Rt=nt.TEXTURE_3D;else if(Et.isDataArrayTexture)zn.setTexture2DArray(Et,0),Rt=nt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,Et.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Et.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,Et.unpackAlignment);const Nt=nt.getParameter(nt.UNPACK_ROW_LENGTH),wn=nt.getParameter(nt.UNPACK_IMAGE_HEIGHT),yn=nt.getParameter(nt.UNPACK_SKIP_PIXELS),Vt=nt.getParameter(nt.UNPACK_SKIP_ROWS),qn=nt.getParameter(nt.UNPACK_SKIP_IMAGES),Un=Mt.isCompressedTexture?Mt.mipmaps[0]:Mt.image;nt.pixelStorei(nt.UNPACK_ROW_LENGTH,Un.width),nt.pixelStorei(nt.UNPACK_IMAGE_HEIGHT,Un.height),nt.pixelStorei(nt.UNPACK_SKIP_PIXELS,Ye.min.x),nt.pixelStorei(nt.UNPACK_SKIP_ROWS,Ye.min.y),nt.pixelStorei(nt.UNPACK_SKIP_IMAGES,Ye.min.z),Mt.isDataTexture||Mt.isData3DTexture?nt.texSubImage3D(Rt,Bt,xt.x,xt.y,xt.z,Re,We,it,gt,At,Un.data):Mt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),nt.compressedTexSubImage3D(Rt,Bt,xt.x,xt.y,xt.z,Re,We,it,gt,Un.data)):nt.texSubImage3D(Rt,Bt,xt.x,xt.y,xt.z,Re,We,it,gt,At,Un),nt.pixelStorei(nt.UNPACK_ROW_LENGTH,Nt),nt.pixelStorei(nt.UNPACK_IMAGE_HEIGHT,wn),nt.pixelStorei(nt.UNPACK_SKIP_PIXELS,yn),nt.pixelStorei(nt.UNPACK_SKIP_ROWS,Vt),nt.pixelStorei(nt.UNPACK_SKIP_IMAGES,qn),Bt===0&&Et.generateMipmaps&&nt.generateMipmap(Rt),nn.unbindTexture()},this.initTexture=function(Ye){Ye.isCubeTexture?zn.setTextureCube(Ye,0):Ye.isData3DTexture?zn.setTexture3D(Ye,0):Ye.isDataArrayTexture||Ye.isCompressedArrayTexture?zn.setTexture2DArray(Ye,0):zn.setTexture2D(Ye,0),nn.unbindTexture()},this.resetState=function(){T=0,N=0,P=null,nn.reset(),q.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yh}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ms?vp:vF}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===vp?ms:Tu}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Zj extends FF{}Zj.prototype.isWebGL1Renderer=!0;class eQ extends Lo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i}}class tQ{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=hT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=wh()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,s){e*=this.stride,s*=i.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=i.array[s+o];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wh()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(i,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wh()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ca=new ht;class I_{constructor(e,i,s,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=s,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,s=this.data.count;i<s;i++)Ca.fromBufferAttribute(this,i),Ca.applyMatrix4(e),this.setXYZ(i,Ca.x,Ca.y,Ca.z);return this}applyNormalMatrix(e){for(let i=0,s=this.count;i<s;i++)Ca.fromBufferAttribute(this,i),Ca.applyNormalMatrix(e),this.setXYZ(i,Ca.x,Ca.y,Ca.z);return this}transformDirection(e){for(let i=0,s=this.count;i<s;i++)Ca.fromBufferAttribute(this,i),Ca.transformDirection(e),this.setXYZ(i,Ca.x,Ca.y,Ca.z);return this}setX(e,i){return this.normalized&&(i=rs(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=rs(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=rs(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=rs(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=wu(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=wu(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=wu(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=wu(i,this.array)),i}setXY(e,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(i=rs(i,this.array),s=rs(s,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=s,this}setXYZ(e,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(i=rs(i,this.array),s=rs(s,this.array),o=rs(o,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=s,this.data.array[e+2]=o,this}setXYZW(e,i,s,o,l){return e=e*this.data.stride+this.offset,this.normalized&&(i=rs(i,this.array),s=rs(s,this.array),o=rs(o,this.array),l=rs(l,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=s,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let s=0;s<this.count;s++){const o=s*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[o+l])}return new Jl(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new I_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let s=0;s<this.count;s++){const o=s*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class kF extends Rp{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new jr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let sg;const tv=new ht,og=new ht,ag=new ht,lg=new jn,nv=new jn,NF=new Os,gE=new ht,iv=new ht,AE=new ht,aD=new jn,PM=new jn,lD=new jn;class nQ extends Lo{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",sg===void 0){sg=new Za;const i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new tQ(i,5);sg.setIndex([0,1,2,0,2,3]),sg.setAttribute("position",new I_(s,3,0,!1)),sg.setAttribute("uv",new I_(s,2,3,!1))}this.geometry=sg,this.material=e!==void 0?e:new kF,this.center=new jn(.5,.5)}raycast(e,i){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),og.setFromMatrixScale(this.matrixWorld),NF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ag.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&og.multiplyScalar(-ag.z);const s=this.material.rotation;let o,l;s!==0&&(l=Math.cos(s),o=Math.sin(s));const c=this.center;vE(gE.set(-.5,-.5,0),ag,c,og,o,l),vE(iv.set(.5,-.5,0),ag,c,og,o,l),vE(AE.set(.5,.5,0),ag,c,og,o,l),aD.set(0,0),PM.set(1,0),lD.set(1,1);let d=e.ray.intersectTriangle(gE,iv,AE,!1,tv);if(d===null&&(vE(iv.set(-.5,.5,0),ag,c,og,o,l),PM.set(0,1),d=e.ray.intersectTriangle(gE,AE,iv,!1,tv),d===null))return;const u=e.ray.origin.distanceTo(tv);u<e.near||u>e.far||i.push({distance:u,point:tv.clone(),uv:Kl.getInterpolation(tv,gE,iv,AE,aD,PM,lD,new jn),face:null,object:this})}copy(e,i){return super.copy(e,i),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function vE(n,e,i,s,o,l){lg.subVectors(n,i).addScalar(.5).multiply(s),o!==void 0?(nv.x=l*lg.x-o*lg.y,nv.y=o*lg.x+l*lg.y):nv.copy(lg),n.copy(e),n.x+=nv.x,n.y+=nv.y,n.applyMatrix4(NF)}class UF extends Rp{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new jr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const cD=new ht,uD=new ht,hD=new Os,OM=new db,yE=new hb;class iQ extends Lo{constructor(e=new Za,i=new UF){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,s=[0];for(let o=1,l=i.count;o<l;o++)cD.fromBufferAttribute(i,o-1),uD.fromBufferAttribute(i,o),s[o]=s[o-1],s[o]+=cD.distanceTo(uD);e.setAttribute("lineDistance",new mo(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){const s=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,c=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),yE.copy(s.boundingSphere),yE.applyMatrix4(o),yE.radius+=l,e.ray.intersectsSphere(yE)===!1)return;hD.copy(o).invert(),OM.copy(e.ray).applyMatrix4(hD);const d=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=d*d,f=new ht,A=new ht,g=new ht,y=new ht,v=this.isLineSegments?2:1,_=s.index,b=s.attributes.position;if(_!==null){const m=Math.max(0,c.start),S=Math.min(_.count,c.start+c.count);for(let C=m,M=S-1;C<M;C+=v){const T=_.getX(C),N=_.getX(C+1);if(f.fromBufferAttribute(b,T),A.fromBufferAttribute(b,N),OM.distanceSqToSegment(f,A,y,g)>u)continue;y.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(y);k<e.near||k>e.far||i.push({distance:k,point:g.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,c.start),S=Math.min(b.count,c.start+c.count);for(let C=m,M=S-1;C<M;C+=v){if(f.fromBufferAttribute(b,C),A.fromBufferAttribute(b,C+1),OM.distanceSqToSegment(f,A,y,g)>u)continue;y.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(y);N<e.near||N>e.far||i.push({distance:N,point:g.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const i=this.geometry.morphAttributes,s=Object.keys(i);if(s.length>0){const o=i[s[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const d=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=l}}}}}class Ph{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){const s=this.getUtoTmapping(e);return this.getPoint(s,i)}getPoints(e=5){const i=[];for(let s=0;s<=e;s++)i.push(this.getPoint(s/e));return i}getSpacedPoints(e=5){const i=[];for(let s=0;s<=e;s++)i.push(this.getPointAt(s/e));return i}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const i=[];let s,o=this.getPoint(0),l=0;i.push(0);for(let c=1;c<=e;c++)s=this.getPoint(c/e),l+=s.distanceTo(o),i.push(l),o=s;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){const s=this.getLengths();let o=0;const l=s.length;let c;i?c=i:c=e*s[l-1];let d=0,u=l-1,f;for(;d<=u;)if(o=Math.floor(d+(u-d)/2),f=s[o]-c,f<0)d=o+1;else if(f>0)u=o-1;else{u=o;break}if(o=u,s[o]===c)return o/(l-1);const A=s[o],y=s[o+1]-A,v=(c-A)/y;return(o+v)/(l-1)}getTangent(e,i){let o=e-1e-4,l=e+1e-4;o<0&&(o=0),l>1&&(l=1);const c=this.getPoint(o),d=this.getPoint(l),u=i||(c.isVector2?new jn:new ht);return u.copy(d).sub(c).normalize(),u}getTangentAt(e,i){const s=this.getUtoTmapping(e);return this.getTangent(s,i)}computeFrenetFrames(e,i){const s=new ht,o=[],l=[],c=[],d=new ht,u=new Os;for(let v=0;v<=e;v++){const _=v/e;o[v]=this.getTangentAt(_,new ht)}l[0]=new ht,c[0]=new ht;let f=Number.MAX_VALUE;const A=Math.abs(o[0].x),g=Math.abs(o[0].y),y=Math.abs(o[0].z);A<=f&&(f=A,s.set(1,0,0)),g<=f&&(f=g,s.set(0,1,0)),y<=f&&s.set(0,0,1),d.crossVectors(o[0],s).normalize(),l[0].crossVectors(o[0],d),c[0].crossVectors(o[0],l[0]);for(let v=1;v<=e;v++){if(l[v]=l[v-1].clone(),c[v]=c[v-1].clone(),d.crossVectors(o[v-1],o[v]),d.length()>Number.EPSILON){d.normalize();const _=Math.acos(To(o[v-1].dot(o[v]),-1,1));l[v].applyMatrix4(u.makeRotationAxis(d,_))}c[v].crossVectors(o[v],l[v])}if(i===!0){let v=Math.acos(To(l[0].dot(l[e]),-1,1));v/=e,o[0].dot(d.crossVectors(l[0],l[e]))>0&&(v=-v);for(let _=1;_<=e;_++)l[_].applyMatrix4(u.makeRotationAxis(o[_],v*_)),c[_].crossVectors(o[_],l[_])}return{tangents:o,normals:l,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class GF extends Ph{constructor(e=0,i=0,s=1,o=1,l=0,c=Math.PI*2,d=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=s,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=c,this.aClockwise=d,this.aRotation=u}getPoint(e,i){const s=i||new jn,o=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const c=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(c?l=0:l=o),this.aClockwise===!0&&!c&&(l===o?l=-o:l=l-o);const d=this.aStartAngle+e*l;let u=this.aX+this.xRadius*Math.cos(d),f=this.aY+this.yRadius*Math.sin(d);if(this.aRotation!==0){const A=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=u-this.aX,v=f-this.aY;u=y*A-v*g+this.aX,f=y*g+v*A+this.aY}return s.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rQ extends GF{constructor(e,i,s,o,l,c){super(e,i,s,s,o,l,c),this.isArcCurve=!0,this.type="ArcCurve"}}function eI(){let n=0,e=0,i=0,s=0;function o(l,c,d,u){n=l,e=d,i=-3*l+3*c-2*d-u,s=2*l-2*c+d+u}return{initCatmullRom:function(l,c,d,u,f){o(c,d,f*(d-l),f*(u-c))},initNonuniformCatmullRom:function(l,c,d,u,f,A,g){let y=(c-l)/f-(d-l)/(f+A)+(d-c)/A,v=(d-c)/A-(u-c)/(A+g)+(u-d)/g;y*=A,v*=A,o(c,d,y,v)},calc:function(l){const c=l*l,d=c*l;return n+e*l+i*c+s*d}}}const xE=new ht,FM=new eI,kM=new eI,NM=new eI;class sQ extends Ph{constructor(e=[],i=!1,s="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=s,this.tension=o}getPoint(e,i=new ht){const s=i,o=this.points,l=o.length,c=(l-(this.closed?0:1))*e;let d=Math.floor(c),u=c-d;this.closed?d+=d>0?0:(Math.floor(Math.abs(d)/l)+1)*l:u===0&&d===l-1&&(d=l-2,u=1);let f,A;this.closed||d>0?f=o[(d-1)%l]:(xE.subVectors(o[0],o[1]).add(o[0]),f=xE);const g=o[d%l],y=o[(d+1)%l];if(this.closed||d+2<l?A=o[(d+2)%l]:(xE.subVectors(o[l-1],o[l-2]).add(o[l-1]),A=xE),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(g),v),x=Math.pow(g.distanceToSquared(y),v),b=Math.pow(y.distanceToSquared(A),v);x<1e-4&&(x=1),_<1e-4&&(_=x),b<1e-4&&(b=x),FM.initNonuniformCatmullRom(f.x,g.x,y.x,A.x,_,x,b),kM.initNonuniformCatmullRom(f.y,g.y,y.y,A.y,_,x,b),NM.initNonuniformCatmullRom(f.z,g.z,y.z,A.z,_,x,b)}else this.curveType==="catmullrom"&&(FM.initCatmullRom(f.x,g.x,y.x,A.x,this.tension),kM.initCatmullRom(f.y,g.y,y.y,A.y,this.tension),NM.initCatmullRom(f.z,g.z,y.z,A.z,this.tension));return s.set(FM.calc(u),kM.calc(u),NM.calc(u)),s}copy(e){super.copy(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){const o=e.points[i];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,s=this.points.length;i<s;i++){const o=this.points[i];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){const o=e.points[i];this.points.push(new ht().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dD(n,e,i,s,o){const l=(s-e)*.5,c=(o-i)*.5,d=n*n,u=n*d;return(2*i-2*s+l+c)*u+(-3*i+3*s-2*l-c)*d+l*n+i}function oQ(n,e){const i=1-n;return i*i*e}function aQ(n,e){return 2*(1-n)*n*e}function lQ(n,e){return n*n*e}function Uv(n,e,i,s){return oQ(n,e)+aQ(n,i)+lQ(n,s)}function cQ(n,e){const i=1-n;return i*i*i*e}function uQ(n,e){const i=1-n;return 3*i*i*n*e}function hQ(n,e){return 3*(1-n)*n*n*e}function dQ(n,e){return n*n*n*e}function Gv(n,e,i,s,o){return cQ(n,e)+uQ(n,i)+hQ(n,s)+dQ(n,o)}class fQ extends Ph{constructor(e=new jn,i=new jn,s=new jn,o=new jn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=s,this.v3=o}getPoint(e,i=new jn){const s=i,o=this.v0,l=this.v1,c=this.v2,d=this.v3;return s.set(Gv(e,o.x,l.x,c.x,d.x),Gv(e,o.y,l.y,c.y,d.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zF extends Ph{constructor(e=new ht,i=new ht,s=new ht,o=new ht){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=s,this.v3=o}getPoint(e,i=new ht){const s=i,o=this.v0,l=this.v1,c=this.v2,d=this.v3;return s.set(Gv(e,o.x,l.x,c.x,d.x),Gv(e,o.y,l.y,c.y,d.y),Gv(e,o.z,l.z,c.z,d.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class pQ extends Ph{constructor(e=new jn,i=new jn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new jn){const s=i;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new jn){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mQ extends Ph{constructor(e=new ht,i=new ht){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new ht){const s=i;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new ht){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gQ extends Ph{constructor(e=new jn,i=new jn,s=new jn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=s}getPoint(e,i=new jn){const s=i,o=this.v0,l=this.v1,c=this.v2;return s.set(Uv(e,o.x,l.x,c.x),Uv(e,o.y,l.y,c.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tI extends Ph{constructor(e=new ht,i=new ht,s=new ht){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=s}getPoint(e,i=new ht){const s=i,o=this.v0,l=this.v1,c=this.v2;return s.set(Uv(e,o.x,l.x,c.x),Uv(e,o.y,l.y,c.y),Uv(e,o.z,l.z,c.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AQ extends Ph{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new jn){const s=i,o=this.points,l=(o.length-1)*e,c=Math.floor(l),d=l-c,u=o[c===0?c:c-1],f=o[c],A=o[c>o.length-2?o.length-1:c+1],g=o[c>o.length-3?o.length-1:c+2];return s.set(dD(d,u.x,f.x,A.x,g.x),dD(d,u.y,f.y,A.y,g.y)),s}copy(e){super.copy(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){const o=e.points[i];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,s=this.points.length;i<s;i++){const o=this.points[i];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){const o=e.points[i];this.points.push(new jn().fromArray(o))}return this}}var vQ=Object.freeze({__proto__:null,ArcCurve:rQ,CatmullRomCurve3:sQ,CubicBezierCurve:fQ,CubicBezierCurve3:zF,EllipseCurve:GF,LineCurve:pQ,LineCurve3:mQ,QuadraticBezierCurve:gQ,QuadraticBezierCurve3:tI,SplineCurve:AQ});class mb extends Za{constructor(e=1,i=1,s=1,o=32,l=1,c=!1,d=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:s,radialSegments:o,heightSegments:l,openEnded:c,thetaStart:d,thetaLength:u};const f=this;o=Math.floor(o),l=Math.floor(l);const A=[],g=[],y=[],v=[];let _=0;const x=[],b=s/2;let m=0;S(),c===!1&&(e>0&&C(!0),i>0&&C(!1)),this.setIndex(A),this.setAttribute("position",new mo(g,3)),this.setAttribute("normal",new mo(y,3)),this.setAttribute("uv",new mo(v,2));function S(){const M=new ht,T=new ht;let N=0;const P=(i-e)/s;for(let k=0;k<=l;k++){const D=[],z=k/l,Y=z*(i-e)+e;for(let ne=0;ne<=o;ne++){const O=ne/o,F=O*u+d,U=Math.sin(F),G=Math.cos(F);T.x=Y*U,T.y=-z*s+b,T.z=Y*G,g.push(T.x,T.y,T.z),M.set(U,P,G).normalize(),y.push(M.x,M.y,M.z),v.push(O,1-z),D.push(_++)}x.push(D)}for(let k=0;k<o;k++)for(let D=0;D<l;D++){const z=x[D][k],Y=x[D+1][k],ne=x[D+1][k+1],O=x[D][k+1];A.push(z,Y,O),A.push(Y,ne,O),N+=6}f.addGroup(m,N,0),m+=N}function C(M){const T=_,N=new jn,P=new ht;let k=0;const D=M===!0?e:i,z=M===!0?1:-1;for(let ne=1;ne<=o;ne++)g.push(0,b*z,0),y.push(0,z,0),v.push(.5,.5),_++;const Y=_;for(let ne=0;ne<=o;ne++){const F=ne/o*u+d,U=Math.cos(F),G=Math.sin(F);P.x=D*G,P.y=b*z,P.z=D*U,g.push(P.x,P.y,P.z),y.push(0,z,0),N.x=U*.5+.5,N.y=G*.5*z+.5,v.push(N.x,N.y),_++}for(let ne=0;ne<o;ne++){const O=T+ne,F=Y+ne;M===!0?A.push(F,F+1,O):A.push(F+1,F,O),k+=3}f.addGroup(m,k,M===!0?1:2),m+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nI extends mb{constructor(e=1,i=1,s=32,o=1,l=!1,c=0,d=Math.PI*2){super(0,e,i,s,o,l,c,d),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:c,thetaLength:d}}static fromJSON(e){return new nI(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gb extends Za{constructor(e=1,i=32,s=16,o=0,l=Math.PI*2,c=0,d=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:s,phiStart:o,phiLength:l,thetaStart:c,thetaLength:d},i=Math.max(3,Math.floor(i)),s=Math.max(2,Math.floor(s));const u=Math.min(c+d,Math.PI);let f=0;const A=[],g=new ht,y=new ht,v=[],_=[],x=[],b=[];for(let m=0;m<=s;m++){const S=[],C=m/s;let M=0;m===0&&c===0?M=.5/i:m===s&&u===Math.PI&&(M=-.5/i);for(let T=0;T<=i;T++){const N=T/i;g.x=-e*Math.cos(o+N*l)*Math.sin(c+C*d),g.y=e*Math.cos(c+C*d),g.z=e*Math.sin(o+N*l)*Math.sin(c+C*d),_.push(g.x,g.y,g.z),y.copy(g).normalize(),x.push(y.x,y.y,y.z),b.push(N+M,1-C),S.push(f++)}A.push(S)}for(let m=0;m<s;m++)for(let S=0;S<i;S++){const C=A[m][S+1],M=A[m][S],T=A[m+1][S],N=A[m+1][S+1];(m!==0||c>0)&&v.push(C,M,N),(m!==s-1||u<Math.PI)&&v.push(M,T,N)}this.setIndex(v),this.setAttribute("position",new mo(_,3)),this.setAttribute("normal",new mo(x,3)),this.setAttribute("uv",new mo(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class iI extends Za{constructor(e=new tI(new ht(-1,-1,0),new ht(-1,1,0),new ht(1,1,0)),i=64,s=1,o=8,l=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:i,radius:s,radialSegments:o,closed:l};const c=e.computeFrenetFrames(i,l);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const d=new ht,u=new ht,f=new jn;let A=new ht;const g=[],y=[],v=[],_=[];x(),this.setIndex(_),this.setAttribute("position",new mo(g,3)),this.setAttribute("normal",new mo(y,3)),this.setAttribute("uv",new mo(v,2));function x(){for(let C=0;C<i;C++)b(C);b(l===!1?i:0),S(),m()}function b(C){A=e.getPointAt(C/i,A);const M=c.normals[C],T=c.binormals[C];for(let N=0;N<=o;N++){const P=N/o*Math.PI*2,k=Math.sin(P),D=-Math.cos(P);u.x=D*M.x+k*T.x,u.y=D*M.y+k*T.y,u.z=D*M.z+k*T.z,u.normalize(),y.push(u.x,u.y,u.z),d.x=A.x+s*u.x,d.y=A.y+s*u.y,d.z=A.z+s*u.z,g.push(d.x,d.y,d.z)}}function m(){for(let C=1;C<=i;C++)for(let M=1;M<=o;M++){const T=(o+1)*(C-1)+(M-1),N=(o+1)*C+(M-1),P=(o+1)*C+M,k=(o+1)*(C-1)+M;_.push(T,N,k),_.push(N,P,k)}}function S(){for(let C=0;C<=i;C++)for(let M=0;M<=o;M++)f.x=C/i,f.y=M/o,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new iI(new vQ[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yQ extends Rp{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yF,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Q3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}const fD={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class xQ{constructor(e,i,s){const o=this;let l=!1,c=0,d=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=s,this.itemStart=function(A){d++,l===!1&&o.onStart!==void 0&&o.onStart(A,c,d),l=!0},this.itemEnd=function(A){c++,o.onProgress!==void 0&&o.onProgress(A,c,d),c===d&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(A){o.onError!==void 0&&o.onError(A)},this.resolveURL=function(A){return u?u(A):A},this.setURLModifier=function(A){return u=A,this},this.addHandler=function(A,g){return f.push(A,g),this},this.removeHandler=function(A){const g=f.indexOf(A);return g!==-1&&f.splice(g,2),this},this.getHandler=function(A){for(let g=0,y=f.length;g<y;g+=2){const v=f[g],_=f[g+1];if(v.global&&(v.lastIndex=0),v.test(A))return _}return null}}}const EQ=new xQ;class rI{constructor(e){this.manager=e!==void 0?e:EQ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){const s=this;return new Promise(function(o,l){s.load(e,o,i,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}rI.DEFAULT_MATERIAL_NAME="__DEFAULT";class _Q extends rI{constructor(e){super(e)}load(e,i,s,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=fD.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){i&&i(c),l.manager.itemEnd(e)},0),c;const d=uy("img");function u(){A(),fD.add(e,this),i&&i(this),l.manager.itemEnd(e)}function f(g){A(),o&&o(g),l.manager.itemError(e),l.manager.itemEnd(e)}function A(){d.removeEventListener("load",u,!1),d.removeEventListener("error",f,!1)}return d.addEventListener("load",u,!1),d.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),l.manager.itemStart(e),d.src=e,d}}class bQ extends rI{constructor(e){super(e)}load(e,i,s,o){const l=new Ba,c=new _Q(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(d){l.image=d,l.needsUpdate=!0,i!==void 0&&i(l)},s,o),l}}class HF extends Lo{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new jr(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}const UM=new Os,pD=new ht,mD=new ht;class wQ{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jn(512,512),this.map=null,this.mapPass=null,this.matrix=new Os,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new q3,this._frameExtents=new jn(1,1),this._viewportCount=1,this._viewports=[new Io(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const i=this.camera,s=this.matrix;pD.setFromMatrixPosition(e.matrixWorld),i.position.copy(pD),mD.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(mD),i.updateMatrixWorld(),UM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UM),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(UM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CQ extends wQ{constructor(){super(new J3(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class MQ extends HF{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lo.DEFAULT_UP),this.updateMatrix(),this.target=new Lo,this.shadow=new CQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class SQ extends HF{constructor(e,i){super(e,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class VF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=gD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=gD();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}}function gD(){return(typeof performance>"u"?Date:performance).now()}class jF{constructor(e,i,s=0,o=1/0){this.ray=new db(e,i),this.near=s,this.far=o,this.camera=null,this.layers=new X3,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}intersectObject(e,i=!0,s=[]){return gT(e,this,s,i),s.sort(AD),s}intersectObjects(e,i=!0,s=[]){for(let o=0,l=e.length;o<l;o++)gT(e[o],this,s,i);return s.sort(AD),s}}function AD(n,e){return n.distance-e.distance}function gT(n,e,i,s){if(n.layers.test(e.layers)&&n.raycast(e,i),s===!0){const o=n.children;for(let l=0,c=o.length;l<c;l++)gT(o[l],e,i,!0)}}class AT{constructor(e=1,i=0,s=0){return this.radius=e,this.phi=i,this.theta=s,this}set(e,i,s){return this.radius=e,this.phi=i,this.theta=s,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,s){return this.radius=Math.sqrt(e*e+i*i+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(To(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:j3}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=j3);function QF(n,e,i){var s,o=1;n==null&&(n=0),e==null&&(e=0),i==null&&(i=0);function l(){var c,d=s.length,u,f=0,A=0,g=0;for(c=0;c<d;++c)u=s[c],f+=u.x||0,A+=u.y||0,g+=u.z||0;for(f=(f/d-n)*o,A=(A/d-e)*o,g=(g/d-i)*o,c=0;c<d;++c)u=s[c],f&&(u.x-=f),A&&(u.y-=A),g&&(u.z-=g)}return l.initialize=function(c){s=c},l.x=function(c){return arguments.length?(n=+c,l):n},l.y=function(c){return arguments.length?(e=+c,l):e},l.z=function(c){return arguments.length?(i=+c,l):i},l.strength=function(c){return arguments.length?(o=+c,l):o},l}function TQ(n){const e=+this._x.call(null,n);return WF(this.cover(e),e,n)}function WF(n,e,i){if(isNaN(e))return n;var s,o=n._root,l={data:i},c=n._x0,d=n._x1,u,f,A,g,y;if(!o)return n._root=l,n;for(;o.length;)if((A=e>=(u=(c+d)/2))?c=u:d=u,s=o,!(o=o[g=+A]))return s[g]=l,n;if(f=+n._x.call(null,o.data),e===f)return l.next=o,s?s[g]=l:n._root=l,n;do s=s?s[g]=new Array(2):n._root=new Array(2),(A=e>=(u=(c+d)/2))?c=u:d=u;while((g=+A)==(y=+(f>=u)));return s[y]=o,s[g]=l,n}function IQ(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,i=new Float64Array(e);let s=1/0,o=-1/0;for(let l=0,c;l<e;++l)isNaN(c=+this._x.call(null,n[l]))||(i[l]=c,c<s&&(s=c),c>o&&(o=c));if(s>o)return this;this.cover(s).cover(o);for(let l=0;l<e;++l)WF(this,i[l],n[l]);return this}function RQ(n){if(isNaN(n=+n))return this;var e=this._x0,i=this._x1;if(isNaN(e))i=(e=Math.floor(n))+1;else{for(var s=i-e||1,o=this._root,l,c;e>n||n>=i;)switch(c=+(n<e),l=new Array(2),l[c]=o,o=l,s*=2,c){case 0:i=e+s;break;case 1:e=i-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=e,this._x1=i,this}function LQ(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function BQ(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ch(n,e,i){this.node=n,this.x0=e,this.x1=i}function DQ(n,e){var i,s=this._x0,o,l,c=this._x1,d=[],u=this._root,f,A;for(u&&d.push(new Ch(u,s,c)),e==null?e=1/0:(s=n-e,c=n+e);f=d.pop();)if(!(!(u=f.node)||(o=f.x0)>c||(l=f.x1)<s))if(u.length){var g=(o+l)/2;d.push(new Ch(u[1],g,l),new Ch(u[0],o,g)),(A=+(n>=g))&&(f=d[d.length-1],d[d.length-1]=d[d.length-1-A],d[d.length-1-A]=f)}else{var y=Math.abs(n-+this._x.call(null,u.data));y<e&&(e=y,s=n-y,c=n+y,i=u.data)}return i}function PQ(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,i=this._root,s,o,l,c=this._x0,d=this._x1,u,f,A,g,y;if(!i)return this;if(i.length)for(;;){if((A=u>=(f=(c+d)/2))?c=f:d=f,e=i,!(i=i[g=+A]))return this;if(!i.length)break;e[g+1&1]&&(s=e,y=g)}for(;i.data!==n;)if(o=i,!(i=i.next))return this;return(l=i.next)&&delete i.next,o?(l?o.next=l:delete o.next,this):e?(l?e[g]=l:delete e[g],(i=e[0]||e[1])&&i===(e[1]||e[0])&&!i.length&&(s?s[y]=i:this._root=i),this):(this._root=l,this)}function OQ(n){for(var e=0,i=n.length;e<i;++e)this.remove(n[e]);return this}function FQ(){return this._root}function kQ(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function NQ(n){var e=[],i,s=this._root,o,l,c;for(s&&e.push(new Ch(s,this._x0,this._x1));i=e.pop();)if(!n(s=i.node,l=i.x0,c=i.x1)&&s.length){var d=(l+c)/2;(o=s[1])&&e.push(new Ch(o,d,c)),(o=s[0])&&e.push(new Ch(o,l,d))}return this}function UQ(n){var e=[],i=[],s;for(this._root&&e.push(new Ch(this._root,this._x0,this._x1));s=e.pop();){var o=s.node;if(o.length){var l,c=s.x0,d=s.x1,u=(c+d)/2;(l=o[0])&&e.push(new Ch(l,c,u)),(l=o[1])&&e.push(new Ch(l,u,d))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.x1);return this}function GQ(n){return n[0]}function zQ(n){return arguments.length?(this._x=n,this):this._x}function KF(n,e){var i=new sI(e??GQ,NaN,NaN);return n==null?i:i.addAll(n)}function sI(n,e,i){this._x=n,this._x0=e,this._x1=i,this._root=void 0}function vD(n){for(var e={data:n.data},i=e;n=n.next;)i=i.next={data:n.data};return e}var el=KF.prototype=sI.prototype;el.copy=function(){var n=new sI(this._x,this._x0,this._x1),e=this._root,i,s;if(!e)return n;if(!e.length)return n._root=vD(e),n;for(i=[{source:e,target:n._root=new Array(2)}];e=i.pop();)for(var o=0;o<2;++o)(s=e.source[o])&&(s.length?i.push({source:s,target:e.target[o]=new Array(2)}):e.target[o]=vD(s));return n};el.add=TQ;el.addAll=IQ;el.cover=RQ;el.data=LQ;el.extent=BQ;el.find=DQ;el.remove=PQ;el.removeAll=OQ;el.root=FQ;el.size=kQ;el.visit=NQ;el.visitAfter=UQ;el.x=zQ;function HQ(n){const e=+this._x.call(null,n),i=+this._y.call(null,n);return XF(this.cover(e,i),e,i,n)}function XF(n,e,i,s){if(isNaN(e)||isNaN(i))return n;var o,l=n._root,c={data:s},d=n._x0,u=n._y0,f=n._x1,A=n._y1,g,y,v,_,x,b,m,S;if(!l)return n._root=c,n;for(;l.length;)if((x=e>=(g=(d+f)/2))?d=g:f=g,(b=i>=(y=(u+A)/2))?u=y:A=y,o=l,!(l=l[m=b<<1|x]))return o[m]=c,n;if(v=+n._x.call(null,l.data),_=+n._y.call(null,l.data),e===v&&i===_)return c.next=l,o?o[m]=c:n._root=c,n;do o=o?o[m]=new Array(4):n._root=new Array(4),(x=e>=(g=(d+f)/2))?d=g:f=g,(b=i>=(y=(u+A)/2))?u=y:A=y;while((m=b<<1|x)===(S=(_>=y)<<1|v>=g));return o[S]=l,o[m]=c,n}function VQ(n){var e,i,s=n.length,o,l,c=new Array(s),d=new Array(s),u=1/0,f=1/0,A=-1/0,g=-1/0;for(i=0;i<s;++i)isNaN(o=+this._x.call(null,e=n[i]))||isNaN(l=+this._y.call(null,e))||(c[i]=o,d[i]=l,o<u&&(u=o),o>A&&(A=o),l<f&&(f=l),l>g&&(g=l));if(u>A||f>g)return this;for(this.cover(u,f).cover(A,g),i=0;i<s;++i)XF(this,c[i],d[i],n[i]);return this}function jQ(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var i=this._x0,s=this._y0,o=this._x1,l=this._y1;if(isNaN(i))o=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1;else{for(var c=o-i||1,d=this._root,u,f;i>n||n>=o||s>e||e>=l;)switch(f=(e<s)<<1|n<i,u=new Array(4),u[f]=d,d=u,c*=2,f){case 0:o=i+c,l=s+c;break;case 1:i=o-c,l=s+c;break;case 2:o=i+c,s=l-c;break;case 3:i=o-c,s=l-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=s,this._x1=o,this._y1=l,this}function QQ(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function WQ(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ia(n,e,i,s,o){this.node=n,this.x0=e,this.y0=i,this.x1=s,this.y1=o}function KQ(n,e,i){var s,o=this._x0,l=this._y0,c,d,u,f,A=this._x1,g=this._y1,y=[],v=this._root,_,x;for(v&&y.push(new Ia(v,o,l,A,g)),i==null?i=1/0:(o=n-i,l=e-i,A=n+i,g=e+i,i*=i);_=y.pop();)if(!(!(v=_.node)||(c=_.x0)>A||(d=_.y0)>g||(u=_.x1)<o||(f=_.y1)<l))if(v.length){var b=(c+u)/2,m=(d+f)/2;y.push(new Ia(v[3],b,m,u,f),new Ia(v[2],c,m,b,f),new Ia(v[1],b,d,u,m),new Ia(v[0],c,d,b,m)),(x=(e>=m)<<1|n>=b)&&(_=y[y.length-1],y[y.length-1]=y[y.length-1-x],y[y.length-1-x]=_)}else{var S=n-+this._x.call(null,v.data),C=e-+this._y.call(null,v.data),M=S*S+C*C;if(M<i){var T=Math.sqrt(i=M);o=n-T,l=e-T,A=n+T,g=e+T,s=v.data}}return s}function XQ(n){if(isNaN(A=+this._x.call(null,n))||isNaN(g=+this._y.call(null,n)))return this;var e,i=this._root,s,o,l,c=this._x0,d=this._y0,u=this._x1,f=this._y1,A,g,y,v,_,x,b,m;if(!i)return this;if(i.length)for(;;){if((_=A>=(y=(c+u)/2))?c=y:u=y,(x=g>=(v=(d+f)/2))?d=v:f=v,e=i,!(i=i[b=x<<1|_]))return this;if(!i.length)break;(e[b+1&3]||e[b+2&3]||e[b+3&3])&&(s=e,m=b)}for(;i.data!==n;)if(o=i,!(i=i.next))return this;return(l=i.next)&&delete i.next,o?(l?o.next=l:delete o.next,this):e?(l?e[b]=l:delete e[b],(i=e[0]||e[1]||e[2]||e[3])&&i===(e[3]||e[2]||e[1]||e[0])&&!i.length&&(s?s[m]=i:this._root=i),this):(this._root=l,this)}function YQ(n){for(var e=0,i=n.length;e<i;++e)this.remove(n[e]);return this}function qQ(){return this._root}function $Q(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function JQ(n){var e=[],i,s=this._root,o,l,c,d,u;for(s&&e.push(new Ia(s,this._x0,this._y0,this._x1,this._y1));i=e.pop();)if(!n(s=i.node,l=i.x0,c=i.y0,d=i.x1,u=i.y1)&&s.length){var f=(l+d)/2,A=(c+u)/2;(o=s[3])&&e.push(new Ia(o,f,A,d,u)),(o=s[2])&&e.push(new Ia(o,l,A,f,u)),(o=s[1])&&e.push(new Ia(o,f,c,d,A)),(o=s[0])&&e.push(new Ia(o,l,c,f,A))}return this}function ZQ(n){var e=[],i=[],s;for(this._root&&e.push(new Ia(this._root,this._x0,this._y0,this._x1,this._y1));s=e.pop();){var o=s.node;if(o.length){var l,c=s.x0,d=s.y0,u=s.x1,f=s.y1,A=(c+u)/2,g=(d+f)/2;(l=o[0])&&e.push(new Ia(l,c,d,A,g)),(l=o[1])&&e.push(new Ia(l,A,d,u,g)),(l=o[2])&&e.push(new Ia(l,c,g,A,f)),(l=o[3])&&e.push(new Ia(l,A,g,u,f))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function eW(n){return n[0]}function tW(n){return arguments.length?(this._x=n,this):this._x}function nW(n){return n[1]}function iW(n){return arguments.length?(this._y=n,this):this._y}function YF(n,e,i){var s=new oI(e??eW,i??nW,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function oI(n,e,i,s,o,l){this._x=n,this._y=e,this._x0=i,this._y0=s,this._x1=o,this._y1=l,this._root=void 0}function yD(n){for(var e={data:n.data},i=e;n=n.next;)i=i.next={data:n.data};return e}var Oa=YF.prototype=oI.prototype;Oa.copy=function(){var n=new oI(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,i,s;if(!e)return n;if(!e.length)return n._root=yD(e),n;for(i=[{source:e,target:n._root=new Array(4)}];e=i.pop();)for(var o=0;o<4;++o)(s=e.source[o])&&(s.length?i.push({source:s,target:e.target[o]=new Array(4)}):e.target[o]=yD(s));return n};Oa.add=HQ;Oa.addAll=VQ;Oa.cover=jQ;Oa.data=QQ;Oa.extent=WQ;Oa.find=KQ;Oa.remove=XQ;Oa.removeAll=YQ;Oa.root=qQ;Oa.size=$Q;Oa.visit=JQ;Oa.visitAfter=ZQ;Oa.x=tW;Oa.y=iW;function rW(n){const e=+this._x.call(null,n),i=+this._y.call(null,n),s=+this._z.call(null,n);return qF(this.cover(e,i,s),e,i,s,n)}function qF(n,e,i,s,o){if(isNaN(e)||isNaN(i)||isNaN(s))return n;var l,c=n._root,d={data:o},u=n._x0,f=n._y0,A=n._z0,g=n._x1,y=n._y1,v=n._z1,_,x,b,m,S,C,M,T,N,P,k;if(!c)return n._root=d,n;for(;c.length;)if((M=e>=(_=(u+g)/2))?u=_:g=_,(T=i>=(x=(f+y)/2))?f=x:y=x,(N=s>=(b=(A+v)/2))?A=b:v=b,l=c,!(c=c[P=N<<2|T<<1|M]))return l[P]=d,n;if(m=+n._x.call(null,c.data),S=+n._y.call(null,c.data),C=+n._z.call(null,c.data),e===m&&i===S&&s===C)return d.next=c,l?l[P]=d:n._root=d,n;do l=l?l[P]=new Array(8):n._root=new Array(8),(M=e>=(_=(u+g)/2))?u=_:g=_,(T=i>=(x=(f+y)/2))?f=x:y=x,(N=s>=(b=(A+v)/2))?A=b:v=b;while((P=N<<2|T<<1|M)===(k=(C>=b)<<2|(S>=x)<<1|m>=_));return l[k]=c,l[P]=d,n}function sW(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,i=new Float64Array(e),s=new Float64Array(e),o=new Float64Array(e);let l=1/0,c=1/0,d=1/0,u=-1/0,f=-1/0,A=-1/0;for(let g=0,y,v,_,x;g<e;++g)isNaN(v=+this._x.call(null,y=n[g]))||isNaN(_=+this._y.call(null,y))||isNaN(x=+this._z.call(null,y))||(i[g]=v,s[g]=_,o[g]=x,v<l&&(l=v),v>u&&(u=v),_<c&&(c=_),_>f&&(f=_),x<d&&(d=x),x>A&&(A=x));if(l>u||c>f||d>A)return this;this.cover(l,c,d).cover(u,f,A);for(let g=0;g<e;++g)qF(this,i[g],s[g],o[g],n[g]);return this}function oW(n,e,i){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(i=+i))return this;var s=this._x0,o=this._y0,l=this._z0,c=this._x1,d=this._y1,u=this._z1;if(isNaN(s))c=(s=Math.floor(n))+1,d=(o=Math.floor(e))+1,u=(l=Math.floor(i))+1;else{for(var f=c-s||1,A=this._root,g,y;s>n||n>=c||o>e||e>=d||l>i||i>=u;)switch(y=(i<l)<<2|(e<o)<<1|n<s,g=new Array(8),g[y]=A,A=g,f*=2,y){case 0:c=s+f,d=o+f,u=l+f;break;case 1:s=c-f,d=o+f,u=l+f;break;case 2:c=s+f,o=d-f,u=l+f;break;case 3:s=c-f,o=d-f,u=l+f;break;case 4:c=s+f,d=o+f,l=u-f;break;case 5:s=c-f,d=o+f,l=u-f;break;case 6:c=s+f,o=d-f,l=u-f;break;case 7:s=c-f,o=d-f,l=u-f;break}this._root&&this._root.length&&(this._root=A)}return this._x0=s,this._y0=o,this._z0=l,this._x1=c,this._y1=d,this._z1=u,this}function aW(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function lW(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function hs(n,e,i,s,o,l,c){this.node=n,this.x0=e,this.y0=i,this.z0=s,this.x1=o,this.y1=l,this.z1=c}function cW(n,e,i,s){var o,l=this._x0,c=this._y0,d=this._z0,u,f,A,g,y,v,_=this._x1,x=this._y1,b=this._z1,m=[],S=this._root,C,M;for(S&&m.push(new hs(S,l,c,d,_,x,b)),s==null?s=1/0:(l=n-s,c=e-s,d=i-s,_=n+s,x=e+s,b=i+s,s*=s);C=m.pop();)if(!(!(S=C.node)||(u=C.x0)>_||(f=C.y0)>x||(A=C.z0)>b||(g=C.x1)<l||(y=C.y1)<c||(v=C.z1)<d))if(S.length){var T=(u+g)/2,N=(f+y)/2,P=(A+v)/2;m.push(new hs(S[7],T,N,P,g,y,v),new hs(S[6],u,N,P,T,y,v),new hs(S[5],T,f,P,g,N,v),new hs(S[4],u,f,P,T,N,v),new hs(S[3],T,N,A,g,y,P),new hs(S[2],u,N,A,T,y,P),new hs(S[1],T,f,A,g,N,P),new hs(S[0],u,f,A,T,N,P)),(M=(i>=P)<<2|(e>=N)<<1|n>=T)&&(C=m[m.length-1],m[m.length-1]=m[m.length-1-M],m[m.length-1-M]=C)}else{var k=n-+this._x.call(null,S.data),D=e-+this._y.call(null,S.data),z=i-+this._z.call(null,S.data),Y=k*k+D*D+z*z;if(Y<s){var ne=Math.sqrt(s=Y);l=n-ne,c=e-ne,d=i-ne,_=n+ne,x=e+ne,b=i+ne,o=S.data}}return o}function uW(n){if(isNaN(y=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n))||isNaN(_=+this._z.call(null,n)))return this;var e,i=this._root,s,o,l,c=this._x0,d=this._y0,u=this._z0,f=this._x1,A=this._y1,g=this._z1,y,v,_,x,b,m,S,C,M,T,N;if(!i)return this;if(i.length)for(;;){if((S=y>=(x=(c+f)/2))?c=x:f=x,(C=v>=(b=(d+A)/2))?d=b:A=b,(M=_>=(m=(u+g)/2))?u=m:g=m,e=i,!(i=i[T=M<<2|C<<1|S]))return this;if(!i.length)break;(e[T+1&7]||e[T+2&7]||e[T+3&7]||e[T+4&7]||e[T+5&7]||e[T+6&7]||e[T+7&7])&&(s=e,N=T)}for(;i.data!==n;)if(o=i,!(i=i.next))return this;return(l=i.next)&&delete i.next,o?(l?o.next=l:delete o.next,this):e?(l?e[T]=l:delete e[T],(i=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&i===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!i.length&&(s?s[N]=i:this._root=i),this):(this._root=l,this)}function hW(n){for(var e=0,i=n.length;e<i;++e)this.remove(n[e]);return this}function dW(){return this._root}function fW(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function pW(n){var e=[],i,s=this._root,o,l,c,d,u,f,A;for(s&&e.push(new hs(s,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();)if(!n(s=i.node,l=i.x0,c=i.y0,d=i.z0,u=i.x1,f=i.y1,A=i.z1)&&s.length){var g=(l+u)/2,y=(c+f)/2,v=(d+A)/2;(o=s[7])&&e.push(new hs(o,g,y,v,u,f,A)),(o=s[6])&&e.push(new hs(o,l,y,v,g,f,A)),(o=s[5])&&e.push(new hs(o,g,c,v,u,y,A)),(o=s[4])&&e.push(new hs(o,l,c,v,g,y,A)),(o=s[3])&&e.push(new hs(o,g,y,d,u,f,v)),(o=s[2])&&e.push(new hs(o,l,y,d,g,f,v)),(o=s[1])&&e.push(new hs(o,g,c,d,u,y,v)),(o=s[0])&&e.push(new hs(o,l,c,d,g,y,v))}return this}function mW(n){var e=[],i=[],s;for(this._root&&e.push(new hs(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));s=e.pop();){var o=s.node;if(o.length){var l,c=s.x0,d=s.y0,u=s.z0,f=s.x1,A=s.y1,g=s.z1,y=(c+f)/2,v=(d+A)/2,_=(u+g)/2;(l=o[0])&&e.push(new hs(l,c,d,u,y,v,_)),(l=o[1])&&e.push(new hs(l,y,d,u,f,v,_)),(l=o[2])&&e.push(new hs(l,c,v,u,y,A,_)),(l=o[3])&&e.push(new hs(l,y,v,u,f,A,_)),(l=o[4])&&e.push(new hs(l,c,d,_,y,v,g)),(l=o[5])&&e.push(new hs(l,y,d,_,f,v,g)),(l=o[6])&&e.push(new hs(l,c,v,_,y,A,g)),(l=o[7])&&e.push(new hs(l,y,v,_,f,A,g))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.y0,s.z0,s.x1,s.y1,s.z1);return this}function gW(n){return n[0]}function AW(n){return arguments.length?(this._x=n,this):this._x}function vW(n){return n[1]}function yW(n){return arguments.length?(this._y=n,this):this._y}function xW(n){return n[2]}function EW(n){return arguments.length?(this._z=n,this):this._z}function $F(n,e,i,s){var o=new aI(e??gW,i??vW,s??xW,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?o:o.addAll(n)}function aI(n,e,i,s,o,l,c,d,u){this._x=n,this._y=e,this._z=i,this._x0=s,this._y0=o,this._z0=l,this._x1=c,this._y1=d,this._z1=u,this._root=void 0}function xD(n){for(var e={data:n.data},i=e;n=n.next;)i=i.next={data:n.data};return e}var la=$F.prototype=aI.prototype;la.copy=function(){var n=new aI(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,i,s;if(!e)return n;if(!e.length)return n._root=xD(e),n;for(i=[{source:e,target:n._root=new Array(8)}];e=i.pop();)for(var o=0;o<8;++o)(s=e.source[o])&&(s.length?i.push({source:s,target:e.target[o]=new Array(8)}):e.target[o]=xD(s));return n};la.add=rW;la.addAll=sW;la.cover=oW;la.data=aW;la.extent=lW;la.find=cW;la.remove=uW;la.removeAll=hW;la.root=dW;la.size=fW;la.visit=pW;la.visitAfter=mW;la.x=AW;la.y=yW;la.z=EW;function xh(n){return function(){return n}}function mh(n){return(n()-.5)*1e-6}function _W(n){return n.index}function ED(n,e){var i=n.get(e);if(!i)throw new Error("node not found: "+e);return i}function JF(n){var e=_W,i=y,s,o=xh(30),l,c,d,u,f,A,g=1;n==null&&(n=[]);function y(m){return 1/Math.min(u[m.source.index],u[m.target.index])}function v(m){for(var S=0,C=n.length;S<g;++S)for(var M=0,T,N,P,k=0,D=0,z=0,Y,ne;M<C;++M)T=n[M],N=T.source,P=T.target,k=P.x+P.vx-N.x-N.vx||mh(A),d>1&&(D=P.y+P.vy-N.y-N.vy||mh(A)),d>2&&(z=P.z+P.vz-N.z-N.vz||mh(A)),Y=Math.sqrt(k*k+D*D+z*z),Y=(Y-l[M])/Y*m*s[M],k*=Y,D*=Y,z*=Y,P.vx-=k*(ne=f[M]),d>1&&(P.vy-=D*ne),d>2&&(P.vz-=z*ne),N.vx+=k*(ne=1-ne),d>1&&(N.vy+=D*ne),d>2&&(N.vz+=z*ne)}function _(){if(c){var m,S=c.length,C=n.length,M=new Map(c.map((N,P)=>[e(N,P,c),N])),T;for(m=0,u=new Array(S);m<C;++m)T=n[m],T.index=m,typeof T.source!="object"&&(T.source=ED(M,T.source)),typeof T.target!="object"&&(T.target=ED(M,T.target)),u[T.source.index]=(u[T.source.index]||0)+1,u[T.target.index]=(u[T.target.index]||0)+1;for(m=0,f=new Array(C);m<C;++m)T=n[m],f[m]=u[T.source.index]/(u[T.source.index]+u[T.target.index]);s=new Array(C),x(),l=new Array(C),b()}}function x(){if(c)for(var m=0,S=n.length;m<S;++m)s[m]=+i(n[m],m,n)}function b(){if(c)for(var m=0,S=n.length;m<S;++m)l[m]=+o(n[m],m,n)}return v.initialize=function(m,...S){c=m,A=S.find(C=>typeof C=="function")||Math.random,d=S.find(C=>[1,2,3].includes(C))||2,_()},v.links=function(m){return arguments.length?(n=m,_(),v):n},v.id=function(m){return arguments.length?(e=m,v):e},v.iterations=function(m){return arguments.length?(g=+m,v):g},v.strength=function(m){return arguments.length?(i=typeof m=="function"?m:xh(+m),x(),v):i},v.distance=function(m){return arguments.length?(o=typeof m=="function"?m:xh(+m),b(),v):o},v}var bW={value:()=>{}};function Cy(){for(var n=0,e=arguments.length,i={},s;n<e;++n){if(!(s=arguments[n]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new YE(i)}function YE(n){this._=n}function wW(n,e){return n.trim().split(/^|\s+/).map(function(i){var s="",o=i.indexOf(".");if(o>=0&&(s=i.slice(o+1),i=i.slice(0,o)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}YE.prototype=Cy.prototype={constructor:YE,on:function(n,e){var i=this._,s=wW(n+"",i),o,l=-1,c=s.length;if(arguments.length<2){for(;++l<c;)if((o=(n=s[l]).type)&&(o=CW(i[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(o=(n=s[l]).type)i[o]=_D(i[o],n.name,e);else if(e==null)for(o in i)i[o]=_D(i[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var i in e)n[i]=e[i].slice();return new YE(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var i=new Array(o),s=0,o,l;s<o;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(l=this._[n],s=0,o=l.length;s<o;++s)l[s].value.apply(e,i)},apply:function(n,e,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],o=0,l=s.length;o<l;++o)s[o].value.apply(e,i)}};function CW(n,e){for(var i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===e)return o.value}function _D(n,e,i){for(var s=0,o=n.length;s<o;++s)if(n[s].name===e){n[s]=bW,n=n.slice(0,s).concat(n.slice(s+1));break}return i!=null&&n.push({name:e,value:i}),n}var Zg=0,_v=0,rv=0,ZF=1e3,R_,bv,L_=0,Mp=0,Ab=0,hy=typeof performance=="object"&&performance.now?performance:Date,ek=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function lI(){return Mp||(ek(MW),Mp=hy.now()+Ab)}function MW(){Mp=0}function B_(){this._call=this._time=this._next=null}B_.prototype=cI.prototype={constructor:B_,restart:function(n,e,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?lI():+i)+(e==null?0:+e),!this._next&&bv!==this&&(bv?bv._next=this:R_=this,bv=this),this._call=n,this._time=i,vT()},stop:function(){this._call&&(this._call=null,this._time=1/0,vT())}};function cI(n,e,i){var s=new B_;return s.restart(n,e,i),s}function SW(){lI(),++Zg;for(var n=R_,e;n;)(e=Mp-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Zg}function bD(){Mp=(L_=hy.now())+Ab,Zg=_v=0;try{SW()}finally{Zg=0,IW(),Mp=0}}function TW(){var n=hy.now(),e=n-L_;e>ZF&&(Ab-=e,L_=n)}function IW(){for(var n,e=R_,i,s=1/0;e;)e._call?(s>e._time&&(s=e._time),n=e,e=e._next):(i=e._next,e._next=null,e=n?n._next=i:R_=i);bv=n,vT(s)}function vT(n){if(!Zg){_v&&(_v=clearTimeout(_v));var e=n-Mp;e>24?(n<1/0&&(_v=setTimeout(bD,n-hy.now()-Ab)),rv&&(rv=clearInterval(rv))):(rv||(L_=hy.now(),rv=setInterval(TW,ZF)),Zg=1,ek(bD))}}function wD(n,e,i){var s=new B_;return e=e==null?0:+e,s.restart(o=>{s.stop(),n(o+e)},e,i),s}const RW=1664525,LW=1013904223,CD=4294967296;function BW(){let n=1;return()=>(n=(RW*n+LW)%CD)/CD}var MD=3;function GM(n){return n.x}function SD(n){return n.y}function DW(n){return n.z}var PW=10,OW=Math.PI*(3-Math.sqrt(5)),FW=Math.PI*20/(9+Math.sqrt(221));function tk(n,e){e=e||2;var i=Math.min(MD,Math.max(1,Math.round(e))),s,o=1,l=.001,c=1-Math.pow(l,1/300),d=0,u=.6,f=new Map,A=cI(v),g=Cy("tick","end"),y=BW();n==null&&(n=[]);function v(){_(),g.call("tick",s),o<l&&(A.stop(),g.call("end",s))}function _(m){var S,C=n.length,M;m===void 0&&(m=1);for(var T=0;T<m;++T)for(o+=(d-o)*c,f.forEach(function(N){N(o)}),S=0;S<C;++S)M=n[S],M.fx==null?M.x+=M.vx*=u:(M.x=M.fx,M.vx=0),i>1&&(M.fy==null?M.y+=M.vy*=u:(M.y=M.fy,M.vy=0)),i>2&&(M.fz==null?M.z+=M.vz*=u:(M.z=M.fz,M.vz=0));return s}function x(){for(var m=0,S=n.length,C;m<S;++m){if(C=n[m],C.index=m,C.fx!=null&&(C.x=C.fx),C.fy!=null&&(C.y=C.fy),C.fz!=null&&(C.z=C.fz),isNaN(C.x)||i>1&&isNaN(C.y)||i>2&&isNaN(C.z)){var M=PW*(i>2?Math.cbrt(.5+m):i>1?Math.sqrt(.5+m):m),T=m*OW,N=m*FW;i===1?C.x=M:i===2?(C.x=M*Math.cos(T),C.y=M*Math.sin(T)):(C.x=M*Math.sin(T)*Math.cos(N),C.y=M*Math.cos(T),C.z=M*Math.sin(T)*Math.sin(N))}(isNaN(C.vx)||i>1&&isNaN(C.vy)||i>2&&isNaN(C.vz))&&(C.vx=0,i>1&&(C.vy=0),i>2&&(C.vz=0))}}function b(m){return m.initialize&&m.initialize(n,y,i),m}return x(),s={tick:_,restart:function(){return A.restart(v),s},stop:function(){return A.stop(),s},numDimensions:function(m){return arguments.length?(i=Math.min(MD,Math.max(1,Math.round(m))),f.forEach(b),s):i},nodes:function(m){return arguments.length?(n=m,x(),f.forEach(b),s):n},alpha:function(m){return arguments.length?(o=+m,s):o},alphaMin:function(m){return arguments.length?(l=+m,s):l},alphaDecay:function(m){return arguments.length?(c=+m,s):+c},alphaTarget:function(m){return arguments.length?(d=+m,s):d},velocityDecay:function(m){return arguments.length?(u=1-m,s):1-u},randomSource:function(m){return arguments.length?(y=m,f.forEach(b),s):y},force:function(m,S){return arguments.length>1?(S==null?f.delete(m):f.set(m,b(S)),s):f.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),S=m.shift()||0,C=(i>1?m.shift():null)||0,M=(i>2?m.shift():null)||0,T=m.shift()||1/0,N=0,P=n.length,k,D,z,Y,ne,O;for(T*=T,N=0;N<P;++N)ne=n[N],k=S-ne.x,D=C-(ne.y||0),z=M-(ne.z||0),Y=k*k+D*D+z*z,Y<T&&(O=ne,T=Y);return O},on:function(m,S){return arguments.length>1?(g.on(m,S),s):g.on(m)}}}function nk(){var n,e,i,s,o,l=xh(-30),c,d=1,u=1/0,f=.81;function A(_){var x,b=n.length,m=(e===1?KF(n,GM):e===2?YF(n,GM,SD):e===3?$F(n,GM,SD,DW):null).visitAfter(y);for(o=_,x=0;x<b;++x)i=n[x],m.visit(v)}function g(){if(n){var _,x=n.length,b;for(c=new Array(x),_=0;_<x;++_)b=n[_],c[b.index]=+l(b,_,n)}}function y(_){var x=0,b,m,S=0,C,M,T,N,P=_.length;if(P){for(C=M=T=N=0;N<P;++N)(b=_[N])&&(m=Math.abs(b.value))&&(x+=b.value,S+=m,C+=m*(b.x||0),M+=m*(b.y||0),T+=m*(b.z||0));x*=Math.sqrt(4/P),_.x=C/S,e>1&&(_.y=M/S),e>2&&(_.z=T/S)}else{b=_,b.x=b.data.x,e>1&&(b.y=b.data.y),e>2&&(b.z=b.data.z);do x+=c[b.data.index];while(b=b.next)}_.value=x}function v(_,x,b,m,S){if(!_.value)return!0;var C=[b,m,S][e-1],M=_.x-i.x,T=e>1?_.y-i.y:0,N=e>2?_.z-i.z:0,P=C-x,k=M*M+T*T+N*N;if(P*P/f<k)return k<u&&(M===0&&(M=mh(s),k+=M*M),e>1&&T===0&&(T=mh(s),k+=T*T),e>2&&N===0&&(N=mh(s),k+=N*N),k<d&&(k=Math.sqrt(d*k)),i.vx+=M*_.value*o/k,e>1&&(i.vy+=T*_.value*o/k),e>2&&(i.vz+=N*_.value*o/k)),!0;if(_.length||k>=u)return;(_.data!==i||_.next)&&(M===0&&(M=mh(s),k+=M*M),e>1&&T===0&&(T=mh(s),k+=T*T),e>2&&N===0&&(N=mh(s),k+=N*N),k<d&&(k=Math.sqrt(d*k)));do _.data!==i&&(P=c[_.data.index]*o/k,i.vx+=M*P,e>1&&(i.vy+=T*P),e>2&&(i.vz+=N*P));while(_=_.next)}return A.initialize=function(_,...x){n=_,s=x.find(b=>typeof b=="function")||Math.random,e=x.find(b=>[1,2,3].includes(b))||2,g()},A.strength=function(_){return arguments.length?(l=typeof _=="function"?_:xh(+_),g(),A):l},A.distanceMin=function(_){return arguments.length?(d=_*_,A):Math.sqrt(d)},A.distanceMax=function(_){return arguments.length?(u=_*_,A):Math.sqrt(u)},A.theta=function(_){return arguments.length?(f=_*_,A):Math.sqrt(f)},A}function ik(n,e,i,s){var o,l,c=xh(.1),d,u;typeof n!="function"&&(n=xh(+n)),e==null&&(e=0),i==null&&(i=0),s==null&&(s=0);function f(g){for(var y=0,v=o.length;y<v;++y){var _=o[y],x=_.x-e||1e-6,b=(_.y||0)-i||1e-6,m=(_.z||0)-s||1e-6,S=Math.sqrt(x*x+b*b+m*m),C=(u[y]-S)*d[y]*g/S;_.vx+=x*C,l>1&&(_.vy+=b*C),l>2&&(_.vz+=m*C)}}function A(){if(o){var g,y=o.length;for(d=new Array(y),u=new Array(y),g=0;g<y;++g)u[g]=+n(o[g],g,o),d[g]=isNaN(u[g])?0:+c(o[g],g,o)}}return f.initialize=function(g,...y){o=g,l=y.find(v=>[1,2,3].includes(v))||2,A()},f.strength=function(g){return arguments.length?(c=typeof g=="function"?g:xh(+g),A(),f):c},f.radius=function(g){return arguments.length?(n=typeof g=="function"?g:xh(+g),A(),f):n},f.x=function(g){return arguments.length?(e=+g,f):e},f.y=function(g){return arguments.length?(i=+g,f):i},f.z=function(g){return arguments.length?(s=+g,f):s},f}var uI=function(e){NW(e);var i=kW(e);return e.on=i.on,e.off=i.off,e.fire=i.fire,e};function kW(n){var e=Object.create(null);return{on:function(i,s,o){if(typeof s!="function")throw new Error("callback is expected to be a function");var l=e[i];return l||(l=e[i]=[]),l.push({callback:s,ctx:o}),n},off:function(i,s){var o=typeof i>"u";if(o)return e=Object.create(null),n;if(e[i]){var l=typeof s!="function";if(l)delete e[i];else for(var c=e[i],d=0;d<c.length;++d)c[d].callback===s&&c.splice(d,1)}return n},fire:function(i){var s=e[i];if(!s)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var l=0;l<s.length;++l){var c=s[l];c.callback.apply(c.ctx,o)}return n}}}function NW(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],i=0;i<e.length;++i)if(n.hasOwnProperty(e[i]))throw new Error("Subject cannot be eventified, since it already has property '"+e[i]+"'")}var UW=zW,GW=uI;function zW(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,i=new Map,s={},o=0,l=n.multigraph?M:C,c=[],d=G,u=G,f=G,A=G,g={version:20,addNode:x,addLink:S,removeLink:k,removeNode:m,getNode:b,getNodeCount:T,getLinkCount:N,getEdgeCount:N,getLinksCount:N,getNodesCount:T,getLinks:P,forEachNode:W,forEachLinkedNode:O,forEachLink:ne,beginUpdate:f,endUpdate:A,clear:Y,hasLink:z,hasNode:b,getLink:z};return GW(g),y(),g;function y(){var J=g.on;g.on=ee;function ee(){return g.beginUpdate=f=V,g.endUpdate=A=K,d=v,u=_,g.on=J,J.apply(g,arguments)}}function v(J,ee){c.push({link:J,changeType:ee})}function _(J,ee){c.push({node:J,changeType:ee})}function x(J,ee){if(J===void 0)throw new Error("Invalid node identifier");f();var he=b(J);return he?(he.data=ee,u(he,"update")):(he=new HW(J,ee),u(he,"add")),e.set(J,he),A(),he}function b(J){return e.get(J)}function m(J){var ee=b(J);if(!ee)return!1;f();var he=ee.links;return he&&(he.forEach(D),ee.links=null),e.delete(J),u(ee,"remove"),A(),!0}function S(J,ee,he){f();var me=b(J)||x(J),Be=b(ee)||x(ee),Se=l(J,ee,he),rt=i.has(Se.id);return i.set(Se.id,Se),TD(me,Se),J!==ee&&TD(Be,Se),d(Se,rt?"update":"add"),A(),Se}function C(J,ee,he){var me=EE(J,ee),Be=i.get(me);return Be?(Be.data=he,Be):new ID(J,ee,he,me)}function M(J,ee,he){var me=EE(J,ee),Be=s.hasOwnProperty(me);if(Be||z(J,ee)){Be||(s[me]=0);var Se="@"+ ++s[me];me=EE(J+Se,ee+Se)}return new ID(J,ee,he,me)}function T(){return e.size}function N(){return i.size}function P(J){var ee=b(J);return ee?ee.links:null}function k(J,ee){return ee!==void 0&&(J=z(J,ee)),D(J)}function D(J){if(!J||!i.get(J.id))return!1;f(),i.delete(J.id);var ee=b(J.fromId),he=b(J.toId);return ee&&ee.links.delete(J),he&&he.links.delete(J),d(J,"remove"),A(),!0}function z(J,ee){if(!(J===void 0||ee===void 0))return i.get(EE(J,ee))}function Y(){f(),W(function(J){m(J.id)}),A()}function ne(J){if(typeof J=="function")for(var ee=i.values(),he=ee.next();!he.done;){if(J(he.value))return!0;he=ee.next()}}function O(J,ee,he){var me=b(J);if(me&&me.links&&typeof ee=="function")return he?U(me.links,J,ee):F(me.links,J,ee)}function F(J,ee,he){for(var me,Be=J.values(),Se=Be.next();!Se.done;){var rt=Se.value,Ge=rt.fromId===ee?rt.toId:rt.fromId;if(me=he(e.get(Ge),rt),me)return!0;Se=Be.next()}}function U(J,ee,he){for(var me,Be=J.values(),Se=Be.next();!Se.done;){var rt=Se.value;if(rt.fromId===ee&&(me=he(e.get(rt.toId),rt),me))return!0;Se=Be.next()}}function G(){}function V(){o+=1}function K(){o-=1,o===0&&c.length>0&&(g.fire("changed",c),c.length=0)}function W(J){if(typeof J!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+J);for(var ee=e.values(),he=ee.next();!he.done;){if(J(he.value))return!0;he=ee.next()}}}function HW(n,e){this.id=n,this.links=null,this.data=e}function TD(n,e){n.links?n.links.add(e):n.links=new Set([e])}function ID(n,e,i,s){this.fromId=n,this.toId=e,this.data=i,this.id=s}function EE(n,e){return n.toString()+" "+e.toString()}const VW=vy(UW);var hI={exports:{}},My={exports:{}},rk=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const jW=rk;var s0=function(e){return i;function i(s,o){let l=o&&o.indent||0,c=o&&o.join!==void 0?o.join:`
`,d=Array(l+1).join(" "),u=[];for(let f=0;f<e;++f){let A=jW(f),g=f===0?"":d;u.push(g+s.replace(/{var}/g,A))}return u.join(c)}};const sk=s0;My.exports=QW;My.exports.generateCreateBodyFunctionBody=ok;My.exports.getVectorCode=lk;My.exports.getBodyCode=ak;function QW(n,e){let i=ok(n,e),{Body:s}=new Function(i)();return s}function ok(n,e){return`
${lk(n,e)}
${ak(n)}
return {Body: Body, Vector: Vector};
`}function ak(n){let e=sk(n),i=e("{var}",{join:", "});return`
function Body(${i}) {
  this.isPinned = false;
  this.pos = new Vector(${i});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${i}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function lk(n,e){let i=sk(n),s="";return e&&(s=`${i(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${i("{var}",{join:", "})}) {
  ${s}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${i('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${i("this.{var} = v.{var};",{indent:4})}
    } else {
      ${i('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${i("this.{var} = ",{join:""})}0;
  };`}var WW=My.exports,tf={exports:{}};const dI=s0,bd=rk;tf.exports=KW;tf.exports.generateQuadTreeFunctionBody=ck;tf.exports.getInsertStackCode=pk;tf.exports.getQuadNodeCode=fk;tf.exports.isSamePosition=uk;tf.exports.getChildBodyCode=dk;tf.exports.setChildBodyCode=hk;function KW(n){let e=ck(n);return new Function(e)()}function ck(n){let e=dI(n),i=Math.pow(2,n);return`
${pk()}
${fk(n)}
${uk(n)}
${dk(n)}
${hk(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${c("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${bd(0)} - node.min_${bd(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${l()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${o(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function o(d){let u=[],f=Array(d+1).join(" ");for(let A=0;A<n;++A)u.push(f+`if (${bd(A)} > max_${bd(A)}) {`),u.push(f+`  quadIdx = quadIdx + ${Math.pow(2,A)};`),u.push(f+`  min_${bd(A)} = max_${bd(A)};`),u.push(f+`  max_${bd(A)} = node.max_${bd(A)};`),u.push(f+"}");return u.join(`
`)}function l(){let d=Array(11).join(" "),u=[];for(let f=0;f<i;++f)u.push(d+`if (node.quad${f}) {`),u.push(d+`  queue[pushIdx] = node.quad${f};`),u.push(d+"  queueLength += 1;"),u.push(d+"  pushIdx += 1;"),u.push(d+"}");return u.join(`
`)}function c(d){let u=[];for(let f=0;f<i;++f)u.push(`${d}quad${f} = null;`);return u.join(`
`)}}function uk(n){let e=dI(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function hk(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${i()}
}`;function i(){let s=[];for(let o=0;o<e;++o){let l=o===0?"  ":"  else ";s.push(`${l}if (idx === ${o}) node.quad${o} = child;`)}return s.join(`
`)}}function dk(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let i=[],s=Math.pow(2,n);for(let o=0;o<s;++o)i.push(`  if (idx === ${o}) return node.quad${o};`);return i.join(`
`)}}function fk(n){let e=dI(n),i=Math.pow(2,n);var s=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${o("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return s;function o(l){let c=[];for(let d=0;d<i;++d)c.push(`${l}quad${d} = null;`);return c.join(`
`)}}function pk(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var XW=tf.exports,fI={exports:{}};fI.exports=qW;fI.exports.generateFunctionBody=mk;const YW=s0;function qW(n){let e=mk(n);return new Function("bodies","settings","random",e)}function mk(n){let e=YW(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var $W=fI.exports,pI={exports:{}};const JW=s0;pI.exports=ZW;pI.exports.generateCreateDragForceFunctionBody=gk;function ZW(n){let e=gk(n);return new Function("options",e)}function gk(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${JW(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var eK=pI.exports,mI={exports:{}};const tK=s0;mI.exports=nK;mI.exports.generateCreateSpringForceFunctionBody=Ak;function nK(n){let e=Ak(n);return new Function("options","random",e)}function Ak(n){let e=tK(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var iK=mI.exports,gI={exports:{}};const rK=s0;gI.exports=sK;gI.exports.generateIntegratorFunctionBody=vk;function sK(n){let e=vk(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function vk(n){let e=rK(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var oK=gI.exports,zM,RD;function aK(){if(RD)return zM;RD=1,zM=n;function n(e,i,s,o){this.from=e,this.to=i,this.length=s,this.coefficient=o}return zM}var HM,LD;function lK(){if(LD)return HM;LD=1,HM=n;function n(e,i){var s;if(e||(e={}),i){for(s in i)if(i.hasOwnProperty(s)){var o=e.hasOwnProperty(s),l=typeof i[s],c=!o||typeof e[s]!==l;c?e[s]=i[s]:l==="object"&&(e[s]=n(e[s],i[s]))}}return e}return HM}var sv={exports:{}},BD;function cK(){if(BD)return sv.exports;BD=1,sv.exports=n,sv.exports.random=n,sv.exports.randomIterator=d;function n(u){var f=typeof u=="number"?u:+new Date;return new e(f)}function e(u){this.seed=u}e.prototype.next=c,e.prototype.nextDouble=l,e.prototype.uniform=l,e.prototype.gaussian=i;function i(){var u,f,A;do f=this.nextDouble()*2-1,A=this.nextDouble()*2-1,u=f*f+A*A;while(u>=1||u===0);return f*Math.sqrt(-2*Math.log(u)/u)}e.prototype.levy=s;function s(){var u=1.5,f=Math.pow(o(1+u)*Math.sin(Math.PI*u/2)/(o((1+u)/2)*u*Math.pow(2,(u-1)/2)),1/u);return this.gaussian()*f/Math.pow(Math.abs(this.gaussian()),1/u)}function o(u){return Math.sqrt(2*Math.PI/u)*Math.pow(1/Math.E*(u+1/(12*u-1/(10*u))),u)}function l(){var u=this.seed;return u=u+2127912214+(u<<12)&4294967295,u=(u^3345072700^u>>>19)&4294967295,u=u+374761393+(u<<5)&4294967295,u=(u+3550635116^u<<9)&4294967295,u=u+4251993797+(u<<3)&4294967295,u=(u^3042594569^u>>>16)&4294967295,this.seed=u,(u&268435455)/268435456}function c(u){return Math.floor(this.nextDouble()*u)}function d(u,f){var A=f||n();if(typeof A.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:y,shuffle:g};function g(){var v,_,x;for(v=u.length-1;v>0;--v)_=A.next(v+1),x=u[_],u[_]=u[v],u[v]=x;return u}function y(v){var _,x,b;for(_=u.length-1;_>0;--_)x=A.next(_+1),b=u[x],u[x]=u[_],u[_]=b,v(b);u.length&&v(u[0])}}return sv.exports}var yk=gK,uK=WW,hK=XW,dK=$W,fK=eK,pK=iK,mK=oK,DD={};function gK(n){var e=aK(),i=lK(),s=uI;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=i(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var o=DD[n.dimensions];if(!o){var l=n.dimensions;o={Body:uK(l,n.debug),createQuadTree:hK(l),createBounds:dK(l),createDragForce:fK(l),createSpringForce:pK(l),integrate:mK(l)},DD[l]=o}var c=o.Body,d=o.createQuadTree,u=o.createBounds,f=o.createDragForce,A=o.createSpringForce,g=o.integrate,y=U=>new c(U),v=cK().random(42),_=[],x=[],b=d(n,v),m=u(_,n,v),S=A(n,v),C=f(n),M=0,T=[],N=new Map,P=0;z("nbody",O),z("spring",F);var k={bodies:_,quadTree:b,springs:x,settings:n,addForce:z,removeForce:Y,getForces:ne,step:function(){for(var U=0;U<T.length;++U)T[U](P);var G=g(_,n.timeStep,n.adaptiveTimeStepWeight);return P+=1,G},addBody:function(U){if(!U)throw new Error("Body is required");return _.push(U),U},addBodyAt:function(U){if(!U)throw new Error("Body position is required");var G=y(U);return _.push(G),G},removeBody:function(U){if(U){var G=_.indexOf(U);if(!(G<0))return _.splice(G,1),_.length===0&&m.reset(),!0}},addSpring:function(U,G,V,K){if(!U||!G)throw new Error("Cannot add null spring to force simulator");typeof V!="number"&&(V=-1);var W=new e(U,G,V,K>=0?K:-1);return x.push(W),W},getTotalMovement:function(){return M},removeSpring:function(U){if(U){var G=x.indexOf(U);if(G>-1)return x.splice(G,1),!0}},getBestNewBodyPosition:function(U){return m.getBestNewPosition(U)},getBBox:D,getBoundingBox:D,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(U){return U!==void 0?(n.gravity=U,b.options({gravity:U}),this):n.gravity},theta:function(U){return U!==void 0?(n.theta=U,b.options({theta:U}),this):n.theta},random:v};return AK(n,k),s(k),k;function D(){return m.update(),m.box}function z(U,G){if(N.has(U))throw new Error("Force "+U+" is already added");N.set(U,G),T.push(G)}function Y(U){var G=T.indexOf(N.get(U));G<0||(T.splice(G,1),N.delete(U))}function ne(){return N}function O(){if(_.length!==0){b.insertBodies(_);for(var U=_.length;U--;){var G=_[U];G.isPinned||(G.reset(),b.updateBodyForce(G),C.update(G))}}}function F(){for(var U=x.length;U--;)S.update(x[U])}}function AK(n,e){for(var i in n)vK(n,e,i)}function vK(n,e,i){if(n.hasOwnProperty(i)&&typeof e[i]!="function"){var s=Number.isFinite(n[i]);s?e[i]=function(o){if(o!==void 0){if(!Number.isFinite(o))throw new Error("Value of "+i+" should be a valid number.");return n[i]=o,e}return n[i]}:e[i]=function(o){return o!==void 0?(n[i]=o,e):n[i]}}}hI.exports=xK;hI.exports.simulator=yk;var yK=uI;function xK(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var i=e&&e.createSimulator||yk,s=i(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var o=n.version>19?O:ne;e&&typeof e.nodeMass=="function"&&(o=e.nodeMass);var l=new Map,c={},d=0,u=s.settings.springTransform||EK;C(),b();var f=!1,A={step:function(){if(d===0)return g(!0),!0;var F=s.step();A.lastMove=F,A.fire("step");var U=F/d,G=U<=.01;return g(G),G},getNodePosition:function(F){return Y(F).pos},setNodePosition:function(F){var U=Y(F);U.setPosition.apply(U,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(F){var U=c[F];if(U)return{from:U.from.pos,to:U.to.pos}},getGraphRect:function(){return s.getBBox()},forEachBody:y,pinNode:function(F,U){var G=Y(F.id);G.isPinned=!!U},isNodePinned:function(F){return Y(F.id).isPinned},dispose:function(){n.off("changed",S),A.fire("disposed")},getBody:x,getSpring:_,getForceVectorLength:v,simulator:s,graph:n,lastMove:0};return yK(A),A;function g(F){f!==F&&(f=F,m(F))}function y(F){l.forEach(F)}function v(){var F=0,U=0;return y(function(G){F+=Math.abs(G.force.x),U+=Math.abs(G.force.y)}),Math.sqrt(F*F+U*U)}function _(F,U){var G;if(U===void 0)typeof F!="object"?G=F:G=F.id;else{var V=n.hasLink(F,U);if(!V)return;G=V.id}return c[G]}function x(F){return l.get(F)}function b(){n.on("changed",S)}function m(F){A.fire("stable",F)}function S(F){for(var U=0;U<F.length;++U){var G=F[U];G.changeType==="add"?(G.node&&M(G.node.id),G.link&&N(G.link)):G.changeType==="remove"&&(G.node&&T(G.node),G.link&&P(G.link))}d=n.getNodesCount()}function C(){d=0,n.forEachNode(function(F){M(F.id),d+=1}),n.forEachLink(N)}function M(F){var U=l.get(F);if(!U){var G=n.getNode(F);if(!G)throw new Error("initBody() was called with unknown node id");var V=G.position;if(!V){var K=k(G);V=s.getBestNewBodyPosition(K)}U=s.addBodyAt(V),U.id=F,l.set(F,U),D(F),z(G)&&(U.isPinned=!0)}}function T(F){var U=F.id,G=l.get(U);G&&(l.delete(U),s.removeBody(G))}function N(F){D(F.fromId),D(F.toId);var U=l.get(F.fromId),G=l.get(F.toId),V=s.addSpring(U,G,F.length);u(F,V),c[F.id]=V}function P(F){var U=c[F.id];if(U){var G=n.getNode(F.fromId),V=n.getNode(F.toId);G&&D(G.id),V&&D(V.id),delete c[F.id],s.removeSpring(U)}}function k(F){var U=[];if(!F.links)return U;for(var G=Math.min(F.links.length,2),V=0;V<G;++V){var K=F.links[V],W=K.fromId!==F.id?l.get(K.fromId):l.get(K.toId);W&&W.pos&&U.push(W)}return U}function D(F){var U=l.get(F);if(U.mass=o(F),Number.isNaN(U.mass))throw new Error("Node mass should be a number")}function z(F){return F&&(F.isPinned||F.data&&F.data.isPinned)}function Y(F){var U=l.get(F);return U||(M(F),U=l.get(F)),U}function ne(F){var U=n.getLinks(F);return U?1+U.length/3:1}function O(F){var U=n.getLinks(F);return U?1+U.size/3:1}}function EK(){}var _K=hI.exports;const bK=vy(_K);var wK=typeof global=="object"&&global&&global.Object===Object&&global;const CK=wK;var MK=typeof self=="object"&&self&&self.Object===Object&&self,SK=CK||MK||Function("return this")();const xk=SK;var TK=xk.Symbol;const D_=TK;var Ek=Object.prototype,IK=Ek.hasOwnProperty,RK=Ek.toString,ov=D_?D_.toStringTag:void 0;function LK(n){var e=IK.call(n,ov),i=n[ov];try{n[ov]=void 0;var s=!0}catch{}var o=RK.call(n);return s&&(e?n[ov]=i:delete n[ov]),o}var BK=Object.prototype,DK=BK.toString;function PK(n){return DK.call(n)}var OK="[object Null]",FK="[object Undefined]",PD=D_?D_.toStringTag:void 0;function kK(n){return n==null?n===void 0?FK:OK:PD&&PD in Object(n)?LK(n):PK(n)}function NK(n){return n!=null&&typeof n=="object"}var UK="[object Symbol]";function GK(n){return typeof n=="symbol"||NK(n)&&kK(n)==UK}var zK=/\s/;function HK(n){for(var e=n.length;e--&&zK.test(n.charAt(e)););return e}var VK=/^\s+/;function jK(n){return n&&n.slice(0,HK(n)+1).replace(VK,"")}function P_(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var OD=0/0,QK=/^[-+]0x[0-9a-f]+$/i,WK=/^0b[01]+$/i,KK=/^0o[0-7]+$/i,XK=parseInt;function FD(n){if(typeof n=="number")return n;if(GK(n))return OD;if(P_(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=P_(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=jK(n);var i=WK.test(n);return i||KK.test(n)?XK(n.slice(2),i?2:8):QK.test(n)?OD:+n}var YK=function(){return xk.Date.now()};const VM=YK;var qK="Expected a function",$K=Math.max,JK=Math.min;function _k(n,e,i){var s,o,l,c,d,u,f=0,A=!1,g=!1,y=!0;if(typeof n!="function")throw new TypeError(qK);e=FD(e)||0,P_(i)&&(A=!!i.leading,g="maxWait"in i,l=g?$K(FD(i.maxWait)||0,e):l,y="trailing"in i?!!i.trailing:y);function v(N){var P=s,k=o;return s=o=void 0,f=N,c=n.apply(k,P),c}function _(N){return f=N,d=setTimeout(m,e),A?v(N):c}function x(N){var P=N-u,k=N-f,D=e-P;return g?JK(D,l-k):D}function b(N){var P=N-u,k=N-f;return u===void 0||P>=e||P<0||g&&k>=l}function m(){var N=VM();if(b(N))return S(N);d=setTimeout(m,x(N))}function S(N){return d=void 0,y&&s?v(N):(s=o=void 0,c)}function C(){d!==void 0&&clearTimeout(d),f=0,s=u=o=d=void 0}function M(){return d===void 0?c:S(VM())}function T(){var N=VM(),P=b(N);if(s=arguments,o=this,u=N,P){if(d===void 0)return _(u);if(g)return clearTimeout(d),d=setTimeout(m,e),v(u)}return d===void 0&&(d=setTimeout(m,e)),c}return T.cancel=C,T.flush=M,T}var ZK="Expected a function";function eX(n,e,i){var s=!0,o=!0;if(typeof n!="function")throw new TypeError(ZK);return P_(i)&&(s="leading"in i?!!i.leading:s,o="trailing"in i?!!i.trailing:o),_k(n,e,{leading:s,maxWait:e,trailing:o})}function tX(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function nX(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kD(n,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,cX(s.key),s)}}function iX(n,e,i){return e&&kD(n.prototype,e),i&&kD(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function rX(n,e){return sX(n)||tX(n,e)||oX(n,e)||aX()}function sX(n){if(Array.isArray(n))return n}function oX(n,e){if(n){if(typeof n=="string")return ND(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ND(n,e)}}function ND(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function aX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lX(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cX(n){var e=lX(n,"string");return typeof e=="symbol"?e:String(e)}var uX=iX(function n(e,i){var s=i.default,o=s===void 0?null:s,l=i.triggerUpdate,c=l===void 0?!0:l,d=i.onChange,u=d===void 0?function(f,A){}:d;nX(this,n),this.name=e,this.defaultVal=o,this.triggerUpdate=c,this.onChange=u});function Lp(n){var e=n.stateInit,i=e===void 0?function(){return{}}:e,s=n.props,o=s===void 0?{}:s,l=n.methods,c=l===void 0?{}:l,d=n.aliases,u=d===void 0?{}:d,f=n.init,A=f===void 0?function(){}:f,g=n.update,y=g===void 0?function(){}:g,v=Object.keys(o).map(function(_){return new uX(_,o[_])});return function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=Object.assign({},i instanceof Function?i(_):i,{initialised:!1}),b={};function m(M){return S(M,_),C(),m}var S=function(T,N){A.call(m,T,x,N),x.initialised=!0},C=_k(function(){x.initialised&&(y.call(m,x,b),b={})},1);return v.forEach(function(M){m[M.name]=T(M);function T(N){var P=N.name,k=N.triggerUpdate,D=k===void 0?!1:k,z=N.onChange,Y=z===void 0?function(F,U){}:z,ne=N.defaultVal,O=ne===void 0?null:ne;return function(F){var U=x[P];if(!arguments.length)return U;var G=F===void 0?O:F;return x[P]=G,Y.call(m,G,x,U),!b.hasOwnProperty(P)&&(b[P]=U),D&&C(),m}}}),Object.keys(c).forEach(function(M){m[M]=function(){for(var T,N=arguments.length,P=new Array(N),k=0;k<N;k++)P[k]=arguments[k];return(T=c[M]).call.apply(T,[m,x].concat(P))}}),Object.entries(u).forEach(function(M){var T=rX(M,2),N=T[0],P=T[1];return m[N]=m[P]}),m.resetProps=function(){return v.forEach(function(M){m[M.name](M.defaultVal)}),m},m.resetProps(),x._rerender=C,m}}class UD extends Map{constructor(e,i=fX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(const[s,o]of e)this.set(s,o)}get(e){return super.get(GD(this,e))}has(e){return super.has(GD(this,e))}set(e,i){return super.set(hX(this,e),i)}delete(e){return super.delete(dX(this,e))}}function GD({_intern:n,_key:e},i){const s=e(i);return n.has(s)?n.get(s):i}function hX({_intern:n,_key:e},i){const s=e(i);return n.has(s)?n.get(s):(n.set(s,i),i)}function dX({_intern:n,_key:e},i){const s=e(i);return n.has(s)&&(i=n.get(s),n.delete(s)),i}function fX(n){return n!==null&&typeof n=="object"?n.valueOf():n}function yT(n,e){let i;if(e===void 0)for(const s of n)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let o of n)(o=e(o,++s,n))!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}return i}function xT(n,e){let i;if(e===void 0)for(const s of n)s!=null&&(i>s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let o of n)(o=e(o,++s,n))!=null&&(i>o||i===void 0&&o>=o)&&(i=o)}return i}function pX(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function mX(n,e){if(n==null)return{};var i={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(i[o]=n[o]);return i}function gX(n,e){if(n==null)return{};var i=mX(n,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(i[s]=n[s])}return i}function AX(n,e){return xX(n)||pX(n,e)||bk(n,e)||bX()}function vX(n){return yX(n)||EX(n)||bk(n)||_X()}function yX(n){if(Array.isArray(n))return ET(n)}function xX(n){if(Array.isArray(n))return n}function EX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function bk(n,e){if(n){if(typeof n=="string")return ET(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ET(n,e)}}function ET(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function _X(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wX(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CX(n){var e=wX(n,"string");return typeof e=="symbol"?e:String(e)}var _T=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(d){return{keyAccessor:d,isProp:!(d instanceof Function)}}),l=n.reduce(function(d,u){var f=d,A=u;return o.forEach(function(g,y){var v=g.keyAccessor,_=g.isProp,x;if(_){var b=A,m=b[v],S=gX(b,[v].map(CX));x=m,A=S}else x=v(A,y);y+1<o.length?(f.hasOwnProperty(x)||(f[x]={}),f=f[x]):i?(f.hasOwnProperty(x)||(f[x]=[]),f[x].push(A)):f[x]=A}),d},{});i instanceof Function&&function d(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f===o.length?Object.keys(u).forEach(function(A){return u[A]=i(u[A])}):Object.values(u).forEach(function(A){return d(A,f+1)})}(l);var c=l;return s&&(c=[],function d(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];f.length===o.length?c.push({keys:f,vals:u}):Object.entries(u).forEach(function(A){var g=AX(A,2),y=g[0],v=g[1];return d(v,[].concat(vX(f),[y]))})}(l),e instanceof Array&&e.length===0&&c.length===1&&(c[0].keys=[])),c};function MX(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function zD(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,s)}return i}function SX(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?zD(Object(i),!0).forEach(function(s){wk(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):zD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function wk(n,e,i){return e=FX(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function TX(n,e){if(n==null)return{};var i={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(i[o]=n[o]);return i}function IX(n,e){if(n==null)return{};var i=TX(n,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(i[s]=n[s])}return i}function Ck(n,e){return LX(n)||MX(n,e)||Mk(n,e)||PX()}function O_(n){return RX(n)||BX(n)||Mk(n)||DX()}function RX(n){if(Array.isArray(n))return bT(n)}function LX(n){if(Array.isArray(n))return n}function BX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Mk(n,e){if(n){if(typeof n=="string")return bT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bT(n,e)}}function bT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function DX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OX(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function FX(n){var e=OX(n,"string");return typeof e=="symbol"?e:String(e)}var kX=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function NX(n,e,i){var s={enter:[],update:[],exit:[]};if(i){var c=_T(n,i,!1),d=_T(e,i,!1),u=Object.assign({},c,d);Object.entries(u).forEach(function(f){var A=Ck(f,2),g=A[0],y=A[1],v=c.hasOwnProperty(g)?d.hasOwnProperty(g)?"update":"exit":"enter";s[v].push(v==="update"?[c[g],d[g]]:y)})}else{var o=new Set(n),l=new Set(e);new Set([].concat(O_(o),O_(l))).forEach(function(f){var A=o.has(f)?l.has(f)?"update":"exit":"enter";s[A].push(A==="update"?[f,f]:f)})}return s}function UX(n,e,i){var s=i.objBindAttr,o=s===void 0?"__obj":s,l=i.dataBindAttr,c=l===void 0?"__data":l,d=i.idAccessor,u=i.purge,f=u===void 0?!1:u,A=function(b){return b.hasOwnProperty(c)},g=e.filter(function(x){return!A(x)}),y=e.filter(A).map(function(x){return x[c]}),v=n,_=f?{enter:v,exit:y,update:[]}:NX(y,v,d);return _.update=_.update.map(function(x){var b=Ck(x,2),m=b[0],S=b[1];return m!==S&&(S[o]=m[o],S[o][c]=S),S}),_.exit=_.exit.concat(g.map(function(x){return wk({},o,x)})),_}function GX(n,e,i,s,o){var l=o.createObj,c=l===void 0?function(k){return{}}:l,d=o.updateObj,u=d===void 0?function(k,D){}:d,f=o.exitObj,A=f===void 0?function(k){}:f,g=o.objBindAttr,y=g===void 0?"__obj":g,v=o.dataBindAttr,_=v===void 0?"__data":v,x=IX(o,kX),b=UX(n,e,SX({objBindAttr:y,dataBindAttr:_},x)),m=b.enter,S=b.update,C=b.exit;C.forEach(function(k){var D=k[y];delete k[y],A(D),s(D)});var M=N(m),T=[].concat(O_(m),O_(S));P(T),M.forEach(i);function N(k){var D=[];return k.forEach(function(z){var Y=c(z);Y&&(Y[_]=z,z[y]=Y,D.push(Y))}),D}function P(k){k.forEach(function(D){var z=D[y];z&&(z[_]=D,u(z,D))})}}function zX(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const HD=Symbol("implicit");function AI(){var n=new UD,e=[],i=[],s=HD;function o(l){let c=n.get(l);if(c===void 0){if(s!==HD)return s;n.set(l,c=e.push(l)-1)}return i[c%i.length]}return o.domain=function(l){if(!arguments.length)return e.slice();e=[],n=new UD;for(const c of l)n.has(c)||n.set(c,e.push(c)-1);return o},o.range=function(l){return arguments.length?(i=Array.from(l),o):i.slice()},o.unknown=function(l){return arguments.length?(s=l,o):s},o.copy=function(){return AI(e,i).unknown(s)},zX.apply(o,arguments),o}function vI(n,e,i){n.prototype=e.prototype=i,i.constructor=n}function Sk(n,e){var i=Object.create(n.prototype);for(var s in e)i[s]=e[s];return i}function Sy(){}var dy=.7,F_=1/dy,Ug="\\s*([+-]?\\d+)\\s*",fy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Su="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HX=/^#([0-9a-f]{3,8})$/,VX=new RegExp(`^rgb\\(${Ug},${Ug},${Ug}\\)$`),jX=new RegExp(`^rgb\\(${Su},${Su},${Su}\\)$`),QX=new RegExp(`^rgba\\(${Ug},${Ug},${Ug},${fy}\\)$`),WX=new RegExp(`^rgba\\(${Su},${Su},${Su},${fy}\\)$`),KX=new RegExp(`^hsl\\(${fy},${Su},${Su}\\)$`),XX=new RegExp(`^hsla\\(${fy},${Su},${Su},${fy}\\)$`),VD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vI(Sy,py,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:jD,formatHex:jD,formatHex8:YX,formatHsl:qX,formatRgb:QD,toString:QD});function jD(){return this.rgb().formatHex()}function YX(){return this.rgb().formatHex8()}function qX(){return Tk(this).formatHsl()}function QD(){return this.rgb().formatRgb()}function py(n){var e,i;return n=(n+"").trim().toLowerCase(),(e=HX.exec(n))?(i=e[1].length,e=parseInt(e[1],16),i===6?WD(e):i===3?new Ya(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?_E(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?_E(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VX.exec(n))?new Ya(e[1],e[2],e[3],1):(e=jX.exec(n))?new Ya(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QX.exec(n))?_E(e[1],e[2],e[3],e[4]):(e=WX.exec(n))?_E(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=KX.exec(n))?YD(e[1],e[2]/100,e[3]/100,1):(e=XX.exec(n))?YD(e[1],e[2]/100,e[3]/100,e[4]):VD.hasOwnProperty(n)?WD(VD[n]):n==="transparent"?new Ya(NaN,NaN,NaN,0):null}function WD(n){return new Ya(n>>16&255,n>>8&255,n&255,1)}function _E(n,e,i,s){return s<=0&&(n=e=i=NaN),new Ya(n,e,i,s)}function $X(n){return n instanceof Sy||(n=py(n)),n?(n=n.rgb(),new Ya(n.r,n.g,n.b,n.opacity)):new Ya}function wT(n,e,i,s){return arguments.length===1?$X(n):new Ya(n,e,i,s??1)}function Ya(n,e,i,s){this.r=+n,this.g=+e,this.b=+i,this.opacity=+s}vI(Ya,wT,Sk(Sy,{brighter(n){return n=n==null?F_:Math.pow(F_,n),new Ya(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?dy:Math.pow(dy,n),new Ya(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ya(xp(this.r),xp(this.g),xp(this.b),k_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KD,formatHex:KD,formatHex8:JX,formatRgb:XD,toString:XD}));function KD(){return`#${dp(this.r)}${dp(this.g)}${dp(this.b)}`}function JX(){return`#${dp(this.r)}${dp(this.g)}${dp(this.b)}${dp((isNaN(this.opacity)?1:this.opacity)*255)}`}function XD(){const n=k_(this.opacity);return`${n===1?"rgb(":"rgba("}${xp(this.r)}, ${xp(this.g)}, ${xp(this.b)}${n===1?")":`, ${n})`}`}function k_(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function xp(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function dp(n){return n=xp(n),(n<16?"0":"")+n.toString(16)}function YD(n,e,i,s){return s<=0?n=e=i=NaN:i<=0||i>=1?n=e=NaN:e<=0&&(n=NaN),new Lc(n,e,i,s)}function Tk(n){if(n instanceof Lc)return new Lc(n.h,n.s,n.l,n.opacity);if(n instanceof Sy||(n=py(n)),!n)return new Lc;if(n instanceof Lc)return n;n=n.rgb();var e=n.r/255,i=n.g/255,s=n.b/255,o=Math.min(e,i,s),l=Math.max(e,i,s),c=NaN,d=l-o,u=(l+o)/2;return d?(e===l?c=(i-s)/d+(i<s)*6:i===l?c=(s-e)/d+2:c=(e-i)/d+4,d/=u<.5?l+o:2-l-o,c*=60):d=u>0&&u<1?0:c,new Lc(c,d,u,n.opacity)}function ZX(n,e,i,s){return arguments.length===1?Tk(n):new Lc(n,e,i,s??1)}function Lc(n,e,i,s){this.h=+n,this.s=+e,this.l=+i,this.opacity=+s}vI(Lc,ZX,Sk(Sy,{brighter(n){return n=n==null?F_:Math.pow(F_,n),new Lc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?dy:Math.pow(dy,n),new Lc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*e,o=2*i-s;return new Ya(jM(n>=240?n-240:n+120,o,s),jM(n,o,s),jM(n<120?n+240:n-120,o,s),this.opacity)},clamp(){return new Lc(qD(this.h),bE(this.s),bE(this.l),k_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=k_(this.opacity);return`${n===1?"hsl(":"hsla("}${qD(this.h)}, ${bE(this.s)*100}%, ${bE(this.l)*100}%${n===1?")":`, ${n})`}`}}));function qD(n){return n=(n||0)%360,n<0?n+360:n}function bE(n){return Math.max(0,Math.min(1,n||0))}function jM(n,e,i){return(n<60?e+(i-e)*n/60:n<180?i:n<240?e+(i-e)*(240-n)/60:e)*255}const Ik=n=>()=>n;function eY(n,e){return function(i){return n+i*e}}function tY(n,e,i){return n=Math.pow(n,i),e=Math.pow(e,i)-n,i=1/i,function(s){return Math.pow(n+s*e,i)}}function nY(n){return(n=+n)==1?Rk:function(e,i){return i-e?tY(e,i,n):Ik(isNaN(e)?i:e)}}function Rk(n,e){var i=e-n;return i?eY(n,i):Ik(isNaN(n)?e:n)}const $D=function n(e){var i=nY(e);function s(o,l){var c=i((o=wT(o)).r,(l=wT(l)).r),d=i(o.g,l.g),u=i(o.b,l.b),f=Rk(o.opacity,l.opacity);return function(A){return o.r=c(A),o.g=d(A),o.b=u(A),o.opacity=f(A),o+""}}return s.gamma=n,s}(1);function Ld(n,e){return n=+n,e=+e,function(i){return n*(1-i)+e*i}}var CT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QM=new RegExp(CT.source,"g");function iY(n){return function(){return n}}function rY(n){return function(e){return n(e)+""}}function sY(n,e){var i=CT.lastIndex=QM.lastIndex=0,s,o,l,c=-1,d=[],u=[];for(n=n+"",e=e+"";(s=CT.exec(n))&&(o=QM.exec(e));)(l=o.index)>i&&(l=e.slice(i,l),d[c]?d[c]+=l:d[++c]=l),(s=s[0])===(o=o[0])?d[c]?d[c]+=o:d[++c]=o:(d[++c]=null,u.push({i:c,x:Ld(s,o)})),i=QM.lastIndex;return i<e.length&&(l=e.slice(i),d[c]?d[c]+=l:d[++c]=l),d.length<2?u[0]?rY(u[0].x):iY(e):(e=u.length,function(f){for(var A=0,g;A<e;++A)d[(g=u[A]).i]=g.x(f);return d.join("")})}var JD=180/Math.PI,MT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lk(n,e,i,s,o,l){var c,d,u;return(c=Math.sqrt(n*n+e*e))&&(n/=c,e/=c),(u=n*i+e*s)&&(i-=n*u,s-=e*u),(d=Math.sqrt(i*i+s*s))&&(i/=d,s/=d,u/=d),n*s<e*i&&(n=-n,e=-e,u=-u,c=-c),{translateX:o,translateY:l,rotate:Math.atan2(e,n)*JD,skewX:Math.atan(u)*JD,scaleX:c,scaleY:d}}var wE;function oY(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?MT:Lk(e.a,e.b,e.c,e.d,e.e,e.f)}function aY(n){return n==null||(wE||(wE=document.createElementNS("http://www.w3.org/2000/svg","g")),wE.setAttribute("transform",n),!(n=wE.transform.baseVal.consolidate()))?MT:(n=n.matrix,Lk(n.a,n.b,n.c,n.d,n.e,n.f))}function Bk(n,e,i,s){function o(f){return f.length?f.pop()+" ":""}function l(f,A,g,y,v,_){if(f!==g||A!==y){var x=v.push("translate(",null,e,null,i);_.push({i:x-4,x:Ld(f,g)},{i:x-2,x:Ld(A,y)})}else(g||y)&&v.push("translate("+g+e+y+i)}function c(f,A,g,y){f!==A?(f-A>180?A+=360:A-f>180&&(f+=360),y.push({i:g.push(o(g)+"rotate(",null,s)-2,x:Ld(f,A)})):A&&g.push(o(g)+"rotate("+A+s)}function d(f,A,g,y){f!==A?y.push({i:g.push(o(g)+"skewX(",null,s)-2,x:Ld(f,A)}):A&&g.push(o(g)+"skewX("+A+s)}function u(f,A,g,y,v,_){if(f!==g||A!==y){var x=v.push(o(v)+"scale(",null,",",null,")");_.push({i:x-4,x:Ld(f,g)},{i:x-2,x:Ld(A,y)})}else(g!==1||y!==1)&&v.push(o(v)+"scale("+g+","+y+")")}return function(f,A){var g=[],y=[];return f=n(f),A=n(A),l(f.translateX,f.translateY,A.translateX,A.translateY,g,y),c(f.rotate,A.rotate,g,y),d(f.skewX,A.skewX,g,y),u(f.scaleX,f.scaleY,A.scaleX,A.scaleY,g,y),f=A=null,function(v){for(var _=-1,x=y.length,b;++_<x;)g[(b=y[_]).i]=b.x(v);return g.join("")}}}var lY=Bk(oY,"px, ","px)","deg)"),cY=Bk(aY,", ",")",")"),uY=1e-12;function ZD(n){return((n=Math.exp(n))+1/n)/2}function hY(n){return((n=Math.exp(n))-1/n)/2}function dY(n){return((n=Math.exp(2*n))-1)/(n+1)}const fY=function n(e,i,s){function o(l,c){var d=l[0],u=l[1],f=l[2],A=c[0],g=c[1],y=c[2],v=A-d,_=g-u,x=v*v+_*_,b,m;if(x<uY)m=Math.log(y/f)/e,b=function(P){return[d+P*v,u+P*_,f*Math.exp(e*P*m)]};else{var S=Math.sqrt(x),C=(y*y-f*f+s*x)/(2*f*i*S),M=(y*y-f*f-s*x)/(2*y*i*S),T=Math.log(Math.sqrt(C*C+1)-C),N=Math.log(Math.sqrt(M*M+1)-M);m=(N-T)/e,b=function(P){var k=P*m,D=ZD(T),z=f/(i*S)*(D*dY(e*k+T)-hY(T));return[d+z*v,u+z*_,f*D/ZD(e*k+T)]}}return b.duration=m*1e3*e/Math.SQRT2,b}return o.rho=function(l){var c=Math.max(.001,+l),d=c*c,u=d*d;return n(c,d,u)},o}(Math.SQRT2,2,4);function pY(n){for(var e=n.length/6|0,i=new Array(e),s=0;s<e;)i[s]="#"+n.slice(s*6,++s*6);return i}const Dk=pY("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function N_(n){"@babel/helpers - typeof";return N_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N_(n)}var mY=/^\s+/,gY=/\s+$/;function wi(n,e){if(n=n||"",e=e||{},n instanceof wi)return n;if(!(this instanceof wi))return new wi(n,e);var i=AY(n);this._originalInput=n,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}wi.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),i,s,o,l,c,d;return i=e.r/255,s=e.g/255,o=e.b/255,i<=.03928?l=i/12.92:l=Math.pow((i+.055)/1.055,2.4),s<=.03928?c=s/12.92:c=Math.pow((s+.055)/1.055,2.4),o<=.03928?d=o/12.92:d=Math.pow((o+.055)/1.055,2.4),.2126*l+.7152*c+.0722*d},setAlpha:function(e){return this._a=Pk(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=tP(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=tP(this._r,this._g,this._b),i=Math.round(e.h*360),s=Math.round(e.s*100),o=Math.round(e.v*100);return this._a==1?"hsv("+i+", "+s+"%, "+o+"%)":"hsva("+i+", "+s+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=eP(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=eP(this._r,this._g,this._b),i=Math.round(e.h*360),s=Math.round(e.s*100),o=Math.round(e.l*100);return this._a==1?"hsl("+i+", "+s+"%, "+o+"%)":"hsla("+i+", "+s+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return nP(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return EY(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ds(this._r,255)*100)+"%",g:Math.round(Ds(this._g,255)*100)+"%",b:Math.round(Ds(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ds(this._r,255)*100)+"%, "+Math.round(Ds(this._g,255)*100)+"%, "+Math.round(Ds(this._b,255)*100)+"%)":"rgba("+Math.round(Ds(this._r,255)*100)+"%, "+Math.round(Ds(this._g,255)*100)+"%, "+Math.round(Ds(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:DY[nP(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var i="#"+iP(this._r,this._g,this._b,this._a),s=i,o=this._gradientType?"GradientType = 1, ":"";if(e){var l=wi(e);s="#"+iP(l._r,l._g,l._b,l._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+i+",endColorstr="+s+")"},toString:function(e){var i=!!e;e=e||this._format;var s=!1,o=this._a<1&&this._a>=0,l=!i&&o&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return l?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(s=this.toRgbString()),e==="prgb"&&(s=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(s=this.toHexString()),e==="hex3"&&(s=this.toHexString(!0)),e==="hex4"&&(s=this.toHex8String(!0)),e==="hex8"&&(s=this.toHex8String()),e==="name"&&(s=this.toName()),e==="hsl"&&(s=this.toHslString()),e==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},clone:function(){return wi(this.toString())},_applyModification:function(e,i){var s=e.apply(null,[this].concat([].slice.call(i)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function(){return this._applyModification(CY,arguments)},brighten:function(){return this._applyModification(MY,arguments)},darken:function(){return this._applyModification(SY,arguments)},desaturate:function(){return this._applyModification(_Y,arguments)},saturate:function(){return this._applyModification(bY,arguments)},greyscale:function(){return this._applyModification(wY,arguments)},spin:function(){return this._applyModification(TY,arguments)},_applyCombination:function(e,i){return e.apply(null,[this].concat([].slice.call(i)))},analogous:function(){return this._applyCombination(LY,arguments)},complement:function(){return this._applyCombination(IY,arguments)},monochromatic:function(){return this._applyCombination(BY,arguments)},splitcomplement:function(){return this._applyCombination(RY,arguments)},triad:function(){return this._applyCombination(rP,[3])},tetrad:function(){return this._applyCombination(rP,[4])}};wi.fromRatio=function(n,e){if(N_(n)=="object"){var i={};for(var s in n)n.hasOwnProperty(s)&&(s==="a"?i[s]=n[s]:i[s]=wv(n[s]));n=i}return wi(n,e)};function AY(n){var e={r:0,g:0,b:0},i=1,s=null,o=null,l=null,c=!1,d=!1;return typeof n=="string"&&(n=kY(n)),N_(n)=="object"&&(oh(n.r)&&oh(n.g)&&oh(n.b)?(e=vY(n.r,n.g,n.b),c=!0,d=String(n.r).substr(-1)==="%"?"prgb":"rgb"):oh(n.h)&&oh(n.s)&&oh(n.v)?(s=wv(n.s),o=wv(n.v),e=xY(n.h,s,o),c=!0,d="hsv"):oh(n.h)&&oh(n.s)&&oh(n.l)&&(s=wv(n.s),l=wv(n.l),e=yY(n.h,s,l),c=!0,d="hsl"),n.hasOwnProperty("a")&&(i=n.a)),i=Pk(i),{ok:c,format:n.format||d,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}function vY(n,e,i){return{r:Ds(n,255)*255,g:Ds(e,255)*255,b:Ds(i,255)*255}}function eP(n,e,i){n=Ds(n,255),e=Ds(e,255),i=Ds(i,255);var s=Math.max(n,e,i),o=Math.min(n,e,i),l,c,d=(s+o)/2;if(s==o)l=c=0;else{var u=s-o;switch(c=d>.5?u/(2-s-o):u/(s+o),s){case n:l=(e-i)/u+(e<i?6:0);break;case e:l=(i-n)/u+2;break;case i:l=(n-e)/u+4;break}l/=6}return{h:l,s:c,l:d}}function yY(n,e,i){var s,o,l;n=Ds(n,360),e=Ds(e,100),i=Ds(i,100);function c(f,A,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(A-f)*6*g:g<1/2?A:g<2/3?f+(A-f)*(2/3-g)*6:f}if(e===0)s=o=l=i;else{var d=i<.5?i*(1+e):i+e-i*e,u=2*i-d;s=c(u,d,n+1/3),o=c(u,d,n),l=c(u,d,n-1/3)}return{r:s*255,g:o*255,b:l*255}}function tP(n,e,i){n=Ds(n,255),e=Ds(e,255),i=Ds(i,255);var s=Math.max(n,e,i),o=Math.min(n,e,i),l,c,d=s,u=s-o;if(c=s===0?0:u/s,s==o)l=0;else{switch(s){case n:l=(e-i)/u+(e<i?6:0);break;case e:l=(i-n)/u+2;break;case i:l=(n-e)/u+4;break}l/=6}return{h:l,s:c,v:d}}function xY(n,e,i){n=Ds(n,360)*6,e=Ds(e,100),i=Ds(i,100);var s=Math.floor(n),o=n-s,l=i*(1-e),c=i*(1-o*e),d=i*(1-(1-o)*e),u=s%6,f=[i,c,l,l,d,i][u],A=[d,i,i,c,l,l][u],g=[l,l,d,i,i,c][u];return{r:f*255,g:A*255,b:g*255}}function nP(n,e,i,s){var o=[Pc(Math.round(n).toString(16)),Pc(Math.round(e).toString(16)),Pc(Math.round(i).toString(16))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function EY(n,e,i,s,o){var l=[Pc(Math.round(n).toString(16)),Pc(Math.round(e).toString(16)),Pc(Math.round(i).toString(16)),Pc(Ok(s))];return o&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)&&l[3].charAt(0)==l[3].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function iP(n,e,i,s){var o=[Pc(Ok(s)),Pc(Math.round(n).toString(16)),Pc(Math.round(e).toString(16)),Pc(Math.round(i).toString(16))];return o.join("")}wi.equals=function(n,e){return!n||!e?!1:wi(n).toRgbString()==wi(e).toRgbString()};wi.random=function(){return wi.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _Y(n,e){e=e===0?0:e||10;var i=wi(n).toHsl();return i.s-=e/100,i.s=vb(i.s),wi(i)}function bY(n,e){e=e===0?0:e||10;var i=wi(n).toHsl();return i.s+=e/100,i.s=vb(i.s),wi(i)}function wY(n){return wi(n).desaturate(100)}function CY(n,e){e=e===0?0:e||10;var i=wi(n).toHsl();return i.l+=e/100,i.l=vb(i.l),wi(i)}function MY(n,e){e=e===0?0:e||10;var i=wi(n).toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(e/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(e/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(e/100)))),wi(i)}function SY(n,e){e=e===0?0:e||10;var i=wi(n).toHsl();return i.l-=e/100,i.l=vb(i.l),wi(i)}function TY(n,e){var i=wi(n).toHsl(),s=(i.h+e)%360;return i.h=s<0?360+s:s,wi(i)}function IY(n){var e=wi(n).toHsl();return e.h=(e.h+180)%360,wi(e)}function rP(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var i=wi(n).toHsl(),s=[wi(n)],o=360/e,l=1;l<e;l++)s.push(wi({h:(i.h+l*o)%360,s:i.s,l:i.l}));return s}function RY(n){var e=wi(n).toHsl(),i=e.h;return[wi(n),wi({h:(i+72)%360,s:e.s,l:e.l}),wi({h:(i+216)%360,s:e.s,l:e.l})]}function LY(n,e,i){e=e||6,i=i||30;var s=wi(n).toHsl(),o=360/i,l=[wi(n)];for(s.h=(s.h-(o*e>>1)+720)%360;--e;)s.h=(s.h+o)%360,l.push(wi(s));return l}function BY(n,e){e=e||6;for(var i=wi(n).toHsv(),s=i.h,o=i.s,l=i.v,c=[],d=1/e;e--;)c.push(wi({h:s,s:o,v:l})),l=(l+d)%1;return c}wi.mix=function(n,e,i){i=i===0?0:i||50;var s=wi(n).toRgb(),o=wi(e).toRgb(),l=i/100,c={r:(o.r-s.r)*l+s.r,g:(o.g-s.g)*l+s.g,b:(o.b-s.b)*l+s.b,a:(o.a-s.a)*l+s.a};return wi(c)};wi.readability=function(n,e){var i=wi(n),s=wi(e);return(Math.max(i.getLuminance(),s.getLuminance())+.05)/(Math.min(i.getLuminance(),s.getLuminance())+.05)};wi.isReadable=function(n,e,i){var s=wi.readability(n,e),o,l;switch(l=!1,o=NY(i),o.level+o.size){case"AAsmall":case"AAAlarge":l=s>=4.5;break;case"AAlarge":l=s>=3;break;case"AAAsmall":l=s>=7;break}return l};wi.mostReadable=function(n,e,i){var s=null,o=0,l,c,d,u;i=i||{},c=i.includeFallbackColors,d=i.level,u=i.size;for(var f=0;f<e.length;f++)l=wi.readability(n,e[f]),l>o&&(o=l,s=wi(e[f]));return wi.isReadable(n,s,{level:d,size:u})||!c?s:(i.includeFallbackColors=!1,wi.mostReadable(n,["#fff","#000"],i))};var ST=wi.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},DY=wi.hexNames=PY(ST);function PY(n){var e={};for(var i in n)n.hasOwnProperty(i)&&(e[n[i]]=i);return e}function Pk(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Ds(n,e){OY(n)&&(n="100%");var i=FY(n);return n=Math.min(e,Math.max(0,parseFloat(n))),i&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function vb(n){return Math.min(1,Math.max(0,n))}function Al(n){return parseInt(n,16)}function OY(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function FY(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Pc(n){return n.length==1?"0"+n:""+n}function wv(n){return n<=1&&(n=n*100+"%"),n}function Ok(n){return Math.round(parseFloat(n)*255).toString(16)}function sP(n){return Al(n)/255}var bc=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+n+")",s="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",o="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function oh(n){return!!bc.CSS_UNIT.exec(n)}function kY(n){n=n.replace(mY,"").replace(gY,"").toLowerCase();var e=!1;if(ST[n])n=ST[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=bc.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=bc.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=bc.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=bc.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=bc.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=bc.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=bc.hex8.exec(n))?{r:Al(i[1]),g:Al(i[2]),b:Al(i[3]),a:sP(i[4]),format:e?"name":"hex8"}:(i=bc.hex6.exec(n))?{r:Al(i[1]),g:Al(i[2]),b:Al(i[3]),format:e?"name":"hex"}:(i=bc.hex4.exec(n))?{r:Al(i[1]+""+i[1]),g:Al(i[2]+""+i[2]),b:Al(i[3]+""+i[3]),a:sP(i[4]+""+i[4]),format:e?"name":"hex8"}:(i=bc.hex3.exec(n))?{r:Al(i[1]+""+i[1]),g:Al(i[2]+""+i[2]),b:Al(i[3]+""+i[3]),format:e?"name":"hex"}:!1}function NY(n){var e,i;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),i=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),i!=="small"&&i!=="large"&&(i="small"),{level:e,size:i}}function UY(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function oP(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,s)}return i}function Fk(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(i),!0).forEach(function(s){yI(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):oP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function TT(n){"@babel/helpers - typeof";return TT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TT(n)}function GY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function aP(n,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,Gk(s.key),s)}}function zY(n,e,i){return e&&aP(n.prototype,e),i&&aP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function yI(n,e,i){return e=Gk(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function HY(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&G_(n,e)}function U_(n){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},U_(n)}function G_(n,e){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},G_(n,e)}function kk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qE(n,e,i){return kk()?qE=Reflect.construct.bind():qE=function(o,l,c){var d=[null];d.push.apply(d,l);var u=Function.bind.apply(o,d),f=new u;return c&&G_(f,c.prototype),f},qE.apply(null,arguments)}function VY(n,e){if(n==null)return{};var i={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(i[o]=n[o]);return i}function jY(n,e){if(n==null)return{};var i=VY(n,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(i[s]=n[s])}return i}function Nk(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function QY(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nk(n)}function WY(n){var e=kk();return function(){var s=U_(n),o;if(e){var l=U_(this).constructor;o=Reflect.construct(s,arguments,l)}else o=s.apply(this,arguments);return QY(this,o)}}function lP(n,e){return XY(n)||UY(n,e)||Uk(n,e)||$Y()}function Sc(n){return KY(n)||YY(n)||Uk(n)||qY()}function KY(n){if(Array.isArray(n))return IT(n)}function XY(n){if(Array.isArray(n))return n}function YY(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Uk(n,e){if(n){if(typeof n=="string")return IT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IT(n,e)}}function IT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function qY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JY(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gk(n){var e=JY(n,"string");return typeof e=="symbol"?e:String(e)}var ZY=function n(e){e instanceof Array?e.forEach(n):(e.map&&e.map.dispose(),e.dispose())},eq=function n(e){e.geometry&&e.geometry.dispose(),e.material&&ZY(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(n)},RT=function(e){for(;e.children.length;){var i=e.children[0];e.remove(i),eq(i)}},tq=["objFilter"];function av(n,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.objFilter,o=s===void 0?function(){return!0}:s,l=jY(i,tq);return GX(n,e.children.filter(o),function(c){return e.add(c)},function(c){e.remove(c),RT(c)},Fk({objBindAttr:"__threeObj"},l))}var lv=function(e){return isNaN(e)?parseInt(wi(e).toHex(),16):e},WM=function(e){return isNaN(e)?wi(e).getAlpha():1},nq=AI(Dk);function cP(n,e,i){!e||typeof i!="string"||n.filter(function(s){return!s[i]}).forEach(function(s){s[i]=nq(e(s))})}function iq(n,e){var i=n.nodes,s=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=o.nodeFilter,c=l===void 0?function(){return!0}:l,d=o.onLoopError,u=d===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:d,f={};i.forEach(function(v){return f[e(v)]={data:v,out:[],depth:-1,skip:!c(v)}}),s.forEach(function(v){var _=v.source,x=v.target,b=M(_),m=M(x);if(!f.hasOwnProperty(b))throw"Missing source node with id: ".concat(b);if(!f.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var S=f[b],C=f[m];S.out.push(C);function M(T){return TT(T)==="object"?e(T):T}});var A=[];y(Object.values(f));var g=Object.assign.apply(Object,[{}].concat(Sc(Object.entries(f).filter(function(v){var _=lP(v,2),x=_[1];return!x.skip}).map(function(v){var _=lP(v,2),x=_[0],b=_[1];return yI({},x,b.depth)}))));return g;function y(v){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=function(){var T=v[m];if(_.indexOf(T)!==-1){var N=[].concat(Sc(_.slice(_.indexOf(T))),[T]).map(function(P){return e(P.data)});return A.some(function(P){return P.length===N.length&&P.every(function(k,D){return k===N[D]})})||(A.push(N),u(N)),"continue"}x>T.depth&&(T.depth=x,y(T.out,[].concat(Sc(_),[T]),x+(T.skip?0:1)))},m=0,S=v.length;m<S;m++)var C=b()}}var Yi=window.THREE?window.THREE:{Group:Tg,Mesh:Dc,MeshLambertMaterial:yQ,Color:jr,BufferGeometry:Za,BufferAttribute:Jl,Matrix4:Os,Vector3:ht,SphereGeometry:gb,CylinderGeometry:mb,TubeGeometry:iI,ConeGeometry:nI,Line:iQ,LineBasicMaterial:UF,QuadraticBezierCurve3:tI,CubicBezierCurve3:zF,Box3:Ip},uP={graph:VW,forcelayout:bK},rq=2,hP=new Yi.BufferGeometry().setAttribute?"setAttribute":"addAttribute",CE=new Yi.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",sq=Lp({props:{jsonUrl:{onChange:function(e,i){var s=this;e&&!i.fetchingJson&&(i.fetchingJson=!0,i.onLoading(),fetch(e).then(function(o){return o.json()}).then(function(o){i.fetchingJson=!1,i.onFinishLoading(o),s.graphData(o)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,i){i.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,i){var s=i.d3ForceLayout.force("charge");s&&s.strength(e>2?-60:-30),e<3&&o(i.graphData.nodes,"z"),e<2&&o(i.graphData.nodes,"y");function o(l,c){l.forEach(function(d){delete d[c],delete d["v".concat(c)]})}}},dagMode:{onChange:function(e,i){!e&&i.forceEngine==="d3"&&(i.graphData.nodes||[]).forEach(function(s){return s.fx=s.fy=s.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,i){i.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,i){i.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,i){i.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,i,s){return s===void 0?e.d3ForceLayout.force(i):(e.d3ForceLayout.force(i,s),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var i=e.forceEngine!=="ngraph";return e.engineRunning&&s(),o(),l(),this;function s(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||i&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[i?"tick":"step"](),e.onEngineTick());var c=xi(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(y){var v=y.__threeObj;if(v){var _=i?y:e.layout.getNodePosition(y[e.nodeId]),x=c(y);(!e.nodePositionUpdate||!e.nodePositionUpdate(x?v.children[0]:v,{x:_.x,y:_.y,z:_.z},y)||x)&&(v.position.x=_.x,v.position.y=_.y||0,v.position.z=_.z||0)}});var d=xi(e.linkWidth),u=xi(e.linkCurvature),f=xi(e.linkCurveRotation),A=xi(e.linkThreeObjectExtend);e.graphData.links.forEach(function(y){var v=y.__lineObj;if(v){var _=i?y:e.layout.getLinkPosition(e.layout.graph.getLink(y.source,y.target).id),x=_[i?"source":"from"],b=_[i?"target":"to"];if(!(!x||!b||!x.hasOwnProperty("x")||!b.hasOwnProperty("x"))){g(y);var m=A(y);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(m?v.children[1]:v,{start:{x:x.x,y:x.y,z:x.z},end:{x:b.x,y:b.y,z:b.z}},y)&&!m)){var S=30,C=y.__curve,M=v.children.length?v.children[0]:v;if(M.type==="Line"){if(C)M.geometry.setFromPoints(C.getPoints(S));else{var T=M.geometry.getAttribute("position");(!T||!T.array||T.array.length!==6)&&M.geometry[hP]("position",T=new Yi.BufferAttribute(new Float32Array(2*3),3)),T.array[0]=x.x,T.array[1]=x.y||0,T.array[2]=x.z||0,T.array[3]=b.x,T.array[4]=b.y||0,T.array[5]=b.z||0,T.needsUpdate=!0}M.geometry.computeBoundingSphere()}else if(M.type==="Mesh")if(C){M.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(M.position.set(0,0,0),M.rotation.set(0,0,0),M.scale.set(1,1,1));var ne=Math.ceil(d(y)*10)/10,O=ne/2,F=new Yi.TubeGeometry(C,S,O,e.linkResolution,!1);M.geometry.dispose(),M.geometry=F}else{if(!M.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var N=Math.ceil(d(y)*10)/10,P=N/2,k=new Yi.CylinderGeometry(P,P,1,e.linkResolution,1,!1);k[CE](new Yi.Matrix4().makeTranslation(0,1/2,0)),k[CE](new Yi.Matrix4().makeRotationX(Math.PI/2)),M.geometry.dispose(),M.geometry=k}var D=new Yi.Vector3(x.x,x.y||0,x.z||0),z=new Yi.Vector3(b.x,b.y||0,b.z||0),Y=D.distanceTo(z);M.position.x=D.x,M.position.y=D.y,M.position.z=D.z,M.scale.z=Y,M.parent.localToWorld(z),M.lookAt(z)}}}}});function g(y){var v=i?y:e.layout.getLinkPosition(e.layout.graph.getLink(y.source,y.target).id),_=v[i?"source":"from"],x=v[i?"target":"to"];if(!(!_||!x||!_.hasOwnProperty("x")||!x.hasOwnProperty("x"))){var b=u(y);if(!b)y.__curve=null;else{var m=new Yi.Vector3(_.x,_.y||0,_.z||0),S=new Yi.Vector3(x.x,x.y||0,x.z||0),C=m.distanceTo(S),M,T=f(y);if(C>0){var N=x.x-_.x,P=x.y-_.y||0,k=new Yi.Vector3().subVectors(S,m),D=k.clone().multiplyScalar(b).cross(N!==0||P!==0?new Yi.Vector3(0,0,1):new Yi.Vector3(0,1,0)).applyAxisAngle(k.normalize(),T).add(new Yi.Vector3().addVectors(m,S).divideScalar(2));M=new Yi.QuadraticBezierCurve3(m,D,S)}else{var z=b*70,Y=-T,ne=Y+Math.PI/2;M=new Yi.CubicBezierCurve3(m,new Yi.Vector3(z*Math.cos(ne),z*Math.sin(ne),0).add(m),new Yi.Vector3(z*Math.cos(Y),z*Math.sin(Y),0).add(m),S)}y.__curve=M}}}}function o(){var c=xi(e.linkDirectionalArrowRelPos),d=xi(e.linkDirectionalArrowLength),u=xi(e.nodeVal);e.graphData.links.forEach(function(f){var A=f.__arrowObj;if(A){var g=i?f:e.layout.getLinkPosition(e.layout.graph.getLink(f.source,f.target).id),y=g[i?"source":"from"],v=g[i?"target":"to"];if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var _=Math.cbrt(Math.max(0,u(y)||1))*e.nodeRelSize,x=Math.cbrt(Math.max(0,u(v)||1))*e.nodeRelSize,b=d(f),m=c(f),S=f.__curve?function(k){return f.__curve.getPoint(k)}:function(k){var D=function(Y,ne,O,F){return ne[Y]+(O[Y]-ne[Y])*F||0};return{x:D("x",y,v,k),y:D("y",y,v,k),z:D("z",y,v,k)}},C=f.__curve?f.__curve.getLength():Math.sqrt(["x","y","z"].map(function(k){return Math.pow((v[k]||0)-(y[k]||0),2)}).reduce(function(k,D){return k+D},0)),M=_+b+(C-_-x-b)*m,T=S(M/C),N=S((M-b)/C);["x","y","z"].forEach(function(k){return A.position[k]=N[k]});var P=qE(Yi.Vector3,Sc(["x","y","z"].map(function(k){return T[k]})));A.parent.localToWorld(P),A.lookAt(P)}}})}function l(){var c=xi(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(d){var u=d.__photonsObj&&d.__photonsObj.children,f=d.__singleHopPhotonsObj&&d.__singleHopPhotonsObj.children;if(!((!f||!f.length)&&(!u||!u.length))){var A=i?d:e.layout.getLinkPosition(e.layout.graph.getLink(d.source,d.target).id),g=A[i?"source":"from"],y=A[i?"target":"to"];if(!(!g||!y||!g.hasOwnProperty("x")||!y.hasOwnProperty("x"))){var v=c(d),_=d.__curve?function(b){return d.__curve.getPoint(b)}:function(b){var m=function(C,M,T,N){return M[C]+(T[C]-M[C])*N||0};return{x:m("x",g,y,b),y:m("y",g,y,b),z:m("z",g,y,b)}},x=[].concat(Sc(u||[]),Sc(f||[]));x.forEach(function(b,m){var S=b.parent.__linkThreeObjType==="singleHopPhotons";if(b.hasOwnProperty("__progressRatio")||(b.__progressRatio=S?0:m/u.length),b.__progressRatio+=v,b.__progressRatio>=1)if(!S)b.__progressRatio=b.__progressRatio%1;else{b.parent.remove(b),RT(b);return}var C=b.__progressRatio,M=_(C);["x","y","z"].forEach(function(T){return b.position[T]=M[T]})})}}})}},emitParticle:function(e,i){if(i&&e.graphData.links.includes(i)){if(!i.__singleHopPhotonsObj){var s=new Yi.Group;s.__linkThreeObjType="singleHopPhotons",i.__singleHopPhotonsObj=s,e.graphScene.add(s)}var o=xi(e.linkDirectionalParticleWidth),l=Math.ceil(o(i)*10)/10/2,c=e.linkDirectionalParticleResolution,d=new Yi.SphereGeometry(l,c,c),u=xi(e.linkColor),f=xi(e.linkDirectionalParticleColor),A=f(i)||u(i)||"#f0f0f0",g=new Yi.Color(lv(A)),y=e.linkOpacity*3,v=new Yi.MeshLambertMaterial({color:g,transparent:!0,opacity:y});i.__singleHopPhotonsObj.add(new Yi.Mesh(d,v))}return this},getGraphBbox:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var s=function o(l){var c=[];if(l.geometry){l.geometry.computeBoundingBox();var d=new Yi.Box3;d.copy(l.geometry.boundingBox).applyMatrix4(l.matrixWorld),c.push(d)}return c.concat.apply(c,Sc((l.children||[]).filter(function(u){return!u.hasOwnProperty("__graphObjType")||u.__graphObjType==="node"&&i(u.__data)}).map(o)))}(e.graphScene);return s.length?Object.assign.apply(Object,Sc(["x","y","z"].map(function(o){return yI({},o,[xT(s,function(l){return l.min[o]}),yT(s,function(l){return l.max[o]})])}))):null}},stateInit:function(){return{d3ForceLayout:tk().force("link",JF()).force("charge",nk()).force("center",QF()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,i){i.graphScene=e},update:function(e,i){var s=function(Se){return Se.some(function(rt){return i.hasOwnProperty(rt)})};if(e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&s(["nodeAutoColorBy","graphData","nodeColor"])&&cP(e.graphData.nodes,xi(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&s(["linkAutoColorBy","graphData","linkColor"])&&cP(e.graphData.links,xi(e.linkAutoColorBy),e.linkColor),e._flushObjects||s(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var o=xi(e.nodeThreeObject),l=xi(e.nodeThreeObjectExtend),c=xi(e.nodeVal),d=xi(e.nodeColor),u=xi(e.nodeVisibility),f={},A={};av(e.graphData.nodes.filter(u),e.graphScene,{purge:e._flushObjects||s(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(Se){return Se.__graphObjType==="node"},createObj:function(Se){var rt=o(Se),Ge=l(Se);rt&&e.nodeThreeObject===rt&&(rt=rt.clone());var st;return rt&&!Ge?st=rt:(st=new Yi.Mesh,st.__graphDefaultObj=!0,rt&&Ge&&st.add(rt)),st.__graphObjType="node",st},updateObj:function(Se,rt){if(Se.__graphDefaultObj){var Ge=c(rt)||1,st=Math.cbrt(Ge)*e.nodeRelSize,mt=e.nodeResolution;(!Se.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||Se.geometry.parameters.radius!==st||Se.geometry.parameters.widthSegments!==mt)&&(f.hasOwnProperty(Ge)||(f[Ge]=new Yi.SphereGeometry(st,mt,mt)),Se.geometry.dispose(),Se.geometry=f[Ge]);var Ft=d(rt),Pt=new Yi.Color(lv(Ft||"#ffffaa")),nt=e.nodeOpacity*WM(Ft);(Se.material.type!=="MeshLambertMaterial"||!Se.material.color.equals(Pt)||Se.material.opacity!==nt)&&(A.hasOwnProperty(Ft)||(A[Ft]=new Yi.MeshLambertMaterial({color:Pt,transparent:!0,opacity:nt})),Se.material.dispose(),Se.material=A[Ft])}}})}if(e._flushObjects||s(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var g=xi(e.linkThreeObject),y=xi(e.linkThreeObjectExtend),v=xi(e.linkMaterial),_=xi(e.linkVisibility),x=xi(e.linkColor),b=xi(e.linkWidth),m={},S={},C={},M=e.graphData.links.filter(_);if(av(M,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||s(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(Se){return Se.__graphObjType==="link"},exitObj:function(Se){var rt=Se.__data&&Se.__data.__singleHopPhotonsObj;rt&&(rt.parent.remove(rt),RT(rt),delete Se.__data.__singleHopPhotonsObj)},createObj:function(Se){var rt=g(Se),Ge=y(Se);rt&&e.linkThreeObject===rt&&(rt=rt.clone());var st;if(!rt||Ge){var mt=!!b(Se);if(mt)st=new Yi.Mesh;else{var Ft=new Yi.BufferGeometry;Ft[hP]("position",new Yi.BufferAttribute(new Float32Array(2*3),3)),st=new Yi.Line(Ft)}}var Pt;return rt?Ge?(Pt=new Yi.Group,Pt.__graphDefaultObj=!0,Pt.add(st),Pt.add(rt)):Pt=rt:(Pt=st,Pt.__graphDefaultObj=!0),Pt.renderOrder=10,Pt.__graphObjType="link",Pt},updateObj:function(Se,rt){if(Se.__graphDefaultObj){var Ge=Se.children.length?Se.children[0]:Se,st=Math.ceil(b(rt)*10)/10,mt=!!st;if(mt){var Ft=st/2,Pt=e.linkResolution;if(!Ge.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||Ge.geometry.parameters.radiusTop!==Ft||Ge.geometry.parameters.radialSegments!==Pt){if(!m.hasOwnProperty(st)){var nt=new Yi.CylinderGeometry(Ft,Ft,1,Pt,1,!1);nt[CE](new Yi.Matrix4().makeTranslation(0,1/2,0)),nt[CE](new Yi.Matrix4().makeRotationX(Math.PI/2)),m[st]=nt}Ge.geometry.dispose(),Ge.geometry=m[st]}}var Fn=v(rt);if(Fn)Ge.material=Fn;else{var Xt=x(rt),on=new Yi.Color(lv(Xt||"#f0f0f0")),nn=e.linkOpacity*WM(Xt),vn=mt?"MeshLambertMaterial":"LineBasicMaterial";if(Ge.material.type!==vn||!Ge.material.color.equals(on)||Ge.material.opacity!==nn){var Rn=mt?S:C;Rn.hasOwnProperty(Xt)||(Rn[Xt]=new Yi[vn]({color:on,transparent:nn<1,opacity:nn,depthWrite:nn>=1})),Ge.material.dispose(),Ge.material=Rn[Xt]}}}}}),e.linkDirectionalArrowLength||i.hasOwnProperty("linkDirectionalArrowLength")){var T=xi(e.linkDirectionalArrowLength),N=xi(e.linkDirectionalArrowColor);av(M.filter(T),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(Se){return Se.__linkThreeObjType==="arrow"},createObj:function(){var Se=new Yi.Mesh(void 0,new Yi.MeshLambertMaterial({transparent:!0}));return Se.__linkThreeObjType="arrow",Se},updateObj:function(Se,rt){var Ge=T(rt),st=e.linkDirectionalArrowResolution;if(!Se.geometry.type.match(/^Cone(Buffer)?Geometry$/)||Se.geometry.parameters.height!==Ge||Se.geometry.parameters.radialSegments!==st){var mt=new Yi.ConeGeometry(Ge*.25,Ge,st);mt.translate(0,Ge/2,0),mt.rotateX(Math.PI/2),Se.geometry.dispose(),Se.geometry=mt}var Ft=N(rt)||x(rt)||"#f0f0f0";Se.material.color=new Yi.Color(lv(Ft)),Se.material.opacity=e.linkOpacity*3*WM(Ft)}})}if(e.linkDirectionalParticles||i.hasOwnProperty("linkDirectionalParticles")){var P=xi(e.linkDirectionalParticles),k=xi(e.linkDirectionalParticleWidth),D=xi(e.linkDirectionalParticleColor),z={},Y={};av(M.filter(P),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(Se){return Se.__linkThreeObjType==="photons"},createObj:function(){var Se=new Yi.Group;return Se.__linkThreeObjType="photons",Se},updateObj:function(Se,rt){var Ge=Math.round(Math.abs(P(rt))),st=!!Se.children.length&&Se.children[0],mt=Math.ceil(k(rt)*10)/10/2,Ft=e.linkDirectionalParticleResolution,Pt;st&&st.geometry.parameters.radius===mt&&st.geometry.parameters.widthSegments===Ft?Pt=st.geometry:(Y.hasOwnProperty(mt)||(Y[mt]=new Yi.SphereGeometry(mt,Ft,Ft)),Pt=Y[mt],st&&st.geometry.dispose());var nt=D(rt)||x(rt)||"#f0f0f0",Fn=new Yi.Color(lv(nt)),Xt=e.linkOpacity*3,on;st&&st.material.color.equals(Fn)&&st.material.opacity===Xt?on=st.material:(z.hasOwnProperty(nt)||(z[nt]=new Yi.MeshLambertMaterial({color:Fn,transparent:!0,opacity:Xt})),on=z[nt],st&&st.material.dispose()),av(Sc(new Array(Ge)).map(function(nn,vn){return{idx:vn}}),Se,{idAccessor:function(vn){return vn.idx},createObj:function(){return new Yi.Mesh(Pt,on)},updateObj:function(vn){vn.geometry=Pt,vn.material=on}})}})}}if(e._flushObjects=!1,s(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(Be){Be.source=Be[e.linkSource],Be.target=Be[e.linkTarget]});var ne=e.forceEngine!=="ngraph",O;if(ne){(O=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var F=e.d3ForceLayout.force("link");F&&F.id(function(Be){return Be[e.nodeId]}).links(e.graphData.links);var U=e.dagMode&&iq(e.graphData,function(Be){return Be[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),G=Math.max.apply(Math,Sc(Object.values(U||[]))),V=e.dagLevelDistance||e.graphData.nodes.length/(G||1)*rq*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(e.dagMode){var K=function(Se,rt){return function(Ge){return Se?(U[Ge[e.nodeId]]-G/2)*V*(rt?-1:1):void 0}},W=K(["lr","rl"].indexOf(e.dagMode)!==-1,e.dagMode==="rl"),J=K(["td","bu"].indexOf(e.dagMode)!==-1,e.dagMode==="td"),ee=K(["zin","zout"].indexOf(e.dagMode)!==-1,e.dagMode==="zout");e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(Be){Be.fx=W(Be),Be.fy=J(Be),Be.fz=ee(Be)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?ik(function(Be){var Se=U[Be[e.nodeId]]||-1;return(e.dagMode==="radialin"?G-Se:Se)*V}).strength(function(Be){return e.dagNodeFilter(Be)?1:0}):null)}else{var he=uP.graph();e.graphData.nodes.forEach(function(Be){he.addNode(Be[e.nodeId])}),e.graphData.links.forEach(function(Be){he.addLink(Be.source,Be.target)}),O=uP.forcelayout(he,Fk({dimensions:e.numDimensions},e.ngraphPhysics)),O.graph=he}for(var me=0;me<e.warmupTicks&&!(ne&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);me++)O[ne?"tick":"step"]();e.layout=O,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function oq(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=function(o){HY(c,o);var l=WY(c);function c(){var d;GY(this,c);for(var u=arguments.length,f=new Array(u),A=0;A<u;A++)f[A]=arguments[A];return d=l.call.apply(l,[this].concat(f)),d.__kapsuleInstance=n().apply(void 0,[].concat(Sc(i?[Nk(d)]:[]),f)),d}return zY(c)}(e);return Object.keys(n()).forEach(function(o){return s.prototype[o]=function(){var l,c=(l=this.__kapsuleInstance)[o].apply(l,arguments);return c===this.__kapsuleInstance?this:c}}),s}var aq=window.THREE?window.THREE:{Group:Tg},xI=oq(sq,aq.Group,!0);const lq=Object.freeze(Object.defineProperty({__proto__:null,default:xI},Symbol.toStringTag,{value:"Module"})),cq=YT(lq);if(typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");let KM=P7;"default"in KM&&(KM=KM.default);let fp=cq;"default"in fp&&(fp=fp.default);const XM=function(n){return typeof n=="string"?JSON.parse(n):n},wc=function(n){if(typeof n=="function")return n;const e=eval;try{return e("("+n+")")}catch{}return null},Ws=function(n){return isNaN(parseFloat(n))?wc(n)?wc(n):n:parseFloat(n)};AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:XM,default:[]},links:{parse:XM,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:wc,default:function(){return!0}},onDagError:{parse:wc,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeVal:{parse:Ws,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:Ws,default:!0},nodeColor:{parse:Ws,default:"color"},nodeAutoColorBy:{parse:Ws,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:Ws,default:null},nodeThreeObjectExtend:{parse:Ws,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkVisibility:{parse:Ws,default:!0},linkColor:{parse:Ws,default:"color"},linkAutoColorBy:{parse:Ws,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:Ws,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:Ws,default:0},linkCurveRotation:{parse:Ws,default:0},linkMaterial:{parse:Ws,default:null},linkThreeObject:{parse:Ws,default:null},linkThreeObjectExtend:{parse:Ws,default:!1},linkPositionUpdate:{parse:wc,default:null},linkDirectionalArrowLength:{parse:Ws,default:0},linkDirectionalArrowColor:{parse:Ws,default:null},linkDirectionalArrowRelPos:{parse:Ws,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:Ws,default:0},linkDirectionalParticleSpeed:{parse:Ws,default:.01},linkDirectionalParticleWidth:{parse:Ws,default:.5},linkDirectionalParticleColor:{parse:Ws,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeHover:{parse:wc,default:()=>{}},onLinkHover:{parse:wc,default:()=>{}},onNodeClick:{parse:wc,default:()=>{}},onLinkClick:{parse:wc,default:()=>{}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:XM,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:wc,default:function(){}},onEngineStop:{parse:wc,default:function(){}}},getGraphBbox:function(){return this.forceGraph||(this.forceGraph=new fp),this.forceGraph.getGraphBbox()},emitParticle:function(){this.forceGraph||(this.forceGraph=new fp);const n=this.forceGraph,e=n.emitParticle.apply(n,arguments);return e===n?this:e},d3Force:function(){this.forceGraph||(this.forceGraph=new fp);const n=this.forceGraph,e=n.d3Force.apply(n,arguments);return e===n?this:e},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){const n=this.state={};n.infoEl=document.createElement("a-text"),n.infoEl.setAttribute("position","0 -0.1 -1"),n.infoEl.setAttribute("width",1),n.infoEl.setAttribute("align","center"),n.infoEl.setAttribute("color","lavender");const e=document.querySelector("a-entity[camera], a-camera");e.appendChild(n.infoEl),n.cameraObj=e.object3D.children.filter(function(i){return i.type==="PerspectiveCamera"})[0],this.el.sceneEl.addEventListener("camera-set-active",function(i){n.cameraObj=i.detail.cameraEl.components.camera.camera}),this.forceGraph||(this.forceGraph=new fp),this.forceGraph.onFinishUpdate(()=>this.el.setObject3D("forcegraphGroup",this.forceGraph)).onLoading(()=>n.infoEl.setAttribute("value","Loading...")).onFinishLoading(()=>n.infoEl.setAttribute("value","")),this.el.addEventListener("raycaster-intersected",i=>n.hoverDetail=i.detail),this.el.addEventListener("raycaster-intersected-cleared",i=>n.hoverDetail=i.detail),this.el.addEventListener("click",()=>n.hoverObj&&this.data["on"+(n.hoverObj.__graphObjType==="node"?"Node":"Link")+"Click"](n.hoverObj.__data))},remove:function(){this.state.infoEl.remove(),this.el.removeObject3D("forcegraphGroup")},update:function(n){const e=this,i=this.data,s=AFRAME.utils.diff(i,n);["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].filter(function(l){return l in s}).forEach(function(l){e.forceGraph[l](i[l]!==""?i[l]:null)}),("nodes"in s||"links"in s)&&e.forceGraph.graphData({nodes:i.nodes,links:i.links})},tick:function(n,e){const i=this.state,s=this.data,o=i.hoverDetail?i.hoverDetail.getIntersection?i.hoverDetail.getIntersection(this.el):i.hoverDetail.intersection||void 0:void 0;let l=o?o.object:void 0;for(;l&&!l.hasOwnProperty("__graphObjType");)l=l.parent;if(l!==i.hoverObj){const c=i.hoverObj?i.hoverObj.__graphObjType:null,d=i.hoverObj?i.hoverObj.__data:null,u=l?l.__graphObjType:null,f=l?l.__data:null;c&&c!==u&&s["on"+(c==="node"?"Node":"Link")+"Hover"](null,d),u&&s["on"+(u==="node"?"Node":"Link")+"Hover"](f,c===u?d:null),i.hoverObj=l}this.forceGraph.tickFrame()}});function LT(){return LT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},LT.apply(this,arguments)}function uq(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function my(n,e){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},my(n,e)}function hq(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,my(n,e)}function BT(n){return BT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},BT(n)}function dq(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function fq(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $E(n,e,i){return fq()?$E=Reflect.construct.bind():$E=function(o,l,c){var d=[null];d.push.apply(d,l);var u=Function.bind.apply(o,d),f=new u;return c&&my(f,c.prototype),f},$E.apply(null,arguments)}function DT(n){var e=typeof Map=="function"?new Map:void 0;return DT=function(s){if(s===null||!dq(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(s))return e.get(s);e.set(s,o)}function o(){return $E(s,arguments,BT(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),my(o,s)},DT(n)}var Ig=function(n){hq(e,n);function e(i){var s;return s=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+i+" for more information.")||this,uq(s)}return e}(DT(Error));function YM(n){return Math.round(n*255)}function pq(n,e,i){return YM(n)+","+YM(e)+","+YM(i)}function dP(n,e,i,s){if(s===void 0&&(s=pq),e===0)return s(i,i,i);var o=(n%360+360)%360/60,l=(1-Math.abs(2*i-1))*e,c=l*(1-Math.abs(o%2-1)),d=0,u=0,f=0;o>=0&&o<1?(d=l,u=c):o>=1&&o<2?(d=c,u=l):o>=2&&o<3?(u=l,f=c):o>=3&&o<4?(u=c,f=l):o>=4&&o<5?(d=c,f=l):o>=5&&o<6&&(d=l,f=c);var A=i-l/2,g=d+A,y=u+A,v=f+A;return s(g,y,v)}var fP={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function mq(n){if(typeof n!="string")return n;var e=n.toLowerCase();return fP[e]?"#"+fP[e]:n}var gq=/^#[a-fA-F0-9]{6}$/,Aq=/^#[a-fA-F0-9]{8}$/,vq=/^#[a-fA-F0-9]{3}$/,yq=/^#[a-fA-F0-9]{4}$/,qM=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,xq=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Eq=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,_q=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function yb(n){if(typeof n!="string")throw new Ig(3);var e=mq(n);if(e.match(gq))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(Aq)){var i=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:i}}if(e.match(vq))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(yq)){var s=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:s}}var o=qM.exec(e);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var l=xq.exec(e.substring(0,50));if(l)return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10),alpha:parseFloat(""+l[4])>1?parseFloat(""+l[4])/100:parseFloat(""+l[4])};var c=Eq.exec(e);if(c){var d=parseInt(""+c[1],10),u=parseInt(""+c[2],10)/100,f=parseInt(""+c[3],10)/100,A="rgb("+dP(d,u,f)+")",g=qM.exec(A);if(!g)throw new Ig(4,e,A);return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10)}}var y=_q.exec(e.substring(0,50));if(y){var v=parseInt(""+y[1],10),_=parseInt(""+y[2],10)/100,x=parseInt(""+y[3],10)/100,b="rgb("+dP(v,_,x)+")",m=qM.exec(b);if(!m)throw new Ig(4,e,b);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:parseFloat(""+y[4])>1?parseFloat(""+y[4])/100:parseFloat(""+y[4])}}throw new Ig(5)}var bq=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},pP=bq;function cg(n){var e=n.toString(16);return e.length===1?"0"+e:e}function mP(n,e,i){if(typeof n=="number"&&typeof e=="number"&&typeof i=="number")return pP("#"+cg(n)+cg(e)+cg(i));if(typeof n=="object"&&e===void 0&&i===void 0)return pP("#"+cg(n.red)+cg(n.green)+cg(n.blue));throw new Ig(6)}function wq(n,e,i,s){if(typeof n=="string"&&typeof e=="number"){var o=yb(n);return"rgba("+o.red+","+o.green+","+o.blue+","+e+")"}else{if(typeof n=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number")return s>=1?mP(n,e,i):"rgba("+n+","+e+","+i+","+s+")";if(typeof n=="object"&&e===void 0&&i===void 0&&s===void 0)return n.alpha>=1?mP(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}throw new Ig(7)}function zk(n,e,i){return function(){var o=i.concat(Array.prototype.slice.call(arguments));return o.length>=e?n.apply(this,o):zk(n,e,o)}}function Cq(n){return zk(n,n.length,[])}function Mq(n,e,i){return Math.max(n,Math.min(e,i))}function Sq(n,e){if(e==="transparent")return e;var i=yb(e),s=typeof i.alpha=="number"?i.alpha:1,o=LT({},i,{alpha:Mq(0,1,(s*100+parseFloat(n)*100)/100)});return wq(o)}var Tq=Cq(Sq),Hk=Tq;function Iq(n,e){e===void 0&&(e={});var i=e.insertAt;if(!(!n||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var Rq=`.graph-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: Sans-serif;
  z-index: 1000;
}`;Iq(Rq);function Lq(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function gP(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,s)}return i}function AP(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(i),!0).forEach(function(s){Cv(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Cv(n,e,i){return e=Nq(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function $M(n,e){return Dq(n)||Lq(n,e)||Vk(n,e)||Fq()}function ME(n){return Bq(n)||Pq(n)||Vk(n)||Oq()}function Bq(n){if(Array.isArray(n))return PT(n)}function Dq(n){if(Array.isArray(n))return n}function Pq(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vk(n,e){if(n){if(typeof n=="string")return PT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return PT(n,e)}}function PT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function Oq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kq(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Nq(n){var e=kq(n,"string");return typeof e=="symbol"?e:String(e)}THREE&&THREE.MathUtils&&THREE.MathUtils.degToRad&&(THREE.Math={degToRad:THREE.MathUtils.degToRad});var Uq=Lp({props:{width:{default:window.innerWidth,triggerUpdate:!1,onChange:function(e,i){i.container&&(i.container.style.width="".concat(e,"px"))}},height:{default:window.innerHeight,triggerUpdate:!1,onChange:function(e,i){i.container&&(i.container.style.height="".concat(e,"px"))}},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},backgroundColor:{default:"#002"},showNavInfo:{default:!0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeLabel:{default:"name"},nodeDesc:{default:"desc"},onNodeHover:{},onNodeClick:{},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkLabel:{default:"name"},linkDesc:{default:"desc"},onLinkHover:{},onLinkClick:{},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:AP(AP({},Object.assign.apply(Object,[{}].concat(ME(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(n){return Cv({},n,function(e){for(var i=e.forcegraph.components.forcegraph,s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];var c=i[n].apply(i,o);return c===i?this:c})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,i){e.innerHTML="",i.container=document.createElement("div"),e.appendChild(i.container),i.container.style.position="relative",i.container.style.width="".concat(i.width,"px"),i.container.style.height="".concat(i.height,"px"),i.container.appendChild(i.navInfo=document.createElement("div")),i.navInfo.className="graph-nav-info",i.navInfo.textContent="Mouse drag: look, gamepad/arrow/wasd keys: move";var s=document.createElement("a-scene");s.setAttribute("embedded",""),s.appendChild(i.sky=document.createElement("a-sky")),i.sky.setAttribute("radius",3e3);var o;s.appendChild(o=document.createElement("a-entity")),o.setAttribute("position","0 0 300"),o.setAttribute("movement-controls","controls: gamepad; fly: true; speed: 7");var l;o.appendChild(l=document.createElement("a-entity")),l.setAttribute("camera",""),l.setAttribute("position","0 0 0"),l.setAttribute("look-controls","pointerLockEnabled: false"),l.setAttribute("wasd-controls","fly: true; acceleration: 700");var c;l.appendChild(c=document.createElement("a-text")),c.setAttribute("position","0 -0.3 -1"),c.setAttribute("width",2),c.setAttribute("align","center"),c.setAttribute("color","lavender"),c.setAttribute("value","");var d;l.appendChild(d=document.createElement("a-text")),d.setAttribute("position","0 -0.4 -1"),d.setAttribute("width",1.3),d.setAttribute("align","center"),d.setAttribute("color","lavender"),d.setAttribute("value",""),i.raycasterEls=[];var u;s.appendChild(u=document.createElement("a-entity")),u.setAttribute("cursor","rayOrigin: mouse; mouseCursorStylesEnabled: true"),u.setAttribute("raycaster","objects: [forcegraph]; interval: 100"),i.raycasterEls.push(u),["left","right"].forEach(function(f){var A;o.appendChild(A=document.createElement("a-entity")),A.setAttribute("laser-controls","hand: ".concat(f,"; model: false;")),A.setAttribute("raycaster","objects: [forcegraph]; interval: 100; lineColor: steelblue; lineOpacity: 0.85"),i.raycasterEls.push(A)}),s.appendChild(i.forcegraph=document.createElement("a-entity")),i.forcegraph.setAttribute("forcegraph",null),i.container.appendChild(s),i.forcegraph.setAttribute("forcegraph",Object.assign.apply(Object,ME(["node","link"].map(function(f){var A={node:"Node",link:"Link"}[f];return Cv({},"on".concat(A,"Hover"),function(y,v){var _=y&&xi(i["".concat(f,"Label")])(y)||"",x=y&&xi(i["".concat(f,"Desc")])(y)||"";c.setAttribute("value",_),d.setAttribute("value",x),i["on".concat(A,"Hover")]&&i["on".concat(A,"Hover")](y,v)})}))))},update:function(e,i){if(i.hasOwnProperty("backgroundColor")){var s=yb(e.backgroundColor).alpha;s===void 0&&(s=1),e.sky.setAttribute("color",Hk(1,e.backgroundColor)),e.sky.setAttribute("opacity",s)}i.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none");var o=["onNodeHover","onLinkHover","onNodeClick","onLinkClick"].some(function(d){return e[d]})||["nodeLabel","linkLabel"].some(function(d){return e[d]!=="name"})||["nodeDesc","linkDesc"].some(function(d){return e[d]!=="desc"});e.raycasterEls.forEach(function(d){return d.setAttribute("raycaster",o?"objects: [forcegraph]; interval: 100":"objects: __none__")});var l=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","onNodeClick","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","onLinkClick","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],c=Object.assign.apply(Object,[{}].concat(ME(Object.entries(e).filter(function(d){var u=$M(d,2),f=u[0],A=u[1];return i.hasOwnProperty(f)&&l.indexOf(f)!==-1&&A!==void 0&&A!==null}).map(function(d){var u=$M(d,2),f=u[0],A=u[1];return Cv({},f,A)})),ME(Object.entries(e.graphData).map(function(d){var u=$M(d,2),f=u[0],A=u[1];return Cv({},f,A)}))));e.forcegraph.setAttribute("forcegraph",c)}}),jk={exports:{}},Gq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zq=Gq,Hq=zq;function Qk(){}function Wk(){}Wk.resetWarningCache=Qk;var Vq=function(){function n(s,o,l,c,d,u){if(u!==Hq){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Wk,resetWarningCache:Qk};return i.PropTypes=i,i};jk.exports=Vq();var jq=jk.exports;const Ct=vy(jq);function Qq(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function vP(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,s)}return i}function yP(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?vP(Object(i),!0).forEach(function(s){JE(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):vP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function JE(n,e,i){return e=Jq(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function SE(n,e){return Kq(n)||Qq(n,e)||Kk(n,e)||qq()}function TE(n){return Wq(n)||Xq(n)||Kk(n)||Yq()}function Wq(n){if(Array.isArray(n))return OT(n)}function Kq(n){if(Array.isArray(n))return n}function Xq(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kk(n,e){if(n){if(typeof n=="string")return OT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return OT(n,e)}}function OT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function Yq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $q(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jq(n){var e=$q(n,"string");return typeof e=="symbol"?e:String(e)}var Zq=Lp({props:{width:{},height:{},yOffset:{default:1.5},glScale:{default:200},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},onNodeHover:{},onNodeClick:{},onLinkHover:{},onLinkClick:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:yP(yP({},Object.assign.apply(Object,[{}].concat(TE(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(n){return JE({},n,function(e){for(var i=e.forcegraph.components.forcegraph,s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];var c=i[n].apply(i,o);return c===i?this:c})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.markerAttrs,l=o===void 0?{preset:"hiro"}:o;e.innerHTML="",i.container=document.createElement("div"),e.appendChild(i.container);var c=document.createElement("a-scene");c.setAttribute("embedded",""),c.setAttribute("arjs","debugUIEnabled: false;");var d=document.createElement("a-marker");Object.entries(l).forEach(function(A){var g=SE(A,2),y=g[0],v=g[1];return d.setAttribute(y,v)}),c.appendChild(d);var u;c.appendChild(u=document.createElement("a-entity")),u.setAttribute("cursor"),u.setAttribute("raycaster","objects: [forcegraph]"),i.forcegraph=document.createElement("a-entity"),i.forcegraph.setAttribute("forcegraph",null),d.appendChild(i.forcegraph);var f=document.createElement("a-entity");f.setAttribute("camera",""),c.appendChild(f),i.container.appendChild(c)},update:function(e,i){i.hasOwnProperty("width")&&e.width&&(e.container.style.width="".concat(e.width,"px")),i.hasOwnProperty("height")&&e.height&&(e.container.style.height="".concat(e.height,"px")),i.hasOwnProperty("glScale")&&e.forcegraph.setAttribute("scale",TE(new Array(3)).map(function(){return 1/e.glScale}).join(" ")),i.hasOwnProperty("yOffset")&&e.forcegraph.setAttribute("position","0 ".concat(e.yOffset," 0"));var s=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","onNodeHover","onNodeClick","onLinkHover","onLinkClick","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],o=Object.assign.apply(Object,[{}].concat(TE(Object.entries(e).filter(function(l){var c=SE(l,2),d=c[0],u=c[1];return i.hasOwnProperty(d)&&s.indexOf(d)!==-1&&u!==void 0&&u!==null}).map(function(l){var c=SE(l,2),d=c[0],u=c[1];return JE({},d,u)})),TE(Object.entries(e.graphData).map(function(l){var c=SE(l,2),d=c[0],u=c[1];return JE({},d,u)}))));e.forcegraph.setAttribute("forcegraph",o)}});const ug=new ph,wd=new jF,cv=new jn,xP=new ht,IE=new ht,JM=new ht,EP=new Os;class e$ extends Uc{constructor(e,i,s){super(),s.style.touchAction="none";let o=null,l=null;const c=[],d=this;function u(){s.addEventListener("pointermove",v),s.addEventListener("pointerdown",_),s.addEventListener("pointerup",x),s.addEventListener("pointerleave",x)}function f(){s.removeEventListener("pointermove",v),s.removeEventListener("pointerdown",_),s.removeEventListener("pointerup",x),s.removeEventListener("pointerleave",x),s.style.cursor=""}function A(){f()}function g(){return e}function y(){return wd}function v(m){if(d.enabled!==!1){if(b(m),wd.setFromCamera(cv,i),o){wd.ray.intersectPlane(ug,IE)&&o.position.copy(IE.sub(xP).applyMatrix4(EP)),d.dispatchEvent({type:"drag",object:o});return}if(m.pointerType==="mouse"||m.pointerType==="pen")if(c.length=0,wd.setFromCamera(cv,i),wd.intersectObjects(e,!0,c),c.length>0){const S=c[0].object;ug.setFromNormalAndCoplanarPoint(i.getWorldDirection(ug.normal),JM.setFromMatrixPosition(S.matrixWorld)),l!==S&&l!==null&&(d.dispatchEvent({type:"hoveroff",object:l}),s.style.cursor="auto",l=null),l!==S&&(d.dispatchEvent({type:"hoveron",object:S}),s.style.cursor="pointer",l=S)}else l!==null&&(d.dispatchEvent({type:"hoveroff",object:l}),s.style.cursor="auto",l=null)}}function _(m){d.enabled!==!1&&(b(m),c.length=0,wd.setFromCamera(cv,i),wd.intersectObjects(e,!0,c),c.length>0&&(o=d.transformGroup===!0?e[0]:c[0].object,ug.setFromNormalAndCoplanarPoint(i.getWorldDirection(ug.normal),JM.setFromMatrixPosition(o.matrixWorld)),wd.ray.intersectPlane(ug,IE)&&(EP.copy(o.parent.matrixWorld).invert(),xP.copy(IE).sub(JM.setFromMatrixPosition(o.matrixWorld))),s.style.cursor="move",d.dispatchEvent({type:"dragstart",object:o})))}function x(){d.enabled!==!1&&(o&&(d.dispatchEvent({type:"dragend",object:o}),o=null),s.style.cursor=l?"pointer":"auto")}function b(m){const S=s.getBoundingClientRect();cv.x=(m.clientX-S.left)/S.width*2-1,cv.y=-(m.clientY-S.top)/S.height*2+1}u(),this.enabled=!0,this.transformGroup=!1,this.activate=u,this.deactivate=f,this.dispose=A,this.getObjects=g,this.getRaycaster=y}}const ZM={type:"change"},eS={type:"start"},tS={type:"end"};class t$ extends Uc{constructor(e,i){super();const s=this,o={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Eu.ROTATE,MIDDLE:Eu.DOLLY,RIGHT:Eu.PAN},this.target=new ht;const l=1e-6,c=new ht;let d=1,u=o.NONE,f=o.NONE,A=0,g=0,y=0;const v=new ht,_=new jn,x=new jn,b=new ht,m=new jn,S=new jn,C=new jn,M=new jn,T=[],N={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const Ge=s.domElement.getBoundingClientRect(),st=s.domElement.ownerDocument.documentElement;s.screen.left=Ge.left+window.pageXOffset-st.clientLeft,s.screen.top=Ge.top+window.pageYOffset-st.clientTop,s.screen.width=Ge.width,s.screen.height=Ge.height};const P=function(){const Ge=new jn;return function(mt,Ft){return Ge.set((mt-s.screen.left)/s.screen.width,(Ft-s.screen.top)/s.screen.height),Ge}}(),k=function(){const Ge=new jn;return function(mt,Ft){return Ge.set((mt-s.screen.width*.5-s.screen.left)/(s.screen.width*.5),(s.screen.height+2*(s.screen.top-Ft))/s.screen.width),Ge}}();this.rotateCamera=function(){const Ge=new ht,st=new Nc,mt=new ht,Ft=new ht,Pt=new ht,nt=new ht;return function(){nt.set(x.x-_.x,x.y-_.y,0);let Xt=nt.length();Xt?(v.copy(s.object.position).sub(s.target),mt.copy(v).normalize(),Ft.copy(s.object.up).normalize(),Pt.crossVectors(Ft,mt).normalize(),Ft.setLength(x.y-_.y),Pt.setLength(x.x-_.x),nt.copy(Ft.add(Pt)),Ge.crossVectors(nt,v).normalize(),Xt*=s.rotateSpeed,st.setFromAxisAngle(Ge,Xt),v.applyQuaternion(st),s.object.up.applyQuaternion(st),b.copy(Ge),y=Xt):!s.staticMoving&&y&&(y*=Math.sqrt(1-s.dynamicDampingFactor),v.copy(s.object.position).sub(s.target),st.setFromAxisAngle(b,y),v.applyQuaternion(st),s.object.up.applyQuaternion(st)),_.copy(x)}}(),this.zoomCamera=function(){let Ge;u===o.TOUCH_ZOOM_PAN?(Ge=A/g,A=g,s.object.isPerspectiveCamera?v.multiplyScalar(Ge):s.object.isOrthographicCamera?(s.object.zoom=pT.clamp(s.object.zoom/Ge,s.minZoom,s.maxZoom),d!==s.object.zoom&&s.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(Ge=1+(S.y-m.y)*s.zoomSpeed,Ge!==1&&Ge>0&&(s.object.isPerspectiveCamera?v.multiplyScalar(Ge):s.object.isOrthographicCamera?(s.object.zoom=pT.clamp(s.object.zoom/Ge,s.minZoom,s.maxZoom),d!==s.object.zoom&&s.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),s.staticMoving?m.copy(S):m.y+=(S.y-m.y)*this.dynamicDampingFactor)},this.panCamera=function(){const Ge=new jn,st=new ht,mt=new ht;return function(){if(Ge.copy(M).sub(C),Ge.lengthSq()){if(s.object.isOrthographicCamera){const Pt=(s.object.right-s.object.left)/s.object.zoom/s.domElement.clientWidth,nt=(s.object.top-s.object.bottom)/s.object.zoom/s.domElement.clientWidth;Ge.x*=Pt,Ge.y*=nt}Ge.multiplyScalar(v.length()*s.panSpeed),mt.copy(v).cross(s.object.up).setLength(Ge.x),mt.add(st.copy(s.object.up).setLength(Ge.y)),s.object.position.add(mt),s.target.add(mt),s.staticMoving?C.copy(M):C.add(Ge.subVectors(M,C).multiplyScalar(s.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!s.noZoom||!s.noPan)&&(v.lengthSq()>s.maxDistance*s.maxDistance&&(s.object.position.addVectors(s.target,v.setLength(s.maxDistance)),m.copy(S)),v.lengthSq()<s.minDistance*s.minDistance&&(s.object.position.addVectors(s.target,v.setLength(s.minDistance)),m.copy(S)))},this.update=function(){v.subVectors(s.object.position,s.target),s.noRotate||s.rotateCamera(),s.noZoom||s.zoomCamera(),s.noPan||s.panCamera(),s.object.position.addVectors(s.target,v),s.object.isPerspectiveCamera?(s.checkDistances(),s.object.lookAt(s.target),c.distanceToSquared(s.object.position)>l&&(s.dispatchEvent(ZM),c.copy(s.object.position))):s.object.isOrthographicCamera?(s.object.lookAt(s.target),(c.distanceToSquared(s.object.position)>l||d!==s.object.zoom)&&(s.dispatchEvent(ZM),c.copy(s.object.position),d=s.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){u=o.NONE,f=o.NONE,s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.up.copy(s.up0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),v.subVectors(s.object.position,s.target),s.object.lookAt(s.target),s.dispatchEvent(ZM),c.copy(s.object.position),d=s.object.zoom};function D(Ge){s.enabled!==!1&&(T.length===0&&(s.domElement.setPointerCapture(Ge.pointerId),s.domElement.addEventListener("pointermove",z),s.domElement.addEventListener("pointerup",Y)),me(Ge),Ge.pointerType==="touch"?W(Ge):U(Ge))}function z(Ge){s.enabled!==!1&&(Ge.pointerType==="touch"?J(Ge):G(Ge))}function Y(Ge){s.enabled!==!1&&(Ge.pointerType==="touch"?ee(Ge):V(),Be(Ge),T.length===0&&(s.domElement.releasePointerCapture(Ge.pointerId),s.domElement.removeEventListener("pointermove",z),s.domElement.removeEventListener("pointerup",Y)))}function ne(Ge){Be(Ge)}function O(Ge){s.enabled!==!1&&(window.removeEventListener("keydown",O),f===o.NONE&&(Ge.code===s.keys[o.ROTATE]&&!s.noRotate?f=o.ROTATE:Ge.code===s.keys[o.ZOOM]&&!s.noZoom?f=o.ZOOM:Ge.code===s.keys[o.PAN]&&!s.noPan&&(f=o.PAN)))}function F(){s.enabled!==!1&&(f=o.NONE,window.addEventListener("keydown",O))}function U(Ge){if(u===o.NONE)switch(Ge.button){case s.mouseButtons.LEFT:u=o.ROTATE;break;case s.mouseButtons.MIDDLE:u=o.ZOOM;break;case s.mouseButtons.RIGHT:u=o.PAN;break}const st=f!==o.NONE?f:u;st===o.ROTATE&&!s.noRotate?(x.copy(k(Ge.pageX,Ge.pageY)),_.copy(x)):st===o.ZOOM&&!s.noZoom?(m.copy(P(Ge.pageX,Ge.pageY)),S.copy(m)):st===o.PAN&&!s.noPan&&(C.copy(P(Ge.pageX,Ge.pageY)),M.copy(C)),s.dispatchEvent(eS)}function G(Ge){const st=f!==o.NONE?f:u;st===o.ROTATE&&!s.noRotate?(_.copy(x),x.copy(k(Ge.pageX,Ge.pageY))):st===o.ZOOM&&!s.noZoom?S.copy(P(Ge.pageX,Ge.pageY)):st===o.PAN&&!s.noPan&&M.copy(P(Ge.pageX,Ge.pageY))}function V(){u=o.NONE,s.dispatchEvent(tS)}function K(Ge){if(s.enabled!==!1&&s.noZoom!==!0){switch(Ge.preventDefault(),Ge.deltaMode){case 2:m.y-=Ge.deltaY*.025;break;case 1:m.y-=Ge.deltaY*.01;break;default:m.y-=Ge.deltaY*25e-5;break}s.dispatchEvent(eS),s.dispatchEvent(tS)}}function W(Ge){switch(Se(Ge),T.length){case 1:u=o.TOUCH_ROTATE,x.copy(k(T[0].pageX,T[0].pageY)),_.copy(x);break;default:u=o.TOUCH_ZOOM_PAN;const st=T[0].pageX-T[1].pageX,mt=T[0].pageY-T[1].pageY;g=A=Math.sqrt(st*st+mt*mt);const Ft=(T[0].pageX+T[1].pageX)/2,Pt=(T[0].pageY+T[1].pageY)/2;C.copy(P(Ft,Pt)),M.copy(C);break}s.dispatchEvent(eS)}function J(Ge){switch(Se(Ge),T.length){case 1:_.copy(x),x.copy(k(Ge.pageX,Ge.pageY));break;default:const st=rt(Ge),mt=Ge.pageX-st.x,Ft=Ge.pageY-st.y;g=Math.sqrt(mt*mt+Ft*Ft);const Pt=(Ge.pageX+st.x)/2,nt=(Ge.pageY+st.y)/2;M.copy(P(Pt,nt));break}}function ee(Ge){switch(T.length){case 0:u=o.NONE;break;case 1:u=o.TOUCH_ROTATE,x.copy(k(Ge.pageX,Ge.pageY)),_.copy(x);break;case 2:u=o.TOUCH_ZOOM_PAN;for(let st=0;st<T.length;st++)if(T[st].pointerId!==Ge.pointerId){const mt=N[T[st].pointerId];x.copy(k(mt.x,mt.y)),_.copy(x);break}break}s.dispatchEvent(tS)}function he(Ge){s.enabled!==!1&&Ge.preventDefault()}function me(Ge){T.push(Ge)}function Be(Ge){delete N[Ge.pointerId];for(let st=0;st<T.length;st++)if(T[st].pointerId==Ge.pointerId){T.splice(st,1);return}}function Se(Ge){let st=N[Ge.pointerId];st===void 0&&(st=new jn,N[Ge.pointerId]=st),st.set(Ge.pageX,Ge.pageY)}function rt(Ge){const st=Ge.pointerId===T[0].pointerId?T[1]:T[0];return N[st.pointerId]}this.dispose=function(){s.domElement.removeEventListener("contextmenu",he),s.domElement.removeEventListener("pointerdown",D),s.domElement.removeEventListener("pointercancel",ne),s.domElement.removeEventListener("wheel",K),s.domElement.removeEventListener("pointermove",z),s.domElement.removeEventListener("pointerup",Y),window.removeEventListener("keydown",O),window.removeEventListener("keyup",F)},this.domElement.addEventListener("contextmenu",he),this.domElement.addEventListener("pointerdown",D),this.domElement.addEventListener("pointercancel",ne),this.domElement.addEventListener("wheel",K,{passive:!1}),window.addEventListener("keydown",O),window.addEventListener("keyup",F),this.handleResize(),this.update()}}const _P={type:"change"},nS={type:"start"},bP={type:"end"},RE=new db,wP=new ph,n$=Math.cos(70*pT.DEG2RAD);class i$ extends Uc{constructor(e,i){super(),this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ht,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Eu.ROTATE,MIDDLE:Eu.DOLLY,RIGHT:Eu.PAN},this.touches={ONE:Hm.ROTATE,TWO:Hm.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ae){Ae.addEventListener("keydown",we),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",we),this._domElementKeyEvents=null},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(_P),s.update(),l=o.NONE},this.update=function(){const Ae=new ht,Xe=new Nc().setFromUnitVectors(e.up,new ht(0,1,0)),dt=Xe.clone().invert(),ue=new ht,q=new Nc,re=new ht,ke=2*Math.PI;return function(qe=null){const Qe=s.object.position;Ae.copy(Qe).sub(s.target),Ae.applyQuaternion(Xe),d.setFromVector3(Ae),s.autoRotate&&l===o.NONE&&Y(D(qe)),s.enableDamping?(d.theta+=u.theta*s.dampingFactor,d.phi+=u.phi*s.dampingFactor):(d.theta+=u.theta,d.phi+=u.phi);let It=s.minAzimuthAngle,Ot=s.maxAzimuthAngle;isFinite(It)&&isFinite(Ot)&&(It<-Math.PI?It+=ke:It>Math.PI&&(It-=ke),Ot<-Math.PI?Ot+=ke:Ot>Math.PI&&(Ot-=ke),It<=Ot?d.theta=Math.max(It,Math.min(Ot,d.theta)):d.theta=d.theta>(It+Ot)/2?Math.max(It,d.theta):Math.min(Ot,d.theta)),d.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,d.phi)),d.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(A,s.dampingFactor):s.target.add(A),s.zoomToCursor&&N||s.object.isOrthographicCamera?d.radius=W(d.radius):d.radius=W(d.radius*f),Ae.setFromSpherical(d),Ae.applyQuaternion(dt),Qe.copy(s.target).add(Ae),s.object.lookAt(s.target),s.enableDamping===!0?(u.theta*=1-s.dampingFactor,u.phi*=1-s.dampingFactor,A.multiplyScalar(1-s.dampingFactor)):(u.set(0,0,0),A.set(0,0,0));let Jt=!1;if(s.zoomToCursor&&N){let dn=null;if(s.object.isPerspectiveCamera){const Sn=Ae.length();dn=W(Sn*f);const er=Sn-dn;s.object.position.addScaledVector(M,er),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Sn=new ht(T.x,T.y,0);Sn.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/f)),s.object.updateProjectionMatrix(),Jt=!0;const er=new ht(T.x,T.y,0);er.unproject(s.object),s.object.position.sub(er).add(Sn),s.object.updateMatrixWorld(),dn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;dn!==null&&(this.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(dn).add(s.object.position):(RE.origin.copy(s.object.position),RE.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(RE.direction))<n$?e.lookAt(s.target):(wP.setFromNormalAndCoplanarPoint(s.object.up,s.target),RE.intersectPlane(wP,s.target))))}else s.object.isOrthographicCamera&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/f)),s.object.updateProjectionMatrix(),Jt=!0);return f=1,N=!1,Jt||ue.distanceToSquared(s.object.position)>c||8*(1-q.dot(s.object.quaternion))>c||re.distanceToSquared(s.target)>0?(s.dispatchEvent(_P),ue.copy(s.object.position),q.copy(s.object.quaternion),re.copy(s.target),Jt=!1,!0):!1}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",Pe),s.domElement.removeEventListener("pointerdown",Rn),s.domElement.removeEventListener("pointercancel",Wn),s.domElement.removeEventListener("wheel",Je),s.domElement.removeEventListener("pointermove",zn),s.domElement.removeEventListener("pointerup",Wn),s._domElementKeyEvents!==null&&(s._domElementKeyEvents.removeEventListener("keydown",we),s._domElementKeyEvents=null)};const s=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const c=1e-6,d=new AT,u=new AT;let f=1;const A=new ht,g=new jn,y=new jn,v=new jn,_=new jn,x=new jn,b=new jn,m=new jn,S=new jn,C=new jn,M=new ht,T=new jn;let N=!1;const P=[],k={};function D(Ae){return Ae!==null?2*Math.PI/60*s.autoRotateSpeed*Ae:2*Math.PI/60/60*s.autoRotateSpeed}function z(){return Math.pow(.95,s.zoomSpeed)}function Y(Ae){u.theta-=Ae}function ne(Ae){u.phi-=Ae}const O=function(){const Ae=new ht;return function(dt,ue){Ae.setFromMatrixColumn(ue,0),Ae.multiplyScalar(-dt),A.add(Ae)}}(),F=function(){const Ae=new ht;return function(dt,ue){s.screenSpacePanning===!0?Ae.setFromMatrixColumn(ue,1):(Ae.setFromMatrixColumn(ue,0),Ae.crossVectors(s.object.up,Ae)),Ae.multiplyScalar(dt),A.add(Ae)}}(),U=function(){const Ae=new ht;return function(dt,ue){const q=s.domElement;if(s.object.isPerspectiveCamera){const re=s.object.position;Ae.copy(re).sub(s.target);let ke=Ae.length();ke*=Math.tan(s.object.fov/2*Math.PI/180),O(2*dt*ke/q.clientHeight,s.object.matrix),F(2*ue*ke/q.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(O(dt*(s.object.right-s.object.left)/s.object.zoom/q.clientWidth,s.object.matrix),F(ue*(s.object.top-s.object.bottom)/s.object.zoom/q.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function G(Ae){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?f/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function V(Ae){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?f*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function K(Ae){if(!s.zoomToCursor)return;N=!0;const Xe=s.domElement.getBoundingClientRect(),dt=Ae.clientX-Xe.left,ue=Ae.clientY-Xe.top,q=Xe.width,re=Xe.height;T.x=dt/q*2-1,T.y=-(ue/re)*2+1,M.set(T.x,T.y,1).unproject(s.object).sub(s.object.position).normalize()}function W(Ae){return Math.max(s.minDistance,Math.min(s.maxDistance,Ae))}function J(Ae){g.set(Ae.clientX,Ae.clientY)}function ee(Ae){K(Ae),m.set(Ae.clientX,Ae.clientY)}function he(Ae){_.set(Ae.clientX,Ae.clientY)}function me(Ae){y.set(Ae.clientX,Ae.clientY),v.subVectors(y,g).multiplyScalar(s.rotateSpeed);const Xe=s.domElement;Y(2*Math.PI*v.x/Xe.clientHeight),ne(2*Math.PI*v.y/Xe.clientHeight),g.copy(y),s.update()}function Be(Ae){S.set(Ae.clientX,Ae.clientY),C.subVectors(S,m),C.y>0?G(z()):C.y<0&&V(z()),m.copy(S),s.update()}function Se(Ae){x.set(Ae.clientX,Ae.clientY),b.subVectors(x,_).multiplyScalar(s.panSpeed),U(b.x,b.y),_.copy(x),s.update()}function rt(Ae){K(Ae),Ae.deltaY<0?V(z()):Ae.deltaY>0&&G(z()),s.update()}function Ge(Ae){let Xe=!1;switch(Ae.code){case s.keys.UP:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?ne(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):U(0,s.keyPanSpeed),Xe=!0;break;case s.keys.BOTTOM:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?ne(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):U(0,-s.keyPanSpeed),Xe=!0;break;case s.keys.LEFT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?Y(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):U(s.keyPanSpeed,0),Xe=!0;break;case s.keys.RIGHT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?Y(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):U(-s.keyPanSpeed,0),Xe=!0;break}Xe&&(Ae.preventDefault(),s.update())}function st(){if(P.length===1)g.set(P[0].pageX,P[0].pageY);else{const Ae=.5*(P[0].pageX+P[1].pageX),Xe=.5*(P[0].pageY+P[1].pageY);g.set(Ae,Xe)}}function mt(){if(P.length===1)_.set(P[0].pageX,P[0].pageY);else{const Ae=.5*(P[0].pageX+P[1].pageX),Xe=.5*(P[0].pageY+P[1].pageY);_.set(Ae,Xe)}}function Ft(){const Ae=P[0].pageX-P[1].pageX,Xe=P[0].pageY-P[1].pageY,dt=Math.sqrt(Ae*Ae+Xe*Xe);m.set(0,dt)}function Pt(){s.enableZoom&&Ft(),s.enablePan&&mt()}function nt(){s.enableZoom&&Ft(),s.enableRotate&&st()}function Fn(Ae){if(P.length==1)y.set(Ae.pageX,Ae.pageY);else{const dt=Ue(Ae),ue=.5*(Ae.pageX+dt.x),q=.5*(Ae.pageY+dt.y);y.set(ue,q)}v.subVectors(y,g).multiplyScalar(s.rotateSpeed);const Xe=s.domElement;Y(2*Math.PI*v.x/Xe.clientHeight),ne(2*Math.PI*v.y/Xe.clientHeight),g.copy(y)}function Xt(Ae){if(P.length===1)x.set(Ae.pageX,Ae.pageY);else{const Xe=Ue(Ae),dt=.5*(Ae.pageX+Xe.x),ue=.5*(Ae.pageY+Xe.y);x.set(dt,ue)}b.subVectors(x,_).multiplyScalar(s.panSpeed),U(b.x,b.y),_.copy(x)}function on(Ae){const Xe=Ue(Ae),dt=Ae.pageX-Xe.x,ue=Ae.pageY-Xe.y,q=Math.sqrt(dt*dt+ue*ue);S.set(0,q),C.set(0,Math.pow(S.y/m.y,s.zoomSpeed)),G(C.y),m.copy(S)}function nn(Ae){s.enableZoom&&on(Ae),s.enablePan&&Xt(Ae)}function vn(Ae){s.enableZoom&&on(Ae),s.enableRotate&&Fn(Ae)}function Rn(Ae){s.enabled!==!1&&(P.length===0&&(s.domElement.setPointerCapture(Ae.pointerId),s.domElement.addEventListener("pointermove",zn),s.domElement.addEventListener("pointerup",Wn)),Te(Ae),Ae.pointerType==="touch"?ge(Ae):Ai(Ae))}function zn(Ae){s.enabled!==!1&&(Ae.pointerType==="touch"?_e(Ae):Ti(Ae))}function Wn(Ae){He(Ae),P.length===0&&(s.domElement.releasePointerCapture(Ae.pointerId),s.domElement.removeEventListener("pointermove",zn),s.domElement.removeEventListener("pointerup",Wn)),s.dispatchEvent(bP),l=o.NONE}function Ai(Ae){let Xe;switch(Ae.button){case 0:Xe=s.mouseButtons.LEFT;break;case 1:Xe=s.mouseButtons.MIDDLE;break;case 2:Xe=s.mouseButtons.RIGHT;break;default:Xe=-1}switch(Xe){case Eu.DOLLY:if(s.enableZoom===!1)return;ee(Ae),l=o.DOLLY;break;case Eu.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(s.enablePan===!1)return;he(Ae),l=o.PAN}else{if(s.enableRotate===!1)return;J(Ae),l=o.ROTATE}break;case Eu.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(s.enableRotate===!1)return;J(Ae),l=o.ROTATE}else{if(s.enablePan===!1)return;he(Ae),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&s.dispatchEvent(nS)}function Ti(Ae){switch(l){case o.ROTATE:if(s.enableRotate===!1)return;me(Ae);break;case o.DOLLY:if(s.enableZoom===!1)return;Be(Ae);break;case o.PAN:if(s.enablePan===!1)return;Se(Ae);break}}function Je(Ae){s.enabled===!1||s.enableZoom===!1||l!==o.NONE||(Ae.preventDefault(),s.dispatchEvent(nS),rt(Ae),s.dispatchEvent(bP))}function we(Ae){s.enabled===!1||s.enablePan===!1||Ge(Ae)}function ge(Ae){switch(Fe(Ae),P.length){case 1:switch(s.touches.ONE){case Hm.ROTATE:if(s.enableRotate===!1)return;st(),l=o.TOUCH_ROTATE;break;case Hm.PAN:if(s.enablePan===!1)return;mt(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(s.touches.TWO){case Hm.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Pt(),l=o.TOUCH_DOLLY_PAN;break;case Hm.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;nt(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&s.dispatchEvent(nS)}function _e(Ae){switch(Fe(Ae),l){case o.TOUCH_ROTATE:if(s.enableRotate===!1)return;Fn(Ae),s.update();break;case o.TOUCH_PAN:if(s.enablePan===!1)return;Xt(Ae),s.update();break;case o.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;nn(Ae),s.update();break;case o.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;vn(Ae),s.update();break;default:l=o.NONE}}function Pe(Ae){s.enabled!==!1&&Ae.preventDefault()}function Te(Ae){P.push(Ae)}function He(Ae){delete k[Ae.pointerId];for(let Xe=0;Xe<P.length;Xe++)if(P[Xe].pointerId==Ae.pointerId){P.splice(Xe,1);return}}function Fe(Ae){let Xe=k[Ae.pointerId];Xe===void 0&&(Xe=new jn,k[Ae.pointerId]=Xe),Xe.set(Ae.pageX,Ae.pageY)}function Ue(Ae){const Xe=Ae.pointerId===P[0].pointerId?P[1]:P[0];return k[Xe.pointerId]}s.domElement.addEventListener("contextmenu",Pe),s.domElement.addEventListener("pointerdown",Rn),s.domElement.addEventListener("pointercancel",Wn),s.domElement.addEventListener("wheel",Je,{passive:!1}),this.update()}}const r$={type:"change"};class s$ extends Uc{constructor(e,i){super(),this.object=e,this.domElement=i,this.enabled=!0,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const s=this,o=1e-6,l=new Nc,c=new ht;this.tmpQuaternion=new Nc,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new ht(0,0,0),this.rotationVector=new ht(0,0,0),this.keydown=function(v){if(!(v.altKey||this.enabled===!1)){switch(v.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(v){if(this.enabled!==!1){switch(v.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}},this.pointerdown=function(v){if(this.enabled!==!1)if(this.dragToLook)this.status++;else{switch(v.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(v){if(this.enabled!==!1&&(!this.dragToLook||this.status>0)){const _=this.getContainerDimensions(),x=_.size[0]/2,b=_.size[1]/2;this.moveState.yawLeft=-(v.pageX-_.offset[0]-x)/x,this.moveState.pitchDown=(v.pageY-_.offset[1]-b)/b,this.updateRotationVector()}},this.pointerup=function(v){if(this.enabled!==!1){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(v.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}},this.contextMenu=function(v){this.enabled!==!1&&v.preventDefault()},this.update=function(v){if(this.enabled===!1)return;const _=v*s.movementSpeed,x=v*s.rollSpeed;s.object.translateX(s.moveVector.x*_),s.object.translateY(s.moveVector.y*_),s.object.translateZ(s.moveVector.z*_),s.tmpQuaternion.set(s.rotationVector.x*x,s.rotationVector.y*x,s.rotationVector.z*x,1).normalize(),s.object.quaternion.multiply(s.tmpQuaternion),(c.distanceToSquared(s.object.position)>o||8*(1-l.dot(s.object.quaternion))>o)&&(s.dispatchEvent(r$),l.copy(s.object.quaternion),c.copy(s.object.position))},this.updateMovementVector=function(){const v=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-v+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",d),this.domElement.removeEventListener("pointerdown",f),this.domElement.removeEventListener("pointermove",u),this.domElement.removeEventListener("pointerup",A),window.removeEventListener("keydown",g),window.removeEventListener("keyup",y)};const d=this.contextMenu.bind(this),u=this.pointermove.bind(this),f=this.pointerdown.bind(this),A=this.pointerup.bind(this),g=this.keydown.bind(this),y=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",d),this.domElement.addEventListener("pointerdown",f),this.domElement.addEventListener("pointermove",u),this.domElement.addEventListener("pointerup",A),window.addEventListener("keydown",g),window.addEventListener("keyup",y),this.updateMovementVector(),this.updateRotationVector()}}const o$={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class xb{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const a$=new J3(-1,1,1,-1,0,1),EI=new Za;EI.setAttribute("position",new mo([-1,3,0,-1,-1,0,3,-1,0],3));EI.setAttribute("uv",new mo([0,2,0,0,2,0],2));class l${constructor(e){this._mesh=new Dc(EI,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,a$)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class c$ extends xb{constructor(e,i){super(),this.textureID=i!==void 0?i:"tDiffuse",e instanceof Lh?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=TF.clone(e.uniforms),this.material=new Lh({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new l$(this.material)}render(e,i,s){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=s.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class CP extends xb{constructor(e,i){super(),this.scene=e,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,i,s){const o=e.getContext(),l=e.state;l.buffers.color.setMask(!1),l.buffers.depth.setMask(!1),l.buffers.color.setLocked(!0),l.buffers.depth.setLocked(!0);let c,d;this.inverse?(c=0,d=1):(c=1,d=0),l.buffers.stencil.setTest(!0),l.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.buffers.stencil.setFunc(o.ALWAYS,c,4294967295),l.buffers.stencil.setClear(d),l.buffers.stencil.setLocked(!0),e.setRenderTarget(s),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),l.buffers.color.setLocked(!1),l.buffers.depth.setLocked(!1),l.buffers.color.setMask(!0),l.buffers.depth.setMask(!0),l.buffers.stencil.setLocked(!1),l.buffers.stencil.setFunc(o.EQUAL,1,4294967295),l.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.buffers.stencil.setLocked(!0)}}class u$ extends xb{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class h${constructor(e,i){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),i===void 0){const s=e.getSize(new jn);this._width=s.width,this._height=s.height,i=new $d(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:qg}),i.texture.name="EffectComposer.rt1"}else this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new c$(o$),this.copyPass.material.blending=bh,this.clock=new VF}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,i){this.passes.splice(i,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const i=this.passes.indexOf(e);i!==-1&&this.passes.splice(i,1)}isLastEnabledPass(e){for(let i=e+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const i=this.renderer.getRenderTarget();let s=!1;for(let o=0,l=this.passes.length;o<l;o++){const c=this.passes[o];if(c.enabled!==!1){if(c.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),c.render(this.renderer,this.writeBuffer,this.readBuffer,e,s),c.needsSwap){if(s){const d=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(d.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(d.EQUAL,1,4294967295)}this.swapBuffers()}CP!==void 0&&(c instanceof CP?s=!0:c instanceof u$&&(s=!1))}}this.renderer.setRenderTarget(i)}reset(e){if(e===void 0){const i=this.renderer.getSize(new jn);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,i){this._width=e,this._height=i;const s=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(s,o),this.renderTarget2.setSize(s,o);for(let l=0;l<this.passes.length;l++)this.passes[l].setSize(s,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class d$ extends xb{constructor(e,i,s=null,o=null,l=null){super(),this.scene=e,this.camera=i,this.overrideMaterial=s,this.clearColor=o,this.clearAlpha=l,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new jr}render(e,i,s){const o=e.autoClear;e.autoClear=!1;let l,c;this.overrideMaterial!==null&&(c=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(l=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:s),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(l),this.overrideMaterial!==null&&(this.scene.overrideMaterial=c),e.autoClear=o}}var Mh=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return this.None(n)},Out:function(n){return this.None(n)},InOut:function(n){return this.None(n)}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Mh.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Mh.Bounce.In(n*2)*.5:Mh.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Mv=function(){return performance.now()},f$=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,i){e===void 0&&(e=Mv()),i===void 0&&(i=!1);var s=Object.keys(this._tweens);if(s.length===0)return!1;for(;s.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<s.length;o++){var l=this._tweens[s[o]],c=!i;l&&l.update(e,c)===!1&&!i&&delete this._tweens[s[o]]}s=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),Rg={Linear:function(n,e){var i=n.length-1,s=i*e,o=Math.floor(s),l=Rg.Utils.Linear;return e<0?l(n[0],n[1],s):e>1?l(n[i],n[i-1],i-s):l(n[o],n[o+1>i?i:o+1],s-o)},Bezier:function(n,e){for(var i=0,s=n.length-1,o=Math.pow,l=Rg.Utils.Bernstein,c=0;c<=s;c++)i+=o(1-e,s-c)*o(e,c)*n[c]*l(s,c);return i},CatmullRom:function(n,e){var i=n.length-1,s=i*e,o=Math.floor(s),l=Rg.Utils.CatmullRom;return n[0]===n[i]?(e<0&&(o=Math.floor(s=i*(1+e))),l(n[(o-1+i)%i],n[o],n[(o+1)%i],n[(o+2)%i],s-o)):e<0?n[0]-(l(n[0],n[0],n[1],n[1],-s)-n[0]):e>1?n[i]-(l(n[i],n[i],n[i-1],n[i-1],s-i)-n[i]):l(n[o?o-1:0],n[o],n[i<o+1?i:o+1],n[i<o+2?i:o+2],s-o)},Utils:{Linear:function(n,e,i){return(e-n)*i+n},Bernstein:function(n,e){var i=Rg.Utils.Factorial;return i(n)/i(e)/i(n-e)},Factorial:function(){var n=[1];return function(e){var i=1;if(n[e])return n[e];for(var s=e;s>1;s--)i*=s;return n[e]=i,i}}(),CatmullRom:function(n,e,i,s,o){var l=(i-n)*.5,c=(s-e)*.5,d=o*o,u=o*d;return(2*e-2*i+l+c)*u+(-3*e+3*i-2*l-c)*d+l*o+e}}},p$=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),FT=new f$,z_=function(){function n(e,i){i===void 0&&(i=FT),this._object=e,this._group=i,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Mh.Linear.None,this._interpolationFunction=Rg.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=p$.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,i){if(e===void 0&&(e=Mv()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var s in this._valuesStartRepeat)this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var l in this._valuesEnd)o[l]=this._valuesEnd[l];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,i,s,o,l){for(var c in s){var d=e[c],u=Array.isArray(d),f=u?"array":typeof d,A=!u&&Array.isArray(s[c]);if(!(f==="undefined"||f==="function")){if(A){var g=s[c];if(g.length===0)continue;for(var y=[d],v=0,_=g.length;v<_;v+=1){var x=this._handleRelativeValue(d,g[v]);if(isNaN(x)){A=!1,console.warn("Found invalid interpolation list. Skipping.");break}y.push(x)}A&&(s[c]=y)}if((f==="object"||u)&&d&&!A){i[c]=u?[]:{};var b=d;for(var m in b)i[c][m]=b[m];o[c]=u?[]:{};var g=s[c];if(!this._isDynamic){var S={};for(var m in g)S[m]=g[m];s[c]=g=S}this._setupProperties(b,i[c],g,o[c],l)}else(typeof i[c]>"u"||l)&&(i[c]=d),u||(i[c]*=1),A?o[c]=s[c].slice().reverse():o[c]=i[c]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return e===void 0&&(e=Mv()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},n.prototype.resume=function(e){return e===void 0&&(e=Mv()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e===void 0&&(e=FT),this._group=e,this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Mh.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Rg.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,i){if(e===void 0&&(e=Mv()),i===void 0&&(i=!0),this._isPaused)return!0;var s,o,l=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>l)return!1;i&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),o=(e-this._startTime)/this._duration,o=this._duration===0||o>1?1:o;var c=this._easingFunction(o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),o===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,u=this._chainedTweens.length;d<u;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,i,s,o){for(var l in s)if(i[l]!==void 0){var c=i[l]||0,d=s[l],u=Array.isArray(e[l]),f=Array.isArray(d),A=!u&&f;A?e[l]=this._interpolationFunction(d,o):typeof d=="object"&&d?this._updateProperties(e[l],c,d,o):(d=this._handleRelativeValue(c,d),typeof d=="number"&&(e[l]=c+(d-c)*o))}},n.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},n.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],s=this._valuesEnd[e];typeof s=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(s):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},n}(),Iu=FT;Iu.getAll.bind(Iu);Iu.removeAll.bind(Iu);Iu.add.bind(Iu);Iu.remove.bind(Iu);var Xk=Iu.update.bind(Iu);function m$(n,e){e===void 0&&(e={});var i=e.insertAt;if(!(!n||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var g$=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;m$(g$);function A$(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function v$(n,e,i){return e=M$(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function y$(n,e){return E$(n)||A$(n,e)||Yk(n,e)||w$()}function uv(n){return x$(n)||_$(n)||Yk(n)||b$()}function x$(n){if(Array.isArray(n))return kT(n)}function E$(n){if(Array.isArray(n))return n}function _$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Yk(n,e){if(n){if(typeof n=="string")return kT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kT(n,e)}}function kT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function b$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C$(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function M$(n){var e=C$(n,"string");return typeof e=="symbol"?e:String(e)}var Bs=window.THREE?window.THREE:{WebGLRenderer:FF,Scene:eQ,PerspectiveCamera:Xl,Raycaster:jF,SRGBColorSpace:ms,TextureLoader:bQ,Vector2:jn,Vector3:ht,Box3:Ip,Color:jr,Mesh:Dc,SphereGeometry:gb,MeshBasicMaterial:Y3,BackSide:La,EventDispatcher:Uc,MOUSE:Eu,Quaternion:Nc,Spherical:AT,Clock:VF},qk=Lp({props:{width:{default:window.innerWidth,onChange:function(e,i,s){isNaN(e)&&(i.width=s)}},height:{default:window.innerHeight,onChange:function(e,i,s){isNaN(e)&&(i.height=s)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,i){i.hoverObj=null,i.toolTipElem&&(i.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(e.clock.getDelta()),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(l){return l.render(e.scene,e.camera)}),e.enablePointerInteraction){var i=null;if(e.hoverDuringDrag||!e.isPointerDragging){var s=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(l){return e.hoverFilter(l.object)}).sort(function(l,c){return e.hoverOrderComparator(l.object,c.object)}),o=s.length?s[0]:null;i=o?o.object:null,e.intersectionPoint=o?o.point:null}i!==e.hoverObj&&(e.onHover(i,e.hoverObj),e.toolTipElem.innerHTML=i&&xi(e.tooltipContent)(i)||"",e.hoverObj=i)}Xk()}return this},getPointerPos:function(e){var i=e.pointerPos,s=i.x,o=i.y;return{x:s,y:o}},cameraPosition:function(e,i,s,o){var l=e.camera;if(i&&e.initialised){var c=i,d=s||{x:0,y:0,z:0};if(!o)A(c),g(d);else{var u=Object.assign({},l.position),f=y();new z_(u).to(c,o).easing(Mh.Quadratic.Out).onUpdate(A).start(),new z_(f).to(d,o/3).easing(Mh.Quadratic.Out).onUpdate(g).start()}return this}return Object.assign({},l.position,{lookAt:y()});function A(v){var _=v.x,x=v.y,b=v.z;_!==void 0&&(l.position.x=_),x!==void 0&&(l.position.y=x),b!==void 0&&(l.position.z=b)}function g(v){var _=new Bs.Vector3(v.x,v.y,v.z);e.controls.target?e.controls.target=_:l.lookAt(_)}function y(){return Object.assign(new Bs.Vector3(0,0,-1e3).applyQuaternion(l.quaternion).add(l.position))}},zoomToFit:function(e){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,l=new Array(o>3?o-3:0),c=3;c<o;c++)l[c-3]=arguments[c];return this.fitToBbox(this.getBbox.apply(this,l),i,s)},fitToBbox:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,l=e.camera;if(i){var c=new Bs.Vector3(0,0,0),d=Math.max.apply(Math,uv(Object.entries(i).map(function(v){var _=y$(v,2),x=_[0],b=_[1];return Math.max.apply(Math,uv(b.map(function(m){return Math.abs(c[x]-m)})))})))*2,u=(1-o*2/e.height)*l.fov,f=d/Math.atan(u*Math.PI/180),A=f/l.aspect,g=Math.max(f,A);if(g>0){var y=c.clone().sub(l.position).normalize().multiplyScalar(-g);this.cameraPosition(y,c,s)}}return this},getBbox:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},s=new Bs.Box3(new Bs.Vector3(0,0,0),new Bs.Vector3(0,0,0)),o=e.objects.filter(i);return o.length?(o.forEach(function(l){return s.expandByObject(l)}),Object.assign.apply(Object,uv(["x","y","z"].map(function(l){return v$({},l,[s.min[l],s.max[l]])})))):null},getScreenCoords:function(e,i,s,o){var l=new Bs.Vector3(i,s,o);return l.project(this.camera()),{x:(l.x+1)*e.width/2,y:-(l.y-1)*e.height/2}},getSceneCoords:function(e,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=new Bs.Vector2(i/e.width*2-1,-(s/e.height)*2+1),c=new Bs.Raycaster;return c.setFromCamera(l,e.camera),Object.assign({},c.ray.at(o,new Bs.Vector3))},intersectingObjects:function(e,i,s){var o=new Bs.Vector2(i/e.width*2-1,-(s/e.height)*2+1),l=new Bs.Raycaster;return l.params.Line.threshold=e.lineHoverPrecision,l.setFromCamera(o,e.camera),l.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Bs.Scene,camera:new Bs.PerspectiveCamera,clock:new Bs.Clock}},init:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.controlType,l=o===void 0?"trackball":o,c=s.rendererConfig,d=c===void 0?{}:c,u=s.extraRenderers,f=u===void 0?[]:u,A=s.waitForLoadComplete,g=A===void 0?!0:A;e.innerHTML="",e.appendChild(i.container=document.createElement("div")),i.container.className="scene-container",i.container.style.position="relative",i.container.appendChild(i.navInfo=document.createElement("div")),i.navInfo.className="scene-nav-info",i.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[l]||"",i.navInfo.style.display=i.showNavInfo?null:"none",i.toolTipElem=document.createElement("div"),i.toolTipElem.classList.add("scene-tooltip"),i.container.appendChild(i.toolTipElem),i.pointerPos=new Bs.Vector2,i.pointerPos.x=-2,i.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(y){return i.container.addEventListener(y,function(v){if(y==="pointerdown"&&(i.isPointerPressed=!0),!i.isPointerDragging&&v.type==="pointermove"&&(v.pressure>0||i.isPointerPressed)&&(v.pointerType!=="touch"||v.movementX===void 0||[v.movementX,v.movementY].some(function(b){return Math.abs(b)>1}))&&(i.isPointerDragging=!0),i.enablePointerInteraction){var _=x(i.container);i.pointerPos.x=v.pageX-_.left,i.pointerPos.y=v.pageY-_.top,i.toolTipElem.style.top="".concat(i.pointerPos.y,"px"),i.toolTipElem.style.left="".concat(i.pointerPos.x,"px"),i.toolTipElem.style.transform="translate(-".concat(i.pointerPos.x/i.width*100,"%, ").concat(i.height-i.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function x(b){var m=b.getBoundingClientRect(),S=window.pageXOffset||document.documentElement.scrollLeft,C=window.pageYOffset||document.documentElement.scrollTop;return{top:m.top+C,left:m.left+S}}},{passive:!0})}),i.container.addEventListener("pointerup",function(y){i.isPointerPressed=!1,!(i.isPointerDragging&&(i.isPointerDragging=!1,!i.clickAfterDrag))&&requestAnimationFrame(function(){y.button===0&&i.onClick(i.hoverObj||null,y,i.intersectionPoint),y.button===2&&i.onRightClick&&i.onRightClick(i.hoverObj||null,y,i.intersectionPoint)})},{passive:!0,capture:!0}),i.container.addEventListener("contextmenu",function(y){i.onRightClick&&y.preventDefault()}),i.renderer=new Bs.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},d)),i.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),i.container.appendChild(i.renderer.domElement),i.extraRenderers=f,i.extraRenderers.forEach(function(y){y.domElement.style.position="absolute",y.domElement.style.top="0px",y.domElement.style.pointerEvents="none",i.container.appendChild(y.domElement)}),i.postProcessingComposer=new h$(i.renderer),i.postProcessingComposer.addPass(new d$(i.scene,i.camera)),i.controls=new{trackball:t$,orbit:i$,fly:s$}[l](i.camera,i.renderer.domElement),l==="fly"&&(i.controls.movementSpeed=300,i.controls.rollSpeed=Math.PI/6,i.controls.dragToLook=!0),(l==="trackball"||l==="orbit")&&(i.controls.minDistance=.1,i.controls.maxDistance=i.skyRadius,i.controls.addEventListener("start",function(){i.controlsEngaged=!0}),i.controls.addEventListener("change",function(){i.controlsEngaged&&(i.controlsDragging=!0)}),i.controls.addEventListener("end",function(){i.controlsEngaged=!1,i.controlsDragging=!1})),[i.renderer,i.postProcessingComposer].concat(uv(i.extraRenderers)).forEach(function(y){return y.setSize(i.width,i.height)}),i.camera.aspect=i.width/i.height,i.camera.updateProjectionMatrix(),i.camera.position.z=1e3,i.scene.add(i.skysphere=new Bs.Mesh),i.skysphere.visible=!1,i.loadComplete=i.scene.visible=!g,window.scene=i.scene},update:function(e,i){if(e.width&&e.height&&(i.hasOwnProperty("width")||i.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(uv(e.extraRenderers)).forEach(function(l){return l.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),i.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&i.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Bs.SphereGeometry(e.skyRadius)),i.hasOwnProperty("backgroundColor")){var s=yb(e.backgroundColor).alpha;s===void 0&&(s=1),e.renderer.setClearColor(new Bs.Color(Hk(1,e.backgroundColor)),s)}i.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Bs.TextureLoader().load(e.backgroundImageUrl,function(l){l.colorSpace=Bs.SRGBColorSpace,e.skysphere.material=new Bs.MeshBasicMaterial({map:l,side:Bs.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&o()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&o())),i.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),i.hasOwnProperty("objects")&&((i.objects||[]).forEach(function(l){return e.scene.remove(l)}),e.objects.forEach(function(l){return e.scene.add(l)}));function o(){e.loadComplete=e.scene.visible=!0}}});function S$(n,e){e===void 0&&(e={});var i=e.insertAt;if(!(!n||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var T$=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;S$(T$);function MP(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,s)}return i}function LE(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(i),!0).forEach(function(s){Ty(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):MP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Ty(n,e,i){return e=P$(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function Eb(n){return I$(n)||R$(n)||L$(n)||B$()}function I$(n){if(Array.isArray(n))return NT(n)}function R$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function L$(n,e){if(n){if(typeof n=="string")return NT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return NT(n,e)}}function NT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function B$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D$(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function P$(n){var e=D$(n,"string");return typeof e=="symbol"?e:String(e)}function $k(n,e){var i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(c,d){d[n][o](c)},triggerUpdate:!1}},linkMethod:function(o){return function(l){for(var c=l[n],d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];var A=c[o].apply(c,u);return A===c?this:A}}}}var SP=window.THREE?window.THREE:{AmbientLight:SQ,DirectionalLight:MQ,Vector3:ht},O$=170,Jk=$k("forceGraph",xI),F$=Object.assign.apply(Object,Eb(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Ty({},n,Jk.linkProp(n))}))),k$=Object.assign.apply(Object,Eb(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Ty({},n,Jk.linkMethod(n))}))),ZE=$k("renderObjs",qk),N$=Object.assign.apply(Object,Eb(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return Ty({},n,ZE.linkProp(n))}))),U$=Object.assign.apply(Object,Eb(["cameraPosition","postProcessingComposer"].map(function(n){return Ty({},n,ZE.linkMethod(n))})).concat([{graph2ScreenCoords:ZE.linkMethod("getScreenCoords"),screen2GraphCoords:ZE.linkMethod("getSceneCoords")}])),G$=Lp({props:LE(LE({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,i){return i.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,i){var s=i.renderObjs.controls();s&&(s.enabled=e,e&&s.domElement&&s.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},F$),N$),methods:LE(LE({zoomToFit:function(e,i,s){for(var o,l=arguments.length,c=new Array(l>3?l-3:0),d=3;d<l;d++)c[d-3]=arguments[d];return e.renderObjs.fitToBbox((o=e.forceGraph).getGraphBbox.apply(o,c),i,s),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},k$),U$),stateInit:function(e){var i=e.controlType,s=e.rendererConfig,o=e.extraRenderers;return{forceGraph:new xI,renderObjs:qk({controlType:i,rendererConfig:s,extraRenderers:o})}},init:function(e,i){e.innerHTML="",e.appendChild(i.container=document.createElement("div")),i.container.style.position="relative";var s=document.createElement("div");i.container.appendChild(s),i.renderObjs(s);var o=i.renderObjs.camera(),l=i.renderObjs.renderer(),c=i.renderObjs.controls();c.enabled=!!i.enableNavigationControls,i.lastSetCameraZ=o.position.z;var d;i.container.appendChild(d=document.createElement("div")),d.className="graph-info-msg",d.textContent="",i.forceGraph.onLoading(function(){d.textContent="Loading..."}).onFinishLoading(function(){d.textContent=""}).onUpdate(function(){i.graphData=i.forceGraph.graphData(),o.position.x===0&&o.position.y===0&&o.position.z===i.lastSetCameraZ&&i.graphData.nodes.length&&(o.lookAt(i.forceGraph.position),i.lastSetCameraZ=o.position.z=Math.cbrt(i.graphData.nodes.length)*O$)}).onFinishUpdate(function(){if(i._dragControls){var u=i.graphData.nodes.find(function(A){return A.__initialFixedPos&&!A.__disposeControlsAfterDrag});u?u.__disposeControlsAfterDrag=!0:i._dragControls.dispose(),i._dragControls=void 0}if(i.enableNodeDrag&&i.enablePointerInteraction&&i.forceEngine==="d3"){var f=i._dragControls=new e$(i.graphData.nodes.map(function(A){return A.__threeObj}).filter(function(A){return A}),o,l.domElement);f.addEventListener("dragstart",function(A){c.enabled=!1,A.object.__initialPos=A.object.position.clone(),A.object.__prevPos=A.object.position.clone();var g=ah(A.object).__data;!g.__initialFixedPos&&(g.__initialFixedPos={fx:g.fx,fy:g.fy,fz:g.fz}),!g.__initialPos&&(g.__initialPos={x:g.x,y:g.y,z:g.z}),["x","y","z"].forEach(function(y){return g["f".concat(y)]=g[y]}),l.domElement.classList.add("grabbable")}),f.addEventListener("drag",function(A){var g=ah(A.object);if(!A.object.hasOwnProperty("__graphObjType")){var y=A.object.__initialPos,v=A.object.__prevPos,_=A.object.position;g.position.add(_.clone().sub(v)),v.copy(_),_.copy(y)}var x=g.__data,b=g.position,m={x:b.x-x.x,y:b.y-x.y,z:b.z-x.z};["x","y","z"].forEach(function(S){return x["f".concat(S)]=x[S]=b[S]}),i.forceGraph.d3AlphaTarget(.3).resetCountdown(),x.__dragged=!0,i.onNodeDrag(x,m)}),f.addEventListener("dragend",function(A){delete A.object.__initialPos,delete A.object.__prevPos;var g=ah(A.object).__data;g.__disposeControlsAfterDrag&&(f.dispose(),delete g.__disposeControlsAfterDrag);var y=g.__initialFixedPos,v=g.__initialPos,_={x:v.x-g.x,y:v.y-g.y,z:v.z-g.z};y&&(["x","y","z"].forEach(function(x){var b="f".concat(x);y[b]===void 0&&delete g[b]}),delete g.__initialFixedPos,delete g.__initialPos,g.__dragged&&(delete g.__dragged,i.onNodeDragEnd(g,_))),i.forceGraph.d3AlphaTarget(0).resetCountdown(),i.enableNavigationControls&&(c.enabled=!0,c.domElement&&c.domElement.ownerDocument&&c.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),l.domElement.classList.remove("grabbable")})}}),i.renderObjs.renderer().useLegacyLights=!1,i.renderObjs.objects([new SP.AmbientLight(13421772,Math.PI),new SP.DirectionalLight(16777215,.6*Math.PI),i.forceGraph]).hoverOrderComparator(function(u,f){var A=ah(u);if(!A)return 1;var g=ah(f);if(!g)return-1;var y=function(_){return _.__graphObjType==="node"};return y(g)-y(A)}).tooltipContent(function(u){var f=ah(u);return f&&xi(i["".concat(f.__graphObjType,"Label")])(f.__data)||""}).hoverDuringDrag(!1).onHover(function(u){var f=ah(u);if(f!==i.hoverObj){var A=i.hoverObj?i.hoverObj.__graphObjType:null,g=i.hoverObj?i.hoverObj.__data:null,y=f?f.__graphObjType:null,v=f?f.__data:null;if(A&&A!==y){var _=i["on".concat(A==="node"?"Node":"Link","Hover")];_&&_(null,g)}if(y){var x=i["on".concat(y==="node"?"Node":"Link","Hover")];x&&x(v,A===y?g:null)}l.domElement.classList[f&&i["on".concat(y==="node"?"Node":"Link","Click")]||!f&&i.onBackgroundClick?"add":"remove"]("clickable"),i.hoverObj=f}}).clickAfterDrag(!1).onClick(function(u,f){var A=ah(u);if(A){var g=i["on".concat(A.__graphObjType==="node"?"Node":"Link","Click")];g&&g(A.__data,f)}else i.onBackgroundClick&&i.onBackgroundClick(f)}).onRightClick(function(u,f){var A=ah(u);if(A){var g=i["on".concat(A.__graphObjType==="node"?"Node":"Link","RightClick")];g&&g(A.__data,f)}else i.onBackgroundRightClick&&i.onBackgroundRightClick(f)}),this._animationCycle()}});function ah(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}var UT="http://www.w3.org/1999/xhtml";const TP={svg:"http://www.w3.org/2000/svg",xhtml:UT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _b(n){var e=n+="",i=e.indexOf(":");return i>=0&&(e=n.slice(0,i))!=="xmlns"&&(n=n.slice(i+1)),TP.hasOwnProperty(e)?{space:TP[e],local:n}:n}function z$(n){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===UT&&e.documentElement.namespaceURI===UT?e.createElement(n):e.createElementNS(i,n)}}function H$(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Zk(n){var e=_b(n);return(e.local?H$:z$)(e)}function V$(){}function _I(n){return n==null?V$:function(){return this.querySelector(n)}}function j$(n){typeof n!="function"&&(n=_I(n));for(var e=this._groups,i=e.length,s=new Array(i),o=0;o<i;++o)for(var l=e[o],c=l.length,d=s[o]=new Array(c),u,f,A=0;A<c;++A)(u=l[A])&&(f=n.call(u,u.__data__,A,l))&&("__data__"in u&&(f.__data__=u.__data__),d[A]=f);return new bl(s,this._parents)}function Q$(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function W$(){return[]}function e5(n){return n==null?W$:function(){return this.querySelectorAll(n)}}function K$(n){return function(){return Q$(n.apply(this,arguments))}}function X$(n){typeof n=="function"?n=K$(n):n=e5(n);for(var e=this._groups,i=e.length,s=[],o=[],l=0;l<i;++l)for(var c=e[l],d=c.length,u,f=0;f<d;++f)(u=c[f])&&(s.push(n.call(u,u.__data__,f,c)),o.push(u));return new bl(s,o)}function t5(n){return function(){return this.matches(n)}}function n5(n){return function(e){return e.matches(n)}}var Y$=Array.prototype.find;function q$(n){return function(){return Y$.call(this.children,n)}}function $$(){return this.firstElementChild}function J$(n){return this.select(n==null?$$:q$(typeof n=="function"?n:n5(n)))}var Z$=Array.prototype.filter;function eJ(){return Array.from(this.children)}function tJ(n){return function(){return Z$.call(this.children,n)}}function nJ(n){return this.selectAll(n==null?eJ:tJ(typeof n=="function"?n:n5(n)))}function iJ(n){typeof n!="function"&&(n=t5(n));for(var e=this._groups,i=e.length,s=new Array(i),o=0;o<i;++o)for(var l=e[o],c=l.length,d=s[o]=[],u,f=0;f<c;++f)(u=l[f])&&n.call(u,u.__data__,f,l)&&d.push(u);return new bl(s,this._parents)}function i5(n){return new Array(n.length)}function rJ(){return new bl(this._enter||this._groups.map(i5),this._parents)}function H_(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}H_.prototype={constructor:H_,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function sJ(n){return function(){return n}}function oJ(n,e,i,s,o,l){for(var c=0,d,u=e.length,f=l.length;c<f;++c)(d=e[c])?(d.__data__=l[c],s[c]=d):i[c]=new H_(n,l[c]);for(;c<u;++c)(d=e[c])&&(o[c]=d)}function aJ(n,e,i,s,o,l,c){var d,u,f=new Map,A=e.length,g=l.length,y=new Array(A),v;for(d=0;d<A;++d)(u=e[d])&&(y[d]=v=c.call(u,u.__data__,d,e)+"",f.has(v)?o[d]=u:f.set(v,u));for(d=0;d<g;++d)v=c.call(n,l[d],d,l)+"",(u=f.get(v))?(s[d]=u,u.__data__=l[d],f.delete(v)):i[d]=new H_(n,l[d]);for(d=0;d<A;++d)(u=e[d])&&f.get(y[d])===u&&(o[d]=u)}function lJ(n){return n.__data__}function cJ(n,e){if(!arguments.length)return Array.from(this,lJ);var i=e?aJ:oJ,s=this._parents,o=this._groups;typeof n!="function"&&(n=sJ(n));for(var l=o.length,c=new Array(l),d=new Array(l),u=new Array(l),f=0;f<l;++f){var A=s[f],g=o[f],y=g.length,v=uJ(n.call(A,A&&A.__data__,f,s)),_=v.length,x=d[f]=new Array(_),b=c[f]=new Array(_),m=u[f]=new Array(y);i(A,g,x,b,m,v,e);for(var S=0,C=0,M,T;S<_;++S)if(M=x[S]){for(S>=C&&(C=S+1);!(T=b[C])&&++C<_;);M._next=T||null}}return c=new bl(c,s),c._enter=d,c._exit=u,c}function uJ(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function hJ(){return new bl(this._exit||this._groups.map(i5),this._parents)}function dJ(n,e,i){var s=this.enter(),o=this,l=this.exit();return typeof n=="function"?(s=n(s),s&&(s=s.selection())):s=s.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),i==null?l.remove():i(l),s&&o?s.merge(o).order():o}function fJ(n){for(var e=n.selection?n.selection():n,i=this._groups,s=e._groups,o=i.length,l=s.length,c=Math.min(o,l),d=new Array(o),u=0;u<c;++u)for(var f=i[u],A=s[u],g=f.length,y=d[u]=new Array(g),v,_=0;_<g;++_)(v=f[_]||A[_])&&(y[_]=v);for(;u<o;++u)d[u]=i[u];return new bl(d,this._parents)}function pJ(){for(var n=this._groups,e=-1,i=n.length;++e<i;)for(var s=n[e],o=s.length-1,l=s[o],c;--o>=0;)(c=s[o])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function mJ(n){n||(n=gJ);function e(g,y){return g&&y?n(g.__data__,y.__data__):!g-!y}for(var i=this._groups,s=i.length,o=new Array(s),l=0;l<s;++l){for(var c=i[l],d=c.length,u=o[l]=new Array(d),f,A=0;A<d;++A)(f=c[A])&&(u[A]=f);u.sort(e)}return new bl(o,this._parents).order()}function gJ(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function AJ(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function vJ(){return Array.from(this)}function yJ(){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var s=n[e],o=0,l=s.length;o<l;++o){var c=s[o];if(c)return c}return null}function xJ(){let n=0;for(const e of this)++n;return n}function EJ(){return!this.node()}function _J(n){for(var e=this._groups,i=0,s=e.length;i<s;++i)for(var o=e[i],l=0,c=o.length,d;l<c;++l)(d=o[l])&&n.call(d,d.__data__,l,o);return this}function bJ(n){return function(){this.removeAttribute(n)}}function wJ(n){return function(){this.removeAttributeNS(n.space,n.local)}}function CJ(n,e){return function(){this.setAttribute(n,e)}}function MJ(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function SJ(n,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(n):this.setAttribute(n,i)}}function TJ(n,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,i)}}function IJ(n,e){var i=_b(n);if(arguments.length<2){var s=this.node();return i.local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}return this.each((e==null?i.local?wJ:bJ:typeof e=="function"?i.local?TJ:SJ:i.local?MJ:CJ)(i,e))}function r5(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function RJ(n){return function(){this.style.removeProperty(n)}}function LJ(n,e,i){return function(){this.style.setProperty(n,e,i)}}function BJ(n,e,i){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(n):this.style.setProperty(n,s,i)}}function DJ(n,e,i){return arguments.length>1?this.each((e==null?RJ:typeof e=="function"?BJ:LJ)(n,e,i??"")):e0(this.node(),n)}function e0(n,e){return n.style.getPropertyValue(e)||r5(n).getComputedStyle(n,null).getPropertyValue(e)}function PJ(n){return function(){delete this[n]}}function OJ(n,e){return function(){this[n]=e}}function FJ(n,e){return function(){var i=e.apply(this,arguments);i==null?delete this[n]:this[n]=i}}function kJ(n,e){return arguments.length>1?this.each((e==null?PJ:typeof e=="function"?FJ:OJ)(n,e)):this.node()[n]}function s5(n){return n.trim().split(/^|\s+/)}function bI(n){return n.classList||new o5(n)}function o5(n){this._node=n,this._names=s5(n.getAttribute("class")||"")}o5.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function a5(n,e){for(var i=bI(n),s=-1,o=e.length;++s<o;)i.add(e[s])}function l5(n,e){for(var i=bI(n),s=-1,o=e.length;++s<o;)i.remove(e[s])}function NJ(n){return function(){a5(this,n)}}function UJ(n){return function(){l5(this,n)}}function GJ(n,e){return function(){(e.apply(this,arguments)?a5:l5)(this,n)}}function zJ(n,e){var i=s5(n+"");if(arguments.length<2){for(var s=bI(this.node()),o=-1,l=i.length;++o<l;)if(!s.contains(i[o]))return!1;return!0}return this.each((typeof e=="function"?GJ:e?NJ:UJ)(i,e))}function HJ(){this.textContent=""}function VJ(n){return function(){this.textContent=n}}function jJ(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function QJ(n){return arguments.length?this.each(n==null?HJ:(typeof n=="function"?jJ:VJ)(n)):this.node().textContent}function WJ(){this.innerHTML=""}function KJ(n){return function(){this.innerHTML=n}}function XJ(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function YJ(n){return arguments.length?this.each(n==null?WJ:(typeof n=="function"?XJ:KJ)(n)):this.node().innerHTML}function qJ(){this.nextSibling&&this.parentNode.appendChild(this)}function $J(){return this.each(qJ)}function JJ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZJ(){return this.each(JJ)}function eZ(n){var e=typeof n=="function"?n:Zk(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function tZ(){return null}function nZ(n,e){var i=typeof n=="function"?n:Zk(n),s=e==null?tZ:typeof e=="function"?e:_I(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)})}function iZ(){var n=this.parentNode;n&&n.removeChild(this)}function rZ(){return this.each(iZ)}function sZ(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function oZ(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function aZ(n){return this.select(n?oZ:sZ)}function lZ(n){return arguments.length?this.property("__data__",n):this.node().__data__}function cZ(n){return function(e){n.call(this,e,this.__data__)}}function uZ(n){return n.trim().split(/^|\s+/).map(function(e){var i="",s=e.indexOf(".");return s>=0&&(i=e.slice(s+1),e=e.slice(0,s)),{type:e,name:i}})}function hZ(n){return function(){var e=this.__on;if(e){for(var i=0,s=-1,o=e.length,l;i<o;++i)l=e[i],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):e[++s]=l;++s?e.length=s:delete this.__on}}}function dZ(n,e,i){return function(){var s=this.__on,o,l=cZ(e);if(s){for(var c=0,d=s.length;c<d;++c)if((o=s[c]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=i),o.value=e;return}}this.addEventListener(n.type,l,i),o={type:n.type,name:n.name,value:e,listener:l,options:i},s?s.push(o):this.__on=[o]}}function fZ(n,e,i){var s=uZ(n+""),o,l=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var u=0,f=d.length,A;u<f;++u)for(o=0,A=d[u];o<l;++o)if((c=s[o]).type===A.type&&c.name===A.name)return A.value}return}for(d=e?dZ:hZ,o=0;o<l;++o)this.each(d(s[o],e,i));return this}function c5(n,e,i){var s=r5(n),o=s.CustomEvent;typeof o=="function"?o=new o(e,i):(o=s.document.createEvent("Event"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function pZ(n,e){return function(){return c5(this,n,e)}}function mZ(n,e){return function(){return c5(this,n,e.apply(this,arguments))}}function gZ(n,e){return this.each((typeof e=="function"?mZ:pZ)(n,e))}function*AZ(){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var s=n[e],o=0,l=s.length,c;o<l;++o)(c=s[o])&&(yield c)}var u5=[null];function bl(n,e){this._groups=n,this._parents=e}function Iy(){return new bl([[document.documentElement]],u5)}function vZ(){return this}bl.prototype=Iy.prototype={constructor:bl,select:j$,selectAll:X$,selectChild:J$,selectChildren:nJ,filter:iJ,data:cJ,enter:rJ,exit:hJ,join:dJ,merge:fJ,selection:vZ,order:pJ,sort:mJ,call:AJ,nodes:vJ,node:yJ,size:xJ,empty:EJ,each:_J,attr:IJ,style:DJ,property:kJ,classed:zJ,text:QJ,html:YJ,raise:$J,lower:ZJ,append:eZ,insert:nZ,remove:rZ,clone:aZ,datum:lZ,on:fZ,dispatch:gZ,[Symbol.iterator]:AZ};function Bc(n){return typeof n=="string"?new bl([[document.querySelector(n)]],[document.documentElement]):new bl([[n]],u5)}function yZ(n){let e;for(;e=n.sourceEvent;)n=e;return n}function dh(n,e){if(n=yZ(n),e===void 0&&(e=n.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var s=i.createSVGPoint();return s.x=n.clientX,s.y=n.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}const xZ={passive:!1},gy={capture:!0,passive:!1};function iS(n){n.stopImmediatePropagation()}function Gg(n){n.preventDefault(),n.stopImmediatePropagation()}function h5(n){var e=n.document.documentElement,i=Bc(n).on("dragstart.drag",Gg,gy);"onselectstart"in e?i.on("selectstart.drag",Gg,gy):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function d5(n,e){var i=n.document.documentElement,s=Bc(n).on("dragstart.drag",null);e&&(s.on("click.drag",Gg,gy),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const BE=n=>()=>n;function GT(n,{sourceEvent:e,subject:i,target:s,identifier:o,active:l,x:c,y:d,dx:u,dy:f,dispatch:A}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:A}})}GT.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function EZ(n){return!n.ctrlKey&&!n.button}function _Z(){return this.parentNode}function bZ(n,e){return e??{x:n.x,y:n.y}}function wZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function CZ(){var n=EZ,e=_Z,i=bZ,s=wZ,o={},l=Cy("start","drag","end"),c=0,d,u,f,A,g=0;function y(M){M.on("mousedown.drag",v).filter(s).on("touchstart.drag",b).on("touchmove.drag",m,xZ).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(M,T){if(!(A||!n.call(this,M,T))){var N=C(this,e.call(this,M,T),M,T,"mouse");N&&(Bc(M.view).on("mousemove.drag",_,gy).on("mouseup.drag",x,gy),h5(M.view),iS(M),f=!1,d=M.clientX,u=M.clientY,N("start",M))}}function _(M){if(Gg(M),!f){var T=M.clientX-d,N=M.clientY-u;f=T*T+N*N>g}o.mouse("drag",M)}function x(M){Bc(M.view).on("mousemove.drag mouseup.drag",null),d5(M.view,f),Gg(M),o.mouse("end",M)}function b(M,T){if(n.call(this,M,T)){var N=M.changedTouches,P=e.call(this,M,T),k=N.length,D,z;for(D=0;D<k;++D)(z=C(this,P,M,T,N[D].identifier,N[D]))&&(iS(M),z("start",M,N[D]))}}function m(M){var T=M.changedTouches,N=T.length,P,k;for(P=0;P<N;++P)(k=o[T[P].identifier])&&(Gg(M),k("drag",M,T[P]))}function S(M){var T=M.changedTouches,N=T.length,P,k;for(A&&clearTimeout(A),A=setTimeout(function(){A=null},500),P=0;P<N;++P)(k=o[T[P].identifier])&&(iS(M),k("end",M,T[P]))}function C(M,T,N,P,k,D){var z=l.copy(),Y=dh(D||N,T),ne,O,F;if((F=i.call(M,new GT("beforestart",{sourceEvent:N,target:y,identifier:k,active:c,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:z}),P))!=null)return ne=F.x-Y[0]||0,O=F.y-Y[1]||0,function U(G,V,K){var W=Y,J;switch(G){case"start":o[k]=U,J=c++;break;case"end":delete o[k],--c;case"drag":Y=dh(K||V,T),J=c;break}z.call(G,M,new GT(G,{sourceEvent:V,subject:F,target:y,identifier:k,active:J,x:Y[0]+ne,y:Y[1]+O,dx:Y[0]-W[0],dy:Y[1]-W[1],dispatch:z}),P)}}return y.filter=function(M){return arguments.length?(n=typeof M=="function"?M:BE(!!M),y):n},y.container=function(M){return arguments.length?(e=typeof M=="function"?M:BE(M),y):e},y.subject=function(M){return arguments.length?(i=typeof M=="function"?M:BE(M),y):i},y.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:BE(!!M),y):s},y.on=function(){var M=l.on.apply(l,arguments);return M===l?y:M},y.clickDistance=function(M){return arguments.length?(g=(M=+M)*M,y):Math.sqrt(g)},y}var MZ=Cy("start","end","cancel","interrupt"),SZ=[],f5=0,IP=1,zT=2,e_=3,RP=4,HT=5,t_=6;function bb(n,e,i,s,o,l){var c=n.__transition;if(!c)n.__transition={};else if(i in c)return;TZ(n,i,{name:e,index:s,group:o,on:MZ,tween:SZ,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:f5})}function wI(n,e){var i=Gc(n,e);if(i.state>f5)throw new Error("too late; already scheduled");return i}function Ru(n,e){var i=Gc(n,e);if(i.state>e_)throw new Error("too late; already running");return i}function Gc(n,e){var i=n.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function TZ(n,e,i){var s=n.__transition,o;s[e]=i,i.timer=cI(l,0,i.time);function l(f){i.state=IP,i.timer.restart(c,i.delay,i.time),i.delay<=f&&c(f-i.delay)}function c(f){var A,g,y,v;if(i.state!==IP)return u();for(A in s)if(v=s[A],v.name===i.name){if(v.state===e_)return wD(c);v.state===RP?(v.state=t_,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete s[A]):+A<e&&(v.state=t_,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete s[A])}if(wD(function(){i.state===e_&&(i.state=RP,i.timer.restart(d,i.delay,i.time),d(f))}),i.state=zT,i.on.call("start",n,n.__data__,i.index,i.group),i.state===zT){for(i.state=e_,o=new Array(y=i.tween.length),A=0,g=-1;A<y;++A)(v=i.tween[A].value.call(n,n.__data__,i.index,i.group))&&(o[++g]=v);o.length=g+1}}function d(f){for(var A=f<i.duration?i.ease.call(null,f/i.duration):(i.timer.restart(u),i.state=HT,1),g=-1,y=o.length;++g<y;)o[g].call(n,A);i.state===HT&&(i.on.call("end",n,n.__data__,i.index,i.group),u())}function u(){i.state=t_,i.timer.stop(),delete s[e];for(var f in s)return;delete n.__transition}}function n_(n,e){var i=n.__transition,s,o,l=!0,c;if(i){e=e==null?null:e+"";for(c in i){if((s=i[c]).name!==e){l=!1;continue}o=s.state>zT&&s.state<HT,s.state=t_,s.timer.stop(),s.on.call(o?"interrupt":"cancel",n,n.__data__,s.index,s.group),delete i[c]}l&&delete n.__transition}}function IZ(n){return this.each(function(){n_(this,n)})}function RZ(n,e){var i,s;return function(){var o=Ru(this,n),l=o.tween;if(l!==i){s=i=l;for(var c=0,d=s.length;c<d;++c)if(s[c].name===e){s=s.slice(),s.splice(c,1);break}}o.tween=s}}function LZ(n,e,i){var s,o;if(typeof i!="function")throw new Error;return function(){var l=Ru(this,n),c=l.tween;if(c!==s){o=(s=c).slice();for(var d={name:e,value:i},u=0,f=o.length;u<f;++u)if(o[u].name===e){o[u]=d;break}u===f&&o.push(d)}l.tween=o}}function BZ(n,e){var i=this._id;if(n+="",arguments.length<2){for(var s=Gc(this.node(),i).tween,o=0,l=s.length,c;o<l;++o)if((c=s[o]).name===n)return c.value;return null}return this.each((e==null?RZ:LZ)(i,n,e))}function CI(n,e,i){var s=n._id;return n.each(function(){var o=Ru(this,s);(o.value||(o.value={}))[e]=i.apply(this,arguments)}),function(o){return Gc(o,s).value[e]}}function p5(n,e){var i;return(typeof e=="number"?Ld:e instanceof py?$D:(i=py(e))?(e=i,$D):sY)(n,e)}function DZ(n){return function(){this.removeAttribute(n)}}function PZ(n){return function(){this.removeAttributeNS(n.space,n.local)}}function OZ(n,e,i){var s,o=i+"",l;return function(){var c=this.getAttribute(n);return c===o?null:c===s?l:l=e(s=c,i)}}function FZ(n,e,i){var s,o=i+"",l;return function(){var c=this.getAttributeNS(n.space,n.local);return c===o?null:c===s?l:l=e(s=c,i)}}function kZ(n,e,i){var s,o,l;return function(){var c,d=i(this),u;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),u=d+"",c===u?null:c===s&&u===o?l:(o=u,l=e(s=c,d)))}}function NZ(n,e,i){var s,o,l;return function(){var c,d=i(this),u;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),u=d+"",c===u?null:c===s&&u===o?l:(o=u,l=e(s=c,d)))}}function UZ(n,e){var i=_b(n),s=i==="transform"?cY:p5;return this.attrTween(n,typeof e=="function"?(i.local?NZ:kZ)(i,s,CI(this,"attr."+n,e)):e==null?(i.local?PZ:DZ)(i):(i.local?FZ:OZ)(i,s,e))}function GZ(n,e){return function(i){this.setAttribute(n,e.call(this,i))}}function zZ(n,e){return function(i){this.setAttributeNS(n.space,n.local,e.call(this,i))}}function HZ(n,e){var i,s;function o(){var l=e.apply(this,arguments);return l!==s&&(i=(s=l)&&zZ(n,l)),i}return o._value=e,o}function VZ(n,e){var i,s;function o(){var l=e.apply(this,arguments);return l!==s&&(i=(s=l)&&GZ(n,l)),i}return o._value=e,o}function jZ(n,e){var i="attr."+n;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var s=_b(n);return this.tween(i,(s.local?HZ:VZ)(s,e))}function QZ(n,e){return function(){wI(this,n).delay=+e.apply(this,arguments)}}function WZ(n,e){return e=+e,function(){wI(this,n).delay=e}}function KZ(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?QZ:WZ)(e,n)):Gc(this.node(),e).delay}function XZ(n,e){return function(){Ru(this,n).duration=+e.apply(this,arguments)}}function YZ(n,e){return e=+e,function(){Ru(this,n).duration=e}}function qZ(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?XZ:YZ)(e,n)):Gc(this.node(),e).duration}function $Z(n,e){if(typeof e!="function")throw new Error;return function(){Ru(this,n).ease=e}}function JZ(n){var e=this._id;return arguments.length?this.each($Z(e,n)):Gc(this.node(),e).ease}function ZZ(n,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;Ru(this,n).ease=i}}function eee(n){if(typeof n!="function")throw new Error;return this.each(ZZ(this._id,n))}function tee(n){typeof n!="function"&&(n=t5(n));for(var e=this._groups,i=e.length,s=new Array(i),o=0;o<i;++o)for(var l=e[o],c=l.length,d=s[o]=[],u,f=0;f<c;++f)(u=l[f])&&n.call(u,u.__data__,f,l)&&d.push(u);return new Bh(s,this._parents,this._name,this._id)}function nee(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,i=n._groups,s=e.length,o=i.length,l=Math.min(s,o),c=new Array(s),d=0;d<l;++d)for(var u=e[d],f=i[d],A=u.length,g=c[d]=new Array(A),y,v=0;v<A;++v)(y=u[v]||f[v])&&(g[v]=y);for(;d<s;++d)c[d]=e[d];return new Bh(c,this._parents,this._name,this._id)}function iee(n){return(n+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function ree(n,e,i){var s,o,l=iee(e)?wI:Ru;return function(){var c=l(this,n),d=c.on;d!==s&&(o=(s=d).copy()).on(e,i),c.on=o}}function see(n,e){var i=this._id;return arguments.length<2?Gc(this.node(),i).on.on(n):this.each(ree(i,n,e))}function oee(n){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==n)return;e&&e.removeChild(this)}}function aee(){return this.on("end.remove",oee(this._id))}function lee(n){var e=this._name,i=this._id;typeof n!="function"&&(n=_I(n));for(var s=this._groups,o=s.length,l=new Array(o),c=0;c<o;++c)for(var d=s[c],u=d.length,f=l[c]=new Array(u),A,g,y=0;y<u;++y)(A=d[y])&&(g=n.call(A,A.__data__,y,d))&&("__data__"in A&&(g.__data__=A.__data__),f[y]=g,bb(f[y],e,i,y,f,Gc(A,i)));return new Bh(l,this._parents,e,i)}function cee(n){var e=this._name,i=this._id;typeof n!="function"&&(n=e5(n));for(var s=this._groups,o=s.length,l=[],c=[],d=0;d<o;++d)for(var u=s[d],f=u.length,A,g=0;g<f;++g)if(A=u[g]){for(var y=n.call(A,A.__data__,g,u),v,_=Gc(A,i),x=0,b=y.length;x<b;++x)(v=y[x])&&bb(v,e,i,x,y,_);l.push(y),c.push(A)}return new Bh(l,c,e,i)}var uee=Iy.prototype.constructor;function hee(){return new uee(this._groups,this._parents)}function dee(n,e){var i,s,o;return function(){var l=e0(this,n),c=(this.style.removeProperty(n),e0(this,n));return l===c?null:l===i&&c===s?o:o=e(i=l,s=c)}}function m5(n){return function(){this.style.removeProperty(n)}}function fee(n,e,i){var s,o=i+"",l;return function(){var c=e0(this,n);return c===o?null:c===s?l:l=e(s=c,i)}}function pee(n,e,i){var s,o,l;return function(){var c=e0(this,n),d=i(this),u=d+"";return d==null&&(u=d=(this.style.removeProperty(n),e0(this,n))),c===u?null:c===s&&u===o?l:(o=u,l=e(s=c,d))}}function mee(n,e){var i,s,o,l="style."+e,c="end."+l,d;return function(){var u=Ru(this,n),f=u.on,A=u.value[l]==null?d||(d=m5(e)):void 0;(f!==i||o!==A)&&(s=(i=f).copy()).on(c,o=A),u.on=s}}function gee(n,e,i){var s=(n+="")=="transform"?lY:p5;return e==null?this.styleTween(n,dee(n,s)).on("end.style."+n,m5(n)):typeof e=="function"?this.styleTween(n,pee(n,s,CI(this,"style."+n,e))).each(mee(this._id,n)):this.styleTween(n,fee(n,s,e),i).on("end.style."+n,null)}function Aee(n,e,i){return function(s){this.style.setProperty(n,e.call(this,s),i)}}function vee(n,e,i){var s,o;function l(){var c=e.apply(this,arguments);return c!==o&&(s=(o=c)&&Aee(n,c,i)),s}return l._value=e,l}function yee(n,e,i){var s="style."+(n+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,vee(n,e,i??""))}function xee(n){return function(){this.textContent=n}}function Eee(n){return function(){var e=n(this);this.textContent=e??""}}function _ee(n){return this.tween("text",typeof n=="function"?Eee(CI(this,"text",n)):xee(n==null?"":n+""))}function bee(n){return function(e){this.textContent=n.call(this,e)}}function wee(n){var e,i;function s(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&bee(o)),e}return s._value=n,s}function Cee(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,wee(n))}function Mee(){for(var n=this._name,e=this._id,i=g5(),s=this._groups,o=s.length,l=0;l<o;++l)for(var c=s[l],d=c.length,u,f=0;f<d;++f)if(u=c[f]){var A=Gc(u,e);bb(u,n,i,f,c,{time:A.time+A.delay+A.duration,delay:0,duration:A.duration,ease:A.ease})}return new Bh(s,this._parents,n,i)}function See(){var n,e,i=this,s=i._id,o=i.size();return new Promise(function(l,c){var d={value:c},u={value:function(){--o===0&&l()}};i.each(function(){var f=Ru(this,s),A=f.on;A!==n&&(e=(n=A).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(u)),f.on=e}),o===0&&l()})}var Tee=0;function Bh(n,e,i,s){this._groups=n,this._parents=e,this._name=i,this._id=s}function g5(){return++Tee}var lh=Iy.prototype;Bh.prototype={constructor:Bh,select:lee,selectAll:cee,selectChild:lh.selectChild,selectChildren:lh.selectChildren,filter:tee,merge:nee,selection:hee,transition:Mee,call:lh.call,nodes:lh.nodes,node:lh.node,size:lh.size,empty:lh.empty,each:lh.each,on:see,attr:UZ,attrTween:jZ,style:gee,styleTween:yee,text:_ee,textTween:Cee,remove:aee,tween:BZ,delay:KZ,duration:qZ,ease:JZ,easeVarying:eee,end:See,[Symbol.iterator]:lh[Symbol.iterator]};function Iee(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Ree={time:null,delay:0,duration:250,ease:Iee};function Lee(n,e){for(var i;!(i=n.__transition)||!(i=i[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return i}function Bee(n){var e,i;n instanceof Bh?(e=n._id,n=n._name):(e=g5(),(i=Ree).time=lI(),n=n==null?null:n+"");for(var s=this._groups,o=s.length,l=0;l<o;++l)for(var c=s[l],d=c.length,u,f=0;f<d;++f)(u=c[f])&&bb(u,n,e,f,c,i||Lee(u,e));return new Bh(s,this._parents,n,e)}Iy.prototype.interrupt=IZ;Iy.prototype.transition=Bee;const DE=n=>()=>n;function Dee(n,{sourceEvent:e,target:i,transform:s,dispatch:o}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:o}})}function Eh(n,e,i){this.k=n,this.x=e,this.y=i}Eh.prototype={constructor:Eh,scale:function(n){return n===1?this:new Eh(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Eh(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var MI=new Eh(1,0,0);xu.prototype=Eh.prototype;function xu(n){for(;!n.__zoom;)if(!(n=n.parentNode))return MI;return n.__zoom}function rS(n){n.stopImmediatePropagation()}function hv(n){n.preventDefault(),n.stopImmediatePropagation()}function Pee(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Oee(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function LP(){return this.__zoom||MI}function Fee(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function kee(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nee(n,e,i){var s=n.invertX(e[0][0])-i[0][0],o=n.invertX(e[1][0])-i[1][0],l=n.invertY(e[0][1])-i[0][1],c=n.invertY(e[1][1])-i[1][1];return n.translate(o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function Uee(){var n=Pee,e=Oee,i=Nee,s=Fee,o=kee,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=fY,f=Cy("start","zoom","end"),A,g,y,v=500,_=150,x=0,b=10;function m(F){F.property("__zoom",LP).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",z).filter(o).on("touchstart.zoom",Y).on("touchmove.zoom",ne).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(F,U,G,V){var K=F.selection?F.selection():F;K.property("__zoom",LP),F!==K?T(F,U,G,V):K.interrupt().each(function(){N(this,arguments).event(V).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},m.scaleBy=function(F,U,G,V){m.scaleTo(F,function(){var K=this.__zoom.k,W=typeof U=="function"?U.apply(this,arguments):U;return K*W},G,V)},m.scaleTo=function(F,U,G,V){m.transform(F,function(){var K=e.apply(this,arguments),W=this.__zoom,J=G==null?M(K):typeof G=="function"?G.apply(this,arguments):G,ee=W.invert(J),he=typeof U=="function"?U.apply(this,arguments):U;return i(C(S(W,he),J,ee),K,c)},G,V)},m.translateBy=function(F,U,G,V){m.transform(F,function(){return i(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof G=="function"?G.apply(this,arguments):G),e.apply(this,arguments),c)},null,V)},m.translateTo=function(F,U,G,V,K){m.transform(F,function(){var W=e.apply(this,arguments),J=this.__zoom,ee=V==null?M(W):typeof V=="function"?V.apply(this,arguments):V;return i(MI.translate(ee[0],ee[1]).scale(J.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof G=="function"?-G.apply(this,arguments):-G),W,c)},V,K)};function S(F,U){return U=Math.max(l[0],Math.min(l[1],U)),U===F.k?F:new Eh(U,F.x,F.y)}function C(F,U,G){var V=U[0]-G[0]*F.k,K=U[1]-G[1]*F.k;return V===F.x&&K===F.y?F:new Eh(F.k,V,K)}function M(F){return[(+F[0][0]+ +F[1][0])/2,(+F[0][1]+ +F[1][1])/2]}function T(F,U,G,V){F.on("start.zoom",function(){N(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(V).end()}).tween("zoom",function(){var K=this,W=arguments,J=N(K,W).event(V),ee=e.apply(K,W),he=G==null?M(ee):typeof G=="function"?G.apply(K,W):G,me=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),Be=K.__zoom,Se=typeof U=="function"?U.apply(K,W):U,rt=u(Be.invert(he).concat(me/Be.k),Se.invert(he).concat(me/Se.k));return function(Ge){if(Ge===1)Ge=Se;else{var st=rt(Ge),mt=me/st[2];Ge=new Eh(mt,he[0]-st[0]*mt,he[1]-st[1]*mt)}J.zoom(null,Ge)}})}function N(F,U,G){return!G&&F.__zooming||new P(F,U)}function P(F,U){this.that=F,this.args=U,this.active=0,this.sourceEvent=null,this.extent=e.apply(F,U),this.taps=0}P.prototype={event:function(F){return F&&(this.sourceEvent=F),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(F,U){return this.mouse&&F!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&F!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&F!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(F){var U=Bc(this.that).datum();f.call(F,this.that,new Dee(F,{sourceEvent:this.sourceEvent,target:m,type:F,transform:this.that.__zoom,dispatch:f}),U)}};function k(F,...U){if(!n.apply(this,arguments))return;var G=N(this,U).event(F),V=this.__zoom,K=Math.max(l[0],Math.min(l[1],V.k*Math.pow(2,s.apply(this,arguments)))),W=dh(F);if(G.wheel)(G.mouse[0][0]!==W[0]||G.mouse[0][1]!==W[1])&&(G.mouse[1]=V.invert(G.mouse[0]=W)),clearTimeout(G.wheel);else{if(V.k===K)return;G.mouse=[W,V.invert(W)],n_(this),G.start()}hv(F),G.wheel=setTimeout(J,_),G.zoom("mouse",i(C(S(V,K),G.mouse[0],G.mouse[1]),G.extent,c));function J(){G.wheel=null,G.end()}}function D(F,...U){if(y||!n.apply(this,arguments))return;var G=F.currentTarget,V=N(this,U,!0).event(F),K=Bc(F.view).on("mousemove.zoom",he,!0).on("mouseup.zoom",me,!0),W=dh(F,G),J=F.clientX,ee=F.clientY;h5(F.view),rS(F),V.mouse=[W,this.__zoom.invert(W)],n_(this),V.start();function he(Be){if(hv(Be),!V.moved){var Se=Be.clientX-J,rt=Be.clientY-ee;V.moved=Se*Se+rt*rt>x}V.event(Be).zoom("mouse",i(C(V.that.__zoom,V.mouse[0]=dh(Be,G),V.mouse[1]),V.extent,c))}function me(Be){K.on("mousemove.zoom mouseup.zoom",null),d5(Be.view,V.moved),hv(Be),V.event(Be).end()}}function z(F,...U){if(n.apply(this,arguments)){var G=this.__zoom,V=dh(F.changedTouches?F.changedTouches[0]:F,this),K=G.invert(V),W=G.k*(F.shiftKey?.5:2),J=i(C(S(G,W),V,K),e.apply(this,U),c);hv(F),d>0?Bc(this).transition().duration(d).call(T,J,V,F):Bc(this).call(m.transform,J,V,F)}}function Y(F,...U){if(n.apply(this,arguments)){var G=F.touches,V=G.length,K=N(this,U,F.changedTouches.length===V).event(F),W,J,ee,he;for(rS(F),J=0;J<V;++J)ee=G[J],he=dh(ee,this),he=[he,this.__zoom.invert(he),ee.identifier],K.touch0?!K.touch1&&K.touch0[2]!==he[2]&&(K.touch1=he,K.taps=0):(K.touch0=he,W=!0,K.taps=1+!!A);A&&(A=clearTimeout(A)),W&&(K.taps<2&&(g=he[0],A=setTimeout(function(){A=null},v)),n_(this),K.start())}}function ne(F,...U){if(this.__zooming){var G=N(this,U).event(F),V=F.changedTouches,K=V.length,W,J,ee,he;for(hv(F),W=0;W<K;++W)J=V[W],ee=dh(J,this),G.touch0&&G.touch0[2]===J.identifier?G.touch0[0]=ee:G.touch1&&G.touch1[2]===J.identifier&&(G.touch1[0]=ee);if(J=G.that.__zoom,G.touch1){var me=G.touch0[0],Be=G.touch0[1],Se=G.touch1[0],rt=G.touch1[1],Ge=(Ge=Se[0]-me[0])*Ge+(Ge=Se[1]-me[1])*Ge,st=(st=rt[0]-Be[0])*st+(st=rt[1]-Be[1])*st;J=S(J,Math.sqrt(Ge/st)),ee=[(me[0]+Se[0])/2,(me[1]+Se[1])/2],he=[(Be[0]+rt[0])/2,(Be[1]+rt[1])/2]}else if(G.touch0)ee=G.touch0[0],he=G.touch0[1];else return;G.zoom("touch",i(C(J,ee,he),G.extent,c))}}function O(F,...U){if(this.__zooming){var G=N(this,U).event(F),V=F.changedTouches,K=V.length,W,J;for(rS(F),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),W=0;W<K;++W)J=V[W],G.touch0&&G.touch0[2]===J.identifier?delete G.touch0:G.touch1&&G.touch1[2]===J.identifier&&delete G.touch1;if(G.touch1&&!G.touch0&&(G.touch0=G.touch1,delete G.touch1),G.touch0)G.touch0[1]=this.__zoom.invert(G.touch0[0]);else if(G.end(),G.taps===2&&(J=dh(J,this),Math.hypot(g[0]-J[0],g[1]-J[1])<b)){var ee=Bc(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return m.wheelDelta=function(F){return arguments.length?(s=typeof F=="function"?F:DE(+F),m):s},m.filter=function(F){return arguments.length?(n=typeof F=="function"?F:DE(!!F),m):n},m.touchable=function(F){return arguments.length?(o=typeof F=="function"?F:DE(!!F),m):o},m.extent=function(F){return arguments.length?(e=typeof F=="function"?F:DE([[+F[0][0],+F[0][1]],[+F[1][0],+F[1][1]]]),m):e},m.scaleExtent=function(F){return arguments.length?(l[0]=+F[0],l[1]=+F[1],m):[l[0],l[1]]},m.translateExtent=function(F){return arguments.length?(c[0][0]=+F[0][0],c[1][0]=+F[1][0],c[0][1]=+F[0][1],c[1][1]=+F[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(F){return arguments.length?(i=F,m):i},m.duration=function(F){return arguments.length?(d=+F,m):d},m.interpolate=function(F){return arguments.length?(u=F,m):u},m.on=function(){var F=f.on.apply(f,arguments);return F===f?m:F},m.clickDistance=function(F){return arguments.length?(x=(F=+F)*F,m):Math.sqrt(x)},m.tapDistance=function(F){return arguments.length?(b=+F,m):b},m}function Gee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function BP(n,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,Xee(s.key),s)}}function zee(n,e,i){return e&&BP(n.prototype,e),i&&BP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function Hee(n){return Vee(n)||jee(n)||Qee(n)||Wee()}function Vee(n){if(Array.isArray(n))return VT(n)}function jee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Qee(n,e){if(n){if(typeof n=="string")return VT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return VT(n,e)}}function VT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function Wee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kee(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xee(n){var e=Kee(n,"string");return typeof e=="symbol"?e:String(e)}var Yee=123,qee=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},A5=function(e,i,s){return(e<<16)+(i<<8)+s},$ee=function(e){var i=wi(e).toRgb(),s=i.r,o=i.g,l=i.b;return A5(s,o,l)},DP=function(e,i){return e*Yee%Math.pow(2,i)},Jee=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Gee(this,n),this.csBits=e,this.registry=["__reserved for background__"]}return zee(n,[{key:"register",value:function(i){if(this.registry.length>=Math.pow(2,24-this.csBits))return null;var s=this.registry.length,o=DP(s,this.csBits),l=qee(s+(o<<24-this.csBits));return this.registry.push(i),l}},{key:"lookup",value:function(i){var s=typeof i=="string"?$ee(i):A5.apply(void 0,Hee(i));if(!s)return null;var o=s&Math.pow(2,24-this.csBits)-1,l=s>>24-this.csBits&Math.pow(2,this.csBits)-1;return DP(o,this.csBits)!==l||o>=this.registry.length?null:this.registry[o]}}]),n}();const{abs:dv,cos:ch,sin:hg,acos:Zee,atan2:fv,sqrt:Cd,pow:jl}=Math;function pv(n){return n<0?-jl(-n,1/3):jl(n,1/3)}const v5=Math.PI,PE=2*v5,Md=v5/2,ete=1e-6,sS=Number.MAX_SAFE_INTEGER||9007199254740991,oS=Number.MIN_SAFE_INTEGER||-9007199254740991,tte={x:0,y:0,z:0},On={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const i=e(n);let s=i.x*i.x+i.y*i.y;return typeof i.z<"u"&&(s+=i.z*i.z),Cd(s)},compute:function(n,e,i){if(n===0)return e[0].t=0,e[0];const s=e.length-1;if(n===1)return e[s].t=1,e[s];const o=1-n;let l=e;if(s===0)return e[0].t=n,e[0];if(s===1){const d={x:o*l[0].x+n*l[1].x,y:o*l[0].y+n*l[1].y,t:n};return i&&(d.z=o*l[0].z+n*l[1].z),d}if(s<4){let d=o*o,u=n*n,f,A,g,y=0;s===2?(l=[l[0],l[1],l[2],tte],f=d,A=o*n*2,g=u):s===3&&(f=d*o,A=d*n*3,g=o*u*3,y=n*u);const v={x:f*l[0].x+A*l[1].x+g*l[2].x+y*l[3].x,y:f*l[0].y+A*l[1].y+g*l[2].y+y*l[3].y,t:n};return i&&(v.z=f*l[0].z+A*l[1].z+g*l[2].z+y*l[3].z),v}const c=JSON.parse(JSON.stringify(e));for(;c.length>1;){for(let d=0;d<c.length-1;d++)c[d]={x:c[d].x+(c[d+1].x-c[d].x)*n,y:c[d].y+(c[d+1].y-c[d].y)*n},typeof c[d].z<"u"&&(c[d].z=c[d].z+(c[d+1].z-c[d].z)*n);c.splice(c.length-1,1)}return c[0].t=n,c[0]},computeWithRatios:function(n,e,i,s){const o=1-n,l=i,c=e;let d=l[0],u=l[1],f=l[2],A=l[3],g;if(d*=o,u*=n,c.length===2)return g=d+u,{x:(d*c[0].x+u*c[1].x)/g,y:(d*c[0].y+u*c[1].y)/g,z:s?(d*c[0].z+u*c[1].z)/g:!1,t:n};if(d*=o,u*=2*o,f*=n*n,c.length===3)return g=d+u+f,{x:(d*c[0].x+u*c[1].x+f*c[2].x)/g,y:(d*c[0].y+u*c[1].y+f*c[2].y)/g,z:s?(d*c[0].z+u*c[1].z+f*c[2].z)/g:!1,t:n};if(d*=o,u*=1.5*o,f*=3*o,A*=n*n*n,c.length===4)return g=d+u+f+A,{x:(d*c[0].x+u*c[1].x+f*c[2].x+A*c[3].x)/g,y:(d*c[0].y+u*c[1].y+f*c[2].y+A*c[3].y)/g,z:s?(d*c[0].z+u*c[1].z+f*c[2].z+A*c[3].z)/g:!1,t:n}},derive:function(n,e){const i=[];for(let s=n,o=s.length,l=o-1;o>1;o--,l--){const c=[];for(let d=0,u;d<l;d++)u={x:l*(s[d+1].x-s[d].x),y:l*(s[d+1].y-s[d].y)},e&&(u.z=l*(s[d+1].z-s[d].z)),c.push(u);i.push(c),s=c}return i},between:function(n,e,i){return e<=n&&n<=i||On.approximately(n,e)||On.approximately(n,i)},approximately:function(n,e,i){return dv(n-e)<=(i||ete)},length:function(n){const i=On.Tvalues.length;let s=0;for(let o=0,l;o<i;o++)l=.5*On.Tvalues[o]+.5,s+=On.Cvalues[o]*On.arcfn(l,n);return .5*s},map:function(n,e,i,s,o){const l=i-e,c=o-s,d=n-e,u=d/l;return s+c*u},lerp:function(n,e,i){const s={x:e.x+n*(i.x-e.x),y:e.y+n*(i.y-e.y)};return e.z!==void 0&&i.z!==void 0&&(s.z=e.z+n*(i.z-e.z)),s},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(On.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,i){const s=e.x-n.x,o=e.y-n.y,l=i.x-n.x,c=i.y-n.y,d=s*c-o*l,u=s*l+o*c;return fv(d,u)},round:function(n,e){const i=""+n,s=i.indexOf(".");return parseFloat(i.substring(0,s+1+e))},dist:function(n,e){const i=n.x-e.x,s=n.y-e.y;return Cd(i*i+s*s)},closest:function(n,e){let i=jl(2,63),s,o;return n.forEach(function(l,c){o=On.dist(e,l),o<i&&(i=o,s=c)}),{mdist:i,mpos:s}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const i=jl(n,e)+jl(1-n,e),s=i-1;return dv(s/i)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const i=jl(1-n,e),s=jl(n,e)+i;return i/s},lli8:function(n,e,i,s,o,l,c,d){const u=(n*s-e*i)*(o-c)-(n-i)*(o*d-l*c),f=(n*s-e*i)*(l-d)-(e-s)*(o*d-l*c),A=(n-i)*(l-d)-(e-s)*(o-c);return A==0?!1:{x:u/A,y:f/A}},lli4:function(n,e,i,s){const o=n.x,l=n.y,c=e.x,d=e.y,u=i.x,f=i.y,A=s.x,g=s.y;return On.lli8(o,l,c,d,u,f,A,g)},lli:function(n,e){return On.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new _s(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=sS,i=sS,s=oS,o=oS;return n.forEach(function(l){const c=l.bbox();e>c.x.min&&(e=c.x.min),i>c.y.min&&(i=c.y.min),s<c.x.max&&(s=c.x.max),o<c.y.max&&(o=c.y.max)}),{x:{min:e,mid:(e+s)/2,max:s,size:s-e},y:{min:i,mid:(i+o)/2,max:o,size:o-i}}},shapeintersections:function(n,e,i,s,o){if(!On.bboxoverlap(e,s))return[];const l=[],c=[n.startcap,n.forward,n.back,n.endcap],d=[i.startcap,i.forward,i.back,i.endcap];return c.forEach(function(u){u.virtual||d.forEach(function(f){if(f.virtual)return;const A=u.intersects(f,o);A.length>0&&(A.c1=u,A.c2=f,A.s1=n,A.s2=i,l.push(A))})}),l},makeshape:function(n,e,i){const s=e.points.length,o=n.points.length,l=On.makeline(e.points[s-1],n.points[0]),c=On.makeline(n.points[o-1],e.points[0]),d={startcap:l,forward:n,back:e,endcap:c,bbox:On.findbbox([l,n,e,c])};return d.intersections=function(u){return On.shapeintersections(d,d.bbox,u,u.bbox,i)},d},getminmax:function(n,e,i){if(!i)return{min:0,max:0};let s=sS,o=oS,l,c;i.indexOf(0)===-1&&(i=[0].concat(i)),i.indexOf(1)===-1&&i.push(1);for(let d=0,u=i.length;d<u;d++)l=i[d],c=n.get(l),c[e]<s&&(s=c[e]),c[e]>o&&(o=c[e]);return{min:s,mid:(s+o)/2,max:o,size:o-s}},align:function(n,e){const i=e.p1.x,s=e.p1.y,o=-fv(e.p2.y-s,e.p2.x-i),l=function(c){return{x:(c.x-i)*ch(o)-(c.y-s)*hg(o),y:(c.x-i)*hg(o)+(c.y-s)*ch(o)}};return n.map(l)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const i=n.length-1,s=On.align(n,e),o=function(P){return 0<=P&&P<=1};if(i===2){const P=s[0].y,k=s[1].y,D=s[2].y,z=P-2*k+D;if(z!==0){const Y=-Cd(k*k-P*D),ne=-P+k,O=-(Y+ne)/z,F=-(-Y+ne)/z;return[O,F].filter(o)}else if(k!==D&&z===0)return[(2*k-D)/(2*k-2*D)].filter(o);return[]}const l=s[0].y,c=s[1].y,d=s[2].y,u=s[3].y;let f=-l+3*c-3*d+u,A=3*l-6*c+3*d,g=-3*l+3*c,y=l;if(On.approximately(f,0)){if(On.approximately(A,0))return On.approximately(g,0)?[]:[-y/g].filter(o);const P=Cd(g*g-4*A*y),k=2*A;return[(P-g)/k,(-g-P)/k].filter(o)}A/=f,g/=f,y/=f;const v=(3*g-A*A)/3,_=v/3,x=(2*A*A*A-9*A*g+27*y)/27,b=x/2,m=b*b+_*_*_;let S,C,M,T,N;if(m<0){const P=-v/3,k=P*P*P,D=Cd(k),z=-x/(2*D),Y=z<-1?-1:z>1?1:z,ne=Zee(Y),O=pv(D),F=2*O;return M=F*ch(ne/3)-A/3,T=F*ch((ne+PE)/3)-A/3,N=F*ch((ne+2*PE)/3)-A/3,[M,T,N].filter(o)}else{if(m===0)return S=b<0?pv(-b):-pv(b),M=2*S-A/3,T=-S-A/3,[M,T].filter(o);{const P=Cd(m);return S=pv(-b+P),C=pv(b+P),[S-C-A/3].filter(o)}}},droots:function(n){if(n.length===3){const e=n[0],i=n[1],s=n[2],o=e-2*i+s;if(o!==0){const l=-Cd(i*i-e*s),c=-e+i,d=-(l+c)/o,u=-(-l+c)/o;return[d,u]}else if(i!==s&&o===0)return[(2*i-s)/(2*(i-s))];return[]}if(n.length===2){const e=n[0],i=n[1];return e!==i?[e/(e-i)]:[]}return[]},curvature:function(n,e,i,s,o){let l,c,d,u,f=0,A=0;const g=On.compute(n,e),y=On.compute(n,i),v=g.x*g.x+g.y*g.y;if(s?(l=Cd(jl(g.y*y.z-y.y*g.z,2)+jl(g.z*y.x-y.z*g.x,2)+jl(g.x*y.y-y.x*g.y,2)),c=jl(v+g.z*g.z,3/2)):(l=g.x*y.y-g.y*y.x,c=jl(v,3/2)),l===0||c===0)return{k:0,r:0};if(f=l/c,A=c/l,!o){const _=On.curvature(n-.001,e,i,s,!0).k,x=On.curvature(n+.001,e,i,s,!0).k;u=(x-f+(f-_))/2,d=(dv(x-f)+dv(f-_))/2}return{k:f,r:A,dk:u,adk:d}},inflections:function(n){if(n.length<4)return[];const e=On.align(n,{p1:n[0],p2:n.slice(-1)[0]}),i=e[2].x*e[1].y,s=e[3].x*e[1].y,o=e[1].x*e[2].y,l=e[3].x*e[2].y,c=18*(-3*i+2*s+3*o-l),d=18*(3*i-s-3*o),u=18*(o-i);if(On.approximately(c,0)){if(!On.approximately(d,0)){let y=-u/d;if(0<=y&&y<=1)return[y]}return[]}const f=2*c;if(On.approximately(f,0))return[];const A=d*d-4*c*u;if(A<0)return[];const g=Math.sqrt(A);return[(g-d)/f,-(d+g)/f].filter(function(y){return 0<=y&&y<=1})},bboxoverlap:function(n,e){const i=["x","y"],s=i.length;for(let o=0,l,c,d,u;o<s;o++)if(l=i[o],c=n[l].mid,d=e[l].mid,u=(n[l].size+e[l].size)/2,dv(c-d)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,i){const s=n.bbox(),o=e.bbox(),l=1e5,c=i||.5;if(s.x.size+s.y.size<c&&o.x.size+o.y.size<c)return[(l*(n._t1+n._t2)/2|0)/l+"/"+(l*(e._t1+e._t2)/2|0)/l];let d=n.split(.5),u=e.split(.5),f=[{left:d.left,right:u.left},{left:d.left,right:u.right},{left:d.right,right:u.right},{left:d.right,right:u.left}];f=f.filter(function(g){return On.bboxoverlap(g.left.bbox(),g.right.bbox())});let A=[];return f.length===0||(f.forEach(function(g){A=A.concat(On.pairiteration(g.left,g.right,c))}),A=A.filter(function(g,y){return A.indexOf(g)===y})),A},getccenter:function(n,e,i){const s=e.x-n.x,o=e.y-n.y,l=i.x-e.x,c=i.y-e.y,d=s*ch(Md)-o*hg(Md),u=s*hg(Md)+o*ch(Md),f=l*ch(Md)-c*hg(Md),A=l*hg(Md)+c*ch(Md),g=(n.x+e.x)/2,y=(n.y+e.y)/2,v=(e.x+i.x)/2,_=(e.y+i.y)/2,x=g+d,b=y+u,m=v+f,S=_+A,C=On.lli8(g,y,x,b,v,_,m,S),M=On.dist(C,n);let T=fv(n.y-C.y,n.x-C.x),N=fv(e.y-C.y,e.x-C.x),P=fv(i.y-C.y,i.x-C.x),k;return T<P?((T>N||N>P)&&(T+=PE),T>P&&(k=P,P=T,T=k)):P<N&&N<T?(k=P,P=T,T=k):P+=PE,C.s=T,C.e=P,C.r=M,C},numberSort:function(n,e){return n-e}};class zv{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return On.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,i){return e+i})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var i=e[0].bbox(),s=1;s<e.length;s++)On.expandbox(i,e[s].bbox());return i}offset(e){const i=[];return this.curves.forEach(function(s){i.push(...s.offset(e))}),new zv(i)}}const{abs:mv,min:PP,max:OP,cos:nte,sin:ite,acos:rte,sqrt:gv}=Math,ste=Math.PI;class _s{constructor(e){let i=e&&e.forEach?e:Array.from(arguments).slice(),s=!1;if(typeof i[0]=="object"){s=i.length;const v=[];i.forEach(function(_){["x","y","z"].forEach(function(x){typeof _[x]<"u"&&v.push(_[x])})}),i=v}let o=!1;const l=i.length;if(s){if(s>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(l!==6&&l!==8&&l!==9&&l!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const c=this._3d=!o&&(l===9||l===12)||e&&e[0]&&typeof e[0].z<"u",d=this.points=[];for(let v=0,_=c?3:2;v<l;v+=_){var u={x:i[v],y:i[v+1]};c&&(u.z=i[v+2]),d.push(u)}const f=this.order=d.length-1,A=this.dims=["x","y"];c&&A.push("z"),this.dimlen=A.length;const g=On.align(d,{p1:d[0],p2:d[f]}),y=On.dist(d[0],d[f]);this._linear=g.reduce((v,_)=>v+mv(_.y),0)<y/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,i,s,o){if(typeof o>"u"&&(o=.5),o===0)return new _s(i,i,s);if(o===1)return new _s(e,i,i);const l=_s.getABC(2,e,i,s,o);return new _s(e,l.A,s)}static cubicFromPoints(e,i,s,o,l){typeof o>"u"&&(o=.5);const c=_s.getABC(3,e,i,s,o);typeof l>"u"&&(l=On.dist(i,c.C));const d=l*(1-o)/o,u=On.dist(e,s),f=(s.x-e.x)/u,A=(s.y-e.y)/u,g=l*f,y=l*A,v=d*f,_=d*A,x={x:i.x-g,y:i.y-y},b={x:i.x+v,y:i.y+_},m=c.A,S={x:m.x+(x.x-m.x)/(1-o),y:m.y+(x.y-m.y)/(1-o)},C={x:m.x+(b.x-m.x)/o,y:m.y+(b.y-m.y)/o},M={x:e.x+(S.x-e.x)/o,y:e.y+(S.y-e.y)/o},T={x:s.x+(C.x-s.x)/(1-o),y:s.y+(C.y-s.y)/(1-o)};return new _s(e,M,T,s)}static getUtils(){return On}getUtils(){return _s.getUtils()}static get PolyBezier(){return zv}valueOf(){return this.toString()}toString(){return On.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,i=e[0].x,s=e[0].y,o=["M",i,s,this.order===2?"Q":"C"];for(let l=1,c=e.length;l<c;l++)o.push(e[l].x),o.push(e[l].y);return o.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,i){return""+i+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=On.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,i=On.angle(e[0],e[this.order],e[1]);this.clockwise=i>0}length(){return On.length(this.derivative.bind(this))}static getABC(e=2,i,s,o,l=.5){const c=On.projectionratio(l,e),d=1-c,u={x:c*i.x+d*o.x,y:c*i.y+d*o.y},f=On.abcratio(l,e);return{A:{x:s.x+(s.x-u.x)/f,y:s.y+(s.y-u.y)/f},B:s,C:u,S:i,E:o}}getABC(e,i){i=i||this.get(e);let s=this.points[0],o=this.points[this.order];return _s.getABC(this.order,s,i,o,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let i=0,s,o;i<e;i++)o=i/(e-1),s=this.compute(o),s.t=o,this._lut.push(s);return this._lut}on(e,i){i=i||5;const s=this.getLUT(),o=[];for(let l=0,c,d=0;l<s.length;l++)c=s[l],On.dist(c,e)<i&&(o.push(c),d+=l/s.length);return o.length?t/=o.length:!1}project(e){const i=this.getLUT(),s=i.length-1,o=On.closest(i,e),l=o.mpos,c=(l-1)/s,d=(l+1)/s,u=.1/s;let f=o.mdist,A=c,g=A,y;f+=1;for(let v;A<d+u;A+=u)y=this.compute(A),v=On.dist(e,y),v<f&&(f=v,g=A);return g=g<0?0:g>1?1:g,y=this.compute(g),y.t=g,y.d=f,y}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?On.computeWithRatios(e,this.points,this.ratios,this._3d):On.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,i=[e[0]],s=e.length;for(let o=1,l,c;o<s;o++)l=e[o],c=e[o-1],i[o]={x:(s-o)/s*l.x+o/s*c.x,y:(s-o)/s*l.y+o/s*c.y};return i[s]=e[s-1],new _s(i)}derivative(e){return On.compute(e,this.dpoints[0],this._3d)}dderivative(e){return On.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new _s(On.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return On.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return On.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const i=this.derivative(e),s=gv(i.x*i.x+i.y*i.y);return{t:e,x:-i.y/s,y:i.x/s}}__normal3(e){const i=this.derivative(e),s=this.derivative(e+.01),o=gv(i.x*i.x+i.y*i.y+i.z*i.z),l=gv(s.x*s.x+s.y*s.y+s.z*s.z);i.x/=o,i.y/=o,i.z/=o,s.x/=l,s.y/=l,s.z/=l;const c={x:s.y*i.z-s.z*i.y,y:s.z*i.x-s.x*i.z,z:s.x*i.y-s.y*i.x},d=gv(c.x*c.x+c.y*c.y+c.z*c.z);c.x/=d,c.y/=d,c.z/=d;const u=[c.x*c.x,c.x*c.y-c.z,c.x*c.z+c.y,c.x*c.y+c.z,c.y*c.y,c.y*c.z-c.x,c.x*c.z-c.y,c.y*c.z+c.x,c.z*c.z];return{t:e,x:u[0]*i.x+u[1]*i.y+u[2]*i.z,y:u[3]*i.x+u[4]*i.y+u[5]*i.z,z:u[6]*i.x+u[7]*i.y+u[8]*i.z}}hull(e){let i=this.points,s=[],o=[],l=0;for(o[l++]=i[0],o[l++]=i[1],o[l++]=i[2],this.order===3&&(o[l++]=i[3]);i.length>1;){s=[];for(let c=0,d,u=i.length-1;c<u;c++)d=On.lerp(e,i[c],i[c+1]),o[l++]=d,s.push(d);i=s}return o}split(e,i){if(e===0&&i)return this.split(i).left;if(i===1)return this.split(e).right;const s=this.hull(e),o={left:this.order===2?new _s([s[0],s[3],s[5]]):new _s([s[0],s[4],s[7],s[9]]),right:this.order===2?new _s([s[5],s[4],s[2]]):new _s([s[9],s[8],s[6],s[3]]),span:s};return o.left._t1=On.map(0,0,1,this._t1,this._t2),o.left._t2=On.map(e,0,1,this._t1,this._t2),o.right._t1=On.map(e,0,1,this._t1,this._t2),o.right._t2=On.map(1,0,1,this._t1,this._t2),i?(i=On.map(i,e,1,0,1),o.right.split(i).left):o}extrema(){const e={};let i=[];return this.dims.forEach((function(s){let o=function(c){return c[s]},l=this.dpoints[0].map(o);e[s]=On.droots(l),this.order===3&&(l=this.dpoints[1].map(o),e[s]=e[s].concat(On.droots(l))),e[s]=e[s].filter(function(c){return c>=0&&c<=1}),i=i.concat(e[s].sort(On.numberSort))}).bind(this)),e.values=i.sort(On.numberSort).filter(function(s,o){return i.indexOf(s)===o}),e}bbox(){const e=this.extrema(),i={};return this.dims.forEach((function(s){i[s]=On.getminmax(this,s,e[s])}).bind(this)),i}overlaps(e){const i=this.bbox(),s=e.bbox();return On.bboxoverlap(i,s)}offset(e,i){if(typeof i<"u"){const s=this.get(e),o=this.normal(e),l={c:s,n:o,x:s.x+o.x*i,y:s.y+o.y*i};return this._3d&&(l.z=s.z+o.z*i),l}if(this._linear){const s=this.normal(0),o=this.points.map(function(l){const c={x:l.x+e*s.x,y:l.y+e*s.y};return l.z&&s.z&&(c.z=l.z+e*s.z),c});return[new _s(o)]}return this.reduce().map(function(s){return s._linear?s.offset(e)[0]:s.scale(e)})}simple(){if(this.order===3){const o=On.angle(this.points[0],this.points[3],this.points[1]),l=On.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&l<0||o<0&&l>0)return!1}const e=this.normal(0),i=this.normal(1);let s=e.x*i.x+e.y*i.y;return this._3d&&(s+=e.z*i.z),mv(rte(s))<ste/3}reduce(){let e,i=0,s=0,o=.01,l,c=[],d=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),i=u[0],e=1;e<u.length;e++)s=u[e],l=this.split(i,s),l._t1=i,l._t2=s,c.push(l),i=s;return c.forEach(function(f){for(i=0,s=0;s<=1;)for(s=i+o;s<=1+o;s+=o)if(l=f.split(i,s),!l.simple()){if(s-=o,mv(i-s)<o)return[];l=f.split(i,s),l._t1=On.map(i,0,1,f._t1,f._t2),l._t2=On.map(s,0,1,f._t1,f._t2),d.push(l),i=s;break}i<1&&(l=f.split(i,1),l._t1=On.map(i,0,1,f._t1,f._t2),l._t2=f._t2,d.push(l))}),d}translate(e,i,s){s=typeof s=="number"?s:i;const o=this.order;let l=this.points.map((c,d)=>(1-d/o)*i+d/o*s);return new _s(this.points.map((c,d)=>({x:c.x+e.x*l[d],y:c.y+e.y*l[d]})))}scale(e){const i=this.order;let s=!1;if(typeof e=="function"&&(s=e),s&&i===2)return this.raise().scale(s);const o=this.clockwise,l=this.points;if(this._linear)return this.translate(this.normal(0),s?s(0):e,s?s(1):e);const c=s?s(0):e,d=s?s(1):e,u=[this.offset(0,10),this.offset(1,10)],f=[],A=On.lli4(u[0],u[0].c,u[1],u[1].c);if(!A)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(g){const y=f[g*i]=On.copy(l[g*i]);y.x+=(g?d:c)*u[g].n.x,y.y+=(g?d:c)*u[g].n.y}),s?([0,1].forEach(function(g){if(!(i===2&&g)){var y=l[g+1],v={x:y.x-A.x,y:y.y-A.y},_=s?s((g+1)/i):e;s&&!o&&(_=-_);var x=gv(v.x*v.x+v.y*v.y);v.x/=x,v.y/=x,f[g+1]={x:y.x+_*v.x,y:y.y+_*v.y}}}),new _s(f)):([0,1].forEach(g=>{if(i===2&&g)return;const y=f[g*i],v=this.derivative(g),_={x:y.x+v.x,y:y.y+v.y};f[g+1]=On.lli4(y,_,A,l[g+1])}),new _s(f))}outline(e,i,s,o){if(i=i===void 0?e:i,this._linear){const T=this.normal(0),N=this.points[0],P=this.points[this.points.length-1];let k,D,z;s===void 0&&(s=e,o=i),k={x:N.x+T.x*e,y:N.y+T.y*e},z={x:P.x+T.x*s,y:P.y+T.y*s},D={x:(k.x+z.x)/2,y:(k.y+z.y)/2};const Y=[k,D,z];k={x:N.x-T.x*i,y:N.y-T.y*i},z={x:P.x-T.x*o,y:P.y-T.y*o},D={x:(k.x+z.x)/2,y:(k.y+z.y)/2};const ne=[z,D,k],O=On.makeline(ne[2],Y[0]),F=On.makeline(Y[2],ne[0]),U=[O,new _s(Y),F,new _s(ne)];return new zv(U)}const l=this.reduce(),c=l.length,d=[];let u=[],f,A=0,g=this.length();const y=typeof s<"u"&&typeof o<"u";function v(T,N,P,k,D){return function(z){const Y=k/P,ne=(k+D)/P,O=N-T;return On.map(z,0,1,T+Y*O,T+ne*O)}}l.forEach(function(T){const N=T.length();y?(d.push(T.scale(v(e,s,g,A,N))),u.push(T.scale(v(-i,-o,g,A,N)))):(d.push(T.scale(e)),u.push(T.scale(-i))),A+=N}),u=u.map(function(T){return f=T.points,f[3]?T.points=[f[3],f[2],f[1],f[0]]:T.points=[f[2],f[1],f[0]],T}).reverse();const _=d[0].points[0],x=d[c-1].points[d[c-1].points.length-1],b=u[c-1].points[u[c-1].points.length-1],m=u[0].points[0],S=On.makeline(b,_),C=On.makeline(x,m),M=[S].concat(d).concat([C]).concat(u);return new zv(M)}outlineshapes(e,i,s){i=i||e;const o=this.outline(e,i).curves,l=[];for(let c=1,d=o.length;c<d/2;c++){const u=On.makeshape(o[c],o[d-c],s);u.startcap.virtual=c>1,u.endcap.virtual=c<d/2-1,l.push(u)}return l}intersects(e,i){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof _s&&(e=e.reduce()),this.curveintersects(this.reduce(),e,i)):this.selfintersects(i)}lineIntersects(e){const i=PP(e.p1.x,e.p2.x),s=PP(e.p1.y,e.p2.y),o=OP(e.p1.x,e.p2.x),l=OP(e.p1.y,e.p2.y);return On.roots(this.points,e).filter(c=>{var d=this.get(c);return On.between(d.x,i,o)&&On.between(d.y,s,l)})}selfintersects(e){const i=this.reduce(),s=i.length-2,o=[];for(let l=0,c,d,u;l<s;l++)d=i.slice(l,l+1),u=i.slice(l+2),c=this.curveintersects(d,u,e),o.push(...c);return o}curveintersects(e,i,s){const o=[];e.forEach(function(c){i.forEach(function(d){c.overlaps(d)&&o.push({left:c,right:d})})});let l=[];return o.forEach(function(c){const d=On.pairiteration(c.left,c.right,s);d.length>0&&(l=l.concat(d))}),l}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,i,s,o){const l=(o-s)/4,c=this.get(s+l),d=this.get(o-l),u=On.dist(e,i),f=On.dist(e,c),A=On.dist(e,d);return mv(f-u)+mv(A-u)}_iterate(e,i){let s=0,o=1,l;do{l=0,o=1;let c=this.get(s),d,u,f,A,g=!1,y=!1,v,_=o,x=1;do if(y=g,A=f,_=(s+o)/2,d=this.get(_),u=this.get(o),f=On.getccenter(c,d,u),f.interval={start:s,end:o},g=this._error(f,c,s,o)<=e,v=y&&!g,v||(x=o),g){if(o>=1){if(f.interval.end=x=1,A=f,o>1){let m={x:f.x+f.r*nte(f.e),y:f.y+f.r*ite(f.e)};f.e+=On.angle({x:f.x,y:f.y},m,this.get(1))}break}o=o+(o-s)/2}else o=_;while(!v&&l++<100);if(l>=100)break;A=A||f,i.push(A),s=x}while(o<1);return i}}function ote(n,e){e===void 0&&(e={});var i=e.insertAt;if(!(!n||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var ate=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .graph-tooltip {
  position: absolute;
  top: 0;
  font-family: sans-serif;
  font-size: 16px;
  padding: 4px;
  border-radius: 3px;
  color: #eee;
  background: rgba(0,0,0,0.65);
  visibility: hidden; /* by default */
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;ote(ate);function lte(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function FP(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,s)}return i}function dg(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(i),!0).forEach(function(s){Ay(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):FP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function jT(n){"@babel/helpers - typeof";return jT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jT(n)}function Ay(n,e,i){return e=gte(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function QT(n,e){return QT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},QT(n,e)}function cte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hv(n,e,i){return cte()?Hv=Reflect.construct.bind():Hv=function(o,l,c){var d=[null];d.push.apply(d,l);var u=Function.bind.apply(o,d),f=new u;return c&&QT(f,c.prototype),f},Hv.apply(null,arguments)}function Vv(n,e){return hte(n)||lte(n,e)||y5(n,e)||pte()}function Yl(n){return ute(n)||dte(n)||y5(n)||fte()}function ute(n){if(Array.isArray(n))return WT(n)}function hte(n){if(Array.isArray(n))return n}function dte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function y5(n,e){if(n){if(typeof n=="string")return WT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return WT(n,e)}}function WT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function fte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mte(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gte(n){var e=mte(n,"string");return typeof e=="symbol"?e:String(e)}var Ate=AI(Dk);function kP(n,e,i){!e||typeof i!="string"||n.filter(function(s){return!s[i]}).forEach(function(s){s[i]=Ate(e(s))})}function vte(n,e){var i=n.nodes,s=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=o.nodeFilter,c=l===void 0?function(){return!0}:l,d=o.onLoopError,u=d===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:d,f={};i.forEach(function(v){return f[e(v)]={data:v,out:[],depth:-1,skip:!c(v)}}),s.forEach(function(v){var _=v.source,x=v.target,b=M(_),m=M(x);if(!f.hasOwnProperty(b))throw"Missing source node with id: ".concat(b);if(!f.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var S=f[b],C=f[m];S.out.push(C);function M(T){return jT(T)==="object"?e(T):T}});var A=[];y(Object.values(f));var g=Object.assign.apply(Object,[{}].concat(Yl(Object.entries(f).filter(function(v){var _=Vv(v,2),x=_[1];return!x.skip}).map(function(v){var _=Vv(v,2),x=_[0],b=_[1];return Ay({},x,b.depth)}))));return g;function y(v){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=function(){var M=v[m];if(_.indexOf(M)!==-1){var T=[].concat(Yl(_.slice(_.indexOf(M))),[M]).map(function(N){return e(N.data)});return A.some(function(N){return N.length===T.length&&N.every(function(P,k){return P===T[k]})})||(A.push(T),u(T)),1}x>M.depth&&(M.depth=x,y(M.out,[].concat(Yl(_),[M]),x+(M.skip?0:1)))},m=0,S=v.length;m<S;m++)b()}}var yte=2,ra=function(e,i){return i.onNeedsRedraw&&i.onNeedsRedraw()},NP=function(e,i){if(!i.isShadow){var s=xi(i.linkDirectionalParticles);i.graphData.links.forEach(function(o){var l=Math.round(Math.abs(s(o)));l?o.__photons=Yl(Array(l)).map(function(){return{}}):delete o.__photons})}},V_=Lp({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,i){i.engineRunning=!1,NP(e,i)}},dagMode:{onChange:function(e,i){!e&&(i.graphData.nodes||[]).forEach(function(s){return s.fx=s.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ra},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ra},nodeColor:{default:"color",triggerUpdate:!1,onChange:ra},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ra},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ra},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ra},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ra},linkColor:{default:"color",triggerUpdate:!1,onChange:ra},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ra},linkWidth:{default:1,triggerUpdate:!1,onChange:ra},linkCurvature:{default:0,triggerUpdate:!1,onChange:ra},linkCanvasObject:{triggerUpdate:!1,onChange:ra},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ra},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ra},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ra},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ra},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:NP},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,i){i.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,i){i.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,i){i.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,i,s){return s===void 0?e.forceLayout.force(i):(e.forceLayout.force(i,s),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&i(),o(),!e.isShadow&&l(),!e.isShadow&&c(),s(),this;function i(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function s(){var d=xi(e.nodeVisibility),u=xi(e.nodeVal),f=xi(e.nodeColor),A=xi(e.nodeCanvasObjectMode),g=e.ctx,y=e.isShadow/e.globalScale,v=e.graphData.nodes.filter(d);g.save(),v.forEach(function(_){var x=A(_);if(e.nodeCanvasObject&&(x==="before"||x==="replace")&&(e.nodeCanvasObject(_,g,e.globalScale),x==="replace")){g.restore();return}var b=Math.sqrt(Math.max(0,u(_)||1))*e.nodeRelSize+y;g.beginPath(),g.arc(_.x,_.y,b,0,2*Math.PI,!1),g.fillStyle=f(_)||"rgba(31, 120, 180, 0.92)",g.fill(),e.nodeCanvasObject&&x==="after"&&e.nodeCanvasObject(_,e.ctx,e.globalScale)}),g.restore()}function o(){var d=xi(e.linkVisibility),u=xi(e.linkColor),f=xi(e.linkWidth),A=xi(e.linkLineDash),g=xi(e.linkCurvature),y=xi(e.linkCanvasObjectMode),v=e.ctx,_=e.isShadow*2,x=e.graphData.links.filter(d);x.forEach(N);var b=[],m=[],S=x;if(e.linkCanvasObject){var C=[],M=[];x.forEach(function(P){return({before:b,after:m,replace:C}[y(P)]||M).push(P)}),S=[].concat(Yl(b),m,M),b=b.concat(C)}v.save(),b.forEach(function(P){return e.linkCanvasObject(P,v,e.globalScale)}),v.restore();var T=_T(S,[u,f,A]);v.save(),Object.entries(T).forEach(function(P){var k=Vv(P,2),D=k[0],z=k[1],Y=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(z).forEach(function(ne){var O=Vv(ne,2),F=O[0],U=O[1],G=(F||1)/e.globalScale+_;Object.entries(U).forEach(function(V){var K=Vv(V,2);K[0];var W=K[1],J=A(W[0]);v.beginPath(),W.forEach(function(ee){var he=ee.source,me=ee.target;if(!(!he||!me||!he.hasOwnProperty("x")||!me.hasOwnProperty("x"))){v.moveTo(he.x,he.y);var Be=ee.__controlPoints;Be?v[Be.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(v,Yl(Be).concat([me.x,me.y])):v.lineTo(me.x,me.y)}}),v.strokeStyle=Y,v.lineWidth=G,v.setLineDash(J||[]),v.stroke()})})}),v.restore(),v.save(),m.forEach(function(P){return e.linkCanvasObject(P,v,e.globalScale)}),v.restore();function N(P){var k=g(P);if(!k){P.__controlPoints=null;return}var D=P.source,z=P.target;if(!(!D||!z||!D.hasOwnProperty("x")||!z.hasOwnProperty("x"))){var Y=Math.sqrt(Math.pow(z.x-D.x,2)+Math.pow(z.y-D.y,2));if(Y>0){var ne=Math.atan2(z.y-D.y,z.x-D.x),O=Y*k,F={x:(D.x+z.x)/2+O*Math.cos(ne-Math.PI/2),y:(D.y+z.y)/2+O*Math.sin(ne-Math.PI/2)};P.__controlPoints=[F.x,F.y]}else{var U=k*70;P.__controlPoints=[z.x,z.y-U,z.x+U,z.y]}}}}function l(){var d=1.6,u=.2,f=xi(e.linkDirectionalArrowLength),A=xi(e.linkDirectionalArrowRelPos),g=xi(e.linkVisibility),y=xi(e.linkDirectionalArrowColor||e.linkColor),v=xi(e.nodeVal),_=e.ctx;_.save(),e.graphData.links.filter(g).forEach(function(x){var b=f(x);if(!(!b||b<0)){var m=x.source,S=x.target;if(!(!m||!S||!m.hasOwnProperty("x")||!S.hasOwnProperty("x"))){var C=Math.sqrt(Math.max(0,v(m)||1))*e.nodeRelSize,M=Math.sqrt(Math.max(0,v(S)||1))*e.nodeRelSize,T=Math.min(1,Math.max(0,A(x))),N=y(x)||"rgba(0,0,0,0.28)",P=b/d/2,k=x.__controlPoints&&Hv(_s,[m.x,m.y].concat(Yl(x.__controlPoints),[S.x,S.y])),D=k?function(G){return k.get(G)}:function(G){return{x:m.x+(S.x-m.x)*G||0,y:m.y+(S.y-m.y)*G||0}},z=k?k.length():Math.sqrt(Math.pow(S.x-m.x,2)+Math.pow(S.y-m.y,2)),Y=C+b+(z-C-M-b)*T,ne=D(Y/z),O=D((Y-b)/z),F=D((Y-b*(1-u))/z),U=Math.atan2(ne.y-O.y,ne.x-O.x)-Math.PI/2;_.beginPath(),_.moveTo(ne.x,ne.y),_.lineTo(O.x+P*Math.cos(U),O.y+P*Math.sin(U)),_.lineTo(F.x,F.y),_.lineTo(O.x-P*Math.cos(U),O.y-P*Math.sin(U)),_.fillStyle=N,_.fill()}}}),_.restore()}function c(){var d=xi(e.linkDirectionalParticles),u=xi(e.linkDirectionalParticleSpeed),f=xi(e.linkDirectionalParticleWidth),A=xi(e.linkVisibility),g=xi(e.linkDirectionalParticleColor||e.linkColor),y=e.ctx;y.save(),e.graphData.links.filter(A).forEach(function(v){var _=d(v);if(!(!v.hasOwnProperty("__photons")||!v.__photons.length)){var x=v.source,b=v.target;if(!(!x||!b||!x.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var m=u(v),S=v.__photons||[],C=Math.max(0,f(v)/2)/Math.sqrt(e.globalScale),M=g(v)||"rgba(0,0,0,0.28)";y.fillStyle=M;var T=v.__controlPoints?Hv(_s,[x.x,x.y].concat(Yl(v.__controlPoints),[b.x,b.y])):null,N=0,P=!1;S.forEach(function(k){var D=!!k.__singleHop;if(k.hasOwnProperty("__progressRatio")||(k.__progressRatio=D?0:N/_),!D&&N++,k.__progressRatio+=m,k.__progressRatio>=1)if(!D)k.__progressRatio=k.__progressRatio%1;else{P=!0;return}var z=k.__progressRatio,Y=T?T.get(z):{x:x.x+(b.x-x.x)*z||0,y:x.y+(b.y-x.y)*z||0};y.beginPath(),y.arc(Y.x,Y.y,C,0,2*Math.PI,!1),y.fill()}),P&&(v.__photons=v.__photons.filter(function(k){return!k.__singleHop||k.__progressRatio<=1}))}}}),y.restore()}},emitParticle:function(e,i){return i&&(!i.__photons&&(i.__photons=[]),i.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:tk().force("link",JF()).force("charge",nk()).force("center",QF()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,i){i.ctx=e},update:function(e){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&kP(e.graphData.nodes,xi(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&kP(e.graphData.links,xi(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(A){A.source=A[e.linkSource],A.target=A[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(A){return A[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&vte(e.graphData,function(A){return A[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,Yl(Object.values(s||[]))),l=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*yte*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(e.dagMode){var c=function(g,y){return function(v){return g?(s[v[e.nodeId]]-o/2)*l*(y?-1:1):void 0}},d=c(["lr","rl"].indexOf(e.dagMode)!==-1,e.dagMode==="rl"),u=c(["td","bu"].indexOf(e.dagMode)!==-1,e.dagMode==="bu");e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(A){A.fx=d(A),A.fy=u(A)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?ik(function(A){var g=s[A[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-g:g)*l}).strength(function(A){return e.dagNodeFilter(A)?1:0}):null);for(var f=0;f<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);f++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function x5(n,e){var i=n instanceof Array?n:[n],s=new e;return s._destructor&&s._destructor(),{linkProp:function(l){return{default:s[l](),onChange:function(d,u){i.forEach(function(f){return u[f][l](d)})},triggerUpdate:!1}},linkMethod:function(l){return function(c){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];var A=[];return i.forEach(function(g){var y=c[g],v=y[l].apply(y,u);v!==y&&A.push(v)}),A.length?A[0]:this}}}}var xte=800,Ete=4,E5=x5("forceGraph",V_),_te=x5(["forceGraph","shadowGraph"],V_),bte=Object.assign.apply(Object,Yl(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Ay({},n,E5.linkProp(n))})).concat(Yl(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return Ay({},n,_te.linkProp(n))})))),wte=Object.assign.apply(Object,Yl(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Ay({},n,E5.linkMethod(n))})));function aS(n){if(n.canvas){var e=n.canvas.width,i=n.canvas.height;e===300&&i===150&&(e=i=0);var s=window.devicePixelRatio;e/=s,i/=s,[n.canvas,n.shadowCanvas].forEach(function(l){l.style.width="".concat(n.width,"px"),l.style.height="".concat(n.height,"px"),l.width=n.width*s,l.height=n.height*s,!e&&!i&&l.getContext("2d").scale(s,s)});var o=xu(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/o,(n.height-i)/2/o),n.needsRedraw=!0}}function _5(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function UP(n,e,i){n.save(),_5(n),n.clearRect(0,0,e,i),n.restore()}var Cte=Lp({props:dg({width:{default:window.innerWidth,onChange:function(e,i){return aS(i)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,i){return aS(i)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,i){[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(s),i.forceGraph.graphData(e),i.shadowGraph.graphData(e);function s(o){var l=o.type,c=o.objs;c.filter(function(d){if(!d.hasOwnProperty("__indexColor"))return!0;var u=i.colorTracker.lookup(d.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==d}).forEach(function(d){d.__indexColor=i.colorTracker.register({type:l,d})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,i){i.canvas&&e&&(i.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,i){i.shadowGraph.nodeCanvasObject(e?function(s,o,l){return e(s,s.__indexColor,o,l)}:null),i.flushShadowCanvas&&i.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,i){i.shadowGraph.linkCanvasObject(e?function(s,o,l){return e(s,s.__indexColor,o,l)}:null),i.flushShadowCanvas&&i.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,i){i.zoom.scaleExtent([e,i.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,i){i.zoom.scaleExtent([i.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,i){i.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},bte),aliases:{stopAnimation:"pauseAnimation"},methods:dg({graph2ScreenCoords:function(e,i,s){var o=xu(e.canvas);return{x:i*o.k+o.x,y:s*o.k+o.y}},screen2GraphCoords:function(e,i,s){var o=xu(e.canvas);return{x:(i-o.x)/o.k,y:(s-o.y)/o.k}},centerAt:function(e,i,s,o){if(!e.canvas)return null;if(i!==void 0||s!==void 0){var l=Object.assign({},i!==void 0?{x:i}:{},s!==void 0?{y:s}:{});return o?new z_(c()).to(l,o).easing(Mh.Quadratic.Out).onUpdate(d).start():d(l),this}return c();function c(){var u=xu(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function d(u){var f=u.x,A=u.y;e.zoom.translateTo(e.zoom.__baseElem,f===void 0?c().x:f,A===void 0?c().y:A),e.needsRedraw=!0}},zoom:function(e,i,s){if(!e.canvas)return null;if(i!==void 0)return s?new z_({k:o()}).to({k:i},s).easing(Mh.Quadratic.Out).onUpdate(function(c){var d=c.k;return l(d)}).start():l(i),this;return o();function o(){return xu(e.canvas).k}function l(c){e.zoom.scaleTo(e.zoom.__baseElem,c),e.needsRedraw=!0}},zoomToFit:function(e){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,l=new Array(o>3?o-3:0),c=3;c<o;c++)l[c-3]=arguments[c];var d=this.getGraphBbox.apply(this,l);if(d){var u={x:(d.x[0]+d.x[1])/2,y:(d.y[0]+d.y[1])/2},f=Math.max(1e-12,Math.min(1e12,(e.width-s*2)/(d.x[1]-d.x[0]),(e.height-s*2)/(d.y[1]-d.y[0])));this.centerAt(u.x,u.y,i),this.zoom(f,i)}return this},getGraphBbox:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},s=xi(e.nodeVal),o=function(d){return Math.sqrt(Math.max(0,s(d)||1))*e.nodeRelSize},l=e.graphData.nodes.filter(i).map(function(c){return{x:c.x,y:c.y,r:o(c)}});return l.length?{x:[xT(l,function(c){return c.x-c.r}),yT(l,function(c){return c.x+c.r})],y:[xT(l,function(c){return c.y-c.r}),yT(l,function(c){return c.y+c.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},wte),stateInit:function(){return{lastSetZoom:1,zoom:Uee(),forceGraph:new V_,shadowGraph:new V_().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new Jee}},init:function(e,i){var s=this;e.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",e.appendChild(o),i.canvas=document.createElement("canvas"),i.backgroundColor&&(i.canvas.style.background=i.backgroundColor),o.appendChild(i.canvas),i.shadowCanvas=document.createElement("canvas");var l=i.canvas.getContext("2d"),c=i.shadowCanvas.getContext("2d",{willReadFrequently:!0}),d={x:-1e12,y:-1e12},u=function(){var y=null,v=window.devicePixelRatio,_=d.x>0&&d.y>0?c.getImageData(d.x*v,d.y*v,1,1):null;return _&&(y=i.colorTracker.lookup(_.data)),y};Bc(i.canvas).call(CZ().subject(function(){if(!i.enableNodeDrag)return null;var g=u();return g&&g.type==="Node"?g.d:null}).on("start",function(g){var y=g.subject;y.__initialDragPos={x:y.x,y:y.y,fx:y.fx,fy:y.fy},g.active||(y.fx=y.x,y.fy=y.y),i.canvas.classList.add("grabbable")}).on("drag",function(g){var y=g.subject,v=y.__initialDragPos,_=g,x=xu(i.canvas).k,b={x:v.x+(_.x-v.x)/x-y.x,y:v.y+(_.y-v.y)/x-y.y};["x","y"].forEach(function(m){return y["f".concat(m)]=y[m]=v[m]+(_[m]-v[m])/x}),i.forceGraph.d3AlphaTarget(.3).resetCountdown(),i.isPointerDragging=!0,y.__dragged=!0,i.onNodeDrag(y,b)}).on("end",function(g){var y=g.subject,v=y.__initialDragPos,_={x:y.x-v.x,y:y.y-v.y};v.fx===void 0&&(y.fx=void 0),v.fy===void 0&&(y.fy=void 0),delete y.__initialDragPos,i.forceGraph.d3AlphaTarget()&&i.forceGraph.d3AlphaTarget(0).resetCountdown(),i.canvas.classList.remove("grabbable"),i.isPointerDragging=!1,y.__dragged&&(delete y.__dragged,i.onNodeDragEnd(y,_))})),i.zoom(i.zoom.__baseElem=Bc(i.canvas)),i.zoom.__baseElem.on("dblclick.zoom",null),i.zoom.filter(function(g){return!g.button&&i.enableZoomPanInteraction&&(i.enableZoomInteraction||g.type!=="wheel")&&(i.enablePanInteraction||g.type==="wheel")}).on("zoom",function(g){var y=g.transform;[l,c].forEach(function(v){_5(v),v.translate(y.x,y.y),v.scale(y.k,y.k)}),i.onZoom&&i.onZoom(dg(dg({},y),s.centerAt())),i.needsRedraw=!0}).on("end",function(g){return i.onZoomEnd&&i.onZoomEnd(dg(dg({},g.transform),s.centerAt()))}),aS(i),i.forceGraph.onNeedsRedraw(function(){return i.needsRedraw=!0}).onFinishUpdate(function(){xu(i.canvas).k===i.lastSetZoom&&i.graphData.nodes.length&&(i.zoom.scaleTo(i.zoom.__baseElem,i.lastSetZoom=Ete/Math.cbrt(i.graphData.nodes.length)),i.needsRedraw=!0)});var f=document.createElement("div");f.classList.add("graph-tooltip"),o.appendChild(f),["pointermove","pointerdown"].forEach(function(g){return o.addEventListener(g,function(y){g==="pointerdown"&&(i.isPointerPressed=!0,i.pointerDownEvent=y),!i.isPointerDragging&&y.type==="pointermove"&&i.onBackgroundClick&&(y.pressure>0||i.isPointerPressed)&&(y.pointerType!=="touch"||y.movementX===void 0||[y.movementX,y.movementY].some(function(x){return Math.abs(x)>1}))&&(i.isPointerDragging=!0);var v=_(o);d.x=y.pageX-v.left,d.y=y.pageY-v.top,f.style.top="".concat(d.y,"px"),f.style.left="".concat(d.x,"px"),f.style.transform="translate(-".concat(d.x/i.width*100,"%, ").concat(i.height-d.y<100?"calc(-100% - 8px)":"21px",")");function _(x){var b=x.getBoundingClientRect(),m=window.pageXOffset||document.documentElement.scrollLeft,S=window.pageYOffset||document.documentElement.scrollTop;return{top:b.top+S,left:b.left+m}}},{passive:!0})}),o.addEventListener("pointerup",function(g){if(i.isPointerPressed=!1,i.isPointerDragging){i.isPointerDragging=!1;return}var y=[g,i.pointerDownEvent];requestAnimationFrame(function(){if(g.button===0)if(i.hoverObj){var v=i["on".concat(i.hoverObj.type,"Click")];v&&v.apply(void 0,[i.hoverObj.d].concat(y))}else i.onBackgroundClick&&i.onBackgroundClick.apply(i,y);if(g.button===2)if(i.hoverObj){var _=i["on".concat(i.hoverObj.type,"RightClick")];_&&_.apply(void 0,[i.hoverObj.d].concat(y))}else i.onBackgroundRightClick&&i.onBackgroundRightClick.apply(i,y)})},{passive:!0}),o.addEventListener("contextmenu",function(g){return!i.onBackgroundRightClick&&!i.onNodeRightClick&&!i.onLinkRightClick?!0:(g.preventDefault(),!1)}),i.forceGraph(l),i.shadowGraph(c);var A=eX(function(){UP(c,i.width,i.height),i.shadowGraph.linkWidth(function(y){return xi(i.linkWidth)(y)+i.linkHoverPrecision});var g=xu(i.canvas);i.shadowGraph.globalScale(g.k).tickFrame()},xte);i.flushShadowCanvas=A.flush,(this._animationCycle=function g(){var y=!i.autoPauseRedraw||!!i.needsRedraw||i.forceGraph.isEngineRunning()||i.graphData.links.some(function(T){return T.__photons&&T.__photons.length});if(i.needsRedraw=!1,i.enablePointerInteraction){var v=i.isPointerDragging?null:u();if(v!==i.hoverObj){var _=i.hoverObj,x=_?_.type:null,b=v?v.type:null;if(x&&x!==b){var m=i["on".concat(x,"Hover")];m&&m(null,_.d)}if(b){var S=i["on".concat(b,"Hover")];S&&S(v.d,x===b?_.d:null)}var C=v&&xi(i["".concat(v.type.toLowerCase(),"Label")])(v.d)||"";f.style.visibility=C?"visible":"hidden",f.innerHTML=C,i.canvas.classList[v&&i["on".concat(b,"Click")]||!v&&i.onBackgroundClick?"add":"remove"]("clickable"),i.hoverObj=v}y&&A()}if(y){UP(l,i.width,i.height);var M=xu(i.canvas).k;i.onRenderFramePre&&i.onRenderFramePre(l,M),i.forceGraph.globalScale(M).tickFrame(),i.onRenderFramePost&&i.onRenderFramePost(l,M)}Xk(),i.animationFrameRequestId=requestAnimationFrame(g)})()},update:function(e){}}),wb={width:Ct.number,height:Ct.number,graphData:Ct.shape({nodes:Ct.arrayOf(Ct.object).isRequired,links:Ct.arrayOf(Ct.object).isRequired}),backgroundColor:Ct.string,nodeRelSize:Ct.number,nodeId:Ct.string,nodeLabel:Ct.oneOfType([Ct.string,Ct.func]),nodeVal:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),nodeVisibility:Ct.oneOfType([Ct.bool,Ct.string,Ct.func]),nodeColor:Ct.oneOfType([Ct.string,Ct.func]),nodeAutoColorBy:Ct.oneOfType([Ct.string,Ct.func]),onNodeHover:Ct.func,onNodeClick:Ct.func,linkSource:Ct.string,linkTarget:Ct.string,linkLabel:Ct.oneOfType([Ct.string,Ct.func]),linkVisibility:Ct.oneOfType([Ct.bool,Ct.string,Ct.func]),linkColor:Ct.oneOfType([Ct.string,Ct.func]),linkAutoColorBy:Ct.oneOfType([Ct.string,Ct.func]),linkWidth:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkCurvature:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkDirectionalArrowLength:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkDirectionalArrowColor:Ct.oneOfType([Ct.string,Ct.func]),linkDirectionalArrowRelPos:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkDirectionalParticles:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkDirectionalParticleSpeed:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkDirectionalParticleWidth:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkDirectionalParticleColor:Ct.oneOfType([Ct.string,Ct.func]),onLinkHover:Ct.func,onLinkClick:Ct.func,dagMode:Ct.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:Ct.number,dagNodeFilter:Ct.func,onDagError:Ct.func,d3AlphaMin:Ct.number,d3AlphaDecay:Ct.number,d3VelocityDecay:Ct.number,warmupTicks:Ct.number,cooldownTicks:Ct.number,cooldownTime:Ct.number,onEngineTick:Ct.func,onEngineStop:Ct.func,getGraphBbox:Ct.func},b5={zoomToFit:Ct.func,onNodeRightClick:Ct.func,onNodeDrag:Ct.func,onNodeDragEnd:Ct.func,onLinkRightClick:Ct.func,linkHoverPrecision:Ct.number,onBackgroundClick:Ct.func,onBackgroundRightClick:Ct.func,enablePointerInteraction:Ct.bool,enableNodeDrag:Ct.bool},SI={showNavInfo:Ct.bool,nodeOpacity:Ct.number,nodeResolution:Ct.number,nodeThreeObject:Ct.oneOfType([Ct.object,Ct.string,Ct.func]),nodeThreeObjectExtend:Ct.oneOfType([Ct.bool,Ct.string,Ct.func]),linkOpacity:Ct.number,linkResolution:Ct.number,linkCurveRotation:Ct.oneOfType([Ct.number,Ct.string,Ct.func]),linkMaterial:Ct.oneOfType([Ct.object,Ct.string,Ct.func]),linkThreeObject:Ct.oneOfType([Ct.object,Ct.string,Ct.func]),linkThreeObjectExtend:Ct.oneOfType([Ct.bool,Ct.string,Ct.func]),linkPositionUpdate:Ct.func,linkDirectionalArrowResolution:Ct.number,linkDirectionalParticleResolution:Ct.number,forceEngine:Ct.oneOf(["d3","ngraph"]),ngraphPhysics:Ct.object,numDimensions:Ct.oneOf([1,2,3])},Mte=Object.assign({},wb,b5,{linkLineDash:Ct.oneOfType([Ct.arrayOf(Ct.number),Ct.string,Ct.func]),nodeCanvasObjectMode:Ct.oneOfType([Ct.string,Ct.func]),nodeCanvasObject:Ct.func,nodePointerAreaPaint:Ct.func,linkCanvasObjectMode:Ct.oneOfType([Ct.string,Ct.func]),linkCanvasObject:Ct.func,linkPointerAreaPaint:Ct.func,autoPauseRedraw:Ct.bool,minZoom:Ct.number,maxZoom:Ct.number,enableZoomInteraction:Ct.bool,enablePanInteraction:Ct.bool,onZoom:Ct.func,onZoomEnd:Ct.func,onRenderFramePre:Ct.func,onRenderFramePost:Ct.func}),Ste=Object.assign({},wb,b5,SI,{enableNavigationControls:Ct.bool,controlType:Ct.oneOf(["trackball","orbit","fly"]),rendererConfig:Ct.object,extraRenderers:Ct.arrayOf(Ct.shape({render:Ct.func.isRequired}))}),Tte=Object.assign({},wb,SI,{nodeDesc:Ct.oneOfType([Ct.string,Ct.func]),linkDesc:Ct.oneOfType([Ct.string,Ct.func])}),Ite=Object.assign({},wb,SI,{markerAttrs:Ct.object,yOffset:Ct.number,glScale:Ct.number});const w5=lb(Uq,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"]});w5.displayName="ForceGraphVR";w5.propTypes=Tte;const C5=lb(Zq,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"],initPropNames:["markerAttrs"]});C5.displayName="ForceGraphAR";C5.propTypes=Ite;const TI=lb(G$,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});TI.displayName="ForceGraph3D";TI.propTypes=Ste;const II=lb(Cte,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});II.displayName="ForceGraph2D";II.propTypes=Mte;function Rte(n,e){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,l,c,d=[],u=!0,f=!1;try{if(l=(i=i.call(n)).next,e===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=l.call(i)).done)&&(d.push(s.value),d.length!==e);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}function Lte(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(n,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,jte(s.key),s)}}function Bte(n,e,i){return e&&GP(n.prototype,e),i&&GP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function Dte(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&KT(n,e)}function j_(n){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},j_(n)}function KT(n,e){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},KT(n,e)}function Pte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ote(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Fte(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ote(n)}function kte(n){var e=Pte();return function(){var s=j_(n),o;if(e){var l=j_(this).constructor;o=Reflect.construct(s,arguments,l)}else o=s.apply(this,arguments);return Fte(this,o)}}function zP(n,e){return Ute(n)||Rte(n,e)||M5(n,e)||Hte()}function OE(n){return Nte(n)||Gte(n)||M5(n)||zte()}function Nte(n){if(Array.isArray(n))return XT(n)}function Ute(n){if(Array.isArray(n))return n}function Gte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function M5(n,e){if(n){if(typeof n=="string")return XT(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return XT(n,e)}}function XT(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vte(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jte(n){var e=Vte(n,"string");return typeof e=="symbol"?e:String(e)}var fg=typeof window<"u"&&window.THREE?window.THREE:{LinearFilter:yl,Sprite:nQ,SpriteMaterial:kF,SRGBColorSpace:ms,Texture:Ba},Qte=function(n){Dte(i,n);var e=kte(i);function i(){var s,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rgba(255, 255, 255, 1)";return Lte(this,i),s=e.call(this,new fg.SpriteMaterial),s._text="".concat(o),s._textHeight=l,s._color=c,s._backgroundColor=!1,s._padding=0,s._borderWidth=0,s._borderRadius=0,s._borderColor="white",s._strokeWidth=0,s._strokeColor="white",s._fontFace="system-ui",s._fontSize=90,s._fontWeight="normal",s._canvas=document.createElement("canvas"),s._genCanvas(),s}return Bte(i,[{key:"text",get:function(){return this._text},set:function(o){this._text=o,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(o){this._textHeight=o,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(o){this._color=o,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(o){this._backgroundColor=o,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(o){this._padding=o,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(o){this._borderWidth=o,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(o){this._borderRadius=o,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(o){this._borderColor=o,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(o){this._fontFace=o,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(o){this._fontSize=o,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(o){this._fontWeight=o,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(o){this._strokeWidth=o,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(o){this._strokeColor=o,this._genCanvas()}},{key:"_genCanvas",value:function(){var o=this,l=this._canvas,c=l.getContext("2d"),d=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],u=d.map(function(k){return k*o.fontSize*.1}),f=Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius],A=f.map(function(k){return k*o.fontSize*.1}),g=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],y=g.map(function(k){return k*o.fontSize*.1}),v=this.text.split(`
`),_="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);c.font=_;var x=Math.max.apply(Math,OE(v.map(function(k){return c.measureText(k).width}))),b=this.fontSize*v.length;if(l.width=x+u[0]*2+y[0]*2,l.height=b+u[1]*2+y[1]*2,this.borderWidth){if(c.strokeStyle=this.borderColor,u[0]){var m=u[0]/2;c.lineWidth=u[0],c.beginPath(),c.moveTo(m,A[0]),c.lineTo(m,l.height-A[3]),c.moveTo(l.width-m,A[1]),c.lineTo(l.width-m,l.height-A[2]),c.stroke()}if(u[1]){var S=u[1]/2;c.lineWidth=u[1],c.beginPath(),c.moveTo(Math.max(u[0],A[0]),S),c.lineTo(l.width-Math.max(u[0],A[1]),S),c.moveTo(Math.max(u[0],A[3]),l.height-S),c.lineTo(l.width-Math.max(u[0],A[2]),l.height-S),c.stroke()}if(this.borderRadius){var C=Math.max.apply(Math,OE(u)),M=C/2;c.lineWidth=C,c.beginPath(),[!!A[0]&&[A[0],M,M,A[0]],!!A[1]&&[l.width-A[1],l.width-M,M,A[1]],!!A[2]&&[l.width-A[2],l.width-M,l.height-M,l.height-A[2]],!!A[3]&&[A[3],M,l.height-M,l.height-A[3]]].filter(function(k){return k}).forEach(function(k){var D=zP(k,4),z=D[0],Y=D[1],ne=D[2],O=D[3];c.moveTo(z,ne),c.quadraticCurveTo(Y,ne,Y,O)}),c.stroke()}}this.backgroundColor&&(c.fillStyle=this.backgroundColor,this.borderRadius?(c.beginPath(),c.moveTo(u[0],A[0]),[[u[0],A[0],l.width-A[1],u[1],u[1],u[1]],[l.width-u[0],l.width-u[0],l.width-u[0],u[1],A[1],l.height-A[2]],[l.width-u[0],l.width-A[2],A[3],l.height-u[1],l.height-u[1],l.height-u[1]],[u[0],u[0],u[0],l.height-u[1],l.height-A[3],A[0]]].forEach(function(k){var D=zP(k,6),z=D[0],Y=D[1],ne=D[2],O=D[3],F=D[4],U=D[5];c.quadraticCurveTo(z,O,Y,F),c.lineTo(ne,U)}),c.closePath(),c.fill()):c.fillRect(u[0],u[1],l.width-u[0]*2,l.height-u[1]*2)),c.translate.apply(c,OE(u)),c.translate.apply(c,OE(y)),c.font=_,c.fillStyle=this.color,c.textBaseline="bottom";var T=this.strokeWidth>0;T&&(c.lineWidth=this.strokeWidth*this.fontSize/10,c.strokeStyle=this.strokeColor),v.forEach(function(k,D){var z=(x-c.measureText(k).width)/2,Y=(D+1)*o.fontSize;T&&c.strokeText(k,z,Y),c.fillText(k,z,Y)}),this.material.map&&this.material.map.dispose();var N=this.material.map=new fg.Texture(l);N.minFilter=fg.LinearFilter,N.colorSpace=fg.SRGBColorSpace,N.needsUpdate=!0;var P=this.textHeight*v.length+d[1]*2+g[1]*2;this.scale.set(P*l.width/l.height,P,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(o){return fg.Sprite.prototype.copy.call(this,o),this.color=o.color,this.backgroundColor=o.backgroundColor,this.padding=o.padding,this.borderWidth=o.borderWidth,this.borderColor=o.borderColor,this.fontFace=o.fontFace,this.fontSize=o.fontSize,this.fontWeight=o.fontWeight,this.strokeWidth=o.strokeWidth,this.strokeColor=o.strokeColor,this}}]),i}(fg.Sprite),Q_={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Q_.exports;(function(n,e){(function(){var i,s="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",d="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,A="__lodash_placeholder__",g=1,y=2,v=4,_=1,x=2,b=1,m=2,S=4,C=8,M=16,T=32,N=64,P=128,k=256,D=512,z=30,Y="...",ne=800,O=16,F=1,U=2,G=3,V=1/0,K=9007199254740991,W=17976931348623157e292,J=0/0,ee=4294967295,he=ee-1,me=ee>>>1,Be=[["ary",P],["bind",b],["bindKey",m],["curry",C],["curryRight",M],["flip",D],["partial",T],["partialRight",N],["rearg",k]],Se="[object Arguments]",rt="[object Array]",Ge="[object AsyncFunction]",st="[object Boolean]",mt="[object Date]",Ft="[object DOMException]",Pt="[object Error]",nt="[object Function]",Fn="[object GeneratorFunction]",Xt="[object Map]",on="[object Number]",nn="[object Null]",vn="[object Object]",Rn="[object Promise]",zn="[object Proxy]",Wn="[object RegExp]",Ai="[object Set]",Ti="[object String]",Je="[object Symbol]",we="[object Undefined]",ge="[object WeakMap]",_e="[object WeakSet]",Pe="[object ArrayBuffer]",Te="[object DataView]",He="[object Float32Array]",Fe="[object Float64Array]",Ue="[object Int8Array]",Ae="[object Int16Array]",Xe="[object Int32Array]",dt="[object Uint8Array]",ue="[object Uint8ClampedArray]",q="[object Uint16Array]",re="[object Uint32Array]",ke=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,qe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qe=/&(?:amp|lt|gt|quot|#39);/g,It=/[&<>"']/g,Ot=RegExp(Qe.source),Jt=RegExp(It.source),dn=/<%-([\s\S]+?)%>/g,Sn=/<%([\s\S]+?)%>/g,er=/<%=([\s\S]+?)%>/g,Pi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ir=/^\w*$/,_i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tn=/[\\^$.*+?()[\]{}|]/g,Qt=RegExp(Tn.source),mn=/^\s+/,ri=/\s/,Cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,li=/\{\n\/\* \[wrapped with (.+)\] \*/,bi=/,? & /,Li=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ar=/[()=,{}\[\]\/\s]/,ar=/\\(\\)?/g,Ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xt=/\w*$/,Mt=/^[-+]0x[0-9a-f]+$/i,Et=/^0b[01]+$/i,Bt=/^\[object .+?Constructor\]$/,Re=/^0o[0-7]+$/i,We=/^(?:0|[1-9]\d*)$/,it=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gt=/($^)/,At=/['\n\r\u2028\u2029\\]/g,Rt="\\ud800-\\udfff",Nt="\\u0300-\\u036f",wn="\\ufe20-\\ufe2f",yn="\\u20d0-\\u20ff",Vt=Nt+wn+yn,qn="\\u2700-\\u27bf",Un="a-z\\xdf-\\xf6\\xf8-\\xff",_n="\\xac\\xb1\\xd7\\xf7",Rr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hi="\\u2000-\\u206f",Ci=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qi="A-Z\\xc0-\\xd6\\xd8-\\xde",Cr="\\ufe0e\\ufe0f",Jr=_n+Rr+hi+Ci,bn="[']",ei="["+Rt+"]",Wr="["+Jr+"]",Mi="["+Vt+"]",ie="\\d+",ce="["+qn+"]",ye="["+Un+"]",Ie="[^"+Rt+Jr+ie+qn+Un+qi+"]",Ke="\\ud83c[\\udffb-\\udfff]",et="(?:"+Mi+"|"+Ke+")",vt="[^"+Rt+"]",de="(?:\\ud83c[\\udde6-\\uddff]){2}",fe="[\\ud800-\\udbff][\\udc00-\\udfff]",pe="["+qi+"]",xe="\\u200d",Ee="(?:"+ye+"|"+Ie+")",ct="(?:"+pe+"|"+Ie+")",St="(?:"+bn+"(?:d|ll|m|re|s|t|ve))?",zt="(?:"+bn+"(?:D|LL|M|RE|S|T|VE))?",en=et+"?",An="["+Cr+"]?",Wt="(?:"+xe+"(?:"+[vt,de,fe].join("|")+")"+An+en+")*",kn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ui="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ln=An+en+Wt,di="(?:"+[ce,de,fe].join("|")+")"+Ln,Kn="(?:"+[vt+Mi+"?",Mi,de,fe,ei].join("|")+")",vi=RegExp(bn,"g"),Ri=RegExp(Mi,"g"),ji=RegExp(Ke+"(?="+Ke+")|"+Kn+Ln,"g"),Di=RegExp([pe+"?"+ye+"+"+St+"(?="+[Wr,pe,"$"].join("|")+")",ct+"+"+zt+"(?="+[Wr,pe+Ee,"$"].join("|")+")",pe+"?"+Ee+"+"+St,pe+"+"+zt,ui,kn,ie,di].join("|"),"g"),Er=RegExp("["+xe+Rt+Vt+Cr+"]"),$i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,es=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ui=-1,_r={};_r[He]=_r[Fe]=_r[Ue]=_r[Ae]=_r[Xe]=_r[dt]=_r[ue]=_r[q]=_r[re]=!0,_r[Se]=_r[rt]=_r[Pe]=_r[st]=_r[Te]=_r[mt]=_r[Pt]=_r[nt]=_r[Xt]=_r[on]=_r[vn]=_r[Wn]=_r[Ai]=_r[Ti]=_r[ge]=!1;var ur={};ur[Se]=ur[rt]=ur[Pe]=ur[Te]=ur[st]=ur[mt]=ur[He]=ur[Fe]=ur[Ue]=ur[Ae]=ur[Xe]=ur[Xt]=ur[on]=ur[vn]=ur[Wn]=ur[Ai]=ur[Ti]=ur[Je]=ur[dt]=ur[ue]=ur[q]=ur[re]=!0,ur[Pt]=ur[nt]=ur[ge]=!1;var tl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},tc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ic={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rc=parseFloat,sc=parseInt,ds=typeof UA=="object"&&UA&&UA.Object===Object&&UA,o0=typeof self=="object"&&self&&self.Object===Object&&self,Xs=ds||o0||Function("return this")(),nf=e&&!e.nodeType&&e,Ml=nf&&!0&&n&&!n.nodeType&&n,zc=Ml&&Ml.exports===nf,rf=zc&&ds.process,Vo=function(){try{var yt=Ml&&Ml.require&&Ml.require("util").types;return yt||rf&&rf.binding&&rf.binding("util")}catch{}}(),Dp=Vo&&Vo.isArrayBuffer,Pp=Vo&&Vo.isDate,Op=Vo&&Vo.isMap,Fp=Vo&&Vo.isRegExp,kp=Vo&&Vo.isSet,Np=Vo&&Vo.isTypedArray;function Bo(yt,Yt,Gt){switch(Gt.length){case 0:return yt.call(Yt);case 1:return yt.call(Yt,Gt[0]);case 2:return yt.call(Yt,Gt[0],Gt[1]);case 3:return yt.call(Yt,Gt[0],Gt[1],Gt[2])}return yt.apply(Yt,Gt)}function sf(yt,Yt,Gt,Nn){for(var je=-1,Lr=yt==null?0:yt.length;++je<Lr;){var ws=yt[je];Yt(Nn,ws,Gt(ws),yt)}return Nn}function co(yt,Yt){for(var Gt=-1,Nn=yt==null?0:yt.length;++Gt<Nn&&Yt(yt[Gt],Gt,yt)!==!1;);return yt}function Do(yt,Yt){for(var Gt=yt==null?0:yt.length;Gt--&&Yt(yt[Gt],Gt,yt)!==!1;);return yt}function Ys(yt,Yt){for(var Gt=-1,Nn=yt==null?0:yt.length;++Gt<Nn;)if(!Yt(yt[Gt],Gt,yt))return!1;return!0}function nl(yt,Yt){for(var Gt=-1,Nn=yt==null?0:yt.length,je=0,Lr=[];++Gt<Nn;){var ws=yt[Gt];Yt(ws,Gt,yt)&&(Lr[je++]=ws)}return Lr}function Fa(yt,Yt){var Gt=yt==null?0:yt.length;return!!Gt&&Hc(yt,Yt,0)>-1}function oc(yt,Yt,Gt){for(var Nn=-1,je=yt==null?0:yt.length;++Nn<je;)if(Gt(Yt,yt[Nn]))return!0;return!1}function vr(yt,Yt){for(var Gt=-1,Nn=yt==null?0:yt.length,je=Array(Nn);++Gt<Nn;)je[Gt]=Yt(yt[Gt],Gt,yt);return je}function Kr(yt,Yt){for(var Gt=-1,Nn=Yt.length,je=yt.length;++Gt<Nn;)yt[je+Gt]=Yt[Gt];return yt}function Lu(yt,Yt,Gt,Nn){var je=-1,Lr=yt==null?0:yt.length;for(Nn&&Lr&&(Gt=yt[++je]);++je<Lr;)Gt=Yt(Gt,yt[je],je,yt);return Gt}function a0(yt,Yt,Gt,Nn){var je=yt==null?0:yt.length;for(Nn&&je&&(Gt=yt[--je]);je--;)Gt=Yt(Gt,yt[je],je,yt);return Gt}function of(yt,Yt){for(var Gt=-1,Nn=yt==null?0:yt.length;++Gt<Nn;)if(Yt(yt[Gt],Gt,yt))return!0;return!1}var Bu=af("length");function l0(yt){return yt.split("")}function c0(yt){return yt.match(Li)||[]}function Up(yt,Yt,Gt){var Nn;return Gt(yt,function(je,Lr,ws){if(Yt(je,Lr,ws))return Nn=Lr,!1}),Nn}function Oh(yt,Yt,Gt,Nn){for(var je=yt.length,Lr=Gt+(Nn?1:-1);Nn?Lr--:++Lr<je;)if(Yt(yt[Lr],Lr,yt))return Lr;return-1}function Hc(yt,Yt,Gt){return Yt===Yt?si(yt,Yt,Gt):Oh(yt,Gp,Gt)}function u0(yt,Yt,Gt,Nn){for(var je=Gt-1,Lr=yt.length;++je<Lr;)if(Nn(yt[je],Yt))return je;return-1}function Gp(yt){return yt!==yt}function zp(yt,Yt){var Gt=yt==null?0:yt.length;return Gt?Vc(yt,Yt)/Gt:J}function af(yt){return function(Yt){return Yt==null?i:Yt[yt]}}function lf(yt){return function(Yt){return yt==null?i:yt[Yt]}}function Fh(yt,Yt,Gt,Nn,je){return je(yt,function(Lr,ws,Br){Gt=Nn?(Nn=!1,Lr):Yt(Gt,Lr,ws,Br)}),Gt}function Hp(yt,Yt){var Gt=yt.length;for(yt.sort(Yt);Gt--;)yt[Gt]=yt[Gt].value;return yt}function Vc(yt,Yt){for(var Gt,Nn=-1,je=yt.length;++Nn<je;){var Lr=Yt(yt[Nn]);Lr!==i&&(Gt=Gt===i?Lr:Gt+Lr)}return Gt}function cf(yt,Yt){for(var Gt=-1,Nn=Array(yt);++Gt<yt;)Nn[Gt]=Yt(Gt);return Nn}function il(yt,Yt){return vr(Yt,function(Gt){return[Gt,yt[Gt]]})}function Xr(yt){return yt&&yt.slice(0,Gh(yt)+1).replace(mn,"")}function Po(yt){return function(Yt){return yt(Yt)}}function un(yt,Yt){return vr(Yt,function(Gt){return yt[Gt]})}function Fs(yt,Yt){return yt.has(Yt)}function kh(yt,Yt){for(var Gt=-1,Nn=yt.length;++Gt<Nn&&Hc(Yt,yt[Gt],0)>-1;);return Gt}function uf(yt,Yt){for(var Gt=yt.length;Gt--&&Hc(Yt,yt[Gt],0)>-1;);return Gt}function h0(yt,Yt){for(var Gt=yt.length,Nn=0;Gt--;)yt[Gt]===Yt&&++Nn;return Nn}var jc=lf(tl),Du=lf(tc);function ac(yt){return"\\"+ic[yt]}function Nh(yt,Yt){return yt==null?i:yt[Yt]}function Sl(yt){return Er.test(yt)}function io(yt){return $i.test(yt)}function Vp(yt){for(var Yt,Gt=[];!(Yt=yt.next()).done;)Gt.push(Yt.value);return Gt}function As(yt){var Yt=-1,Gt=Array(yt.size);return yt.forEach(function(Nn,je){Gt[++Yt]=[je,Nn]}),Gt}function jo(yt,Yt){return function(Gt){return yt(Yt(Gt))}}function ca(yt,Yt){for(var Gt=-1,Nn=yt.length,je=0,Lr=[];++Gt<Nn;){var ws=yt[Gt];(ws===Yt||ws===A)&&(yt[Gt]=A,Lr[je++]=Gt)}return Lr}function Qc(yt){var Yt=-1,Gt=Array(yt.size);return yt.forEach(function(Nn){Gt[++Yt]=Nn}),Gt}function Uh(yt){var Yt=-1,Gt=Array(yt.size);return yt.forEach(function(Nn){Gt[++Yt]=[Nn,Nn]}),Gt}function si(yt,Yt,Gt){for(var Nn=Gt-1,je=yt.length;++Nn<je;)if(yt[Nn]===Yt)return Nn;return-1}function Wc(yt,Yt,Gt){for(var Nn=Gt+1;Nn--;)if(yt[Nn]===Yt)return Nn;return Nn}function Tl(yt){return Sl(yt)?vs(yt):Bu(yt)}function qs(yt){return Sl(yt)?kr(yt):l0(yt)}function Gh(yt){for(var Yt=yt.length;Yt--&&ri.test(yt.charAt(Yt)););return Yt}var d0=lf(nc);function vs(yt){for(var Yt=ji.lastIndex=0;ji.test(yt);)++Yt;return Yt}function kr(yt){return yt.match(ji)||[]}function Qo(yt){return yt.match(Di)||[]}var Pu=function yt(Yt){Yt=Yt==null?Xs:Kc.defaults(Xs.Object(),Yt,Kc.pick(Xs,es));var Gt=Yt.Array,Nn=Yt.Date,je=Yt.Error,Lr=Yt.Function,ws=Yt.Math,Br=Yt.Object,ua=Yt.RegExp,lc=Yt.String,vo=Yt.TypeError,rl=Gt.prototype,Xc=Lr.prototype,ha=Br.prototype,da=Yt["__core-js_shared__"],fa=Xc.toString,br=ha.hasOwnProperty,Yc=0,sl=function(){var E=/[^.]+$/.exec(da&&da.keys&&da.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),Il=ha.toString,os=fa.call(Br),zh=Xs._,jp=ua("^"+fa.call(br).replace(Tn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pa=zc?Yt.Buffer:i,ka=Yt.Symbol,Wo=Yt.Uint8Array,Na=pa?pa.allocUnsafe:i,qc=jo(Br.getPrototypeOf,Br),ti=Br.create,Oi=ha.propertyIsEnumerable,lr=rl.splice,Cs=ka?ka.isConcatSpreadable:i,hr=ka?ka.iterator:i,ks=ka?ka.toStringTag:i,oi=function(){try{var E=ed(Br,"defineProperty");return E({},"",{}),E}catch{}}(),Ko=Yt.clearTimeout!==Xs.clearTimeout&&Yt.clearTimeout,dr=Nn&&Nn.now!==Xs.Date.now&&Nn.now,Hh=Yt.setTimeout!==Xs.setTimeout&&Yt.setTimeout,Rl=ws.ceil,$s=ws.floor,ro=Br.getOwnPropertySymbols,Wi=pa?pa.isBuffer:i,Ua=Yt.isFinite,Ou=rl.join,uo=jo(Br.keys,Br),Fi=ws.max,sr=ws.min,fr=Nn.now,Nr=Yt.parseInt,Ms=ws.random,ol=rl.reverse,al=ed(Yt,"DataView"),$c=ed(Yt,"Map"),Vh=ed(Yt,"Promise"),Ll=ed(Yt,"Set"),cc=ed(Yt,"WeakMap"),Jc=ed(Br,"create"),jh=cc&&new cc,uc={},Or=kl(al),ma=kl($c),Ss=kl(Vh),ga=kl(Ll),Ga=kl(cc),za=ka?ka.prototype:i,Bl=za?za.valueOf:i,f0=za?za.toString:i;function Ne(E){if(ls(E)&&!Ji(E)&&!(E instanceof Mr)){if(E instanceof ys)return E;if(br.call(E,"__wrapped__"))return H0(E)}return new ys(E)}var Zc=function(){function E(){}return function(I){if(!ps(I))return{};if(ti)return ti(I);E.prototype=I;var Q=new E;return E.prototype=i,Q}}();function Qh(){}function ys(E,I){this.__wrapped__=E,this.__actions__=[],this.__chain__=!!I,this.__index__=0,this.__values__=i}Ne.templateSettings={escape:dn,evaluate:Sn,interpolate:er,variable:"",imports:{_:Ne}},Ne.prototype=Qh.prototype,Ne.prototype.constructor=Ne,ys.prototype=Zc(Qh.prototype),ys.prototype.constructor=ys;function Mr(E){this.__wrapped__=E,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ee,this.__views__=[]}function yo(){var E=new Mr(this.__wrapped__);return E.__actions__=Yo(this.__actions__),E.__dir__=this.__dir__,E.__filtered__=this.__filtered__,E.__iteratees__=Yo(this.__iteratees__),E.__takeCount__=this.__takeCount__,E.__views__=Yo(this.__views__),E}function eu(){if(this.__filtered__){var E=new Mr(this);E.__dir__=-1,E.__filtered__=!0}else E=this.clone(),E.__dir__*=-1;return E}function Hs(){var E=this.__wrapped__.value(),I=this.__dir__,Q=Ji(E),ae=I<0,Me=Q?E.length:0,Ve=BI(0,Me,this.__views__),lt=Ve.start,pt=Ve.end,wt=pt-lt,rn=ae?pt:lt-1,sn=this.__iteratees__,gn=sn.length,Xn=0,Jn=sr(wt,this.__takeCount__);if(!Q||!ae&&Me==wt&&Jn==wt)return Xy(E,this.__actions__);var Si=[];e:for(;wt--&&Xn<Jn;){rn+=I;for(var ir=-1,ki=E[rn];++ir<gn;){var gr=sn[ir],wr=gr.iteratee,_a=gr.type,Uo=wr(ki);if(_a==U)ki=Uo;else if(!Uo){if(_a==F)continue e;break e}}Si[Xn++]=ki}return Si}Mr.prototype=Zc(Qh.prototype),Mr.prototype.constructor=Mr;function Dl(E){var I=-1,Q=E==null?0:E.length;for(this.clear();++I<Q;){var ae=E[I];this.set(ae[0],ae[1])}}function ts(){this.__data__=Jc?Jc(null):{},this.size=0}function Cb(E){var I=this.has(E)&&delete this.__data__[E];return this.size-=I?1:0,I}function Mb(E){var I=this.__data__;if(Jc){var Q=I[E];return Q===u?i:Q}return br.call(I,E)?I[E]:i}function Sb(E){var I=this.__data__;return Jc?I[E]!==i:br.call(I,E)}function Tb(E,I){var Q=this.__data__;return this.size+=this.has(E)?0:1,Q[E]=Jc&&I===i?u:I,this}Dl.prototype.clear=ts,Dl.prototype.delete=Cb,Dl.prototype.get=Mb,Dl.prototype.has=Sb,Dl.prototype.set=Tb;function ll(E){var I=-1,Q=E==null?0:E.length;for(this.clear();++I<Q;){var ae=E[I];this.set(ae[0],ae[1])}}function Ib(){this.__data__=[],this.size=0}function p0(E){var I=this.__data__,Q=Fu(I,E);if(Q<0)return!1;var ae=I.length-1;return Q==ae?I.pop():lr.call(I,Q,1),--this.size,!0}function Rb(E){var I=this.__data__,Q=Fu(I,E);return Q<0?i:I[Q][1]}function yi(E){return Fu(this.__data__,E)>-1}function Lb(E,I){var Q=this.__data__,ae=Fu(Q,E);return ae<0?(++this.size,Q.push([E,I])):Q[ae][1]=I,this}ll.prototype.clear=Ib,ll.prototype.delete=p0,ll.prototype.get=Rb,ll.prototype.has=yi,ll.prototype.set=Lb;function hc(E){var I=-1,Q=E==null?0:E.length;for(this.clear();++I<Q;){var ae=E[I];this.set(ae[0],ae[1])}}function Ha(){this.size=0,this.__data__={hash:new Dl,map:new($c||ll),string:new Dl}}function m0(E){var I=G0(this,E).delete(E);return this.size-=I?1:0,I}function Wh(E){return G0(this,E).get(E)}function Aa(E){return G0(this,E).has(E)}function hf(E,I){var Q=G0(this,E),ae=Q.size;return Q.set(E,I),this.size+=Q.size==ae?0:1,this}hc.prototype.clear=Ha,hc.prototype.delete=m0,hc.prototype.get=Wh,hc.prototype.has=Aa,hc.prototype.set=hf;function fs(E){var I=-1,Q=E==null?0:E.length;for(this.__data__=new hc;++I<Q;)this.add(E[I])}function pr(E){return this.__data__.set(E,u),this}function Ry(E){return this.__data__.has(E)}fs.prototype.add=fs.prototype.push=pr,fs.prototype.has=Ry;function xo(E){var I=this.__data__=new ll(E);this.size=I.size}function g0(){this.__data__=new ll,this.size=0}function tu(E){var I=this.__data__,Q=I.delete(E);return this.size=I.size,Q}function nu(E){return this.__data__.get(E)}function iu(E){return this.__data__.has(E)}function A0(E,I){var Q=this.__data__;if(Q instanceof ll){var ae=Q.__data__;if(!$c||ae.length<o-1)return ae.push([E,I]),this.size=++Q.size,this;Q=this.__data__=new hc(ae)}return Q.set(E,I),this.size=Q.size,this}xo.prototype.clear=g0,xo.prototype.delete=tu,xo.prototype.get=nu,xo.prototype.has=iu,xo.prototype.set=A0;function Qp(E,I){var Q=Ji(E),ae=!Q&&Ea(E),Me=!Q&&!ae&&fu(E),Ve=!Q&&!ae&&!Me&&pu(E),lt=Q||ae||Me||Ve,pt=lt?cf(E.length,lc):[],wt=pt.length;for(var rn in E)(I||br.call(E,rn))&&!(lt&&(rn=="length"||Me&&(rn=="offset"||rn=="parent")||Ve&&(rn=="buffer"||rn=="byteLength"||rn=="byteOffset")||uu(rn,wt)))&&pt.push(rn);return pt}function Wp(E){var I=E.length;return I?E[M0(0,I-1)]:i}function Kp(E,I){return hm(Yo(E),Pl(I,0,E.length))}function Xp(E){return hm(Yo(E))}function Kh(E,I,Q){(Q!==i&&!cl(E[I],Q)||Q===i&&!(I in E))&&as(E,I,Q)}function ru(E,I,Q){var ae=E[I];(!(br.call(E,I)&&cl(ae,Q))||Q===i&&!(I in E))&&as(E,I,Q)}function Fu(E,I){for(var Q=E.length;Q--;)if(cl(E[Q][0],I))return Q;return-1}function Yp(E,I,Q,ae){return dc(E,function(Me,Ve,lt){I(ae,Me,Q(Me),lt)}),ae}function qp(E,I){return E&&Ol(I,js(I),E)}function $p(E,I){return E&&Ol(I,No(I),E)}function as(E,I,Q){I=="__proto__"&&oi?oi(E,I,{configurable:!0,enumerable:!0,value:Q,writable:!0}):E[I]=Q}function v0(E,I){for(var Q=-1,ae=I.length,Me=Gt(ae),Ve=E==null;++Q<ae;)Me[Q]=Ve?i:cd(E,I[Q]);return Me}function Pl(E,I,Q){return E===E&&(Q!==i&&(E=E<=Q?E:Q),I!==i&&(E=E>=I?E:I)),E}function Js(E,I,Q,ae,Me,Ve){var lt,pt=I&g,wt=I&y,rn=I&v;if(Q&&(lt=Me?Q(E,ae,Me,Ve):Q(E)),lt!==i)return lt;if(!ps(E))return E;var sn=Ji(E);if(sn){if(lt=PI(E),!pt)return Yo(E,lt)}else{var gn=Oo(E),Xn=gn==nt||gn==Fn;if(fu(E))return $y(E,pt);if(gn==vn||gn==Se||Xn&&!Me){if(lt=wt||Xn?{}:d2(E),!pt)return wt?n2(E,$p(lt,E)):t2(E,qp(lt,E))}else{if(!ur[gn])return Me?E:{};lt=OI(E,gn,pt)}}Ve||(Ve=new xo);var Jn=Ve.get(E);if(Jn)return Jn;Ve.set(E,lt),od(E)?E.forEach(function(ki){lt.add(Js(ki,I,Q,ki,E,Ve))}):_o(E)&&E.forEach(function(ki,gr){lt.set(gr,Js(ki,I,Q,gr,E,Ve))});var Si=rn?wt?k0:F0:wt?No:js,ir=sn?i:Si(E);return co(ir||E,function(ki,gr){ir&&(gr=ki,ki=E[gr]),ru(lt,gr,Js(ki,I,Q,gr,E,Ve))}),lt}function Xh(E){var I=js(E);return function(Q){return Eo(Q,E,I)}}function Eo(E,I,Q){var ae=Q.length;if(E==null)return!ae;for(E=Br(E);ae--;){var Me=Q[ae],Ve=I[Me],lt=E[Me];if(lt===i&&!(Me in E)||!Ve(lt))return!1}return!0}function Ly(E,I,Q){if(typeof E!="function")throw new vo(c);return hu(function(){E.apply(i,Q)},I)}function Yh(E,I,Q,ae){var Me=-1,Ve=Fa,lt=!0,pt=E.length,wt=[],rn=I.length;if(!pt)return wt;Q&&(I=vr(I,Po(Q))),ae?(Ve=oc,lt=!1):I.length>=o&&(Ve=Fs,lt=!1,I=new fs(I));e:for(;++Me<pt;){var sn=E[Me],gn=Q==null?sn:Q(sn);if(sn=ae||sn!==0?sn:0,lt&&gn===gn){for(var Xn=rn;Xn--;)if(I[Xn]===gn)continue e;wt.push(sn)}else Ve(I,gn,ae)||wt.push(sn)}return wt}var dc=n1(Xo),By=n1(Zp,!0);function Bb(E,I){var Q=!0;return dc(E,function(ae,Me,Ve){return Q=!!I(ae,Me,Ve),Q}),Q}function va(E,I,Q){for(var ae=-1,Me=E.length;++ae<Me;){var Ve=E[ae],lt=I(Ve);if(lt!=null&&(pt===i?lt===lt&&!$o(lt):Q(lt,pt)))var pt=lt,wt=Ve}return wt}function Jp(E,I,Q,ae){var Me=E.length;for(Q=nr(Q),Q<0&&(Q=-Q>Me?0:Me+Q),ae=ae===i||ae>Me?Me:nr(ae),ae<0&&(ae+=Me),ae=Q>ae?0:lA(ae);Q<ae;)E[Q++]=I;return E}function Vs(E,I){var Q=[];return dc(E,function(ae,Me,Ve){I(ae,Me,Ve)&&Q.push(ae)}),Q}function Ts(E,I,Q,ae,Me){var Ve=-1,lt=E.length;for(Q||(Q=kI),Me||(Me=[]);++Ve<lt;){var pt=E[Ve];I>0&&Q(pt)?I>1?Ts(pt,I-1,Q,ae,Me):Kr(Me,pt):ae||(Me[Me.length]=pt)}return Me}var su=i1(),y0=i1(!0);function Xo(E,I){return E&&su(E,I,js)}function Zp(E,I){return E&&y0(E,I,js)}function qh(E,I){return nl(I,function(Q){return Nl(E[Q])})}function ku(E,I){I=lu(I,E);for(var Q=0,ae=I.length;E!=null&&Q<ae;)E=E[Fl(I[Q++])];return Q&&Q==ae?E:i}function Dy(E,I,Q){var ae=I(E);return Ji(E)?ae:Kr(ae,Q(E))}function Is(E){return E==null?E===i?we:nn:ks&&ks in Br(E)?LI(E):jI(E)}function ou(E,I){return E>I}function em(E,I){return E!=null&&br.call(E,I)}function tm(E,I){return E!=null&&I in Br(E)}function x0(E,I,Q){return E>=sr(I,Q)&&E<Fi(I,Q)}function E0(E,I,Q){for(var ae=Q?oc:Fa,Me=E[0].length,Ve=E.length,lt=Ve,pt=Gt(Ve),wt=1/0,rn=[];lt--;){var sn=E[lt];lt&&I&&(sn=vr(sn,Po(I))),wt=sr(sn.length,wt),pt[lt]=!Q&&(I||Me>=120&&sn.length>=120)?new fs(lt&&sn):i}sn=E[0];var gn=-1,Xn=pt[0];e:for(;++gn<Me&&rn.length<wt;){var Jn=sn[gn],Si=I?I(Jn):Jn;if(Jn=Q||Jn!==0?Jn:0,!(Xn?Fs(Xn,Si):ae(rn,Si,Q))){for(lt=Ve;--lt;){var ir=pt[lt];if(!(ir?Fs(ir,Si):ae(E[lt],Si,Q)))continue e}Xn&&Xn.push(Si),rn.push(Jn)}}return rn}function $h(E,I,Q,ae){return Xo(E,function(Me,Ve,lt){I(ae,Q(Me),Ve,lt)}),ae}function df(E,I,Q){I=lu(I,E),E=g2(E,I);var ae=E==null?E:E[Fl(xa(I))];return ae==null?i:Bo(ae,E,Q)}function Py(E){return ls(E)&&Is(E)==Se}function Db(E){return ls(E)&&Is(E)==Pe}function Pb(E){return ls(E)&&Is(E)==mt}function ff(E,I,Q,ae,Me){return E===I?!0:E==null||I==null||!ls(E)&&!ls(I)?E!==E&&I!==I:Ob(E,I,Q,ae,ff,Me)}function Ob(E,I,Q,ae,Me,Ve){var lt=Ji(E),pt=Ji(I),wt=lt?rt:Oo(E),rn=pt?rt:Oo(I);wt=wt==Se?vn:wt,rn=rn==Se?vn:rn;var sn=wt==vn,gn=rn==vn,Xn=wt==rn;if(Xn&&fu(E)){if(!fu(I))return!1;lt=!0,sn=!1}if(Xn&&!sn)return Ve||(Ve=new xo),lt||pu(E)?f1(E,I,Q,ae,Me,Ve):l2(E,I,wt,Q,ae,Me,Ve);if(!(Q&_)){var Jn=sn&&br.call(E,"__wrapped__"),Si=gn&&br.call(I,"__wrapped__");if(Jn||Si){var ir=Jn?E.value():E,ki=Si?I.value():I;return Ve||(Ve=new xo),Me(ir,ki,Q,ae,Ve)}}return Xn?(Ve||(Ve=new xo),c2(E,I,Q,ae,Me,Ve)):!1}function Fb(E){return ls(E)&&Oo(E)==Xt}function _0(E,I,Q,ae){var Me=Q.length,Ve=Me,lt=!ae;if(E==null)return!Ve;for(E=Br(E);Me--;){var pt=Q[Me];if(lt&&pt[2]?pt[1]!==E[pt[0]]:!(pt[0]in E))return!1}for(;++Me<Ve;){pt=Q[Me];var wt=pt[0],rn=E[wt],sn=pt[1];if(lt&&pt[2]){if(rn===i&&!(wt in E))return!1}else{var gn=new xo;if(ae)var Xn=ae(rn,sn,wt,E,I,gn);if(!(Xn===i?ff(sn,rn,_|x,ae,gn):Xn))return!1}}return!0}function Oy(E){if(!ps(E)||UI(E))return!1;var I=Nl(E)?jp:Bt;return I.test(kl(E))}function kb(E){return ls(E)&&Is(E)==Wn}function Nb(E){return ls(E)&&Oo(E)==Ai}function Ub(E){return ls(E)&&Gu(E.length)&&!!_r[Is(E)]}function Fy(E){return typeof E=="function"?E:E==null?Jo:typeof E=="object"?Ji(E)?Uy(E[0],E[1]):Ny(E):IA(E)}function b0(E){if(!um(E))return uo(E);var I=[];for(var Q in Br(E))br.call(E,Q)&&Q!="constructor"&&I.push(Q);return I}function Gb(E){if(!ps(E))return VI(E);var I=um(E),Q=[];for(var ae in E)ae=="constructor"&&(I||!br.call(E,ae))||Q.push(ae);return Q}function w0(E,I){return E<I}function ky(E,I){var Q=-1,ae=Fo(E)?Gt(E.length):[];return dc(E,function(Me,Ve,lt){ae[++Q]=I(Me,Ve,lt)}),ae}function Ny(E){var I=p1(E);return I.length==1&&I[0][2]?p2(I[0][0],I[0][1]):function(Q){return Q===E||_0(Q,E,I)}}function Uy(E,I){return g1(E)&&f2(I)?p2(Fl(E),I):function(Q){var ae=cd(Q,E);return ae===i&&ae===I?Mm(Q,E):ff(I,ae,_|x)}}function nm(E,I,Q,ae,Me){E!==I&&su(I,function(Ve,lt){if(Me||(Me=new xo),ps(Ve))zb(E,I,lt,Q,nm,ae,Me);else{var pt=ae?ae(Hn(E,lt),Ve,lt+"",E,I,Me):i;pt===i&&(pt=Ve),Kh(E,lt,pt)}},No)}function zb(E,I,Q,ae,Me,Ve,lt){var pt=Hn(E,Q),wt=Hn(I,Q),rn=lt.get(wt);if(rn){Kh(E,Q,rn);return}var sn=Ve?Ve(pt,wt,Q+"",E,I,lt):i,gn=sn===i;if(gn){var Xn=Ji(wt),Jn=!Xn&&fu(wt),Si=!Xn&&!Jn&&pu(wt);sn=wt,Xn||Jn||Si?Ji(pt)?sn=pt:Ns(pt)?sn=Yo(pt):Jn?(gn=!1,sn=$y(wt,!0)):Si?(gn=!1,sn=Jy(wt,!0)):sn=[]:mc(wt)||Ea(wt)?(sn=pt,Ea(pt)?sn=cA(pt):(!ps(pt)||Nl(pt))&&(sn=d2(wt))):gn=!1}gn&&(lt.set(wt,sn),Me(sn,wt,ae,Ve,lt),lt.delete(wt)),Kh(E,Q,sn)}function Gy(E,I){var Q=E.length;if(Q)return I+=I<0?Q:0,uu(I,Q)?E[I]:i}function zy(E,I,Q){I.length?I=vr(I,function(Ve){return Ji(Ve)?function(lt){return ku(lt,Ve.length===1?Ve[0]:Ve)}:Ve}):I=[Jo];var ae=-1;I=vr(I,Po(Gi()));var Me=ky(E,function(Ve,lt,pt){var wt=vr(I,function(rn){return rn(Ve)});return{criteria:wt,index:++ae,value:Ve}});return Hp(Me,function(Ve,lt){return e2(Ve,lt,Q)})}function Hb(E,I){return Hy(E,I,function(Q,ae){return Mm(E,ae)})}function Hy(E,I,Q){for(var ae=-1,Me=I.length,Ve={};++ae<Me;){var lt=I[ae],pt=ku(E,lt);Q(pt,lt)&&pf(Ve,lu(lt,E),pt)}return Ve}function Vb(E){return function(I){return ku(I,E)}}function C0(E,I,Q,ae){var Me=ae?u0:Hc,Ve=-1,lt=I.length,pt=E;for(E===I&&(I=Yo(I)),Q&&(pt=vr(E,Po(Q)));++Ve<lt;)for(var wt=0,rn=I[Ve],sn=Q?Q(rn):rn;(wt=Me(pt,sn,wt,ae))>-1;)pt!==E&&lr.call(pt,wt,1),lr.call(E,wt,1);return E}function Vy(E,I){for(var Q=E?I.length:0,ae=Q-1;Q--;){var Me=I[Q];if(Q==ae||Me!==Ve){var Ve=Me;uu(Me)?lr.call(E,Me,1):I0(E,Me)}}return E}function M0(E,I){return E+$s(Ms()*(I-E+1))}function jb(E,I,Q,ae){for(var Me=-1,Ve=Fi(Rl((I-E)/(Q||1)),0),lt=Gt(Ve);Ve--;)lt[ae?Ve:++Me]=E,E+=Q;return lt}function S0(E,I){var Q="";if(!E||I<1||I>K)return Q;do I%2&&(Q+=E),I=$s(I/2),I&&(E+=E);while(I);return Q}function mr(E,I){return z0(m2(E,I,Jo),E+"")}function Qb(E){return Wp(gu(E))}function Wb(E,I){var Q=gu(E);return hm(Q,Pl(I,0,Q.length))}function pf(E,I,Q,ae){if(!ps(E))return E;I=lu(I,E);for(var Me=-1,Ve=I.length,lt=Ve-1,pt=E;pt!=null&&++Me<Ve;){var wt=Fl(I[Me]),rn=Q;if(wt==="__proto__"||wt==="constructor"||wt==="prototype")return E;if(Me!=lt){var sn=pt[wt];rn=ae?ae(sn,wt,pt):i,rn===i&&(rn=ps(sn)?sn:uu(I[Me+1])?[]:{})}ru(pt,wt,rn),pt=pt[wt]}return E}var jy=jh?function(E,I){return jh.set(E,I),E}:Jo,Kb=oi?function(E,I){return oi(E,"toString",{configurable:!0,enumerable:!1,value:wA(I),writable:!0})}:Jo;function Xb(E){return hm(gu(E))}function Va(E,I,Q){var ae=-1,Me=E.length;I<0&&(I=-I>Me?0:Me+I),Q=Q>Me?Me:Q,Q<0&&(Q+=Me),Me=I>Q?0:Q-I>>>0,I>>>=0;for(var Ve=Gt(Me);++ae<Me;)Ve[ae]=E[ae+I];return Ve}function Yb(E,I){var Q;return dc(E,function(ae,Me,Ve){return Q=I(ae,Me,Ve),!Q}),!!Q}function im(E,I,Q){var ae=0,Me=E==null?ae:E.length;if(typeof I=="number"&&I===I&&Me<=me){for(;ae<Me;){var Ve=ae+Me>>>1,lt=E[Ve];lt!==null&&!$o(lt)&&(Q?lt<=I:lt<I)?ae=Ve+1:Me=Ve}return Me}return T0(E,I,Jo,Q)}function T0(E,I,Q,ae){var Me=0,Ve=E==null?0:E.length;if(Ve===0)return 0;I=Q(I);for(var lt=I!==I,pt=I===null,wt=$o(I),rn=I===i;Me<Ve;){var sn=$s((Me+Ve)/2),gn=Q(E[sn]),Xn=gn!==i,Jn=gn===null,Si=gn===gn,ir=$o(gn);if(lt)var ki=ae||Si;else rn?ki=Si&&(ae||Xn):pt?ki=Si&&Xn&&(ae||!Jn):wt?ki=Si&&Xn&&!Jn&&(ae||!ir):Jn||ir?ki=!1:ki=ae?gn<=I:gn<I;ki?Me=sn+1:Ve=sn}return sr(Ve,he)}function Qy(E,I){for(var Q=-1,ae=E.length,Me=0,Ve=[];++Q<ae;){var lt=E[Q],pt=I?I(lt):lt;if(!Q||!cl(pt,wt)){var wt=pt;Ve[Me++]=lt===0?0:lt}}return Ve}function Wy(E){return typeof E=="number"?E:$o(E)?J:+E}function ya(E){if(typeof E=="string")return E;if(Ji(E))return vr(E,ya)+"";if($o(E))return f0?f0.call(E):"";var I=E+"";return I=="0"&&1/E==-V?"-0":I}function au(E,I,Q){var ae=-1,Me=Fa,Ve=E.length,lt=!0,pt=[],wt=pt;if(Q)lt=!1,Me=oc;else if(Ve>=o){var rn=I?null:o2(E);if(rn)return Qc(rn);lt=!1,Me=Fs,wt=new fs}else wt=I?[]:pt;e:for(;++ae<Ve;){var sn=E[ae],gn=I?I(sn):sn;if(sn=Q||sn!==0?sn:0,lt&&gn===gn){for(var Xn=wt.length;Xn--;)if(wt[Xn]===gn)continue e;I&&wt.push(gn),pt.push(sn)}else Me(wt,gn,Q)||(wt!==pt&&wt.push(gn),pt.push(sn))}return pt}function I0(E,I){return I=lu(I,E),E=g2(E,I),E==null||delete E[Fl(xa(I))]}function Ky(E,I,Q,ae){return pf(E,I,Q(ku(E,I)),ae)}function rm(E,I,Q,ae){for(var Me=E.length,Ve=ae?Me:-1;(ae?Ve--:++Ve<Me)&&I(E[Ve],Ve,E););return Q?Va(E,ae?0:Ve,ae?Ve+1:Me):Va(E,ae?Ve+1:0,ae?Me:Ve)}function Xy(E,I){var Q=E;return Q instanceof Mr&&(Q=Q.value()),Lu(I,function(ae,Me){return Me.func.apply(Me.thisArg,Kr([ae],Me.args))},Q)}function R0(E,I,Q){var ae=E.length;if(ae<2)return ae?au(E[0]):[];for(var Me=-1,Ve=Gt(ae);++Me<ae;)for(var lt=E[Me],pt=-1;++pt<ae;)pt!=Me&&(Ve[Me]=Yh(Ve[Me]||lt,E[pt],I,Q));return au(Ts(Ve,1),I,Q)}function Yy(E,I,Q){for(var ae=-1,Me=E.length,Ve=I.length,lt={};++ae<Me;){var pt=ae<Ve?I[ae]:i;Q(lt,E[ae],pt)}return lt}function L0(E){return Ns(E)?E:[]}function B0(E){return typeof E=="function"?E:Jo}function lu(E,I){return Ji(E)?E:g1(E,I)?[E]:x1(Ur(E))}var qb=mr;function cu(E,I,Q){var ae=E.length;return Q=Q===i?ae:Q,!I&&Q>=ae?E:Va(E,I,Q)}var qy=Ko||function(E){return Xs.clearTimeout(E)};function $y(E,I){if(I)return E.slice();var Q=E.length,ae=Na?Na(Q):new E.constructor(Q);return E.copy(ae),ae}function D0(E){var I=new E.constructor(E.byteLength);return new Wo(I).set(new Wo(E)),I}function $b(E,I){var Q=I?D0(E.buffer):E.buffer;return new E.constructor(Q,E.byteOffset,E.byteLength)}function Jb(E){var I=new E.constructor(E.source,xt.exec(E));return I.lastIndex=E.lastIndex,I}function Zb(E){return Bl?Br(Bl.call(E)):{}}function Jy(E,I){var Q=I?D0(E.buffer):E.buffer;return new E.constructor(Q,E.byteOffset,E.length)}function Zy(E,I){if(E!==I){var Q=E!==i,ae=E===null,Me=E===E,Ve=$o(E),lt=I!==i,pt=I===null,wt=I===I,rn=$o(I);if(!pt&&!rn&&!Ve&&E>I||Ve&&lt&&wt&&!pt&&!rn||ae&&lt&&wt||!Q&&wt||!Me)return 1;if(!ae&&!Ve&&!rn&&E<I||rn&&Q&&Me&&!ae&&!Ve||pt&&Q&&Me||!lt&&Me||!wt)return-1}return 0}function e2(E,I,Q){for(var ae=-1,Me=E.criteria,Ve=I.criteria,lt=Me.length,pt=Q.length;++ae<lt;){var wt=Zy(Me[ae],Ve[ae]);if(wt){if(ae>=pt)return wt;var rn=Q[ae];return wt*(rn=="desc"?-1:1)}}return E.index-I.index}function e1(E,I,Q,ae){for(var Me=-1,Ve=E.length,lt=Q.length,pt=-1,wt=I.length,rn=Fi(Ve-lt,0),sn=Gt(wt+rn),gn=!ae;++pt<wt;)sn[pt]=I[pt];for(;++Me<lt;)(gn||Me<Ve)&&(sn[Q[Me]]=E[Me]);for(;rn--;)sn[pt++]=E[Me++];return sn}function t1(E,I,Q,ae){for(var Me=-1,Ve=E.length,lt=-1,pt=Q.length,wt=-1,rn=I.length,sn=Fi(Ve-pt,0),gn=Gt(sn+rn),Xn=!ae;++Me<sn;)gn[Me]=E[Me];for(var Jn=Me;++wt<rn;)gn[Jn+wt]=I[wt];for(;++lt<pt;)(Xn||Me<Ve)&&(gn[Jn+Q[lt]]=E[Me++]);return gn}function Yo(E,I){var Q=-1,ae=E.length;for(I||(I=Gt(ae));++Q<ae;)I[Q]=E[Q];return I}function Ol(E,I,Q,ae){var Me=!Q;Q||(Q={});for(var Ve=-1,lt=I.length;++Ve<lt;){var pt=I[Ve],wt=ae?ae(Q[pt],E[pt],pt,Q,E):i;wt===i&&(wt=E[pt]),Me?as(Q,pt,wt):ru(Q,pt,wt)}return Q}function t2(E,I){return Ol(E,m1(E),I)}function n2(E,I){return Ol(E,u2(E),I)}function sm(E,I){return function(Q,ae){var Me=Ji(Q)?sf:Yp,Ve=I?I():{};return Me(Q,E,Gi(ae,2),Ve)}}function Jh(E){return mr(function(I,Q){var ae=-1,Me=Q.length,Ve=Me>1?Q[Me-1]:i,lt=Me>2?Q[2]:i;for(Ve=E.length>3&&typeof Ve=="function"?(Me--,Ve):i,lt&&qo(Q[0],Q[1],lt)&&(Ve=Me<3?i:Ve,Me=1),I=Br(I);++ae<Me;){var pt=Q[ae];pt&&E(I,pt,ae,Ve)}return I})}function n1(E,I){return function(Q,ae){if(Q==null)return Q;if(!Fo(Q))return E(Q,ae);for(var Me=Q.length,Ve=I?Me:-1,lt=Br(Q);(I?Ve--:++Ve<Me)&&ae(lt[Ve],Ve,lt)!==!1;);return Q}}function i1(E){return function(I,Q,ae){for(var Me=-1,Ve=Br(I),lt=ae(I),pt=lt.length;pt--;){var wt=lt[E?pt:++Me];if(Q(Ve[wt],wt,Ve)===!1)break}return I}}function i2(E,I,Q){var ae=I&b,Me=mf(E);function Ve(){var lt=this&&this!==Xs&&this instanceof Ve?Me:E;return lt.apply(ae?Q:this,arguments)}return Ve}function r1(E){return function(I){I=Ur(I);var Q=Sl(I)?qs(I):i,ae=Q?Q[0]:I.charAt(0),Me=Q?cu(Q,1).join(""):I.slice(1);return ae[E]()+Me}}function Zh(E){return function(I){return Lu(Au(fx(I).replace(vi,"")),E,"")}}function mf(E){return function(){var I=arguments;switch(I.length){case 0:return new E;case 1:return new E(I[0]);case 2:return new E(I[0],I[1]);case 3:return new E(I[0],I[1],I[2]);case 4:return new E(I[0],I[1],I[2],I[3]);case 5:return new E(I[0],I[1],I[2],I[3],I[4]);case 6:return new E(I[0],I[1],I[2],I[3],I[4],I[5]);case 7:return new E(I[0],I[1],I[2],I[3],I[4],I[5],I[6])}var Q=Zc(E.prototype),ae=E.apply(Q,I);return ps(ae)?ae:Q}}function r2(E,I,Q){var ae=mf(E);function Me(){for(var Ve=arguments.length,lt=Gt(Ve),pt=Ve,wt=gf(Me);pt--;)lt[pt]=arguments[pt];var rn=Ve<3&&lt[0]!==wt&&lt[Ve-1]!==wt?[]:ca(lt,wt);if(Ve-=rn.length,Ve<Q)return c1(E,I,om,Me.placeholder,i,lt,rn,i,i,Q-Ve);var sn=this&&this!==Xs&&this instanceof Me?ae:E;return Bo(sn,this,lt)}return Me}function s1(E){return function(I,Q,ae){var Me=Br(I);if(!Fo(I)){var Ve=Gi(Q,3);I=js(I),Q=function(pt){return Ve(Me[pt],pt,Me)}}var lt=E(I,Q,ae);return lt>-1?Me[Ve?I[lt]:lt]:i}}function o1(E){return pc(function(I){var Q=I.length,ae=Q,Me=ys.prototype.thru;for(E&&I.reverse();ae--;){var Ve=I[ae];if(typeof Ve!="function")throw new vo(c);if(Me&&!lt&&U0(Ve)=="wrapper")var lt=new ys([],!0)}for(ae=lt?ae:Q;++ae<Q;){Ve=I[ae];var pt=U0(Ve),wt=pt=="wrapper"?N0(Ve):i;wt&&A1(wt[0])&&wt[1]==(P|C|T|k)&&!wt[4].length&&wt[9]==1?lt=lt[U0(wt[0])].apply(lt,wt[3]):lt=Ve.length==1&&A1(Ve)?lt[pt]():lt.thru(Ve)}return function(){var rn=arguments,sn=rn[0];if(lt&&rn.length==1&&Ji(sn))return lt.plant(sn).value();for(var gn=0,Xn=Q?I[gn].apply(this,rn):sn;++gn<Q;)Xn=I[gn].call(this,Xn);return Xn}})}function om(E,I,Q,ae,Me,Ve,lt,pt,wt,rn){var sn=I&P,gn=I&b,Xn=I&m,Jn=I&(C|M),Si=I&D,ir=Xn?i:mf(E);function ki(){for(var gr=arguments.length,wr=Gt(gr),_a=gr;_a--;)wr[_a]=arguments[_a];if(Jn)var Uo=gf(ki),ba=h0(wr,Uo);if(ae&&(wr=e1(wr,ae,Me,Jn)),Ve&&(wr=t1(wr,Ve,lt,Jn)),gr-=ba,Jn&&gr<rn){var cs=ca(wr,Uo);return c1(E,I,om,ki.placeholder,Q,wr,cs,pt,wt,rn-gr)}var Wa=gn?Q:this,hl=Xn?Wa[E]:E;return gr=wr.length,pt?wr=cr(wr,pt):Si&&gr>1&&wr.reverse(),sn&&wt<gr&&(wr.length=wt),this&&this!==Xs&&this instanceof ki&&(hl=ir||mf(hl)),hl.apply(Wa,wr)}return ki}function a1(E,I){return function(Q,ae){return $h(Q,E,I(ae),{})}}function am(E,I){return function(Q,ae){var Me;if(Q===i&&ae===i)return I;if(Q!==i&&(Me=Q),ae!==i){if(Me===i)return ae;typeof Q=="string"||typeof ae=="string"?(Q=ya(Q),ae=ya(ae)):(Q=Wy(Q),ae=Wy(ae)),Me=E(Q,ae)}return Me}}function P0(E){return pc(function(I){return I=vr(I,Po(Gi())),mr(function(Q){var ae=this;return E(I,function(Me){return Bo(Me,ae,Q)})})})}function lm(E,I){I=I===i?" ":ya(I);var Q=I.length;if(Q<2)return Q?S0(I,E):I;var ae=S0(I,Rl(E/Tl(I)));return Sl(I)?cu(qs(ae),0,E).join(""):ae.slice(0,E)}function s2(E,I,Q,ae){var Me=I&b,Ve=mf(E);function lt(){for(var pt=-1,wt=arguments.length,rn=-1,sn=ae.length,gn=Gt(sn+wt),Xn=this&&this!==Xs&&this instanceof lt?Ve:E;++rn<sn;)gn[rn]=ae[rn];for(;wt--;)gn[rn++]=arguments[++pt];return Bo(Xn,Me?Q:this,gn)}return lt}function l1(E){return function(I,Q,ae){return ae&&typeof ae!="number"&&qo(I,Q,ae)&&(Q=ae=i),I=Ul(I),Q===i?(Q=I,I=0):Q=Ul(Q),ae=ae===i?I<Q?1:-1:Ul(ae),jb(I,Q,ae,E)}}function cm(E){return function(I,Q){return typeof I=="string"&&typeof Q=="string"||(I=Qa(I),Q=Qa(Q)),E(I,Q)}}function c1(E,I,Q,ae,Me,Ve,lt,pt,wt,rn){var sn=I&C,gn=sn?lt:i,Xn=sn?i:lt,Jn=sn?Ve:i,Si=sn?i:Ve;I|=sn?T:N,I&=~(sn?N:T),I&S||(I&=~(b|m));var ir=[E,I,Me,Jn,gn,Si,Xn,pt,wt,rn],ki=Q.apply(i,ir);return A1(E)&&ja(ki,ir),ki.placeholder=ae,v1(ki,E,I)}function O0(E){var I=ws[E];return function(Q,ae){if(Q=Qa(Q),ae=ae==null?0:sr(nr(ae),292),ae&&Ua(Q)){var Me=(Ur(Q)+"e").split("e"),Ve=I(Me[0]+"e"+(+Me[1]+ae));return Me=(Ur(Ve)+"e").split("e"),+(Me[0]+"e"+(+Me[1]-ae))}return I(Q)}}var o2=Ll&&1/Qc(new Ll([,-0]))[1]==V?function(E){return new Ll(E)}:TA;function u1(E){return function(I){var Q=Oo(I);return Q==Xt?As(I):Q==Ai?Uh(I):il(I,E(I))}}function fc(E,I,Q,ae,Me,Ve,lt,pt){var wt=I&m;if(!wt&&typeof E!="function")throw new vo(c);var rn=ae?ae.length:0;if(rn||(I&=~(T|N),ae=Me=i),lt=lt===i?lt:Fi(nr(lt),0),pt=pt===i?pt:nr(pt),rn-=Me?Me.length:0,I&N){var sn=ae,gn=Me;ae=Me=i}var Xn=wt?i:N0(E),Jn=[E,I,Q,ae,Me,sn,gn,Ve,lt,pt];if(Xn&&HI(Jn,Xn),E=Jn[0],I=Jn[1],Q=Jn[2],ae=Jn[3],Me=Jn[4],pt=Jn[9]=Jn[9]===i?wt?0:E.length:Fi(Jn[9]-rn,0),!pt&&I&(C|M)&&(I&=~(C|M)),!I||I==b)var Si=i2(E,I,Q);else I==C||I==M?Si=r2(E,I,pt):(I==T||I==(b|T))&&!Me.length?Si=s2(E,I,Q,ae):Si=om.apply(i,Jn);var ir=Xn?jy:ja;return v1(ir(Si,Jn),E,I)}function h1(E,I,Q,ae){return E===i||cl(E,ha[Q])&&!br.call(ae,Q)?I:E}function d1(E,I,Q,ae,Me,Ve){return ps(E)&&ps(I)&&(Ve.set(I,E),nm(E,I,i,d1,Ve),Ve.delete(I)),E}function a2(E){return mc(E)?i:E}function f1(E,I,Q,ae,Me,Ve){var lt=Q&_,pt=E.length,wt=I.length;if(pt!=wt&&!(lt&&wt>pt))return!1;var rn=Ve.get(E),sn=Ve.get(I);if(rn&&sn)return rn==I&&sn==E;var gn=-1,Xn=!0,Jn=Q&x?new fs:i;for(Ve.set(E,I),Ve.set(I,E);++gn<pt;){var Si=E[gn],ir=I[gn];if(ae)var ki=lt?ae(ir,Si,gn,I,E,Ve):ae(Si,ir,gn,E,I,Ve);if(ki!==i){if(ki)continue;Xn=!1;break}if(Jn){if(!of(I,function(gr,wr){if(!Fs(Jn,wr)&&(Si===gr||Me(Si,gr,Q,ae,Ve)))return Jn.push(wr)})){Xn=!1;break}}else if(!(Si===ir||Me(Si,ir,Q,ae,Ve))){Xn=!1;break}}return Ve.delete(E),Ve.delete(I),Xn}function l2(E,I,Q,ae,Me,Ve,lt){switch(Q){case Te:if(E.byteLength!=I.byteLength||E.byteOffset!=I.byteOffset)return!1;E=E.buffer,I=I.buffer;case Pe:return!(E.byteLength!=I.byteLength||!Ve(new Wo(E),new Wo(I)));case st:case mt:case on:return cl(+E,+I);case Pt:return E.name==I.name&&E.message==I.message;case Wn:case Ti:return E==I+"";case Xt:var pt=As;case Ai:var wt=ae&_;if(pt||(pt=Qc),E.size!=I.size&&!wt)return!1;var rn=lt.get(E);if(rn)return rn==I;ae|=x,lt.set(E,I);var sn=f1(pt(E),pt(I),ae,Me,Ve,lt);return lt.delete(E),sn;case Je:if(Bl)return Bl.call(E)==Bl.call(I)}return!1}function c2(E,I,Q,ae,Me,Ve){var lt=Q&_,pt=F0(E),wt=pt.length,rn=F0(I),sn=rn.length;if(wt!=sn&&!lt)return!1;for(var gn=wt;gn--;){var Xn=pt[gn];if(!(lt?Xn in I:br.call(I,Xn)))return!1}var Jn=Ve.get(E),Si=Ve.get(I);if(Jn&&Si)return Jn==I&&Si==E;var ir=!0;Ve.set(E,I),Ve.set(I,E);for(var ki=lt;++gn<wt;){Xn=pt[gn];var gr=E[Xn],wr=I[Xn];if(ae)var _a=lt?ae(wr,gr,Xn,I,E,Ve):ae(gr,wr,Xn,E,I,Ve);if(!(_a===i?gr===wr||Me(gr,wr,Q,ae,Ve):_a)){ir=!1;break}ki||(ki=Xn=="constructor")}if(ir&&!ki){var Uo=E.constructor,ba=I.constructor;Uo!=ba&&"constructor"in E&&"constructor"in I&&!(typeof Uo=="function"&&Uo instanceof Uo&&typeof ba=="function"&&ba instanceof ba)&&(ir=!1)}return Ve.delete(E),Ve.delete(I),ir}function pc(E){return z0(m2(E,i,K0),E+"")}function F0(E){return Dy(E,js,m1)}function k0(E){return Dy(E,No,u2)}var N0=jh?function(E){return jh.get(E)}:TA;function U0(E){for(var I=E.name+"",Q=uc[I],ae=br.call(uc,I)?Q.length:0;ae--;){var Me=Q[ae],Ve=Me.func;if(Ve==null||Ve==E)return Me.name}return I}function gf(E){var I=br.call(Ne,"placeholder")?Ne:E;return I.placeholder}function Gi(){var E=Ne.iteratee||CA;return E=E===CA?Fy:E,arguments.length?E(arguments[0],arguments[1]):E}function G0(E,I){var Q=E.__data__;return NI(I)?Q[typeof I=="string"?"string":"hash"]:Q.map}function p1(E){for(var I=js(E),Q=I.length;Q--;){var ae=I[Q],Me=E[ae];I[Q]=[ae,Me,f2(Me)]}return I}function ed(E,I){var Q=Nh(E,I);return Oy(Q)?Q:i}function LI(E){var I=br.call(E,ks),Q=E[ks];try{E[ks]=i;var ae=!0}catch{}var Me=Il.call(E);return ae&&(I?E[ks]=Q:delete E[ks]),Me}var m1=ro?function(E){return E==null?[]:(E=Br(E),nl(ro(E),function(I){return Oi.call(E,I)}))}:Wu,u2=ro?function(E){for(var I=[];E;)Kr(I,m1(E)),E=qc(E);return I}:Wu,Oo=Is;(al&&Oo(new al(new ArrayBuffer(1)))!=Te||$c&&Oo(new $c)!=Xt||Vh&&Oo(Vh.resolve())!=Rn||Ll&&Oo(new Ll)!=Ai||cc&&Oo(new cc)!=ge)&&(Oo=function(E){var I=Is(E),Q=I==vn?E.constructor:i,ae=Q?kl(Q):"";if(ae)switch(ae){case Or:return Te;case ma:return Xt;case Ss:return Rn;case ga:return Ai;case Ga:return ge}return I});function BI(E,I,Q){for(var ae=-1,Me=Q.length;++ae<Me;){var Ve=Q[ae],lt=Ve.size;switch(Ve.type){case"drop":E+=lt;break;case"dropRight":I-=lt;break;case"take":I=sr(I,E+lt);break;case"takeRight":E=Fi(E,I-lt);break}}return{start:E,end:I}}function DI(E){var I=E.match(li);return I?I[1].split(bi):[]}function h2(E,I,Q){I=lu(I,E);for(var ae=-1,Me=I.length,Ve=!1;++ae<Me;){var lt=Fl(I[ae]);if(!(Ve=E!=null&&Q(E,lt)))break;E=E[lt]}return Ve||++ae!=Me?Ve:(Me=E==null?0:E.length,!!Me&&Gu(Me)&&uu(lt,Me)&&(Ji(E)||Ea(E)))}function PI(E){var I=E.length,Q=new E.constructor(I);return I&&typeof E[0]=="string"&&br.call(E,"index")&&(Q.index=E.index,Q.input=E.input),Q}function d2(E){return typeof E.constructor=="function"&&!um(E)?Zc(qc(E)):{}}function OI(E,I,Q){var ae=E.constructor;switch(I){case Pe:return D0(E);case st:case mt:return new ae(+E);case Te:return $b(E,Q);case He:case Fe:case Ue:case Ae:case Xe:case dt:case ue:case q:case re:return Jy(E,Q);case Xt:return new ae;case on:case Ti:return new ae(E);case Wn:return Jb(E);case Ai:return new ae;case Je:return Zb(E)}}function FI(E,I){var Q=I.length;if(!Q)return E;var ae=Q-1;return I[ae]=(Q>1?"& ":"")+I[ae],I=I.join(Q>2?", ":" "),E.replace(Cn,`{
/* [wrapped with `+I+`] */
`)}function kI(E){return Ji(E)||Ea(E)||!!(Cs&&E&&E[Cs])}function uu(E,I){var Q=typeof E;return I=I??K,!!I&&(Q=="number"||Q!="symbol"&&We.test(E))&&E>-1&&E%1==0&&E<I}function qo(E,I,Q){if(!ps(Q))return!1;var ae=typeof I;return(ae=="number"?Fo(Q)&&uu(I,Q.length):ae=="string"&&I in Q)?cl(Q[I],E):!1}function g1(E,I){if(Ji(E))return!1;var Q=typeof E;return Q=="number"||Q=="symbol"||Q=="boolean"||E==null||$o(E)?!0:Ir.test(E)||!Pi.test(E)||I!=null&&E in Br(I)}function NI(E){var I=typeof E;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?E!=="__proto__":E===null}function A1(E){var I=U0(E),Q=Ne[I];if(typeof Q!="function"||!(I in Mr.prototype))return!1;if(E===Q)return!0;var ae=N0(Q);return!!ae&&E===ae[0]}function UI(E){return!!sl&&sl in E}var GI=da?Nl:RA;function um(E){var I=E&&E.constructor,Q=typeof I=="function"&&I.prototype||ha;return E===Q}function f2(E){return E===E&&!ps(E)}function p2(E,I){return function(Q){return Q==null?!1:Q[E]===I&&(I!==i||E in Br(Q))}}function zI(E){var I=gm(E,function(ae){return Q.size===f&&Q.clear(),ae}),Q=I.cache;return I}function HI(E,I){var Q=E[1],ae=I[1],Me=Q|ae,Ve=Me<(b|m|P),lt=ae==P&&Q==C||ae==P&&Q==k&&E[7].length<=I[8]||ae==(P|k)&&I[7].length<=I[8]&&Q==C;if(!(Ve||lt))return E;ae&b&&(E[2]=I[2],Me|=Q&b?0:S);var pt=I[3];if(pt){var wt=E[3];E[3]=wt?e1(wt,pt,I[4]):pt,E[4]=wt?ca(E[3],A):I[4]}return pt=I[5],pt&&(wt=E[5],E[5]=wt?t1(wt,pt,I[6]):pt,E[6]=wt?ca(E[5],A):I[6]),pt=I[7],pt&&(E[7]=pt),ae&P&&(E[8]=E[8]==null?I[8]:sr(E[8],I[8])),E[9]==null&&(E[9]=I[9]),E[0]=I[0],E[1]=Me,E}function VI(E){var I=[];if(E!=null)for(var Q in Br(E))I.push(Q);return I}function jI(E){return Il.call(E)}function m2(E,I,Q){return I=Fi(I===i?E.length-1:I,0),function(){for(var ae=arguments,Me=-1,Ve=Fi(ae.length-I,0),lt=Gt(Ve);++Me<Ve;)lt[Me]=ae[I+Me];Me=-1;for(var pt=Gt(I+1);++Me<I;)pt[Me]=ae[Me];return pt[I]=Q(lt),Bo(E,this,pt)}}function g2(E,I){return I.length<2?E:ku(E,Va(I,0,-1))}function cr(E,I){for(var Q=E.length,ae=sr(I.length,Q),Me=Yo(E);ae--;){var Ve=I[ae];E[ae]=uu(Ve,Q)?Me[Ve]:i}return E}function Hn(E,I){if(!(I==="constructor"&&typeof E[I]=="function")&&I!="__proto__")return E[I]}var ja=y1(jy),hu=Hh||function(E,I){return Xs.setTimeout(E,I)},z0=y1(Kb);function v1(E,I,Q){var ae=I+"";return z0(E,FI(ae,td(DI(ae),Q)))}function y1(E){var I=0,Q=0;return function(){var ae=fr(),Me=O-(ae-Q);if(Q=ae,Me>0){if(++I>=ne)return arguments[0]}else I=0;return E.apply(i,arguments)}}function hm(E,I){var Q=-1,ae=E.length,Me=ae-1;for(I=I===i?ae:I;++Q<I;){var Ve=M0(Q,Me),lt=E[Ve];E[Ve]=E[Q],E[Q]=lt}return E.length=I,E}var x1=zI(function(E){var I=[];return E.charCodeAt(0)===46&&I.push(""),E.replace(_i,function(Q,ae,Me,Ve){I.push(Me?Ve.replace(ar,"$1"):ae||Q)}),I});function Fl(E){if(typeof E=="string"||$o(E))return E;var I=E+"";return I=="0"&&1/E==-V?"-0":I}function kl(E){if(E!=null){try{return fa.call(E)}catch{}try{return E+""}catch{}}return""}function td(E,I){return co(Be,function(Q){var ae="_."+Q[0];I&Q[1]&&!Fa(E,ae)&&E.push(ae)}),E.sort()}function H0(E){if(E instanceof Mr)return E.clone();var I=new ys(E.__wrapped__,E.__chain__);return I.__actions__=Yo(E.__actions__),I.__index__=E.__index__,I.__values__=E.__values__,I}function Nu(E,I,Q){(Q?qo(E,I,Q):I===i)?I=1:I=Fi(nr(I),0);var ae=E==null?0:E.length;if(!ae||I<1)return[];for(var Me=0,Ve=0,lt=Gt(Rl(ae/I));Me<ae;)lt[Ve++]=Va(E,Me,Me+=I);return lt}function V0(E){for(var I=-1,Q=E==null?0:E.length,ae=0,Me=[];++I<Q;){var Ve=E[I];Ve&&(Me[ae++]=Ve)}return Me}function E1(){var E=arguments.length;if(!E)return[];for(var I=Gt(E-1),Q=arguments[0],ae=E;ae--;)I[ae-1]=arguments[ae];return Kr(Ji(Q)?Yo(Q):[Q],Ts(I,1))}var j0=mr(function(E,I){return Ns(E)?Yh(E,Ts(I,1,Ns,!0)):[]}),Uu=mr(function(E,I){var Q=xa(I);return Ns(Q)&&(Q=i),Ns(E)?Yh(E,Ts(I,1,Ns,!0),Gi(Q,2)):[]}),nd=mr(function(E,I){var Q=xa(I);return Ns(Q)&&(Q=i),Ns(E)?Yh(E,Ts(I,1,Ns,!0),i,Q):[]});function _1(E,I,Q){var ae=E==null?0:E.length;return ae?(I=Q||I===i?1:nr(I),Va(E,I<0?0:I,ae)):[]}function Q0(E,I,Q){var ae=E==null?0:E.length;return ae?(I=Q||I===i?1:nr(I),I=ae-I,Va(E,0,I<0?0:I)):[]}function A2(E,I){return E&&E.length?rm(E,Gi(I,3),!0,!0):[]}function b1(E,I){return E&&E.length?rm(E,Gi(I,3),!0):[]}function dm(E,I,Q,ae){var Me=E==null?0:E.length;return Me?(Q&&typeof Q!="number"&&qo(E,I,Q)&&(Q=0,ae=Me),Jp(E,I,Q,ae)):[]}function w1(E,I,Q){var ae=E==null?0:E.length;if(!ae)return-1;var Me=Q==null?0:nr(Q);return Me<0&&(Me=Fi(ae+Me,0)),Oh(E,Gi(I,3),Me)}function W0(E,I,Q){var ae=E==null?0:E.length;if(!ae)return-1;var Me=ae-1;return Q!==i&&(Me=nr(Q),Me=Q<0?Fi(ae+Me,0):sr(Me,ae-1)),Oh(E,Gi(I,3),Me,!0)}function K0(E){var I=E==null?0:E.length;return I?Ts(E,1):[]}function X0(E){var I=E==null?0:E.length;return I?Ts(E,V):[]}function v2(E,I){var Q=E==null?0:E.length;return Q?(I=I===i?1:nr(I),Ts(E,I)):[]}function y2(E){for(var I=-1,Q=E==null?0:E.length,ae={};++I<Q;){var Me=E[I];ae[Me[0]]=Me[1]}return ae}function C1(E){return E&&E.length?E[0]:i}function x2(E,I,Q){var ae=E==null?0:E.length;if(!ae)return-1;var Me=Q==null?0:nr(Q);return Me<0&&(Me=Fi(ae+Me,0)),Hc(E,I,Me)}function E2(E){var I=E==null?0:E.length;return I?Va(E,0,-1):[]}var _2=mr(function(E){var I=vr(E,L0);return I.length&&I[0]===E[0]?E0(I):[]}),b2=mr(function(E){var I=xa(E),Q=vr(E,L0);return I===xa(Q)?I=i:Q.pop(),Q.length&&Q[0]===E[0]?E0(Q,Gi(I,2)):[]}),w2=mr(function(E){var I=xa(E),Q=vr(E,L0);return I=typeof I=="function"?I:i,I&&Q.pop(),Q.length&&Q[0]===E[0]?E0(Q,i,I):[]});function C2(E,I){return E==null?"":Ou.call(E,I)}function xa(E){var I=E==null?0:E.length;return I?E[I-1]:i}function M1(E,I,Q){var ae=E==null?0:E.length;if(!ae)return-1;var Me=ae;return Q!==i&&(Me=nr(Q),Me=Me<0?Fi(ae+Me,0):sr(Me,ae-1)),I===I?Wc(E,I,Me):Oh(E,Gp,Me,!0)}function S1(E,I){return E&&E.length?Gy(E,nr(I)):i}var T1=mr(Y0);function Y0(E,I){return E&&E.length&&I&&I.length?C0(E,I):E}function I1(E,I,Q){return E&&E.length&&I&&I.length?C0(E,I,Gi(Q,2)):E}function R1(E,I,Q){return E&&E.length&&I&&I.length?C0(E,I,i,Q):E}var L1=pc(function(E,I){var Q=E==null?0:E.length,ae=v0(E,I);return Vy(E,vr(I,function(Me){return uu(Me,Q)?+Me:Me}).sort(Zy)),ae});function B1(E,I){var Q=[];if(!(E&&E.length))return Q;var ae=-1,Me=[],Ve=E.length;for(I=Gi(I,3);++ae<Ve;){var lt=E[ae];I(lt,ae,E)&&(Q.push(lt),Me.push(ae))}return Vy(E,Me),Q}function du(E){return E==null?E:ol.call(E)}function Zs(E,I,Q){var ae=E==null?0:E.length;return ae?(Q&&typeof Q!="number"&&qo(E,I,Q)?(I=0,Q=ae):(I=I==null?0:nr(I),Q=Q===i?ae:nr(Q)),Va(E,I,Q)):[]}function eo(E,I){return im(E,I)}function fm(E,I,Q){return T0(E,I,Gi(Q,2))}function M2(E,I){var Q=E==null?0:E.length;if(Q){var ae=im(E,I);if(ae<Q&&cl(E[ae],I))return ae}return-1}function S2(E,I){return im(E,I,!0)}function T2(E,I,Q){return T0(E,I,Gi(Q,2),!0)}function I2(E,I){var Q=E==null?0:E.length;if(Q){var ae=im(E,I,!0)-1;if(cl(E[ae],I))return ae}return-1}function R2(E){return E&&E.length?Qy(E):[]}function L2(E,I){return E&&E.length?Qy(E,Gi(I,2)):[]}function B2(E){var I=E==null?0:E.length;return I?Va(E,1,I):[]}function D2(E,I,Q){return E&&E.length?(I=Q||I===i?1:nr(I),Va(E,0,I<0?0:I)):[]}function P2(E,I,Q){var ae=E==null?0:E.length;return ae?(I=Q||I===i?1:nr(I),I=ae-I,Va(E,I<0?0:I,ae)):[]}function O2(E,I){return E&&E.length?rm(E,Gi(I,3),!1,!0):[]}function F2(E,I){return E&&E.length?rm(E,Gi(I,3)):[]}var k2=mr(function(E){return au(Ts(E,1,Ns,!0))}),N2=mr(function(E){var I=xa(E);return Ns(I)&&(I=i),au(Ts(E,1,Ns,!0),Gi(I,2))}),U2=mr(function(E){var I=xa(E);return I=typeof I=="function"?I:i,au(Ts(E,1,Ns,!0),i,I)});function G2(E){return E&&E.length?au(E):[]}function z2(E,I){return E&&E.length?au(E,Gi(I,2)):[]}function H2(E,I){return I=typeof I=="function"?I:i,E&&E.length?au(E,i,I):[]}function q0(E){if(!(E&&E.length))return[];var I=0;return E=nl(E,function(Q){if(Ns(Q))return I=Fi(Q.length,I),!0}),cf(I,function(Q){return vr(E,af(Q))})}function D1(E,I){if(!(E&&E.length))return[];var Q=q0(E);return I==null?Q:vr(Q,function(ae){return Bo(I,i,ae)})}var V2=mr(function(E,I){return Ns(E)?Yh(E,I):[]}),j2=mr(function(E){return R0(nl(E,Ns))}),Q2=mr(function(E){var I=xa(E);return Ns(I)&&(I=i),R0(nl(E,Ns),Gi(I,2))}),W2=mr(function(E){var I=xa(E);return I=typeof I=="function"?I:i,R0(nl(E,Ns),i,I)}),K2=mr(q0);function X2(E,I){return Yy(E||[],I||[],ru)}function Y2(E,I){return Yy(E||[],I||[],pf)}var q2=mr(function(E){var I=E.length,Q=I>1?E[I-1]:i;return Q=typeof Q=="function"?(E.pop(),Q):i,D1(E,Q)});function P1(E){var I=Ne(E);return I.__chain__=!0,I}function $2(E,I){return I(E),E}function pm(E,I){return I(E)}var J2=pc(function(E){var I=E.length,Q=I?E[0]:0,ae=this.__wrapped__,Me=function(Ve){return v0(Ve,E)};return I>1||this.__actions__.length||!(ae instanceof Mr)||!uu(Q)?this.thru(Me):(ae=ae.slice(Q,+Q+(I?1:0)),ae.__actions__.push({func:pm,args:[Me],thisArg:i}),new ys(ae,this.__chain__).thru(function(Ve){return I&&!Ve.length&&Ve.push(i),Ve}))});function Z2(){return P1(this)}function ew(){return new ys(this.value(),this.__chain__)}function tw(){this.__values__===i&&(this.__values__=aA(this.value()));var E=this.__index__>=this.__values__.length,I=E?i:this.__values__[this.__index__++];return{done:E,value:I}}function nw(){return this}function iw(E){for(var I,Q=this;Q instanceof Qh;){var ae=H0(Q);ae.__index__=0,ae.__values__=i,I?Me.__wrapped__=ae:I=ae;var Me=ae;Q=Q.__wrapped__}return Me.__wrapped__=E,I}function rw(){var E=this.__wrapped__;if(E instanceof Mr){var I=E;return this.__actions__.length&&(I=new Mr(this)),I=I.reverse(),I.__actions__.push({func:pm,args:[du],thisArg:i}),new ys(I,this.__chain__)}return this.thru(du)}function sw(){return Xy(this.__wrapped__,this.__actions__)}var ow=sm(function(E,I,Q){br.call(E,Q)?++E[Q]:as(E,Q,1)});function aw(E,I,Q){var ae=Ji(E)?Ys:Bb;return Q&&qo(E,I,Q)&&(I=i),ae(E,Gi(I,3))}function lw(E,I){var Q=Ji(E)?nl:Vs;return Q(E,Gi(I,3))}var cw=s1(w1),uw=s1(W0);function $0(E,I){return Ts(mm(E,I),1)}function O1(E,I){return Ts(mm(E,I),V)}function hw(E,I,Q){return Q=Q===i?1:nr(Q),Ts(mm(E,I),Q)}function Af(E,I){var Q=Ji(E)?co:dc;return Q(E,Gi(I,3))}function J0(E,I){var Q=Ji(E)?Do:By;return Q(E,Gi(I,3))}var dw=sm(function(E,I,Q){br.call(E,Q)?E[Q].push(I):as(E,Q,[I])});function fw(E,I,Q,ae){E=Fo(E)?E:gu(E),Q=Q&&!ae?nr(Q):0;var Me=E.length;return Q<0&&(Q=Fi(Me+Q,0)),Vu(E)?Q<=Me&&E.indexOf(I,Q)>-1:!!Me&&Hc(E,I,Q)>-1}var pw=mr(function(E,I,Q){var ae=-1,Me=typeof I=="function",Ve=Fo(E)?Gt(E.length):[];return dc(E,function(lt){Ve[++ae]=Me?Bo(I,lt,Q):df(lt,I,Q)}),Ve}),F1=sm(function(E,I,Q){as(E,Q,I)});function mm(E,I){var Q=Ji(E)?vr:ky;return Q(E,Gi(I,3))}function mw(E,I,Q,ae){return E==null?[]:(Ji(I)||(I=I==null?[]:[I]),Q=ae?i:Q,Ji(Q)||(Q=Q==null?[]:[Q]),zy(E,I,Q))}var gw=sm(function(E,I,Q){E[Q?0:1].push(I)},function(){return[[],[]]});function Aw(E,I,Q){var ae=Ji(E)?Lu:Fh,Me=arguments.length<3;return ae(E,Gi(I,4),Q,Me,dc)}function vw(E,I,Q){var ae=Ji(E)?a0:Fh,Me=arguments.length<3;return ae(E,Gi(I,4),Q,Me,By)}function vf(E,I){var Q=Ji(E)?nl:Vs;return Q(E,Am(Gi(I,3)))}function k1(E){var I=Ji(E)?Wp:Qb;return I(E)}function N1(E,I,Q){(Q?qo(E,I,Q):I===i)?I=1:I=nr(I);var ae=Ji(E)?Kp:Wb;return ae(E,I)}function yw(E){var I=Ji(E)?Xp:Xb;return I(E)}function Z0(E){if(E==null)return 0;if(Fo(E))return Vu(E)?Tl(E):E.length;var I=Oo(E);return I==Xt||I==Ai?E.size:b0(E).length}function xw(E,I,Q){var ae=Ji(E)?of:Yb;return Q&&qo(E,I,Q)&&(I=i),ae(E,Gi(I,3))}var Ew=mr(function(E,I){if(E==null)return[];var Q=I.length;return Q>1&&qo(E,I[0],I[1])?I=[]:Q>2&&qo(I[0],I[1],I[2])&&(I=[I[0]]),zy(E,Ts(I,1),[])}),yf=dr||function(){return Xs.Date.now()};function _w(E,I){if(typeof I!="function")throw new vo(c);return E=nr(E),function(){if(--E<1)return I.apply(this,arguments)}}function eA(E,I,Q){return I=Q?i:I,I=E&&I==null?E.length:I,fc(E,P,i,i,i,i,I)}function U1(E,I){var Q;if(typeof I!="function")throw new vo(c);return E=nr(E),function(){return--E>0&&(Q=I.apply(this,arguments)),E<=1&&(I=i),Q}}var tA=mr(function(E,I,Q){var ae=b;if(Q.length){var Me=ca(Q,gf(tA));ae|=T}return fc(E,ae,I,Q,Me)}),G1=mr(function(E,I,Q){var ae=b|m;if(Q.length){var Me=ca(Q,gf(G1));ae|=T}return fc(I,ae,E,Q,Me)});function z1(E,I,Q){I=Q?i:I;var ae=fc(E,C,i,i,i,i,i,I);return ae.placeholder=z1.placeholder,ae}function H1(E,I,Q){I=Q?i:I;var ae=fc(E,M,i,i,i,i,i,I);return ae.placeholder=H1.placeholder,ae}function V1(E,I,Q){var ae,Me,Ve,lt,pt,wt,rn=0,sn=!1,gn=!1,Xn=!0;if(typeof E!="function")throw new vo(c);I=Qa(I)||0,ps(Q)&&(sn=!!Q.leading,gn="maxWait"in Q,Ve=gn?Fi(Qa(Q.maxWait)||0,I):Ve,Xn="trailing"in Q?!!Q.trailing:Xn);function Jn(cs){var Wa=ae,hl=Me;return ae=Me=i,rn=cs,lt=E.apply(hl,Wa),lt}function Si(cs){return rn=cs,pt=hu(gr,I),sn?Jn(cs):lt}function ir(cs){var Wa=cs-wt,hl=cs-rn,BA=I-Wa;return gn?sr(BA,Ve-hl):BA}function ki(cs){var Wa=cs-wt,hl=cs-rn;return wt===i||Wa>=I||Wa<0||gn&&hl>=Ve}function gr(){var cs=yf();if(ki(cs))return wr(cs);pt=hu(gr,ir(cs))}function wr(cs){return pt=i,Xn&&ae?Jn(cs):(ae=Me=i,lt)}function _a(){pt!==i&&qy(pt),rn=0,ae=wt=Me=pt=i}function Uo(){return pt===i?lt:wr(yf())}function ba(){var cs=yf(),Wa=ki(cs);if(ae=arguments,Me=this,wt=cs,Wa){if(pt===i)return Si(wt);if(gn)return qy(pt),pt=hu(gr,I),Jn(wt)}return pt===i&&(pt=hu(gr,I)),lt}return ba.cancel=_a,ba.flush=Uo,ba}var bw=mr(function(E,I){return Ly(E,1,I)}),ww=mr(function(E,I,Q){return Ly(E,Qa(I)||0,Q)});function Cw(E){return fc(E,D)}function gm(E,I){if(typeof E!="function"||I!=null&&typeof I!="function")throw new vo(c);var Q=function(){var ae=arguments,Me=I?I.apply(this,ae):ae[0],Ve=Q.cache;if(Ve.has(Me))return Ve.get(Me);var lt=E.apply(this,ae);return Q.cache=Ve.set(Me,lt)||Ve,lt};return Q.cache=new(gm.Cache||hc),Q}gm.Cache=hc;function Am(E){if(typeof E!="function")throw new vo(c);return function(){var I=arguments;switch(I.length){case 0:return!E.call(this);case 1:return!E.call(this,I[0]);case 2:return!E.call(this,I[0],I[1]);case 3:return!E.call(this,I[0],I[1],I[2])}return!E.apply(this,I)}}function Mw(E){return U1(2,E)}var j1=qb(function(E,I){I=I.length==1&&Ji(I[0])?vr(I[0],Po(Gi())):vr(Ts(I,1),Po(Gi()));var Q=I.length;return mr(function(ae){for(var Me=-1,Ve=sr(ae.length,Q);++Me<Ve;)ae[Me]=I[Me].call(this,ae[Me]);return Bo(E,this,ae)})}),vm=mr(function(E,I){var Q=ca(I,gf(vm));return fc(E,T,i,I,Q)}),Q1=mr(function(E,I){var Q=ca(I,gf(Q1));return fc(E,N,i,I,Q)}),Sw=pc(function(E,I){return fc(E,k,i,i,i,I)});function Tw(E,I){if(typeof E!="function")throw new vo(c);return I=I===i?I:nr(I),mr(E,I)}function Iw(E,I){if(typeof E!="function")throw new vo(c);return I=I==null?0:Fi(nr(I),0),mr(function(Q){var ae=Q[I],Me=cu(Q,0,I);return ae&&Kr(Me,ae),Bo(E,this,Me)})}function Rw(E,I,Q){var ae=!0,Me=!0;if(typeof E!="function")throw new vo(c);return ps(Q)&&(ae="leading"in Q?!!Q.leading:ae,Me="trailing"in Q?!!Q.trailing:Me),V1(E,I,{leading:ae,maxWait:I,trailing:Me})}function Lw(E){return eA(E,1)}function W1(E,I){return vm(B0(I),E)}function Bw(){if(!arguments.length)return[];var E=arguments[0];return Ji(E)?E:[E]}function nA(E){return Js(E,v)}function iA(E,I){return I=typeof I=="function"?I:i,Js(E,v,I)}function Dw(E){return Js(E,g|v)}function Pw(E,I){return I=typeof I=="function"?I:i,Js(E,g|v,I)}function Ow(E,I){return I==null||Eo(E,I,js(I))}function cl(E,I){return E===I||E!==E&&I!==I}var Fw=cm(ou),K1=cm(function(E,I){return E>=I}),Ea=Py(function(){return arguments}())?Py:function(E){return ls(E)&&br.call(E,"callee")&&!Oi.call(E,"callee")},Ji=Gt.isArray,X1=Dp?Po(Dp):Db;function Fo(E){return E!=null&&Gu(E.length)&&!Nl(E)}function Ns(E){return ls(E)&&Fo(E)}function Y1(E){return E===!0||E===!1||ls(E)&&Is(E)==st}var fu=Wi||RA,rA=Pp?Po(Pp):Pb;function q1(E){return ls(E)&&E.nodeType===1&&!mc(E)}function kw(E){if(E==null)return!0;if(Fo(E)&&(Ji(E)||typeof E=="string"||typeof E.splice=="function"||fu(E)||pu(E)||Ea(E)))return!E.length;var I=Oo(E);if(I==Xt||I==Ai)return!E.size;if(um(E))return!b0(E).length;for(var Q in E)if(br.call(E,Q))return!1;return!0}function Nw(E,I){return ff(E,I)}function Uw(E,I,Q){Q=typeof Q=="function"?Q:i;var ae=Q?Q(E,I):i;return ae===i?ff(E,I,i,Q):!!ae}function sA(E){if(!ls(E))return!1;var I=Is(E);return I==Pt||I==Ft||typeof E.message=="string"&&typeof E.name=="string"&&!mc(E)}function $1(E){return typeof E=="number"&&Ua(E)}function Nl(E){if(!ps(E))return!1;var I=Is(E);return I==nt||I==Fn||I==Ge||I==zn}function xf(E){return typeof E=="number"&&E==nr(E)}function Gu(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=K}function ps(E){var I=typeof E;return E!=null&&(I=="object"||I=="function")}function ls(E){return E!=null&&typeof E=="object"}var _o=Op?Po(Op):Fb;function zu(E,I){return E===I||_0(E,I,p1(I))}function oA(E,I,Q){return Q=typeof Q=="function"?Q:i,_0(E,I,p1(I),Q)}function id(E){return Hu(E)&&E!=+E}function Ef(E){if(GI(E))throw new je(l);return Oy(E)}function rd(E){return E===null}function sd(E){return E==null}function Hu(E){return typeof E=="number"||ls(E)&&Is(E)==on}function mc(E){if(!ls(E)||Is(E)!=vn)return!1;var I=qc(E);if(I===null)return!0;var Q=br.call(I,"constructor")&&I.constructor;return typeof Q=="function"&&Q instanceof Q&&fa.call(Q)==os}var ym=Fp?Po(Fp):kb;function xm(E){return xf(E)&&E>=-K&&E<=K}var od=kp?Po(kp):Nb;function Vu(E){return typeof E=="string"||!Ji(E)&&ls(E)&&Is(E)==Ti}function $o(E){return typeof E=="symbol"||ls(E)&&Is(E)==Je}var pu=Np?Po(Np):Ub;function J1(E){return E===i}function Z1(E){return ls(E)&&Oo(E)==ge}function Em(E){return ls(E)&&Is(E)==_e}var _m=cm(w0),ex=cm(function(E,I){return E<=I});function aA(E){if(!E)return[];if(Fo(E))return Vu(E)?qs(E):Yo(E);if(hr&&E[hr])return Vp(E[hr]());var I=Oo(E),Q=I==Xt?As:I==Ai?Qc:gu;return Q(E)}function Ul(E){if(!E)return E===0?E:0;if(E=Qa(E),E===V||E===-V){var I=E<0?-1:1;return I*W}return E===E?E:0}function nr(E){var I=Ul(E),Q=I%1;return I===I?Q?I-Q:I:0}function lA(E){return E?Pl(nr(E),0,ee):0}function Qa(E){if(typeof E=="number")return E;if($o(E))return J;if(ps(E)){var I=typeof E.valueOf=="function"?E.valueOf():E;E=ps(I)?I+"":I}if(typeof E!="string")return E===0?E:+E;E=Xr(E);var Q=Et.test(E);return Q||Re.test(E)?sc(E.slice(2),Q?2:8):Mt.test(E)?J:+E}function cA(E){return Ol(E,No(E))}function tx(E){return E?Pl(nr(E),-K,K):E===0?E:0}function Ur(E){return E==null?"":ya(E)}var ad=Jh(function(E,I){if(um(I)||Fo(I)){Ol(I,js(I),E);return}for(var Q in I)br.call(I,Q)&&ru(E,Q,I[Q])}),uA=Jh(function(E,I){Ol(I,No(I),E)}),bm=Jh(function(E,I,Q,ae){Ol(I,No(I),E,ae)}),wm=Jh(function(E,I,Q,ae){Ol(I,js(I),E,ae)}),ld=pc(v0);function nx(E,I){var Q=Zc(E);return I==null?Q:qp(Q,I)}var ix=mr(function(E,I){E=Br(E);var Q=-1,ae=I.length,Me=ae>2?I[2]:i;for(Me&&qo(I[0],I[1],Me)&&(ae=1);++Q<ae;)for(var Ve=I[Q],lt=No(Ve),pt=-1,wt=lt.length;++pt<wt;){var rn=lt[pt],sn=E[rn];(sn===i||cl(sn,ha[rn])&&!br.call(E,rn))&&(E[rn]=Ve[rn])}return E}),Cm=mr(function(E){return E.push(i,d1),Bo(fA,i,E)});function Gw(E,I){return Up(E,Gi(I,3),Xo)}function _f(E,I){return Up(E,Gi(I,3),Zp)}function rx(E,I){return E==null?E:su(E,Gi(I,3),No)}function ko(E,I){return E==null?E:y0(E,Gi(I,3),No)}function sx(E,I){return E&&Xo(E,Gi(I,3))}function ox(E,I){return E&&Zp(E,Gi(I,3))}function ax(E){return E==null?[]:qh(E,js(E))}function hA(E){return E==null?[]:qh(E,No(E))}function cd(E,I,Q){var ae=E==null?i:ku(E,I);return ae===i?Q:ae}function mu(E,I){return E!=null&&h2(E,I,em)}function Mm(E,I){return E!=null&&h2(E,I,tm)}var lx=a1(function(E,I,Q){I!=null&&typeof I.toString!="function"&&(I=Il.call(I)),E[I]=Q},wA(Jo)),Gl=a1(function(E,I,Q){I!=null&&typeof I.toString!="function"&&(I=Il.call(I)),br.call(E,I)?E[I].push(Q):E[I]=[Q]},Gi),cx=mr(df);function js(E){return Fo(E)?Qp(E):b0(E)}function No(E){return Fo(E)?Qp(E,!0):Gb(E)}function dA(E,I){var Q={};return I=Gi(I,3),Xo(E,function(ae,Me,Ve){as(Q,I(ae,Me,Ve),ae)}),Q}function Sm(E,I){var Q={};return I=Gi(I,3),Xo(E,function(ae,Me,Ve){as(Q,Me,I(ae,Me,Ve))}),Q}var Tm=Jh(function(E,I,Q){nm(E,I,Q)}),fA=Jh(function(E,I,Q,ae){nm(E,I,Q,ae)}),ux=pc(function(E,I){var Q={};if(E==null)return Q;var ae=!1;I=vr(I,function(Ve){return Ve=lu(Ve,E),ae||(ae=Ve.length>1),Ve}),Ol(E,k0(E),Q),ae&&(Q=Js(Q,g|y|v,a2));for(var Me=I.length;Me--;)I0(Q,I[Me]);return Q});function zw(E,I){return Im(E,Am(Gi(I)))}var Hw=pc(function(E,I){return E==null?{}:Hb(E,I)});function Im(E,I){if(E==null)return{};var Q=vr(k0(E),function(ae){return[ae]});return I=Gi(I),Hy(E,Q,function(ae,Me){return I(ae,Me[0])})}function Vw(E,I,Q){I=lu(I,E);var ae=-1,Me=I.length;for(Me||(Me=1,E=i);++ae<Me;){var Ve=E==null?i:E[Fl(I[ae])];Ve===i&&(ae=Me,Ve=Q),E=Nl(Ve)?Ve.call(E):Ve}return E}function jw(E,I,Q){return E==null?E:pf(E,I,Q)}function ul(E,I,Q,ae){return ae=typeof ae=="function"?ae:i,E==null?E:pf(E,I,Q,ae)}var bf=u1(js),pA=u1(No);function mA(E,I,Q){var ae=Ji(E),Me=ae||fu(E)||pu(E);if(I=Gi(I,4),Q==null){var Ve=E&&E.constructor;Me?Q=ae?new Ve:[]:ps(E)?Q=Nl(Ve)?Zc(qc(E)):{}:Q={}}return(Me?co:Xo)(E,function(lt,pt,wt){return I(Q,lt,pt,wt)}),Q}function Rm(E,I){return E==null?!0:I0(E,I)}function gA(E,I,Q){return E==null?E:Ky(E,I,B0(Q))}function AA(E,I,Q,ae){return ae=typeof ae=="function"?ae:i,E==null?E:Ky(E,I,B0(Q),ae)}function gu(E){return E==null?[]:un(E,js(E))}function hx(E){return E==null?[]:un(E,No(E))}function dx(E,I,Q){return Q===i&&(Q=I,I=i),Q!==i&&(Q=Qa(Q),Q=Q===Q?Q:0),I!==i&&(I=Qa(I),I=I===I?I:0),Pl(Qa(E),I,Q)}function Qw(E,I,Q){return I=Ul(I),Q===i?(Q=I,I=0):Q=Ul(Q),E=Qa(E),x0(E,I,Q)}function Ww(E,I,Q){if(Q&&typeof Q!="boolean"&&qo(E,I,Q)&&(I=Q=i),Q===i&&(typeof I=="boolean"?(Q=I,I=i):typeof E=="boolean"&&(Q=E,E=i)),E===i&&I===i?(E=0,I=1):(E=Ul(E),I===i?(I=E,E=0):I=Ul(I)),E>I){var ae=E;E=I,I=ae}if(Q||E%1||I%1){var Me=Ms();return sr(E+Me*(I-E+rc("1e-"+((Me+"").length-1))),I)}return M0(E,I)}var Kw=Zh(function(E,I,Q){return I=I.toLowerCase(),E+(Q?ud(I):I)});function ud(E){return Om(Ur(E).toLowerCase())}function fx(E){return E=Ur(E),E&&E.replace(it,jc).replace(Ri,"")}function Xw(E,I,Q){E=Ur(E),I=ya(I);var ae=E.length;Q=Q===i?ae:Pl(nr(Q),0,ae);var Me=Q;return Q-=I.length,Q>=0&&E.slice(Q,Me)==I}function Yw(E){return E=Ur(E),E&&Jt.test(E)?E.replace(It,Du):E}function qw(E){return E=Ur(E),E&&Qt.test(E)?E.replace(Tn,"\\$&"):E}var wf=Zh(function(E,I,Q){return E+(Q?"-":"")+I.toLowerCase()}),vA=Zh(function(E,I,Q){return E+(Q?" ":"")+I.toLowerCase()}),px=r1("toLowerCase");function Lm(E,I,Q){E=Ur(E),I=nr(I);var ae=I?Tl(E):0;if(!I||ae>=I)return E;var Me=(I-ae)/2;return lm($s(Me),Q)+E+lm(Rl(Me),Q)}function mx(E,I,Q){E=Ur(E),I=nr(I);var ae=I?Tl(E):0;return I&&ae<I?E+lm(I-ae,Q):E}function yA(E,I,Q){E=Ur(E),I=nr(I);var ae=I?Tl(E):0;return I&&ae<I?lm(I-ae,Q)+E:E}function xA(E,I,Q){return Q||I==null?I=0:I&&(I=+I),Nr(Ur(E).replace(mn,""),I||0)}function EA(E,I,Q){return(Q?qo(E,I,Q):I===i)?I=1:I=nr(I),S0(Ur(E),I)}function _A(){var E=arguments,I=Ur(E[0]);return E.length<3?I:I.replace(E[1],E[2])}var gx=Zh(function(E,I,Q){return E+(Q?"_":"")+I.toLowerCase()});function Cf(E,I,Q){return Q&&typeof Q!="number"&&qo(E,I,Q)&&(I=Q=i),Q=Q===i?ee:Q>>>0,Q?(E=Ur(E),E&&(typeof I=="string"||I!=null&&!ym(I))&&(I=ya(I),!I&&Sl(E))?cu(qs(E),0,Q):E.split(I,Q)):[]}var hd=Zh(function(E,I,Q){return E+(Q?" ":"")+Om(I)});function Mf(E,I,Q){return E=Ur(E),Q=Q==null?0:Pl(nr(Q),0,E.length),I=ya(I),E.slice(Q,Q+I.length)==I}function Sf(E,I,Q){var ae=Ne.templateSettings;Q&&qo(E,I,Q)&&(I=i),E=Ur(E),I=bm({},I,ae,h1);var Me=bm({},I.imports,ae.imports,h1),Ve=js(Me),lt=un(Me,Ve),pt,wt,rn=0,sn=I.interpolate||gt,gn="__p += '",Xn=ua((I.escape||gt).source+"|"+sn.source+"|"+(sn===er?Ye:gt).source+"|"+(I.evaluate||gt).source+"|$","g"),Jn="//# sourceURL="+(br.call(I,"sourceURL")?(I.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ui+"]")+`
`;E.replace(Xn,function(ki,gr,wr,_a,Uo,ba){return wr||(wr=_a),gn+=E.slice(rn,ba).replace(At,ac),gr&&(pt=!0,gn+=`' +
__e(`+gr+`) +
'`),Uo&&(wt=!0,gn+=`';
`+Uo+`;
__p += '`),wr&&(gn+=`' +
((__t = (`+wr+`)) == null ? '' : __t) +
'`),rn=ba+ki.length,ki}),gn+=`';
`;var Si=br.call(I,"variable")&&I.variable;if(!Si)gn=`with (obj) {
`+gn+`
}
`;else if(Ar.test(Si))throw new je(d);gn=(wt?gn.replace(ke,""):gn).replace(be,"$1").replace(qe,"$1;"),gn="function("+(Si||"obj")+`) {
`+(Si?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(pt?", __e = _.escape":"")+(wt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gn+`return __p
}`;var ir=Ax(function(){return Lr(Ve,Jn+"return "+gn).apply(i,lt)});if(ir.source=gn,sA(ir))throw ir;return ir}function ju(E){return Ur(E).toLowerCase()}function Tf(E){return Ur(E).toUpperCase()}function gc(E,I,Q){if(E=Ur(E),E&&(Q||I===i))return Xr(E);if(!E||!(I=ya(I)))return E;var ae=qs(E),Me=qs(I),Ve=kh(ae,Me),lt=uf(ae,Me)+1;return cu(ae,Ve,lt).join("")}function If(E,I,Q){if(E=Ur(E),E&&(Q||I===i))return E.slice(0,Gh(E)+1);if(!E||!(I=ya(I)))return E;var ae=qs(E),Me=uf(ae,qs(I))+1;return cu(ae,0,Me).join("")}function Bm(E,I,Q){if(E=Ur(E),E&&(Q||I===i))return E.replace(mn,"");if(!E||!(I=ya(I)))return E;var ae=qs(E),Me=kh(ae,qs(I));return cu(ae,Me).join("")}function Dm(E,I){var Q=z,ae=Y;if(ps(I)){var Me="separator"in I?I.separator:Me;Q="length"in I?nr(I.length):Q,ae="omission"in I?ya(I.omission):ae}E=Ur(E);var Ve=E.length;if(Sl(E)){var lt=qs(E);Ve=lt.length}if(Q>=Ve)return E;var pt=Q-Tl(ae);if(pt<1)return ae;var wt=lt?cu(lt,0,pt).join(""):E.slice(0,pt);if(Me===i)return wt+ae;if(lt&&(pt+=wt.length-pt),ym(Me)){if(E.slice(pt).search(Me)){var rn,sn=wt;for(Me.global||(Me=ua(Me.source,Ur(xt.exec(Me))+"g")),Me.lastIndex=0;rn=Me.exec(sn);)var gn=rn.index;wt=wt.slice(0,gn===i?pt:gn)}}else if(E.indexOf(ya(Me),pt)!=pt){var Xn=wt.lastIndexOf(Me);Xn>-1&&(wt=wt.slice(0,Xn))}return wt+ae}function bA(E){return E=Ur(E),E&&Ot.test(E)?E.replace(Qe,d0):E}var Pm=Zh(function(E,I,Q){return E+(Q?" ":"")+I.toUpperCase()}),Om=r1("toUpperCase");function Au(E,I,Q){return E=Ur(E),I=Q?i:I,I===i?io(E)?Qo(E):c0(E):E.match(I)||[]}var Ax=mr(function(E,I){try{return Bo(E,i,I)}catch(Q){return sA(Q)?Q:new je(Q)}}),vx=pc(function(E,I){return co(I,function(Q){Q=Fl(Q),as(E,Q,tA(E[Q],E))}),E});function Qu(E){var I=E==null?0:E.length,Q=Gi();return E=I?vr(E,function(ae){if(typeof ae[1]!="function")throw new vo(c);return[Q(ae[0]),ae[1]]}):[],mr(function(ae){for(var Me=-1;++Me<I;){var Ve=E[Me];if(Bo(Ve[0],this,ae))return Bo(Ve[1],this,ae)}})}function Rf(E){return Xh(Js(E,g))}function wA(E){return function(){return E}}function $w(E,I){return E==null||E!==E?I:E}var Jw=o1(),Zw=o1(!0);function Jo(E){return E}function CA(E){return Fy(typeof E=="function"?E:Js(E,g))}function eC(E){return Ny(Js(E,g))}function tC(E,I){return Uy(E,Js(I,g))}var nC=mr(function(E,I){return function(Q){return df(Q,E,I)}}),iC=mr(function(E,I){return function(Q){return df(E,Q,I)}});function MA(E,I,Q){var ae=js(I),Me=qh(I,ae);Q==null&&!(ps(I)&&(Me.length||!ae.length))&&(Q=I,I=E,E=this,Me=qh(I,js(I)));var Ve=!(ps(Q)&&"chain"in Q)||!!Q.chain,lt=Nl(E);return co(Me,function(pt){var wt=I[pt];E[pt]=wt,lt&&(E.prototype[pt]=function(){var rn=this.__chain__;if(Ve||rn){var sn=E(this.__wrapped__),gn=sn.__actions__=Yo(this.__actions__);return gn.push({func:wt,args:arguments,thisArg:E}),sn.__chain__=rn,sn}return wt.apply(E,Kr([this.value()],arguments))})}),E}function SA(){return Xs._===this&&(Xs._=zh),this}function TA(){}function dd(E){return E=nr(E),mr(function(I){return Gy(I,E)})}var rC=P0(vr),xs=P0(Ys),Fm=P0(of);function IA(E){return g1(E)?af(Fl(E)):Vb(E)}function km(E){return function(I){return E==null?i:ku(E,I)}}var Nm=l1(),sC=l1(!0);function Wu(){return[]}function RA(){return!1}function yx(){return{}}function xx(){return""}function Lf(){return!0}function LA(E,I){if(E=nr(E),E<1||E>K)return[];var Q=ee,ae=sr(E,ee);I=Gi(I),E-=ee;for(var Me=cf(ae,I);++Q<E;)I(Q);return Me}function oC(E){return Ji(E)?vr(E,Fl):$o(E)?[E]:Yo(x1(Ur(E)))}function zl(E){var I=++Yc;return Ur(E)+I}var Ex=am(function(E,I){return E+I},0),_x=O0("ceil"),Bf=am(function(E,I){return E/I},1),aC=O0("floor");function lC(E){return E&&E.length?va(E,Jo,ou):i}function Df(E,I){return E&&E.length?va(E,Gi(I,2),ou):i}function fd(E){return zp(E,Jo)}function Pf(E,I){return zp(E,Gi(I,2))}function Of(E){return E&&E.length?va(E,Jo,w0):i}function cC(E,I){return E&&E.length?va(E,Gi(I,2),w0):i}var pd=am(function(E,I){return E*I},1),Ff=O0("round"),kf=am(function(E,I){return E-I},0);function Nf(E){return E&&E.length?Vc(E,Jo):0}function Uf(E,I){return E&&E.length?Vc(E,Gi(I,2)):0}return Ne.after=_w,Ne.ary=eA,Ne.assign=ad,Ne.assignIn=uA,Ne.assignInWith=bm,Ne.assignWith=wm,Ne.at=ld,Ne.before=U1,Ne.bind=tA,Ne.bindAll=vx,Ne.bindKey=G1,Ne.castArray=Bw,Ne.chain=P1,Ne.chunk=Nu,Ne.compact=V0,Ne.concat=E1,Ne.cond=Qu,Ne.conforms=Rf,Ne.constant=wA,Ne.countBy=ow,Ne.create=nx,Ne.curry=z1,Ne.curryRight=H1,Ne.debounce=V1,Ne.defaults=ix,Ne.defaultsDeep=Cm,Ne.defer=bw,Ne.delay=ww,Ne.difference=j0,Ne.differenceBy=Uu,Ne.differenceWith=nd,Ne.drop=_1,Ne.dropRight=Q0,Ne.dropRightWhile=A2,Ne.dropWhile=b1,Ne.fill=dm,Ne.filter=lw,Ne.flatMap=$0,Ne.flatMapDeep=O1,Ne.flatMapDepth=hw,Ne.flatten=K0,Ne.flattenDeep=X0,Ne.flattenDepth=v2,Ne.flip=Cw,Ne.flow=Jw,Ne.flowRight=Zw,Ne.fromPairs=y2,Ne.functions=ax,Ne.functionsIn=hA,Ne.groupBy=dw,Ne.initial=E2,Ne.intersection=_2,Ne.intersectionBy=b2,Ne.intersectionWith=w2,Ne.invert=lx,Ne.invertBy=Gl,Ne.invokeMap=pw,Ne.iteratee=CA,Ne.keyBy=F1,Ne.keys=js,Ne.keysIn=No,Ne.map=mm,Ne.mapKeys=dA,Ne.mapValues=Sm,Ne.matches=eC,Ne.matchesProperty=tC,Ne.memoize=gm,Ne.merge=Tm,Ne.mergeWith=fA,Ne.method=nC,Ne.methodOf=iC,Ne.mixin=MA,Ne.negate=Am,Ne.nthArg=dd,Ne.omit=ux,Ne.omitBy=zw,Ne.once=Mw,Ne.orderBy=mw,Ne.over=rC,Ne.overArgs=j1,Ne.overEvery=xs,Ne.overSome=Fm,Ne.partial=vm,Ne.partialRight=Q1,Ne.partition=gw,Ne.pick=Hw,Ne.pickBy=Im,Ne.property=IA,Ne.propertyOf=km,Ne.pull=T1,Ne.pullAll=Y0,Ne.pullAllBy=I1,Ne.pullAllWith=R1,Ne.pullAt=L1,Ne.range=Nm,Ne.rangeRight=sC,Ne.rearg=Sw,Ne.reject=vf,Ne.remove=B1,Ne.rest=Tw,Ne.reverse=du,Ne.sampleSize=N1,Ne.set=jw,Ne.setWith=ul,Ne.shuffle=yw,Ne.slice=Zs,Ne.sortBy=Ew,Ne.sortedUniq=R2,Ne.sortedUniqBy=L2,Ne.split=Cf,Ne.spread=Iw,Ne.tail=B2,Ne.take=D2,Ne.takeRight=P2,Ne.takeRightWhile=O2,Ne.takeWhile=F2,Ne.tap=$2,Ne.throttle=Rw,Ne.thru=pm,Ne.toArray=aA,Ne.toPairs=bf,Ne.toPairsIn=pA,Ne.toPath=oC,Ne.toPlainObject=cA,Ne.transform=mA,Ne.unary=Lw,Ne.union=k2,Ne.unionBy=N2,Ne.unionWith=U2,Ne.uniq=G2,Ne.uniqBy=z2,Ne.uniqWith=H2,Ne.unset=Rm,Ne.unzip=q0,Ne.unzipWith=D1,Ne.update=gA,Ne.updateWith=AA,Ne.values=gu,Ne.valuesIn=hx,Ne.without=V2,Ne.words=Au,Ne.wrap=W1,Ne.xor=j2,Ne.xorBy=Q2,Ne.xorWith=W2,Ne.zip=K2,Ne.zipObject=X2,Ne.zipObjectDeep=Y2,Ne.zipWith=q2,Ne.entries=bf,Ne.entriesIn=pA,Ne.extend=uA,Ne.extendWith=bm,MA(Ne,Ne),Ne.add=Ex,Ne.attempt=Ax,Ne.camelCase=Kw,Ne.capitalize=ud,Ne.ceil=_x,Ne.clamp=dx,Ne.clone=nA,Ne.cloneDeep=Dw,Ne.cloneDeepWith=Pw,Ne.cloneWith=iA,Ne.conformsTo=Ow,Ne.deburr=fx,Ne.defaultTo=$w,Ne.divide=Bf,Ne.endsWith=Xw,Ne.eq=cl,Ne.escape=Yw,Ne.escapeRegExp=qw,Ne.every=aw,Ne.find=cw,Ne.findIndex=w1,Ne.findKey=Gw,Ne.findLast=uw,Ne.findLastIndex=W0,Ne.findLastKey=_f,Ne.floor=aC,Ne.forEach=Af,Ne.forEachRight=J0,Ne.forIn=rx,Ne.forInRight=ko,Ne.forOwn=sx,Ne.forOwnRight=ox,Ne.get=cd,Ne.gt=Fw,Ne.gte=K1,Ne.has=mu,Ne.hasIn=Mm,Ne.head=C1,Ne.identity=Jo,Ne.includes=fw,Ne.indexOf=x2,Ne.inRange=Qw,Ne.invoke=cx,Ne.isArguments=Ea,Ne.isArray=Ji,Ne.isArrayBuffer=X1,Ne.isArrayLike=Fo,Ne.isArrayLikeObject=Ns,Ne.isBoolean=Y1,Ne.isBuffer=fu,Ne.isDate=rA,Ne.isElement=q1,Ne.isEmpty=kw,Ne.isEqual=Nw,Ne.isEqualWith=Uw,Ne.isError=sA,Ne.isFinite=$1,Ne.isFunction=Nl,Ne.isInteger=xf,Ne.isLength=Gu,Ne.isMap=_o,Ne.isMatch=zu,Ne.isMatchWith=oA,Ne.isNaN=id,Ne.isNative=Ef,Ne.isNil=sd,Ne.isNull=rd,Ne.isNumber=Hu,Ne.isObject=ps,Ne.isObjectLike=ls,Ne.isPlainObject=mc,Ne.isRegExp=ym,Ne.isSafeInteger=xm,Ne.isSet=od,Ne.isString=Vu,Ne.isSymbol=$o,Ne.isTypedArray=pu,Ne.isUndefined=J1,Ne.isWeakMap=Z1,Ne.isWeakSet=Em,Ne.join=C2,Ne.kebabCase=wf,Ne.last=xa,Ne.lastIndexOf=M1,Ne.lowerCase=vA,Ne.lowerFirst=px,Ne.lt=_m,Ne.lte=ex,Ne.max=lC,Ne.maxBy=Df,Ne.mean=fd,Ne.meanBy=Pf,Ne.min=Of,Ne.minBy=cC,Ne.stubArray=Wu,Ne.stubFalse=RA,Ne.stubObject=yx,Ne.stubString=xx,Ne.stubTrue=Lf,Ne.multiply=pd,Ne.nth=S1,Ne.noConflict=SA,Ne.noop=TA,Ne.now=yf,Ne.pad=Lm,Ne.padEnd=mx,Ne.padStart=yA,Ne.parseInt=xA,Ne.random=Ww,Ne.reduce=Aw,Ne.reduceRight=vw,Ne.repeat=EA,Ne.replace=_A,Ne.result=Vw,Ne.round=Ff,Ne.runInContext=yt,Ne.sample=k1,Ne.size=Z0,Ne.snakeCase=gx,Ne.some=xw,Ne.sortedIndex=eo,Ne.sortedIndexBy=fm,Ne.sortedIndexOf=M2,Ne.sortedLastIndex=S2,Ne.sortedLastIndexBy=T2,Ne.sortedLastIndexOf=I2,Ne.startCase=hd,Ne.startsWith=Mf,Ne.subtract=kf,Ne.sum=Nf,Ne.sumBy=Uf,Ne.template=Sf,Ne.times=LA,Ne.toFinite=Ul,Ne.toInteger=nr,Ne.toLength=lA,Ne.toLower=ju,Ne.toNumber=Qa,Ne.toSafeInteger=tx,Ne.toString=Ur,Ne.toUpper=Tf,Ne.trim=gc,Ne.trimEnd=If,Ne.trimStart=Bm,Ne.truncate=Dm,Ne.unescape=bA,Ne.uniqueId=zl,Ne.upperCase=Pm,Ne.upperFirst=Om,Ne.each=Af,Ne.eachRight=J0,Ne.first=C1,MA(Ne,function(){var E={};return Xo(Ne,function(I,Q){br.call(Ne.prototype,Q)||(E[Q]=I)}),E}(),{chain:!1}),Ne.VERSION=s,co(["bind","bindKey","curry","curryRight","partial","partialRight"],function(E){Ne[E].placeholder=Ne}),co(["drop","take"],function(E,I){Mr.prototype[E]=function(Q){Q=Q===i?1:Fi(nr(Q),0);var ae=this.__filtered__&&!I?new Mr(this):this.clone();return ae.__filtered__?ae.__takeCount__=sr(Q,ae.__takeCount__):ae.__views__.push({size:sr(Q,ee),type:E+(ae.__dir__<0?"Right":"")}),ae},Mr.prototype[E+"Right"]=function(Q){return this.reverse()[E](Q).reverse()}}),co(["filter","map","takeWhile"],function(E,I){var Q=I+1,ae=Q==F||Q==G;Mr.prototype[E]=function(Me){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Gi(Me,3),type:Q}),Ve.__filtered__=Ve.__filtered__||ae,Ve}}),co(["head","last"],function(E,I){var Q="take"+(I?"Right":"");Mr.prototype[E]=function(){return this[Q](1).value()[0]}}),co(["initial","tail"],function(E,I){var Q="drop"+(I?"":"Right");Mr.prototype[E]=function(){return this.__filtered__?new Mr(this):this[Q](1)}}),Mr.prototype.compact=function(){return this.filter(Jo)},Mr.prototype.find=function(E){return this.filter(E).head()},Mr.prototype.findLast=function(E){return this.reverse().find(E)},Mr.prototype.invokeMap=mr(function(E,I){return typeof E=="function"?new Mr(this):this.map(function(Q){return df(Q,E,I)})}),Mr.prototype.reject=function(E){return this.filter(Am(Gi(E)))},Mr.prototype.slice=function(E,I){E=nr(E);var Q=this;return Q.__filtered__&&(E>0||I<0)?new Mr(Q):(E<0?Q=Q.takeRight(-E):E&&(Q=Q.drop(E)),I!==i&&(I=nr(I),Q=I<0?Q.dropRight(-I):Q.take(I-E)),Q)},Mr.prototype.takeRightWhile=function(E){return this.reverse().takeWhile(E).reverse()},Mr.prototype.toArray=function(){return this.take(ee)},Xo(Mr.prototype,function(E,I){var Q=/^(?:filter|find|map|reject)|While$/.test(I),ae=/^(?:head|last)$/.test(I),Me=Ne[ae?"take"+(I=="last"?"Right":""):I],Ve=ae||/^find/.test(I);Me&&(Ne.prototype[I]=function(){var lt=this.__wrapped__,pt=ae?[1]:arguments,wt=lt instanceof Mr,rn=pt[0],sn=wt||Ji(lt),gn=function(gr){var wr=Me.apply(Ne,Kr([gr],pt));return ae&&Xn?wr[0]:wr};sn&&Q&&typeof rn=="function"&&rn.length!=1&&(wt=sn=!1);var Xn=this.__chain__,Jn=!!this.__actions__.length,Si=Ve&&!Xn,ir=wt&&!Jn;if(!Ve&&sn){lt=ir?lt:new Mr(this);var ki=E.apply(lt,pt);return ki.__actions__.push({func:pm,args:[gn],thisArg:i}),new ys(ki,Xn)}return Si&&ir?E.apply(this,pt):(ki=this.thru(gn),Si?ae?ki.value()[0]:ki.value():ki)})}),co(["pop","push","shift","sort","splice","unshift"],function(E){var I=rl[E],Q=/^(?:push|sort|unshift)$/.test(E)?"tap":"thru",ae=/^(?:pop|shift)$/.test(E);Ne.prototype[E]=function(){var Me=arguments;if(ae&&!this.__chain__){var Ve=this.value();return I.apply(Ji(Ve)?Ve:[],Me)}return this[Q](function(lt){return I.apply(Ji(lt)?lt:[],Me)})}}),Xo(Mr.prototype,function(E,I){var Q=Ne[I];if(Q){var ae=Q.name+"";br.call(uc,ae)||(uc[ae]=[]),uc[ae].push({name:I,func:Q})}}),uc[om(i,m).name]=[{name:"wrapper",func:i}],Mr.prototype.clone=yo,Mr.prototype.reverse=eu,Mr.prototype.value=Hs,Ne.prototype.at=J2,Ne.prototype.chain=Z2,Ne.prototype.commit=ew,Ne.prototype.next=tw,Ne.prototype.plant=iw,Ne.prototype.reverse=rw,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=sw,Ne.prototype.first=Ne.prototype.head,hr&&(Ne.prototype[hr]=nw),Ne},Kc=Pu();Ml?((Ml.exports=Kc)._=Kc,nf._=Kc):Xs._=Kc}).call(UA)})(Q_,Q_.exports);var aa=Q_.exports;const Wte={"container-to-endpoint":Jte,"edgestack-to-edgegroup":nne,"schedule-to-container":Zte,"schedule-to-edgegroup":tne,"schedule-to-edgestack":ene,"edgegroup-to-endpoint":ine,"edgegroup-to-tag":Xte,"tag-to-endpoint":Yte,"tag-to-endpointgroup":qte,"endpointgroup-to-endpoint":$te};function Kte(n,e){return Object.entries(Wte).flatMap(([i,s])=>e[i]?s(n,i):[])}function RI(n,e,i,s,{value:o=1,inverted:l=!1}={value:1,inverted:!1}){return aa.compact(aa.flattenDeep(e.map(c=>{const d=i.find(u=>s(c,u));if(d)return{source:l?d.graphId:c.graphId,target:l?c.graphId:d.graphId,value:o,type:n}})))}function Xte({edgeGroups:n,tags:e},i){return aa.compact(n.flatMap(s=>{var o;return(o=s.tags)==null?void 0:o.map(l=>{const c=e.find(d=>d.id===l);if(c)return{source:s.graphId,target:c.graphId,value:1,type:i}})}))}function Yte({tags:n,endpoints:e},i){return aa.compact(aa.flattenDeep(e.map(s=>s.tags.map(o=>{const l=n.find(c=>c.id===o);if(l)return{source:l.graphId,target:s.graphId,value:1,type:i}}))))}function qte({tags:n,endpointGroups:e},i){return aa.compact(aa.flattenDeep(e.map(s=>s.tags.map(o=>{const l=n.find(c=>c.id===o);if(l)return{source:l.graphId,target:s.graphId,value:1,type:i}}))))}function $te({endpointGroups:n,endpoints:e},i){return aa.compact(aa.flattenDeep(e.map(s=>{const o=n.find(l=>l.id===s.endpointGroup);if(o)return{source:o.graphId,target:s.graphId,value:1,type:i}})))}function Jte({containers:n,endpoints:e},i){return RI(i,n,e,(s,o)=>s.endpoint===o.id,{value:1})}function Zte({schedules:n,containers:e},i){return RI(i,e,n,(s,o)=>o.id.toString()===s.schedule,{inverted:!0})}function ene({schedules:n,edgeStacks:e},i){return RI(i,e,n,(s,o)=>s.schedule===o.id,{inverted:!0})}function tne({schedules:n,edgeGroups:e},i){return aa.compact(n.flatMap(s=>s.edgeGroupIds.map(o=>{const l=e.find(c=>c.id===o);if(l)return{source:s.graphId,target:l.graphId,value:1,type:i}})))}function nne({edgeStacks:n,edgeGroups:e},i){return aa.compact(n.flatMap(s=>s.edgeGroups.map(o=>{const l=e.find(c=>c.id===o);if(l)return{source:s.graphId,target:l.graphId,value:1,type:i}})))}function ine({edgeGroups:n,endpoints:e},i){return aa.compact(n.flatMap(s=>s.endpoints.map(o=>{const l=e.find(c=>c.id===o);if(l)return{source:s.graphId,target:l.graphId,value:1,type:i}})))}function rne({onChange:n,id:e,className:i}){const s=o=>{if(o.target.files){const l=new FileReader;l.readAsText(o.target.files[0],"UTF-8"),l.onload=c=>{var d;(d=c.target)!=null&&d.result&&n(c.target.result)}}};return ss.jsx("input",{className:i,type:"file",id:e,onChange:o=>s(o)})}function Bp(n,e){return`${n}-${e}`}function sne(n,e){return aa.compact(e.flatMap(({id:i})=>{const s=n.snapshots.find(o=>o.EndpointId===i);if(!(!s||!s.Docker))return s.Docker.DockerSnapshotRaw.Containers.map(({Id:o,Labels:l,Names:c})=>{var d;return{graphId:Bp("container",o),type:"container",name:c[0].slice(1),id:o,endpoint:s.EndpointId,schedule:l["io.portainer.update.scheduleId"],edgeStack:aa.parseInt(((d=l["com.docker.compose.project.working_dir"])==null?void 0:d.split("/edge_stacks/")[2])||"-1")}})}))}function one(n){return n.edge_update_schedule.map(({id:e,edgeGroupIds:i,name:s})=>({graphId:Bp("schedule",e),type:"schedule",name:s,id:e,edgeGroupIds:i}))}function ane(n){return n.endpoints.map(({Id:e,Name:i,TagIds:s,GroupId:o})=>({graphId:Bp("endpoint",e),type:"endpoint",name:i,id:e,tags:s,endpointGroup:o}))}function lne(n){return n.edge_stack.map(({Id:e,Name:i,EdgeGroups:s,EdgeUpdateID:o})=>({graphId:Bp("edgestack",e),type:"edgestack",name:i,id:e,schedule:o,edgeGroups:s}))}function cne(n){return n.edgegroups.map(({Id:e,Endpoints:i,Name:s,TagIds:o})=>({graphId:Bp("edgegroup",e),type:"edgegroup",endpoints:i,name:s,id:e,tags:o}))}const une=n=>{const e=Pr.useRef(n);return Pr.useEffect(()=>{e.current=n}),e},hne=une,dne=(n,e=100,i=!1)=>{const s=hne(n),o=Pr.useRef(),l=[e,i,s];function c(){o.current&&clearTimeout(o.current),o.current=void 0}Pr.useEffect(()=>c,l);function d(){o.current=void 0}return Pr.useCallback(function(){const u=arguments,{current:f}=o;if(f===void 0&&i)return o.current=setTimeout(d,e),s.current.apply(null,u);f&&clearTimeout(f),o.current=setTimeout(()=>{o.current=void 0,s.current.apply(null,u)},e)},l)},fne=(n,e,i)=>{const s=Pr.useState(n);return[s[0],dne(s[1],e,i)]};function lS(n,e,i,s){const o=Pr.useRef(i),l=Pr.useRef(s);Pr.useEffect(()=>{o.current=i,l.current=s}),Pr.useEffect(()=>{const c=n&&"current"in n?n.current:n;if(!c)return;let d=0;function u(...A){d||o.current.apply(this,A)}c.addEventListener(e,u);const f=l.current;return()=>{d=1,c.removeEventListener(e,u),f&&f()}},[n,e])}const pne={},jv=typeof window>"u"?null:window,mne=jv&&typeof jv.visualViewport<"u"?jv.visualViewport:null,HP=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],gne=function(n){n===void 0&&(n=pne);const{wait:e,leading:i,initialWidth:s=0,initialHeight:o=0}=n,[l,c]=fne(typeof document>"u"?[s,o]:HP,e,i),d=()=>c(HP);return lS(jv,"resize",d),lS(mne,"resize",d),lS(jv,"orientationchange",d),l},S5=Pr.createContext(null);function T5(){const n=Pr.useContext(S5);if(!n)throw new Error("use inside provider");return n}function Ane({children:n}){const[e,i]=Pr.useState({use3d:!1,showNames:!1});return ss.jsx(S5.Provider,{value:{options:e,setOptions:s=>i(o=>({...o,...s}))},children:n})}const I5=Pr.createContext(null);function R5(){const n=Pr.useContext(I5);if(!n)throw new Error("use inside provider");return n}function vne({children:n}){const[e,i]=Pr.useState({"container-to-endpoint":!0,"edgegroup-to-endpoint":!0,"edgestack-to-edgegroup":!0,"schedule-to-container":!0,"schedule-to-edgestack":!0,"schedule-to-edgegroup":!0,"edgegroup-to-tag":!0,"tag-to-endpoint":!0,"tag-to-endpointgroup":!0,"endpointgroup-to-endpoint":!0});return ss.jsx(I5.Provider,{value:{linksConfig:e,setLinksConfig:s=>i(o=>({...o,...s}))},children:n})}function yne(n){return n.endpoint_groups.map(({Id:e,Name:i,TagIds:s})=>({graphId:Bp("endpointgroup",e),type:"endpointgroup",name:i,id:e,tags:s}))}function xne(n){return n.tags.map(({ID:e,Name:i,Endpoints:s,EndpointGroups:o})=>({graphId:Bp("tag",e),type:"tag",name:i,id:e,endpointGroups:Object.keys(o).map(aa.parseInt),endpoints:Object.keys(s).map(aa.parseInt)}))}function Ene(){const[n,e]=gne(),{options:i}=T5(),{linksConfig:s}=R5(),[o,l]=Pr.useState(void 0),[c,d]=Pr.useState(void 0),[u,f]=Pr.useState(void 0);Pr.useEffect(()=>{if(!o)return;const y=ane(o),v=sne(o,y),_=one(o),x=lne(o),b=cne(o),m=yne(o),S=xne(o),C={nodes:[...y,...v,..._,...x,...b,...m,...S],links:[]};d(C),f({endpoints:y,containers:v,schedules:_,edgeStacks:x,edgeGroups:b,endpointGroups:m,tags:S})},[o]);const A=Pr.useCallback(()=>{if(!o||!u||!c)return;const y=Kte(u,s);d({...c,links:y})},[o,u,c,s]),g=i.use3d?TI:II;return ss.jsxs("div",{className:"relative bg-black h-screen w-screen",children:[ss.jsxs("div",{className:"absolute top-2.5 left-2.5 bg-white z-50 rounded p-2",children:[ss.jsx(_ne,{data:c,json:o,render:A,setData:d,setJson:l}),ss.jsx(bne,{})]}),c&&c.links.length&&ss.jsx(g,{width:n,height:e,graphData:c,nodeId:"graphId",nodeLabel:y=>`<div style="display: flex; flex-direction: column;">
              <span>${y.graphId.slice(0,30)}</span>
              <span>${y.name}</span>
            </div>`,nodeAutoColorBy:"type",nodeThreeObject:i.showNames&&i.use3d?y=>{const v=new Qte(y.name);return v.color=y.color,v.textHeight=8,v}:void 0,linkAutoColorBy:"type",linkOpacity:.8,linkDirectionalParticles:"value",linkDirectionalParticleSpeed:y=>y.value*.001,linkDirectionalArrowLength:3.5,linkDirectionalArrowRelPos:1,linkCurvature:0,nodeRelSize:!i.use3d&&i.showNames?1:void 0,nodeCanvasObject:i.use3d||!i.showNames?void 0:(y,v,_)=>{const x=y.name,b=20/_;v.font=`${b}px Sans-serif`;const S=[v.measureText(x).width,b].map(C=>C+b*.2);v.strokeStyle="rgba(255, 255, 255, 0.5)",v.lineWidth=1/_,v.strokeRect(y.x-S[0]/2,y.y-S[1]/2,S[0],S[1]),v.fillStyle="#000000",v.fillRect(y.x-S[0]/2,y.y-S[1]/2,S[0],S[1]),v.textAlign="center",v.textBaseline="middle",v.fillStyle=y.color,v.fillText(x,y.x,y.y),y.__bckgDimensions=S},nodePointerAreaPaint:i.use3d||!i.showNames?void 0:(y,v,_)=>{_.fillStyle=v;const x=y.__bckgDimensions;x&&_.fillRect(y.x-x[0]/2,y.y-x[1]/2,...x)}})]})}function _ne({json:n,setJson:e,data:i,setData:s,render:o}){const{options:l,setOptions:c}=T5();return ss.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ss.jsx(rne,{id:"file-upload",className:"col-span-2",onChange:d=>e(JSON.parse(d))}),ss.jsx("button",{disabled:!n,className:"rounded border border-black px-2 disabled:opacity-50",onClick:o,children:"Render"}),ss.jsx("button",{disabled:!n||!i,className:"rounded border border-black px-2 disabled:opacity-50",onClick:()=>s({nodes:(i==null?void 0:i.nodes)||[],links:[]}),children:"Reset"}),ss.jsxs("div",{className:"flex gap-2",children:[ss.jsx("label",{htmlFor:"3d",children:"Enable 3D"}),ss.jsx("input",{type:"checkbox",checked:l.use3d,onChange:()=>c({use3d:!l.use3d}),id:"3d"})]}),ss.jsxs("div",{className:"flex gap-2",children:[ss.jsx("label",{htmlFor:"display-names",children:"Show names"}),ss.jsx("input",{type:"checkbox",checked:l.showNames,onChange:()=>c({showNames:!l.showNames}),id:"display-names"})]})]})}function bne(){const{linksConfig:n,setLinksConfig:e}=R5();return ss.jsxs("div",{className:"mt-2",children:[ss.jsx("span",{className:"font-bold",children:"Relations"}),ss.jsx("div",{className:"flex flex-col",children:Object.entries(n).map(([i,s],o)=>ss.jsxs("div",{className:"flex flex-row gap-2",children:[ss.jsx("input",{type:"checkbox",id:i,checked:s,onChange:()=>e({[i]:!s})}),ss.jsx("label",{htmlFor:i,children:i.replace("-to-"," -> ")})]},o))})]})}cS.createRoot(document.getElementById("root")).render(ss.jsx(JP.StrictMode,{children:ss.jsx(Ane,{children:ss.jsx(vne,{children:ss.jsx(Ene,{})})})}));
